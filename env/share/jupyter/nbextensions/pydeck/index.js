(function webpackUniversalModuleDefinition(root, factory) {
  if (typeof exports === 'object' && typeof module === 'object')
    module.exports = factory();
  else if (typeof define === 'function' && define.amd) define([], factory);
        else {
  var a = factory();
  for (var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];
}})(globalThis, function () {
"use strict";var __exports__=(()=>{var $ae=Object.create;var Yb=Object.defineProperty;var Jae=Object.getOwnPropertyDescriptor;var Qae=Object.getOwnPropertyNames;var eoe=Object.getPrototypeOf,toe=Object.prototype.hasOwnProperty;var pg=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(r,e)=>(typeof require<"u"?require:r)[e]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var Yf=(t,r)=>()=>(t&&(r=t(t=0)),r);var mr=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),Tl=(t,r)=>{for(var e in r)Yb(t,e,{get:r[e],enumerable:!0})},xF=(t,r,e,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of Qae(r))!toe.call(t,i)&&i!==e&&Yb(t,i,{get:()=>r[i],enumerable:!(n=Jae(r,i))||n.enumerable});return t};var en=(t,r,e)=>(e=t!=null?$ae(eoe(t)):{},xF(r||!t||!t.__esModule?Yb(e,"default",{value:t,enumerable:!0}):e,t)),roe=t=>xF(Yb({},"__esModule",{value:!0}),t);function _(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var et=Yf(()=>{});function vr(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?vr=function(e){return typeof e}:vr=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vr(t)}var Ii=Yf(()=>{});var TF=mr((DFe,oC)=>{var aC=function(t){"use strict";var r=Object.prototype,e=r.hasOwnProperty,n,i=typeof Symbol=="function"?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(qe,We,ot){return Object.defineProperty(qe,We,{value:ot,enumerable:!0,configurable:!0,writable:!0}),qe[We]}try{u({},"")}catch{u=function(We,ot,gt){return We[ot]=gt}}function c(qe,We,ot,gt){var Pt=We&&We.prototype instanceof D?We:D,Dt=Object.create(Pt.prototype),nr=new ee(gt||[]);return Dt._invoke=I(qe,ot,nr),Dt}t.wrap=c;function h(qe,We,ot){try{return{type:"normal",arg:qe.call(We,ot)}}catch(gt){return{type:"throw",arg:gt}}}var p="suspendedStart",v="suspendedYield",x="executing",E="completed",R={};function D(){}function H(){}function W(){}var $={};u($,a,function(){return this});var J=Object.getPrototypeOf,B=J&&J(J(pe([])));B&&B!==r&&e.call(B,a)&&($=B);var se=W.prototype=D.prototype=Object.create($);H.prototype=W,u(se,"constructor",W),u(W,"constructor",H),H.displayName=u(W,s,"GeneratorFunction");function V(qe){["next","throw","return"].forEach(function(We){u(qe,We,function(ot){return this._invoke(We,ot)})})}t.isGeneratorFunction=function(qe){var We=typeof qe=="function"&&qe.constructor;return We?We===H||(We.displayName||We.name)==="GeneratorFunction":!1},t.mark=function(qe){return Object.setPrototypeOf?Object.setPrototypeOf(qe,W):(qe.__proto__=W,u(qe,s,"GeneratorFunction")),qe.prototype=Object.create(se),qe},t.awrap=function(qe){return{__await:qe}};function X(qe,We){function ot(Dt,nr,Nt,Ut){var Or=h(qe[Dt],qe,nr);if(Or.type==="throw")Ut(Or.arg);else{var he=Or.arg,xe=he.value;return xe&&typeof xe=="object"&&e.call(xe,"__await")?We.resolve(xe.__await).then(function(Ge){ot("next",Ge,Nt,Ut)},function(Ge){ot("throw",Ge,Nt,Ut)}):We.resolve(xe).then(function(Ge){he.value=Ge,Nt(he)},function(Ge){return ot("throw",Ge,Nt,Ut)})}}var gt;function Pt(Dt,nr){function Nt(){return new We(function(Ut,Or){ot(Dt,nr,Ut,Or)})}return gt=gt?gt.then(Nt,Nt):Nt()}this._invoke=Pt}V(X.prototype),u(X.prototype,o,function(){return this}),t.AsyncIterator=X,t.async=function(qe,We,ot,gt,Pt){Pt===void 0&&(Pt=Promise);var Dt=new X(c(qe,We,ot,gt),Pt);return t.isGeneratorFunction(We)?Dt:Dt.next().then(function(nr){return nr.done?nr.value:Dt.next()})};function I(qe,We,ot){var gt=p;return function(Dt,nr){if(gt===x)throw new Error("Generator is already running");if(gt===E){if(Dt==="throw")throw nr;return je()}for(ot.method=Dt,ot.arg=nr;;){var Nt=ot.delegate;if(Nt){var Ut=O(Nt,ot);if(Ut){if(Ut===R)continue;return Ut}}if(ot.method==="next")ot.sent=ot._sent=ot.arg;else if(ot.method==="throw"){if(gt===p)throw gt=E,ot.arg;ot.dispatchException(ot.arg)}else ot.method==="return"&&ot.abrupt("return",ot.arg);gt=x;var Or=h(qe,We,ot);if(Or.type==="normal"){if(gt=ot.done?E:v,Or.arg===R)continue;return{value:Or.arg,done:ot.done}}else Or.type==="throw"&&(gt=E,ot.method="throw",ot.arg=Or.arg)}}}function O(qe,We){var ot=qe.iterator[We.method];if(ot===n){if(We.delegate=null,We.method==="throw"){if(qe.iterator.return&&(We.method="return",We.arg=n,O(qe,We),We.method==="throw"))return R;We.method="throw",We.arg=new TypeError("The iterator does not provide a 'throw' method")}return R}var gt=h(ot,qe.iterator,We.arg);if(gt.type==="throw")return We.method="throw",We.arg=gt.arg,We.delegate=null,R;var Pt=gt.arg;if(!Pt)return We.method="throw",We.arg=new TypeError("iterator result is not an object"),We.delegate=null,R;if(Pt.done)We[qe.resultName]=Pt.value,We.next=qe.nextLoc,We.method!=="return"&&(We.method="next",We.arg=n);else return Pt;return We.delegate=null,R}V(se),u(se,s,"Generator"),u(se,a,function(){return this}),u(se,"toString",function(){return"[object Generator]"});function U(qe){var We={tryLoc:qe[0]};1 in qe&&(We.catchLoc=qe[1]),2 in qe&&(We.finallyLoc=qe[2],We.afterLoc=qe[3]),this.tryEntries.push(We)}function re(qe){var We=qe.completion||{};We.type="normal",delete We.arg,qe.completion=We}function ee(qe){this.tryEntries=[{tryLoc:"root"}],qe.forEach(U,this),this.reset(!0)}t.keys=function(qe){var We=[];for(var ot in qe)We.push(ot);return We.reverse(),function gt(){for(;We.length;){var Pt=We.pop();if(Pt in qe)return gt.value=Pt,gt.done=!1,gt}return gt.done=!0,gt}};function pe(qe){if(qe){var We=qe[a];if(We)return We.call(qe);if(typeof qe.next=="function")return qe;if(!isNaN(qe.length)){var ot=-1,gt=function Pt(){for(;++ot<qe.length;)if(e.call(qe,ot))return Pt.value=qe[ot],Pt.done=!1,Pt;return Pt.value=n,Pt.done=!0,Pt};return gt.next=gt}}return{next:je}}t.values=pe;function je(){return{value:n,done:!0}}return ee.prototype={constructor:ee,reset:function(qe){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(re),!qe)for(var We in this)We.charAt(0)==="t"&&e.call(this,We)&&!isNaN(+We.slice(1))&&(this[We]=n)},stop:function(){this.done=!0;var qe=this.tryEntries[0],We=qe.completion;if(We.type==="throw")throw We.arg;return this.rval},dispatchException:function(qe){if(this.done)throw qe;var We=this;function ot(Ut,Or){return Dt.type="throw",Dt.arg=qe,We.next=Ut,Or&&(We.method="next",We.arg=n),!!Or}for(var gt=this.tryEntries.length-1;gt>=0;--gt){var Pt=this.tryEntries[gt],Dt=Pt.completion;if(Pt.tryLoc==="root")return ot("end");if(Pt.tryLoc<=this.prev){var nr=e.call(Pt,"catchLoc"),Nt=e.call(Pt,"finallyLoc");if(nr&&Nt){if(this.prev<Pt.catchLoc)return ot(Pt.catchLoc,!0);if(this.prev<Pt.finallyLoc)return ot(Pt.finallyLoc)}else if(nr){if(this.prev<Pt.catchLoc)return ot(Pt.catchLoc,!0)}else if(Nt){if(this.prev<Pt.finallyLoc)return ot(Pt.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(qe,We){for(var ot=this.tryEntries.length-1;ot>=0;--ot){var gt=this.tryEntries[ot];if(gt.tryLoc<=this.prev&&e.call(gt,"finallyLoc")&&this.prev<gt.finallyLoc){var Pt=gt;break}}Pt&&(qe==="break"||qe==="continue")&&Pt.tryLoc<=We&&We<=Pt.finallyLoc&&(Pt=null);var Dt=Pt?Pt.completion:{};return Dt.type=qe,Dt.arg=We,Pt?(this.method="next",this.next=Pt.finallyLoc,R):this.complete(Dt)},complete:function(qe,We){if(qe.type==="throw")throw qe.arg;return qe.type==="break"||qe.type==="continue"?this.next=qe.arg:qe.type==="return"?(this.rval=this.arg=qe.arg,this.method="return",this.next="end"):qe.type==="normal"&&We&&(this.next=We),R},finish:function(qe){for(var We=this.tryEntries.length-1;We>=0;--We){var ot=this.tryEntries[We];if(ot.finallyLoc===qe)return this.complete(ot.completion,ot.afterLoc),re(ot),R}},catch:function(qe){for(var We=this.tryEntries.length-1;We>=0;--We){var ot=this.tryEntries[We];if(ot.tryLoc===qe){var gt=ot.completion;if(gt.type==="throw"){var Pt=gt.arg;re(ot)}return Pt}}throw new Error("illegal catch attempt")},delegateYield:function(qe,We,ot){return this.delegate={iterator:pe(qe),resultName:We,nextLoc:ot},this.method==="next"&&(this.arg=n),R}},t}(typeof oC=="object"?oC.exports:{});try{regeneratorRuntime=aC}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=aC:Function("r","regeneratorRuntime = r")(aC)}});var On=mr((FFe,SF)=>{SF.exports=TF()});function ce(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var at=Yf(()=>{});function EF(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ve(t,r,e){return r&&EF(t.prototype,r),e&&EF(t,e),t}var vt=Yf(()=>{});function sC(t){if(Array.isArray(t))return t}var IF=Yf(()=>{});function uC(t,r){var e=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(e!=null){var n=[],i=!0,a=!1,o,s;try{for(e=e.call(t);!(i=(o=e.next()).done)&&(n.push(o.value),!(r&&n.length===r));i=!0);}catch(u){a=!0,s=u}finally{try{!i&&e.return!=null&&e.return()}finally{if(a)throw s}}return n}}var RF=Yf(()=>{});function dg(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var lC=Yf(()=>{});function Py(t,r){if(t){if(typeof t=="string")return dg(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return dg(t,r)}}var cC=Yf(()=>{lC()});function fC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var LF=Yf(()=>{});function Ot(t,r){return sC(t)||uC(t,r)||Py(t,r)||fC()}var Mn=Yf(()=>{IF();RF();cC();LF()});var G4=mr(()=>{});var tz=mr((MP,IP)=>{(function(t,r){typeof MP=="object"&&typeof IP<"u"?IP.exports=r():typeof define=="function"&&define.amd?define(r):(t=t||self,t.mapboxgl=r())})(MP,function(){"use strict";var t,r,e;function n(i,a){if(!t)t=a;else if(!r)r=a;else{var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+r+")(sharedChunk);",s={};t(s),e=a(s),typeof window<"u"&&(e.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}}return n(["exports"],function(i){"use strict";function a(l,f){return l(f={exports:{}},f.exports),f.exports}var o=s;function s(l,f,d,T){this.cx=3*l,this.bx=3*(d-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*f,this.by=3*(T-f)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=T,this.p2x=d,this.p2y=T}s.prototype.sampleCurveX=function(l){return((this.ax*l+this.bx)*l+this.cx)*l},s.prototype.sampleCurveY=function(l){return((this.ay*l+this.by)*l+this.cy)*l},s.prototype.sampleCurveDerivativeX=function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},s.prototype.solveCurveX=function(l,f){var d,T,P,L,z;for(f===void 0&&(f=1e-6),P=l,z=0;z<8;z++){if(L=this.sampleCurveX(P)-l,Math.abs(L)<f)return P;var Z=this.sampleCurveDerivativeX(P);if(Math.abs(Z)<1e-6)break;P-=L/Z}if((P=l)<(d=0))return d;if(P>(T=1))return T;for(;d<T;){if(L=this.sampleCurveX(P),Math.abs(L-l)<f)return P;l>L?d=P:T=P,P=.5*(T-d)+d}return P},s.prototype.solve=function(l,f){return this.sampleCurveY(this.solveCurveX(l,f))};var u=c;function c(l,f){this.x=l,this.y=f}c.prototype={clone:function(){return new c(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,f){return this.clone()._rotateAround(l,f)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var f=l.x-this.x,d=l.y-this.y;return f*f+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,f){return Math.atan2(this.x*f-this.y*l,this.x*l+this.y*f)},_matMult:function(l){var f=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=f,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var f=Math.cos(l),d=Math.sin(l),T=d*this.x+f*this.y;return this.x=f*this.x-d*this.y,this.y=T,this},_rotateAround:function(l,f){var d=Math.cos(l),T=Math.sin(l),P=f.y+T*(this.x-f.x)+d*(this.y-f.y);return this.x=f.x+d*(this.x-f.x)-T*(this.y-f.y),this.y=P,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},c.convert=function(l){return l instanceof c?l:Array.isArray(l)?new c(l[0],l[1]):l};var h=typeof self<"u"?self:{},p=Math.pow(2,53)-1;function v(l,f,d,T){var P=new o(l,f,d,T);return function(L){return P.solve(L)}}var x=v(.25,.1,.25,1);function E(l,f,d){return Math.min(d,Math.max(f,l))}function R(l,f,d){var T=d-f,P=((l-f)%T+T)%T+f;return P===f?d:P}function D(l){for(var f=[],d=arguments.length-1;d-- >0;)f[d]=arguments[d+1];for(var T=0,P=f;T<P.length;T+=1){var L=P[T];for(var z in L)l[z]=L[z]}return l}var H=1;function W(){return H++}function $(){return function l(f){return f?(f^16*Math.random()>>f/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,l)}()}function J(l){return!!l&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(l)}function B(l,f){l.forEach(function(d){f[d]&&(f[d]=f[d].bind(f))})}function se(l,f){return l.indexOf(f,l.length-f.length)!==-1}function V(l,f,d){var T={};for(var P in l)T[P]=f.call(d||this,l[P],P,l);return T}function X(l,f,d){var T={};for(var P in l)f.call(d||this,l[P],P,l)&&(T[P]=l[P]);return T}function I(l){return Array.isArray(l)?l.map(I):typeof l=="object"&&l?V(l,I):l}var O={};function U(l){O[l]||(typeof console<"u"&&console.warn(l),O[l]=!0)}function re(l,f,d){return(d.y-l.y)*(f.x-l.x)>(f.y-l.y)*(d.x-l.x)}function ee(l){for(var f=0,d=0,T=l.length,P=T-1,L=void 0,z=void 0;d<T;P=d++)f+=((z=l[P]).x-(L=l[d]).x)*(L.y+z.y);return f}function pe(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function je(l){var f={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(T,P,L,z){var Z=L||z;return f[P]=!Z||Z.toLowerCase(),""}),f["max-age"]){var d=parseInt(f["max-age"],10);isNaN(d)?delete f["max-age"]:f["max-age"]=d}return f}var qe=null;function We(l){if(qe==null){var f=l.navigator?l.navigator.userAgent:null;qe=!!l.safari||!(!f||!(/\b(iPad|iPhone|iPod)\b/.test(f)||f.match("Safari")&&!f.match("Chrome")))}return qe}function ot(l){try{var f=h[l];return f.setItem("_mapbox_test_",1),f.removeItem("_mapbox_test_"),!0}catch{return!1}}var gt,Pt,Dt,nr,Nt=h.performance&&h.performance.now?h.performance.now.bind(h.performance):Date.now.bind(Date),Ut=h.requestAnimationFrame||h.mozRequestAnimationFrame||h.webkitRequestAnimationFrame||h.msRequestAnimationFrame,Or=h.cancelAnimationFrame||h.mozCancelAnimationFrame||h.webkitCancelAnimationFrame||h.msCancelAnimationFrame,he={now:Nt,frame:function(l){var f=Ut(l);return{cancel:function(){return Or(f)}}},getImageData:function(l,f){f===void 0&&(f=0);var d=h.document.createElement("canvas"),T=d.getContext("2d");if(!T)throw new Error("failed to create canvas 2d context");return d.width=l.width,d.height=l.height,T.drawImage(l,0,0,l.width,l.height),T.getImageData(-f,-f,l.width+2*f,l.height+2*f)},resolveURL:function(l){return gt||(gt=h.document.createElement("a")),gt.href=l,gt.href},hardwareConcurrency:h.navigator&&h.navigator.hardwareConcurrency||4,get devicePixelRatio(){return h.devicePixelRatio},get prefersReducedMotion(){return!!h.matchMedia&&(Pt==null&&(Pt=h.matchMedia("(prefers-reduced-motion: reduce)")),Pt.matches)}},xe={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Ge={supported:!1,testSupport:function(l){!bt&&nr&&(Kt?Gt(l):Dt=l)}},bt=!1,Kt=!1;function Gt(l){var f=l.createTexture();l.bindTexture(l.TEXTURE_2D,f);try{if(l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,nr),l.isContextLost())return;Ge.supported=!0}catch{}l.deleteTexture(f),bt=!0}h.document&&((nr=h.document.createElement("img")).onload=function(){Dt&&Gt(Dt),Dt=null,Kt=!0},nr.onerror=function(){bt=!0,Dt=null},nr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var tn="01",an=function(l,f){this._transformRequestFn=l,this._customAccessToken=f,this._createSkuToken()};function Fn(l){return l.indexOf("mapbox:")===0}an.prototype._createSkuToken=function(){var l=function(){for(var f="",d=0;d<10;d++)f+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",tn,f].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=l.token,this._skuTokenExpiresAt=l.tokenExpiresAt},an.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},an.prototype.transformRequest=function(l,f){return this._transformRequestFn&&this._transformRequestFn(l,f)||{url:l}},an.prototype.normalizeStyleURL=function(l,f){if(!Fn(l))return l;var d=Ti(l);return d.path="/styles/v1"+d.path,this._makeAPIURL(d,this._customAccessToken||f)},an.prototype.normalizeGlyphsURL=function(l,f){if(!Fn(l))return l;var d=Ti(l);return d.path="/fonts/v1"+d.path,this._makeAPIURL(d,this._customAccessToken||f)},an.prototype.normalizeSourceURL=function(l,f){if(!Fn(l))return l;var d=Ti(l);return d.path="/v4/"+d.authority+".json",d.params.push("secure"),this._makeAPIURL(d,this._customAccessToken||f)},an.prototype.normalizeSpriteURL=function(l,f,d,T){var P=Ti(l);return Fn(l)?(P.path="/styles/v1"+P.path+"/sprite"+f+d,this._makeAPIURL(P,this._customAccessToken||T)):(P.path+=""+f+d,ka(P))},an.prototype.normalizeTileURL=function(l,f){if(this._isSkuTokenExpired()&&this._createSkuToken(),l&&!Fn(l))return l;var d=Ti(l);d.path=d.path.replace(/(\.(png|jpg)\d*)(?=$)/,(he.devicePixelRatio>=2||f===512?"@2x":"")+(Ge.supported?".webp":"$1")),d.path=d.path.replace(/^.+\/v4\//,"/"),d.path="/v4"+d.path;var T=this._customAccessToken||function(P){for(var L=0,z=P;L<z.length;L+=1){var Z=z[L].match(/^access_token=(.*)$/);if(Z)return Z[1]}return null}(d.params)||xe.ACCESS_TOKEN;return xe.REQUIRE_ACCESS_TOKEN&&T&&this._skuToken&&d.params.push("sku="+this._skuToken),this._makeAPIURL(d,T)},an.prototype.canonicalizeTileURL=function(l,f){var d=Ti(l);if(!d.path.match(/(^\/v4\/)/)||!d.path.match(/\.[\w]+$/))return l;var T="mapbox://tiles/";T+=d.path.replace("/v4/","");var P=d.params;return f&&(P=P.filter(function(L){return!L.match(/^access_token=/)})),P.length&&(T+="?"+P.join("&")),T},an.prototype.canonicalizeTileset=function(l,f){for(var d=!!f&&Fn(f),T=[],P=0,L=l.tiles||[];P<L.length;P+=1){var z=L[P];Nn(z)?T.push(this.canonicalizeTileURL(z,d)):T.push(z)}return T},an.prototype._makeAPIURL=function(l,f){var d="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",T=Ti(xe.API_URL);if(l.protocol=T.protocol,l.authority=T.authority,l.protocol==="http"){var P=l.params.indexOf("secure");P>=0&&l.params.splice(P,1)}if(T.path!=="/"&&(l.path=""+T.path+l.path),!xe.REQUIRE_ACCESS_TOKEN)return ka(l);if(!(f=f||xe.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+d);if(f[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+d);return l.params=l.params.filter(function(L){return L.indexOf("access_token")===-1}),l.params.push("access_token="+f),ka(l)};var wr=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Nn(l){return wr.test(l)}var pi=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ti(l){var f=l.match(pi);if(!f)throw new Error("Unable to parse URL object");return{protocol:f[1],authority:f[2],path:f[3]||"/",params:f[4]?f[4].split("&"):[]}}function ka(l){var f=l.params.length?"?"+l.params.join("&"):"";return l.protocol+"://"+l.authority+l.path+f}function si(l){if(!l)return null;var f=l.split(".");if(!f||f.length!==3)return null;try{return JSON.parse(decodeURIComponent(h.atob(f[1]).split("").map(function(d){return"%"+("00"+d.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Hn=function(l){this.type=l,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Hn.prototype.getStorageKey=function(l){var f,d=si(xe.ACCESS_TOKEN);return f=d&&d.u?h.btoa(encodeURIComponent(d.u).replace(/%([0-9A-F]{2})/g,function(T,P){return String.fromCharCode(Number("0x"+P))})):xe.ACCESS_TOKEN||"",l?"mapbox.eventData."+l+":"+f:"mapbox.eventData:"+f},Hn.prototype.fetchEventData=function(){var l=ot("localStorage"),f=this.getStorageKey(),d=this.getStorageKey("uuid");if(l)try{var T=h.localStorage.getItem(f);T&&(this.eventData=JSON.parse(T));var P=h.localStorage.getItem(d);P&&(this.anonId=P)}catch{U("Unable to read from LocalStorage")}},Hn.prototype.saveEventData=function(){var l=ot("localStorage"),f=this.getStorageKey(),d=this.getStorageKey("uuid");if(l)try{h.localStorage.setItem(d,this.anonId),Object.keys(this.eventData).length>=1&&h.localStorage.setItem(f,JSON.stringify(this.eventData))}catch{U("Unable to write to LocalStorage")}},Hn.prototype.processRequests=function(l){},Hn.prototype.postEvent=function(l,f,d,T){var P=this;if(xe.EVENTS_URL){var L=Ti(xe.EVENTS_URL);L.params.push("access_token="+(T||xe.ACCESS_TOKEN||""));var z={event:this.type,created:new Date(l).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.2",skuId:tn,userId:this.anonId},Z=f?D(z,f):z,ae={url:ka(L),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Z])};this.pendingRequest=ra(ae,function(le){P.pendingRequest=null,d(le),P.saveEventData(),P.processRequests(T)})}},Hn.prototype.queueRequest=function(l,f){this.queue.push(l),this.processRequests(f)};var Di,Yi,di=function(l){function f(){l.call(this,"map.load"),this.success={},this.skuToken=""}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.postMapLoadEvent=function(d,T,P,L){this.skuToken=P,(xe.EVENTS_URL&&L||xe.ACCESS_TOKEN&&Array.isArray(d)&&d.some(function(z){return Fn(z)||Nn(z)}))&&this.queueRequest({id:T,timestamp:Date.now()},L)},f.prototype.processRequests=function(d){var T=this;if(!this.pendingRequest&&this.queue.length!==0){var P=this.queue.shift(),L=P.id,z=P.timestamp;L&&this.success[L]||(this.anonId||this.fetchEventData(),J(this.anonId)||(this.anonId=$()),this.postEvent(z,{skuToken:this.skuToken},function(Z){Z||L&&(T.success[L]=!0)},d))}},f}(Hn),jr=new(function(l){function f(d){l.call(this,"appUserTurnstile"),this._customAccessToken=d}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.postTurnstileEvent=function(d,T){xe.EVENTS_URL&&xe.ACCESS_TOKEN&&Array.isArray(d)&&d.some(function(P){return Fn(P)||Nn(P)})&&this.queueRequest(Date.now(),T)},f.prototype.processRequests=function(d){var T=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var P=si(xe.ACCESS_TOKEN),L=P?P.u:xe.ACCESS_TOKEN,z=L!==this.eventData.tokenU;J(this.anonId)||(this.anonId=$(),z=!0);var Z=this.queue.shift();if(this.eventData.lastSuccess){var ae=new Date(this.eventData.lastSuccess),le=new Date(Z),de=(Z-this.eventData.lastSuccess)/864e5;z=z||de>=1||de<-1||ae.getDate()!==le.getDate()}else z=!0;if(!z)return this.processRequests();this.postEvent(Z,{"enabled.telemetry":!1},function(Ae){Ae||(T.eventData.lastSuccess=Z,T.eventData.tokenU=L)},d)}},f}(Hn)),Jr=jr.postTurnstileEvent.bind(jr),Br=new di,Gi=Br.postMapLoadEvent.bind(Br),Li=500,Ua=50;function _a(){h.caches&&!Di&&(Di=h.caches.open("mapbox-tiles"))}function Bo(l){var f=l.indexOf("?");return f<0?l:l.slice(0,f)}var Ka,Qs=1/0;function co(){return Ka==null&&(Ka=h.OffscreenCanvas&&new h.OffscreenCanvas(1,1).getContext("2d")&&typeof h.createImageBitmap=="function"),Ka}var fo={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(fo);var fs=function(l){function f(d,T,P){T===401&&Nn(P)&&(d+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),l.call(this,d),this.status=T,this.url=P,this.name=this.constructor.name,this.message=d}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},f}(Error),gu=pe()?function(){return self.worker&&self.worker.referrer}:function(){return(h.location.protocol==="blob:"?h.parent:h).location.href},Hs,Ss,Au=function(l,f){if(!(/^file:/.test(d=l.url)||/^file:/.test(gu())&&!/^\w+:/.test(d))){if(h.fetch&&h.Request&&h.AbortController&&h.Request.prototype.hasOwnProperty("signal"))return function(T,P){var L,z=new h.AbortController,Z=new h.Request(T.url,{method:T.method||"GET",body:T.body,credentials:T.credentials,headers:T.headers,referrer:gu(),signal:z.signal}),ae=!1,le=!1,de=(L=Z.url).indexOf("sku=")>0&&Nn(L);T.type==="json"&&Z.headers.set("Accept","application/json");var Ae=function(ke,Ye,$e){if(!le){if(ke&&ke.message!=="SecurityError"&&U(ke),Ye&&$e)return Se(Ye);var mt=Date.now();h.fetch(Z).then(function(nt){if(nt.ok){var Et=de?nt.clone():null;return Se(nt,Et,mt)}return P(new fs(nt.statusText,nt.status,T.url))}).catch(function(nt){nt.code!==20&&P(new Error(nt.message))})}},Se=function(ke,Ye,$e){(T.type==="arrayBuffer"?ke.arrayBuffer():T.type==="json"?ke.json():ke.text()).then(function(mt){le||(Ye&&$e&&function(nt,Et,Bt){if(_a(),Di){var Wt={status:Et.status,statusText:Et.statusText,headers:new h.Headers};Et.headers.forEach(function(or,Ar){return Wt.headers.set(Ar,or)});var Zt=je(Et.headers.get("Cache-Control")||"");Zt["no-store"]||(Zt["max-age"]&&Wt.headers.set("Expires",new Date(Bt+1e3*Zt["max-age"]).toUTCString()),new Date(Wt.headers.get("Expires")).getTime()-Bt<42e4||function(or,Ar){if(Yi===void 0)try{new Response(new ReadableStream),Yi=!0}catch{Yi=!1}Yi?Ar(or.body):or.blob().then(Ar)}(Et,function(or){var Ar=new h.Response(or,Wt);_a(),Di&&Di.then(function(Rr){return Rr.put(Bo(nt.url),Ar)}).catch(function(Rr){return U(Rr.message)})}))}}(Z,Ye,$e),ae=!0,P(null,mt,ke.headers.get("Cache-Control"),ke.headers.get("Expires")))}).catch(function(mt){le||P(new Error(mt.message))})};return de?function(ke,Ye){if(_a(),!Di)return Ye(null);var $e=Bo(ke.url);Di.then(function(mt){mt.match($e).then(function(nt){var Et=function(Bt){if(!Bt)return!1;var Wt=new Date(Bt.headers.get("Expires")||0),Zt=je(Bt.headers.get("Cache-Control")||"");return Wt>Date.now()&&!Zt["no-cache"]}(nt);mt.delete($e),Et&&mt.put($e,nt.clone()),Ye(null,nt,Et)}).catch(Ye)}).catch(Ye)}(Z,Ae):Ae(null,null),{cancel:function(){le=!0,ae||z.abort()}}}(l,f);if(pe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,f,void 0,!0)}var d;return function(T,P){var L=new h.XMLHttpRequest;for(var z in L.open(T.method||"GET",T.url,!0),T.type==="arrayBuffer"&&(L.responseType="arraybuffer"),T.headers)L.setRequestHeader(z,T.headers[z]);return T.type==="json"&&(L.responseType="text",L.setRequestHeader("Accept","application/json")),L.withCredentials=T.credentials==="include",L.onerror=function(){P(new Error(L.statusText))},L.onload=function(){if((L.status>=200&&L.status<300||L.status===0)&&L.response!==null){var Z=L.response;if(T.type==="json")try{Z=JSON.parse(L.response)}catch(ae){return P(ae)}P(null,Z,L.getResponseHeader("Cache-Control"),L.getResponseHeader("Expires"))}else P(new fs(L.statusText,L.status,T.url))},L.send(T.body),{cancel:function(){return L.abort()}}}(l,f)},yu=function(l,f){return Au(D(l,{type:"arrayBuffer"}),f)},ra=function(l,f){return Au(D(l,{method:"POST"}),f)},ge="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Hs=[],Ss=0;var Te=function(l,f){if(Ge.supported&&(l.headers||(l.headers={}),l.headers.accept="image/webp,*/*"),Ss>=xe.MAX_PARALLEL_IMAGE_REQUESTS){var d={requestParameters:l,callback:f,cancelled:!1,cancel:function(){this.cancelled=!0}};return Hs.push(d),d}Ss++;var T=!1,P=function(){if(!T)for(T=!0,Ss--;Hs.length&&Ss<xe.MAX_PARALLEL_IMAGE_REQUESTS;){var z=Hs.shift();z.cancelled||(z.cancel=Te(z.requestParameters,z.callback).cancel)}},L=yu(l,function(z,Z,ae,le){P(),z?f(z):Z&&(co()?function(de,Ae){var Se=new h.Blob([new Uint8Array(de)],{type:"image/png"});h.createImageBitmap(Se).then(function(ke){Ae(null,ke)}).catch(function(ke){Ae(new Error("Could not load image because of "+ke.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Z,f):function(de,Ae,Se,ke){var Ye=new h.Image,$e=h.URL;Ye.onload=function(){Ae(null,Ye),$e.revokeObjectURL(Ye.src),Ye.onload=null,h.requestAnimationFrame(function(){Ye.src=ge})},Ye.onerror=function(){return Ae(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var mt=new h.Blob([new Uint8Array(de)],{type:"image/png"});Ye.cacheControl=Se,Ye.expires=ke,Ye.src=de.byteLength?$e.createObjectURL(mt):ge}(Z,f,ae,le))});return{cancel:function(){L.cancel(),P()}}};function Oe(l,f,d){d[l]&&d[l].indexOf(f)!==-1||(d[l]=d[l]||[],d[l].push(f))}function ze(l,f,d){if(d&&d[l]){var T=d[l].indexOf(f);T!==-1&&d[l].splice(T,1)}}var Ie=function(l,f){f===void 0&&(f={}),D(this,f),this.type=l},pt=function(l){function f(d,T){T===void 0&&(T={}),l.call(this,"error",D({error:d},T))}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f}(Ie),At=function(){};At.prototype.on=function(l,f){return this._listeners=this._listeners||{},Oe(l,f,this._listeners),this},At.prototype.off=function(l,f){return ze(l,f,this._listeners),ze(l,f,this._oneTimeListeners),this},At.prototype.once=function(l,f){return this._oneTimeListeners=this._oneTimeListeners||{},Oe(l,f,this._oneTimeListeners),this},At.prototype.fire=function(l,f){typeof l=="string"&&(l=new Ie(l,f||{}));var d=l.type;if(this.listens(d)){l.target=this;for(var T=0,P=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];T<P.length;T+=1)P[T].call(this,l);for(var L=0,z=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];L<z.length;L+=1){var Z=z[L];ze(d,Z,this._oneTimeListeners),Z.call(this,l)}var ae=this._eventedParent;ae&&(D(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ae.fire(l))}else l instanceof pt&&console.error(l.error);return this},At.prototype.listens=function(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)},At.prototype.setEventedParent=function(l,f){return this._eventedParent=l,this._eventedParentData=f,this};var De={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Qe=function(l,f,d,T){this.message=(l?l+": ":"")+d,T&&(this.identifier=T),f!=null&&f.__line__&&(this.line=f.__line__)};function It(l){var f=l.value;return f?[new Qe(l.key,f,"constants have been deprecated as of v8")]:[]}function cr(l){for(var f=[],d=arguments.length-1;d-- >0;)f[d]=arguments[d+1];for(var T=0,P=f;T<P.length;T+=1){var L=P[T];for(var z in L)l[z]=L[z]}return l}function dr(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function $t(l){if(Array.isArray(l))return l.map($t);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){var f={};for(var d in l)f[d]=$t(l[d]);return f}return dr(l)}var lr=function(l){function f(d,T){l.call(this,T),this.message=T,this.key=d}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f}(Error),Kr=function(l,f){f===void 0&&(f=[]),this.parent=l,this.bindings={};for(var d=0,T=f;d<T.length;d+=1){var P=T[d];this.bindings[P[0]]=P[1]}};Kr.prototype.concat=function(l){return new Kr(this,l)},Kr.prototype.get=function(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(l+" not found in scope.")},Kr.prototype.has=function(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)};var Dr={kind:"null"},qt={kind:"number"},Lr={kind:"string"},Er={kind:"boolean"},_r={kind:"color"},Wn={kind:"object"},Cr={kind:"value"},Qn={kind:"collator"},Ci={kind:"formatted"},ii={kind:"resolvedImage"};function bi(l,f){return{kind:"array",itemType:l,N:f}}function Un(l){if(l.kind==="array"){var f=Un(l.itemType);return typeof l.N=="number"?"array<"+f+", "+l.N+">":l.itemType.kind==="value"?"array":"array<"+f+">"}return l.kind}var oa=[Dr,qt,Lr,Er,_r,Ci,Wn,bi(Cr),ii];function xi(l,f){if(f.kind==="error")return null;if(l.kind==="array"){if(f.kind==="array"&&(f.N===0&&f.itemType.kind==="value"||!xi(l.itemType,f.itemType))&&(typeof l.N!="number"||l.N===f.N))return null}else{if(l.kind===f.kind)return null;if(l.kind==="value"){for(var d=0,T=oa;d<T.length;d+=1)if(!xi(T[d],f))return null}}return"Expected "+Un(l)+" but found "+Un(f)+" instead."}function Ki(l,f){return f.some(function(d){return d.kind===l.kind})}function gi(l,f){return f.some(function(d){return d==="null"?l===null:d==="array"?Array.isArray(l):d==="object"?l&&!Array.isArray(l)&&typeof l=="object":d===typeof l})}var Zn=a(function(l,f){var d={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function T(Z){return(Z=Math.round(Z))<0?0:Z>255?255:Z}function P(Z){return T(Z[Z.length-1]==="%"?parseFloat(Z)/100*255:parseInt(Z))}function L(Z){return(ae=Z[Z.length-1]==="%"?parseFloat(Z)/100:parseFloat(Z))<0?0:ae>1?1:ae;var ae}function z(Z,ae,le){return le<0?le+=1:le>1&&(le-=1),6*le<1?Z+(ae-Z)*le*6:2*le<1?ae:3*le<2?Z+(ae-Z)*(2/3-le)*6:Z}try{f.parseCSSColor=function(Z){var ae,le=Z.replace(/ /g,"").toLowerCase();if(le in d)return d[le].slice();if(le[0]==="#")return le.length===4?(ae=parseInt(le.substr(1),16))>=0&&ae<=4095?[(3840&ae)>>4|(3840&ae)>>8,240&ae|(240&ae)>>4,15&ae|(15&ae)<<4,1]:null:le.length===7&&(ae=parseInt(le.substr(1),16))>=0&&ae<=16777215?[(16711680&ae)>>16,(65280&ae)>>8,255&ae,1]:null;var de=le.indexOf("("),Ae=le.indexOf(")");if(de!==-1&&Ae+1===le.length){var Se=le.substr(0,de),ke=le.substr(de+1,Ae-(de+1)).split(","),Ye=1;switch(Se){case"rgba":if(ke.length!==4)return null;Ye=L(ke.pop());case"rgb":return ke.length!==3?null:[P(ke[0]),P(ke[1]),P(ke[2]),Ye];case"hsla":if(ke.length!==4)return null;Ye=L(ke.pop());case"hsl":if(ke.length!==3)return null;var $e=(parseFloat(ke[0])%360+360)%360/360,mt=L(ke[1]),nt=L(ke[2]),Et=nt<=.5?nt*(mt+1):nt+mt-nt*mt,Bt=2*nt-Et;return[T(255*z(Bt,Et,$e+1/3)),T(255*z(Bt,Et,$e)),T(255*z(Bt,Et,$e-1/3)),Ye];default:return null}}return null}}catch{}}).parseCSSColor,$n=function(l,f,d,T){T===void 0&&(T=1),this.r=l,this.g=f,this.b=d,this.a=T};$n.parse=function(l){if(l){if(l instanceof $n)return l;if(typeof l=="string"){var f=Zn(l);if(f)return new $n(f[0]/255*f[3],f[1]/255*f[3],f[2]/255*f[3],f[3])}}},$n.prototype.toString=function(){var l=this.toArray(),f=l[1],d=l[2],T=l[3];return"rgba("+Math.round(l[0])+","+Math.round(f)+","+Math.round(d)+","+T+")"},$n.prototype.toArray=function(){var l=this.a;return l===0?[0,0,0,0]:[255*this.r/l,255*this.g/l,255*this.b/l,l]},$n.black=new $n(0,0,0,1),$n.white=new $n(1,1,1,1),$n.transparent=new $n(0,0,0,0),$n.red=new $n(1,0,0,1);var ki=function(l,f,d){this.sensitivity=l?f?"variant":"case":f?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ki.prototype.compare=function(l,f){return this.collator.compare(l,f)},ki.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Es=function(l,f,d,T,P){this.text=l,this.image=f,this.scale=d,this.fontStack=T,this.textColor=P},Ba=function(l){this.sections=l};Ba.fromString=function(l){return new Ba([new Es(l,null,null,null,null)])},Ba.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(l){return l.text.length!==0||l.image&&l.image.name.length!==0})},Ba.factory=function(l){return l instanceof Ba?l:Ba.fromString(l)},Ba.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(l){return l.text}).join("")},Ba.prototype.serialize=function(){for(var l=["format"],f=0,d=this.sections;f<d.length;f+=1){var T=d[f];if(T.image)l.push(["image",T.image.name]);else{l.push(T.text);var P={};T.fontStack&&(P["text-font"]=["literal",T.fontStack.split(",")]),T.scale&&(P["font-scale"]=T.scale),T.textColor&&(P["text-color"]=["rgba"].concat(T.textColor.toArray())),l.push(P)}}return l};var _o=function(l){this.name=l.name,this.available=l.available};function hs(l,f,d,T){return typeof l=="number"&&l>=0&&l<=255&&typeof f=="number"&&f>=0&&f<=255&&typeof d=="number"&&d>=0&&d<=255?T===void 0||typeof T=="number"&&T>=0&&T<=1?null:"Invalid rgba value ["+[l,f,d,T].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof T=="number"?[l,f,d,T]:[l,f,d]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function eu(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof $n||l instanceof ki||l instanceof Ba||l instanceof _o)return!0;if(Array.isArray(l)){for(var f=0,d=l;f<d.length;f+=1)if(!eu(d[f]))return!1;return!0}if(typeof l=="object"){for(var T in l)if(!eu(l[T]))return!1;return!0}return!1}function sa(l){if(l===null)return Dr;if(typeof l=="string")return Lr;if(typeof l=="boolean")return Er;if(typeof l=="number")return qt;if(l instanceof $n)return _r;if(l instanceof ki)return Qn;if(l instanceof Ba)return Ci;if(l instanceof _o)return ii;if(Array.isArray(l)){for(var f,d=l.length,T=0,P=l;T<P.length;T+=1){var L=sa(P[T]);if(f){if(f===L)continue;f=Cr;break}f=L}return bi(f||Cr,d)}return Wn}function tu(l){var f=typeof l;return l===null?"":f==="string"||f==="number"||f==="boolean"?String(l):l instanceof $n||l instanceof Ba||l instanceof _o?l.toString():JSON.stringify(l)}_o.prototype.toString=function(){return this.name},_o.fromString=function(l){return l?new _o({name:l,available:!1}):null},_o.prototype.serialize=function(){return["image",this.name]};var ho=function(l,f){this.type=l,this.value=f};ho.parse=function(l,f){if(l.length!==2)return f.error("'literal' expression requires exactly one argument, but found "+(l.length-1)+" instead.");if(!eu(l[1]))return f.error("invalid value");var d=l[1],T=sa(d),P=f.expectedType;return T.kind!=="array"||T.N!==0||!P||P.kind!=="array"||typeof P.N=="number"&&P.N!==0||(T=P),new ho(T,d)},ho.prototype.evaluate=function(){return this.value},ho.prototype.eachChild=function(){},ho.prototype.outputDefined=function(){return!0},ho.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof $n?["rgba"].concat(this.value.toArray()):this.value instanceof Ba?this.value.serialize():this.value};var Za=function(l){this.name="ExpressionEvaluationError",this.message=l};Za.prototype.toJSON=function(){return this.message};var Ho={string:Lr,number:qt,boolean:Er,object:Wn},ai=function(l,f){this.type=l,this.args=f};ai.parse=function(l,f){if(l.length<2)return f.error("Expected at least one argument.");var d,T=1,P=l[0];if(P==="array"){var L,z;if(l.length>2){var Z=l[1];if(typeof Z!="string"||!(Z in Ho)||Z==="object")return f.error('The item type argument of "array" must be one of string, number, boolean',1);L=Ho[Z],T++}else L=Cr;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return f.error('The length argument to "array" must be a positive integer literal',2);z=l[2],T++}d=bi(L,z)}else d=Ho[P];for(var ae=[];T<l.length;T++){var le=f.parse(l[T],T,Cr);if(!le)return null;ae.push(le)}return new ai(d,ae)},ai.prototype.evaluate=function(l){for(var f=0;f<this.args.length;f++){var d=this.args[f].evaluate(l);if(!xi(this.type,sa(d)))return d;if(f===this.args.length-1)throw new Za("Expected value to be of type "+Un(this.type)+", but found "+Un(sa(d))+" instead.")}return null},ai.prototype.eachChild=function(l){this.args.forEach(l)},ai.prototype.outputDefined=function(){return this.args.every(function(l){return l.outputDefined()})},ai.prototype.serialize=function(){var l=this.type,f=[l.kind];if(l.kind==="array"){var d=l.itemType;if(d.kind==="string"||d.kind==="number"||d.kind==="boolean"){f.push(d.kind);var T=l.N;(typeof T=="number"||this.args.length>1)&&f.push(T)}}return f.concat(this.args.map(function(P){return P.serialize()}))};var Cs=function(l){this.type=Ci,this.sections=l};Cs.parse=function(l,f){if(l.length<2)return f.error("Expected at least one argument.");var d=l[1];if(!Array.isArray(d)&&typeof d=="object")return f.error("First argument must be an image or text section.");for(var T=[],P=!1,L=1;L<=l.length-1;++L){var z=l[L];if(P&&typeof z=="object"&&!Array.isArray(z)){P=!1;var Z=null;if(z["font-scale"]&&!(Z=f.parse(z["font-scale"],1,qt)))return null;var ae=null;if(z["text-font"]&&!(ae=f.parse(z["text-font"],1,bi(Lr))))return null;var le=null;if(z["text-color"]&&!(le=f.parse(z["text-color"],1,_r)))return null;var de=T[T.length-1];de.scale=Z,de.font=ae,de.textColor=le}else{var Ae=f.parse(l[L],1,Cr);if(!Ae)return null;var Se=Ae.type.kind;if(Se!=="string"&&Se!=="value"&&Se!=="null"&&Se!=="resolvedImage")return f.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");P=!0,T.push({content:Ae,scale:null,font:null,textColor:null})}}return new Cs(T)},Cs.prototype.evaluate=function(l){return new Ba(this.sections.map(function(f){var d=f.content.evaluate(l);return sa(d)===ii?new Es("",d,null,null,null):new Es(tu(d),null,f.scale?f.scale.evaluate(l):null,f.font?f.font.evaluate(l).join(","):null,f.textColor?f.textColor.evaluate(l):null)}))},Cs.prototype.eachChild=function(l){for(var f=0,d=this.sections;f<d.length;f+=1){var T=d[f];l(T.content),T.scale&&l(T.scale),T.font&&l(T.font),T.textColor&&l(T.textColor)}},Cs.prototype.outputDefined=function(){return!1},Cs.prototype.serialize=function(){for(var l=["format"],f=0,d=this.sections;f<d.length;f+=1){var T=d[f];l.push(T.content.serialize());var P={};T.scale&&(P["font-scale"]=T.scale.serialize()),T.font&&(P["text-font"]=T.font.serialize()),T.textColor&&(P["text-color"]=T.textColor.serialize()),l.push(P)}return l};var bo=function(l){this.type=ii,this.input=l};bo.parse=function(l,f){if(l.length!==2)return f.error("Expected two arguments.");var d=f.parse(l[1],1,Lr);return d?new bo(d):f.error("No image name provided.")},bo.prototype.evaluate=function(l){var f=this.input.evaluate(l),d=_o.fromString(f);return d&&l.availableImages&&(d.available=l.availableImages.indexOf(f)>-1),d},bo.prototype.eachChild=function(l){l(this.input)},bo.prototype.outputDefined=function(){return!1},bo.prototype.serialize=function(){return["image",this.input.serialize()]};var ec={"to-boolean":Er,"to-color":_r,"to-number":qt,"to-string":Lr},ps=function(l,f){this.type=l,this.args=f};ps.parse=function(l,f){if(l.length<2)return f.error("Expected at least one argument.");var d=l[0];if((d==="to-boolean"||d==="to-string")&&l.length!==2)return f.error("Expected one argument.");for(var T=ec[d],P=[],L=1;L<l.length;L++){var z=f.parse(l[L],L,Cr);if(!z)return null;P.push(z)}return new ps(T,P)},ps.prototype.evaluate=function(l){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(l));if(this.type.kind==="color"){for(var f,d,T=0,P=this.args;T<P.length;T+=1){if(d=null,(f=P[T].evaluate(l))instanceof $n)return f;if(typeof f=="string"){var L=l.parseColor(f);if(L)return L}else if(Array.isArray(f)&&!(d=f.length<3||f.length>4?"Invalid rbga value "+JSON.stringify(f)+": expected an array containing either three or four numeric values.":hs(f[0],f[1],f[2],f[3])))return new $n(f[0]/255,f[1]/255,f[2]/255,f[3])}throw new Za(d||"Could not parse color from value '"+(typeof f=="string"?f:String(JSON.stringify(f)))+"'")}if(this.type.kind==="number"){for(var z=null,Z=0,ae=this.args;Z<ae.length;Z+=1){if((z=ae[Z].evaluate(l))===null)return 0;var le=Number(z);if(!isNaN(le))return le}throw new Za("Could not convert "+JSON.stringify(z)+" to number.")}return this.type.kind==="formatted"?Ba.fromString(tu(this.args[0].evaluate(l))):this.type.kind==="resolvedImage"?_o.fromString(tu(this.args[0].evaluate(l))):tu(this.args[0].evaluate(l))},ps.prototype.eachChild=function(l){this.args.forEach(l)},ps.prototype.outputDefined=function(){return this.args.every(function(l){return l.outputDefined()})},ps.prototype.serialize=function(){if(this.type.kind==="formatted")return new Cs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new bo(this.args[0]).serialize();var l=["to-"+this.type.kind];return this.eachChild(function(f){l.push(f.serialize())}),l};var Du=["Unknown","Point","LineString","Polygon"],eo=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};eo.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},eo.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Du[this.feature.type]:this.feature.type:null},eo.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},eo.prototype.canonicalID=function(){return this.canonical},eo.prototype.properties=function(){return this.feature&&this.feature.properties||{}},eo.prototype.parseColor=function(l){var f=this._parseColorCache[l];return f||(f=this._parseColorCache[l]=$n.parse(l)),f};var Me=function(l,f,d,T){this.name=l,this.type=f,this._evaluate=d,this.args=T};Me.prototype.evaluate=function(l){return this._evaluate(l,this.args)},Me.prototype.eachChild=function(l){this.args.forEach(l)},Me.prototype.outputDefined=function(){return!1},Me.prototype.serialize=function(){return[this.name].concat(this.args.map(function(l){return l.serialize()}))},Me.parse=function(l,f){var d,T=l[0],P=Me.definitions[T];if(!P)return f.error('Unknown expression "'+T+'". If you wanted a literal array, use ["literal", [...]].',0);for(var L=Array.isArray(P)?P[0]:P.type,z=Array.isArray(P)?[[P[1],P[2]]]:P.overloads,Z=z.filter(function(Rn){var Yr=Rn[0];return!Array.isArray(Yr)||Yr.length===l.length-1}),ae=null,le=0,de=Z;le<de.length;le+=1){var Ae=de[le],Se=Ae[0],ke=Ae[1];ae=new Uu(f.registry,f.path,null,f.scope);for(var Ye=[],$e=!1,mt=1;mt<l.length;mt++){var nt=l[mt],Et=Array.isArray(Se)?Se[mt-1]:Se.type,Bt=ae.parse(nt,1+Ye.length,Et);if(!Bt){$e=!0;break}Ye.push(Bt)}if(!$e)if(Array.isArray(Se)&&Se.length!==Ye.length)ae.error("Expected "+Se.length+" arguments, but found "+Ye.length+" instead.");else{for(var Wt=0;Wt<Ye.length;Wt++){var Zt=Array.isArray(Se)?Se[Wt]:Se.type,or=Ye[Wt];ae.concat(Wt+1).checkSubtype(Zt,or.type)}if(ae.errors.length===0)return new Me(T,L,ke,Ye)}}if(Z.length===1)(d=f.errors).push.apply(d,ae.errors);else{for(var Ar=(Z.length?Z:z).map(function(Rn){var Yr;return Yr=Rn[0],Array.isArray(Yr)?"("+Yr.map(Un).join(", ")+")":"("+Un(Yr.type)+"...)"}).join(" | "),Rr=[],bn=1;bn<l.length;bn++){var qr=f.parse(l[bn],1+Rr.length);if(!qr)return null;Rr.push(Un(qr.type))}f.error("Expected arguments of type "+Ar+", but found ("+Rr.join(", ")+") instead.")}return null},Me.register=function(l,f){for(var d in Me.definitions=f,f)l[d]=Me};var Ve=function(l,f,d){this.type=Qn,this.locale=d,this.caseSensitive=l,this.diacriticSensitive=f};function it(l,f){l[0]=Math.min(l[0],f[0]),l[1]=Math.min(l[1],f[1]),l[2]=Math.max(l[2],f[0]),l[3]=Math.max(l[3],f[1])}function Xt(l,f){return!(l[0]<=f[0]||l[2]>=f[2]||l[1]<=f[1]||l[3]>=f[3])}function br(l,f){var d=(180+l[0])/360,T=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,P=Math.pow(2,f.z);return[Math.round(d*P*8192),Math.round(T*P*8192)]}function cn(l,f,d){return f[1]>l[1]!=d[1]>l[1]&&l[0]<(d[0]-f[0])*(l[1]-f[1])/(d[1]-f[1])+f[0]}function Ai(l,f){for(var d,T,P,L,z,Z,ae,le=!1,de=0,Ae=f.length;de<Ae;de++)for(var Se=f[de],ke=0,Ye=Se.length;ke<Ye-1;ke++){if((L=(d=l)[0]-(T=Se[ke])[0])*(ae=d[1]-(P=Se[ke+1])[1])-(Z=d[0]-P[0])*(z=d[1]-T[1])==0&&L*Z<=0&&z*ae<=0)return!1;cn(l,Se[ke],Se[ke+1])&&(le=!le)}return le}function xo(l,f){for(var d=0;d<f.length;d++)if(Ai(l,f[d]))return!0;return!1}function po(l,f,d,T){var P=T[0]-d[0],L=T[1]-d[1],z=(l[0]-d[0])*L-P*(l[1]-d[1]),Z=(f[0]-d[0])*L-P*(f[1]-d[1]);return z>0&&Z<0||z<0&&Z>0}function Wo(l,f,d){for(var T=0,P=d;T<P.length;T+=1)for(var L=P[T],z=0;z<L.length-1;++z)if((Ae=[(de=L[z+1])[0]-(le=L[z])[0],de[1]-le[1]])[0]*(Se=[(ae=f)[0]-(Z=l)[0],ae[1]-Z[1]])[1]-Ae[1]*Se[0]!=0&&po(Z,ae,le,de)&&po(le,de,Z,ae))return!0;var Z,ae,le,de,Ae,Se;return!1}function ds(l,f){for(var d=0;d<l.length;++d)if(!Ai(l[d],f))return!1;for(var T=0;T<l.length-1;++T)if(Wo(l[T],l[T+1],f))return!1;return!0}function tf(l,f){for(var d=0;d<f.length;d++)if(ds(l,f[d]))return!0;return!1}function tc(l,f,d){for(var T=[],P=0;P<l.length;P++){for(var L=[],z=0;z<l[P].length;z++){var Z=br(l[P][z],d);it(f,Z),L.push(Z)}T.push(L)}return T}function rf(l,f,d){for(var T=[],P=0;P<l.length;P++){var L=tc(l[P],f,d);T.push(L)}return T}function xc(l,f,d,T){if(l[0]<d[0]||l[0]>d[2]){var P=.5*T,L=l[0]-d[0]>P?-T:d[0]-l[0]>P?T:0;L===0&&(L=l[0]-d[2]>P?-T:d[2]-l[0]>P?T:0),l[0]+=L}it(f,l)}function Bf(l,f,d,T){for(var P=8192*Math.pow(2,T.z),L=[8192*T.x,8192*T.y],z=[],Z=0,ae=l;Z<ae.length;Z+=1)for(var le=0,de=ae[Z];le<de.length;le+=1){var Ae=de[le],Se=[Ae.x+L[0],Ae.y+L[1]];xc(Se,f,d,P),z.push(Se)}return z}function wc(l,f,d,T){for(var P,L=8192*Math.pow(2,T.z),z=[8192*T.x,8192*T.y],Z=[],ae=0,le=l;ae<le.length;ae+=1){for(var de=[],Ae=0,Se=le[ae];Ae<Se.length;Ae+=1){var ke=Se[Ae],Ye=[ke.x+z[0],ke.y+z[1]];it(f,Ye),de.push(Ye)}Z.push(de)}if(f[2]-f[0]<=L/2){(P=f)[0]=P[1]=1/0,P[2]=P[3]=-1/0;for(var $e=0,mt=Z;$e<mt.length;$e+=1)for(var nt=0,Et=mt[$e];nt<Et.length;nt+=1)xc(Et[nt],f,d,L)}return Z}Ve.parse=function(l,f){if(l.length!==2)return f.error("Expected one argument.");var d=l[1];if(typeof d!="object"||Array.isArray(d))return f.error("Collator options argument must be an object.");var T=f.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Er);if(!T)return null;var P=f.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Er);if(!P)return null;var L=null;return d.locale&&!(L=f.parse(d.locale,1,Lr))?null:new Ve(T,P,L)},Ve.prototype.evaluate=function(l){return new ki(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)},Ve.prototype.eachChild=function(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)},Ve.prototype.outputDefined=function(){return!1},Ve.prototype.serialize=function(){var l={};return l["case-sensitive"]=this.caseSensitive.serialize(),l["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(l.locale=this.locale.serialize()),["collator",l]};var Ps=function(l,f){this.type=Er,this.geojson=l,this.geometries=f};function Qu(l){if(l instanceof Me&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof Ps)return!1;var f=!0;return l.eachChild(function(d){f&&!Qu(d)&&(f=!1)}),f}function Fu(l){if(l instanceof Me&&l.name==="feature-state")return!1;var f=!0;return l.eachChild(function(d){f&&!Fu(d)&&(f=!1)}),f}function Nu(l,f){if(l instanceof Me&&f.indexOf(l.name)>=0)return!1;var d=!0;return l.eachChild(function(T){d&&!Nu(T,f)&&(d=!1)}),d}Ps.parse=function(l,f){if(l.length!==2)return f.error("'within' expression requires exactly one argument, but found "+(l.length-1)+" instead.");if(eu(l[1])){var d=l[1];if(d.type==="FeatureCollection")for(var T=0;T<d.features.length;++T){var P=d.features[T].geometry.type;if(P==="Polygon"||P==="MultiPolygon")return new Ps(d,d.features[T].geometry)}else if(d.type==="Feature"){var L=d.geometry.type;if(L==="Polygon"||L==="MultiPolygon")return new Ps(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Ps(d,d)}return f.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Ps.prototype.evaluate=function(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(f,d){var T=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],L=f.canonicalID();if(d.type==="Polygon"){var z=tc(d.coordinates,P,L),Z=Bf(f.geometry(),T,P,L);if(!Xt(T,P))return!1;for(var ae=0,le=Z;ae<le.length;ae+=1)if(!Ai(le[ae],z))return!1}if(d.type==="MultiPolygon"){var de=rf(d.coordinates,P,L),Ae=Bf(f.geometry(),T,P,L);if(!Xt(T,P))return!1;for(var Se=0,ke=Ae;Se<ke.length;Se+=1)if(!xo(ke[Se],de))return!1}return!0}(l,this.geometries);if(l.geometryType()==="LineString")return function(f,d){var T=[1/0,1/0,-1/0,-1/0],P=[1/0,1/0,-1/0,-1/0],L=f.canonicalID();if(d.type==="Polygon"){var z=tc(d.coordinates,P,L),Z=wc(f.geometry(),T,P,L);if(!Xt(T,P))return!1;for(var ae=0,le=Z;ae<le.length;ae+=1)if(!ds(le[ae],z))return!1}if(d.type==="MultiPolygon"){var de=rf(d.coordinates,P,L),Ae=wc(f.geometry(),T,P,L);if(!Xt(T,P))return!1;for(var Se=0,ke=Ae;Se<ke.length;Se+=1)if(!tf(ke[Se],de))return!1}return!0}(l,this.geometries)}return!1},Ps.prototype.eachChild=function(){},Ps.prototype.outputDefined=function(){return!0},Ps.prototype.serialize=function(){return["within",this.geojson]};var zu=function(l,f){this.type=f.type,this.name=l,this.boundExpression=f};zu.parse=function(l,f){if(l.length!==2||typeof l[1]!="string")return f.error("'var' expression requires exactly one string literal argument.");var d=l[1];return f.scope.has(d)?new zu(d,f.scope.get(d)):f.error('Unknown variable "'+d+'". Make sure "'+d+'" has been bound in an enclosing "let" expression before using it.',1)},zu.prototype.evaluate=function(l){return this.boundExpression.evaluate(l)},zu.prototype.eachChild=function(){},zu.prototype.outputDefined=function(){return!1},zu.prototype.serialize=function(){return["var",this.name]};var Uu=function(l,f,d,T,P){f===void 0&&(f=[]),T===void 0&&(T=new Kr),P===void 0&&(P=[]),this.registry=l,this.path=f,this.key=f.map(function(L){return"["+L+"]"}).join(""),this.scope=T,this.errors=P,this.expectedType=d};function Ll(l,f){for(var d,T=l.length-1,P=0,L=T,z=0;P<=L;)if((d=l[z=Math.floor((P+L)/2)])<=f){if(z===T||f<l[z+1])return z;P=z+1}else{if(!(d>f))throw new Za("Input is not a number.");L=z-1}return 0}Uu.prototype.parse=function(l,f,d,T,P){return P===void 0&&(P={}),f?this.concat(f,d,T)._parse(l,P):this._parse(l,P)},Uu.prototype._parse=function(l,f){function d(le,de,Ae){return Ae==="assert"?new ai(de,[le]):Ae==="coerce"?new ps(de,[le]):le}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var T=l[0];if(typeof T!="string")return this.error("Expression name must be a string, but found "+typeof T+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var P=this.registry[T];if(P){var L=P.parse(l,this);if(!L)return null;if(this.expectedType){var z=this.expectedType,Z=L.type;if(z.kind!=="string"&&z.kind!=="number"&&z.kind!=="boolean"&&z.kind!=="object"&&z.kind!=="array"||Z.kind!=="value")if(z.kind!=="color"&&z.kind!=="formatted"&&z.kind!=="resolvedImage"||Z.kind!=="value"&&Z.kind!=="string"){if(this.checkSubtype(z,Z))return null}else L=d(L,z,f.typeAnnotation||"coerce");else L=d(L,z,f.typeAnnotation||"assert")}if(!(L instanceof ho)&&L.type.kind!=="resolvedImage"&&function le(de){if(de instanceof zu)return le(de.boundExpression);if(de instanceof Me&&de.name==="error"||de instanceof Ve||de instanceof Ps)return!1;var Ae=de instanceof ps||de instanceof ai,Se=!0;return de.eachChild(function(ke){Se=Ae?Se&&le(ke):Se&&ke instanceof ho}),!!Se&&Qu(de)&&Nu(de,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(L)){var ae=new eo;try{L=new ho(L.type,L.evaluate(ae))}catch(le){return this.error(le.message),null}}return L}return this.error('Unknown expression "'+T+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof l+" instead.")},Uu.prototype.concat=function(l,f,d){var T=typeof l=="number"?this.path.concat(l):this.path,P=d?this.scope.concat(d):this.scope;return new Uu(this.registry,T,f||null,P,this.errors)},Uu.prototype.error=function(l){for(var f=[],d=arguments.length-1;d-- >0;)f[d]=arguments[d+1];var T=""+this.key+f.map(function(P){return"["+P+"]"}).join("");this.errors.push(new lr(T,l))},Uu.prototype.checkSubtype=function(l,f){var d=xi(l,f);return d&&this.error(d),d};var ms=function(l,f,d){this.type=l,this.input=f,this.labels=[],this.outputs=[];for(var T=0,P=d;T<P.length;T+=1){var L=P[T],z=L[1];this.labels.push(L[0]),this.outputs.push(z)}};function $i(l,f,d){return l*(1-d)+f*d}ms.parse=function(l,f){if(l.length-1<4)return f.error("Expected at least 4 arguments, but found only "+(l.length-1)+".");if((l.length-1)%2!=0)return f.error("Expected an even number of arguments.");var d=f.parse(l[1],1,qt);if(!d)return null;var T=[],P=null;f.expectedType&&f.expectedType.kind!=="value"&&(P=f.expectedType);for(var L=1;L<l.length;L+=2){var z=L===1?-1/0:l[L],Z=l[L+1],ae=L,le=L+1;if(typeof z!="number")return f.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ae);if(T.length&&T[T.length-1][0]>=z)return f.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ae);var de=f.parse(Z,le,P);if(!de)return null;P=P||de.type,T.push([z,de])}return new ms(P,d,T)},ms.prototype.evaluate=function(l){var f=this.labels,d=this.outputs;if(f.length===1)return d[0].evaluate(l);var T=this.input.evaluate(l);if(T<=f[0])return d[0].evaluate(l);var P=f.length;return T>=f[P-1]?d[P-1].evaluate(l):d[Ll(f,T)].evaluate(l)},ms.prototype.eachChild=function(l){l(this.input);for(var f=0,d=this.outputs;f<d.length;f+=1)l(d[f])},ms.prototype.outputDefined=function(){return this.outputs.every(function(l){return l.outputDefined()})},ms.prototype.serialize=function(){for(var l=["step",this.input.serialize()],f=0;f<this.labels.length;f++)f>0&&l.push(this.labels[f]),l.push(this.outputs[f].serialize());return l};var ru=Object.freeze({__proto__:null,number:$i,color:function(l,f,d){return new $n($i(l.r,f.r,d),$i(l.g,f.g,d),$i(l.b,f.b,d),$i(l.a,f.a,d))},array:function(l,f,d){return l.map(function(T,P){return $i(T,f[P],d)})}}),Df=6/29*3*(6/29),Ff=Math.PI/180,rc=180/Math.PI;function el(l){return l>.008856451679035631?Math.pow(l,1/3):l/Df+4/29}function Tc(l){return l>6/29?l*l*l:Df*(l-4/29)}function nc(l){return 255*(l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055)}function Sc(l){return(l/=255)<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function _u(l){var f=Sc(l.r),d=Sc(l.g),T=Sc(l.b),P=el((.4124564*f+.3575761*d+.1804375*T)/.95047),L=el((.2126729*f+.7151522*d+.072175*T)/1);return{l:116*L-16,a:500*(P-L),b:200*(L-el((.0193339*f+.119192*d+.9503041*T)/1.08883)),alpha:l.a}}function k(l){var f=(l.l+16)/116,d=isNaN(l.a)?f:f+l.a/500,T=isNaN(l.b)?f:f-l.b/200;return f=1*Tc(f),d=.95047*Tc(d),T=1.08883*Tc(T),new $n(nc(3.2404542*d-1.5371385*f-.4985314*T),nc(-.969266*d+1.8760108*f+.041556*T),nc(.0556434*d-.2040259*f+1.0572252*T),l.alpha)}function Y(l,f,d){var T=f-l;return l+d*(T>180||T<-180?T-360*Math.round(T/360):T)}var ne={forward:_u,reverse:k,interpolate:function(l,f,d){return{l:$i(l.l,f.l,d),a:$i(l.a,f.a,d),b:$i(l.b,f.b,d),alpha:$i(l.alpha,f.alpha,d)}}},oe={forward:function(l){var f=_u(l),d=f.l,T=f.a,P=f.b,L=Math.atan2(P,T)*rc;return{h:L<0?L+360:L,c:Math.sqrt(T*T+P*P),l:d,alpha:l.a}},reverse:function(l){var f=l.h*Ff,d=l.c;return k({l:l.l,a:Math.cos(f)*d,b:Math.sin(f)*d,alpha:l.alpha})},interpolate:function(l,f,d){return{h:Y(l.h,f.h,d),c:$i(l.c,f.c,d),l:$i(l.l,f.l,d),alpha:$i(l.alpha,f.alpha,d)}}},ye=Object.freeze({__proto__:null,lab:ne,hcl:oe}),be=function(l,f,d,T,P){this.type=l,this.operator=f,this.interpolation=d,this.input=T,this.labels=[],this.outputs=[];for(var L=0,z=P;L<z.length;L+=1){var Z=z[L],ae=Z[1];this.labels.push(Z[0]),this.outputs.push(ae)}};function Le(l,f,d,T){var P=T-d,L=l-d;return P===0?0:f===1?L/P:(Math.pow(f,L)-1)/(Math.pow(f,P)-1)}be.interpolationFactor=function(l,f,d,T){var P=0;if(l.name==="exponential")P=Le(f,l.base,d,T);else if(l.name==="linear")P=Le(f,1,d,T);else if(l.name==="cubic-bezier"){var L=l.controlPoints;P=new o(L[0],L[1],L[2],L[3]).solve(Le(f,1,d,T))}return P},be.parse=function(l,f){var d=l[0],T=l[1],P=l[2],L=l.slice(3);if(!Array.isArray(T)||T.length===0)return f.error("Expected an interpolation type expression.",1);if(T[0]==="linear")T={name:"linear"};else if(T[0]==="exponential"){var z=T[1];if(typeof z!="number")return f.error("Exponential interpolation requires a numeric base.",1,1);T={name:"exponential",base:z}}else{if(T[0]!=="cubic-bezier")return f.error("Unknown interpolation type "+String(T[0]),1,0);var Z=T.slice(1);if(Z.length!==4||Z.some(function(mt){return typeof mt!="number"||mt<0||mt>1}))return f.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);T={name:"cubic-bezier",controlPoints:Z}}if(l.length-1<4)return f.error("Expected at least 4 arguments, but found only "+(l.length-1)+".");if((l.length-1)%2!=0)return f.error("Expected an even number of arguments.");if(!(P=f.parse(P,2,qt)))return null;var ae=[],le=null;d==="interpolate-hcl"||d==="interpolate-lab"?le=_r:f.expectedType&&f.expectedType.kind!=="value"&&(le=f.expectedType);for(var de=0;de<L.length;de+=2){var Ae=L[de],Se=L[de+1],ke=de+3,Ye=de+4;if(typeof Ae!="number")return f.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ke);if(ae.length&&ae[ae.length-1][0]>=Ae)return f.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ke);var $e=f.parse(Se,Ye,le);if(!$e)return null;le=le||$e.type,ae.push([Ae,$e])}return le.kind==="number"||le.kind==="color"||le.kind==="array"&&le.itemType.kind==="number"&&typeof le.N=="number"?new be(le,d,T,P,ae):f.error("Type "+Un(le)+" is not interpolatable.")},be.prototype.evaluate=function(l){var f=this.labels,d=this.outputs;if(f.length===1)return d[0].evaluate(l);var T=this.input.evaluate(l);if(T<=f[0])return d[0].evaluate(l);var P=f.length;if(T>=f[P-1])return d[P-1].evaluate(l);var L=Ll(f,T),z=be.interpolationFactor(this.interpolation,T,f[L],f[L+1]),Z=d[L].evaluate(l),ae=d[L+1].evaluate(l);return this.operator==="interpolate"?ru[this.type.kind.toLowerCase()](Z,ae,z):this.operator==="interpolate-hcl"?oe.reverse(oe.interpolate(oe.forward(Z),oe.forward(ae),z)):ne.reverse(ne.interpolate(ne.forward(Z),ne.forward(ae),z))},be.prototype.eachChild=function(l){l(this.input);for(var f=0,d=this.outputs;f<d.length;f+=1)l(d[f])},be.prototype.outputDefined=function(){return this.outputs.every(function(l){return l.outputDefined()})},be.prototype.serialize=function(){var l;l=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var f=[this.operator,l,this.input.serialize()],d=0;d<this.labels.length;d++)f.push(this.labels[d],this.outputs[d].serialize());return f};var Ee=function(l,f){this.type=l,this.args=f};Ee.parse=function(l,f){if(l.length<2)return f.error("Expectected at least one argument.");var d=null,T=f.expectedType;T&&T.kind!=="value"&&(d=T);for(var P=[],L=0,z=l.slice(1);L<z.length;L+=1){var Z=f.parse(z[L],1+P.length,d,void 0,{typeAnnotation:"omit"});if(!Z)return null;d=d||Z.type,P.push(Z)}var ae=T&&P.some(function(le){return xi(T,le.type)});return new Ee(ae?Cr:d,P)},Ee.prototype.evaluate=function(l){for(var f,d=null,T=0,P=0,L=this.args;P<L.length&&(T++,(d=L[P].evaluate(l))&&d instanceof _o&&!d.available&&(f||(f=d.name),d=null,T===this.args.length&&(d=f)),d===null);P+=1);return d},Ee.prototype.eachChild=function(l){this.args.forEach(l)},Ee.prototype.outputDefined=function(){return this.args.every(function(l){return l.outputDefined()})},Ee.prototype.serialize=function(){var l=["coalesce"];return this.eachChild(function(f){l.push(f.serialize())}),l};var Be=function(l,f){this.type=f.type,this.bindings=[].concat(l),this.result=f};Be.prototype.evaluate=function(l){return this.result.evaluate(l)},Be.prototype.eachChild=function(l){for(var f=0,d=this.bindings;f<d.length;f+=1)l(d[f][1]);l(this.result)},Be.parse=function(l,f){if(l.length<4)return f.error("Expected at least 3 arguments, but found "+(l.length-1)+" instead.");for(var d=[],T=1;T<l.length-1;T+=2){var P=l[T];if(typeof P!="string")return f.error("Expected string, but found "+typeof P+" instead.",T);if(/[^a-zA-Z0-9_]/.test(P))return f.error("Variable names must contain only alphanumeric characters or '_'.",T);var L=f.parse(l[T+1],T+1);if(!L)return null;d.push([P,L])}var z=f.parse(l[l.length-1],l.length-1,f.expectedType,d);return z?new Be(d,z):null},Be.prototype.outputDefined=function(){return this.result.outputDefined()},Be.prototype.serialize=function(){for(var l=["let"],f=0,d=this.bindings;f<d.length;f+=1){var T=d[f];l.push(T[0],T[1].serialize())}return l.push(this.result.serialize()),l};var tt=function(l,f,d){this.type=l,this.index=f,this.input=d};tt.parse=function(l,f){if(l.length!==3)return f.error("Expected 2 arguments, but found "+(l.length-1)+" instead.");var d=f.parse(l[1],1,qt),T=f.parse(l[2],2,bi(f.expectedType||Cr));return d&&T?new tt(T.type.itemType,d,T):null},tt.prototype.evaluate=function(l){var f=this.index.evaluate(l),d=this.input.evaluate(l);if(f<0)throw new Za("Array index out of bounds: "+f+" < 0.");if(f>=d.length)throw new Za("Array index out of bounds: "+f+" > "+(d.length-1)+".");if(f!==Math.floor(f))throw new Za("Array index must be an integer, but found "+f+" instead.");return d[f]},tt.prototype.eachChild=function(l){l(this.index),l(this.input)},tt.prototype.outputDefined=function(){return!1},tt.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var wt=function(l,f){this.type=Er,this.needle=l,this.haystack=f};wt.parse=function(l,f){if(l.length!==3)return f.error("Expected 2 arguments, but found "+(l.length-1)+" instead.");var d=f.parse(l[1],1,Cr),T=f.parse(l[2],2,Cr);return d&&T?Ki(d.type,[Er,Lr,qt,Dr,Cr])?new wt(d,T):f.error("Expected first argument to be of type boolean, string, number or null, but found "+Un(d.type)+" instead"):null},wt.prototype.evaluate=function(l){var f=this.needle.evaluate(l),d=this.haystack.evaluate(l);if(!d)return!1;if(!gi(f,["boolean","string","number","null"]))throw new Za("Expected first argument to be of type boolean, string, number or null, but found "+Un(sa(f))+" instead.");if(!gi(d,["string","array"]))throw new Za("Expected second argument to be of type array or string, but found "+Un(sa(d))+" instead.");return d.indexOf(f)>=0},wt.prototype.eachChild=function(l){l(this.needle),l(this.haystack)},wt.prototype.outputDefined=function(){return!0},wt.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var b=function(l,f,d){this.type=qt,this.needle=l,this.haystack=f,this.fromIndex=d};b.parse=function(l,f){if(l.length<=2||l.length>=5)return f.error("Expected 3 or 4 arguments, but found "+(l.length-1)+" instead.");var d=f.parse(l[1],1,Cr),T=f.parse(l[2],2,Cr);if(!d||!T)return null;if(!Ki(d.type,[Er,Lr,qt,Dr,Cr]))return f.error("Expected first argument to be of type boolean, string, number or null, but found "+Un(d.type)+" instead");if(l.length===4){var P=f.parse(l[3],3,qt);return P?new b(d,T,P):null}return new b(d,T)},b.prototype.evaluate=function(l){var f=this.needle.evaluate(l),d=this.haystack.evaluate(l);if(!gi(f,["boolean","string","number","null"]))throw new Za("Expected first argument to be of type boolean, string, number or null, but found "+Un(sa(f))+" instead.");if(!gi(d,["string","array"]))throw new Za("Expected second argument to be of type array or string, but found "+Un(sa(d))+" instead.");if(this.fromIndex){var T=this.fromIndex.evaluate(l);return d.indexOf(f,T)}return d.indexOf(f)},b.prototype.eachChild=function(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)},b.prototype.outputDefined=function(){return!1},b.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var l=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),l]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Mt=function(l,f,d,T,P,L){this.inputType=l,this.type=f,this.input=d,this.cases=T,this.outputs=P,this.otherwise=L};Mt.parse=function(l,f){if(l.length<5)return f.error("Expected at least 4 arguments, but found only "+(l.length-1)+".");if(l.length%2!=1)return f.error("Expected an even number of arguments.");var d,T;f.expectedType&&f.expectedType.kind!=="value"&&(T=f.expectedType);for(var P={},L=[],z=2;z<l.length-1;z+=2){var Z=l[z],ae=l[z+1];Array.isArray(Z)||(Z=[Z]);var le=f.concat(z);if(Z.length===0)return le.error("Expected at least one branch label.");for(var de=0,Ae=Z;de<Ae.length;de+=1){var Se=Ae[de];if(typeof Se!="number"&&typeof Se!="string")return le.error("Branch labels must be numbers or strings.");if(typeof Se=="number"&&Math.abs(Se)>Number.MAX_SAFE_INTEGER)return le.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Se=="number"&&Math.floor(Se)!==Se)return le.error("Numeric branch labels must be integer values.");if(d){if(le.checkSubtype(d,sa(Se)))return null}else d=sa(Se);if(P[String(Se)]!==void 0)return le.error("Branch labels must be unique.");P[String(Se)]=L.length}var ke=f.parse(ae,z,T);if(!ke)return null;T=T||ke.type,L.push(ke)}var Ye=f.parse(l[1],1,Cr);if(!Ye)return null;var $e=f.parse(l[l.length-1],l.length-1,T);return $e?Ye.type.kind!=="value"&&f.concat(1).checkSubtype(d,Ye.type)?null:new Mt(d,T,Ye,P,L,$e):null},Mt.prototype.evaluate=function(l){var f=this.input.evaluate(l);return(sa(f)===this.inputType&&this.outputs[this.cases[f]]||this.otherwise).evaluate(l)},Mt.prototype.eachChild=function(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)},Mt.prototype.outputDefined=function(){return this.outputs.every(function(l){return l.outputDefined()})&&this.otherwise.outputDefined()},Mt.prototype.serialize=function(){for(var l=this,f=["match",this.input.serialize()],d=[],T={},P=0,L=Object.keys(this.cases).sort();P<L.length;P+=1){var z=L[P];(Ae=T[this.cases[z]])===void 0?(T[this.cases[z]]=d.length,d.push([this.cases[z],[z]])):d[Ae][1].push(z)}for(var Z=function(ke){return l.inputType.kind==="number"?Number(ke):ke},ae=0,le=d;ae<le.length;ae+=1){var de=le[ae],Ae=de[0],Se=de[1];f.push(Se.length===1?Z(Se[0]):Se.map(Z)),f.push(this.outputs[outputIndex$1].serialize())}return f.push(this.otherwise.serialize()),f};var Vt=function(l,f,d){this.type=l,this.branches=f,this.otherwise=d};Vt.parse=function(l,f){if(l.length<4)return f.error("Expected at least 3 arguments, but found only "+(l.length-1)+".");if(l.length%2!=0)return f.error("Expected an odd number of arguments.");var d;f.expectedType&&f.expectedType.kind!=="value"&&(d=f.expectedType);for(var T=[],P=1;P<l.length-1;P+=2){var L=f.parse(l[P],P,Er);if(!L)return null;var z=f.parse(l[P+1],P+1,d);if(!z)return null;T.push([L,z]),d=d||z.type}var Z=f.parse(l[l.length-1],l.length-1,d);return Z?new Vt(d,T,Z):null},Vt.prototype.evaluate=function(l){for(var f=0,d=this.branches;f<d.length;f+=1){var T=d[f],P=T[1];if(T[0].evaluate(l))return P.evaluate(l)}return this.otherwise.evaluate(l)},Vt.prototype.eachChild=function(l){for(var f=0,d=this.branches;f<d.length;f+=1){var T=d[f],P=T[1];l(T[0]),l(P)}l(this.otherwise)},Vt.prototype.outputDefined=function(){return this.branches.every(function(l){return l[1].outputDefined()})&&this.otherwise.outputDefined()},Vt.prototype.serialize=function(){var l=["case"];return this.eachChild(function(f){l.push(f.serialize())}),l};var He=function(l,f,d,T){this.type=l,this.input=f,this.beginIndex=d,this.endIndex=T};function Bn(l,f){return l==="=="||l==="!="?f.kind==="boolean"||f.kind==="string"||f.kind==="number"||f.kind==="null"||f.kind==="value":f.kind==="string"||f.kind==="number"||f.kind==="value"}function fn(l,f,d,T){return T.compare(f,d)===0}function Fr(l,f,d){var T=l!=="=="&&l!=="!=";return function(){function P(L,z,Z){this.type=Er,this.lhs=L,this.rhs=z,this.collator=Z,this.hasUntypedArgument=L.type.kind==="value"||z.type.kind==="value"}return P.parse=function(L,z){if(L.length!==3&&L.length!==4)return z.error("Expected two or three arguments.");var Z=L[0],ae=z.parse(L[1],1,Cr);if(!ae)return null;if(!Bn(Z,ae.type))return z.concat(1).error('"'+Z+`" comparisons are not supported for type '`+Un(ae.type)+"'.");var le=z.parse(L[2],2,Cr);if(!le)return null;if(!Bn(Z,le.type))return z.concat(2).error('"'+Z+`" comparisons are not supported for type '`+Un(le.type)+"'.");if(ae.type.kind!==le.type.kind&&ae.type.kind!=="value"&&le.type.kind!=="value")return z.error("Cannot compare types '"+Un(ae.type)+"' and '"+Un(le.type)+"'.");T&&(ae.type.kind==="value"&&le.type.kind!=="value"?ae=new ai(le.type,[ae]):ae.type.kind!=="value"&&le.type.kind==="value"&&(le=new ai(ae.type,[le])));var de=null;if(L.length===4){if(ae.type.kind!=="string"&&le.type.kind!=="string"&&ae.type.kind!=="value"&&le.type.kind!=="value")return z.error("Cannot use collator to compare non-string types.");if(!(de=z.parse(L[3],3,Qn)))return null}return new P(ae,le,de)},P.prototype.evaluate=function(L){var z=this.lhs.evaluate(L),Z=this.rhs.evaluate(L);if(T&&this.hasUntypedArgument){var ae=sa(z),le=sa(Z);if(ae.kind!==le.kind||ae.kind!=="string"&&ae.kind!=="number")throw new Za('Expected arguments for "'+l+'" to be (string, string) or (number, number), but found ('+ae.kind+", "+le.kind+") instead.")}if(this.collator&&!T&&this.hasUntypedArgument){var de=sa(z),Ae=sa(Z);if(de.kind!=="string"||Ae.kind!=="string")return f(L,z,Z)}return this.collator?d(L,z,Z,this.collator.evaluate(L)):f(L,z,Z)},P.prototype.eachChild=function(L){L(this.lhs),L(this.rhs),this.collator&&L(this.collator)},P.prototype.outputDefined=function(){return!0},P.prototype.serialize=function(){var L=[l];return this.eachChild(function(z){L.push(z.serialize())}),L},P}()}He.parse=function(l,f){if(l.length<=2||l.length>=5)return f.error("Expected 3 or 4 arguments, but found "+(l.length-1)+" instead.");var d=f.parse(l[1],1,Cr),T=f.parse(l[2],2,qt);if(!d||!T)return null;if(!Ki(d.type,[bi(Cr),Lr,Cr]))return f.error("Expected first argument to be of type array or string, but found "+Un(d.type)+" instead");if(l.length===4){var P=f.parse(l[3],3,qt);return P?new He(d.type,d,T,P):null}return new He(d.type,d,T)},He.prototype.evaluate=function(l){var f=this.input.evaluate(l),d=this.beginIndex.evaluate(l);if(!gi(f,["string","array"]))throw new Za("Expected first argument to be of type array or string, but found "+Un(sa(f))+" instead.");if(this.endIndex){var T=this.endIndex.evaluate(l);return f.slice(d,T)}return f.slice(d)},He.prototype.eachChild=function(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)},He.prototype.outputDefined=function(){return!1},He.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var l=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),l]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var yi=Fr("==",function(l,f,d){return f===d},fn),Oa=Fr("!=",function(l,f,d){return f!==d},function(l,f,d,T){return!fn(0,f,d,T)}),vn=Fr("<",function(l,f,d){return f<d},function(l,f,d,T){return T.compare(f,d)<0}),Gr=Fr(">",function(l,f,d){return f>d},function(l,f,d,T){return T.compare(f,d)>0}),$a=Fr("<=",function(l,f,d){return f<=d},function(l,f,d,T){return T.compare(f,d)<=0}),Vi=Fr(">=",function(l,f,d){return f>=d},function(l,f,d,T){return T.compare(f,d)>=0}),ua=function(l,f,d,T,P){this.type=Lr,this.number=l,this.locale=f,this.currency=d,this.minFractionDigits=T,this.maxFractionDigits=P};ua.parse=function(l,f){if(l.length!==3)return f.error("Expected two arguments.");var d=f.parse(l[1],1,qt);if(!d)return null;var T=l[2];if(typeof T!="object"||Array.isArray(T))return f.error("NumberFormat options argument must be an object.");var P=null;if(T.locale&&!(P=f.parse(T.locale,1,Lr)))return null;var L=null;if(T.currency&&!(L=f.parse(T.currency,1,Lr)))return null;var z=null;if(T["min-fraction-digits"]&&!(z=f.parse(T["min-fraction-digits"],1,qt)))return null;var Z=null;return T["max-fraction-digits"]&&!(Z=f.parse(T["max-fraction-digits"],1,qt))?null:new ua(d,P,L,z,Z)},ua.prototype.evaluate=function(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))},ua.prototype.eachChild=function(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)},ua.prototype.outputDefined=function(){return!1},ua.prototype.serialize=function(){var l={};return this.locale&&(l.locale=this.locale.serialize()),this.currency&&(l.currency=this.currency.serialize()),this.minFractionDigits&&(l["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(l["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),l]};var Jo=function(l){this.type=qt,this.input=l};Jo.parse=function(l,f){if(l.length!==2)return f.error("Expected 1 argument, but found "+(l.length-1)+" instead.");var d=f.parse(l[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?f.error("Expected argument of type string or array, but found "+Un(d.type)+" instead."):new Jo(d):null},Jo.prototype.evaluate=function(l){var f=this.input.evaluate(l);if(typeof f=="string"||Array.isArray(f))return f.length;throw new Za("Expected value to be of type string or array, but found "+Un(sa(f))+" instead.")},Jo.prototype.eachChild=function(l){l(this.input)},Jo.prototype.outputDefined=function(){return!1},Jo.prototype.serialize=function(){var l=["length"];return this.eachChild(function(f){l.push(f.serialize())}),l};var to={"==":yi,"!=":Oa,">":Gr,"<":vn,">=":Vi,"<=":$a,array:ai,at:tt,boolean:ai,case:Vt,coalesce:Ee,collator:Ve,format:Cs,image:bo,in:wt,"index-of":b,interpolate:be,"interpolate-hcl":be,"interpolate-lab":be,length:Jo,let:Be,literal:ho,match:Mt,number:ai,"number-format":ua,object:ai,slice:He,step:ms,string:ai,"to-boolean":ps,"to-color":ps,"to-number":ps,"to-string":ps,var:zu,within:Ps};function wo(l,f){var d=f[0],T=f[1],P=f[2],L=f[3];d=d.evaluate(l),T=T.evaluate(l),P=P.evaluate(l);var z=L?L.evaluate(l):1,Z=hs(d,T,P,z);if(Z)throw new Za(Z);return new $n(d/255*z,T/255*z,P/255*z,z)}function qo(l,f){return l in f}function ju(l,f){var d=f[l];return d===void 0?null:d}function fa(l){return{type:l}}function Yn(l){return{result:"success",value:l}}function dt(l){return{result:"error",value:l}}function vi(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function Ec(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function Os(l){return!!l.expression&&l.expression.interpolated}function Zi(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function Wi(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)}function Gu(l){return l}function te(l,f,d){return l!==void 0?l:f!==void 0?f:d!==void 0?d:void 0}function Ce(l,f,d,T,P){return te(typeof d===P?T[d]:void 0,l.default,f.default)}function rt(l,f,d){if(Zi(d)!=="number")return te(l.default,f.default);var T=l.stops.length;if(T===1||d<=l.stops[0][0])return l.stops[0][1];if(d>=l.stops[T-1][0])return l.stops[T-1][1];var P=Ll(l.stops.map(function(L){return L[0]}),d);return l.stops[P][1]}function lt(l,f,d){var T=l.base!==void 0?l.base:1;if(Zi(d)!=="number")return te(l.default,f.default);var P=l.stops.length;if(P===1||d<=l.stops[0][0])return l.stops[0][1];if(d>=l.stops[P-1][0])return l.stops[P-1][1];var L=Ll(l.stops.map(function(Ae){return Ae[0]}),d),z=function(Ae,Se,ke,Ye){var $e=Ye-ke,mt=Ae-ke;return $e===0?0:Se===1?mt/$e:(Math.pow(Se,mt)-1)/(Math.pow(Se,$e)-1)}(d,T,l.stops[L][0],l.stops[L+1][0]),Z=l.stops[L][1],ae=l.stops[L+1][1],le=ru[f.type]||Gu;if(l.colorSpace&&l.colorSpace!=="rgb"){var de=ye[l.colorSpace];le=function(Ae,Se){return de.reverse(de.interpolate(de.forward(Ae),de.forward(Se),z))}}return typeof Z.evaluate=="function"?{evaluate:function(){for(var Ae=[],Se=arguments.length;Se--;)Ae[Se]=arguments[Se];var ke=Z.evaluate.apply(void 0,Ae),Ye=ae.evaluate.apply(void 0,Ae);if(ke!==void 0&&Ye!==void 0)return le(ke,Ye,z)}}:le(Z,ae,z)}function Rt(l,f,d){return f.type==="color"?d=$n.parse(d):f.type==="formatted"?d=Ba.fromString(d.toString()):f.type==="resolvedImage"?d=_o.fromString(d.toString()):Zi(d)===f.type||f.type==="enum"&&f.values[d]||(d=void 0),te(d,l.default,f.default)}Me.register(to,{error:[{kind:"error"},[Lr],function(l,f){throw new Za(f[0].evaluate(l))}],typeof:[Lr,[Cr],function(l,f){return Un(sa(f[0].evaluate(l)))}],"to-rgba":[bi(qt,4),[_r],function(l,f){return f[0].evaluate(l).toArray()}],rgb:[_r,[qt,qt,qt],wo],rgba:[_r,[qt,qt,qt,qt],wo],has:{type:Er,overloads:[[[Lr],function(l,f){return qo(f[0].evaluate(l),l.properties())}],[[Lr,Wn],function(l,f){var d=f[1];return qo(f[0].evaluate(l),d.evaluate(l))}]]},get:{type:Cr,overloads:[[[Lr],function(l,f){return ju(f[0].evaluate(l),l.properties())}],[[Lr,Wn],function(l,f){var d=f[1];return ju(f[0].evaluate(l),d.evaluate(l))}]]},"feature-state":[Cr,[Lr],function(l,f){return ju(f[0].evaluate(l),l.featureState||{})}],properties:[Wn,[],function(l){return l.properties()}],"geometry-type":[Lr,[],function(l){return l.geometryType()}],id:[Cr,[],function(l){return l.id()}],zoom:[qt,[],function(l){return l.globals.zoom}],"heatmap-density":[qt,[],function(l){return l.globals.heatmapDensity||0}],"line-progress":[qt,[],function(l){return l.globals.lineProgress||0}],accumulated:[Cr,[],function(l){return l.globals.accumulated===void 0?null:l.globals.accumulated}],"+":[qt,fa(qt),function(l,f){for(var d=0,T=0,P=f;T<P.length;T+=1)d+=P[T].evaluate(l);return d}],"*":[qt,fa(qt),function(l,f){for(var d=1,T=0,P=f;T<P.length;T+=1)d*=P[T].evaluate(l);return d}],"-":{type:qt,overloads:[[[qt,qt],function(l,f){var d=f[1];return f[0].evaluate(l)-d.evaluate(l)}],[[qt],function(l,f){return-f[0].evaluate(l)}]]},"/":[qt,[qt,qt],function(l,f){var d=f[1];return f[0].evaluate(l)/d.evaluate(l)}],"%":[qt,[qt,qt],function(l,f){var d=f[1];return f[0].evaluate(l)%d.evaluate(l)}],ln2:[qt,[],function(){return Math.LN2}],pi:[qt,[],function(){return Math.PI}],e:[qt,[],function(){return Math.E}],"^":[qt,[qt,qt],function(l,f){var d=f[1];return Math.pow(f[0].evaluate(l),d.evaluate(l))}],sqrt:[qt,[qt],function(l,f){return Math.sqrt(f[0].evaluate(l))}],log10:[qt,[qt],function(l,f){return Math.log(f[0].evaluate(l))/Math.LN10}],ln:[qt,[qt],function(l,f){return Math.log(f[0].evaluate(l))}],log2:[qt,[qt],function(l,f){return Math.log(f[0].evaluate(l))/Math.LN2}],sin:[qt,[qt],function(l,f){return Math.sin(f[0].evaluate(l))}],cos:[qt,[qt],function(l,f){return Math.cos(f[0].evaluate(l))}],tan:[qt,[qt],function(l,f){return Math.tan(f[0].evaluate(l))}],asin:[qt,[qt],function(l,f){return Math.asin(f[0].evaluate(l))}],acos:[qt,[qt],function(l,f){return Math.acos(f[0].evaluate(l))}],atan:[qt,[qt],function(l,f){return Math.atan(f[0].evaluate(l))}],min:[qt,fa(qt),function(l,f){return Math.min.apply(Math,f.map(function(d){return d.evaluate(l)}))}],max:[qt,fa(qt),function(l,f){return Math.max.apply(Math,f.map(function(d){return d.evaluate(l)}))}],abs:[qt,[qt],function(l,f){return Math.abs(f[0].evaluate(l))}],round:[qt,[qt],function(l,f){var d=f[0].evaluate(l);return d<0?-Math.round(-d):Math.round(d)}],floor:[qt,[qt],function(l,f){return Math.floor(f[0].evaluate(l))}],ceil:[qt,[qt],function(l,f){return Math.ceil(f[0].evaluate(l))}],"filter-==":[Er,[Lr,Cr],function(l,f){var d=f[0],T=f[1];return l.properties()[d.value]===T.value}],"filter-id-==":[Er,[Cr],function(l,f){var d=f[0];return l.id()===d.value}],"filter-type-==":[Er,[Lr],function(l,f){var d=f[0];return l.geometryType()===d.value}],"filter-<":[Er,[Lr,Cr],function(l,f){var d=f[0],T=f[1],P=l.properties()[d.value],L=T.value;return typeof P==typeof L&&P<L}],"filter-id-<":[Er,[Cr],function(l,f){var d=f[0],T=l.id(),P=d.value;return typeof T==typeof P&&T<P}],"filter->":[Er,[Lr,Cr],function(l,f){var d=f[0],T=f[1],P=l.properties()[d.value],L=T.value;return typeof P==typeof L&&P>L}],"filter-id->":[Er,[Cr],function(l,f){var d=f[0],T=l.id(),P=d.value;return typeof T==typeof P&&T>P}],"filter-<=":[Er,[Lr,Cr],function(l,f){var d=f[0],T=f[1],P=l.properties()[d.value],L=T.value;return typeof P==typeof L&&P<=L}],"filter-id-<=":[Er,[Cr],function(l,f){var d=f[0],T=l.id(),P=d.value;return typeof T==typeof P&&T<=P}],"filter->=":[Er,[Lr,Cr],function(l,f){var d=f[0],T=f[1],P=l.properties()[d.value],L=T.value;return typeof P==typeof L&&P>=L}],"filter-id->=":[Er,[Cr],function(l,f){var d=f[0],T=l.id(),P=d.value;return typeof T==typeof P&&T>=P}],"filter-has":[Er,[Cr],function(l,f){return f[0].value in l.properties()}],"filter-has-id":[Er,[],function(l){return l.id()!==null&&l.id()!==void 0}],"filter-type-in":[Er,[bi(Lr)],function(l,f){return f[0].value.indexOf(l.geometryType())>=0}],"filter-id-in":[Er,[bi(Cr)],function(l,f){return f[0].value.indexOf(l.id())>=0}],"filter-in-small":[Er,[Lr,bi(Cr)],function(l,f){var d=f[0];return f[1].value.indexOf(l.properties()[d.value])>=0}],"filter-in-large":[Er,[Lr,bi(Cr)],function(l,f){var d=f[0],T=f[1];return function(P,L,z,Z){for(;z<=Z;){var ae=z+Z>>1;if(L[ae]===P)return!0;L[ae]>P?Z=ae-1:z=ae+1}return!1}(l.properties()[d.value],T.value,0,T.value.length-1)}],all:{type:Er,overloads:[[[Er,Er],function(l,f){var d=f[1];return f[0].evaluate(l)&&d.evaluate(l)}],[fa(Er),function(l,f){for(var d=0,T=f;d<T.length;d+=1)if(!T[d].evaluate(l))return!1;return!0}]]},any:{type:Er,overloads:[[[Er,Er],function(l,f){var d=f[1];return f[0].evaluate(l)||d.evaluate(l)}],[fa(Er),function(l,f){for(var d=0,T=f;d<T.length;d+=1)if(T[d].evaluate(l))return!0;return!1}]]},"!":[Er,[Er],function(l,f){return!f[0].evaluate(l)}],"is-supported-script":[Er,[Lr],function(l,f){var d=l.globals&&l.globals.isSupportedScript;return!d||d(f[0].evaluate(l))}],upcase:[Lr,[Lr],function(l,f){return f[0].evaluate(l).toUpperCase()}],downcase:[Lr,[Lr],function(l,f){return f[0].evaluate(l).toLowerCase()}],concat:[Lr,fa(Cr),function(l,f){return f.map(function(d){return tu(d.evaluate(l))}).join("")}],"resolved-locale":[Lr,[Qn],function(l,f){return f[0].evaluate(l).resolvedLocale()}]});var Tt=function(l,f){this.expression=l,this._warningHistory={},this._evaluator=new eo,this._defaultValue=f?function(d){return d.type==="color"&&Wi(d.default)?new $n(0,0,0,0):d.type==="color"?$n.parse(d.default)||null:d.default===void 0?null:d.default}(f):null,this._enumValues=f&&f.type==="enum"?f.values:null};function sr(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in to}function Nr(l,f){var d=new Uu(to,[],f?function(P){var L={color:_r,string:Lr,number:qt,enum:Lr,boolean:Er,formatted:Ci,resolvedImage:ii};return P.type==="array"?bi(L[P.value]||Cr,P.length):L[P.type]}(f):void 0),T=d.parse(l,void 0,void 0,void 0,f&&f.type==="string"?{typeAnnotation:"coerce"}:void 0);return T?Yn(new Tt(T,f)):dt(d.errors)}Tt.prototype.evaluateWithoutErrorHandling=function(l,f,d,T,P,L){return this._evaluator.globals=l,this._evaluator.feature=f,this._evaluator.featureState=d,this._evaluator.canonical=T,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=L,this.expression.evaluate(this._evaluator)},Tt.prototype.evaluate=function(l,f,d,T,P,L){this._evaluator.globals=l,this._evaluator.feature=f||null,this._evaluator.featureState=d||null,this._evaluator.canonical=T,this._evaluator.availableImages=P||null,this._evaluator.formattedSection=L||null;try{var z=this.expression.evaluate(this._evaluator);if(z==null||typeof z=="number"&&z!=z)return this._defaultValue;if(this._enumValues&&!(z in this._enumValues))throw new Za("Expected value to be one of "+Object.keys(this._enumValues).map(function(Z){return JSON.stringify(Z)}).join(", ")+", but found "+JSON.stringify(z)+" instead.");return z}catch(Z){return this._warningHistory[Z.message]||(this._warningHistory[Z.message]=!0,typeof console<"u"&&console.warn(Z.message)),this._defaultValue}};var ti=function(l,f){this.kind=l,this._styleExpression=f,this.isStateDependent=l!=="constant"&&!Fu(f.expression)};ti.prototype.evaluateWithoutErrorHandling=function(l,f,d,T,P,L){return this._styleExpression.evaluateWithoutErrorHandling(l,f,d,T,P,L)},ti.prototype.evaluate=function(l,f,d,T,P,L){return this._styleExpression.evaluate(l,f,d,T,P,L)};var jn=function(l,f,d,T){this.kind=l,this.zoomStops=d,this._styleExpression=f,this.isStateDependent=l!=="camera"&&!Fu(f.expression),this.interpolationType=T};function ha(l,f){if((l=Nr(l,f)).result==="error")return l;var d=l.value.expression,T=Qu(d);if(!T&&!vi(f))return dt([new lr("","data expressions not supported")]);var P=Nu(d,["zoom"]);if(!P&&!Ec(f))return dt([new lr("","zoom expressions not supported")]);var L=function z(Z){var ae=null;if(Z instanceof Be)ae=z(Z.result);else if(Z instanceof Ee)for(var le=0,de=Z.args;le<de.length&&!(ae=z(de[le]));le+=1);else(Z instanceof ms||Z instanceof be)&&Z.input instanceof Me&&Z.input.name==="zoom"&&(ae=Z);return ae instanceof lr||Z.eachChild(function(Ae){var Se=z(Ae);Se instanceof lr?ae=Se:!ae&&Se?ae=new lr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):ae&&Se&&ae!==Se&&(ae=new lr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),ae}(d);return L||P?L instanceof lr?dt([L]):L instanceof be&&!Os(f)?dt([new lr("",'"interpolate" expressions cannot be used with this property')]):Yn(L?new jn(T?"camera":"composite",l.value,L.labels,L instanceof be?L.interpolation:void 0):new ti(T?"constant":"source",l.value)):dt([new lr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}jn.prototype.evaluateWithoutErrorHandling=function(l,f,d,T,P,L){return this._styleExpression.evaluateWithoutErrorHandling(l,f,d,T,P,L)},jn.prototype.evaluate=function(l,f,d,T,P,L){return this._styleExpression.evaluate(l,f,d,T,P,L)},jn.prototype.interpolationFactor=function(l,f,d){return this.interpolationType?be.interpolationFactor(this.interpolationType,l,f,d):0};var Pi=function(l,f){this._parameters=l,this._specification=f,cr(this,function d(T,P){var L,z,Z,ae=P.type==="color",le=T.stops&&typeof T.stops[0][0]=="object",de=le||!(le||T.property!==void 0),Ae=T.type||(Os(P)?"exponential":"interval");if(ae&&((T=cr({},T)).stops&&(T.stops=T.stops.map(function(qr){return[qr[0],$n.parse(qr[1])]})),T.default=$n.parse(T.default?T.default:P.default)),T.colorSpace&&T.colorSpace!=="rgb"&&!ye[T.colorSpace])throw new Error("Unknown color space: "+T.colorSpace);if(Ae==="exponential")L=lt;else if(Ae==="interval")L=rt;else if(Ae==="categorical"){L=Ce,z=Object.create(null);for(var Se=0,ke=T.stops;Se<ke.length;Se+=1){var Ye=ke[Se];z[Ye[0]]=Ye[1]}Z=typeof T.stops[0][0]}else{if(Ae!=="identity")throw new Error('Unknown function type "'+Ae+'"');L=Rt}if(le){for(var $e={},mt=[],nt=0;nt<T.stops.length;nt++){var Et=T.stops[nt],Bt=Et[0].zoom;$e[Bt]===void 0&&($e[Bt]={zoom:Bt,type:T.type,property:T.property,default:T.default,stops:[]},mt.push(Bt)),$e[Bt].stops.push([Et[0].value,Et[1]])}for(var Wt=[],Zt=0,or=mt;Zt<or.length;Zt+=1){var Ar=or[Zt];Wt.push([$e[Ar].zoom,d($e[Ar],P)])}var Rr={name:"linear"};return{kind:"composite",interpolationType:Rr,interpolationFactor:be.interpolationFactor.bind(void 0,Rr),zoomStops:Wt.map(function(qr){return qr[0]}),evaluate:function(qr,Rn){var Yr=qr.zoom;return lt({stops:Wt,base:T.base},P,Yr).evaluate(Yr,Rn)}}}if(de){var bn=Ae==="exponential"?{name:"exponential",base:T.base!==void 0?T.base:1}:null;return{kind:"camera",interpolationType:bn,interpolationFactor:be.interpolationFactor.bind(void 0,bn),zoomStops:T.stops.map(function(qr){return qr[0]}),evaluate:function(qr){return L(T,P,qr.zoom,z,Z)}}}return{kind:"source",evaluate:function(qr,Rn){var Yr=Rn&&Rn.properties?Rn.properties[T.property]:void 0;return Yr===void 0?te(T.default,P.default):L(T,P,Yr,z,Z)}}}(this._parameters,this._specification))};function Ws(l){var f=l.key,d=l.value,T=l.valueSpec||{},P=l.objectElementValidators||{},L=l.style,z=l.styleSpec,Z=[],ae=Zi(d);if(ae!=="object")return[new Qe(f,d,"object expected, "+ae+" found")];for(var le in d){var de=le.split(".")[0],Ae=T[de]||T["*"],Se=void 0;if(P[de])Se=P[de];else if(T[de])Se=ui;else if(P["*"])Se=P["*"];else{if(!T["*"]){Z.push(new Qe(f,d[le],'unknown property "'+le+'"'));continue}Se=ui}Z=Z.concat(Se({key:(f&&f+".")+le,value:d[le],valueSpec:Ae,style:L,styleSpec:z,object:d,objectKey:le},d))}for(var ke in T)P[ke]||T[ke].required&&T[ke].default===void 0&&d[ke]===void 0&&Z.push(new Qe(f,d,'missing required property "'+ke+'"'));return Z}function vl(l){var f=l.value,d=l.valueSpec,T=l.style,P=l.styleSpec,L=l.key,z=l.arrayElementValidator||ui;if(Zi(f)!=="array")return[new Qe(L,f,"array expected, "+Zi(f)+" found")];if(d.length&&f.length!==d.length)return[new Qe(L,f,"array length "+d.length+" expected, length "+f.length+" found")];if(d["min-length"]&&f.length<d["min-length"])return[new Qe(L,f,"array length at least "+d["min-length"]+" expected, length "+f.length+" found")];var Z={type:d.value,values:d.values};P.$version<7&&(Z.function=d.function),Zi(d.value)==="object"&&(Z=d.value);for(var ae=[],le=0;le<f.length;le++)ae=ae.concat(z({array:f,arrayIndex:le,value:f[le],valueSpec:Z,style:T,styleSpec:P,key:L+"["+le+"]"}));return ae}function Fp(l){var f=l.key,d=l.value,T=l.valueSpec,P=Zi(d);return P==="number"&&d!=d&&(P="NaN"),P!=="number"?[new Qe(f,d,"number expected, "+P+" found")]:"minimum"in T&&d<T.minimum?[new Qe(f,d,d+" is less than the minimum value "+T.minimum)]:"maximum"in T&&d>T.maximum?[new Qe(f,d,d+" is greater than the maximum value "+T.maximum)]:[]}function Nf(l){var f,d,T,P=l.valueSpec,L=dr(l.value.type),z={},Z=L!=="categorical"&&l.value.property===void 0,ae=!Z,le=Zi(l.value.stops)==="array"&&Zi(l.value.stops[0])==="array"&&Zi(l.value.stops[0][0])==="object",de=Ws({key:l.key,value:l.value,valueSpec:l.styleSpec.function,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(ke){if(L==="identity")return[new Qe(ke.key,ke.value,'identity function may not have a "stops" property')];var Ye=[],$e=ke.value;return Ye=Ye.concat(vl({key:ke.key,value:$e,valueSpec:ke.valueSpec,style:ke.style,styleSpec:ke.styleSpec,arrayElementValidator:Ae})),Zi($e)==="array"&&$e.length===0&&Ye.push(new Qe(ke.key,$e,"array must have at least one stop")),Ye},default:function(ke){return ui({key:ke.key,value:ke.value,valueSpec:P,style:ke.style,styleSpec:ke.styleSpec})}}});return L==="identity"&&Z&&de.push(new Qe(l.key,l.value,'missing required property "property"')),L==="identity"||l.value.stops||de.push(new Qe(l.key,l.value,'missing required property "stops"')),L==="exponential"&&l.valueSpec.expression&&!Os(l.valueSpec)&&de.push(new Qe(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(ae&&!vi(l.valueSpec)?de.push(new Qe(l.key,l.value,"property functions not supported")):Z&&!Ec(l.valueSpec)&&de.push(new Qe(l.key,l.value,"zoom functions not supported"))),L!=="categorical"&&!le||l.value.property!==void 0||de.push(new Qe(l.key,l.value,'"property" property is required')),de;function Ae(ke){var Ye=[],$e=ke.value,mt=ke.key;if(Zi($e)!=="array")return[new Qe(mt,$e,"array expected, "+Zi($e)+" found")];if($e.length!==2)return[new Qe(mt,$e,"array length 2 expected, length "+$e.length+" found")];if(le){if(Zi($e[0])!=="object")return[new Qe(mt,$e,"object expected, "+Zi($e[0])+" found")];if($e[0].zoom===void 0)return[new Qe(mt,$e,"object stop key must have zoom")];if($e[0].value===void 0)return[new Qe(mt,$e,"object stop key must have value")];if(T&&T>dr($e[0].zoom))return[new Qe(mt,$e[0].zoom,"stop zoom values must appear in ascending order")];dr($e[0].zoom)!==T&&(T=dr($e[0].zoom),d=void 0,z={}),Ye=Ye.concat(Ws({key:mt+"[0]",value:$e[0],valueSpec:{zoom:{}},style:ke.style,styleSpec:ke.styleSpec,objectElementValidators:{zoom:Fp,value:Se}}))}else Ye=Ye.concat(Se({key:mt+"[0]",value:$e[0],valueSpec:{},style:ke.style,styleSpec:ke.styleSpec},$e));return sr($t($e[1]))?Ye.concat([new Qe(mt+"[1]",$e[1],"expressions are not allowed in function stops.")]):Ye.concat(ui({key:mt+"[1]",value:$e[1],valueSpec:P,style:ke.style,styleSpec:ke.styleSpec}))}function Se(ke,Ye){var $e=Zi(ke.value),mt=dr(ke.value),nt=ke.value!==null?ke.value:Ye;if(f){if($e!==f)return[new Qe(ke.key,nt,$e+" stop domain type must match previous stop domain type "+f)]}else f=$e;if($e!=="number"&&$e!=="string"&&$e!=="boolean")return[new Qe(ke.key,nt,"stop domain value must be a number, string, or boolean")];if($e!=="number"&&L!=="categorical"){var Et="number expected, "+$e+" found";return vi(P)&&L===void 0&&(Et+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Qe(ke.key,nt,Et)]}return L!=="categorical"||$e!=="number"||isFinite(mt)&&Math.floor(mt)===mt?L!=="categorical"&&$e==="number"&&d!==void 0&&mt<d?[new Qe(ke.key,nt,"stop domain values must appear in ascending order")]:(d=mt,L==="categorical"&&mt in z?[new Qe(ke.key,nt,"stop domain values must be unique")]:(z[mt]=!0,[])):[new Qe(ke.key,nt,"integer expected, found "+mt)]}}function vs(l){var f=(l.expressionContext==="property"?ha:Nr)($t(l.value),l.valueSpec);if(f.result==="error")return f.value.map(function(T){return new Qe(""+l.key+T.key,l.value,T.message)});var d=f.value.expression||f.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!d.outputDefined())return[new Qe(l.key,l.value,'Invalid data expression for "'+l.propertyKey+'". Output values must be contained as literals within the expression.')];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!Fu(d))return[new Qe(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter"&&!Fu(d))return[new Qe(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!Nu(d,["zoom","feature-state"]))return[new Qe(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!Qu(d))return[new Qe(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function nu(l){var f=l.key,d=l.value,T=l.valueSpec,P=[];return Array.isArray(T.values)?T.values.indexOf(dr(d))===-1&&P.push(new Qe(f,d,"expected one of ["+T.values.join(", ")+"], "+JSON.stringify(d)+" found")):Object.keys(T.values).indexOf(dr(d))===-1&&P.push(new Qe(f,d,"expected one of ["+Object.keys(T.values).join(", ")+"], "+JSON.stringify(d)+" found")),P}function nf(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(var f=0,d=l.slice(1);f<d.length;f+=1){var T=d[f];if(!nf(T)&&typeof T!="boolean")return!1}return!0;default:return!0}}Pi.deserialize=function(l){return new Pi(l._parameters,l._specification)},Pi.serialize=function(l){return{_parameters:l._parameters,_specification:l._specification}};var Ma={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ic(l){if(l==null)return{filter:function(){return!0},needGeometry:!1};nf(l)||(l=pa(l));var f=Nr(l,Ma);if(f.result==="error")throw new Error(f.value.map(function(d){return d.key+": "+d.message}).join(", "));return{filter:function(d,T,P){return f.value.evaluate(d,T,{},P)},needGeometry:function d(T){if(!Array.isArray(T))return!1;if(T[0]==="within")return!0;for(var P=1;P<T.length;P++)if(d(T[P]))return!0;return!1}(l)}}function Np(l,f){return l<f?-1:l>f?1:0}function pa(l){if(!l)return!0;var f,d=l[0];return l.length<=1?d!=="any":d==="=="?Cc(l[1],l[2],"=="):d==="!="?kl(Cc(l[1],l[2],"==")):d==="<"||d===">"||d==="<="||d===">="?Cc(l[1],l[2],d):d==="any"?(f=l.slice(1),["any"].concat(f.map(pa))):d==="all"?["all"].concat(l.slice(1).map(pa)):d==="none"?["all"].concat(l.slice(1).map(pa).map(kl)):d==="in"?bu(l[1],l.slice(2)):d==="!in"?kl(bu(l[1],l.slice(2))):d==="has"?iu(l[1]):d==="!has"?kl(iu(l[1])):d!=="within"||l}function Cc(l,f,d){switch(l){case"$type":return["filter-type-"+d,f];case"$id":return["filter-id-"+d,f];default:return["filter-"+d,l,f]}}function bu(l,f){if(f.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",f]];case"$id":return["filter-id-in",["literal",f]];default:return f.length>200&&!f.some(function(d){return typeof d!=typeof f[0]})?["filter-in-large",l,["literal",f.sort(Np)]]:["filter-in-small",l,["literal",f]]}}function iu(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function kl(l){return["!",l]}function Pc(l){return nf($t(l.value))?vs(cr({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function f(d){var T=d.value,P=d.key;if(Zi(T)!=="array")return[new Qe(P,T,"array expected, "+Zi(T)+" found")];var L,z=d.styleSpec,Z=[];if(T.length<1)return[new Qe(P,T,"filter array must have at least 1 element")];switch(Z=Z.concat(nu({key:P+"[0]",value:T[0],valueSpec:z.filter_operator,style:d.style,styleSpec:d.styleSpec})),dr(T[0])){case"<":case"<=":case">":case">=":T.length>=2&&dr(T[1])==="$type"&&Z.push(new Qe(P,T,'"$type" cannot be use with operator "'+T[0]+'"'));case"==":case"!=":T.length!==3&&Z.push(new Qe(P,T,'filter array for operator "'+T[0]+'" must have 3 elements'));case"in":case"!in":T.length>=2&&(L=Zi(T[1]))!=="string"&&Z.push(new Qe(P+"[1]",T[1],"string expected, "+L+" found"));for(var ae=2;ae<T.length;ae++)L=Zi(T[ae]),dr(T[1])==="$type"?Z=Z.concat(nu({key:P+"["+ae+"]",value:T[ae],valueSpec:z.geometry_type,style:d.style,styleSpec:d.styleSpec})):L!=="string"&&L!=="number"&&L!=="boolean"&&Z.push(new Qe(P+"["+ae+"]",T[ae],"string, number, or boolean expected, "+L+" found"));break;case"any":case"all":case"none":for(var le=1;le<T.length;le++)Z=Z.concat(f({key:P+"["+le+"]",value:T[le],style:d.style,styleSpec:d.styleSpec}));break;case"has":case"!has":L=Zi(T[1]),T.length!==2?Z.push(new Qe(P,T,'filter array for "'+T[0]+'" operator must have 2 elements')):L!=="string"&&Z.push(new Qe(P+"[1]",T[1],"string expected, "+L+" found"));break;case"within":L=Zi(T[1]),T.length!==2?Z.push(new Qe(P,T,'filter array for "'+T[0]+'" operator must have 2 elements')):L!=="object"&&Z.push(new Qe(P+"[1]",T[1],"object expected, "+L+" found"))}return Z}(l)}function Lh(l,f){var d=l.key,T=l.style,P=l.styleSpec,L=l.value,z=l.objectKey,Z=P[f+"_"+l.layerType];if(!Z)return[];var ae=z.match(/^(.*)-transition$/);if(f==="paint"&&ae&&Z[ae[1]]&&Z[ae[1]].transition)return ui({key:d,value:L,valueSpec:P.transition,style:T,styleSpec:P});var le,de=l.valueSpec||Z[z];if(!de)return[new Qe(d,L,'unknown property "'+z+'"')];if(Zi(L)==="string"&&vi(de)&&!de.tokens&&(le=/^{([^}]+)}$/.exec(L)))return[new Qe(d,L,'"'+z+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(le[1])+" }`.")];var Ae=[];return l.layerType==="symbol"&&(z==="text-field"&&T&&!T.glyphs&&Ae.push(new Qe(d,L,'use of "text-field" requires a style "glyphs" property')),z==="text-font"&&Wi($t(L))&&dr(L.type)==="identity"&&Ae.push(new Qe(d,L,'"text-font" does not support identity functions'))),Ae.concat(ui({key:l.key,value:L,valueSpec:de,style:T,styleSpec:P,expressionContext:"property",propertyType:f,propertyKey:z}))}function kh(l){return Lh(l,"paint")}function ac(l){return Lh(l,"layout")}function gl(l){var f=[],d=l.value,T=l.key,P=l.style,L=l.styleSpec;d.type||d.ref||f.push(new Qe(T,d,'either "type" or "ref" is required'));var z,Z=dr(d.type),ae=dr(d.ref);if(d.id)for(var le=dr(d.id),de=0;de<l.arrayIndex;de++){var Ae=P.layers[de];dr(Ae.id)===le&&f.push(new Qe(T,d.id,'duplicate layer id "'+d.id+'", previously used at line '+Ae.id.__line__))}if("ref"in d)["type","source","source-layer","filter","layout"].forEach(function(Ye){Ye in d&&f.push(new Qe(T,d[Ye],'"'+Ye+'" is prohibited for ref layers'))}),P.layers.forEach(function(Ye){dr(Ye.id)===ae&&(z=Ye)}),z?z.ref?f.push(new Qe(T,d.ref,"ref cannot reference another ref layer")):Z=dr(z.type):f.push(new Qe(T,d.ref,'ref layer "'+ae+'" not found'));else if(Z!=="background")if(d.source){var Se=P.sources&&P.sources[d.source],ke=Se&&dr(Se.type);Se?ke==="vector"&&Z==="raster"?f.push(new Qe(T,d.source,'layer "'+d.id+'" requires a raster source')):ke==="raster"&&Z!=="raster"?f.push(new Qe(T,d.source,'layer "'+d.id+'" requires a vector source')):ke!=="vector"||d["source-layer"]?ke==="raster-dem"&&Z!=="hillshade"?f.push(new Qe(T,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):Z!=="line"||!d.paint||!d.paint["line-gradient"]||ke==="geojson"&&Se.lineMetrics||f.push(new Qe(T,d,'layer "'+d.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):f.push(new Qe(T,d,'layer "'+d.id+'" must specify a "source-layer"')):f.push(new Qe(T,d.source,'source "'+d.source+'" not found'))}else f.push(new Qe(T,d,'missing required property "source"'));return f=f.concat(Ws({key:T,value:d,valueSpec:L.layer,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ui({key:T+".type",value:d.type,valueSpec:L.layer.type,style:l.style,styleSpec:l.styleSpec,object:d,objectKey:"type"})},filter:Pc,layout:function(Ye){return Ws({layer:d,key:Ye.key,value:Ye.value,style:Ye.style,styleSpec:Ye.styleSpec,objectElementValidators:{"*":function($e){return ac(cr({layerType:Z},$e))}}})},paint:function(Ye){return Ws({layer:d,key:Ye.key,value:Ye.value,style:Ye.style,styleSpec:Ye.styleSpec,objectElementValidators:{"*":function($e){return kh(cr({layerType:Z},$e))}}})}}}))}function Vu(l){var f=l.value,d=l.key,T=Zi(f);return T!=="string"?[new Qe(d,f,"string expected, "+T+" found")]:[]}var ba={promoteId:function(l){var f=l.key,d=l.value;if(Zi(d)==="string")return Vu({key:f,value:d});var T=[];for(var P in d)T.push.apply(T,Vu({key:f+"."+P,value:d[P]}));return T}};function oc(l){var f=l.value,d=l.key,T=l.styleSpec,P=l.style;if(!f.type)return[new Qe(d,f,'"type" is required')];var L,z=dr(f.type);switch(z){case"vector":case"raster":case"raster-dem":return Ws({key:d,value:f,valueSpec:T["source_"+z.replace("-","_")],style:l.style,styleSpec:T,objectElementValidators:ba});case"geojson":if(L=Ws({key:d,value:f,valueSpec:T.source_geojson,style:P,styleSpec:T,objectElementValidators:ba}),f.cluster)for(var Z in f.clusterProperties){var ae=f.clusterProperties[Z],le=ae[0],de=typeof le=="string"?[le,["accumulated"],["get",Z]]:le;L.push.apply(L,vs({key:d+"."+Z+".map",value:ae[1],expressionContext:"cluster-map"})),L.push.apply(L,vs({key:d+"."+Z+".reduce",value:de,expressionContext:"cluster-reduce"}))}return L;case"video":return Ws({key:d,value:f,valueSpec:T.source_video,style:P,styleSpec:T});case"image":return Ws({key:d,value:f,valueSpec:T.source_image,style:P,styleSpec:T});case"canvas":return[new Qe(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return nu({key:d+".type",value:f.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:P,styleSpec:T})}}function tl(l){var f=l.value,d=l.styleSpec,T=d.light,P=l.style,L=[],z=Zi(f);if(f===void 0)return L;if(z!=="object")return L.concat([new Qe("light",f,"object expected, "+z+" found")]);for(var Z in f){var ae=Z.match(/^(.*)-transition$/);L=L.concat(ae&&T[ae[1]]&&T[ae[1]].transition?ui({key:Z,value:f[Z],valueSpec:d.transition,style:P,styleSpec:d}):T[Z]?ui({key:Z,value:f[Z],valueSpec:T[Z],style:P,styleSpec:d}):[new Qe(Z,f[Z],'unknown property "'+Z+'"')])}return L}var ja={"*":function(){return[]},array:vl,boolean:function(l){var f=l.value,d=l.key,T=Zi(f);return T!=="boolean"?[new Qe(d,f,"boolean expected, "+T+" found")]:[]},number:Fp,color:function(l){var f=l.key,d=l.value,T=Zi(d);return T!=="string"?[new Qe(f,d,"color expected, "+T+" found")]:Zn(d)===null?[new Qe(f,d,'color expected, "'+d+'" found')]:[]},constants:It,enum:nu,filter:Pc,function:Nf,layer:gl,object:Ws,source:oc,light:tl,string:Vu,formatted:function(l){return Vu(l).length===0?[]:vs(l)},resolvedImage:function(l){return Vu(l).length===0?[]:vs(l)}};function ui(l){var f=l.value,d=l.valueSpec,T=l.styleSpec;return d.expression&&Wi(dr(f))?Nf(l):d.expression&&sr($t(f))?vs(l):d.type&&ja[d.type]?ja[d.type](l):Ws(cr({},l,{valueSpec:d.type?T[d.type]:d}))}function mi(l){var f=l.value,d=l.key,T=Vu(l);return T.length||(f.indexOf("{fontstack}")===-1&&T.push(new Qe(d,f,'"glyphs" url must include a "{fontstack}" token')),f.indexOf("{range}")===-1&&T.push(new Qe(d,f,'"glyphs" url must include a "{range}" token'))),T}function Qo(l,f){f===void 0&&(f=De);var d=[];return d=d.concat(ui({key:"",value:l,valueSpec:f.$root,styleSpec:f,style:l,objectElementValidators:{glyphs:mi,"*":function(){return[]}}})),l.constants&&(d=d.concat(It({key:"constants",value:l.constants,style:l,styleSpec:f}))),Bl(d)}function Bl(l){return[].concat(l).sort(function(f,d){return f.line-d.line})}function Al(l){return function(){for(var f=[],d=arguments.length;d--;)f[d]=arguments[d];return Bl(l.apply(this,f))}}Qo.source=Al(oc),Qo.light=Al(tl),Qo.layer=Al(gl),Qo.filter=Al(Pc),Qo.paintProperty=Al(kh),Qo.layoutProperty=Al(ac);var Ue=Qo,ht=Ue.light,St=Ue.paintProperty,ar=Ue.layoutProperty;function kt(l,f){var d=!1;if(f&&f.length)for(var T=0,P=f;T<P.length;T+=1)l.fire(new pt(new Error(P[T].message))),d=!0;return d}var fr=ur;function ur(l,f,d){var T=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;var P=new Int32Array(this.arrayBuffer);l=P[0],this.d=(f=P[1])+2*(d=P[2]);for(var L=0;L<this.d*this.d;L++){var z=P[3+L],Z=P[3+L+1];T.push(z===Z?null:P.subarray(z,Z))}var ae=P[3+T.length+1];this.keys=P.subarray(P[3+T.length],ae),this.bboxes=P.subarray(ae),this.insert=this._insertReadonly}else{this.d=f+2*d;for(var le=0;le<this.d*this.d;le++)T.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=l,this.padding=d,this.scale=f/l,this.uid=0;var de=d/f*l;this.min=-de,this.max=l+de}ur.prototype.insert=function(l,f,d,T,P){this._forEachCell(f,d,T,P,this._insertCell,this.uid++),this.keys.push(l),this.bboxes.push(f),this.bboxes.push(d),this.bboxes.push(T),this.bboxes.push(P)},ur.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ur.prototype._insertCell=function(l,f,d,T,P,L){this.cells[P].push(L)},ur.prototype.query=function(l,f,d,T,P){var L=this.min,z=this.max;if(l<=L&&f<=L&&z<=d&&z<=T&&!P)return Array.prototype.slice.call(this.keys);var Z=[];return this._forEachCell(l,f,d,T,this._queryCell,Z,{},P),Z},ur.prototype._queryCell=function(l,f,d,T,P,L,z,Z){var ae=this.cells[P];if(ae!==null)for(var le=this.keys,de=this.bboxes,Ae=0;Ae<ae.length;Ae++){var Se=ae[Ae];if(z[Se]===void 0){var ke=4*Se;(Z?Z(de[ke+0],de[ke+1],de[ke+2],de[ke+3]):l<=de[ke+2]&&f<=de[ke+3]&&d>=de[ke+0]&&T>=de[ke+1])?(z[Se]=!0,L.push(le[Se])):z[Se]=!1}}},ur.prototype._forEachCell=function(l,f,d,T,P,L,z,Z){for(var ae=this._convertToCellCoord(l),le=this._convertToCellCoord(f),de=this._convertToCellCoord(d),Ae=this._convertToCellCoord(T),Se=ae;Se<=de;Se++)for(var ke=le;ke<=Ae;ke++){var Ye=this.d*ke+Se;if((!Z||Z(this._convertFromCellCoord(Se),this._convertFromCellCoord(ke),this._convertFromCellCoord(Se+1),this._convertFromCellCoord(ke+1)))&&P.call(this,l,f,d,T,Ye,L,z,Z))return}},ur.prototype._convertFromCellCoord=function(l){return(l-this.padding)/this.scale},ur.prototype._convertToCellCoord=function(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))},ur.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var l=this.cells,f=3+this.cells.length+1+1,d=0,T=0;T<this.cells.length;T++)d+=this.cells[T].length;var P=new Int32Array(f+d+this.keys.length+this.bboxes.length);P[0]=this.extent,P[1]=this.n,P[2]=this.padding;for(var L=f,z=0;z<l.length;z++){var Z=l[z];P[3+z]=L,P.set(Z,L),L+=Z.length}return P[3+l.length]=L,P.set(this.keys,L),P[3+l.length+1]=L+=this.keys.length,P.set(this.bboxes,L),L+=this.bboxes.length,P.buffer};var kr=h.ImageData,Zr=h.ImageBitmap,hn={};function ir(l,f,d){d===void 0&&(d={}),Object.defineProperty(f,"_classRegistryKey",{value:l,writeable:!1}),hn[l]={klass:f,omit:d.omit||[],shallow:d.shallow||[]}}for(var Pn in ir("Object",Object),fr.serialize=function(l,f){var d=l.toArrayBuffer();return f&&f.push(d),{buffer:d}},fr.deserialize=function(l){return new fr(l.buffer)},ir("Grid",fr),ir("Color",$n),ir("Error",Error),ir("ResolvedImage",_o),ir("StylePropertyFunction",Pi),ir("StyleExpression",Tt,{omit:["_evaluator"]}),ir("ZoomDependentExpression",jn),ir("ZoomConstantExpression",ti),ir("CompoundExpression",Me,{omit:["_evaluate"]}),to)to[Pn]._classRegistryKey||ir("Expression_"+Pn,to[Pn]);function Oi(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function na(l){return Zr&&l instanceof Zr}function Dn(l,f){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp)return l;if(Oi(l)||na(l))return f&&f.push(l),l;if(ArrayBuffer.isView(l)){var d=l;return f&&f.push(d.buffer),d}if(l instanceof kr)return f&&f.push(l.data.buffer),l;if(Array.isArray(l)){for(var T=[],P=0,L=l;P<L.length;P+=1)T.push(Dn(L[P],f));return T}if(typeof l=="object"){var z=l.constructor,Z=z._classRegistryKey;if(!Z)throw new Error("can't serialize object of unregistered class");var ae=z.serialize?z.serialize(l,f):{};if(!z.serialize){for(var le in l)if(l.hasOwnProperty(le)&&!(hn[Z].omit.indexOf(le)>=0)){var de=l[le];ae[le]=hn[Z].shallow.indexOf(le)>=0?de:Dn(de,f)}l instanceof Error&&(ae.message=l.message)}if(ae.$name)throw new Error("$name property is reserved for worker serialization logic.");return Z!=="Object"&&(ae.$name=Z),ae}throw new Error("can't serialize object of type "+typeof l)}function ia(l){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||Oi(l)||na(l)||ArrayBuffer.isView(l)||l instanceof kr)return l;if(Array.isArray(l))return l.map(ia);if(typeof l=="object"){var f=l.$name||"Object",d=hn[f].klass;if(!d)throw new Error("can't deserialize unregistered class "+f);if(d.deserialize)return d.deserialize(l);for(var T=Object.create(d.prototype),P=0,L=Object.keys(l);P<L.length;P+=1){var z=L[P];if(z!=="$name"){var Z=l[z];T[z]=hn[f].shallow.indexOf(z)>=0?Z:ia(Z)}}return T}throw new Error("can't deserialize object of type "+typeof l)}var Xo=function(){this.first=!0};Xo.prototype.update=function(l,f){var d=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=f):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=f),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=d,!0))};var gr={"Latin-1 Supplement":function(l){return l>=128&&l<=255},Arabic:function(l){return l>=1536&&l<=1791},"Arabic Supplement":function(l){return l>=1872&&l<=1919},"Arabic Extended-A":function(l){return l>=2208&&l<=2303},"Hangul Jamo":function(l){return l>=4352&&l<=4607},"Unified Canadian Aboriginal Syllabics":function(l){return l>=5120&&l<=5759},Khmer:function(l){return l>=6016&&l<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(l){return l>=6320&&l<=6399},"General Punctuation":function(l){return l>=8192&&l<=8303},"Letterlike Symbols":function(l){return l>=8448&&l<=8527},"Number Forms":function(l){return l>=8528&&l<=8591},"Miscellaneous Technical":function(l){return l>=8960&&l<=9215},"Control Pictures":function(l){return l>=9216&&l<=9279},"Optical Character Recognition":function(l){return l>=9280&&l<=9311},"Enclosed Alphanumerics":function(l){return l>=9312&&l<=9471},"Geometric Shapes":function(l){return l>=9632&&l<=9727},"Miscellaneous Symbols":function(l){return l>=9728&&l<=9983},"Miscellaneous Symbols and Arrows":function(l){return l>=11008&&l<=11263},"CJK Radicals Supplement":function(l){return l>=11904&&l<=12031},"Kangxi Radicals":function(l){return l>=12032&&l<=12255},"Ideographic Description Characters":function(l){return l>=12272&&l<=12287},"CJK Symbols and Punctuation":function(l){return l>=12288&&l<=12351},Hiragana:function(l){return l>=12352&&l<=12447},Katakana:function(l){return l>=12448&&l<=12543},Bopomofo:function(l){return l>=12544&&l<=12591},"Hangul Compatibility Jamo":function(l){return l>=12592&&l<=12687},Kanbun:function(l){return l>=12688&&l<=12703},"Bopomofo Extended":function(l){return l>=12704&&l<=12735},"CJK Strokes":function(l){return l>=12736&&l<=12783},"Katakana Phonetic Extensions":function(l){return l>=12784&&l<=12799},"Enclosed CJK Letters and Months":function(l){return l>=12800&&l<=13055},"CJK Compatibility":function(l){return l>=13056&&l<=13311},"CJK Unified Ideographs Extension A":function(l){return l>=13312&&l<=19903},"Yijing Hexagram Symbols":function(l){return l>=19904&&l<=19967},"CJK Unified Ideographs":function(l){return l>=19968&&l<=40959},"Yi Syllables":function(l){return l>=40960&&l<=42127},"Yi Radicals":function(l){return l>=42128&&l<=42191},"Hangul Jamo Extended-A":function(l){return l>=43360&&l<=43391},"Hangul Syllables":function(l){return l>=44032&&l<=55215},"Hangul Jamo Extended-B":function(l){return l>=55216&&l<=55295},"Private Use Area":function(l){return l>=57344&&l<=63743},"CJK Compatibility Ideographs":function(l){return l>=63744&&l<=64255},"Arabic Presentation Forms-A":function(l){return l>=64336&&l<=65023},"Vertical Forms":function(l){return l>=65040&&l<=65055},"CJK Compatibility Forms":function(l){return l>=65072&&l<=65103},"Small Form Variants":function(l){return l>=65104&&l<=65135},"Arabic Presentation Forms-B":function(l){return l>=65136&&l<=65279},"Halfwidth and Fullwidth Forms":function(l){return l>=65280&&l<=65519}};function da(l){for(var f=0,d=l;f<d.length;f+=1)if(Dl(d[f].charCodeAt(0)))return!0;return!1}function Dl(l){return!(l!==746&&l!==747&&(l<4352||!(gr["Bopomofo Extended"](l)||gr.Bopomofo(l)||gr["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||gr["CJK Compatibility Ideographs"](l)||gr["CJK Compatibility"](l)||gr["CJK Radicals Supplement"](l)||gr["CJK Strokes"](l)||!(!gr["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||gr["CJK Unified Ideographs Extension A"](l)||gr["CJK Unified Ideographs"](l)||gr["Enclosed CJK Letters and Months"](l)||gr["Hangul Compatibility Jamo"](l)||gr["Hangul Jamo Extended-A"](l)||gr["Hangul Jamo Extended-B"](l)||gr["Hangul Jamo"](l)||gr["Hangul Syllables"](l)||gr.Hiragana(l)||gr["Ideographic Description Characters"](l)||gr.Kanbun(l)||gr["Kangxi Radicals"](l)||gr["Katakana Phonetic Extensions"](l)||gr.Katakana(l)&&l!==12540||!(!gr["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!gr["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||gr["Unified Canadian Aboriginal Syllabics"](l)||gr["Unified Canadian Aboriginal Syllabics Extended"](l)||gr["Vertical Forms"](l)||gr["Yijing Hexagram Symbols"](l)||gr["Yi Syllables"](l)||gr["Yi Radicals"](l))))}function Fl(l){return!(Dl(l)||function(f){return!!(gr["Latin-1 Supplement"](f)&&(f===167||f===169||f===174||f===177||f===188||f===189||f===190||f===215||f===247)||gr["General Punctuation"](f)&&(f===8214||f===8224||f===8225||f===8240||f===8241||f===8251||f===8252||f===8258||f===8263||f===8264||f===8265||f===8273)||gr["Letterlike Symbols"](f)||gr["Number Forms"](f)||gr["Miscellaneous Technical"](f)&&(f>=8960&&f<=8967||f>=8972&&f<=8991||f>=8996&&f<=9e3||f===9003||f>=9085&&f<=9114||f>=9150&&f<=9165||f===9167||f>=9169&&f<=9179||f>=9186&&f<=9215)||gr["Control Pictures"](f)&&f!==9251||gr["Optical Character Recognition"](f)||gr["Enclosed Alphanumerics"](f)||gr["Geometric Shapes"](f)||gr["Miscellaneous Symbols"](f)&&!(f>=9754&&f<=9759)||gr["Miscellaneous Symbols and Arrows"](f)&&(f>=11026&&f<=11055||f>=11088&&f<=11097||f>=11192&&f<=11243)||gr["CJK Symbols and Punctuation"](f)||gr.Katakana(f)||gr["Private Use Area"](f)||gr["CJK Compatibility Forms"](f)||gr["Small Form Variants"](f)||gr["Halfwidth and Fullwidth Forms"](f)||f===8734||f===8756||f===8757||f>=9984&&f<=10087||f>=10102&&f<=10131||f===65532||f===65533)}(l))}function Ga(l){return l>=1424&&l<=2303||gr["Arabic Presentation Forms-A"](l)||gr["Arabic Presentation Forms-B"](l)}function es(l,f){return!(!f&&Ga(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||gr.Khmer(l))}function zp(l){for(var f=0,d=l;f<d.length;f+=1)if(Ga(d[f].charCodeAt(0)))return!0;return!1}var Bh=null,au="unavailable",Hu=null,af=function(l){l&&typeof l=="string"&&l.indexOf("NetworkError")>-1&&(au="error"),Bh&&Bh(l)};function Dh(){of.fire(new Ie("pluginStateChange",{pluginStatus:au,pluginURL:Hu}))}var of=new At,Qd=function(){return au},yl=function(){if(au!=="deferred"||!Hu)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");au="loading",Dh(),Hu&&yu({url:Hu},function(l){l?af(l):(au="loaded",Dh())})},Wu={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return au==="loaded"||Wu.applyArabicShaping!=null},isLoading:function(){return au==="loading"},setState:function(l){au=l.pluginStatus,Hu=l.pluginURL},isParsed:function(){return Wu.applyArabicShaping!=null&&Wu.processBidirectionalText!=null&&Wu.processStyledBidirectionalText!=null},getPluginURL:function(){return Hu}},Si=function(l,f){this.zoom=l,f?(this.now=f.now,this.fadeDuration=f.fadeDuration,this.zoomHistory=f.zoomHistory,this.transition=f.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Xo,this.transition={})};Si.prototype.isSupportedScript=function(l){return function(f,d){for(var T=0,P=f;T<P.length;T+=1)if(!es(P[T].charCodeAt(0),d))return!1;return!0}(l,Wu.isLoaded())},Si.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Si.prototype.getCrossfadeParameters=function(){var l=this.zoom,f=l-Math.floor(l),d=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:f+(1-f)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*f}};var Nl=function(l,f){this.property=l,this.value=f,this.expression=function(d,T){if(Wi(d))return new Pi(d,T);if(sr(d)){var P=ha(d,T);if(P.result==="error")throw new Error(P.value.map(function(z){return z.key+": "+z.message}).join(", "));return P.value}var L=d;return typeof d=="string"&&T.type==="color"&&(L=$n.parse(d)),{kind:"constant",evaluate:function(){return L}}}(f===void 0?l.specification.default:f,l.specification)};Nl.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Nl.prototype.possiblyEvaluate=function(l,f,d){return this.property.possiblyEvaluate(this,l,f,d)};var rl=function(l){this.property=l,this.value=new Nl(l,void 0)};rl.prototype.transitioned=function(l,f){return new sf(this.property,this.value,f,D({},l.transition,this.transition),l.now)},rl.prototype.untransitioned=function(){return new sf(this.property,this.value,null,{},0)};var gs=function(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)};gs.prototype.getValue=function(l){return I(this._values[l].value.value)},gs.prototype.setValue=function(l,f){this._values.hasOwnProperty(l)||(this._values[l]=new rl(this._values[l].property)),this._values[l].value=new Nl(this._values[l].property,f===null?void 0:I(f))},gs.prototype.getTransition=function(l){return I(this._values[l].transition)},gs.prototype.setTransition=function(l,f){this._values.hasOwnProperty(l)||(this._values[l]=new rl(this._values[l].property)),this._values[l].transition=I(f)||void 0},gs.prototype.serialize=function(){for(var l={},f=0,d=Object.keys(this._values);f<d.length;f+=1){var T=d[f],P=this.getValue(T);P!==void 0&&(l[T]=P);var L=this.getTransition(T);L!==void 0&&(l[T+"-transition"]=L)}return l},gs.prototype.transitioned=function(l,f){for(var d=new qu(this._properties),T=0,P=Object.keys(this._values);T<P.length;T+=1){var L=P[T];d._values[L]=this._values[L].transitioned(l,f._values[L])}return d},gs.prototype.untransitioned=function(){for(var l=new qu(this._properties),f=0,d=Object.keys(this._values);f<d.length;f+=1){var T=d[f];l._values[T]=this._values[T].untransitioned()}return l};var sf=function(l,f,d,T,P){this.property=l,this.value=f,this.begin=P+T.delay||0,this.end=this.begin+T.duration||0,l.specification.transition&&(T.delay||T.duration)&&(this.prior=d)};sf.prototype.possiblyEvaluate=function(l,f,d){var T=l.now||0,P=this.value.possiblyEvaluate(l,f,d),L=this.prior;if(L){if(T>this.end)return this.prior=null,P;if(this.value.isDataDriven())return this.prior=null,P;if(T<this.begin)return L.possiblyEvaluate(l,f,d);var z=(T-this.begin)/(this.end-this.begin);return this.property.interpolate(L.possiblyEvaluate(l,f,d),P,function(Z){if(Z<=0)return 0;if(Z>=1)return 1;var ae=Z*Z,le=ae*Z;return 4*(Z<.5?le:3*(Z-ae)+le-.75)}(z))}return P};var qu=function(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)};qu.prototype.possiblyEvaluate=function(l,f,d){for(var T=new Fh(this._properties),P=0,L=Object.keys(this._values);P<L.length;P+=1){var z=L[P];T._values[z]=this._values[z].possiblyEvaluate(l,f,d)}return T},qu.prototype.hasTransition=function(){for(var l=0,f=Object.keys(this._values);l<f.length;l+=1)if(this._values[f[l]].prior)return!0;return!1};var _l=function(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues)};_l.prototype.getValue=function(l){return I(this._values[l].value)},_l.prototype.setValue=function(l,f){this._values[l]=new Nl(this._values[l].property,f===null?void 0:I(f))},_l.prototype.serialize=function(){for(var l={},f=0,d=Object.keys(this._values);f<d.length;f+=1){var T=d[f],P=this.getValue(T);P!==void 0&&(l[T]=P)}return l},_l.prototype.possiblyEvaluate=function(l,f,d){for(var T=new Fh(this._properties),P=0,L=Object.keys(this._values);P<L.length;P+=1){var z=L[P];T._values[z]=this._values[z].possiblyEvaluate(l,f,d)}return T};var qs=function(l,f,d){this.property=l,this.value=f,this.parameters=d};qs.prototype.isConstant=function(){return this.value.kind==="constant"},qs.prototype.constantOr=function(l){return this.value.kind==="constant"?this.value.value:l},qs.prototype.evaluate=function(l,f,d,T){return this.property.evaluate(this.value,this.parameters,l,f,d,T)};var Fh=function(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)};Fh.prototype.get=function(l){return this._values[l]};var wn=function(l){this.specification=l};wn.prototype.possiblyEvaluate=function(l,f){return l.expression.evaluate(f)},wn.prototype.interpolate=function(l,f,d){var T=ru[this.specification.type];return T?T(l,f,d):l};var sn=function(l,f){this.specification=l,this.overrides=f};sn.prototype.possiblyEvaluate=function(l,f,d,T){return new qs(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(f,null,{},d,T)}:l.expression,f)},sn.prototype.interpolate=function(l,f,d){if(l.value.kind!=="constant"||f.value.kind!=="constant")return l;if(l.value.value===void 0||f.value.value===void 0)return new qs(this,{kind:"constant",value:void 0},l.parameters);var T=ru[this.specification.type];return T?new qs(this,{kind:"constant",value:T(l.value.value,f.value.value,d)},l.parameters):l},sn.prototype.evaluate=function(l,f,d,T,P,L){return l.kind==="constant"?l.value:l.evaluate(f,d,T,P,L)};var Up=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.possiblyEvaluate=function(d,T,P,L){if(d.value===void 0)return new qs(this,{kind:"constant",value:void 0},T);if(d.expression.kind==="constant"){var z=d.expression.evaluate(T,null,{},P,L),Z=d.property.specification.type==="resolvedImage"&&typeof z!="string"?z.name:z,ae=this._calculate(Z,Z,Z,T);return new qs(this,{kind:"constant",value:ae},T)}if(d.expression.kind==="camera"){var le=this._calculate(d.expression.evaluate({zoom:T.zoom-1}),d.expression.evaluate({zoom:T.zoom}),d.expression.evaluate({zoom:T.zoom+1}),T);return new qs(this,{kind:"constant",value:le},T)}return new qs(this,d.expression,T)},f.prototype.evaluate=function(d,T,P,L,z,Z){if(d.kind==="source"){var ae=d.evaluate(T,P,L,z,Z);return this._calculate(ae,ae,ae,T)}return d.kind==="composite"?this._calculate(d.evaluate({zoom:Math.floor(T.zoom)-1},P,L),d.evaluate({zoom:Math.floor(T.zoom)},P,L),d.evaluate({zoom:Math.floor(T.zoom)+1},P,L),T):d.value},f.prototype._calculate=function(d,T,P,L){return L.zoom>L.zoomHistory.lastIntegerZoom?{from:d,to:T}:{from:P,to:T}},f.prototype.interpolate=function(d){return d},f}(sn),Xs=function(l){this.specification=l};Xs.prototype.possiblyEvaluate=function(l,f,d,T){if(l.value!==void 0){if(l.expression.kind==="constant"){var P=l.expression.evaluate(f,null,{},d,T);return this._calculate(P,P,P,f)}return this._calculate(l.expression.evaluate(new Si(Math.floor(f.zoom-1),f)),l.expression.evaluate(new Si(Math.floor(f.zoom),f)),l.expression.evaluate(new Si(Math.floor(f.zoom+1),f)),f)}},Xs.prototype._calculate=function(l,f,d,T){return T.zoom>T.zoomHistory.lastIntegerZoom?{from:l,to:f}:{from:d,to:f}},Xs.prototype.interpolate=function(l){return l};var nl=function(l){this.specification=l};nl.prototype.possiblyEvaluate=function(l,f,d,T){return!!l.expression.evaluate(f,null,{},d,T)},nl.prototype.interpolate=function(){return!1};var ts=function(l){for(var f in this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],l){var d=l[f];d.specification.overridable&&this.overridableProperties.push(f);var T=this.defaultPropertyValues[f]=new Nl(d,void 0),P=this.defaultTransitionablePropertyValues[f]=new rl(d);this.defaultTransitioningPropertyValues[f]=P.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=T.possiblyEvaluate({})}};ir("DataDrivenProperty",sn),ir("DataConstantProperty",wn),ir("CrossFadedDataDrivenProperty",Up),ir("CrossFadedProperty",Xs),ir("ColorRampProperty",nl);var il=function(l){function f(d,T){if(l.call(this),this.id=d.id,this.type=d.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},d.type!=="custom"&&(this.metadata=(d=d).metadata,this.minzoom=d.minzoom,this.maxzoom=d.maxzoom,d.type!=="background"&&(this.source=d.source,this.sourceLayer=d["source-layer"],this.filter=d.filter),T.layout&&(this._unevaluatedLayout=new _l(T.layout)),T.paint)){for(var P in this._transitionablePaint=new gs(T.paint),d.paint)this.setPaintProperty(P,d.paint[P],{validate:!1});for(var L in d.layout)this.setLayoutProperty(L,d.layout[L],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Fh(T.paint)}}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},f.prototype.getLayoutProperty=function(d){return d==="visibility"?this.visibility:this._unevaluatedLayout.getValue(d)},f.prototype.setLayoutProperty=function(d,T,P){P===void 0&&(P={}),T!=null&&this._validate(ar,"layers."+this.id+".layout."+d,d,T,P)||(d!=="visibility"?this._unevaluatedLayout.setValue(d,T):this.visibility=T)},f.prototype.getPaintProperty=function(d){return se(d,"-transition")?this._transitionablePaint.getTransition(d.slice(0,-11)):this._transitionablePaint.getValue(d)},f.prototype.setPaintProperty=function(d,T,P){if(P===void 0&&(P={}),T!=null&&this._validate(St,"layers."+this.id+".paint."+d,d,T,P))return!1;if(se(d,"-transition"))return this._transitionablePaint.setTransition(d.slice(0,-11),T||void 0),!1;var L=this._transitionablePaint._values[d],z=L.property.specification["property-type"]==="cross-faded-data-driven",Z=L.value.isDataDriven(),ae=L.value;this._transitionablePaint.setValue(d,T),this._handleSpecialPaintPropertyUpdate(d);var le=this._transitionablePaint._values[d].value;return le.isDataDriven()||Z||z||this._handleOverridablePaintPropertyUpdate(d,ae,le)},f.prototype._handleSpecialPaintPropertyUpdate=function(d){},f.prototype._handleOverridablePaintPropertyUpdate=function(d,T,P){return!1},f.prototype.isHidden=function(d){return!!(this.minzoom&&d<this.minzoom)||!!(this.maxzoom&&d>=this.maxzoom)||this.visibility==="none"},f.prototype.updateTransitions=function(d){this._transitioningPaint=this._transitionablePaint.transitioned(d,this._transitioningPaint)},f.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},f.prototype.recalculate=function(d,T){d.getCrossfadeParameters&&(this._crossfadeParameters=d.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(d,void 0,T)),this.paint=this._transitioningPaint.possiblyEvaluate(d,void 0,T)},f.prototype.serialize=function(){var d={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(d.layout=d.layout||{},d.layout.visibility=this.visibility),X(d,function(T,P){return!(T===void 0||P==="layout"&&!Object.keys(T).length||P==="paint"&&!Object.keys(T).length)})},f.prototype._validate=function(d,T,P,L,z){return z===void 0&&(z={}),(!z||z.validate!==!1)&&kt(this,d.call(Ue,{key:T,layerType:this.type,objectKey:P,value:L,styleSpec:De,style:{glyphs:!0,sprite:!0}}))},f.prototype.is3D=function(){return!1},f.prototype.isTileClipped=function(){return!1},f.prototype.hasOffscreenPass=function(){return!1},f.prototype.resize=function(){},f.prototype.isStateDependent=function(){for(var d in this.paint._values){var T=this.paint.get(d);if(T instanceof qs&&vi(T.property.specification)&&(T.value.kind==="source"||T.value.kind==="composite")&&T.value.isStateDependent)return!0}return!1},f}(At),em={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ms=function(l,f){this._structArray=l,this._pos1=f*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ei=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function rs(l,f){f===void 0&&(f=1);var d=0,T=0;return{members:l.map(function(P){var L=em[P.type].BYTES_PER_ELEMENT,z=d=Uv(d,Math.max(f,L)),Z=P.components||1;return T=Math.max(T,L),d+=L*Z,{name:P.name,type:P.type,components:Z,offset:z}}),size:Uv(d,Math.max(T,f)),alignment:f}}function Uv(l,f){return Math.ceil(l/f)*f}ei.serialize=function(l,f){return l._trim(),f&&(l.isTransferred=!0,f.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}},ei.deserialize=function(l){var f=Object.create(this.prototype);return f.arrayBuffer=l.arrayBuffer,f.length=l.length,f.capacity=l.arrayBuffer.byteLength/f.bytesPerElement,f._refreshViews(),f},ei.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ei.prototype.clear=function(){this.length=0},ei.prototype.resize=function(l){this.reserve(l),this.length=l},ei.prototype.reserve=function(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var f=this.uint8;this._refreshViews(),f&&this.uint8.set(f)}},ei.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var uf=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d,T){var P=this.length;return this.resize(P+1),this.emplace(P,d,T)},f.prototype.emplace=function(d,T,P){var L=2*d;return this.int16[L+0]=T,this.int16[L+1]=P,d},f}(ei);uf.prototype.bytesPerElement=4,ir("StructArrayLayout2i4",uf);var tm=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d,T,P,L){var z=this.length;return this.resize(z+1),this.emplace(z,d,T,P,L)},f.prototype.emplace=function(d,T,P,L,z){var Z=4*d;return this.int16[Z+0]=T,this.int16[Z+1]=P,this.int16[Z+2]=L,this.int16[Z+3]=z,d},f}(ei);tm.prototype.bytesPerElement=8,ir("StructArrayLayout4i8",tm);var sc=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d,T,P,L,z,Z){var ae=this.length;return this.resize(ae+1),this.emplace(ae,d,T,P,L,z,Z)},f.prototype.emplace=function(d,T,P,L,z,Z,ae){var le=6*d;return this.int16[le+0]=T,this.int16[le+1]=P,this.int16[le+2]=L,this.int16[le+3]=z,this.int16[le+4]=Z,this.int16[le+5]=ae,d},f}(ei);sc.prototype.bytesPerElement=12,ir("StructArrayLayout2i4i12",sc);var Va=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d,T,P,L,z,Z){var ae=this.length;return this.resize(ae+1),this.emplace(ae,d,T,P,L,z,Z)},f.prototype.emplace=function(d,T,P,L,z,Z,ae){var le=4*d,de=8*d;return this.int16[le+0]=T,this.int16[le+1]=P,this.uint8[de+4]=L,this.uint8[de+5]=z,this.uint8[de+6]=Z,this.uint8[de+7]=ae,d},f}(ei);Va.prototype.bytesPerElement=8,ir("StructArrayLayout2i4ub8",Va);var Oc=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d,T){var P=this.length;return this.resize(P+1),this.emplace(P,d,T)},f.prototype.emplace=function(d,T,P){var L=2*d;return this.float32[L+0]=T,this.float32[L+1]=P,d},f}(ei);Oc.prototype.bytesPerElement=8,ir("StructArrayLayout2f8",Oc);var Is=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d,T,P,L,z,Z,ae,le,de,Ae){var Se=this.length;return this.resize(Se+1),this.emplace(Se,d,T,P,L,z,Z,ae,le,de,Ae)},f.prototype.emplace=function(d,T,P,L,z,Z,ae,le,de,Ae,Se){var ke=10*d;return this.uint16[ke+0]=T,this.uint16[ke+1]=P,this.uint16[ke+2]=L,this.uint16[ke+3]=z,this.uint16[ke+4]=Z,this.uint16[ke+5]=ae,this.uint16[ke+6]=le,this.uint16[ke+7]=de,this.uint16[ke+8]=Ae,this.uint16[ke+9]=Se,d},f}(ei);Is.prototype.bytesPerElement=20,ir("StructArrayLayout10ui20",Is);var jp=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d,T,P,L,z,Z,ae,le,de,Ae,Se,ke){var Ye=this.length;return this.resize(Ye+1),this.emplace(Ye,d,T,P,L,z,Z,ae,le,de,Ae,Se,ke)},f.prototype.emplace=function(d,T,P,L,z,Z,ae,le,de,Ae,Se,ke,Ye){var $e=12*d;return this.int16[$e+0]=T,this.int16[$e+1]=P,this.int16[$e+2]=L,this.int16[$e+3]=z,this.uint16[$e+4]=Z,this.uint16[$e+5]=ae,this.uint16[$e+6]=le,this.uint16[$e+7]=de,this.int16[$e+8]=Ae,this.int16[$e+9]=Se,this.int16[$e+10]=ke,this.int16[$e+11]=Ye,d},f}(ei);jp.prototype.bytesPerElement=24,ir("StructArrayLayout4i4ui4i24",jp);var Mc=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d,T,P){var L=this.length;return this.resize(L+1),this.emplace(L,d,T,P)},f.prototype.emplace=function(d,T,P,L){var z=3*d;return this.float32[z+0]=T,this.float32[z+1]=P,this.float32[z+2]=L,d},f}(ei);Mc.prototype.bytesPerElement=12,ir("StructArrayLayout3f12",Mc);var Nh=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d){var T=this.length;return this.resize(T+1),this.emplace(T,d)},f.prototype.emplace=function(d,T){return this.uint32[1*d+0]=T,d},f}(ei);Nh.prototype.bytesPerElement=4,ir("StructArrayLayout1ul4",Nh);var xu=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d,T,P,L,z,Z,ae,le,de){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,d,T,P,L,z,Z,ae,le,de)},f.prototype.emplace=function(d,T,P,L,z,Z,ae,le,de,Ae){var Se=10*d,ke=5*d;return this.int16[Se+0]=T,this.int16[Se+1]=P,this.int16[Se+2]=L,this.int16[Se+3]=z,this.int16[Se+4]=Z,this.int16[Se+5]=ae,this.uint32[ke+3]=le,this.uint16[Se+8]=de,this.uint16[Se+9]=Ae,d},f}(ei);xu.prototype.bytesPerElement=20,ir("StructArrayLayout6i1ul2ui20",xu);var lf=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d,T,P,L,z,Z){var ae=this.length;return this.resize(ae+1),this.emplace(ae,d,T,P,L,z,Z)},f.prototype.emplace=function(d,T,P,L,z,Z,ae){var le=6*d;return this.int16[le+0]=T,this.int16[le+1]=P,this.int16[le+2]=L,this.int16[le+3]=z,this.int16[le+4]=Z,this.int16[le+5]=ae,d},f}(ei);lf.prototype.bytesPerElement=12,ir("StructArrayLayout2i2i2i12",lf);var uc=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d,T,P,L,z){var Z=this.length;return this.resize(Z+1),this.emplace(Z,d,T,P,L,z)},f.prototype.emplace=function(d,T,P,L,z,Z){var ae=4*d,le=8*d;return this.float32[ae+0]=T,this.float32[ae+1]=P,this.float32[ae+2]=L,this.int16[le+6]=z,this.int16[le+7]=Z,d},f}(ei);uc.prototype.bytesPerElement=16,ir("StructArrayLayout2f1f2i16",uc);var cf=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d,T,P,L){var z=this.length;return this.resize(z+1),this.emplace(z,d,T,P,L)},f.prototype.emplace=function(d,T,P,L,z){var Z=12*d,ae=3*d;return this.uint8[Z+0]=T,this.uint8[Z+1]=P,this.float32[ae+1]=L,this.float32[ae+2]=z,d},f}(ei);cf.prototype.bytesPerElement=12,ir("StructArrayLayout2ub2f12",cf);var wu=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d,T,P){var L=this.length;return this.resize(L+1),this.emplace(L,d,T,P)},f.prototype.emplace=function(d,T,P,L){var z=3*d;return this.uint16[z+0]=T,this.uint16[z+1]=P,this.uint16[z+2]=L,d},f}(ei);wu.prototype.bytesPerElement=6,ir("StructArrayLayout3ui6",wu);var Tu=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d,T,P,L,z,Z,ae,le,de,Ae,Se,ke,Ye,$e,mt,nt,Et){var Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,d,T,P,L,z,Z,ae,le,de,Ae,Se,ke,Ye,$e,mt,nt,Et)},f.prototype.emplace=function(d,T,P,L,z,Z,ae,le,de,Ae,Se,ke,Ye,$e,mt,nt,Et,Bt){var Wt=24*d,Zt=12*d,or=48*d;return this.int16[Wt+0]=T,this.int16[Wt+1]=P,this.uint16[Wt+2]=L,this.uint16[Wt+3]=z,this.uint32[Zt+2]=Z,this.uint32[Zt+3]=ae,this.uint32[Zt+4]=le,this.uint16[Wt+10]=de,this.uint16[Wt+11]=Ae,this.uint16[Wt+12]=Se,this.float32[Zt+7]=ke,this.float32[Zt+8]=Ye,this.uint8[or+36]=$e,this.uint8[or+37]=mt,this.uint8[or+38]=nt,this.uint32[Zt+10]=Et,this.int16[Wt+22]=Bt,d},f}(ei);Tu.prototype.bytesPerElement=48,ir("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Tu);var Gp=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d,T,P,L,z,Z,ae,le,de,Ae,Se,ke,Ye,$e,mt,nt,Et,Bt,Wt,Zt,or,Ar,Rr,bn,qr,Rn,Yr,_i){var Xn=this.length;return this.resize(Xn+1),this.emplace(Xn,d,T,P,L,z,Z,ae,le,de,Ae,Se,ke,Ye,$e,mt,nt,Et,Bt,Wt,Zt,or,Ar,Rr,bn,qr,Rn,Yr,_i)},f.prototype.emplace=function(d,T,P,L,z,Z,ae,le,de,Ae,Se,ke,Ye,$e,mt,nt,Et,Bt,Wt,Zt,or,Ar,Rr,bn,qr,Rn,Yr,_i,Xn){var dn=34*d,Mi=17*d;return this.int16[dn+0]=T,this.int16[dn+1]=P,this.int16[dn+2]=L,this.int16[dn+3]=z,this.int16[dn+4]=Z,this.int16[dn+5]=ae,this.int16[dn+6]=le,this.int16[dn+7]=de,this.uint16[dn+8]=Ae,this.uint16[dn+9]=Se,this.uint16[dn+10]=ke,this.uint16[dn+11]=Ye,this.uint16[dn+12]=$e,this.uint16[dn+13]=mt,this.uint16[dn+14]=nt,this.uint16[dn+15]=Et,this.uint16[dn+16]=Bt,this.uint16[dn+17]=Wt,this.uint16[dn+18]=Zt,this.uint16[dn+19]=or,this.uint16[dn+20]=Ar,this.uint16[dn+21]=Rr,this.uint16[dn+22]=bn,this.uint32[Mi+12]=qr,this.float32[Mi+13]=Rn,this.float32[Mi+14]=Yr,this.float32[Mi+15]=_i,this.float32[Mi+16]=Xn,d},f}(ei);Gp.prototype.bytesPerElement=68,ir("StructArrayLayout8i15ui1ul4f68",Gp);var lc=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d){var T=this.length;return this.resize(T+1),this.emplace(T,d)},f.prototype.emplace=function(d,T){return this.float32[1*d+0]=T,d},f}(ei);lc.prototype.bytesPerElement=4,ir("StructArrayLayout1f4",lc);var al=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d,T,P){var L=this.length;return this.resize(L+1),this.emplace(L,d,T,P)},f.prototype.emplace=function(d,T,P,L){var z=3*d;return this.int16[z+0]=T,this.int16[z+1]=P,this.int16[z+2]=L,d},f}(ei);al.prototype.bytesPerElement=6,ir("StructArrayLayout3i6",al);var zh=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d,T,P){var L=this.length;return this.resize(L+1),this.emplace(L,d,T,P)},f.prototype.emplace=function(d,T,P,L){var z=4*d;return this.uint32[2*d+0]=T,this.uint16[z+2]=P,this.uint16[z+3]=L,d},f}(ei);zh.prototype.bytesPerElement=8,ir("StructArrayLayout1ul2ui8",zh);var zf=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d,T){var P=this.length;return this.resize(P+1),this.emplace(P,d,T)},f.prototype.emplace=function(d,T,P){var L=2*d;return this.uint16[L+0]=T,this.uint16[L+1]=P,d},f}(ei);zf.prototype.bytesPerElement=4,ir("StructArrayLayout2ui4",zf);var rm=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d){var T=this.length;return this.resize(T+1),this.emplace(T,d)},f.prototype.emplace=function(d,T){return this.uint16[1*d+0]=T,d},f}(ei);rm.prototype.bytesPerElement=2,ir("StructArrayLayout1ui2",rm);var Vp=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},f.prototype.emplaceBack=function(d,T,P,L){var z=this.length;return this.resize(z+1),this.emplace(z,d,T,P,L)},f.prototype.emplace=function(d,T,P,L,z){var Z=4*d;return this.float32[Z+0]=T,this.float32[Z+1]=P,this.float32[Z+2]=L,this.float32[Z+3]=z,d},f}(ei);Vp.prototype.bytesPerElement=16,ir("StructArrayLayout4f16",Vp);var m=function(l){function f(){l.apply(this,arguments)}l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f;var d={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return d.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},d.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},d.x1.get=function(){return this._structArray.int16[this._pos2+2]},d.y1.get=function(){return this._structArray.int16[this._pos2+3]},d.x2.get=function(){return this._structArray.int16[this._pos2+4]},d.y2.get=function(){return this._structArray.int16[this._pos2+5]},d.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},d.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},d.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},d.anchorPoint.get=function(){return new u(this.anchorPointX,this.anchorPointY)},Object.defineProperties(f.prototype,d),f}(Ms);m.prototype.size=20;var A=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.get=function(d){return new m(this,d)},f}(xu);ir("CollisionBoxArray",A);var g=function(l){function f(){l.apply(this,arguments)}l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f;var d={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return d.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},d.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},d.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},d.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},d.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},d.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},d.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},d.segment.get=function(){return this._structArray.uint16[this._pos2+10]},d.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},d.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},d.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},d.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},d.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},d.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},d.placedOrientation.set=function(T){this._structArray.uint8[this._pos1+37]=T},d.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},d.hidden.set=function(T){this._structArray.uint8[this._pos1+38]=T},d.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},d.crossTileID.set=function(T){this._structArray.uint32[this._pos4+10]=T},d.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(f.prototype,d),f}(Ms);g.prototype.size=48;var S=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.get=function(d){return new g(this,d)},f}(Tu);ir("PlacedSymbolArray",S);var F=function(l){function f(){l.apply(this,arguments)}l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f;var d={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return d.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},d.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},d.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},d.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},d.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},d.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},d.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},d.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},d.key.get=function(){return this._structArray.uint16[this._pos2+8]},d.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},d.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},d.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},d.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},d.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},d.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},d.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},d.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},d.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},d.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},d.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},d.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},d.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},d.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},d.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},d.crossTileID.set=function(T){this._structArray.uint32[this._pos4+12]=T},d.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},d.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},d.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},d.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(f.prototype,d),f}(Ms);F.prototype.size=68;var q=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.get=function(d){return new F(this,d)},f}(Gp);ir("SymbolInstanceArray",q);var K=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.getoffsetX=function(d){return this.float32[1*d+0]},f}(lc);ir("GlyphOffsetArray",K);var ie=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.getx=function(d){return this.int16[3*d+0]},f.prototype.gety=function(d){return this.int16[3*d+1]},f.prototype.gettileUnitDistanceFromAnchor=function(d){return this.int16[3*d+2]},f}(al);ir("SymbolLineVertexArray",ie);var fe=function(l){function f(){l.apply(this,arguments)}l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f;var d={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return d.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},d.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},d.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(f.prototype,d),f}(Ms);fe.prototype.size=8;var _e=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.get=function(d){return new fe(this,d)},f}(zh);ir("FeatureIndexArray",_e);var Re=rs([{name:"a_pos",components:2,type:"Int16"}],4).members,Fe=function(l){l===void 0&&(l=[]),this.segments=l};function Ne(l,f){return 256*(l=E(Math.floor(l),0,255))+E(Math.floor(f),0,255)}Fe.prototype.prepareSegment=function(l,f,d,T){var P=this.segments[this.segments.length-1];return l>Fe.MAX_VERTEX_ARRAY_LENGTH&&U("Max vertices per segment is "+Fe.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+l),(!P||P.vertexLength+l>Fe.MAX_VERTEX_ARRAY_LENGTH||P.sortKey!==T)&&(P={vertexOffset:f.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},T!==void 0&&(P.sortKey=T),this.segments.push(P)),P},Fe.prototype.get=function(){return this.segments},Fe.prototype.destroy=function(){for(var l=0,f=this.segments;l<f.length;l+=1){var d=f[l];for(var T in d.vaos)d.vaos[T].destroy()}},Fe.simpleSegment=function(l,f,d,T){return new Fe([{vertexOffset:l,primitiveOffset:f,vertexLength:d,primitiveLength:T,vaos:{},sortKey:0}])},Fe.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ir("SegmentVector",Fe);var Je=rs([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Ze=a(function(l){l.exports=function(f,d){var T,P,L,z,Z,ae,le,de;for(P=f.length-(T=3&f.length),L=d,Z=3432918353,ae=461845907,de=0;de<P;)le=255&f.charCodeAt(de)|(255&f.charCodeAt(++de))<<8|(255&f.charCodeAt(++de))<<16|(255&f.charCodeAt(++de))<<24,++de,L=27492+(65535&(z=5*(65535&(L=(L^=le=(65535&(le=(le=(65535&le)*Z+(((le>>>16)*Z&65535)<<16)&4294967295)<<15|le>>>17))*ae+(((le>>>16)*ae&65535)<<16)&4294967295)<<13|L>>>19))+((5*(L>>>16)&65535)<<16)&4294967295))+((58964+(z>>>16)&65535)<<16);switch(le=0,T){case 3:le^=(255&f.charCodeAt(de+2))<<16;case 2:le^=(255&f.charCodeAt(de+1))<<8;case 1:L^=le=(65535&(le=(le=(65535&(le^=255&f.charCodeAt(de)))*Z+(((le>>>16)*Z&65535)<<16)&4294967295)<<15|le>>>17))*ae+(((le>>>16)*ae&65535)<<16)&4294967295}return L^=f.length,L=2246822507*(65535&(L^=L>>>16))+((2246822507*(L>>>16)&65535)<<16)&4294967295,L=3266489909*(65535&(L^=L>>>13))+((3266489909*(L>>>16)&65535)<<16)&4294967295,(L^=L>>>16)>>>0}}),ct=a(function(l){l.exports=function(f,d){for(var T,P=f.length,L=d^P,z=0;P>=4;)T=1540483477*(65535&(T=255&f.charCodeAt(z)|(255&f.charCodeAt(++z))<<8|(255&f.charCodeAt(++z))<<16|(255&f.charCodeAt(++z))<<24))+((1540483477*(T>>>16)&65535)<<16),L=1540483477*(65535&L)+((1540483477*(L>>>16)&65535)<<16)^(T=1540483477*(65535&(T^=T>>>24))+((1540483477*(T>>>16)&65535)<<16)),P-=4,++z;switch(P){case 3:L^=(255&f.charCodeAt(z+2))<<16;case 2:L^=(255&f.charCodeAt(z+1))<<8;case 1:L=1540483477*(65535&(L^=255&f.charCodeAt(z)))+((1540483477*(L>>>16)&65535)<<16)}return L=1540483477*(65535&(L^=L>>>13))+((1540483477*(L>>>16)&65535)<<16),(L^=L>>>15)>>>0}}),Xe=Ze,st=ct;Xe.murmur3=Ze,Xe.murmur2=st;var yt=function(){this.ids=[],this.positions=[],this.indexed=!1};yt.prototype.add=function(l,f,d,T){this.ids.push(Jt(l)),this.positions.push(f,d,T)},yt.prototype.getPositions=function(l){for(var f=Jt(l),d=0,T=this.ids.length-1;d<T;){var P=d+T>>1;this.ids[P]>=f?T=P:d=P+1}for(var L=[];this.ids[d]===f;)L.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return L},yt.serialize=function(l,f){var d=new Float64Array(l.ids),T=new Uint32Array(l.positions);return function P(L,z,Z,ae){for(;Z<ae;){for(var le=L[Z+ae>>1],de=Z-1,Ae=ae+1;;){do de++;while(L[de]<le);do Ae--;while(L[Ae]>le);if(de>=Ae)break;Ht(L,de,Ae),Ht(z,3*de,3*Ae),Ht(z,3*de+1,3*Ae+1),Ht(z,3*de+2,3*Ae+2)}Ae-Z<ae-Ae?(P(L,z,Z,Ae),Z=Ae+1):(P(L,z,Ae+1,ae),ae=Ae)}}(d,T,0,d.length-1),f&&f.push(d.buffer,T.buffer),{ids:d,positions:T}},yt.deserialize=function(l){var f=new yt;return f.ids=l.ids,f.positions=l.positions,f.indexed=!0,f};var Lt=Math.pow(2,53)-1;function Jt(l){var f=+l;return!isNaN(f)&&f<=Lt?f:Xe(String(l))}function Ht(l,f,d){var T=l[f];l[f]=l[d],l[d]=T}ir("FeaturePositionMap",yt);var er=function(l,f){this.gl=l.gl,this.location=f},pr=function(l){function f(d,T){l.call(this,d,T),this.current=0}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.set=function(d){this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))},f}(er),Sr=function(l){function f(d,T){l.call(this,d,T),this.current=0}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.set=function(d){this.current!==d&&(this.current=d,this.gl.uniform1f(this.location,d))},f}(er),Tr=function(l){function f(d,T){l.call(this,d,T),this.current=[0,0]}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.set=function(d){d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1]))},f}(er),Xr=function(l){function f(d,T){l.call(this,d,T),this.current=[0,0,0]}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.set=function(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2]))},f}(er),Tn=function(l){function f(d,T){l.call(this,d,T),this.current=[0,0,0,0]}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.set=function(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]&&d[3]===this.current[3]||(this.current=d,this.gl.uniform4f(this.location,d[0],d[1],d[2],d[3]))},f}(er),Ln=function(l){function f(d,T){l.call(this,d,T),this.current=$n.transparent}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.set=function(d){d.r===this.current.r&&d.g===this.current.g&&d.b===this.current.b&&d.a===this.current.a||(this.current=d,this.gl.uniform4f(this.location,d.r,d.g,d.b,d.a))},f}(er),In=new Float32Array(16),zi=function(l){function f(d,T){l.call(this,d,T),this.current=In}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.set=function(d){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(var T=1;T<16;T++)if(d[T]!==this.current[T]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}},f}(er);function $r(l){return[Ne(255*l.r,255*l.g),Ne(255*l.b,255*l.a)]}var pn=function(l,f,d){this.value=l,this.uniformNames=f.map(function(T){return"u_"+T}),this.type=d};pn.prototype.setUniform=function(l,f,d){l.set(d.constantOr(this.value))},pn.prototype.getBinding=function(l,f,d){return this.type==="color"?new Ln(l,f):new Sr(l,f)};var li=function(l,f){this.uniformNames=f.map(function(d){return"u_"+d}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};li.prototype.setConstantPatternPositions=function(l,f){this.pixelRatioFrom=f.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=f.tlbr,this.patternTo=l.tlbr},li.prototype.setUniform=function(l,f,d,T){var P=T==="u_pattern_to"?this.patternTo:T==="u_pattern_from"?this.patternFrom:T==="u_pixel_ratio_to"?this.pixelRatioTo:T==="u_pixel_ratio_from"?this.pixelRatioFrom:null;P&&l.set(P)},li.prototype.getBinding=function(l,f,d){return d.substr(0,9)==="u_pattern"?new Tn(l,f):new Sr(l,f)};var Kn=function(l,f,d,T){this.expression=l,this.type=d,this.maxValue=0,this.paintVertexAttributes=f.map(function(P){return{name:"a_"+P,type:"Float32",components:d==="color"?2:1,offset:0}}),this.paintVertexArray=new T};Kn.prototype.populatePaintArray=function(l,f,d,T,P){var L=this.paintVertexArray.length,z=this.expression.evaluate(new Si(0),f,{},T,[],P);this.paintVertexArray.resize(l),this._setPaintValue(L,l,z)},Kn.prototype.updatePaintArray=function(l,f,d,T){var P=this.expression.evaluate({zoom:0},d,T);this._setPaintValue(l,f,P)},Kn.prototype._setPaintValue=function(l,f,d){if(this.type==="color")for(var T=$r(d),P=l;P<f;P++)this.paintVertexArray.emplace(P,T[0],T[1]);else{for(var L=l;L<f;L++)this.paintVertexArray.emplace(L,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}},Kn.prototype.upload=function(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Kn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var qn=function(l,f,d,T,P,L){this.expression=l,this.uniformNames=f.map(function(z){return"u_"+z+"_t"}),this.type=d,this.useIntegerZoom=T,this.zoom=P,this.maxValue=0,this.paintVertexAttributes=f.map(function(z){return{name:"a_"+z,type:"Float32",components:d==="color"?4:2,offset:0}}),this.paintVertexArray=new L};qn.prototype.populatePaintArray=function(l,f,d,T,P){var L=this.expression.evaluate(new Si(this.zoom),f,{},T,[],P),z=this.expression.evaluate(new Si(this.zoom+1),f,{},T,[],P),Z=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(Z,l,L,z)},qn.prototype.updatePaintArray=function(l,f,d,T){var P=this.expression.evaluate({zoom:this.zoom},d,T),L=this.expression.evaluate({zoom:this.zoom+1},d,T);this._setPaintValue(l,f,P,L)},qn.prototype._setPaintValue=function(l,f,d,T){if(this.type==="color")for(var P=$r(d),L=$r(T),z=l;z<f;z++)this.paintVertexArray.emplace(z,P[0],P[1],L[0],L[1]);else{for(var Z=l;Z<f;Z++)this.paintVertexArray.emplace(Z,d,T);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(T))}},qn.prototype.upload=function(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},qn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},qn.prototype.setUniform=function(l,f){var d=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,T=E(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);l.set(T)},qn.prototype.getBinding=function(l,f,d){return new Sr(l,f)};var ri=function(l,f,d,T,P,L){this.expression=l,this.type=f,this.useIntegerZoom=d,this.zoom=T,this.layerId=L,this.zoomInPaintVertexArray=new P,this.zoomOutPaintVertexArray=new P};ri.prototype.populatePaintArray=function(l,f,d){var T=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(T,l,f.patterns&&f.patterns[this.layerId],d)},ri.prototype.updatePaintArray=function(l,f,d,T,P){this._setPaintValues(l,f,d.patterns&&d.patterns[this.layerId],P)},ri.prototype._setPaintValues=function(l,f,d,T){if(T&&d){var P=T[d.min],L=T[d.mid],z=T[d.max];if(P&&L&&z)for(var Z=l;Z<f;Z++)this.zoomInPaintVertexArray.emplace(Z,L.tl[0],L.tl[1],L.br[0],L.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],L.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(Z,L.tl[0],L.tl[1],L.br[0],L.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],L.pixelRatio,z.pixelRatio)}},ri.prototype.upload=function(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,Je.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,Je.members,this.expression.isStateDependent))},ri.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Gn=function(l,f,d){this.binders={},this._buffers=[];var T=[];for(var P in l.paint._values)if(d(P)){var L=l.paint.get(P);if(L instanceof qs&&vi(L.property.specification)){var z=Do(P,l.type),Z=L.value,ae=L.property.specification.type,le=L.property.useIntegerZoom,de=L.property.specification["property-type"],Ae=de==="cross-faded"||de==="cross-faded-data-driven";if(Z.kind==="constant")this.binders[P]=Ae?new li(Z.value,z):new pn(Z.value,z,ae),T.push("/u_"+P);else if(Z.kind==="source"||Ae){var Se=mo(P,ae,"source");this.binders[P]=Ae?new ri(Z,ae,le,f,Se,l.id):new Kn(Z,z,ae,Se),T.push("/a_"+P)}else{var ke=mo(P,ae,"composite");this.binders[P]=new qn(Z,z,ae,le,f,ke),T.push("/z_"+P)}}}this.cacheKey=T.sort().join("")};Gn.prototype.getMaxValue=function(l){var f=this.binders[l];return f instanceof Kn||f instanceof qn?f.maxValue:0},Gn.prototype.populatePaintArrays=function(l,f,d,T,P){for(var L in this.binders){var z=this.binders[L];(z instanceof Kn||z instanceof qn||z instanceof ri)&&z.populatePaintArray(l,f,d,T,P)}},Gn.prototype.setConstantPatternPositions=function(l,f){for(var d in this.binders){var T=this.binders[d];T instanceof li&&T.setConstantPatternPositions(l,f)}},Gn.prototype.updatePaintArrays=function(l,f,d,T,P){var L=!1;for(var z in l)for(var Z=0,ae=f.getPositions(z);Z<ae.length;Z+=1){var le=ae[Z],de=d.feature(le.index);for(var Ae in this.binders){var Se=this.binders[Ae];if((Se instanceof Kn||Se instanceof qn||Se instanceof ri)&&Se.expression.isStateDependent===!0){var ke=T.paint.get(Ae);Se.expression=ke.value,Se.updatePaintArray(le.start,le.end,de,l[z],P),L=!0}}}return L},Gn.prototype.defines=function(){var l=[];for(var f in this.binders){var d=this.binders[f];(d instanceof pn||d instanceof li)&&l.push.apply(l,d.uniformNames.map(function(T){return"#define HAS_UNIFORM_"+T}))}return l},Gn.prototype.getBinderAttributes=function(){var l=[];for(var f in this.binders){var d=this.binders[f];if(d instanceof Kn||d instanceof qn)for(var T=0;T<d.paintVertexAttributes.length;T++)l.push(d.paintVertexAttributes[T].name);else if(d instanceof ri)for(var P=0;P<Je.members.length;P++)l.push(Je.members[P].name)}return l},Gn.prototype.getBinderUniforms=function(){var l=[];for(var f in this.binders){var d=this.binders[f];if(d instanceof pn||d instanceof li||d instanceof qn)for(var T=0,P=d.uniformNames;T<P.length;T+=1)l.push(P[T])}return l},Gn.prototype.getPaintVertexBuffers=function(){return this._buffers},Gn.prototype.getUniforms=function(l,f){var d=[];for(var T in this.binders){var P=this.binders[T];if(P instanceof pn||P instanceof li||P instanceof qn)for(var L=0,z=P.uniformNames;L<z.length;L+=1){var Z=z[L];if(f[Z]){var ae=P.getBinding(l,f[Z],Z);d.push({name:Z,property:T,binding:ae})}}}return d},Gn.prototype.setUniforms=function(l,f,d,T){for(var P=0,L=f;P<L.length;P+=1){var z=L[P],Z=z.name,ae=z.property;this.binders[ae].setUniform(z.binding,T,d.get(ae),Z)}},Gn.prototype.updatePaintBuffers=function(l){for(var f in this._buffers=[],this.binders){var d=this.binders[f];if(l&&d instanceof ri){var T=l.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;T&&this._buffers.push(T)}else(d instanceof Kn||d instanceof qn)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}},Gn.prototype.upload=function(l){for(var f in this.binders){var d=this.binders[f];(d instanceof Kn||d instanceof qn||d instanceof ri)&&d.upload(l)}this.updatePaintBuffers()},Gn.prototype.destroy=function(){for(var l in this.binders){var f=this.binders[l];(f instanceof Kn||f instanceof qn||f instanceof ri)&&f.destroy()}};var zn=function(l,f,d){d===void 0&&(d=function(){return!0}),this.programConfigurations={};for(var T=0,P=l;T<P.length;T+=1){var L=P[T];this.programConfigurations[L.id]=new Gn(L,f,d)}this.needsUpload=!1,this._featureMap=new yt,this._bufferOffset=0};function Do(l,f){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(f+"-","").replace(/-/g,"_")]}function mo(l,f,d){var T={color:{source:Oc,composite:Vp},number:{source:lc,composite:Oc}},P=function(L){return{"line-pattern":{source:Is,composite:Is},"fill-pattern":{source:Is,composite:Is},"fill-extrusion-pattern":{source:Is,composite:Is}}[L]}(l);return P&&P[d]||T[f][d]}zn.prototype.populatePaintArrays=function(l,f,d,T,P,L){for(var z in this.programConfigurations)this.programConfigurations[z].populatePaintArrays(l,f,T,P,L);f.id!==void 0&&this._featureMap.add(f.id,d,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0},zn.prototype.updatePaintArrays=function(l,f,d,T){for(var P=0,L=d;P<L.length;P+=1){var z=L[P];this.needsUpload=this.programConfigurations[z.id].updatePaintArrays(l,this._featureMap,f,z,T)||this.needsUpload}},zn.prototype.get=function(l){return this.programConfigurations[l]},zn.prototype.upload=function(l){if(this.needsUpload){for(var f in this.programConfigurations)this.programConfigurations[f].upload(l);this.needsUpload=!1}},zn.prototype.destroy=function(){for(var l in this.programConfigurations)this.programConfigurations[l].destroy()},ir("ConstantBinder",pn),ir("CrossFadedConstantBinder",li),ir("SourceExpressionBinder",Kn),ir("CrossFadedCompositeBinder",ri),ir("CompositeExpressionBinder",qn),ir("ProgramConfiguration",Gn,{omit:["_buffers"]}),ir("ProgramConfigurationSet",zn);var Rs=Math.pow(2,14)-1,ns=-Rs-1;function ro(l){for(var f=8192/l.extent,d=l.loadGeometry(),T=0;T<d.length;T++)for(var P=d[T],L=0;L<P.length;L++){var z=P[L],Z=Math.round(z.x*f),ae=Math.round(z.y*f);z.x=E(Z,ns,Rs),z.y=E(ae,ns,Rs),(Z<z.x||Z>z.x+1||ae<z.y||ae>z.y+1)&&U("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return d}function To(l,f){return{type:l.type,id:l.id,properties:l.properties,geometry:f?ro(l):[]}}function Ls(l,f,d,T,P){l.emplaceBack(2*f+(T+1)/2,2*d+(P+1)/2)}var no=function(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(function(f){return f.id}),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new uf,this.indexArray=new wu,this.segments=new Fe,this.programConfigurations=new zn(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter(function(f){return f.isStateDependent()}).map(function(f){return f.id})};function ci(l,f){for(var d=0;d<l.length;d++)if(xl(f,l[d]))return!0;for(var T=0;T<f.length;T++)if(xl(l,f[T]))return!0;return!!Uf(l,f)}function io(l,f,d){return!!xl(l,f)||!!ou(f,l,d)}function bl(l,f){if(l.length===1)return on(f,l[0]);for(var d=0;d<f.length;d++)for(var T=f[d],P=0;P<T.length;P++)if(xl(l,T[P]))return!0;for(var L=0;L<l.length;L++)if(on(f,l[L]))return!0;for(var z=0;z<f.length;z++)if(Uf(l,f[z]))return!0;return!1}function Ys(l,f,d){if(l.length>1){if(Uf(l,f))return!0;for(var T=0;T<f.length;T++)if(ou(f[T],l,d))return!0}for(var P=0;P<l.length;P++)if(ou(l[P],f,d))return!0;return!1}function Uf(l,f){if(l.length===0||f.length===0)return!1;for(var d=0;d<l.length-1;d++)for(var T=l[d],P=l[d+1],L=0;L<f.length-1;L++)if(jf(T,P,f[L],f[L+1]))return!0;return!1}function jf(l,f,d,T){return re(l,d,T)!==re(f,d,T)&&re(l,f,d)!==re(l,f,T)}function ou(l,f,d){var T=d*d;if(f.length===1)return l.distSqr(f[0])<T;for(var P=1;P<f.length;P++)if(Mr(l,f[P-1],f[P])<T)return!0;return!1}function Mr(l,f,d){var T=f.distSqr(d);if(T===0)return l.distSqr(f);var P=((l.x-f.x)*(d.x-f.x)+(l.y-f.y)*(d.y-f.y))/T;return l.distSqr(P<0?f:P>1?d:d.sub(f)._mult(P)._add(f))}function on(l,f){for(var d,T,P,L=!1,z=0;z<l.length;z++)for(var Z=0,ae=(d=l[z]).length-1;Z<d.length;ae=Z++)(T=d[Z]).y>f.y!=(P=d[ae]).y>f.y&&f.x<(P.x-T.x)*(f.y-T.y)/(P.y-T.y)+T.x&&(L=!L);return L}function xl(l,f){for(var d=!1,T=0,P=l.length-1;T<l.length;P=T++){var L=l[T],z=l[P];L.y>f.y!=z.y>f.y&&f.x<(z.x-L.x)*(f.y-L.y)/(z.y-L.y)+L.x&&(d=!d)}return d}function Ic(l,f,d){var T=d[0],P=d[2];if(l.x<T.x&&f.x<T.x||l.x>P.x&&f.x>P.x||l.y<T.y&&f.y<T.y||l.y>P.y&&f.y>P.y)return!1;var L=re(l,f,d[0]);return L!==re(l,f,d[1])||L!==re(l,f,d[2])||L!==re(l,f,d[3])}function Xu(l,f,d){var T=f.paint.get(l).value;return T.kind==="constant"?T.value:d.programConfigurations.get(f.id).getMaxValue(l)}function xa(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function zl(l,f,d,T,P){if(!f[0]&&!f[1])return l;var L=u.convert(f)._mult(P);d==="viewport"&&L._rotate(-T);for(var z=[],Z=0;Z<l.length;Z++)z.push(l[Z].sub(L));return z}no.prototype.populate=function(l,f,d){var T=this.layers[0],P=[],L=null;T.type==="circle"&&(L=T.layout.get("circle-sort-key"));for(var z=0,Z=l;z<Z.length;z+=1){var ae=Z[z],le=ae.feature,de=ae.id,Ae=ae.index,Se=ae.sourceLayerIndex,ke=this.layers[0]._featureFilter.needGeometry,Ye=To(le,ke);if(this.layers[0]._featureFilter.filter(new Si(this.zoom),Ye,d)){var $e=L?L.evaluate(Ye,{},d):void 0,mt={id:de,properties:le.properties,type:le.type,sourceLayerIndex:Se,index:Ae,geometry:ke?Ye.geometry:ro(le),patterns:{},sortKey:$e};P.push(mt)}}L&&P.sort(function(Rr,bn){return Rr.sortKey-bn.sortKey});for(var nt=0,Et=P;nt<Et.length;nt+=1){var Bt=Et[nt],Wt=Bt.geometry,Zt=Bt.index,or=Bt.sourceLayerIndex,Ar=l[Zt].feature;this.addFeature(Bt,Wt,Zt,d),f.featureIndex.insert(Ar,Wt,Zt,or,this.index)}},no.prototype.update=function(l,f,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,d)},no.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},no.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},no.prototype.upload=function(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Re),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0},no.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},no.prototype.addFeature=function(l,f,d,T){for(var P=0,L=f;P<L.length;P+=1)for(var z=0,Z=L[P];z<Z.length;z+=1){var ae=Z[z],le=ae.x,de=ae.y;if(!(le<0||le>=8192||de<0||de>=8192)){var Ae=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,l.sortKey),Se=Ae.vertexLength;Ls(this.layoutVertexArray,le,de,-1,-1),Ls(this.layoutVertexArray,le,de,1,-1),Ls(this.layoutVertexArray,le,de,1,1),Ls(this.layoutVertexArray,le,de,-1,1),this.indexArray.emplaceBack(Se,Se+1,Se+2),this.indexArray.emplaceBack(Se,Se+3,Se+2),Ae.vertexLength+=4,Ae.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,d,{},T)},ir("CircleBucket",no,{omit:["layers"]});var su=new ts({"circle-sort-key":new sn(De.layout_circle["circle-sort-key"])}),y={paint:new ts({"circle-radius":new sn(De.paint_circle["circle-radius"]),"circle-color":new sn(De.paint_circle["circle-color"]),"circle-blur":new sn(De.paint_circle["circle-blur"]),"circle-opacity":new sn(De.paint_circle["circle-opacity"]),"circle-translate":new wn(De.paint_circle["circle-translate"]),"circle-translate-anchor":new wn(De.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new wn(De.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new wn(De.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new sn(De.paint_circle["circle-stroke-width"]),"circle-stroke-color":new sn(De.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new sn(De.paint_circle["circle-stroke-opacity"])}),layout:su},w=typeof Float32Array<"u"?Float32Array:Array;function C(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function M(l,f,d){var T=f[0],P=f[1],L=f[2],z=f[3],Z=f[4],ae=f[5],le=f[6],de=f[7],Ae=f[8],Se=f[9],ke=f[10],Ye=f[11],$e=f[12],mt=f[13],nt=f[14],Et=f[15],Bt=d[0],Wt=d[1],Zt=d[2],or=d[3];return l[0]=Bt*T+Wt*Z+Zt*Ae+or*$e,l[1]=Bt*P+Wt*ae+Zt*Se+or*mt,l[2]=Bt*L+Wt*le+Zt*ke+or*nt,l[3]=Bt*z+Wt*de+Zt*Ye+or*Et,l[4]=(Bt=d[4])*T+(Wt=d[5])*Z+(Zt=d[6])*Ae+(or=d[7])*$e,l[5]=Bt*P+Wt*ae+Zt*Se+or*mt,l[6]=Bt*L+Wt*le+Zt*ke+or*nt,l[7]=Bt*z+Wt*de+Zt*Ye+or*Et,l[8]=(Bt=d[8])*T+(Wt=d[9])*Z+(Zt=d[10])*Ae+(or=d[11])*$e,l[9]=Bt*P+Wt*ae+Zt*Se+or*mt,l[10]=Bt*L+Wt*le+Zt*ke+or*nt,l[11]=Bt*z+Wt*de+Zt*Ye+or*Et,l[12]=(Bt=d[12])*T+(Wt=d[13])*Z+(Zt=d[14])*Ae+(or=d[15])*$e,l[13]=Bt*P+Wt*ae+Zt*Se+or*mt,l[14]=Bt*L+Wt*le+Zt*ke+or*nt,l[15]=Bt*z+Wt*de+Zt*Ye+or*Et,l}Math.hypot||(Math.hypot=function(){for(var l=arguments,f=0,d=arguments.length;d--;)f+=l[d]*l[d];return Math.sqrt(f)});var N,G=M;function j(l,f,d){var T=f[0],P=f[1],L=f[2],z=f[3];return l[0]=d[0]*T+d[4]*P+d[8]*L+d[12]*z,l[1]=d[1]*T+d[5]*P+d[9]*L+d[13]*z,l[2]=d[2]*T+d[6]*P+d[10]*L+d[14]*z,l[3]=d[3]*T+d[7]*P+d[11]*L+d[15]*z,l}N=new w(3),w!=Float32Array&&(N[0]=0,N[1]=0,N[2]=0),function(){var l=new w(4);w!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0,l[3]=0)}();var Q=(function(){var l=new w(2);w!=Float32Array&&(l[0]=0,l[1]=0)}(),function(l){function f(d){l.call(this,d,y)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.createBucket=function(d){return new no(d)},f.prototype.queryRadius=function(d){var T=d;return Xu("circle-radius",this,T)+Xu("circle-stroke-width",this,T)+xa(this.paint.get("circle-translate"))},f.prototype.queryIntersectsFeature=function(d,T,P,L,z,Z,ae,le){for(var de=zl(d,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Z.angle,ae),Ae=this.paint.get("circle-radius").evaluate(T,P)+this.paint.get("circle-stroke-width").evaluate(T,P),Se=this.paint.get("circle-pitch-alignment")==="map",ke=Se?de:function(Ar,Rr){return Ar.map(function(bn){return ue(bn,Rr)})}(de,le),Ye=Se?Ae*ae:Ae,$e=0,mt=L;$e<mt.length;$e+=1)for(var nt=0,Et=mt[$e];nt<Et.length;nt+=1){var Bt=Et[nt],Wt=Se?Bt:ue(Bt,le),Zt=Ye,or=j([],[Bt.x,Bt.y,0,1],le);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Zt*=or[3]/Z.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Zt*=Z.cameraToCenterDistance/or[3]),io(ke,Wt,Zt))return!0}return!1},f}(il));function ue(l,f){var d=j([],[l.x,l.y,0,1],f);return new u(d[0]/d[3],d[1]/d[3])}var we=function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f}(no);function Pe(l,f,d,T){var P=f.width,L=f.height;if(T){if(T instanceof Uint8ClampedArray)T=new Uint8Array(T.buffer);else if(T.length!==P*L*d)throw new RangeError("mismatched image size")}else T=new Uint8Array(P*L*d);return l.width=P,l.height=L,l.data=T,l}function ft(l,f,d){var T=f.width,P=f.height;if(T!==l.width||P!==l.height){var L=Pe({},{width:T,height:P},d);xt(l,L,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,T),height:Math.min(l.height,P)},d),l.width=T,l.height=P,l.data=L.data}}function xt(l,f,d,T,P,L){if(P.width===0||P.height===0)return f;if(P.width>l.width||P.height>l.height||d.x>l.width-P.width||d.y>l.height-P.height)throw new RangeError("out of range source coordinates for image copy");if(P.width>f.width||P.height>f.height||T.x>f.width-P.width||T.y>f.height-P.height)throw new RangeError("out of range destination coordinates for image copy");for(var z=l.data,Z=f.data,ae=0;ae<P.height;ae++)for(var le=((d.y+ae)*l.width+d.x)*L,de=((T.y+ae)*f.width+T.x)*L,Ae=0;Ae<P.width*L;Ae++)Z[de+Ae]=z[le+Ae];return f}ir("HeatmapBucket",we,{omit:["layers"]});var Ft=function(l,f){Pe(this,l,1,f)};Ft.prototype.resize=function(l){ft(this,l,1)},Ft.prototype.clone=function(){return new Ft({width:this.width,height:this.height},new Uint8Array(this.data))},Ft.copy=function(l,f,d,T,P){xt(l,f,d,T,P,1)};var tr=function(l,f){Pe(this,l,4,f)};tr.prototype.resize=function(l){ft(this,l,4)},tr.prototype.replace=function(l,f){f?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l},tr.prototype.clone=function(){return new tr({width:this.width,height:this.height},new Uint8Array(this.data))},tr.copy=function(l,f,d,T,P){xt(l,f,d,T,P,4)},ir("AlphaImage",Ft),ir("RGBAImage",tr);var hr={paint:new ts({"heatmap-radius":new sn(De.paint_heatmap["heatmap-radius"]),"heatmap-weight":new sn(De.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new wn(De.paint_heatmap["heatmap-intensity"]),"heatmap-color":new nl(De.paint_heatmap["heatmap-color"]),"heatmap-opacity":new wn(De.paint_heatmap["heatmap-opacity"])})};function Vr(l){var f={},d=l.resolution||256,T=l.clips?l.clips.length:1,P=l.image||new tr({width:d,height:T}),L=function(Ye,$e,mt){f[l.evaluationKey]=mt;var nt=l.expression.evaluate(f);P.data[Ye+$e+0]=Math.floor(255*nt.r/nt.a),P.data[Ye+$e+1]=Math.floor(255*nt.g/nt.a),P.data[Ye+$e+2]=Math.floor(255*nt.b/nt.a),P.data[Ye+$e+3]=Math.floor(255*nt.a)};if(l.clips)for(var z=0,Z=0;z<T;++z,Z+=4*d)for(var ae=0,le=0;ae<d;ae++,le+=4){var de=ae/(d-1),Ae=l.clips[z];L(Z,le,Ae.start*(1-de)+Ae.end*de)}else for(var Se=0,ke=0;Se<d;Se++,ke+=4)L(0,ke,Se/(d-1));return P}var _n=function(l){function f(d){l.call(this,d,hr),this._updateColorRamp()}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.createBucket=function(d){return new we(d)},f.prototype._handleSpecialPaintPropertyUpdate=function(d){d==="heatmap-color"&&this._updateColorRamp()},f.prototype._updateColorRamp=function(){this.colorRamp=Vr({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},f.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},f.prototype.queryRadius=function(){return 0},f.prototype.queryIntersectsFeature=function(){return!1},f.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},f}(il),rr={paint:new ts({"hillshade-illumination-direction":new wn(De.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new wn(De.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new wn(De.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new wn(De.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new wn(De.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new wn(De.paint_hillshade["hillshade-accent-color"])})},Ir=function(l){function f(d){l.call(this,d,rr)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},f}(il),Ct=rs([{name:"a_pos",components:2,type:"Int16"}],4).members,An=Qr,Sn=Qr;function Qr(l,f,d){d=d||2;var T,P,L,z,Z,ae,le,de=f&&f.length,Ae=de?f[0]*d:l.length,Se=mn(l,0,Ae,d,!0),ke=[];if(!Se||Se.next===Se.prev)return ke;if(de&&(Se=function($e,mt,nt,Et){var Bt,Wt,Zt,or=[];for(Bt=0,Wt=mt.length;Bt<Wt;Bt++)(Zt=mn($e,mt[Bt]*Et,Bt<Wt-1?mt[Bt+1]*Et:$e.length,Et,!1))===Zt.next&&(Zt.steiner=!0),or.push(Rie(Zt));for(or.sort(go),Bt=0;Bt<or.length;Bt++)wi(or[Bt],nt),nt=fi(nt,nt.next);return nt}(l,f,Se,d)),l.length>80*d){T=L=l[0],P=z=l[1];for(var Ye=d;Ye<Ae;Ye+=d)(Z=l[Ye])<T&&(T=Z),(ae=l[Ye+1])<P&&(P=ae),Z>L&&(L=Z),ae>z&&(z=ae);le=(le=Math.max(L-T,z-P))!==0?1/le:0}return ma(Se,ke,d,T,P,le),ke}function mn(l,f,d,T,P){var L,z;if(P===LE(l,f,d,T)>0)for(L=f;L<d;L+=T)z=oD(L,l[L],l[L+1],z);else for(L=d-T;L>=f;L-=T)z=oD(L,l[L],l[L+1],z);return z&&gb(z,z.next)&&(ty(z),z=z.next),z}function fi(l,f){if(!l)return l;f||(f=l);var d,T=l;do if(d=!1,T.steiner||!gb(T,T.next)&&is(T.prev,T,T.next)!==0)T=T.next;else{if(ty(T),(T=f=T.prev)===T.next)break;d=!0}while(d||T!==f);return f}function ma(l,f,d,T,P,L,z){if(l){!z&&L&&function(de,Ae,Se,ke){var Ye=de;do Ye.z===null&&(Ye.z=IE(Ye.x,Ye.y,Ae,Se,ke)),Ye.prevZ=Ye.prev,Ye.nextZ=Ye.next,Ye=Ye.next;while(Ye!==de);Ye.prevZ.nextZ=null,Ye.prevZ=null,function($e){var mt,nt,Et,Bt,Wt,Zt,or,Ar,Rr=1;do{for(nt=$e,$e=null,Wt=null,Zt=0;nt;){for(Zt++,Et=nt,or=0,mt=0;mt<Rr&&(or++,Et=Et.nextZ);mt++);for(Ar=Rr;or>0||Ar>0&&Et;)or!==0&&(Ar===0||!Et||nt.z<=Et.z)?(Bt=nt,nt=nt.nextZ,or--):(Bt=Et,Et=Et.nextZ,Ar--),Wt?Wt.nextZ=Bt:$e=Bt,Bt.prevZ=Wt,Wt=Bt;nt=Et}Wt.nextZ=null,Rr*=2}while(Zt>1)}(Ye)}(l,T,P,L);for(var Z,ae,le=l;l.prev!==l.next;)if(Z=l.prev,ae=l.next,L?Ja(l,T,P,L):wa(l))f.push(Z.i/d),f.push(l.i/d),f.push(ae.i/d),ty(l),l=ae.next,le=ae.next;else if((l=ae)===le){z?z===1?ma(l=va(fi(l),f,d),f,d,T,P,L,2):z===2&&vo(l,f,d,T,P,L):ma(fi(l),f,d,T,P,L,1);break}}}function wa(l){var f=l.prev,d=l,T=l.next;if(is(f,d,T)>=0)return!1;for(var P=l.next.next;P!==l.prev;){if(jv(f.x,f.y,d.x,d.y,T.x,T.y,P.x,P.y)&&is(P.prev,P,P.next)>=0)return!1;P=P.next}return!0}function Ja(l,f,d,T){var P=l.prev,L=l,z=l.next;if(is(P,L,z)>=0)return!1;for(var Z=P.x>L.x?P.x>z.x?P.x:z.x:L.x>z.x?L.x:z.x,ae=P.y>L.y?P.y>z.y?P.y:z.y:L.y>z.y?L.y:z.y,le=IE(P.x<L.x?P.x<z.x?P.x:z.x:L.x<z.x?L.x:z.x,P.y<L.y?P.y<z.y?P.y:z.y:L.y<z.y?L.y:z.y,f,d,T),de=IE(Z,ae,f,d,T),Ae=l.prevZ,Se=l.nextZ;Ae&&Ae.z>=le&&Se&&Se.z<=de;){if(Ae!==l.prev&&Ae!==l.next&&jv(P.x,P.y,L.x,L.y,z.x,z.y,Ae.x,Ae.y)&&is(Ae.prev,Ae,Ae.next)>=0||(Ae=Ae.prevZ,Se!==l.prev&&Se!==l.next&&jv(P.x,P.y,L.x,L.y,z.x,z.y,Se.x,Se.y)&&is(Se.prev,Se,Se.next)>=0))return!1;Se=Se.nextZ}for(;Ae&&Ae.z>=le;){if(Ae!==l.prev&&Ae!==l.next&&jv(P.x,P.y,L.x,L.y,z.x,z.y,Ae.x,Ae.y)&&is(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.prevZ}for(;Se&&Se.z<=de;){if(Se!==l.prev&&Se!==l.next&&jv(P.x,P.y,L.x,L.y,z.x,z.y,Se.x,Se.y)&&is(Se.prev,Se,Se.next)>=0)return!1;Se=Se.nextZ}return!0}function va(l,f,d){var T=l;do{var P=T.prev,L=T.next.next;!gb(P,L)&&iD(P,T,T.next,L)&&ey(P,L)&&ey(L,P)&&(f.push(P.i/d),f.push(T.i/d),f.push(L.i/d),ty(T),ty(T.next),T=l=L),T=T.next}while(T!==l);return fi(T)}function vo(l,f,d,T,P,L){var z=l;do{for(var Z=z.next.next;Z!==z.prev;){if(z.i!==Z.i&&Lie(z,Z)){var ae=aD(z,Z);return z=fi(z,z.next),ae=fi(ae,ae.next),ma(z,f,d,T,P,L),void ma(ae,f,d,T,P,L)}Z=Z.next}z=z.next}while(z!==l)}function go(l,f){return l.x-f.x}function wi(l,f){if(f=function(T,P){var L,z=P,Z=T.x,ae=T.y,le=-1/0;do{if(ae<=z.y&&ae>=z.next.y&&z.next.y!==z.y){var de=z.x+(ae-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(de<=Z&&de>le){if(le=de,de===Z){if(ae===z.y)return z;if(ae===z.next.y)return z.next}L=z.x<z.next.x?z:z.next}}z=z.next}while(z!==P);if(!L)return null;if(Z===le)return L;var Ae,Se=L,ke=L.x,Ye=L.y,$e=1/0;z=L;do Z>=z.x&&z.x>=ke&&Z!==z.x&&jv(ae<Ye?Z:le,ae,ke,Ye,ae<Ye?le:Z,ae,z.x,z.y)&&(Ae=Math.abs(ae-z.y)/(Z-z.x),ey(z,T)&&(Ae<$e||Ae===$e&&(z.x>L.x||z.x===L.x&&Iie(L,z)))&&(L=z,$e=Ae)),z=z.next;while(z!==Se);return L}(l,f)){var d=aD(f,l);fi(f,f.next),fi(d,d.next)}}function Iie(l,f){return is(l.prev,l,f.prev)<0&&is(f.next,l,l.next)<0}function IE(l,f,d,T,P){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=32767*(l-d)*P)|l<<8))|l<<4))|l<<2))|l<<1))|(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=32767*(f-T)*P)|f<<8))|f<<4))|f<<2))|f<<1))<<1}function Rie(l){var f=l,d=l;do(f.x<d.x||f.x===d.x&&f.y<d.y)&&(d=f),f=f.next;while(f!==l);return d}function jv(l,f,d,T,P,L,z,Z){return(P-z)*(f-Z)-(l-z)*(L-Z)>=0&&(l-z)*(T-Z)-(d-z)*(f-Z)>=0&&(d-z)*(L-Z)-(P-z)*(T-Z)>=0}function Lie(l,f){return l.next.i!==f.i&&l.prev.i!==f.i&&!function(d,T){var P=d;do{if(P.i!==d.i&&P.next.i!==d.i&&P.i!==T.i&&P.next.i!==T.i&&iD(P,P.next,d,T))return!0;P=P.next}while(P!==d);return!1}(l,f)&&(ey(l,f)&&ey(f,l)&&function(d,T){var P=d,L=!1,z=(d.x+T.x)/2,Z=(d.y+T.y)/2;do P.y>Z!=P.next.y>Z&&P.next.y!==P.y&&z<(P.next.x-P.x)*(Z-P.y)/(P.next.y-P.y)+P.x&&(L=!L),P=P.next;while(P!==d);return L}(l,f)&&(is(l.prev,l,f.prev)||is(l,f.prev,f))||gb(l,f)&&is(l.prev,l,l.next)>0&&is(f.prev,f,f.next)>0)}function is(l,f,d){return(f.y-l.y)*(d.x-f.x)-(f.x-l.x)*(d.y-f.y)}function gb(l,f){return l.x===f.x&&l.y===f.y}function iD(l,f,d,T){var P=yb(is(l,f,d)),L=yb(is(l,f,T)),z=yb(is(d,T,l)),Z=yb(is(d,T,f));return P!==L&&z!==Z||!(P!==0||!Ab(l,d,f))||!(L!==0||!Ab(l,T,f))||!(z!==0||!Ab(d,l,T))||!(Z!==0||!Ab(d,f,T))}function Ab(l,f,d){return f.x<=Math.max(l.x,d.x)&&f.x>=Math.min(l.x,d.x)&&f.y<=Math.max(l.y,d.y)&&f.y>=Math.min(l.y,d.y)}function yb(l){return l>0?1:l<0?-1:0}function ey(l,f){return is(l.prev,l,l.next)<0?is(l,f,l.next)>=0&&is(l,l.prev,f)>=0:is(l,f,l.prev)<0||is(l,l.next,f)<0}function aD(l,f){var d=new RE(l.i,l.x,l.y),T=new RE(f.i,f.x,f.y),P=l.next,L=f.prev;return l.next=f,f.prev=l,d.next=P,P.prev=d,T.next=d,d.prev=T,L.next=T,T.prev=L,T}function oD(l,f,d,T){var P=new RE(l,f,d);return T?(P.next=T.next,P.prev=T,T.next.prev=P,T.next=P):(P.prev=P,P.next=P),P}function ty(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function RE(l,f,d){this.i=l,this.x=f,this.y=d,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function LE(l,f,d,T){for(var P=0,L=f,z=d-T;L<d;L+=T)P+=(l[z]-l[L])*(l[L+1]+l[z+1]),z=L;return P}function kie(l,f,d,T,P){(function L(z,Z,ae,le,de){for(;le>ae;){if(le-ae>600){var Ae=le-ae+1,Se=Z-ae+1,ke=Math.log(Ae),Ye=.5*Math.exp(2*ke/3),$e=.5*Math.sqrt(ke*Ye*(Ae-Ye)/Ae)*(Se-Ae/2<0?-1:1);L(z,Z,Math.max(ae,Math.floor(Z-Se*Ye/Ae+$e)),Math.min(le,Math.floor(Z+(Ae-Se)*Ye/Ae+$e)),de)}var mt=z[Z],nt=ae,Et=le;for(ry(z,ae,Z),de(z[le],mt)>0&&ry(z,ae,le);nt<Et;){for(ry(z,nt,Et),nt++,Et--;de(z[nt],mt)<0;)nt++;for(;de(z[Et],mt)>0;)Et--}de(z[ae],mt)===0?ry(z,ae,Et):ry(z,++Et,le),Et<=Z&&(ae=Et+1),Z<=Et&&(le=Et-1)}})(l,f,d||0,T||l.length-1,P||Bie)}function ry(l,f,d){var T=l[f];l[f]=l[d],l[d]=T}function Bie(l,f){return l<f?-1:l>f?1:0}function kE(l,f){var d=l.length;if(d<=1)return[l];for(var T,P,L=[],z=0;z<d;z++){var Z=ee(l[z]);Z!==0&&(l[z].area=Math.abs(Z),P===void 0&&(P=Z<0),P===Z<0?(T&&L.push(T),T=[l[z]]):T.push(l[z]))}if(T&&L.push(T),f>1)for(var ae=0;ae<L.length;ae++)L[ae].length<=f||(kie(L[ae],f,1,L[ae].length-1,Die),L[ae]=L[ae].slice(0,f));return L}function Die(l,f){return f.area-l.area}function BE(l,f,d){for(var T=d.patternDependencies,P=!1,L=0,z=f;L<z.length;L+=1){var Z=z[L].paint.get(l+"-pattern");Z.isConstant()||(P=!0);var ae=Z.constantOr(null);ae&&(P=!0,T[ae.to]=!0,T[ae.from]=!0)}return P}function DE(l,f,d,T,P){for(var L=P.patternDependencies,z=0,Z=f;z<Z.length;z+=1){var ae=Z[z],le=ae.paint.get(l+"-pattern").value;if(le.kind!=="constant"){var de=le.evaluate({zoom:T-1},d,{},P.availableImages),Ae=le.evaluate({zoom:T},d,{},P.availableImages),Se=le.evaluate({zoom:T+1},d,{},P.availableImages);Ae=Ae&&Ae.name?Ae.name:Ae,Se=Se&&Se.name?Se.name:Se,L[de=de&&de.name?de.name:de]=!0,L[Ae]=!0,L[Se]=!0,d.patterns[ae.id]={min:de,mid:Ae,max:Se}}}return d}Qr.deviation=function(l,f,d,T){var P=f&&f.length,L=Math.abs(LE(l,0,P?f[0]*d:l.length,d));if(P)for(var z=0,Z=f.length;z<Z;z++)L-=Math.abs(LE(l,f[z]*d,z<Z-1?f[z+1]*d:l.length,d));var ae=0;for(z=0;z<T.length;z+=3){var le=T[z]*d,de=T[z+1]*d,Ae=T[z+2]*d;ae+=Math.abs((l[le]-l[Ae])*(l[de+1]-l[le+1])-(l[le]-l[de])*(l[Ae+1]-l[le+1]))}return L===0&&ae===0?0:Math.abs((ae-L)/L)},Qr.flatten=function(l){for(var f=l[0][0].length,d={vertices:[],holes:[],dimensions:f},T=0,P=0;P<l.length;P++){for(var L=0;L<l[P].length;L++)for(var z=0;z<f;z++)d.vertices.push(l[P][L][z]);P>0&&d.holes.push(T+=l[P-1].length)}return d},An.default=Sn;var ff=function(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(function(f){return f.id}),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new uf,this.indexArray=new wu,this.indexArray2=new zf,this.programConfigurations=new zn(l.layers,l.zoom),this.segments=new Fe,this.segments2=new Fe,this.stateDependentLayerIds=this.layers.filter(function(f){return f.isStateDependent()}).map(function(f){return f.id})};ff.prototype.populate=function(l,f,d){this.hasPattern=BE("fill",this.layers,f);for(var T=this.layers[0].layout.get("fill-sort-key"),P=[],L=0,z=l;L<z.length;L+=1){var Z=z[L],ae=Z.feature,le=Z.id,de=Z.index,Ae=Z.sourceLayerIndex,Se=this.layers[0]._featureFilter.needGeometry,ke=To(ae,Se);if(this.layers[0]._featureFilter.filter(new Si(this.zoom),ke,d)){var Ye=T?T.evaluate(ke,{},d,f.availableImages):void 0,$e={id:le,properties:ae.properties,type:ae.type,sourceLayerIndex:Ae,index:de,geometry:Se?ke.geometry:ro(ae),patterns:{},sortKey:Ye};P.push($e)}}T&&P.sort(function(Ar,Rr){return Ar.sortKey-Rr.sortKey});for(var mt=0,nt=P;mt<nt.length;mt+=1){var Et=nt[mt],Bt=Et.geometry,Wt=Et.index,Zt=Et.sourceLayerIndex;if(this.hasPattern){var or=DE("fill",this.layers,Et,this.zoom,f);this.patternFeatures.push(or)}else this.addFeature(Et,Bt,Wt,d,{});f.featureIndex.insert(l[Wt].feature,Bt,Wt,Zt,this.index)}},ff.prototype.update=function(l,f,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,d)},ff.prototype.addFeatures=function(l,f,d){for(var T=0,P=this.patternFeatures;T<P.length;T+=1){var L=P[T];this.addFeature(L,L.geometry,L.index,f,d)}},ff.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ff.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ff.prototype.upload=function(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Ct),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0},ff.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ff.prototype.addFeature=function(l,f,d,T,P){for(var L=0,z=kE(f,500);L<z.length;L+=1){for(var Z=z[L],ae=0,le=0,de=Z;le<de.length;le+=1)ae+=de[le].length;for(var Ae=this.segments.prepareSegment(ae,this.layoutVertexArray,this.indexArray),Se=Ae.vertexLength,ke=[],Ye=[],$e=0,mt=Z;$e<mt.length;$e+=1){var nt=mt[$e];if(nt.length!==0){nt!==Z[0]&&Ye.push(ke.length/2);var Et=this.segments2.prepareSegment(nt.length,this.layoutVertexArray,this.indexArray2),Bt=Et.vertexLength;this.layoutVertexArray.emplaceBack(nt[0].x,nt[0].y),this.indexArray2.emplaceBack(Bt+nt.length-1,Bt),ke.push(nt[0].x),ke.push(nt[0].y);for(var Wt=1;Wt<nt.length;Wt++)this.layoutVertexArray.emplaceBack(nt[Wt].x,nt[Wt].y),this.indexArray2.emplaceBack(Bt+Wt-1,Bt+Wt),ke.push(nt[Wt].x),ke.push(nt[Wt].y);Et.vertexLength+=nt.length,Et.primitiveLength+=nt.length}}for(var Zt=An(ke,Ye),or=0;or<Zt.length;or+=3)this.indexArray.emplaceBack(Se+Zt[or],Se+Zt[or+1],Se+Zt[or+2]);Ae.vertexLength+=ae,Ae.primitiveLength+=Zt.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,d,P,T)},ir("FillBucket",ff,{omit:["layers","patternFeatures"]});var Fie=new ts({"fill-sort-key":new sn(De.layout_fill["fill-sort-key"])}),Nie={paint:new ts({"fill-antialias":new wn(De.paint_fill["fill-antialias"]),"fill-opacity":new sn(De.paint_fill["fill-opacity"]),"fill-color":new sn(De.paint_fill["fill-color"]),"fill-outline-color":new sn(De.paint_fill["fill-outline-color"]),"fill-translate":new wn(De.paint_fill["fill-translate"]),"fill-translate-anchor":new wn(De.paint_fill["fill-translate-anchor"]),"fill-pattern":new Up(De.paint_fill["fill-pattern"])}),layout:Fie},zie=function(l){function f(d){l.call(this,d,Nie)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.recalculate=function(d,T){l.prototype.recalculate.call(this,d,T);var P=this.paint._values["fill-outline-color"];P.value.kind==="constant"&&P.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},f.prototype.createBucket=function(d){return new ff(d)},f.prototype.queryRadius=function(){return xa(this.paint.get("fill-translate"))},f.prototype.queryIntersectsFeature=function(d,T,P,L,z,Z,ae){return bl(zl(d,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Z.angle,ae),L)},f.prototype.isTileClipped=function(){return!0},f}(il),Uie=rs([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,sD=Gv;function Gv(l,f,d,T,P){this.properties={},this.extent=d,this.type=0,this._pbf=l,this._geometry=-1,this._keys=T,this._values=P,l.readFields(jie,this,f)}function jie(l,f,d){l==1?f.id=d.readVarint():l==2?function(T,P){for(var L=T.readVarint()+T.pos;T.pos<L;){var z=P._keys[T.readVarint()],Z=P._values[T.readVarint()];P.properties[z]=Z}}(d,f):l==3?f.type=d.readVarint():l==4&&(f._geometry=d.pos)}function Gie(l){for(var f,d,T=0,P=0,L=l.length,z=L-1;P<L;z=P++)T+=((d=l[z]).x-(f=l[P]).x)*(f.y+d.y);return T}Gv.types=["Unknown","Point","LineString","Polygon"],Gv.prototype.loadGeometry=function(){var l=this._pbf;l.pos=this._geometry;for(var f,d=l.readVarint()+l.pos,T=1,P=0,L=0,z=0,Z=[];l.pos<d;){if(P<=0){var ae=l.readVarint();T=7&ae,P=ae>>3}if(P--,T===1||T===2)L+=l.readSVarint(),z+=l.readSVarint(),T===1&&(f&&Z.push(f),f=[]),f.push(new u(L,z));else{if(T!==7)throw new Error("unknown command "+T);f&&f.push(f[0].clone())}}return f&&Z.push(f),Z},Gv.prototype.bbox=function(){var l=this._pbf;l.pos=this._geometry;for(var f=l.readVarint()+l.pos,d=1,T=0,P=0,L=0,z=1/0,Z=-1/0,ae=1/0,le=-1/0;l.pos<f;){if(T<=0){var de=l.readVarint();d=7&de,T=de>>3}if(T--,d===1||d===2)(P+=l.readSVarint())<z&&(z=P),P>Z&&(Z=P),(L+=l.readSVarint())<ae&&(ae=L),L>le&&(le=L);else if(d!==7)throw new Error("unknown command "+d)}return[z,ae,Z,le]},Gv.prototype.toGeoJSON=function(l,f,d){var T,P,L=this.extent*Math.pow(2,d),z=this.extent*l,Z=this.extent*f,ae=this.loadGeometry(),le=Gv.types[this.type];function de(ke){for(var Ye=0;Ye<ke.length;Ye++){var $e=ke[Ye];ke[Ye]=[360*($e.x+z)/L-180,360/Math.PI*Math.atan(Math.exp((180-360*($e.y+Z)/L)*Math.PI/180))-90]}}switch(this.type){case 1:var Ae=[];for(T=0;T<ae.length;T++)Ae[T]=ae[T][0];de(ae=Ae);break;case 2:for(T=0;T<ae.length;T++)de(ae[T]);break;case 3:for(ae=function(ke){var Ye=ke.length;if(Ye<=1)return[ke];for(var $e,mt,nt=[],Et=0;Et<Ye;Et++){var Bt=Gie(ke[Et]);Bt!==0&&(mt===void 0&&(mt=Bt<0),mt===Bt<0?($e&&nt.push($e),$e=[ke[Et]]):$e.push(ke[Et]))}return $e&&nt.push($e),nt}(ae),T=0;T<ae.length;T++)for(P=0;P<ae[T].length;P++)de(ae[T][P])}ae.length===1?ae=ae[0]:le="Multi"+le;var Se={type:"Feature",geometry:{type:le,coordinates:ae},properties:this.properties};return"id"in this&&(Se.id=this.id),Se};var uD=lD;function lD(l,f){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(Vie,this,f),this.length=this._features.length}function Vie(l,f,d){l===15?f.version=d.readVarint():l===1?f.name=d.readString():l===5?f.extent=d.readVarint():l===2?f._features.push(d.pos):l===3?f._keys.push(d.readString()):l===4&&f._values.push(function(T){for(var P=null,L=T.readVarint()+T.pos;T.pos<L;){var z=T.readVarint()>>3;P=z===1?T.readString():z===2?T.readFloat():z===3?T.readDouble():z===4?T.readVarint64():z===5?T.readVarint():z===6?T.readSVarint():z===7?T.readBoolean():null}return P}(d))}function Hie(l,f,d){if(l===3){var T=new uD(d,d.readVarint()+d.pos);T.length&&(f[T.name]=T)}}lD.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var f=this._pbf.readVarint()+this._pbf.pos;return new sD(this._pbf,f,this.extent,this._keys,this._values)};var Vv={VectorTile:function(l,f){this.layers=l.readFields(Hie,{},f)},VectorTileFeature:sD,VectorTileLayer:uD},Wie=Vv.VectorTileFeature.types,FE=Math.pow(2,13);function ny(l,f,d,T,P,L,z,Z){l.emplaceBack(f,d,2*Math.floor(T*FE)+z,P*FE*2,L*FE*2,Math.round(Z))}var hf=function(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(function(f){return f.id}),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new sc,this.indexArray=new wu,this.programConfigurations=new zn(l.layers,l.zoom),this.segments=new Fe,this.stateDependentLayerIds=this.layers.filter(function(f){return f.isStateDependent()}).map(function(f){return f.id})};function qie(l,f){return l.x===f.x&&(l.x<0||l.x>8192)||l.y===f.y&&(l.y<0||l.y>8192)}hf.prototype.populate=function(l,f,d){this.features=[],this.hasPattern=BE("fill-extrusion",this.layers,f);for(var T=0,P=l;T<P.length;T+=1){var L=P[T],z=L.feature,Z=L.id,ae=L.index,le=L.sourceLayerIndex,de=this.layers[0]._featureFilter.needGeometry,Ae=To(z,de);if(this.layers[0]._featureFilter.filter(new Si(this.zoom),Ae,d)){var Se={id:Z,sourceLayerIndex:le,index:ae,geometry:de?Ae.geometry:ro(z),properties:z.properties,type:z.type,patterns:{}};this.hasPattern?this.features.push(DE("fill-extrusion",this.layers,Se,this.zoom,f)):this.addFeature(Se,Se.geometry,ae,d,{}),f.featureIndex.insert(z,Se.geometry,ae,le,this.index,!0)}}},hf.prototype.addFeatures=function(l,f,d){for(var T=0,P=this.features;T<P.length;T+=1){var L=P[T];this.addFeature(L,L.geometry,L.index,f,d)}},hf.prototype.update=function(l,f,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,d)},hf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},hf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},hf.prototype.upload=function(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Uie),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0},hf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},hf.prototype.addFeature=function(l,f,d,T,P){for(var L=0,z=kE(f,500);L<z.length;L+=1){for(var Z=z[L],ae=0,le=0,de=Z;le<de.length;le+=1)ae+=de[le].length;for(var Ae=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Se=0,ke=Z;Se<ke.length;Se+=1){var Ye=ke[Se];if(Ye.length!==0&&!((Mi=Ye).every(function(hi){return hi.x<0})||Mi.every(function(hi){return hi.x>8192})||Mi.every(function(hi){return hi.y<0})||Mi.every(function(hi){return hi.y>8192})))for(var $e=0,mt=0;mt<Ye.length;mt++){var nt=Ye[mt];if(mt>=1){var Et=Ye[mt-1];if(!qie(nt,Et)){Ae.vertexLength+4>Fe.MAX_VERTEX_ARRAY_LENGTH&&(Ae=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Bt=nt.sub(Et)._perp()._unit(),Wt=Et.dist(nt);$e+Wt>32768&&($e=0),ny(this.layoutVertexArray,nt.x,nt.y,Bt.x,Bt.y,0,0,$e),ny(this.layoutVertexArray,nt.x,nt.y,Bt.x,Bt.y,0,1,$e),ny(this.layoutVertexArray,Et.x,Et.y,Bt.x,Bt.y,0,0,$e+=Wt),ny(this.layoutVertexArray,Et.x,Et.y,Bt.x,Bt.y,0,1,$e);var Zt=Ae.vertexLength;this.indexArray.emplaceBack(Zt,Zt+2,Zt+1),this.indexArray.emplaceBack(Zt+1,Zt+2,Zt+3),Ae.vertexLength+=4,Ae.primitiveLength+=2}}}}if(Ae.vertexLength+ae>Fe.MAX_VERTEX_ARRAY_LENGTH&&(Ae=this.segments.prepareSegment(ae,this.layoutVertexArray,this.indexArray)),Wie[l.type]==="Polygon"){for(var or=[],Ar=[],Rr=Ae.vertexLength,bn=0,qr=Z;bn<qr.length;bn+=1){var Rn=qr[bn];if(Rn.length!==0){Rn!==Z[0]&&Ar.push(or.length/2);for(var Yr=0;Yr<Rn.length;Yr++){var _i=Rn[Yr];ny(this.layoutVertexArray,_i.x,_i.y,0,0,1,1,0),or.push(_i.x),or.push(_i.y)}}}for(var Xn=An(or,Ar),dn=0;dn<Xn.length;dn+=3)this.indexArray.emplaceBack(Rr+Xn[dn],Rr+Xn[dn+2],Rr+Xn[dn+1]);Ae.primitiveLength+=Xn.length/3,Ae.vertexLength+=ae}}var Mi;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,d,P,T)},ir("FillExtrusionBucket",hf,{omit:["layers","features"]});var Xie={paint:new ts({"fill-extrusion-opacity":new wn(De["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new sn(De["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new wn(De["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new wn(De["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Up(De["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new sn(De["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new sn(De["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new wn(De["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Yie=function(l){function f(d){l.call(this,d,Xie)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.createBucket=function(d){return new hf(d)},f.prototype.queryRadius=function(){return xa(this.paint.get("fill-extrusion-translate"))},f.prototype.is3D=function(){return!0},f.prototype.queryIntersectsFeature=function(d,T,P,L,z,Z,ae,le){var de=zl(d,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Z.angle,ae),Ae=this.paint.get("fill-extrusion-height").evaluate(T,P),Se=this.paint.get("fill-extrusion-base").evaluate(T,P),ke=function($e,mt,nt,Et){for(var Bt=[],Wt=0,Zt=$e;Wt<Zt.length;Wt+=1){var or=Zt[Wt],Ar=[or.x,or.y,0,1];j(Ar,Ar,mt),Bt.push(new u(Ar[0]/Ar[3],Ar[1]/Ar[3]))}return Bt}(de,le),Ye=function($e,mt,nt,Et){for(var Bt=[],Wt=[],Zt=Et[8]*mt,or=Et[9]*mt,Ar=Et[10]*mt,Rr=Et[11]*mt,bn=Et[8]*nt,qr=Et[9]*nt,Rn=Et[10]*nt,Yr=Et[11]*nt,_i=0,Xn=$e;_i<Xn.length;_i+=1){for(var dn=[],Mi=[],hi=0,Hi=Xn[_i];hi<Hi.length;hi+=1){var kn=Hi[hi],Ji=kn.x,oo=kn.y,Mo=Et[0]*Ji+Et[4]*oo+Et[12],So=Et[1]*Ji+Et[5]*oo+Et[13],so=Et[2]*Ji+Et[6]*oo+Et[14],Io=Et[3]*Ji+Et[7]*oo+Et[15],As=so+Ar,ys=Io+Rr,Eu=Mo+bn,Bs=So+qr,Cu=so+Rn,Fo=Io+Yr,Ds=new u((Mo+Zt)/ys,(So+or)/ys);Ds.z=As/ys,dn.push(Ds);var Fi=new u(Eu/Fo,Bs/Fo);Fi.z=Cu/Fo,Mi.push(Fi)}Bt.push(dn),Wt.push(Mi)}return[Bt,Wt]}(L,Se,Ae,le);return function($e,mt,nt){var Et=1/0;bl(nt,mt)&&(Et=cD(nt,mt[0]));for(var Bt=0;Bt<mt.length;Bt++)for(var Wt=mt[Bt],Zt=$e[Bt],or=0;or<Wt.length-1;or++){var Ar=Wt[or],Rr=[Ar,Wt[or+1],Zt[or+1],Zt[or],Ar];ci(nt,Rr)&&(Et=Math.min(Et,cD(nt,Rr)))}return Et!==1/0&&Et}(Ye[0],Ye[1],ke)},f}(il);function iy(l,f){return l.x*f.x+l.y*f.y}function cD(l,f){if(l.length===1){for(var d,T=0,P=f[T++];!d||P.equals(d);)if(!(d=f[T++]))return 1/0;for(;T<f.length;T++){var L=f[T],z=l[0],Z=d.sub(P),ae=L.sub(P),le=z.sub(P),de=iy(Z,Z),Ae=iy(Z,ae),Se=iy(ae,ae),ke=iy(le,Z),Ye=iy(le,ae),$e=de*Se-Ae*Ae,mt=(Se*ke-Ae*Ye)/$e,nt=(de*Ye-Ae*ke)/$e,Et=P.z*(1-mt-nt)+d.z*mt+L.z*nt;if(isFinite(Et))return Et}return 1/0}for(var Bt=1/0,Wt=0,Zt=f;Wt<Zt.length;Wt+=1)Bt=Math.min(Bt,Zt[Wt].z);return Bt}var Kie=rs([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Zie=rs([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,$ie=Vv.VectorTileFeature.types,Jie=Math.cos(Math.PI/180*37.5),fD=Math.pow(2,14)/.5,Yu=function(l){var f=this;this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(d){f.gradients[d.id]={}}),this.layoutVertexArray=new Va,this.layoutVertexArray2=new Oc,this.indexArray=new wu,this.programConfigurations=new zn(l.layers,l.zoom),this.segments=new Fe,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};Yu.prototype.populate=function(l,f,d){this.hasPattern=BE("line",this.layers,f);for(var T=this.layers[0].layout.get("line-sort-key"),P=[],L=0,z=l;L<z.length;L+=1){var Z=z[L],ae=Z.feature,le=Z.id,de=Z.index,Ae=Z.sourceLayerIndex,Se=this.layers[0]._featureFilter.needGeometry,ke=To(ae,Se);if(this.layers[0]._featureFilter.filter(new Si(this.zoom),ke,d)){var Ye=T?T.evaluate(ke,{},d):void 0,$e={id:le,properties:ae.properties,type:ae.type,sourceLayerIndex:Ae,index:de,geometry:Se?ke.geometry:ro(ae),patterns:{},sortKey:Ye};P.push($e)}}T&&P.sort(function(Ar,Rr){return Ar.sortKey-Rr.sortKey});for(var mt=0,nt=P;mt<nt.length;mt+=1){var Et=nt[mt],Bt=Et.geometry,Wt=Et.index,Zt=Et.sourceLayerIndex;if(this.hasPattern){var or=DE("line",this.layers,Et,this.zoom,f);this.patternFeatures.push(or)}else this.addFeature(Et,Bt,Wt,d,{});f.featureIndex.insert(l[Wt].feature,Bt,Wt,Zt,this.index)}},Yu.prototype.update=function(l,f,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,d)},Yu.prototype.addFeatures=function(l,f,d){for(var T=0,P=this.patternFeatures;T<P.length;T+=1){var L=P[T];this.addFeature(L,L.geometry,L.index,f,d)}},Yu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Yu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Yu.prototype.upload=function(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,Zie)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Kie),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0},Yu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Yu.prototype.lineFeatureClips=function(l){if(l.properties&&l.properties.hasOwnProperty("mapbox_clip_start")&&l.properties.hasOwnProperty("mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}},Yu.prototype.addFeature=function(l,f,d,T,P){var L=this.layers[0].layout,z=L.get("line-join").evaluate(l,{}),Z=L.get("line-cap"),ae=L.get("line-miter-limit"),le=L.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(var de=0,Ae=f;de<Ae.length;de+=1)this.addLine(Ae[de],l,z,Z,ae,le);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,d,P,T)},Yu.prototype.addLine=function(l,f,d,T,P,L){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var z=0;z<l.length-1;z++)this.totalDistance+=l[z].dist(l[z+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var Z=$ie[f.type]==="Polygon",ae=l.length;ae>=2&&l[ae-1].equals(l[ae-2]);)ae--;for(var le=0;le<ae-1&&l[le].equals(l[le+1]);)le++;if(!(ae<(Z?3:2))){d==="bevel"&&(P=1.05);var de,Ae=this.overscaling<=16?122880/(512*this.overscaling):0,Se=this.segments.prepareSegment(10*ae,this.layoutVertexArray,this.indexArray),ke=void 0,Ye=void 0,$e=void 0,mt=void 0;this.e1=this.e2=-1,Z&&(mt=l[le].sub(de=l[ae-2])._unit()._perp());for(var nt=le;nt<ae;nt++)if(!(Ye=nt===ae-1?Z?l[le+1]:void 0:l[nt+1])||!l[nt].equals(Ye)){mt&&($e=mt),de&&(ke=de),de=l[nt],mt=Ye?Ye.sub(de)._unit()._perp():$e;var Et=($e=$e||mt).add(mt);Et.x===0&&Et.y===0||Et._unit();var Bt=$e.x*mt.x+$e.y*mt.y,Wt=Et.x*mt.x+Et.y*mt.y,Zt=Wt!==0?1/Wt:1/0,or=2*Math.sqrt(2-2*Wt),Ar=Wt<Jie&&ke&&Ye,Rr=$e.x*mt.y-$e.y*mt.x>0;if(Ar&&nt>le){var bn=de.dist(ke);if(bn>2*Ae){var qr=de.sub(de.sub(ke)._mult(Ae/bn)._round());this.updateDistance(ke,qr),this.addCurrentVertex(qr,$e,0,0,Se),ke=qr}}var Rn=ke&&Ye,Yr=Rn?d:Z?"butt":T;if(Rn&&Yr==="round"&&(Zt<L?Yr="miter":Zt<=2&&(Yr="fakeround")),Yr==="miter"&&Zt>P&&(Yr="bevel"),Yr==="bevel"&&(Zt>2&&(Yr="flipbevel"),Zt<P&&(Yr="miter")),ke&&this.updateDistance(ke,de),Yr==="miter")Et._mult(Zt),this.addCurrentVertex(de,Et,0,0,Se);else if(Yr==="flipbevel"){if(Zt>100)Et=mt.mult(-1);else{var _i=Zt*$e.add(mt).mag()/$e.sub(mt).mag();Et._perp()._mult(_i*(Rr?-1:1))}this.addCurrentVertex(de,Et,0,0,Se),this.addCurrentVertex(de,Et.mult(-1),0,0,Se)}else if(Yr==="bevel"||Yr==="fakeround"){var Xn=-Math.sqrt(Zt*Zt-1),dn=Rr?Xn:0,Mi=Rr?0:Xn;if(ke&&this.addCurrentVertex(de,$e,dn,Mi,Se),Yr==="fakeround")for(var hi=Math.round(180*or/Math.PI/20),Hi=1;Hi<hi;Hi++){var kn=Hi/hi;if(kn!==.5){var Ji=kn-.5;kn+=kn*Ji*(kn-1)*((1.0904+Bt*(Bt*(3.55645-1.43519*Bt)-3.2452))*Ji*Ji+(.848013+Bt*(.215638*Bt-1.06021)))}var oo=mt.sub($e)._mult(kn)._add($e)._unit()._mult(Rr?-1:1);this.addHalfVertex(de,oo.x,oo.y,!1,Rr,0,Se)}Ye&&this.addCurrentVertex(de,mt,-dn,-Mi,Se)}else if(Yr==="butt")this.addCurrentVertex(de,Et,0,0,Se);else if(Yr==="square"){var Mo=ke?1:-1;this.addCurrentVertex(de,Et,Mo,Mo,Se)}else Yr==="round"&&(ke&&(this.addCurrentVertex(de,$e,0,0,Se),this.addCurrentVertex(de,$e,1,1,Se,!0)),Ye&&(this.addCurrentVertex(de,mt,-1,-1,Se,!0),this.addCurrentVertex(de,mt,0,0,Se)));if(Ar&&nt<ae-1){var So=de.dist(Ye);if(So>2*Ae){var so=de.add(Ye.sub(de)._mult(Ae/So)._round());this.updateDistance(de,so),this.addCurrentVertex(so,mt,0,0,Se),de=so}}}}},Yu.prototype.addCurrentVertex=function(l,f,d,T,P,L){L===void 0&&(L=!1);var z=f.y*T-f.x,Z=-f.y-f.x*T;this.addHalfVertex(l,f.x+f.y*d,f.y-f.x*d,L,!1,d,P),this.addHalfVertex(l,z,Z,L,!0,-T,P),this.distance>fD/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(l,f,d,T,P,L))},Yu.prototype.addHalfVertex=function(l,f,d,T,P,L,z){var Z=.5*(this.lineClips?this.scaledDistance*(fD-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l.x<<1)+(T?1:0),(l.y<<1)+(P?1:0),Math.round(63*f)+128,Math.round(63*d)+128,1+(L===0?0:L<0?-1:1)|(63&Z)<<2,Z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var ae=z.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ae),z.primitiveLength++),P?this.e2=ae:this.e1=ae},Yu.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Yu.prototype.updateDistance=function(l,f){this.distance+=l.dist(f),this.updateScaledDistance()},ir("LineBucket",Yu,{omit:["layers","patternFeatures"]});var Qie=new ts({"line-cap":new wn(De.layout_line["line-cap"]),"line-join":new sn(De.layout_line["line-join"]),"line-miter-limit":new wn(De.layout_line["line-miter-limit"]),"line-round-limit":new wn(De.layout_line["line-round-limit"]),"line-sort-key":new sn(De.layout_line["line-sort-key"])}),hD={paint:new ts({"line-opacity":new sn(De.paint_line["line-opacity"]),"line-color":new sn(De.paint_line["line-color"]),"line-translate":new wn(De.paint_line["line-translate"]),"line-translate-anchor":new wn(De.paint_line["line-translate-anchor"]),"line-width":new sn(De.paint_line["line-width"]),"line-gap-width":new sn(De.paint_line["line-gap-width"]),"line-offset":new sn(De.paint_line["line-offset"]),"line-blur":new sn(De.paint_line["line-blur"]),"line-dasharray":new Xs(De.paint_line["line-dasharray"]),"line-pattern":new Up(De.paint_line["line-pattern"]),"line-gradient":new nl(De.paint_line["line-gradient"])}),layout:Qie},pD=new(function(l){function f(){l.apply(this,arguments)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.possiblyEvaluate=function(d,T){return T=new Si(Math.floor(T.zoom),{now:T.now,fadeDuration:T.fadeDuration,zoomHistory:T.zoomHistory,transition:T.transition}),l.prototype.possiblyEvaluate.call(this,d,T)},f.prototype.evaluate=function(d,T,P,L){return T=D({},T,{zoom:Math.floor(T.zoom)}),l.prototype.evaluate.call(this,d,T,P,L)},f}(sn))(hD.paint.properties["line-width"].specification);pD.useIntegerZoom=!0;var eae=function(l){function f(d){l.call(this,d,hD),this.gradientVersion=0}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype._handleSpecialPaintPropertyUpdate=function(d){d==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ms,this.gradientVersion=(this.gradientVersion+1)%p)},f.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},f.prototype.recalculate=function(d,T){l.prototype.recalculate.call(this,d,T),this.paint._values["line-floorwidth"]=pD.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,d)},f.prototype.createBucket=function(d){return new Yu(d)},f.prototype.queryRadius=function(d){var T=d,P=dD(Xu("line-width",this,T),Xu("line-gap-width",this,T)),L=Xu("line-offset",this,T);return P/2+Math.abs(L)+xa(this.paint.get("line-translate"))},f.prototype.queryIntersectsFeature=function(d,T,P,L,z,Z,ae){var le=zl(d,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Z.angle,ae),de=ae/2*dD(this.paint.get("line-width").evaluate(T,P),this.paint.get("line-gap-width").evaluate(T,P)),Ae=this.paint.get("line-offset").evaluate(T,P);return Ae&&(L=function(Se,ke){for(var Ye=[],$e=new u(0,0),mt=0;mt<Se.length;mt++){for(var nt=Se[mt],Et=[],Bt=0;Bt<nt.length;Bt++){var Wt=nt[Bt],Zt=nt[Bt+1],or=Bt===0?$e:Wt.sub(nt[Bt-1])._unit()._perp(),Ar=Bt===nt.length-1?$e:Zt.sub(Wt)._unit()._perp(),Rr=or._add(Ar)._unit();Rr._mult(1/(Rr.x*Ar.x+Rr.y*Ar.y)),Et.push(Rr._mult(ke)._add(Wt))}Ye.push(Et)}return Ye}(L,Ae*ae)),function(Se,ke,Ye){for(var $e=0;$e<ke.length;$e++){var mt=ke[$e];if(Se.length>=3){for(var nt=0;nt<mt.length;nt++)if(xl(Se,mt[nt]))return!0}if(Ys(Se,mt,Ye))return!0}return!1}(le,L,de)},f.prototype.isTileClipped=function(){return!0},f}(il);function dD(l,f){return f>0?f+2*l:l}var tae=rs([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),rae=rs([{name:"a_projected_pos",components:3,type:"Float32"}],4),nae=(rs([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),rs([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),mD=(rs([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),rs([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),iae=rs([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function aae(l,f,d){return l.sections.forEach(function(T){T.text=function(P,L,z){var Z=L.layout.get("text-transform").evaluate(z,{});return Z==="uppercase"?P=P.toLocaleUpperCase():Z==="lowercase"&&(P=P.toLocaleLowerCase()),Wu.applyArabicShaping&&(P=Wu.applyArabicShaping(P)),P}(T.text,f,d)}),l}rs([{name:"triangle",components:3,type:"Uint16"}]),rs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),rs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),rs([{type:"Float32",name:"offsetX"}]),rs([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ay={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},vD=function(l,f,d,T,P){var L,z,Z=8*P-T-1,ae=(1<<Z)-1,le=ae>>1,de=-7,Ae=d?P-1:0,Se=d?-1:1,ke=l[f+Ae];for(Ae+=Se,L=ke&(1<<-de)-1,ke>>=-de,de+=Z;de>0;L=256*L+l[f+Ae],Ae+=Se,de-=8);for(z=L&(1<<-de)-1,L>>=-de,de+=T;de>0;z=256*z+l[f+Ae],Ae+=Se,de-=8);if(L===0)L=1-le;else{if(L===ae)return z?NaN:1/0*(ke?-1:1);z+=Math.pow(2,T),L-=le}return(ke?-1:1)*z*Math.pow(2,L-T)},gD=function(l,f,d,T,P,L){var z,Z,ae,le=8*L-P-1,de=(1<<le)-1,Ae=de>>1,Se=P===23?Math.pow(2,-24)-Math.pow(2,-77):0,ke=T?0:L-1,Ye=T?1:-1,$e=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(Z=isNaN(f)?1:0,z=de):(z=Math.floor(Math.log(f)/Math.LN2),f*(ae=Math.pow(2,-z))<1&&(z--,ae*=2),(f+=z+Ae>=1?Se/ae:Se*Math.pow(2,1-Ae))*ae>=2&&(z++,ae/=2),z+Ae>=de?(Z=0,z=de):z+Ae>=1?(Z=(f*ae-1)*Math.pow(2,P),z+=Ae):(Z=f*Math.pow(2,Ae-1)*Math.pow(2,P),z=0));P>=8;l[d+ke]=255&Z,ke+=Ye,Z/=256,P-=8);for(z=z<<P|Z,le+=P;le>0;l[d+ke]=255&z,ke+=Ye,z/=256,le-=8);l[d+ke-Ye]|=128*$e},_b=Ha;function Ha(l){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(l)?l:new Uint8Array(l||0),this.pos=0,this.type=0,this.length=this.buf.length}Ha.Varint=0,Ha.Fixed64=1,Ha.Bytes=2,Ha.Fixed32=5;var AD=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Uh(l){return l.type===Ha.Bytes?l.readVarint()+l.pos:l.pos+1}function Hv(l,f,d){return d?4294967296*f+(l>>>0):4294967296*(f>>>0)+(l>>>0)}function yD(l,f,d){var T=f<=16383?1:f<=2097151?2:f<=268435455?3:Math.floor(Math.log(f)/(7*Math.LN2));d.realloc(T);for(var P=d.pos-1;P>=l;P--)d.buf[P+T]=d.buf[P]}function oae(l,f){for(var d=0;d<l.length;d++)f.writeVarint(l[d])}function sae(l,f){for(var d=0;d<l.length;d++)f.writeSVarint(l[d])}function uae(l,f){for(var d=0;d<l.length;d++)f.writeFloat(l[d])}function lae(l,f){for(var d=0;d<l.length;d++)f.writeDouble(l[d])}function cae(l,f){for(var d=0;d<l.length;d++)f.writeBoolean(l[d])}function fae(l,f){for(var d=0;d<l.length;d++)f.writeFixed32(l[d])}function hae(l,f){for(var d=0;d<l.length;d++)f.writeSFixed32(l[d])}function pae(l,f){for(var d=0;d<l.length;d++)f.writeFixed64(l[d])}function dae(l,f){for(var d=0;d<l.length;d++)f.writeSFixed64(l[d])}function bb(l,f){return(l[f]|l[f+1]<<8|l[f+2]<<16)+16777216*l[f+3]}function Wv(l,f,d){l[d]=f,l[d+1]=f>>>8,l[d+2]=f>>>16,l[d+3]=f>>>24}function _D(l,f){return(l[f]|l[f+1]<<8|l[f+2]<<16)+(l[f+3]<<24)}function mae(l,f,d){l===1&&d.readMessage(vae,f)}function vae(l,f,d){if(l===3){var T=d.readMessage(gae,{}),P=T.width,L=T.height,z=T.left,Z=T.top,ae=T.advance;f.push({id:T.id,bitmap:new Ft({width:P+6,height:L+6},T.bitmap),metrics:{width:P,height:L,left:z,top:Z,advance:ae}})}}function gae(l,f,d){l===1?f.id=d.readVarint():l===2?f.bitmap=d.readBytes():l===3?f.width=d.readVarint():l===4?f.height=d.readVarint():l===5?f.left=d.readSVarint():l===6?f.top=d.readSVarint():l===7&&(f.advance=d.readVarint())}function bD(l){for(var f=0,d=0,T=0,P=l;T<P.length;T+=1){var L=P[T];f+=L.w*L.h,d=Math.max(d,L.w)}l.sort(function($e,mt){return mt.h-$e.h});for(var z=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(f/.95)),d),h:1/0}],Z=0,ae=0,le=0,de=l;le<de.length;le+=1)for(var Ae=de[le],Se=z.length-1;Se>=0;Se--){var ke=z[Se];if(!(Ae.w>ke.w||Ae.h>ke.h)){if(Ae.x=ke.x,Ae.y=ke.y,ae=Math.max(ae,Ae.y+Ae.h),Z=Math.max(Z,Ae.x+Ae.w),Ae.w===ke.w&&Ae.h===ke.h){var Ye=z.pop();Se<z.length&&(z[Se]=Ye)}else Ae.h===ke.h?(ke.x+=Ae.w,ke.w-=Ae.w):Ae.w===ke.w?(ke.y+=Ae.h,ke.h-=Ae.h):(z.push({x:ke.x+Ae.w,y:ke.y,w:ke.w-Ae.w,h:Ae.h}),ke.y+=Ae.h,ke.h-=Ae.h);break}}return{w:Z,h:ae,fill:f/(Z*ae)||0}}Ha.prototype={destroy:function(){this.buf=null},readFields:function(l,f,d){for(d=d||this.length;this.pos<d;){var T=this.readVarint(),P=T>>3,L=this.pos;this.type=7&T,l(P,f,this),this.pos===L&&this.skip(T)}return f},readMessage:function(l,f){return this.readFields(l,f,this.readVarint()+this.pos)},readFixed32:function(){var l=bb(this.buf,this.pos);return this.pos+=4,l},readSFixed32:function(){var l=_D(this.buf,this.pos);return this.pos+=4,l},readFixed64:function(){var l=bb(this.buf,this.pos)+4294967296*bb(this.buf,this.pos+4);return this.pos+=8,l},readSFixed64:function(){var l=bb(this.buf,this.pos)+4294967296*_D(this.buf,this.pos+4);return this.pos+=8,l},readFloat:function(){var l=vD(this.buf,this.pos,!0,23,4);return this.pos+=4,l},readDouble:function(){var l=vD(this.buf,this.pos,!0,52,8);return this.pos+=8,l},readVarint:function(l){var f,d,T=this.buf;return f=127&(d=T[this.pos++]),d<128?f:(f|=(127&(d=T[this.pos++]))<<7,d<128?f:(f|=(127&(d=T[this.pos++]))<<14,d<128?f:(f|=(127&(d=T[this.pos++]))<<21,d<128?f:function(P,L,z){var Z,ae,le=z.buf;if(Z=(112&(ae=le[z.pos++]))>>4,ae<128||(Z|=(127&(ae=le[z.pos++]))<<3,ae<128)||(Z|=(127&(ae=le[z.pos++]))<<10,ae<128)||(Z|=(127&(ae=le[z.pos++]))<<17,ae<128)||(Z|=(127&(ae=le[z.pos++]))<<24,ae<128)||(Z|=(1&(ae=le[z.pos++]))<<31,ae<128))return Hv(P,Z,L);throw new Error("Expected varint not more than 10 bytes")}(f|=(15&(d=T[this.pos]))<<28,l,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var l=this.readVarint();return l%2==1?(l+1)/-2:l/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var l=this.readVarint()+this.pos,f=this.pos;return this.pos=l,l-f>=12&&AD?function(d,T,P){return AD.decode(d.subarray(T,P))}(this.buf,f,l):function(d,T,P){for(var L="",z=T;z<P;){var Z,ae,le,de=d[z],Ae=null,Se=de>239?4:de>223?3:de>191?2:1;if(z+Se>P)break;Se===1?de<128&&(Ae=de):Se===2?(192&(Z=d[z+1]))==128&&(Ae=(31&de)<<6|63&Z)<=127&&(Ae=null):Se===3?(ae=d[z+2],(192&(Z=d[z+1]))==128&&(192&ae)==128&&((Ae=(15&de)<<12|(63&Z)<<6|63&ae)<=2047||Ae>=55296&&Ae<=57343)&&(Ae=null)):Se===4&&(ae=d[z+2],le=d[z+3],(192&(Z=d[z+1]))==128&&(192&ae)==128&&(192&le)==128&&((Ae=(15&de)<<18|(63&Z)<<12|(63&ae)<<6|63&le)<=65535||Ae>=1114112)&&(Ae=null)),Ae===null?(Ae=65533,Se=1):Ae>65535&&(Ae-=65536,L+=String.fromCharCode(Ae>>>10&1023|55296),Ae=56320|1023&Ae),L+=String.fromCharCode(Ae),z+=Se}return L}(this.buf,f,l)},readBytes:function(){var l=this.readVarint()+this.pos,f=this.buf.subarray(this.pos,l);return this.pos=l,f},readPackedVarint:function(l,f){if(this.type!==Ha.Bytes)return l.push(this.readVarint(f));var d=Uh(this);for(l=l||[];this.pos<d;)l.push(this.readVarint(f));return l},readPackedSVarint:function(l){if(this.type!==Ha.Bytes)return l.push(this.readSVarint());var f=Uh(this);for(l=l||[];this.pos<f;)l.push(this.readSVarint());return l},readPackedBoolean:function(l){if(this.type!==Ha.Bytes)return l.push(this.readBoolean());var f=Uh(this);for(l=l||[];this.pos<f;)l.push(this.readBoolean());return l},readPackedFloat:function(l){if(this.type!==Ha.Bytes)return l.push(this.readFloat());var f=Uh(this);for(l=l||[];this.pos<f;)l.push(this.readFloat());return l},readPackedDouble:function(l){if(this.type!==Ha.Bytes)return l.push(this.readDouble());var f=Uh(this);for(l=l||[];this.pos<f;)l.push(this.readDouble());return l},readPackedFixed32:function(l){if(this.type!==Ha.Bytes)return l.push(this.readFixed32());var f=Uh(this);for(l=l||[];this.pos<f;)l.push(this.readFixed32());return l},readPackedSFixed32:function(l){if(this.type!==Ha.Bytes)return l.push(this.readSFixed32());var f=Uh(this);for(l=l||[];this.pos<f;)l.push(this.readSFixed32());return l},readPackedFixed64:function(l){if(this.type!==Ha.Bytes)return l.push(this.readFixed64());var f=Uh(this);for(l=l||[];this.pos<f;)l.push(this.readFixed64());return l},readPackedSFixed64:function(l){if(this.type!==Ha.Bytes)return l.push(this.readSFixed64());var f=Uh(this);for(l=l||[];this.pos<f;)l.push(this.readSFixed64());return l},skip:function(l){var f=7&l;if(f===Ha.Varint)for(;this.buf[this.pos++]>127;);else if(f===Ha.Bytes)this.pos=this.readVarint()+this.pos;else if(f===Ha.Fixed32)this.pos+=4;else{if(f!==Ha.Fixed64)throw new Error("Unimplemented type: "+f);this.pos+=8}},writeTag:function(l,f){this.writeVarint(l<<3|f)},realloc:function(l){for(var f=this.length||16;f<this.pos+l;)f*=2;if(f!==this.length){var d=new Uint8Array(f);d.set(this.buf),this.buf=d,this.length=f}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(l){this.realloc(4),Wv(this.buf,l,this.pos),this.pos+=4},writeSFixed32:function(l){this.realloc(4),Wv(this.buf,l,this.pos),this.pos+=4},writeFixed64:function(l){this.realloc(8),Wv(this.buf,-1&l,this.pos),Wv(this.buf,Math.floor(l*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(l){this.realloc(8),Wv(this.buf,-1&l,this.pos),Wv(this.buf,Math.floor(l*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(l){(l=+l||0)>268435455||l<0?function(f,d){var T,P;if(f>=0?(T=f%4294967296|0,P=f/4294967296|0):(P=~(-f/4294967296),4294967295^(T=~(-f%4294967296))?T=T+1|0:(T=0,P=P+1|0)),f>=18446744073709552e3||f<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),function(L,z,Z){Z.buf[Z.pos++]=127&L|128,L>>>=7,Z.buf[Z.pos++]=127&L|128,L>>>=7,Z.buf[Z.pos++]=127&L|128,L>>>=7,Z.buf[Z.pos++]=127&L|128,Z.buf[Z.pos]=127&(L>>>=7)}(T,0,d),function(L,z){var Z=(7&L)<<4;z.buf[z.pos++]|=Z|((L>>>=3)?128:0),L&&(z.buf[z.pos++]=127&L|((L>>>=7)?128:0),L&&(z.buf[z.pos++]=127&L|((L>>>=7)?128:0),L&&(z.buf[z.pos++]=127&L|((L>>>=7)?128:0),L&&(z.buf[z.pos++]=127&L|((L>>>=7)?128:0),L&&(z.buf[z.pos++]=127&L)))))}(P,d)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))},writeSVarint:function(l){this.writeVarint(l<0?2*-l-1:2*l)},writeBoolean:function(l){this.writeVarint(Boolean(l))},writeString:function(l){l=String(l),this.realloc(4*l.length),this.pos++;var f=this.pos;this.pos=function(T,P,L){for(var z,Z,ae=0;ae<P.length;ae++){if((z=P.charCodeAt(ae))>55295&&z<57344){if(!Z){z>56319||ae+1===P.length?(T[L++]=239,T[L++]=191,T[L++]=189):Z=z;continue}if(z<56320){T[L++]=239,T[L++]=191,T[L++]=189,Z=z;continue}z=Z-55296<<10|z-56320|65536,Z=null}else Z&&(T[L++]=239,T[L++]=191,T[L++]=189,Z=null);z<128?T[L++]=z:(z<2048?T[L++]=z>>6|192:(z<65536?T[L++]=z>>12|224:(T[L++]=z>>18|240,T[L++]=z>>12&63|128),T[L++]=z>>6&63|128),T[L++]=63&z|128)}return L}(this.buf,l,this.pos);var d=this.pos-f;d>=128&&yD(f,d,this),this.pos=f-1,this.writeVarint(d),this.pos+=d},writeFloat:function(l){this.realloc(4),gD(this.buf,l,this.pos,!0,23,4),this.pos+=4},writeDouble:function(l){this.realloc(8),gD(this.buf,l,this.pos,!0,52,8),this.pos+=8},writeBytes:function(l){var f=l.length;this.writeVarint(f),this.realloc(f);for(var d=0;d<f;d++)this.buf[this.pos++]=l[d]},writeRawMessage:function(l,f){this.pos++;var d=this.pos;l(f,this);var T=this.pos-d;T>=128&&yD(d,T,this),this.pos=d-1,this.writeVarint(T),this.pos+=T},writeMessage:function(l,f,d){this.writeTag(l,Ha.Bytes),this.writeRawMessage(f,d)},writePackedVarint:function(l,f){f.length&&this.writeMessage(l,oae,f)},writePackedSVarint:function(l,f){f.length&&this.writeMessage(l,sae,f)},writePackedBoolean:function(l,f){f.length&&this.writeMessage(l,cae,f)},writePackedFloat:function(l,f){f.length&&this.writeMessage(l,uae,f)},writePackedDouble:function(l,f){f.length&&this.writeMessage(l,lae,f)},writePackedFixed32:function(l,f){f.length&&this.writeMessage(l,fae,f)},writePackedSFixed32:function(l,f){f.length&&this.writeMessage(l,hae,f)},writePackedFixed64:function(l,f){f.length&&this.writeMessage(l,pae,f)},writePackedSFixed64:function(l,f){f.length&&this.writeMessage(l,dae,f)},writeBytesField:function(l,f){this.writeTag(l,Ha.Bytes),this.writeBytes(f)},writeFixed32Field:function(l,f){this.writeTag(l,Ha.Fixed32),this.writeFixed32(f)},writeSFixed32Field:function(l,f){this.writeTag(l,Ha.Fixed32),this.writeSFixed32(f)},writeFixed64Field:function(l,f){this.writeTag(l,Ha.Fixed64),this.writeFixed64(f)},writeSFixed64Field:function(l,f){this.writeTag(l,Ha.Fixed64),this.writeSFixed64(f)},writeVarintField:function(l,f){this.writeTag(l,Ha.Varint),this.writeVarint(f)},writeSVarintField:function(l,f){this.writeTag(l,Ha.Varint),this.writeSVarint(f)},writeStringField:function(l,f){this.writeTag(l,Ha.Bytes),this.writeString(f)},writeFloatField:function(l,f){this.writeTag(l,Ha.Fixed32),this.writeFloat(f)},writeDoubleField:function(l,f){this.writeTag(l,Ha.Fixed64),this.writeDouble(f)},writeBooleanField:function(l,f){this.writeVarintField(l,Boolean(f))}};var xb=function(l,f){var d=f.pixelRatio,T=f.version,P=f.stretchX,L=f.stretchY,z=f.content;this.paddedRect=l,this.pixelRatio=d,this.stretchX=P,this.stretchY=L,this.content=z,this.version=T},oy={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};oy.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},oy.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},oy.tlbr.get=function(){return this.tl.concat(this.br)},oy.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(xb.prototype,oy);var sy=function(l,f){var d={},T={};this.haveRenderCallbacks=[];var P=[];this.addImages(l,d,P),this.addImages(f,T,P);var L=bD(P),z=new tr({width:L.w||1,height:L.h||1});for(var Z in l){var ae=l[Z],le=d[Z].paddedRect;tr.copy(ae.data,z,{x:0,y:0},{x:le.x+1,y:le.y+1},ae.data)}for(var de in f){var Ae=f[de],Se=T[de].paddedRect,ke=Se.x+1,Ye=Se.y+1,$e=Ae.data.width,mt=Ae.data.height;tr.copy(Ae.data,z,{x:0,y:0},{x:ke,y:Ye},Ae.data),tr.copy(Ae.data,z,{x:0,y:mt-1},{x:ke,y:Ye-1},{width:$e,height:1}),tr.copy(Ae.data,z,{x:0,y:0},{x:ke,y:Ye+mt},{width:$e,height:1}),tr.copy(Ae.data,z,{x:$e-1,y:0},{x:ke-1,y:Ye},{width:1,height:mt}),tr.copy(Ae.data,z,{x:0,y:0},{x:ke+$e,y:Ye},{width:1,height:mt})}this.image=z,this.iconPositions=d,this.patternPositions=T};sy.prototype.addImages=function(l,f,d){for(var T in l){var P=l[T],L={x:0,y:0,w:P.data.width+2,h:P.data.height+2};d.push(L),f[T]=new xb(L,P),P.hasRenderCallback&&this.haveRenderCallbacks.push(T)}},sy.prototype.patchUpdatedImages=function(l,f){for(var d in l.dispatchRenderCallbacks(this.haveRenderCallbacks),l.updatedImages)this.patchUpdatedImage(this.iconPositions[d],l.getImage(d),f),this.patchUpdatedImage(this.patternPositions[d],l.getImage(d),f)},sy.prototype.patchUpdatedImage=function(l,f,d){if(l&&f&&l.version!==f.version){l.version=f.version;var T=l.tl;d.update(f.data,void 0,{x:T[0],y:T[1]})}},ir("ImagePosition",xb),ir("ImageAtlas",sy);var Ul={horizontal:1,vertical:2,horizontalOnly:3},qv=function(){this.scale=1,this.fontStack="",this.imageName=null};qv.forText=function(l,f){var d=new qv;return d.scale=l||1,d.fontStack=f,d},qv.forImage=function(l){var f=new qv;return f.imageName=l,f};var Su=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function wb(l,f,d,T,P,L,z,Z,ae,le,de,Ae,Se,ke,Ye,$e){var mt,nt=Su.fromFeature(l,P);Ae===Ul.vertical&&nt.verticalizePunctuation();var Et=Wu.processBidirectionalText,Bt=Wu.processStyledBidirectionalText;if(Et&&nt.sections.length===1){mt=[];for(var Wt=0,Zt=Et(nt.toString(),NE(nt,le,L,f,T,ke,Ye));Wt<Zt.length;Wt+=1){var or=Zt[Wt],Ar=new Su;Ar.text=or,Ar.sections=nt.sections;for(var Rr=0;Rr<or.length;Rr++)Ar.sectionIndex.push(0);mt.push(Ar)}}else if(Bt){mt=[];for(var bn=0,qr=Bt(nt.text,nt.sectionIndex,NE(nt,le,L,f,T,ke,Ye));bn<qr.length;bn+=1){var Rn=qr[bn],Yr=new Su;Yr.text=Rn[0],Yr.sectionIndex=Rn[1],Yr.sections=nt.sections,mt.push(Yr)}}else mt=function(dn,Mi){for(var hi=[],Hi=dn.text,kn=0,Ji=0,oo=Mi;Ji<oo.length;Ji+=1){var Mo=oo[Ji];hi.push(dn.substring(kn,Mo)),kn=Mo}return kn<Hi.length&&hi.push(dn.substring(kn,Hi.length)),hi}(nt,NE(nt,le,L,f,T,ke,Ye));var _i=[],Xn={positionedLines:_i,text:nt.toString(),top:de[1],bottom:de[1],left:de[0],right:de[0],writingMode:Ae,iconsInText:!1,verticalizable:!1};return function(dn,Mi,hi,Hi,kn,Ji,oo,Mo,So,so,Io,As){for(var ys=0,Eu=-17,Bs=0,Cu=0,Fo=Mo==="right"?1:Mo==="left"?0:.5,Ds=0,Fi=0,Ia=kn;Fi<Ia.length;Fi+=1){var ga=Ia[Fi];ga.trim();var qi=ga.getMaxScale(),Ku=24*(qi-1),uu={positionedGlyphs:[],lineOffset:0};dn.positionedLines[Ds]=uu;var Qa=uu.positionedGlyphs,Yo=0;if(ga.length()){for(var lu=0;lu<ga.length();lu++){var Qi=ga.getSection(lu),Gf=ga.getSectionIndex(lu),jl=ga.getCharCode(lu),Vf=0,No=null,Hf=null,Rc=null,eg=24,om=!(So===Ul.horizontal||!Io&&!Dl(jl)||Io&&(Tb[jl]||(Hh=jl,gr.Arabic(Hh)||gr["Arabic Supplement"](Hh)||gr["Arabic Extended-A"](Hh)||gr["Arabic Presentation Forms-A"](Hh)||gr["Arabic Presentation Forms-B"](Hh))));if(Qi.imageName){var tg=Hi[Qi.imageName];if(!tg)continue;Rc=Qi.imageName,dn.iconsInText=dn.iconsInText||!0,Hf=tg.paddedRect;var Vh=tg.displaySize;Qi.scale=24*Qi.scale/As,Vf=Ku+(24-Vh[1]*Qi.scale),eg=(No={width:Vh[0],height:Vh[1],left:1,top:-3,advance:om?Vh[1]:Vh[0]}).advance;var rg=om?Vh[0]*Qi.scale-24*qi:Vh[1]*Qi.scale-24*qi;rg>0&&rg>Yo&&(Yo=rg)}else{var Lb=hi[Qi.fontStack],ng=Lb&&Lb[jl];if(ng&&ng.rect)Hf=ng.rect,No=ng.metrics;else{var cy=Mi[Qi.fontStack],kb=cy&&cy[jl];if(!kb)continue;No=kb.metrics}Vf=24*(qi-Qi.scale)}om?(dn.verticalizable=!0,Qa.push({glyph:jl,imageName:Rc,x:ys,y:Eu+Vf,vertical:om,scale:Qi.scale,fontStack:Qi.fontStack,sectionIndex:Gf,metrics:No,rect:Hf}),ys+=eg*Qi.scale+so):(Qa.push({glyph:jl,imageName:Rc,x:ys,y:Eu+Vf,vertical:om,scale:Qi.scale,fontStack:Qi.fontStack,sectionIndex:Gf,metrics:No,rect:Hf}),ys+=No.advance*Qi.scale+so)}Qa.length!==0&&(Bs=Math.max(ys-so,Bs),yae(Qa,0,Qa.length-1,Fo,Yo)),ys=0;var Bb=Ji*qi+Yo;uu.lineOffset=Math.max(Yo,Ku),Eu+=Bb,Cu=Math.max(Bb,Cu),++Ds}else Eu+=Ji,++Ds}var Hh,fy=Eu- -17,ig=zE(oo),Wp=ig.horizontalAlign,ag=ig.verticalAlign;(function(Db,Fb,hy,py,Nb,dy,my,vy,zb){var og,Ub=(Fb-hy)*Nb;og=dy!==my?-vy*py- -17:(-py*zb+.5)*my;for(var sg=0,gy=Db;sg<gy.length;sg+=1)for(var sm=0,Ay=gy[sg].positionedGlyphs;sm<Ay.length;sm+=1){var ug=Ay[sm];ug.x+=Ub,ug.y+=og}})(dn.positionedLines,Fo,Wp,ag,Bs,Cu,Ji,fy,kn.length),dn.top+=-ag*fy,dn.bottom=dn.top+fy,dn.left+=-Wp*Bs,dn.right=dn.left+Bs}(Xn,f,d,T,mt,z,Z,ae,Ae,le,Se,$e),!function(dn){for(var Mi=0,hi=dn;Mi<hi.length;Mi+=1)if(hi[Mi].positionedGlyphs.length!==0)return!1;return!0}(_i)&&Xn}Su.fromFeature=function(l,f){for(var d=new Su,T=0;T<l.sections.length;T++){var P=l.sections[T];P.image?d.addImageSection(P):d.addTextSection(P,f)}return d},Su.prototype.length=function(){return this.text.length},Su.prototype.getSection=function(l){return this.sections[this.sectionIndex[l]]},Su.prototype.getSectionIndex=function(l){return this.sectionIndex[l]},Su.prototype.getCharCode=function(l){return this.text.charCodeAt(l)},Su.prototype.verticalizePunctuation=function(){this.text=function(l){for(var f="",d=0;d<l.length;d++){var T=l.charCodeAt(d+1)||null,P=l.charCodeAt(d-1)||null;f+=T&&Fl(T)&&!ay[l[d+1]]||P&&Fl(P)&&!ay[l[d-1]]||!ay[l[d]]?l[d]:ay[l[d]]}return f}(this.text)},Su.prototype.trim=function(){for(var l=0,f=0;f<this.text.length&&Tb[this.text.charCodeAt(f)];f++)l++;for(var d=this.text.length,T=this.text.length-1;T>=0&&T>=l&&Tb[this.text.charCodeAt(T)];T--)d--;this.text=this.text.substring(l,d),this.sectionIndex=this.sectionIndex.slice(l,d)},Su.prototype.substring=function(l,f){var d=new Su;return d.text=this.text.substring(l,f),d.sectionIndex=this.sectionIndex.slice(l,f),d.sections=this.sections,d},Su.prototype.toString=function(){return this.text},Su.prototype.getMaxScale=function(){var l=this;return this.sectionIndex.reduce(function(f,d){return Math.max(f,l.sections[d].scale)},0)},Su.prototype.addTextSection=function(l,f){this.text+=l.text,this.sections.push(qv.forText(l.scale,l.fontStack||f));for(var d=this.sections.length-1,T=0;T<l.text.length;++T)this.sectionIndex.push(d)},Su.prototype.addImageSection=function(l){var f=l.image?l.image.name:"";if(f.length!==0){var d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(qv.forImage(f)),this.sectionIndex.push(this.sections.length-1)):U("Reached maximum number of images 6401")}else U("Can't add FormattedSection with an empty image.")},Su.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Tb={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},wl={};function xD(l,f,d,T,P,L){if(f.imageName){var z=T[f.imageName];return z?z.displaySize[0]*f.scale*24/L+P:0}var Z=d[f.fontStack],ae=Z&&Z[l];return ae?ae.metrics.advance*f.scale+P:0}function wD(l,f,d,T){var P=Math.pow(l-f,2);return T?l<f?P/2:2*P:P+Math.abs(d)*d}function Aae(l,f,d){var T=0;return l===10&&(T-=1e4),d&&(T+=150),l!==40&&l!==65288||(T+=50),f!==41&&f!==65289||(T+=50),T}function TD(l,f,d,T,P,L){for(var z=null,Z=wD(f,d,P,L),ae=0,le=T;ae<le.length;ae+=1){var de=le[ae],Ae=wD(f-de.x,d,P,L)+de.badness;Ae<=Z&&(z=de,Z=Ae)}return{index:l,x:f,priorBreak:z,badness:Z}}function NE(l,f,d,T,P,L,z){if(L!=="point")return[];if(!l)return[];for(var Z,ae=[],le=function(mt,nt,Et,Bt,Wt,Zt){for(var or=0,Ar=0;Ar<mt.length();Ar++){var Rr=mt.getSection(Ar);or+=xD(mt.getCharCode(Ar),Rr,Bt,Wt,nt,Zt)}return or/Math.max(1,Math.ceil(or/Et))}(l,f,d,T,P,z),de=l.text.indexOf("\u200B")>=0,Ae=0,Se=0;Se<l.length();Se++){var ke=l.getSection(Se),Ye=l.getCharCode(Se);if(Tb[Ye]||(Ae+=xD(Ye,ke,T,P,f,z)),Se<l.length()-1){var $e=!((Z=Ye)<11904||!(gr["Bopomofo Extended"](Z)||gr.Bopomofo(Z)||gr["CJK Compatibility Forms"](Z)||gr["CJK Compatibility Ideographs"](Z)||gr["CJK Compatibility"](Z)||gr["CJK Radicals Supplement"](Z)||gr["CJK Strokes"](Z)||gr["CJK Symbols and Punctuation"](Z)||gr["CJK Unified Ideographs Extension A"](Z)||gr["CJK Unified Ideographs"](Z)||gr["Enclosed CJK Letters and Months"](Z)||gr["Halfwidth and Fullwidth Forms"](Z)||gr.Hiragana(Z)||gr["Ideographic Description Characters"](Z)||gr["Kangxi Radicals"](Z)||gr["Katakana Phonetic Extensions"](Z)||gr.Katakana(Z)||gr["Vertical Forms"](Z)||gr["Yi Radicals"](Z)||gr["Yi Syllables"](Z)));(wl[Ye]||$e||ke.imageName)&&ae.push(TD(Se+1,Ae,le,ae,Aae(Ye,l.getCharCode(Se+1),$e&&de),!1))}}return function mt(nt){return nt?mt(nt.priorBreak).concat(nt.index):[]}(TD(l.length(),Ae,le,ae,0,!0))}function zE(l){var f=.5,d=.5;switch(l){case"right":case"top-right":case"bottom-right":f=1;break;case"left":case"top-left":case"bottom-left":f=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:f,verticalAlign:d}}function yae(l,f,d,T,P){if(T||P)for(var L=l[d],z=(l[d].x+L.metrics.advance*L.scale)*T,Z=f;Z<=d;Z++)l[Z].x-=z,l[Z].y+=P}function SD(l,f,d,T,P,L){var z,Z=l.image;if(Z.content){var ae=Z.content,le=Z.pixelRatio||1;z=[ae[0]/le,ae[1]/le,Z.displaySize[0]-ae[2]/le,Z.displaySize[1]-ae[3]/le]}var de,Ae,Se,ke,Ye=f.left*L,$e=f.right*L;d==="width"||d==="both"?(ke=P[0]+Ye-T[3],Ae=P[0]+$e+T[1]):Ae=(ke=P[0]+(Ye+$e-Z.displaySize[0])/2)+Z.displaySize[0];var mt=f.top*L,nt=f.bottom*L;return d==="height"||d==="both"?(de=P[1]+mt-T[0],Se=P[1]+nt+T[2]):Se=(de=P[1]+(mt+nt-Z.displaySize[1])/2)+Z.displaySize[1],{image:Z,top:de,right:Ae,bottom:Se,left:ke,collisionPadding:z}}wl[10]=!0,wl[32]=!0,wl[38]=!0,wl[40]=!0,wl[41]=!0,wl[43]=!0,wl[45]=!0,wl[47]=!0,wl[173]=!0,wl[183]=!0,wl[8203]=!0,wl[8208]=!0,wl[8211]=!0,wl[8231]=!0;var Xv=function(l){function f(d,T,P,L){l.call(this,d,T),this.angle=P,L!==void 0&&(this.segment=L)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.clone=function(){return new f(this.x,this.y,this.angle,this.segment)},f}(u);function UE(l,f){var d=f.expression;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new Si(l+1))};if(d.kind==="source")return{kind:"source"};for(var T=d.zoomStops,P=d.interpolationType,L=0;L<T.length&&T[L]<=l;)L++;for(var z=L=Math.max(0,L-1);z<T.length&&T[z]<l+1;)z++;z=Math.min(T.length-1,z);var Z=T[L],ae=T[z];return d.kind==="composite"?{kind:"composite",minZoom:Z,maxZoom:ae,interpolationType:P}:{kind:"camera",minZoom:Z,maxZoom:ae,minSize:d.evaluate(new Si(Z)),maxSize:d.evaluate(new Si(ae)),interpolationType:P}}function ED(l,f,d){var T=f.uSize,P=d.lowerSize;return l.kind==="source"?P/128:l.kind==="composite"?$i(P/128,d.upperSize/128,f.uSizeT):T}function CD(l,f){var d=0,T=0;if(l.kind==="constant")T=l.layoutSize;else if(l.kind!=="source"){var P=l.interpolationType,L=P?E(be.interpolationFactor(P,f,l.minZoom,l.maxZoom),0,1):0;l.kind==="camera"?T=$i(l.minSize,l.maxSize,L):d=L}return{uSizeT:d,uSize:T}}ir("Anchor",Xv);var _ae=Object.freeze({__proto__:null,getSizeData:UE,evaluateSizeForFeature:ED,evaluateSizeForZoom:CD,SIZE_PACK_FACTOR:128});function PD(l,f,d,T,P){if(f.segment===void 0)return!0;for(var L=f,z=f.segment+1,Z=0;Z>-d/2;){if(--z<0)return!1;Z-=l[z].dist(L),L=l[z]}Z+=l[z].dist(l[z+1]),z++;for(var ae=[],le=0;Z<d/2;){var de=l[z],Ae=l[z+1];if(!Ae)return!1;var Se=l[z-1].angleTo(de)-de.angleTo(Ae);for(Se=Math.abs((Se+3*Math.PI)%(2*Math.PI)-Math.PI),ae.push({distance:Z,angleDelta:Se}),le+=Se;Z-ae[0].distance>T;)le-=ae.shift().angleDelta;if(le>P)return!1;z++,Z+=de.dist(Ae)}return!0}function OD(l){for(var f=0,d=0;d<l.length-1;d++)f+=l[d].dist(l[d+1]);return f}function MD(l,f,d){return l?.6*f*d:0}function ID(l,f){return Math.max(l?l.right-l.left:0,f?f.right-f.left:0)}function bae(l,f,d,T,P,L){for(var z=MD(d,P,L),Z=ID(d,T)*L,ae=0,le=OD(l)/2,de=0;de<l.length-1;de++){var Ae=l[de],Se=l[de+1],ke=Ae.dist(Se);if(ae+ke>le){var Ye=(le-ae)/ke,$e=$i(Ae.x,Se.x,Ye),mt=$i(Ae.y,Se.y,Ye),nt=new Xv($e,mt,Se.angleTo(Ae),de);return nt._round(),!z||PD(l,nt,Z,z,f)?nt:void 0}ae+=ke}}function xae(l,f,d,T,P,L,z,Z,ae){var le=MD(T,L,z),de=ID(T,P),Ae=de*z,Se=l[0].x===0||l[0].x===ae||l[0].y===0||l[0].y===ae;return f-Ae<f/4&&(f=Ae+f/4),function ke(Ye,$e,mt,nt,Et,Bt,Wt,Zt,or){for(var Ar=Bt/2,Rr=OD(Ye),bn=0,qr=$e-mt,Rn=[],Yr=0;Yr<Ye.length-1;Yr++){for(var _i=Ye[Yr],Xn=Ye[Yr+1],dn=_i.dist(Xn),Mi=Xn.angleTo(_i);qr+mt<bn+dn;){var hi=((qr+=mt)-bn)/dn,Hi=$i(_i.x,Xn.x,hi),kn=$i(_i.y,Xn.y,hi);if(Hi>=0&&Hi<or&&kn>=0&&kn<or&&qr-Ar>=0&&qr+Ar<=Rr){var Ji=new Xv(Hi,kn,Mi,Yr);Ji._round(),nt&&!PD(Ye,Ji,Bt,nt,Et)||Rn.push(Ji)}}bn+=dn}return Zt||Rn.length||Wt||(Rn=ke(Ye,bn/2,mt,nt,Et,Bt,Wt,!0,or)),Rn}(l,Se?f/2*Z%f:(de/2+2*L)*z*Z%f,f,le,d,Ae,Se,!1,ae)}function RD(l,f,d,T,P){for(var L=[],z=0;z<l.length;z++)for(var Z=l[z],ae=void 0,le=0;le<Z.length-1;le++){var de=Z[le],Ae=Z[le+1];de.x<f&&Ae.x<f||(de.x<f?de=new u(f,de.y+(f-de.x)/(Ae.x-de.x)*(Ae.y-de.y))._round():Ae.x<f&&(Ae=new u(f,de.y+(f-de.x)/(Ae.x-de.x)*(Ae.y-de.y))._round()),de.y<d&&Ae.y<d||(de.y<d?de=new u(de.x+(d-de.y)/(Ae.y-de.y)*(Ae.x-de.x),d)._round():Ae.y<d&&(Ae=new u(de.x+(d-de.y)/(Ae.y-de.y)*(Ae.x-de.x),d)._round()),de.x>=T&&Ae.x>=T||(de.x>=T?de=new u(T,de.y+(T-de.x)/(Ae.x-de.x)*(Ae.y-de.y))._round():Ae.x>=T&&(Ae=new u(T,de.y+(T-de.x)/(Ae.x-de.x)*(Ae.y-de.y))._round()),de.y>=P&&Ae.y>=P||(de.y>=P?de=new u(de.x+(P-de.y)/(Ae.y-de.y)*(Ae.x-de.x),P)._round():Ae.y>=P&&(Ae=new u(de.x+(P-de.y)/(Ae.y-de.y)*(Ae.x-de.x),P)._round()),ae&&de.equals(ae[ae.length-1])||L.push(ae=[de]),ae.push(Ae)))))}return L}function LD(l,f,d,T){var P=[],L=l.image,z=L.pixelRatio,Z=L.paddedRect.w-2,ae=L.paddedRect.h-2,le=l.right-l.left,de=l.bottom-l.top,Ae=L.stretchX||[[0,Z]],Se=L.stretchY||[[0,ae]],ke=function(Hi,kn){return Hi+kn[1]-kn[0]},Ye=Ae.reduce(ke,0),$e=Se.reduce(ke,0),mt=Z-Ye,nt=ae-$e,Et=0,Bt=Ye,Wt=0,Zt=$e,or=0,Ar=mt,Rr=0,bn=nt;if(L.content&&T){var qr=L.content;Et=Sb(Ae,0,qr[0]),Wt=Sb(Se,0,qr[1]),Bt=Sb(Ae,qr[0],qr[2]),Zt=Sb(Se,qr[1],qr[3]),or=qr[0]-Et,Rr=qr[1]-Wt,Ar=qr[2]-qr[0]-Bt,bn=qr[3]-qr[1]-Zt}var Rn=function(Hi,kn,Ji,oo){var Mo=Eb(Hi.stretch-Et,Bt,le,l.left),So=Cb(Hi.fixed-or,Ar,Hi.stretch,Ye),so=Eb(kn.stretch-Wt,Zt,de,l.top),Io=Cb(kn.fixed-Rr,bn,kn.stretch,$e),As=Eb(Ji.stretch-Et,Bt,le,l.left),ys=Cb(Ji.fixed-or,Ar,Ji.stretch,Ye),Eu=Eb(oo.stretch-Wt,Zt,de,l.top),Bs=Cb(oo.fixed-Rr,bn,oo.stretch,$e),Cu=new u(Mo,so),Fo=new u(As,so),Ds=new u(As,Eu),Fi=new u(Mo,Eu),Ia=new u(So/z,Io/z),ga=new u(ys/z,Bs/z),qi=f*Math.PI/180;if(qi){var Ku=Math.sin(qi),uu=Math.cos(qi),Qa=[uu,-Ku,Ku,uu];Cu._matMult(Qa),Fo._matMult(Qa),Fi._matMult(Qa),Ds._matMult(Qa)}var Yo=Hi.stretch+Hi.fixed,lu=kn.stretch+kn.fixed;return{tl:Cu,tr:Fo,bl:Fi,br:Ds,tex:{x:L.paddedRect.x+1+Yo,y:L.paddedRect.y+1+lu,w:Ji.stretch+Ji.fixed-Yo,h:oo.stretch+oo.fixed-lu},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ia,pixelOffsetBR:ga,minFontScaleX:Ar/z/le,minFontScaleY:bn/z/de,isSDF:d}};if(T&&(L.stretchX||L.stretchY))for(var Yr=kD(Ae,mt,Ye),_i=kD(Se,nt,$e),Xn=0;Xn<Yr.length-1;Xn++)for(var dn=Yr[Xn],Mi=Yr[Xn+1],hi=0;hi<_i.length-1;hi++)P.push(Rn(dn,_i[hi],Mi,_i[hi+1]));else P.push(Rn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Z+1},{fixed:0,stretch:ae+1}));return P}function Sb(l,f,d){for(var T=0,P=0,L=l;P<L.length;P+=1){var z=L[P];T+=Math.max(f,Math.min(d,z[1]))-Math.max(f,Math.min(d,z[0]))}return T}function kD(l,f,d){for(var T=[{fixed:-1,stretch:0}],P=0,L=l;P<L.length;P+=1){var z=L[P],Z=z[0],ae=z[1],le=T[T.length-1];T.push({fixed:Z-le.stretch,stretch:le.stretch}),T.push({fixed:Z-le.stretch,stretch:le.stretch+(ae-Z)})}return T.push({fixed:f+1,stretch:d}),T}function Eb(l,f,d,T){return l/f*d+T}function Cb(l,f,d,T){return l-f*d/T}var Pb=function(l,f,d,T,P,L,z,Z,ae,le){if(this.boxStartIndex=l.length,ae){var de=L.top,Ae=L.bottom,Se=L.collisionPadding;Se&&(de-=Se[1],Ae+=Se[3]);var ke=Ae-de;ke>0&&(ke=Math.max(10,ke),this.circleDiameter=ke)}else{var Ye=L.top*z-Z,$e=L.bottom*z+Z,mt=L.left*z-Z,nt=L.right*z+Z,Et=L.collisionPadding;if(Et&&(mt-=Et[0]*z,Ye-=Et[1]*z,nt+=Et[2]*z,$e+=Et[3]*z),le){var Bt=new u(mt,Ye),Wt=new u(nt,Ye),Zt=new u(mt,$e),or=new u(nt,$e),Ar=le*Math.PI/180;Bt._rotate(Ar),Wt._rotate(Ar),Zt._rotate(Ar),or._rotate(Ar),mt=Math.min(Bt.x,Wt.x,Zt.x,or.x),nt=Math.max(Bt.x,Wt.x,Zt.x,or.x),Ye=Math.min(Bt.y,Wt.y,Zt.y,or.y),$e=Math.max(Bt.y,Wt.y,Zt.y,or.y)}l.emplaceBack(f.x,f.y,mt,Ye,nt,$e,d,T,P)}this.boxEndIndex=l.length},Yv=function(l,f){if(l===void 0&&(l=[]),f===void 0&&(f=wae),this.data=l,this.length=this.data.length,this.compare=f,this.length>0)for(var d=(this.length>>1)-1;d>=0;d--)this._down(d)};function wae(l,f){return l<f?-1:l>f?1:0}function Tae(l,f,d){f===void 0&&(f=1),d===void 0&&(d=!1);for(var T=1/0,P=1/0,L=-1/0,z=-1/0,Z=l[0],ae=0;ae<Z.length;ae++){var le=Z[ae];(!ae||le.x<T)&&(T=le.x),(!ae||le.y<P)&&(P=le.y),(!ae||le.x>L)&&(L=le.x),(!ae||le.y>z)&&(z=le.y)}var de=Math.min(L-T,z-P),Ae=de/2,Se=new Yv([],Sae);if(de===0)return new u(T,P);for(var ke=T;ke<L;ke+=de)for(var Ye=P;Ye<z;Ye+=de)Se.push(new Kv(ke+Ae,Ye+Ae,Ae,l));for(var $e=function(Et){for(var Bt=0,Wt=0,Zt=0,or=Et[0],Ar=0,Rr=or.length,bn=Rr-1;Ar<Rr;bn=Ar++){var qr=or[Ar],Rn=or[bn],Yr=qr.x*Rn.y-Rn.x*qr.y;Wt+=(qr.x+Rn.x)*Yr,Zt+=(qr.y+Rn.y)*Yr,Bt+=3*Yr}return new Kv(Wt/Bt,Zt/Bt,0,Et)}(l),mt=Se.length;Se.length;){var nt=Se.pop();(nt.d>$e.d||!$e.d)&&($e=nt,d&&console.log("found best %d after %d probes",Math.round(1e4*nt.d)/1e4,mt)),nt.max-$e.d<=f||(Se.push(new Kv(nt.p.x-(Ae=nt.h/2),nt.p.y-Ae,Ae,l)),Se.push(new Kv(nt.p.x+Ae,nt.p.y-Ae,Ae,l)),Se.push(new Kv(nt.p.x-Ae,nt.p.y+Ae,Ae,l)),Se.push(new Kv(nt.p.x+Ae,nt.p.y+Ae,Ae,l)),mt+=4)}return d&&(console.log("num probes: "+mt),console.log("best distance: "+$e.d)),$e.p}function Sae(l,f){return f.max-l.max}function Kv(l,f,d,T){this.p=new u(l,f),this.h=d,this.d=function(P,L){for(var z=!1,Z=1/0,ae=0;ae<L.length;ae++)for(var le=L[ae],de=0,Ae=le.length,Se=Ae-1;de<Ae;Se=de++){var ke=le[de],Ye=le[Se];ke.y>P.y!=Ye.y>P.y&&P.x<(Ye.x-ke.x)*(P.y-ke.y)/(Ye.y-ke.y)+ke.x&&(z=!z),Z=Math.min(Z,Mr(P,ke,Ye))}return(z?1:-1)*Math.sqrt(Z)}(this.p,T),this.max=this.d+this.h*Math.SQRT2}Yv.prototype.push=function(l){this.data.push(l),this.length++,this._up(this.length-1)},Yv.prototype.pop=function(){if(this.length!==0){var l=this.data[0],f=this.data.pop();return this.length--,this.length>0&&(this.data[0]=f,this._down(0)),l}},Yv.prototype.peek=function(){return this.data[0]},Yv.prototype._up=function(l){for(var f=this.data,d=this.compare,T=f[l];l>0;){var P=l-1>>1,L=f[P];if(d(T,L)>=0)break;f[l]=L,l=P}f[l]=T},Yv.prototype._down=function(l){for(var f=this.data,d=this.compare,T=this.length>>1,P=f[l];l<T;){var L=1+(l<<1),z=f[L],Z=L+1;if(Z<this.length&&d(f[Z],z)<0&&(L=Z,z=f[Z]),d(z,P)>=0)break;f[l]=z,l=L}f[l]=P};var jE=Number.POSITIVE_INFINITY;function BD(l,f){return f[1]!==jE?function(d,T,P){var L=0,z=0;switch(T=Math.abs(T),P=Math.abs(P),d){case"top-right":case"top-left":case"top":z=P-7;break;case"bottom-right":case"bottom-left":case"bottom":z=7-P}switch(d){case"top-right":case"bottom-right":case"right":L=-T;break;case"top-left":case"bottom-left":case"left":L=T}return[L,z]}(l,f[0],f[1]):function(d,T){var P=0,L=0;T<0&&(T=0);var z=T/Math.sqrt(2);switch(d){case"top-right":case"top-left":L=z-7;break;case"bottom-right":case"bottom-left":L=7-z;break;case"bottom":L=7-T;break;case"top":L=T-7}switch(d){case"top-right":case"bottom-right":P=-z;break;case"top-left":case"bottom-left":P=z;break;case"left":P=T;break;case"right":P=-T}return[P,L]}(l,f[0])}function GE(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function DD(l,f,d,T,P,L,z,Z,ae,le,de,Ae,Se,ke,Ye){var $e=function(Wt,Zt,or,Ar,Rr,bn,qr,Rn){for(var Yr=Ar.layout.get("text-rotate").evaluate(bn,{})*Math.PI/180,_i=[],Xn=0,dn=Zt.positionedLines;Xn<dn.length;Xn+=1)for(var Mi=dn[Xn],hi=0,Hi=Mi.positionedGlyphs;hi<Hi.length;hi+=1){var kn=Hi[hi];if(kn.rect){var Ji=kn.rect||{},oo=4,Mo=!0,So=1,so=0,Io=(Rr||Rn)&&kn.vertical,As=kn.metrics.advance*kn.scale/2;if(Rn&&Zt.verticalizable&&(so=Mi.lineOffset/2-(kn.imageName?-(24-kn.metrics.width*kn.scale)/2:24*(kn.scale-1))),kn.imageName){var ys=qr[kn.imageName];Mo=ys.sdf,oo=1/(So=ys.pixelRatio)}var Eu=Rr?[kn.x+As,kn.y]:[0,0],Bs=Rr?[0,0]:[kn.x+As+or[0],kn.y+or[1]-so],Cu=[0,0];Io&&(Cu=Bs,Bs=[0,0]);var Fo=(kn.metrics.left-oo)*kn.scale-As+Bs[0],Ds=(-kn.metrics.top-oo)*kn.scale+Bs[1],Fi=Fo+Ji.w*kn.scale/So,Ia=Ds+Ji.h*kn.scale/So,ga=new u(Fo,Ds),qi=new u(Fi,Ds),Ku=new u(Fo,Ia),uu=new u(Fi,Ia);if(Io){var Qa=new u(-As,As- -17),Yo=-Math.PI/2,lu=12-As,Qi=new u(22-lu,-(kn.imageName?lu:0)),Gf=new(Function.prototype.bind.apply(u,[null].concat(Cu)));ga._rotateAround(Yo,Qa)._add(Qi)._add(Gf),qi._rotateAround(Yo,Qa)._add(Qi)._add(Gf),Ku._rotateAround(Yo,Qa)._add(Qi)._add(Gf),uu._rotateAround(Yo,Qa)._add(Qi)._add(Gf)}if(Yr){var jl=Math.sin(Yr),Vf=Math.cos(Yr),No=[Vf,-jl,jl,Vf];ga._matMult(No),qi._matMult(No),Ku._matMult(No),uu._matMult(No)}var Hf=new u(0,0),Rc=new u(0,0);_i.push({tl:ga,tr:qi,bl:Ku,br:uu,tex:Ji,writingMode:Zt.writingMode,glyphOffset:Eu,sectionIndex:kn.sectionIndex,isSDF:Mo,pixelOffsetTL:Hf,pixelOffsetBR:Rc,minFontScaleX:0,minFontScaleY:0})}}return _i}(0,d,Z,P,L,z,T,l.allowVerticalPlacement),mt=l.textSizeData,nt=null;mt.kind==="source"?(nt=[128*P.layout.get("text-size").evaluate(z,{})])[0]>32640&&U(l.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):mt.kind==="composite"&&((nt=[128*ke.compositeTextSizes[0].evaluate(z,{},Ye),128*ke.compositeTextSizes[1].evaluate(z,{},Ye)])[0]>32640||nt[1]>32640)&&U(l.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),l.addSymbols(l.text,$e,nt,Z,L,z,le,f,ae.lineStartIndex,ae.lineLength,Se,Ye);for(var Et=0,Bt=de;Et<Bt.length;Et+=1)Ae[Bt[Et]]=l.text.placedSymbolArray.length-1;return 4*$e.length}function FD(l){for(var f in l)return l[f];return null}function Eae(l,f,d,T){var P=l.compareText;if(f in P){for(var L=P[f],z=L.length-1;z>=0;z--)if(T.dist(L[z])<d)return!0}else P[f]=[];return P[f].push(T),!1}var Cae=Vv.VectorTileFeature.types,Pae=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ob(l,f,d,T,P,L,z,Z,ae,le,de,Ae,Se){var ke=Z?Math.min(32640,Math.round(Z[0])):0,Ye=Z?Math.min(32640,Math.round(Z[1])):0;l.emplaceBack(f,d,Math.round(32*T),Math.round(32*P),L,z,(ke<<1)+(ae?1:0),Ye,16*le,16*de,256*Ae,256*Se)}function VE(l,f,d){l.emplaceBack(f.x,f.y,d),l.emplaceBack(f.x,f.y,d),l.emplaceBack(f.x,f.y,d),l.emplaceBack(f.x,f.y,d)}function Oae(l){for(var f=0,d=l.sections;f<d.length;f+=1)if(zp(d[f].text))return!0;return!1}var Zv=function(l){this.layoutVertexArray=new jp,this.indexArray=new wu,this.programConfigurations=l,this.segments=new Fe,this.dynamicLayoutVertexArray=new Mc,this.opacityVertexArray=new Nh,this.placedSymbolArray=new S};Zv.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Zv.prototype.upload=function(l,f,d,T){this.isEmpty()||(d&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,tae.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,f),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,rae.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,Pae,!0),this.opacityVertexBuffer.itemSize=1),(d||T)&&this.programConfigurations.upload(l))},Zv.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ir("SymbolBuffers",Zv);var uy=function(l,f,d){this.layoutVertexArray=new l,this.layoutAttributes=f,this.indexArray=new d,this.segments=new Fe,this.collisionVertexArray=new cf};uy.prototype.upload=function(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,nae.members,!0)},uy.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ir("CollisionBuffers",uy);var Ta=function(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(function(L){return L.id}),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=C([]),this.placementViewportMatrix=C([]);var f=this.layers[0]._unevaluatedLayout._values;this.textSizeData=UE(this.zoom,f["text-size"]),this.iconSizeData=UE(this.zoom,f["icon-size"]);var d=this.layers[0].layout,T=d.get("symbol-sort-key"),P=d.get("symbol-z-order");this.canOverlap=d.get("text-allow-overlap")||d.get("icon-allow-overlap")||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=P!=="viewport-y"&&T.constantOr(1)!==void 0,this.sortFeaturesByY=(P==="viewport-y"||P==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(function(L){return Ul[L]})),this.stateDependentLayerIds=this.layers.filter(function(L){return L.isStateDependent()}).map(function(L){return L.id}),this.sourceID=l.sourceID};Ta.prototype.createArrays=function(){this.text=new Zv(new zn(this.layers,this.zoom,function(l){return/^text/.test(l)})),this.icon=new Zv(new zn(this.layers,this.zoom,function(l){return/^icon/.test(l)})),this.glyphOffsetArray=new K,this.lineVertexArray=new ie,this.symbolInstances=new q},Ta.prototype.calculateGlyphDependencies=function(l,f,d,T,P){for(var L=0;L<l.length;L++)if(f[l.charCodeAt(L)]=!0,(d||T)&&P){var z=ay[l.charAt(L)];z&&(f[z.charCodeAt(0)]=!0)}},Ta.prototype.populate=function(l,f,d){var T=this.layers[0],P=T.layout,L=P.get("text-font"),z=P.get("text-field"),Z=P.get("icon-image"),ae=(z.value.kind!=="constant"||z.value.value instanceof Ba&&!z.value.value.isEmpty()||z.value.value.toString().length>0)&&(L.value.kind!=="constant"||L.value.value.length>0),le=Z.value.kind!=="constant"||!!Z.value.value||Object.keys(Z.parameters).length>0,de=P.get("symbol-sort-key");if(this.features=[],ae||le){for(var Ae=f.iconDependencies,Se=f.glyphDependencies,ke=f.availableImages,Ye=new Si(this.zoom),$e=0,mt=l;$e<mt.length;$e+=1){var nt=mt[$e],Et=nt.feature,Bt=nt.id,Wt=nt.index,Zt=nt.sourceLayerIndex,or=T._featureFilter.needGeometry,Ar=To(Et,or);if(T._featureFilter.filter(Ye,Ar,d)){or||(Ar.geometry=ro(Et));var Rr=void 0;if(ae){var bn=T.getValueAndResolveTokens("text-field",Ar,d,ke),qr=Ba.factory(bn);Oae(qr)&&(this.hasRTLText=!0),(!this.hasRTLText||Qd()==="unavailable"||this.hasRTLText&&Wu.isParsed())&&(Rr=aae(qr,T,Ar))}var Rn=void 0;if(le){var Yr=T.getValueAndResolveTokens("icon-image",Ar,d,ke);Rn=Yr instanceof _o?Yr:_o.fromString(Yr)}if(Rr||Rn){var _i=this.sortFeaturesByKey?de.evaluate(Ar,{},d):void 0;if(this.features.push({id:Bt,text:Rr,icon:Rn,index:Wt,sourceLayerIndex:Zt,geometry:Ar.geometry,properties:Et.properties,type:Cae[Et.type],sortKey:_i}),Rn&&(Ae[Rn.name]=!0),Rr){var Xn=L.evaluate(Ar,{},d).join(","),dn=P.get("text-rotation-alignment")==="map"&&P.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ul.vertical)>=0;for(var Mi=0,hi=Rr.sections;Mi<hi.length;Mi+=1){var Hi=hi[Mi];if(Hi.image)Ae[Hi.image.name]=!0;else{var kn=da(Rr.toString()),Ji=Hi.fontStack||Xn,oo=Se[Ji]=Se[Ji]||{};this.calculateGlyphDependencies(Hi.text,oo,dn,this.allowVerticalPlacement,kn)}}}}}}P.get("symbol-placement")==="line"&&(this.features=function(Mo){var So={},so={},Io=[],As=0;function ys(Qa){Io.push(Mo[Qa]),As++}function Eu(Qa,Yo,lu){var Qi=so[Qa];return delete so[Qa],so[Yo]=Qi,Io[Qi].geometry[0].pop(),Io[Qi].geometry[0]=Io[Qi].geometry[0].concat(lu[0]),Qi}function Bs(Qa,Yo,lu){var Qi=So[Yo];return delete So[Yo],So[Qa]=Qi,Io[Qi].geometry[0].shift(),Io[Qi].geometry[0]=lu[0].concat(Io[Qi].geometry[0]),Qi}function Cu(Qa,Yo,lu){var Qi=lu?Yo[0][Yo[0].length-1]:Yo[0][0];return Qa+":"+Qi.x+":"+Qi.y}for(var Fo=0;Fo<Mo.length;Fo++){var Ds=Mo[Fo],Fi=Ds.geometry,Ia=Ds.text?Ds.text.toString():null;if(Ia){var ga=Cu(Ia,Fi),qi=Cu(Ia,Fi,!0);if(ga in so&&qi in So&&so[ga]!==So[qi]){var Ku=Bs(ga,qi,Fi),uu=Eu(ga,qi,Io[Ku].geometry);delete So[ga],delete so[qi],so[Cu(Ia,Io[uu].geometry,!0)]=uu,Io[Ku].geometry=null}else ga in so?Eu(ga,qi,Fi):qi in So?Bs(ga,qi,Fi):(ys(Fo),So[ga]=As-1,so[qi]=As-1)}else ys(Fo)}return Io.filter(function(Qa){return Qa.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Mo,So){return Mo.sortKey-So.sortKey})}},Ta.prototype.update=function(l,f,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,f,this.layers,d),this.icon.programConfigurations.updatePaintArrays(l,f,this.layers,d))},Ta.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Ta.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ta.prototype.upload=function(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ta.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ta.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ta.prototype.addToLineVertexArray=function(l,f){var d=this.lineVertexArray.length;if(l.segment!==void 0){for(var T=l.dist(f[l.segment+1]),P=l.dist(f[l.segment]),L={},z=l.segment+1;z<f.length;z++)L[z]={x:f[z].x,y:f[z].y,tileUnitDistanceFromAnchor:T},z<f.length-1&&(T+=f[z+1].dist(f[z]));for(var Z=l.segment||0;Z>=0;Z--)L[Z]={x:f[Z].x,y:f[Z].y,tileUnitDistanceFromAnchor:P},Z>0&&(P+=f[Z-1].dist(f[Z]));for(var ae=0;ae<f.length;ae++){var le=L[ae];this.lineVertexArray.emplaceBack(le.x,le.y,le.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}},Ta.prototype.addSymbols=function(l,f,d,T,P,L,z,Z,ae,le,de,Ae){for(var Se=l.indexArray,ke=l.layoutVertexArray,Ye=l.segments.prepareSegment(4*f.length,ke,Se,this.canOverlap?L.sortKey:void 0),$e=this.glyphOffsetArray.length,mt=Ye.vertexLength,nt=this.allowVerticalPlacement&&z===Ul.vertical?Math.PI/2:0,Et=L.text&&L.text.sections,Bt=0;Bt<f.length;Bt++){var Wt=f[Bt],Zt=Wt.tl,or=Wt.tr,Ar=Wt.bl,Rr=Wt.br,bn=Wt.tex,qr=Wt.pixelOffsetTL,Rn=Wt.pixelOffsetBR,Yr=Wt.minFontScaleX,_i=Wt.minFontScaleY,Xn=Wt.glyphOffset,dn=Wt.isSDF,Mi=Wt.sectionIndex,hi=Ye.vertexLength,Hi=Xn[1];Ob(ke,Z.x,Z.y,Zt.x,Hi+Zt.y,bn.x,bn.y,d,dn,qr.x,qr.y,Yr,_i),Ob(ke,Z.x,Z.y,or.x,Hi+or.y,bn.x+bn.w,bn.y,d,dn,Rn.x,qr.y,Yr,_i),Ob(ke,Z.x,Z.y,Ar.x,Hi+Ar.y,bn.x,bn.y+bn.h,d,dn,qr.x,Rn.y,Yr,_i),Ob(ke,Z.x,Z.y,Rr.x,Hi+Rr.y,bn.x+bn.w,bn.y+bn.h,d,dn,Rn.x,Rn.y,Yr,_i),VE(l.dynamicLayoutVertexArray,Z,nt),Se.emplaceBack(hi,hi+1,hi+2),Se.emplaceBack(hi+1,hi+2,hi+3),Ye.vertexLength+=4,Ye.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Xn[0]),Bt!==f.length-1&&Mi===f[Bt+1].sectionIndex||l.programConfigurations.populatePaintArrays(ke.length,L,L.index,{},Ae,Et&&Et[Mi])}l.placedSymbolArray.emplaceBack(Z.x,Z.y,$e,this.glyphOffsetArray.length-$e,mt,ae,le,Z.segment,d?d[0]:0,d?d[1]:0,T[0],T[1],z,0,!1,0,de)},Ta.prototype._addCollisionDebugVertex=function(l,f,d,T,P,L){return f.emplaceBack(0,0),l.emplaceBack(d.x,d.y,T,P,Math.round(L.x),Math.round(L.y))},Ta.prototype.addCollisionDebugVertices=function(l,f,d,T,P,L,z){var Z=P.segments.prepareSegment(4,P.layoutVertexArray,P.indexArray),ae=Z.vertexLength,le=P.layoutVertexArray,de=P.collisionVertexArray,Ae=z.anchorX,Se=z.anchorY;this._addCollisionDebugVertex(le,de,L,Ae,Se,new u(l,f)),this._addCollisionDebugVertex(le,de,L,Ae,Se,new u(d,f)),this._addCollisionDebugVertex(le,de,L,Ae,Se,new u(d,T)),this._addCollisionDebugVertex(le,de,L,Ae,Se,new u(l,T)),Z.vertexLength+=4;var ke=P.indexArray;ke.emplaceBack(ae,ae+1),ke.emplaceBack(ae+1,ae+2),ke.emplaceBack(ae+2,ae+3),ke.emplaceBack(ae+3,ae),Z.primitiveLength+=4},Ta.prototype.addDebugCollisionBoxes=function(l,f,d,T){for(var P=l;P<f;P++){var L=this.collisionBoxArray.get(P);this.addCollisionDebugVertices(L.x1,L.y1,L.x2,L.y2,T?this.textCollisionBox:this.iconCollisionBox,L.anchorPoint,d)}},Ta.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new uy(lf,mD.members,zf),this.iconCollisionBox=new uy(lf,mD.members,zf);for(var l=0;l<this.symbolInstances.length;l++){var f=this.symbolInstances.get(l);this.addDebugCollisionBoxes(f.textBoxStartIndex,f.textBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.iconBoxStartIndex,f.iconBoxEndIndex,f,!1),this.addDebugCollisionBoxes(f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex,f,!1)}},Ta.prototype._deserializeCollisionBoxesForSymbol=function(l,f,d,T,P,L,z,Z,ae){for(var le={},de=f;de<d;de++){var Ae=l.get(de);le.textBox={x1:Ae.x1,y1:Ae.y1,x2:Ae.x2,y2:Ae.y2,anchorPointX:Ae.anchorPointX,anchorPointY:Ae.anchorPointY},le.textFeatureIndex=Ae.featureIndex;break}for(var Se=T;Se<P;Se++){var ke=l.get(Se);le.verticalTextBox={x1:ke.x1,y1:ke.y1,x2:ke.x2,y2:ke.y2,anchorPointX:ke.anchorPointX,anchorPointY:ke.anchorPointY},le.verticalTextFeatureIndex=ke.featureIndex;break}for(var Ye=L;Ye<z;Ye++){var $e=l.get(Ye);le.iconBox={x1:$e.x1,y1:$e.y1,x2:$e.x2,y2:$e.y2,anchorPointX:$e.anchorPointX,anchorPointY:$e.anchorPointY},le.iconFeatureIndex=$e.featureIndex;break}for(var mt=Z;mt<ae;mt++){var nt=l.get(mt);le.verticalIconBox={x1:nt.x1,y1:nt.y1,x2:nt.x2,y2:nt.y2,anchorPointX:nt.anchorPointX,anchorPointY:nt.anchorPointY},le.verticalIconFeatureIndex=nt.featureIndex;break}return le},Ta.prototype.deserializeCollisionBoxes=function(l){this.collisionArrays=[];for(var f=0;f<this.symbolInstances.length;f++){var d=this.symbolInstances.get(f);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}},Ta.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ta.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ta.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ta.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Ta.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Ta.prototype.addIndicesForPlacedSymbol=function(l,f){for(var d=l.placedSymbolArray.get(f),T=d.vertexStartIndex+4*d.numGlyphs,P=d.vertexStartIndex;P<T;P+=4)l.indexArray.emplaceBack(P,P+1,P+2),l.indexArray.emplaceBack(P+1,P+2,P+3)},Ta.prototype.getSortedSymbolIndexes=function(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var f=Math.sin(l),d=Math.cos(l),T=[],P=[],L=[],z=0;z<this.symbolInstances.length;++z){L.push(z);var Z=this.symbolInstances.get(z);T.push(0|Math.round(f*Z.anchorX+d*Z.anchorY)),P.push(Z.featureIndex)}return L.sort(function(ae,le){return T[ae]-T[le]||P[le]-P[ae]}),L},Ta.prototype.addToSortKeyRanges=function(l,f){var d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===f?d.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:f,symbolInstanceStart:l,symbolInstanceEnd:l+1})},Ta.prototype.sortFeatures=function(l){var f=this;if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var d=0,T=this.symbolInstanceIndexes;d<T.length;d+=1){var P=this.symbolInstances.get(T[d]);this.featureSortOrder.push(P.featureIndex),[P.rightJustifiedTextSymbolIndex,P.centerJustifiedTextSymbolIndex,P.leftJustifiedTextSymbolIndex].forEach(function(L,z,Z){L>=0&&Z.indexOf(L)===z&&f.addIndicesForPlacedSymbol(f.text,L)}),P.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,P.verticalPlacedTextSymbolIndex),P.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.placedIconSymbolIndex),P.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,P.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ir("SymbolBucket",Ta,{omit:["layers","collisionBoxArray","features","compareText"]}),Ta.MAX_GLYPHS=65535,Ta.addDynamicAttributes=VE;var Mae=new ts({"symbol-placement":new wn(De.layout_symbol["symbol-placement"]),"symbol-spacing":new wn(De.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new wn(De.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new sn(De.layout_symbol["symbol-sort-key"]),"symbol-z-order":new wn(De.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new wn(De.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new wn(De.layout_symbol["icon-ignore-placement"]),"icon-optional":new wn(De.layout_symbol["icon-optional"]),"icon-rotation-alignment":new wn(De.layout_symbol["icon-rotation-alignment"]),"icon-size":new sn(De.layout_symbol["icon-size"]),"icon-text-fit":new wn(De.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new wn(De.layout_symbol["icon-text-fit-padding"]),"icon-image":new sn(De.layout_symbol["icon-image"]),"icon-rotate":new sn(De.layout_symbol["icon-rotate"]),"icon-padding":new wn(De.layout_symbol["icon-padding"]),"icon-keep-upright":new wn(De.layout_symbol["icon-keep-upright"]),"icon-offset":new sn(De.layout_symbol["icon-offset"]),"icon-anchor":new sn(De.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new wn(De.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new wn(De.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new wn(De.layout_symbol["text-rotation-alignment"]),"text-field":new sn(De.layout_symbol["text-field"]),"text-font":new sn(De.layout_symbol["text-font"]),"text-size":new sn(De.layout_symbol["text-size"]),"text-max-width":new sn(De.layout_symbol["text-max-width"]),"text-line-height":new wn(De.layout_symbol["text-line-height"]),"text-letter-spacing":new sn(De.layout_symbol["text-letter-spacing"]),"text-justify":new sn(De.layout_symbol["text-justify"]),"text-radial-offset":new sn(De.layout_symbol["text-radial-offset"]),"text-variable-anchor":new wn(De.layout_symbol["text-variable-anchor"]),"text-anchor":new sn(De.layout_symbol["text-anchor"]),"text-max-angle":new wn(De.layout_symbol["text-max-angle"]),"text-writing-mode":new wn(De.layout_symbol["text-writing-mode"]),"text-rotate":new sn(De.layout_symbol["text-rotate"]),"text-padding":new wn(De.layout_symbol["text-padding"]),"text-keep-upright":new wn(De.layout_symbol["text-keep-upright"]),"text-transform":new sn(De.layout_symbol["text-transform"]),"text-offset":new sn(De.layout_symbol["text-offset"]),"text-allow-overlap":new wn(De.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new wn(De.layout_symbol["text-ignore-placement"]),"text-optional":new wn(De.layout_symbol["text-optional"])}),HE={paint:new ts({"icon-opacity":new sn(De.paint_symbol["icon-opacity"]),"icon-color":new sn(De.paint_symbol["icon-color"]),"icon-halo-color":new sn(De.paint_symbol["icon-halo-color"]),"icon-halo-width":new sn(De.paint_symbol["icon-halo-width"]),"icon-halo-blur":new sn(De.paint_symbol["icon-halo-blur"]),"icon-translate":new wn(De.paint_symbol["icon-translate"]),"icon-translate-anchor":new wn(De.paint_symbol["icon-translate-anchor"]),"text-opacity":new sn(De.paint_symbol["text-opacity"]),"text-color":new sn(De.paint_symbol["text-color"],{runtimeType:_r,getOverride:function(l){return l.textColor},hasOverride:function(l){return!!l.textColor}}),"text-halo-color":new sn(De.paint_symbol["text-halo-color"]),"text-halo-width":new sn(De.paint_symbol["text-halo-width"]),"text-halo-blur":new sn(De.paint_symbol["text-halo-blur"]),"text-translate":new wn(De.paint_symbol["text-translate"]),"text-translate-anchor":new wn(De.paint_symbol["text-translate-anchor"])}),layout:Mae},$v=function(l){this.type=l.property.overrides?l.property.overrides.runtimeType:Dr,this.defaultValue=l};$v.prototype.evaluate=function(l){if(l.formattedSection){var f=this.defaultValue.property.overrides;if(f&&f.hasOverride(l.formattedSection))return f.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default},$v.prototype.eachChild=function(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)},$v.prototype.outputDefined=function(){return!1},$v.prototype.serialize=function(){return null},ir("FormatSectionOverride",$v,{omit:["defaultValue"]});var Iae=function(l){function f(d){l.call(this,d,HE)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.recalculate=function(d,T){if(l.prototype.recalculate.call(this,d,T),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var P=this.layout.get("text-writing-mode");if(P){for(var L=[],z=0,Z=P;z<Z.length;z+=1){var ae=Z[z];L.indexOf(ae)<0&&L.push(ae)}this.layout._values["text-writing-mode"]=L}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},f.prototype.getValueAndResolveTokens=function(d,T,P,L){var z=this.layout.get(d).evaluate(T,{},P,L),Z=this._unevaluatedLayout._values[d];return Z.isDataDriven()||sr(Z.value)||!z?z:function(ae,le){return le.replace(/{([^{}]+)}/g,function(de,Ae){return Ae in ae?String(ae[Ae]):""})}(T.properties,z)},f.prototype.createBucket=function(d){return new Ta(d)},f.prototype.queryRadius=function(){return 0},f.prototype.queryIntersectsFeature=function(){return!1},f.prototype._setPaintOverrides=function(){for(var d=0,T=HE.paint.overridableProperties;d<T.length;d+=1){var P=T[d];if(f.hasPaintOverride(this.layout,P)){var L,z=this.paint.get(P),Z=new $v(z),ae=new Tt(Z,z.property.specification);L=z.value.kind==="constant"||z.value.kind==="source"?new ti("source",ae):new jn("composite",ae,z.value.zoomStops,z.value._interpolationType),this.paint._values[P]=new qs(z.property,L,z.parameters)}}},f.prototype._handleOverridablePaintPropertyUpdate=function(d,T,P){return!(!this.layout||T.isDataDriven()||P.isDataDriven())&&f.hasPaintOverride(this.layout,d)},f.hasPaintOverride=function(d,T){var P=d.get("text-field"),L=HE.paint.properties[T],z=!1,Z=function(de){for(var Ae=0,Se=de;Ae<Se.length;Ae+=1)if(L.overrides&&L.overrides.hasOverride(Se[Ae]))return void(z=!0)};if(P.value.kind==="constant"&&P.value.value instanceof Ba)Z(P.value.value.sections);else if(P.value.kind==="source"){var ae=function(de){z||(de instanceof ho&&sa(de.value)===Ci?Z(de.value.sections):de instanceof Cs?Z(de.sections):de.eachChild(ae))},le=P.value;le._styleExpression&&ae(le._styleExpression.expression)}return z},f}(il),Rae={paint:new ts({"background-color":new wn(De.paint_background["background-color"]),"background-pattern":new Xs(De.paint_background["background-pattern"]),"background-opacity":new wn(De.paint_background["background-opacity"])})},Lae=function(l){function f(d){l.call(this,d,Rae)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f}(il),kae={paint:new ts({"raster-opacity":new wn(De.paint_raster["raster-opacity"]),"raster-hue-rotate":new wn(De.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new wn(De.paint_raster["raster-brightness-min"]),"raster-brightness-max":new wn(De.paint_raster["raster-brightness-max"]),"raster-saturation":new wn(De.paint_raster["raster-saturation"]),"raster-contrast":new wn(De.paint_raster["raster-contrast"]),"raster-resampling":new wn(De.paint_raster["raster-resampling"]),"raster-fade-duration":new wn(De.paint_raster["raster-fade-duration"])})},Bae=function(l){function f(d){l.call(this,d,kae)}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f}(il),Dae=function(l){function f(d){l.call(this,d,{}),this.implementation=d}return l&&(f.__proto__=l),(f.prototype=Object.create(l&&l.prototype)).constructor=f,f.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},f.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},f.prototype.recalculate=function(){},f.prototype.updateTransitions=function(){},f.prototype.hasTransition=function(){},f.prototype.serialize=function(){},f.prototype.onAdd=function(d){this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},f.prototype.onRemove=function(d){this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},f}(il),Fae={circle:Q,heatmap:_n,hillshade:Ir,fill:zie,"fill-extrusion":Yie,line:eae,symbol:Iae,background:Lae,raster:Bae},ND=h.HTMLImageElement,zD=h.HTMLCanvasElement,UD=h.HTMLVideoElement,jD=h.ImageData,Mb=h.ImageBitmap,nm=function(l,f,d,T){this.context=l,this.format=d,this.texture=l.gl.createTexture(),this.update(f,T)};nm.prototype.update=function(l,f,d){var T=l.width,P=l.height,L=!(this.size&&this.size[0]===T&&this.size[1]===P||d),z=this.context,Z=z.gl;if(this.useMipmap=Boolean(f&&f.useMipmap),Z.bindTexture(Z.TEXTURE_2D,this.texture),z.pixelStoreUnpackFlipY.set(!1),z.pixelStoreUnpack.set(1),z.pixelStoreUnpackPremultiplyAlpha.set(this.format===Z.RGBA&&(!f||f.premultiply!==!1)),L)this.size=[T,P],l instanceof ND||l instanceof zD||l instanceof UD||l instanceof jD||Mb&&l instanceof Mb?Z.texImage2D(Z.TEXTURE_2D,0,this.format,this.format,Z.UNSIGNED_BYTE,l):Z.texImage2D(Z.TEXTURE_2D,0,this.format,T,P,0,this.format,Z.UNSIGNED_BYTE,l.data);else{var ae=d||{x:0,y:0},le=ae.x,de=ae.y;l instanceof ND||l instanceof zD||l instanceof UD||l instanceof jD||Mb&&l instanceof Mb?Z.texSubImage2D(Z.TEXTURE_2D,0,le,de,Z.RGBA,Z.UNSIGNED_BYTE,l):Z.texSubImage2D(Z.TEXTURE_2D,0,le,de,T,P,Z.RGBA,Z.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Z.generateMipmap(Z.TEXTURE_2D)},nm.prototype.bind=function(l,f,d){var T=this.context.gl;T.bindTexture(T.TEXTURE_2D,this.texture),d!==T.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=T.LINEAR),l!==this.filter&&(T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,l),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,d||l),this.filter=l),f!==this.wrap&&(T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,f),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,f),this.wrap=f)},nm.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},nm.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var WE=function(l){var f=this;this._callback=l,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){f._triggered=!1,f._callback()})};WE.prototype.trigger=function(){var l=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){l._triggered=!1,l._callback()},0))},WE.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Jv=function(l,f,d){this.target=l,this.parent=f,this.mapId=d,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},B(["receive","process"],this),this.invoker=new WE(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=pe()?l:h};function GD(l,f,d){var T=2*Math.PI*6378137/256/Math.pow(2,d);return[l*T-2*Math.PI*6378137/2,f*T-2*Math.PI*6378137/2]}Jv.prototype.send=function(l,f,d,T,P){var L=this;P===void 0&&(P=!1);var z=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(this.callbacks[z]=d);var Z=We(this.globalScope)?void 0:[];return this.target.postMessage({id:z,type:l,hasCallback:!!d,targetMapId:T,mustQueue:P,sourceMapId:this.mapId,data:Dn(f,Z)},Z),{cancel:function(){d&&delete L.callbacks[z],L.target.postMessage({id:z,type:"<cancel>",targetMapId:T,sourceMapId:L.mapId})}}},Jv.prototype.receive=function(l){var f=l.data,d=f.id;if(d&&(!f.targetMapId||this.mapId===f.targetMapId))if(f.type==="<cancel>"){delete this.tasks[d];var T=this.cancelCallbacks[d];delete this.cancelCallbacks[d],T&&T()}else pe()||f.mustQueue?(this.tasks[d]=f,this.taskQueue.push(d),this.invoker.trigger()):this.processTask(d,f)},Jv.prototype.process=function(){if(this.taskQueue.length){var l=this.taskQueue.shift(),f=this.tasks[l];delete this.tasks[l],this.taskQueue.length&&this.invoker.trigger(),f&&this.processTask(l,f)}},Jv.prototype.processTask=function(l,f){var d=this;if(f.type==="<response>"){var T=this.callbacks[l];delete this.callbacks[l],T&&(f.error?T(ia(f.error)):T(null,ia(f.data)))}else{var P=!1,L=We(this.globalScope)?void 0:[],z=f.hasCallback?function(de,Ae){P=!0,delete d.cancelCallbacks[l],d.target.postMessage({id:l,type:"<response>",sourceMapId:d.mapId,error:de?Dn(de):null,data:Dn(Ae,L)},L)}:function(de){P=!0},Z=null,ae=ia(f.data);if(this.parent[f.type])Z=this.parent[f.type](f.sourceMapId,ae,z);else if(this.parent.getWorkerSource){var le=f.type.split(".");Z=this.parent.getWorkerSource(f.sourceMapId,le[0],ae.source)[le[1]](ae,z)}else z(new Error("Could not find function "+f.type));!P&&Z&&Z.cancel&&(this.cancelCallbacks[l]=Z.cancel)}},Jv.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var as=function(l,f){l&&(f?this.setSouthWest(l).setNorthEast(f):l.length===4?this.setSouthWest([l[0],l[1]]).setNorthEast([l[2],l[3]]):this.setSouthWest(l[0]).setNorthEast(l[1]))};as.prototype.setNorthEast=function(l){return this._ne=l instanceof ao?new ao(l.lng,l.lat):ao.convert(l),this},as.prototype.setSouthWest=function(l){return this._sw=l instanceof ao?new ao(l.lng,l.lat):ao.convert(l),this},as.prototype.extend=function(l){var f,d,T=this._sw,P=this._ne;if(l instanceof ao)f=l,d=l;else{if(!(l instanceof as))return Array.isArray(l)?l.length===4||l.every(Array.isArray)?this.extend(as.convert(l)):this.extend(ao.convert(l)):this;if(d=l._ne,!(f=l._sw)||!d)return this}return T||P?(T.lng=Math.min(f.lng,T.lng),T.lat=Math.min(f.lat,T.lat),P.lng=Math.max(d.lng,P.lng),P.lat=Math.max(d.lat,P.lat)):(this._sw=new ao(f.lng,f.lat),this._ne=new ao(d.lng,d.lat)),this},as.prototype.getCenter=function(){return new ao((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},as.prototype.getSouthWest=function(){return this._sw},as.prototype.getNorthEast=function(){return this._ne},as.prototype.getNorthWest=function(){return new ao(this.getWest(),this.getNorth())},as.prototype.getSouthEast=function(){return new ao(this.getEast(),this.getSouth())},as.prototype.getWest=function(){return this._sw.lng},as.prototype.getSouth=function(){return this._sw.lat},as.prototype.getEast=function(){return this._ne.lng},as.prototype.getNorth=function(){return this._ne.lat},as.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},as.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},as.prototype.isEmpty=function(){return!(this._sw&&this._ne)},as.prototype.contains=function(l){var f=ao.convert(l),d=f.lng,T=f.lat,P=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(P=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=T&&T<=this._ne.lat&&P},as.convert=function(l){return!l||l instanceof as?l:new as(l)};var ao=function(l,f){if(isNaN(l)||isNaN(f))throw new Error("Invalid LngLat object: ("+l+", "+f+")");if(this.lng=+l,this.lat=+f,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};ao.prototype.wrap=function(){return new ao(R(this.lng,-180,180),this.lat)},ao.prototype.toArray=function(){return[this.lng,this.lat]},ao.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},ao.prototype.distanceTo=function(l){var f=Math.PI/180,d=this.lat*f,T=l.lat*f,P=Math.sin(d)*Math.sin(T)+Math.cos(d)*Math.cos(T)*Math.cos((l.lng-this.lng)*f);return 63710088e-1*Math.acos(Math.min(P,1))},ao.prototype.toBounds=function(l){l===void 0&&(l=0);var f=360*l/40075017,d=f/Math.cos(Math.PI/180*this.lat);return new as(new ao(this.lng-d,this.lat-f),new ao(this.lng+d,this.lat+f))},ao.convert=function(l){if(l instanceof ao)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new ao(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new ao(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var VD=2*Math.PI*63710088e-1;function HD(l){return VD*Math.cos(l*Math.PI/180)}function WD(l){return(180+l)/360}function qD(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function XD(l,f){return l/HD(f)}function qE(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}var im=function(l,f,d){d===void 0&&(d=0),this.x=+l,this.y=+f,this.z=+d};im.fromLngLat=function(l,f){f===void 0&&(f=0);var d=ao.convert(l);return new im(WD(d.lng),qD(d.lat),XD(f,d.lat))},im.prototype.toLngLat=function(){return new ao(360*this.x-180,qE(this.y))},im.prototype.toAltitude=function(){return this.z*HD(qE(this.y))},im.prototype.meterInMercatorCoordinateUnits=function(){return 1/VD*(l=qE(this.y),1/Math.cos(l*Math.PI/180));var l};var am=function(l,f,d){this.z=l,this.x=f,this.y=d,this.key=ly(0,l,l,f,d)};am.prototype.equals=function(l){return this.z===l.z&&this.x===l.x&&this.y===l.y},am.prototype.url=function(l,f){var d,T,P,L,z,Z=(T=this.y,P=this.z,L=GD(256*(d=this.x),256*(T=Math.pow(2,P)-T-1),P),z=GD(256*(d+1),256*(T+1),P),L[0]+","+L[1]+","+z[0]+","+z[1]),ae=function(le,de,Ae){for(var Se,ke="",Ye=le;Ye>0;Ye--)ke+=(de&(Se=1<<Ye-1)?1:0)+(Ae&Se?2:0);return ke}(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ae).replace("{bbox-epsg-3857}",Z)},am.prototype.getTilePoint=function(l){var f=Math.pow(2,this.z);return new u(8192*(l.x*f-this.x),8192*(l.y*f-this.y))},am.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var YD=function(l,f){this.wrap=l,this.canonical=f,this.key=ly(l,f.z,f.z,f.x,f.y)},os=function(l,f,d,T,P){this.overscaledZ=l,this.wrap=f,this.canonical=new am(d,+T,+P),this.key=ly(f,l,d,T,P)};function ly(l,f,d,T,P){(l*=2)<0&&(l=-1*l-1);var L=1<<d;return(L*L*l+L*P+T).toString(36)+d.toString(36)+f.toString(36)}os.prototype.equals=function(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)},os.prototype.scaledTo=function(l){var f=this.canonical.z-l;return l>this.canonical.z?new os(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new os(l,this.wrap,l,this.canonical.x>>f,this.canonical.y>>f)},os.prototype.calculateScaledKey=function(l,f){var d=this.canonical.z-l;return l>this.canonical.z?ly(this.wrap*+f,l,this.canonical.z,this.canonical.x,this.canonical.y):ly(this.wrap*+f,l,l,this.canonical.x>>d,this.canonical.y>>d)},os.prototype.isChildOf=function(l){if(l.wrap!==this.wrap)return!1;var f=this.canonical.z-l.canonical.z;return l.overscaledZ===0||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>f&&l.canonical.y===this.canonical.y>>f},os.prototype.children=function(l){if(this.overscaledZ>=l)return[new os(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var f=this.canonical.z+1,d=2*this.canonical.x,T=2*this.canonical.y;return[new os(f,this.wrap,f,d,T),new os(f,this.wrap,f,d+1,T),new os(f,this.wrap,f,d,T+1),new os(f,this.wrap,f,d+1,T+1)]},os.prototype.isLessThan=function(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))},os.prototype.wrapped=function(){return new os(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},os.prototype.unwrapTo=function(l){return new os(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)},os.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},os.prototype.toUnwrapped=function(){return new YD(this.wrap,this.canonical)},os.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},os.prototype.getTilePoint=function(l){return this.canonical.getTilePoint(new im(l.x-this.wrap,l.y))},ir("CanonicalTileID",am),ir("OverscaledTileID",os,{omit:["posMatrix"]});var jh=function(l,f,d){if(this.uid=l,f.height!==f.width)throw new RangeError("DEM tiles must be square");if(d&&d!=="mapbox"&&d!=="terrarium")return U('"'+d+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=f.height;var T=this.dim=f.height-2;this.data=new Uint32Array(f.data.buffer),this.encoding=d||"mapbox";for(var P=0;P<T;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(T,P)]=this.data[this._idx(T-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,T)]=this.data[this._idx(P,T-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(T,-1)]=this.data[this._idx(T-1,0)],this.data[this._idx(-1,T)]=this.data[this._idx(0,T-1)],this.data[this._idx(T,T)]=this.data[this._idx(T-1,T-1)]};jh.prototype.get=function(l,f){var d=new Uint8Array(this.data.buffer),T=4*this._idx(l,f);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(d[T],d[T+1],d[T+2])},jh.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},jh.prototype._idx=function(l,f){if(l<-1||l>=this.dim+1||f<-1||f>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(f+1)*this.stride+(l+1)},jh.prototype._unpackMapbox=function(l,f,d){return(256*l*256+256*f+d)/10-1e4},jh.prototype._unpackTerrarium=function(l,f,d){return 256*l+f+d/256-32768},jh.prototype.getPixels=function(){return new tr({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},jh.prototype.backfillBorder=function(l,f,d){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");var T=f*this.dim,P=f*this.dim+this.dim,L=d*this.dim,z=d*this.dim+this.dim;switch(f){case-1:T=P-1;break;case 1:P=T+1}switch(d){case-1:L=z-1;break;case 1:z=L+1}for(var Z=-f*this.dim,ae=-d*this.dim,le=L;le<z;le++)for(var de=T;de<P;de++)this.data[this._idx(de,le)]=l.data[this._idx(de+Z,le+ae)]},ir("DEMData",jh);var Ib=function(l){this._stringToNumber={},this._numberToString=[];for(var f=0;f<l.length;f++){var d=l[f];this._stringToNumber[d]=f,this._numberToString[f]=d}};Ib.prototype.encode=function(l){return this._stringToNumber[l]},Ib.prototype.decode=function(l){return this._numberToString[l]};var Rb=function(l,f,d,T,P){this.type="Feature",this._vectorTileFeature=l,l._z=f,l._x=d,l._y=T,this.properties=l.properties,this.id=P},XE={geometry:{configurable:!0}};XE.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},XE.geometry.set=function(l){this._geometry=l},Rb.prototype.toJSON=function(){var l={geometry:this.geometry};for(var f in this)f!=="_geometry"&&f!=="_vectorTileFeature"&&(l[f]=this[f]);return l},Object.defineProperties(Rb.prototype,XE);var Qv=function(){this.state={},this.stateChanges={},this.deletedStates={}};Qv.prototype.updateState=function(l,f,d){var T=String(f);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][T]=this.stateChanges[l][T]||{},D(this.stateChanges[l][T],d),this.deletedStates[l]===null)for(var P in this.deletedStates[l]={},this.state[l])P!==T&&(this.deletedStates[l][P]=null);else if(this.deletedStates[l]&&this.deletedStates[l][T]===null)for(var L in this.deletedStates[l][T]={},this.state[l][T])d[L]||(this.deletedStates[l][T][L]=null);else for(var z in d)this.deletedStates[l]&&this.deletedStates[l][T]&&this.deletedStates[l][T][z]===null&&delete this.deletedStates[l][T][z]},Qv.prototype.removeFeatureState=function(l,f,d){if(this.deletedStates[l]!==null){var T=String(f);if(this.deletedStates[l]=this.deletedStates[l]||{},d&&f!==void 0)this.deletedStates[l][T]!==null&&(this.deletedStates[l][T]=this.deletedStates[l][T]||{},this.deletedStates[l][T][d]=null);else if(f!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][T])for(d in this.deletedStates[l][T]={},this.stateChanges[l][T])this.deletedStates[l][T][d]=null;else this.deletedStates[l][T]=null;else this.deletedStates[l]=null}},Qv.prototype.getState=function(l,f){var d=String(f),T=D({},(this.state[l]||{})[d],(this.stateChanges[l]||{})[d]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){var P=this.deletedStates[l][f];if(P===null)return{};for(var L in P)delete T[L]}return T},Qv.prototype.initializeTileState=function(l,f){l.setFeatureState(this.state,f)},Qv.prototype.coalesceChanges=function(l,f){var d={};for(var T in this.stateChanges){this.state[T]=this.state[T]||{};var P={};for(var L in this.stateChanges[T])this.state[T][L]||(this.state[T][L]={}),D(this.state[T][L],this.stateChanges[T][L]),P[L]=this.state[T][L];d[T]=P}for(var z in this.deletedStates){this.state[z]=this.state[z]||{};var Z={};if(this.deletedStates[z]===null)for(var ae in this.state[z])Z[ae]={},this.state[z][ae]={};else for(var le in this.deletedStates[z]){if(this.deletedStates[z][le]===null)this.state[z][le]={};else for(var de=0,Ae=Object.keys(this.deletedStates[z][le]);de<Ae.length;de+=1)delete this.state[z][le][Ae[de]];Z[le]=this.state[z][le]}d[z]=d[z]||{},D(d[z],Z)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(var Se in l)l[Se].setFeatureState(d,f)};var Gh=function(l,f){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new fr(8192,16,0),this.grid3D=new fr(8192,16,0),this.featureIndexArray=new _e,this.promoteId=f};function KD(l,f,d,T,P){return V(l,function(L,z){var Z=f instanceof Fh?f.get(z):null;return Z&&Z.evaluate?Z.evaluate(d,T,P):Z})}function ZD(l){for(var f=1/0,d=1/0,T=-1/0,P=-1/0,L=0,z=l;L<z.length;L+=1){var Z=z[L];f=Math.min(f,Z.x),d=Math.min(d,Z.y),T=Math.max(T,Z.x),P=Math.max(P,Z.y)}return{minX:f,minY:d,maxX:T,maxY:P}}function Nae(l,f){return f-l}Gh.prototype.insert=function(l,f,d,T,P,L){var z=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,T,P);for(var Z=L?this.grid3D:this.grid,ae=0;ae<f.length;ae++){for(var le=f[ae],de=[1/0,1/0,-1/0,-1/0],Ae=0;Ae<le.length;Ae++){var Se=le[Ae];de[0]=Math.min(de[0],Se.x),de[1]=Math.min(de[1],Se.y),de[2]=Math.max(de[2],Se.x),de[3]=Math.max(de[3],Se.y)}de[0]<8192&&de[1]<8192&&de[2]>=0&&de[3]>=0&&Z.insert(z,de[0],de[1],de[2],de[3])}},Gh.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Vv.VectorTile(new _b(this.rawTileData)).layers,this.sourceLayerCoder=new Ib(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Gh.prototype.query=function(l,f,d,T){var P=this;this.loadVTLayers();for(var L=l.params||{},z=8192/l.tileSize/l.scale,Z=ic(L.filter),ae=l.queryGeometry,le=l.queryPadding*z,de=ZD(ae),Ae=this.grid.query(de.minX-le,de.minY-le,de.maxX+le,de.maxY+le),Se=ZD(l.cameraQueryGeometry),ke=this.grid3D.query(Se.minX-le,Se.minY-le,Se.maxX+le,Se.maxY+le,function(Wt,Zt,or,Ar){return function(Rr,bn,qr,Rn,Yr){for(var _i=0,Xn=Rr;_i<Xn.length;_i+=1){var dn=Xn[_i];if(bn<=dn.x&&qr<=dn.y&&Rn>=dn.x&&Yr>=dn.y)return!0}var Mi=[new u(bn,qr),new u(bn,Yr),new u(Rn,Yr),new u(Rn,qr)];if(Rr.length>2){for(var hi=0,Hi=Mi;hi<Hi.length;hi+=1)if(xl(Rr,Hi[hi]))return!0}for(var kn=0;kn<Rr.length-1;kn++)if(Ic(Rr[kn],Rr[kn+1],Mi))return!0;return!1}(l.cameraQueryGeometry,Wt-le,Zt-le,or+le,Ar+le)}),Ye=0,$e=ke;Ye<$e.length;Ye+=1)Ae.push($e[Ye]);Ae.sort(Nae);for(var mt,nt={},Et=function(Wt){var Zt=Ae[Wt];if(Zt!==mt){mt=Zt;var or=P.featureIndexArray.get(Zt),Ar=null;P.loadMatchingFeature(nt,or.bucketIndex,or.sourceLayerIndex,or.featureIndex,Z,L.layers,L.availableImages,f,d,T,function(Rr,bn,qr){return Ar||(Ar=ro(Rr)),bn.queryIntersectsFeature(ae,Rr,qr,Ar,P.z,l.transform,z,l.pixelPosMatrix)})}},Bt=0;Bt<Ae.length;Bt++)Et(Bt);return nt},Gh.prototype.loadMatchingFeature=function(l,f,d,T,P,L,z,Z,ae,le,de){var Ae=this.bucketLayerIDs[f];if(!L||function(Rr,bn){for(var qr=0;qr<Rr.length;qr++)if(bn.indexOf(Rr[qr])>=0)return!0;return!1}(L,Ae)){var Se=this.sourceLayerCoder.decode(d),ke=this.vtLayers[Se].feature(T);if(P.needGeometry){var Ye=To(ke,!0);if(!P.filter(new Si(this.tileID.overscaledZ),Ye,this.tileID.canonical))return}else if(!P.filter(new Si(this.tileID.overscaledZ),ke))return;for(var $e=this.getId(ke,Se),mt=0;mt<Ae.length;mt++){var nt=Ae[mt];if(!(L&&L.indexOf(nt)<0)){var Et=Z[nt];if(Et){var Bt={};$e!==void 0&&le&&(Bt=le.getState(Et.sourceLayer||"_geojsonTileLayer",$e));var Wt=D({},ae[nt]);Wt.paint=KD(Wt.paint,Et.paint,ke,Bt,z),Wt.layout=KD(Wt.layout,Et.layout,ke,Bt,z);var Zt=!de||de(ke,Et,Bt);if(Zt){var or=new Rb(ke,this.z,this.x,this.y,$e);or.layer=Wt;var Ar=l[nt];Ar===void 0&&(Ar=l[nt]=[]),Ar.push({featureIndex:T,feature:or,intersectionZ:Zt})}}}}}},Gh.prototype.lookupSymbolFeatures=function(l,f,d,T,P,L,z,Z){var ae={};this.loadVTLayers();for(var le=ic(P),de=0,Ae=l;de<Ae.length;de+=1)this.loadMatchingFeature(ae,d,T,Ae[de],le,L,z,Z,f);return ae},Gh.prototype.hasLayer=function(l){for(var f=0,d=this.bucketLayerIDs;f<d.length;f+=1)for(var T=0,P=d[f];T<P.length;T+=1)if(l===P[T])return!0;return!1},Gh.prototype.getId=function(l,f){var d=l.id;return this.promoteId&&typeof(d=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[f]])=="boolean"&&(d=Number(d)),d},ir("FeatureIndex",Gh,{omit:["rawTileData","sourceLayerCoder"]});var ks=function(l,f){this.tileID=l,this.uid=W(),this.uses=0,this.tileSize=f,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ks.prototype.registerFadeDuration=function(l){var f=l+this.timeAdded;f<he.now()||this.fadeEndTime&&f<this.fadeEndTime||(this.fadeEndTime=f)},ks.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ks.prototype.loadVectorData=function(l,f,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){for(var T in l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(le,de){var Ae={};if(!de)return Ae;for(var Se=function(){var $e=Ye[ke],mt=$e.layerIds.map(function(Bt){return de.getLayer(Bt)}).filter(Boolean);if(mt.length!==0){$e.layers=mt,$e.stateDependentLayerIds&&($e.stateDependentLayers=$e.stateDependentLayerIds.map(function(Bt){return mt.filter(function(Wt){return Wt.id===Bt})[0]}));for(var nt=0,Et=mt;nt<Et.length;nt+=1)Ae[Et[nt].id]=$e}},ke=0,Ye=le;ke<Ye.length;ke+=1)Se();return Ae}(l.buckets,f.style),this.hasSymbolBuckets=!1,this.buckets){var P=this.buckets[T];if(P instanceof Ta){if(this.hasSymbolBuckets=!0,!d)break;P.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var L in this.buckets){var z=this.buckets[L];if(z instanceof Ta&&z.hasRTLText){this.hasRTLText=!0,Wu.isLoading()||Wu.isLoaded()||Qd()!=="deferred"||yl();break}}for(var Z in this.queryPadding=0,this.buckets){var ae=this.buckets[Z];this.queryPadding=Math.max(this.queryPadding,f.style.getLayer(Z).queryRadius(ae))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new A},ks.prototype.unloadVectorData=function(){for(var l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ks.prototype.getBucket=function(l){return this.buckets[l.id]},ks.prototype.upload=function(l){for(var f in this.buckets){var d=this.buckets[f];d.uploadPending()&&d.upload(l)}var T=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new nm(l,this.imageAtlas.image,T.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new nm(l,this.glyphAtlasImage,T.ALPHA),this.glyphAtlasImage=null)},ks.prototype.prepare=function(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)},ks.prototype.queryRenderedFeatures=function(l,f,d,T,P,L,z,Z,ae,le){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:T,cameraQueryGeometry:P,scale:L,tileSize:this.tileSize,pixelPosMatrix:le,transform:Z,params:z,queryPadding:this.queryPadding*ae},l,f,d):{}},ks.prototype.querySourceFeatures=function(l,f){var d=this.latestFeatureIndex;if(d&&d.rawTileData){var T=d.loadVTLayers(),P=f?f.sourceLayer:"",L=T._geojsonTileLayer||T[P];if(L)for(var z=ic(f&&f.filter),Z=this.tileID.canonical,ae=Z.z,le=Z.x,de=Z.y,Ae={z:ae,x:le,y:de},Se=0;Se<L.length;Se++){var ke=L.feature(Se);if(z.needGeometry){var Ye=To(ke,!0);if(!z.filter(new Si(this.tileID.overscaledZ),Ye,this.tileID.canonical))continue}else if(!z.filter(new Si(this.tileID.overscaledZ),ke))continue;var $e=d.getId(ke,P),mt=new Rb(ke,ae,le,de,$e);mt.tile=Ae,l.push(mt)}}},ks.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ks.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ks.prototype.setExpiryData=function(l){var f=this.expirationTime;if(l.cacheControl){var d=je(l.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){var T=Date.now(),P=!1;if(this.expirationTime>T)P=!1;else if(f)if(this.expirationTime<f)P=!0;else{var L=this.expirationTime-f;L?this.expirationTime=T+Math.max(L,3e4):P=!0}else P=!0;P?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ks.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ks.prototype.setFeatureState=function(l,f){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(l).length!==0){var d=this.latestFeatureIndex.loadVTLayers();for(var T in this.buckets)if(f.style.hasLayer(T)){var P=this.buckets[T],L=P.layers[0].sourceLayer||"_geojsonTileLayer",z=d[L],Z=l[L];if(z&&Z&&Object.keys(Z).length!==0){P.update(Z,z,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ae=f&&f.style&&f.style.getLayer(T);ae&&(this.queryPadding=Math.max(this.queryPadding,ae.queryRadius(P)))}}}},ks.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ks.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<he.now()},ks.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ks.prototype.setHoldDuration=function(l){this.symbolFadeHoldUntil=he.now()+l},ks.prototype.setDependencies=function(l,f){for(var d={},T=0,P=f;T<P.length;T+=1)d[P[T]]=!0;this.dependencies[l]=d},ks.prototype.hasDependency=function(l,f){for(var d=0,T=l;d<T.length;d+=1){var P=this.dependencies[T[d]];if(P){for(var L=0,z=f;L<z.length;L+=1)if(P[z[L]])return!0}}return!1};var Hp=h.performance,$D=function(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},Hp.mark(this._marks.start)};$D.prototype.finish=function(){Hp.mark(this._marks.end);var l=Hp.getEntriesByName(this._marks.measure);return l.length===0&&(Hp.measure(this._marks.measure,this._marks.start,this._marks.end),l=Hp.getEntriesByName(this._marks.measure),Hp.clearMarks(this._marks.start),Hp.clearMarks(this._marks.end),Hp.clearMeasures(this._marks.measure)),l},i.Actor=Jv,i.AlphaImage=Ft,i.CanonicalTileID=am,i.CollisionBoxArray=A,i.Color=$n,i.DEMData=jh,i.DataConstantProperty=wn,i.DictionaryCoder=Ib,i.EXTENT=8192,i.ErrorEvent=pt,i.EvaluationParameters=Si,i.Event=Ie,i.Evented=At,i.FeatureIndex=Gh,i.FillBucket=ff,i.FillExtrusionBucket=hf,i.ImageAtlas=sy,i.ImagePosition=xb,i.LineBucket=Yu,i.LngLat=ao,i.LngLatBounds=as,i.MercatorCoordinate=im,i.ONE_EM=24,i.OverscaledTileID=os,i.Point=u,i.Point$1=u,i.Properties=ts,i.Protobuf=_b,i.RGBAImage=tr,i.RequestManager=an,i.RequestPerformance=$D,i.ResourceType=fo,i.SegmentVector=Fe,i.SourceFeatureState=Qv,i.StructArrayLayout1ui2=rm,i.StructArrayLayout2f1f2i16=uc,i.StructArrayLayout2i4=uf,i.StructArrayLayout3ui6=wu,i.StructArrayLayout4i8=tm,i.SymbolBucket=Ta,i.Texture=nm,i.Tile=ks,i.Transitionable=gs,i.Uniform1f=Sr,i.Uniform1i=pr,i.Uniform2f=Tr,i.Uniform3f=Xr,i.Uniform4f=Tn,i.UniformColor=Ln,i.UniformMatrix4f=zi,i.UnwrappedTileID=YD,i.ValidationError=Qe,i.WritingMode=Ul,i.ZoomHistory=Xo,i.add=function(l,f,d){return l[0]=f[0]+d[0],l[1]=f[1]+d[1],l[2]=f[2]+d[2],l},i.addDynamicAttributes=VE,i.asyncAll=function(l,f,d){if(!l.length)return d(null,[]);var T=l.length,P=new Array(l.length),L=null;l.forEach(function(z,Z){f(z,function(ae,le){ae&&(L=ae),P[Z]=le,--T==0&&d(L,P)})})},i.bezier=v,i.bindAll=B,i.browser=he,i.cacheEntryPossiblyAdded=function(l){++Qs>Ua&&(l.getActor().send("enforceCacheSizeLimit",Li),Qs=0)},i.clamp=E,i.clearTileCache=function(l){var f=h.caches.delete("mapbox-tiles");l&&f.catch(l).then(function(){return l()})},i.clipLine=RD,i.clone=function(l){var f=new w(16);return f[0]=l[0],f[1]=l[1],f[2]=l[2],f[3]=l[3],f[4]=l[4],f[5]=l[5],f[6]=l[6],f[7]=l[7],f[8]=l[8],f[9]=l[9],f[10]=l[10],f[11]=l[11],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15],f},i.clone$1=I,i.clone$2=function(l){var f=new w(3);return f[0]=l[0],f[1]=l[1],f[2]=l[2],f},i.collisionCircleLayout=iae,i.config=xe,i.create=function(){var l=new w(16);return w!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},i.create$1=function(){var l=new w(9);return w!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l},i.create$2=function(){var l=new w(4);return w!=Float32Array&&(l[1]=0,l[2]=0),l[0]=1,l[3]=1,l},i.createCommonjsModule=a,i.createExpression=Nr,i.createLayout=rs,i.createStyleLayer=function(l){return l.type==="custom"?new Dae(l):new Fae[l.type](l)},i.cross=function(l,f,d){var T=f[0],P=f[1],L=f[2],z=d[0],Z=d[1],ae=d[2];return l[0]=P*ae-L*Z,l[1]=L*z-T*ae,l[2]=T*Z-P*z,l},i.deepEqual=function l(f,d){if(Array.isArray(f)){if(!Array.isArray(d)||f.length!==d.length)return!1;for(var T=0;T<f.length;T++)if(!l(f[T],d[T]))return!1;return!0}if(typeof f=="object"&&f!==null&&d!==null){if(typeof d!="object"||Object.keys(f).length!==Object.keys(d).length)return!1;for(var P in f)if(!l(f[P],d[P]))return!1;return!0}return f===d},i.dot=function(l,f){return l[0]*f[0]+l[1]*f[1]+l[2]*f[2]},i.dot$1=function(l,f){return l[0]*f[0]+l[1]*f[1]+l[2]*f[2]+l[3]*f[3]},i.ease=x,i.emitValidationErrors=kt,i.endsWith=se,i.enforceCacheSizeLimit=function(l){_a(),Di&&Di.then(function(f){f.keys().then(function(d){for(var T=0;T<d.length-l;T++)f.delete(d[T])})})},i.evaluateSizeForFeature=ED,i.evaluateSizeForZoom=CD,i.evaluateVariableOffset=BD,i.evented=of,i.extend=D,i.featureFilter=ic,i.filterObject=X,i.fromRotation=function(l,f){var d=Math.sin(f),T=Math.cos(f);return l[0]=T,l[1]=d,l[2]=0,l[3]=-d,l[4]=T,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},i.getAnchorAlignment=zE,i.getAnchorJustification=GE,i.getArrayBuffer=yu,i.getImage=Te,i.getJSON=function(l,f){return Au(D(l,{type:"json"}),f)},i.getRTLTextPluginStatus=Qd,i.getReferrer=gu,i.getVideo=function(l,f){var d,T,P=h.document.createElement("video");P.muted=!0,P.onloadstart=function(){f(null,P)};for(var L=0;L<l.length;L++){var z=h.document.createElement("source");d=l[L],T=void 0,(T=h.document.createElement("a")).href=d,(T.protocol!==h.document.location.protocol||T.host!==h.document.location.host)&&(P.crossOrigin="Anonymous"),z.src=l[L],P.appendChild(z)}return{cancel:function(){}}},i.identity=C,i.invert=function(l,f){var d=f[0],T=f[1],P=f[2],L=f[3],z=f[4],Z=f[5],ae=f[6],le=f[7],de=f[8],Ae=f[9],Se=f[10],ke=f[11],Ye=f[12],$e=f[13],mt=f[14],nt=f[15],Et=d*Z-T*z,Bt=d*ae-P*z,Wt=d*le-L*z,Zt=T*ae-P*Z,or=T*le-L*Z,Ar=P*le-L*ae,Rr=de*$e-Ae*Ye,bn=de*mt-Se*Ye,qr=de*nt-ke*Ye,Rn=Ae*mt-Se*$e,Yr=Ae*nt-ke*$e,_i=Se*nt-ke*mt,Xn=Et*_i-Bt*Yr+Wt*Rn+Zt*qr-or*bn+Ar*Rr;return Xn?(l[0]=(Z*_i-ae*Yr+le*Rn)*(Xn=1/Xn),l[1]=(P*Yr-T*_i-L*Rn)*Xn,l[2]=($e*Ar-mt*or+nt*Zt)*Xn,l[3]=(Se*or-Ae*Ar-ke*Zt)*Xn,l[4]=(ae*qr-z*_i-le*bn)*Xn,l[5]=(d*_i-P*qr+L*bn)*Xn,l[6]=(mt*Wt-Ye*Ar-nt*Bt)*Xn,l[7]=(de*Ar-Se*Wt+ke*Bt)*Xn,l[8]=(z*Yr-Z*qr+le*Rr)*Xn,l[9]=(T*qr-d*Yr-L*Rr)*Xn,l[10]=(Ye*or-$e*Wt+nt*Et)*Xn,l[11]=(Ae*Wt-de*or-ke*Et)*Xn,l[12]=(Z*bn-z*Rn-ae*Rr)*Xn,l[13]=(d*Rn-T*bn+P*Rr)*Xn,l[14]=($e*Bt-Ye*Zt-mt*Et)*Xn,l[15]=(de*Zt-Ae*Bt+Se*Et)*Xn,l):null},i.isChar=gr,i.isMapboxURL=Fn,i.keysDifference=function(l,f){var d=[];for(var T in l)T in f||d.push(T);return d},i.makeRequest=Au,i.mapObject=V,i.mercatorXfromLng=WD,i.mercatorYfromLat=qD,i.mercatorZfromAltitude=XD,i.mul=G,i.multiply=M,i.mvt=Vv,i.nextPowerOfTwo=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},i.normalize=function(l,f){var d=f[0],T=f[1],P=f[2],L=d*d+T*T+P*P;return L>0&&(L=1/Math.sqrt(L)),l[0]=f[0]*L,l[1]=f[1]*L,l[2]=f[2]*L,l},i.number=$i,i.offscreenCanvasSupported=co,i.ortho=function(l,f,d,T,P,L,z){var Z=1/(f-d),ae=1/(T-P),le=1/(L-z);return l[0]=-2*Z,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*ae,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*le,l[11]=0,l[12]=(f+d)*Z,l[13]=(P+T)*ae,l[14]=(z+L)*le,l[15]=1,l},i.parseGlyphPBF=function(l){return new _b(l).readFields(mae,[])},i.pbf=_b,i.performSymbolLayout=function(l,f,d,T,P,L,z){l.createArrays(),l.tilePixelRatio=8192/(512*l.overscaling),l.compareText={},l.iconsNeedLinear=!1;var Z=l.layers[0].layout,ae=l.layers[0]._unevaluatedLayout._values,le={};if(l.textSizeData.kind==="composite"){var de=l.textSizeData,Ae=de.maxZoom;le.compositeTextSizes=[ae["text-size"].possiblyEvaluate(new Si(de.minZoom),z),ae["text-size"].possiblyEvaluate(new Si(Ae),z)]}if(l.iconSizeData.kind==="composite"){var Se=l.iconSizeData,ke=Se.maxZoom;le.compositeIconSizes=[ae["icon-size"].possiblyEvaluate(new Si(Se.minZoom),z),ae["icon-size"].possiblyEvaluate(new Si(ke),z)]}le.layoutTextSize=ae["text-size"].possiblyEvaluate(new Si(l.zoom+1),z),le.layoutIconSize=ae["icon-size"].possiblyEvaluate(new Si(l.zoom+1),z),le.textMaxSize=ae["text-size"].possiblyEvaluate(new Si(18));for(var Ye=24*Z.get("text-line-height"),$e=Z.get("text-rotation-alignment")==="map"&&Z.get("symbol-placement")!=="point",mt=Z.get("text-keep-upright"),nt=Z.get("text-size"),Et=function(){var Zt=Wt[Bt],or=Z.get("text-font").evaluate(Zt,{},z).join(","),Ar=nt.evaluate(Zt,{},z),Rr=le.layoutTextSize.evaluate(Zt,{},z),bn=le.layoutIconSize.evaluate(Zt,{},z),qr={horizontal:{},vertical:void 0},Rn=Zt.text,Yr=[0,0];if(Rn){var _i=Rn.toString(),Xn=24*Z.get("text-letter-spacing").evaluate(Zt,{},z),dn=function(Fi){for(var Ia=0,ga=Fi;Ia<ga.length;Ia+=1)if(qi=ga[Ia].charCodeAt(0),gr.Arabic(qi)||gr["Arabic Supplement"](qi)||gr["Arabic Extended-A"](qi)||gr["Arabic Presentation Forms-A"](qi)||gr["Arabic Presentation Forms-B"](qi))return!1;var qi;return!0}(_i)?Xn:0,Mi=Z.get("text-anchor").evaluate(Zt,{},z),hi=Z.get("text-variable-anchor");if(!hi){var Hi=Z.get("text-radial-offset").evaluate(Zt,{},z);Yr=Hi?BD(Mi,[24*Hi,jE]):Z.get("text-offset").evaluate(Zt,{},z).map(function(Fi){return 24*Fi})}var kn=$e?"center":Z.get("text-justify").evaluate(Zt,{},z),Ji=Z.get("symbol-placement"),oo=Ji==="point"?24*Z.get("text-max-width").evaluate(Zt,{},z):0,Mo=function(){l.allowVerticalPlacement&&da(_i)&&(qr.vertical=wb(Rn,f,d,P,or,oo,Ye,Mi,"left",dn,Yr,Ul.vertical,!0,Ji,Rr,Ar))};if(!$e&&hi){for(var So=kn==="auto"?hi.map(function(Fi){return GE(Fi)}):[kn],so=!1,Io=0;Io<So.length;Io++){var As=So[Io];if(!qr.horizontal[As])if(so)qr.horizontal[As]=qr.horizontal[0];else{var ys=wb(Rn,f,d,P,or,oo,Ye,"center",As,dn,Yr,Ul.horizontal,!1,Ji,Rr,Ar);ys&&(qr.horizontal[As]=ys,so=ys.positionedLines.length===1)}}Mo()}else{kn==="auto"&&(kn=GE(Mi));var Eu=wb(Rn,f,d,P,or,oo,Ye,Mi,kn,dn,Yr,Ul.horizontal,!1,Ji,Rr,Ar);Eu&&(qr.horizontal[kn]=Eu),Mo(),da(_i)&&$e&&mt&&(qr.vertical=wb(Rn,f,d,P,or,oo,Ye,Mi,kn,dn,Yr,Ul.vertical,!1,Ji,Rr,Ar))}}var Bs=void 0,Cu=!1;if(Zt.icon&&Zt.icon.name){var Fo=T[Zt.icon.name];Fo&&(Bs=function(Fi,Ia,ga){var qi=zE(ga),Ku=Ia[0]-Fi.displaySize[0]*qi.horizontalAlign,uu=Ia[1]-Fi.displaySize[1]*qi.verticalAlign;return{image:Fi,top:uu,bottom:uu+Fi.displaySize[1],left:Ku,right:Ku+Fi.displaySize[0]}}(P[Zt.icon.name],Z.get("icon-offset").evaluate(Zt,{},z),Z.get("icon-anchor").evaluate(Zt,{},z)),Cu=Fo.sdf,l.sdfIcons===void 0?l.sdfIcons=Fo.sdf:l.sdfIcons!==Fo.sdf&&U("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Fo.pixelRatio!==l.pixelRatio||Z.get("icon-rotate").constantOr(1)!==0)&&(l.iconsNeedLinear=!0))}var Ds=FD(qr.horizontal)||qr.vertical;l.iconsInText=!!Ds&&Ds.iconsInText,(Ds||Bs)&&function(Fi,Ia,ga,qi,Ku,uu,Qa,Yo,lu,Qi,Gf){var jl=uu.textMaxSize.evaluate(Ia,{});jl===void 0&&(jl=Qa);var Vf,No=Fi.layers[0].layout,Hf=No.get("icon-offset").evaluate(Ia,{},Gf),Rc=FD(ga.horizontal),eg=Qa/24,om=Fi.tilePixelRatio*eg,tg=Fi.tilePixelRatio*jl/24,Vh=Fi.tilePixelRatio*Yo,rg=Fi.tilePixelRatio*No.get("symbol-spacing"),Lb=No.get("text-padding")*Fi.tilePixelRatio,ng=No.get("icon-padding")*Fi.tilePixelRatio,cy=No.get("text-max-angle")/180*Math.PI,kb=No.get("text-rotation-alignment")==="map"&&No.get("symbol-placement")!=="point",Bb=No.get("icon-rotation-alignment")==="map"&&No.get("symbol-placement")!=="point",Hh=No.get("symbol-placement"),fy=rg/2,ig=No.get("icon-text-fit");qi&&ig!=="none"&&(Fi.allowVerticalPlacement&&ga.vertical&&(Vf=SD(qi,ga.vertical,ig,No.get("icon-text-fit-padding"),Hf,eg)),Rc&&(qi=SD(qi,Rc,ig,No.get("icon-text-fit-padding"),Hf,eg)));var Wp=function(zae,yy){yy.x<0||yy.x>=8192||yy.y<0||yy.y>=8192||function(zo,pf,Uae,qp,$E,eF,jb,Wf,Gb,_y,Vb,Hb,JE,tF,by,rF,nF,iF,aF,oF,Gl,Wb,sF,qf,jae){var uF,um,lg,cg,fg,hg=zo.addToLineVertexArray(pf,Uae),lF=0,cF=0,fF=0,hF=0,QE=-1,eC=-1,Wh={},pF=Xe(""),tC=0,rC=0;if(Wf._unevaluatedLayout.getValue("text-radial-offset")===void 0?(tC=(uF=Wf.layout.get("text-offset").evaluate(Gl,{},qf).map(function(wy){return 24*wy}))[0],rC=uF[1]):(tC=24*Wf.layout.get("text-radial-offset").evaluate(Gl,{},qf),rC=jE),zo.allowVerticalPlacement&&qp.vertical){var dF=Wf.layout.get("text-rotate").evaluate(Gl,{},qf)+90;cg=new Pb(Gb,pf,_y,Vb,Hb,qp.vertical,JE,tF,by,dF),jb&&(fg=new Pb(Gb,pf,_y,Vb,Hb,jb,nF,iF,by,dF))}if($E){var nC=Wf.layout.get("icon-rotate").evaluate(Gl,{}),mF=Wf.layout.get("icon-text-fit")!=="none",vF=LD($E,nC,sF,mF),iC=jb?LD(jb,nC,sF,mF):void 0;lg=new Pb(Gb,pf,_y,Vb,Hb,$E,nF,iF,!1,nC),lF=4*vF.length;var gF=zo.iconSizeData,xy=null;gF.kind==="source"?(xy=[128*Wf.layout.get("icon-size").evaluate(Gl,{})])[0]>32640&&U(zo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):gF.kind==="composite"&&((xy=[128*Wb.compositeIconSizes[0].evaluate(Gl,{},qf),128*Wb.compositeIconSizes[1].evaluate(Gl,{},qf)])[0]>32640||xy[1]>32640)&&U(zo.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),zo.addSymbols(zo.icon,vF,xy,oF,aF,Gl,!1,pf,hg.lineStartIndex,hg.lineLength,-1,qf),QE=zo.icon.placedSymbolArray.length-1,iC&&(cF=4*iC.length,zo.addSymbols(zo.icon,iC,xy,oF,aF,Gl,Ul.vertical,pf,hg.lineStartIndex,hg.lineLength,-1,qf),eC=zo.icon.placedSymbolArray.length-1)}for(var AF in qp.horizontal){var qb=qp.horizontal[AF];if(!um){pF=Xe(qb.text);var Gae=Wf.layout.get("text-rotate").evaluate(Gl,{},qf);um=new Pb(Gb,pf,_y,Vb,Hb,qb,JE,tF,by,Gae)}var yF=qb.positionedLines.length===1;if(fF+=DD(zo,pf,qb,eF,Wf,by,Gl,rF,hg,qp.vertical?Ul.horizontal:Ul.horizontalOnly,yF?Object.keys(qp.horizontal):[AF],Wh,QE,Wb,qf),yF)break}qp.vertical&&(hF+=DD(zo,pf,qp.vertical,eF,Wf,by,Gl,rF,hg,Ul.vertical,["vertical"],Wh,eC,Wb,qf));var Vae=um?um.boxStartIndex:zo.collisionBoxArray.length,Hae=um?um.boxEndIndex:zo.collisionBoxArray.length,Wae=cg?cg.boxStartIndex:zo.collisionBoxArray.length,qae=cg?cg.boxEndIndex:zo.collisionBoxArray.length,Xae=lg?lg.boxStartIndex:zo.collisionBoxArray.length,Yae=lg?lg.boxEndIndex:zo.collisionBoxArray.length,Kae=fg?fg.boxStartIndex:zo.collisionBoxArray.length,Zae=fg?fg.boxEndIndex:zo.collisionBoxArray.length,Xf=-1,Xb=function(wy,bF){return wy&&wy.circleDiameter?Math.max(wy.circleDiameter,bF):bF};Xf=Xb(um,Xf),Xf=Xb(cg,Xf),Xf=Xb(lg,Xf);var _F=(Xf=Xb(fg,Xf))>-1?1:0;_F&&(Xf*=jae/24),zo.glyphOffsetArray.length>=Ta.MAX_GLYPHS&&U("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Gl.sortKey!==void 0&&zo.addToSortKeyRanges(zo.symbolInstances.length,Gl.sortKey),zo.symbolInstances.emplaceBack(pf.x,pf.y,Wh.right>=0?Wh.right:-1,Wh.center>=0?Wh.center:-1,Wh.left>=0?Wh.left:-1,Wh.vertical||-1,QE,eC,pF,Vae,Hae,Wae,qae,Xae,Yae,Kae,Zae,_y,fF,hF,lF,cF,_F,0,JE,tC,rC,Xf)}(Fi,yy,zae,ga,qi,Ku,Vf,Fi.layers[0],Fi.collisionBoxArray,Ia.index,Ia.sourceLayerIndex,Fi.index,om,Lb,kb,lu,Vh,ng,Bb,Hf,Ia,uu,Qi,Gf,Qa)};if(Hh==="line")for(var ag=0,Db=RD(Ia.geometry,0,0,8192,8192);ag<Db.length;ag+=1)for(var Fb=Db[ag],hy=0,py=xae(Fb,rg,cy,ga.vertical||Rc,qi,24,tg,Fi.overscaling,8192);hy<py.length;hy+=1){var Nb=py[hy];Rc&&Eae(Fi,Rc.text,fy,Nb)||Wp(Fb,Nb)}else if(Hh==="line-center")for(var dy=0,my=Ia.geometry;dy<my.length;dy+=1){var vy=my[dy];if(vy.length>1){var zb=bae(vy,cy,ga.vertical||Rc,qi,24,tg);zb&&Wp(vy,zb)}}else if(Ia.type==="Polygon")for(var og=0,Ub=kE(Ia.geometry,0);og<Ub.length;og+=1){var sg=Ub[og],gy=Tae(sg,16);Wp(sg[0],new Xv(gy.x,gy.y,0))}else if(Ia.type==="LineString")for(var sm=0,Ay=Ia.geometry;sm<Ay.length;sm+=1){var ug=Ay[sm];Wp(ug,new Xv(ug[0].x,ug[0].y,0))}else if(Ia.type==="Point")for(var YE=0,JD=Ia.geometry;YE<JD.length;YE+=1)for(var KE=0,QD=JD[YE];KE<QD.length;KE+=1){var ZE=QD[KE];Wp([ZE],new Xv(ZE.x,ZE.y,0))}}(l,Zt,qr,Bs,T,le,Rr,bn,Yr,Cu,z)},Bt=0,Wt=l.features;Bt<Wt.length;Bt+=1)Et();L&&l.generateCollisionDebugBuffers()},i.perspective=function(l,f,d,T,P){var L,z=1/Math.tan(f/2);return l[0]=z/d,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=z,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,P!=null&&P!==1/0?(l[10]=(P+T)*(L=1/(T-P)),l[14]=2*P*T*L):(l[10]=-1,l[14]=-2*T),l},i.pick=function(l,f){for(var d={},T=0;T<f.length;T++){var P=f[T];P in l&&(d[P]=l[P])}return d},i.plugin=Wu,i.polygonIntersectsPolygon=ci,i.postMapLoadEvent=Gi,i.postTurnstileEvent=Jr,i.potpack=bD,i.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],i.register=ir,i.registerForPluginStateChange=function(l){return l({pluginStatus:au,pluginURL:Hu}),of.on("pluginStateChange",l),l},i.renderColorRamp=Vr,i.rotate=function(l,f,d){var T=f[0],P=f[1],L=f[2],z=f[3],Z=Math.sin(d),ae=Math.cos(d);return l[0]=T*ae+L*Z,l[1]=P*ae+z*Z,l[2]=T*-Z+L*ae,l[3]=P*-Z+z*ae,l},i.rotateX=function(l,f,d){var T=Math.sin(d),P=Math.cos(d),L=f[4],z=f[5],Z=f[6],ae=f[7],le=f[8],de=f[9],Ae=f[10],Se=f[11];return f!==l&&(l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3],l[12]=f[12],l[13]=f[13],l[14]=f[14],l[15]=f[15]),l[4]=L*P+le*T,l[5]=z*P+de*T,l[6]=Z*P+Ae*T,l[7]=ae*P+Se*T,l[8]=le*P-L*T,l[9]=de*P-z*T,l[10]=Ae*P-Z*T,l[11]=Se*P-ae*T,l},i.rotateZ=function(l,f,d){var T=Math.sin(d),P=Math.cos(d),L=f[0],z=f[1],Z=f[2],ae=f[3],le=f[4],de=f[5],Ae=f[6],Se=f[7];return f!==l&&(l[8]=f[8],l[9]=f[9],l[10]=f[10],l[11]=f[11],l[12]=f[12],l[13]=f[13],l[14]=f[14],l[15]=f[15]),l[0]=L*P+le*T,l[1]=z*P+de*T,l[2]=Z*P+Ae*T,l[3]=ae*P+Se*T,l[4]=le*P-L*T,l[5]=de*P-z*T,l[6]=Ae*P-Z*T,l[7]=Se*P-ae*T,l},i.scale=function(l,f,d){var T=d[0],P=d[1],L=d[2];return l[0]=f[0]*T,l[1]=f[1]*T,l[2]=f[2]*T,l[3]=f[3]*T,l[4]=f[4]*P,l[5]=f[5]*P,l[6]=f[6]*P,l[7]=f[7]*P,l[8]=f[8]*L,l[9]=f[9]*L,l[10]=f[10]*L,l[11]=f[11]*L,l[12]=f[12],l[13]=f[13],l[14]=f[14],l[15]=f[15],l},i.scale$1=function(l,f,d){return l[0]=f[0]*d,l[1]=f[1]*d,l[2]=f[2]*d,l[3]=f[3]*d,l},i.scale$2=function(l,f,d){return l[0]=f[0]*d,l[1]=f[1]*d,l[2]=f[2]*d,l},i.setCacheLimits=function(l,f){Li=l,Ua=f},i.setRTLTextPlugin=function(l,f,d){if(d===void 0&&(d=!1),au==="deferred"||au==="loading"||au==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Hu=he.resolveURL(l),au="deferred",Bh=f,Dh(),d||yl()},i.sphericalToCartesian=function(l){var f=l[0],d=l[1],T=l[2];return d+=90,d*=Math.PI/180,T*=Math.PI/180,{x:f*Math.cos(d)*Math.sin(T),y:f*Math.sin(d)*Math.sin(T),z:f*Math.cos(T)}},i.sqrLen=function(l){var f=l[0],d=l[1];return f*f+d*d},i.styleSpec=De,i.sub=function(l,f,d){return l[0]=f[0]-d[0],l[1]=f[1]-d[1],l[2]=f[2]-d[2],l},i.symbolSize=_ae,i.transformMat3=function(l,f,d){var T=f[0],P=f[1],L=f[2];return l[0]=T*d[0]+P*d[3]+L*d[6],l[1]=T*d[1]+P*d[4]+L*d[7],l[2]=T*d[2]+P*d[5]+L*d[8],l},i.transformMat4=j,i.translate=function(l,f,d){var T,P,L,z,Z,ae,le,de,Ae,Se,ke,Ye,$e=d[0],mt=d[1],nt=d[2];return f===l?(l[12]=f[0]*$e+f[4]*mt+f[8]*nt+f[12],l[13]=f[1]*$e+f[5]*mt+f[9]*nt+f[13],l[14]=f[2]*$e+f[6]*mt+f[10]*nt+f[14],l[15]=f[3]*$e+f[7]*mt+f[11]*nt+f[15]):(P=f[1],L=f[2],z=f[3],Z=f[4],ae=f[5],le=f[6],de=f[7],Ae=f[8],Se=f[9],ke=f[10],Ye=f[11],l[0]=T=f[0],l[1]=P,l[2]=L,l[3]=z,l[4]=Z,l[5]=ae,l[6]=le,l[7]=de,l[8]=Ae,l[9]=Se,l[10]=ke,l[11]=Ye,l[12]=T*$e+Z*mt+Ae*nt+f[12],l[13]=P*$e+ae*mt+Se*nt+f[13],l[14]=L*$e+le*mt+ke*nt+f[14],l[15]=z*$e+de*mt+Ye*nt+f[15]),l},i.triggerPluginCompletionEvent=af,i.uniqueId=W,i.validateCustomStyleLayer=function(l){var f=[],d=l.id;return d===void 0&&f.push({message:"layers."+d+': missing required property "id"'}),l.render===void 0&&f.push({message:"layers."+d+': missing required method "render"'}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&f.push({message:"layers."+d+': property "renderingMode" must be either "2d" or "3d"'}),f},i.validateLight=ht,i.validateStyle=Ue,i.values=function(l){var f=[];for(var d in l)f.push(l[d]);return f},i.vectorTile=Vv,i.version="1.13.2",i.warnOnce=U,i.webpSupported=Ge,i.window=h,i.wrap=R}),n(["./shared"],function(i){"use strict";function a(ge){var Te=typeof ge;if(Te==="number"||Te==="boolean"||Te==="string"||ge==null)return JSON.stringify(ge);if(Array.isArray(ge)){for(var Oe="[",ze=0,Ie=ge;ze<Ie.length;ze+=1)Oe+=a(Ie[ze])+",";return Oe+"]"}for(var pt=Object.keys(ge).sort(),At="{",De=0;De<pt.length;De++)At+=JSON.stringify(pt[De])+":"+a(ge[pt[De]])+",";return At+"}"}function o(ge){for(var Te="",Oe=0,ze=i.refProperties;Oe<ze.length;Oe+=1)Te+="/"+a(ge[ze[Oe]]);return Te}var s=function(ge){this.keyCache={},ge&&this.replace(ge)};s.prototype.replace=function(ge){this._layerConfigs={},this._layers={},this.update(ge,[])},s.prototype.update=function(ge,Te){for(var Oe=this,ze=0,Ie=ge;ze<Ie.length;ze+=1){var pt=Ie[ze];this._layerConfigs[pt.id]=pt;var At=this._layers[pt.id]=i.createStyleLayer(pt);At._featureFilter=i.featureFilter(At.filter),this.keyCache[pt.id]&&delete this.keyCache[pt.id]}for(var De=0,Qe=Te;De<Qe.length;De+=1){var It=Qe[De];delete this.keyCache[It],delete this._layerConfigs[It],delete this._layers[It]}this.familiesBySource={};for(var cr=0,dr=function(Er,_r){for(var Wn={},Cr=0;Cr<Er.length;Cr++){var Qn=_r&&_r[Er[Cr].id]||o(Er[Cr]);_r&&(_r[Er[Cr].id]=Qn);var Ci=Wn[Qn];Ci||(Ci=Wn[Qn]=[]),Ci.push(Er[Cr])}var ii=[];for(var bi in Wn)ii.push(Wn[bi]);return ii}(i.values(this._layerConfigs),this.keyCache);cr<dr.length;cr+=1){var $t=dr[cr].map(function(Er){return Oe._layers[Er.id]}),lr=$t[0];if(lr.visibility!=="none"){var Kr=lr.source||"",Dr=this.familiesBySource[Kr];Dr||(Dr=this.familiesBySource[Kr]={});var qt=lr.sourceLayer||"_geojsonTileLayer",Lr=Dr[qt];Lr||(Lr=Dr[qt]=[]),Lr.push($t)}}};var u=function(ge){var Te={},Oe=[];for(var ze in ge){var Ie=ge[ze],pt=Te[ze]={};for(var At in Ie){var De=Ie[+At];if(De&&De.bitmap.width!==0&&De.bitmap.height!==0){var Qe={x:0,y:0,w:De.bitmap.width+2,h:De.bitmap.height+2};Oe.push(Qe),pt[At]={rect:Qe,metrics:De.metrics}}}}var It=i.potpack(Oe),cr=new i.AlphaImage({width:It.w||1,height:It.h||1});for(var dr in ge){var $t=ge[dr];for(var lr in $t){var Kr=$t[+lr];if(Kr&&Kr.bitmap.width!==0&&Kr.bitmap.height!==0){var Dr=Te[dr][lr].rect;i.AlphaImage.copy(Kr.bitmap,cr,{x:0,y:0},{x:Dr.x+1,y:Dr.y+1},Kr.bitmap)}}}this.image=cr,this.positions=Te};i.register("GlyphAtlas",u);var c=function(ge){this.tileID=new i.OverscaledTileID(ge.tileID.overscaledZ,ge.tileID.wrap,ge.tileID.canonical.z,ge.tileID.canonical.x,ge.tileID.canonical.y),this.uid=ge.uid,this.zoom=ge.zoom,this.pixelRatio=ge.pixelRatio,this.tileSize=ge.tileSize,this.source=ge.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ge.showCollisionBoxes,this.collectResourceTiming=!!ge.collectResourceTiming,this.returnDependencies=!!ge.returnDependencies,this.promoteId=ge.promoteId};function h(ge,Te,Oe){for(var ze=new i.EvaluationParameters(Te),Ie=0,pt=ge;Ie<pt.length;Ie+=1)pt[Ie].recalculate(ze,Oe)}function p(ge,Te){var Oe=i.getArrayBuffer(ge.request,function(ze,Ie,pt,At){ze?Te(ze):Ie&&Te(null,{vectorTile:new i.vectorTile.VectorTile(new i.pbf(Ie)),rawData:Ie,cacheControl:pt,expires:At})});return function(){Oe.cancel(),Te()}}c.prototype.parse=function(ge,Te,Oe,ze,Ie){var pt=this;this.status="parsing",this.data=ge,this.collisionBoxArray=new i.CollisionBoxArray;var At=new i.DictionaryCoder(Object.keys(ge.layers).sort()),De=new i.FeatureIndex(this.tileID,this.promoteId);De.bucketLayerIDs=[];var Qe,It,cr,dr,$t={},lr={featureIndex:De,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Oe},Kr=Te.familiesBySource[this.source];for(var Dr in Kr){var qt=ge.layers[Dr];if(qt){qt.version===1&&i.warnOnce('Vector tile source "'+this.source+'" layer "'+Dr+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Lr=At.encode(Dr),Er=[],_r=0;_r<qt.length;_r++){var Wn=qt.feature(_r),Cr=De.getId(Wn,Dr);Er.push({feature:Wn,id:Cr,index:_r,sourceLayerIndex:Lr})}for(var Qn=0,Ci=Kr[Dr];Qn<Ci.length;Qn+=1){var ii=Ci[Qn],bi=ii[0];bi.minzoom&&this.zoom<Math.floor(bi.minzoom)||bi.maxzoom&&this.zoom>=bi.maxzoom||bi.visibility!=="none"&&(h(ii,this.zoom,Oe),($t[bi.id]=bi.createBucket({index:De.bucketLayerIDs.length,layers:ii,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Lr,sourceID:this.source})).populate(Er,lr,this.tileID.canonical),De.bucketLayerIDs.push(ii.map(function(gi){return gi.id})))}}}var Un=i.mapObject(lr.glyphDependencies,function(gi){return Object.keys(gi).map(Number)});Object.keys(Un).length?ze.send("getGlyphs",{uid:this.uid,stacks:Un},function(gi,Zn){Qe||(Qe=gi,It=Zn,Ki.call(pt))}):It={};var oa=Object.keys(lr.iconDependencies);oa.length?ze.send("getImages",{icons:oa,source:this.source,tileID:this.tileID,type:"icons"},function(gi,Zn){Qe||(Qe=gi,cr=Zn,Ki.call(pt))}):cr={};var xi=Object.keys(lr.patternDependencies);function Ki(){if(Qe)return Ie(Qe);if(It&&cr&&dr){var gi=new u(It),Zn=new i.ImageAtlas(cr,dr);for(var $n in $t){var ki=$t[$n];ki instanceof i.SymbolBucket?(h(ki.layers,this.zoom,Oe),i.performSymbolLayout(ki,It,gi.positions,cr,Zn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):ki.hasPattern&&(ki instanceof i.LineBucket||ki instanceof i.FillBucket||ki instanceof i.FillExtrusionBucket)&&(h(ki.layers,this.zoom,Oe),ki.addFeatures(lr,this.tileID.canonical,Zn.patternPositions))}this.status="done",Ie(null,{buckets:i.values($t).filter(function(Es){return!Es.isEmpty()}),featureIndex:De,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:gi.image,imageAtlas:Zn,glyphMap:this.returnDependencies?It:null,iconMap:this.returnDependencies?cr:null,glyphPositions:this.returnDependencies?gi.positions:null})}}xi.length?ze.send("getImages",{icons:xi,source:this.source,tileID:this.tileID,type:"patterns"},function(gi,Zn){Qe||(Qe=gi,dr=Zn,Ki.call(pt))}):dr={},Ki.call(this)};var v=function(ge,Te,Oe,ze){this.actor=ge,this.layerIndex=Te,this.availableImages=Oe,this.loadVectorData=ze||p,this.loading={},this.loaded={}};v.prototype.loadTile=function(ge,Te){var Oe=this,ze=ge.uid;this.loading||(this.loading={});var Ie=!!(ge&&ge.request&&ge.request.collectResourceTiming)&&new i.RequestPerformance(ge.request),pt=this.loading[ze]=new c(ge);pt.abort=this.loadVectorData(ge,function(At,De){if(delete Oe.loading[ze],At||!De)return pt.status="done",Oe.loaded[ze]=pt,Te(At);var Qe=De.rawData,It={};De.expires&&(It.expires=De.expires),De.cacheControl&&(It.cacheControl=De.cacheControl);var cr={};if(Ie){var dr=Ie.finish();dr&&(cr.resourceTiming=JSON.parse(JSON.stringify(dr)))}pt.vectorTile=De.vectorTile,pt.parse(De.vectorTile,Oe.layerIndex,Oe.availableImages,Oe.actor,function($t,lr){if($t||!lr)return Te($t);Te(null,i.extend({rawTileData:Qe.slice(0)},lr,It,cr))}),Oe.loaded=Oe.loaded||{},Oe.loaded[ze]=pt})},v.prototype.reloadTile=function(ge,Te){var Oe=this,ze=this.loaded,Ie=ge.uid,pt=this;if(ze&&ze[Ie]){var At=ze[Ie];At.showCollisionBoxes=ge.showCollisionBoxes;var De=function(Qe,It){var cr=At.reloadCallback;cr&&(delete At.reloadCallback,At.parse(At.vectorTile,pt.layerIndex,Oe.availableImages,pt.actor,cr)),Te(Qe,It)};At.status==="parsing"?At.reloadCallback=De:At.status==="done"&&(At.vectorTile?At.parse(At.vectorTile,this.layerIndex,this.availableImages,this.actor,De):De())}},v.prototype.abortTile=function(ge,Te){var Oe=this.loading,ze=ge.uid;Oe&&Oe[ze]&&Oe[ze].abort&&(Oe[ze].abort(),delete Oe[ze]),Te()},v.prototype.removeTile=function(ge,Te){var Oe=this.loaded,ze=ge.uid;Oe&&Oe[ze]&&delete Oe[ze],Te()};var x=i.window.ImageBitmap,E=function(){this.loaded={}};function R(ge,Te){if(ge.length!==0){D(ge[0],Te);for(var Oe=1;Oe<ge.length;Oe++)D(ge[Oe],!Te)}}function D(ge,Te){for(var Oe=0,ze=0,Ie=ge.length,pt=Ie-1;ze<Ie;pt=ze++)Oe+=(ge[ze][0]-ge[pt][0])*(ge[pt][1]+ge[ze][1]);Oe>=0!=!!Te&&ge.reverse()}E.prototype.loadTile=function(ge,Te){var Oe=ge.uid,ze=ge.encoding,Ie=ge.rawImageData,pt=x&&Ie instanceof x?this.getImageData(Ie):Ie,At=new i.DEMData(Oe,pt,ze);this.loaded=this.loaded||{},this.loaded[Oe]=At,Te(null,At)},E.prototype.getImageData=function(ge){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ge.width,ge.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ge.width,this.offscreenCanvas.height=ge.height,this.offscreenCanvasContext.drawImage(ge,0,0,ge.width,ge.height);var Te=this.offscreenCanvasContext.getImageData(-1,-1,ge.width+2,ge.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new i.RGBAImage({width:Te.width,height:Te.height},Te.data)},E.prototype.removeTile=function(ge){var Te=this.loaded,Oe=ge.uid;Te&&Te[Oe]&&delete Te[Oe]};var H=i.vectorTile.VectorTileFeature.prototype.toGeoJSON,W=function(ge){this._feature=ge,this.extent=i.EXTENT,this.type=ge.type,this.properties=ge.tags,"id"in ge&&!isNaN(ge.id)&&(this.id=parseInt(ge.id,10))};W.prototype.loadGeometry=function(){if(this._feature.type===1){for(var ge=[],Te=0,Oe=this._feature.geometry;Te<Oe.length;Te+=1){var ze=Oe[Te];ge.push([new i.Point$1(ze[0],ze[1])])}return ge}for(var Ie=[],pt=0,At=this._feature.geometry;pt<At.length;pt+=1){for(var De=[],Qe=0,It=At[pt];Qe<It.length;Qe+=1){var cr=It[Qe];De.push(new i.Point$1(cr[0],cr[1]))}Ie.push(De)}return Ie},W.prototype.toGeoJSON=function(ge,Te,Oe){return H.call(this,ge,Te,Oe)};var $=function(ge){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.EXTENT,this.length=ge.length,this._features=ge};$.prototype.feature=function(ge){return new W(this._features[ge])};var J=i.vectorTile.VectorTileFeature,B=se;function se(ge,Te){this.options=Te||{},this.features=ge,this.length=ge.length}function V(ge,Te){this.id=typeof ge.id=="number"?ge.id:void 0,this.type=ge.type,this.rawGeometry=ge.type===1?[ge.geometry]:ge.geometry,this.properties=ge.tags,this.extent=Te||4096}se.prototype.feature=function(ge){return new V(this.features[ge],this.options.extent)},V.prototype.loadGeometry=function(){var ge=this.rawGeometry;this.geometry=[];for(var Te=0;Te<ge.length;Te++){for(var Oe=ge[Te],ze=[],Ie=0;Ie<Oe.length;Ie++)ze.push(new i.Point$1(Oe[Ie][0],Oe[Ie][1]));this.geometry.push(ze)}return this.geometry},V.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ge=this.geometry,Te=1/0,Oe=-1/0,ze=1/0,Ie=-1/0,pt=0;pt<ge.length;pt++)for(var At=ge[pt],De=0;De<At.length;De++){var Qe=At[De];Te=Math.min(Te,Qe.x),Oe=Math.max(Oe,Qe.x),ze=Math.min(ze,Qe.y),Ie=Math.max(Ie,Qe.y)}return[Te,ze,Oe,Ie]},V.prototype.toGeoJSON=J.prototype.toGeoJSON;var X=O,I=B;function O(ge){var Te=new i.pbf;return function(Oe,ze){for(var Ie in Oe.layers)ze.writeMessage(3,U,Oe.layers[Ie])}(ge,Te),Te.finish()}function U(ge,Te){var Oe;Te.writeVarintField(15,ge.version||1),Te.writeStringField(1,ge.name||""),Te.writeVarintField(5,ge.extent||4096);var ze={keys:[],values:[],keycache:{},valuecache:{}};for(Oe=0;Oe<ge.length;Oe++)ze.feature=ge.feature(Oe),Te.writeMessage(2,re,ze);var Ie=ze.keys;for(Oe=0;Oe<Ie.length;Oe++)Te.writeStringField(3,Ie[Oe]);var pt=ze.values;for(Oe=0;Oe<pt.length;Oe++)Te.writeMessage(4,We,pt[Oe])}function re(ge,Te){var Oe=ge.feature;Oe.id!==void 0&&Te.writeVarintField(1,Oe.id),Te.writeMessage(2,ee,ge),Te.writeVarintField(3,Oe.type),Te.writeMessage(4,qe,Oe)}function ee(ge,Te){var Oe=ge.feature,ze=ge.keys,Ie=ge.values,pt=ge.keycache,At=ge.valuecache;for(var De in Oe.properties){var Qe=pt[De];Qe===void 0&&(ze.push(De),pt[De]=Qe=ze.length-1),Te.writeVarint(Qe);var It=Oe.properties[De],cr=typeof It;cr!=="string"&&cr!=="boolean"&&cr!=="number"&&(It=JSON.stringify(It));var dr=cr+":"+It,$t=At[dr];$t===void 0&&(Ie.push(It),At[dr]=$t=Ie.length-1),Te.writeVarint($t)}}function pe(ge,Te){return(Te<<3)+(7&ge)}function je(ge){return ge<<1^ge>>31}function qe(ge,Te){for(var Oe=ge.loadGeometry(),ze=ge.type,Ie=0,pt=0,At=Oe.length,De=0;De<At;De++){var Qe=Oe[De],It=1;ze===1&&(It=Qe.length),Te.writeVarint(pe(1,It));for(var cr=ze===3?Qe.length-1:Qe.length,dr=0;dr<cr;dr++){dr===1&&ze!==1&&Te.writeVarint(pe(2,cr-1));var $t=Qe[dr].x-Ie,lr=Qe[dr].y-pt;Te.writeVarint(je($t)),Te.writeVarint(je(lr)),Ie+=$t,pt+=lr}ze===3&&Te.writeVarint(pe(7,1))}}function We(ge,Te){var Oe=typeof ge;Oe==="string"?Te.writeStringField(1,ge):Oe==="boolean"?Te.writeBooleanField(7,ge):Oe==="number"&&(ge%1!=0?Te.writeDoubleField(3,ge):ge<0?Te.writeSVarintField(6,ge):Te.writeVarintField(5,ge))}function ot(ge,Te,Oe,ze){gt(ge,Oe,ze),gt(Te,2*Oe,2*ze),gt(Te,2*Oe+1,2*ze+1)}function gt(ge,Te,Oe){var ze=ge[Te];ge[Te]=ge[Oe],ge[Oe]=ze}function Pt(ge,Te,Oe,ze){var Ie=ge-Oe,pt=Te-ze;return Ie*Ie+pt*pt}X.fromVectorTileJs=O,X.fromGeojsonVt=function(ge,Te){Te=Te||{};var Oe={};for(var ze in ge)Oe[ze]=new B(ge[ze].features,Te),Oe[ze].name=ze,Oe[ze].version=Te.version,Oe[ze].extent=Te.extent;return O({layers:Oe})},X.GeoJSONWrapper=I;var Dt=function(ge){return ge[0]},nr=function(ge){return ge[1]},Nt=function(ge,Te,Oe,ze,Ie){Te===void 0&&(Te=Dt),Oe===void 0&&(Oe=nr),ze===void 0&&(ze=64),Ie===void 0&&(Ie=Float64Array),this.nodeSize=ze,this.points=ge;for(var pt=ge.length<65536?Uint16Array:Uint32Array,At=this.ids=new pt(ge.length),De=this.coords=new Ie(2*ge.length),Qe=0;Qe<ge.length;Qe++)At[Qe]=Qe,De[2*Qe]=Te(ge[Qe]),De[2*Qe+1]=Oe(ge[Qe]);(function It(cr,dr,$t,lr,Kr,Dr){if(!(Kr-lr<=$t)){var qt=lr+Kr>>1;(function Lr(Er,_r,Wn,Cr,Qn,Ci){for(;Qn>Cr;){if(Qn-Cr>600){var ii=Qn-Cr+1,bi=Wn-Cr+1,Un=Math.log(ii),oa=.5*Math.exp(2*Un/3),xi=.5*Math.sqrt(Un*oa*(ii-oa)/ii)*(bi-ii/2<0?-1:1);Lr(Er,_r,Wn,Math.max(Cr,Math.floor(Wn-bi*oa/ii+xi)),Math.min(Qn,Math.floor(Wn+(ii-bi)*oa/ii+xi)),Ci)}var Ki=_r[2*Wn+Ci],gi=Cr,Zn=Qn;for(ot(Er,_r,Cr,Wn),_r[2*Qn+Ci]>Ki&&ot(Er,_r,Cr,Qn);gi<Zn;){for(ot(Er,_r,gi,Zn),gi++,Zn--;_r[2*gi+Ci]<Ki;)gi++;for(;_r[2*Zn+Ci]>Ki;)Zn--}_r[2*Cr+Ci]===Ki?ot(Er,_r,Cr,Zn):ot(Er,_r,++Zn,Qn),Zn<=Wn&&(Cr=Zn+1),Wn<=Zn&&(Qn=Zn-1)}})(cr,dr,qt,lr,Kr,Dr%2),It(cr,dr,$t,lr,qt-1,Dr+1),It(cr,dr,$t,qt+1,Kr,Dr+1)}})(At,De,ze,0,At.length-1,0)};Nt.prototype.range=function(ge,Te,Oe,ze){return function(Ie,pt,At,De,Qe,It,cr){for(var dr,$t,lr=[0,Ie.length-1,0],Kr=[];lr.length;){var Dr=lr.pop(),qt=lr.pop(),Lr=lr.pop();if(qt-Lr<=cr)for(var Er=Lr;Er<=qt;Er++)$t=pt[2*Er+1],(dr=pt[2*Er])>=At&&dr<=Qe&&$t>=De&&$t<=It&&Kr.push(Ie[Er]);else{var _r=Math.floor((Lr+qt)/2);$t=pt[2*_r+1],(dr=pt[2*_r])>=At&&dr<=Qe&&$t>=De&&$t<=It&&Kr.push(Ie[_r]);var Wn=(Dr+1)%2;(Dr===0?At<=dr:De<=$t)&&(lr.push(Lr),lr.push(_r-1),lr.push(Wn)),(Dr===0?Qe>=dr:It>=$t)&&(lr.push(_r+1),lr.push(qt),lr.push(Wn))}}return Kr}(this.ids,this.coords,ge,Te,Oe,ze,this.nodeSize)},Nt.prototype.within=function(ge,Te,Oe){return function(ze,Ie,pt,At,De,Qe){for(var It=[0,ze.length-1,0],cr=[],dr=De*De;It.length;){var $t=It.pop(),lr=It.pop(),Kr=It.pop();if(lr-Kr<=Qe)for(var Dr=Kr;Dr<=lr;Dr++)Pt(Ie[2*Dr],Ie[2*Dr+1],pt,At)<=dr&&cr.push(ze[Dr]);else{var qt=Math.floor((Kr+lr)/2),Lr=Ie[2*qt],Er=Ie[2*qt+1];Pt(Lr,Er,pt,At)<=dr&&cr.push(ze[qt]);var _r=($t+1)%2;($t===0?pt-De<=Lr:At-De<=Er)&&(It.push(Kr),It.push(qt-1),It.push(_r)),($t===0?pt+De>=Lr:At+De>=Er)&&(It.push(qt+1),It.push(lr),It.push(_r))}}return cr}(this.ids,this.coords,ge,Te,Oe,this.nodeSize)};var Ut={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(ge){return ge}},Or=function(ge){this.options=tn(Object.create(Ut),ge),this.trees=new Array(this.options.maxZoom+1)};function he(ge,Te,Oe,ze,Ie){return{x:ge,y:Te,zoom:1/0,id:Oe,parentId:-1,numPoints:ze,properties:Ie}}function xe(ge,Te){var Oe=ge.geometry.coordinates,ze=Oe[1];return{x:Kt(Oe[0]),y:Gt(ze),zoom:1/0,index:Te,parentId:-1}}function Ge(ge){return{type:"Feature",id:ge.id,properties:bt(ge),geometry:{type:"Point",coordinates:[(ze=ge.x,360*(ze-.5)),(Te=ge.y,Oe=(180-360*Te)*Math.PI/180,360*Math.atan(Math.exp(Oe))/Math.PI-90)]}};var Te,Oe,ze}function bt(ge){var Te=ge.numPoints,Oe=Te>=1e4?Math.round(Te/1e3)+"k":Te>=1e3?Math.round(Te/100)/10+"k":Te;return tn(tn({},ge.properties),{cluster:!0,cluster_id:ge.id,point_count:Te,point_count_abbreviated:Oe})}function Kt(ge){return ge/360+.5}function Gt(ge){var Te=Math.sin(ge*Math.PI/180),Oe=.5-.25*Math.log((1+Te)/(1-Te))/Math.PI;return Oe<0?0:Oe>1?1:Oe}function tn(ge,Te){for(var Oe in Te)ge[Oe]=Te[Oe];return ge}function an(ge){return ge.x}function Fn(ge){return ge.y}function wr(ge,Te,Oe,ze,Ie,pt){var At=Ie-Oe,De=pt-ze;if(At!==0||De!==0){var Qe=((ge-Oe)*At+(Te-ze)*De)/(At*At+De*De);Qe>1?(Oe=Ie,ze=pt):Qe>0&&(Oe+=At*Qe,ze+=De*Qe)}return(At=ge-Oe)*At+(De=Te-ze)*De}function Nn(ge,Te,Oe,ze){var Ie={id:ge===void 0?null:ge,type:Te,geometry:Oe,tags:ze,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(pt){var At=pt.geometry,De=pt.type;if(De==="Point"||De==="MultiPoint"||De==="LineString")pi(pt,At);else if(De==="Polygon"||De==="MultiLineString")for(var Qe=0;Qe<At.length;Qe++)pi(pt,At[Qe]);else if(De==="MultiPolygon")for(Qe=0;Qe<At.length;Qe++)for(var It=0;It<At[Qe].length;It++)pi(pt,At[Qe][It])}(Ie),Ie}function pi(ge,Te){for(var Oe=0;Oe<Te.length;Oe+=3)ge.minX=Math.min(ge.minX,Te[Oe]),ge.minY=Math.min(ge.minY,Te[Oe+1]),ge.maxX=Math.max(ge.maxX,Te[Oe]),ge.maxY=Math.max(ge.maxY,Te[Oe+1])}function Ti(ge,Te,Oe,ze){if(Te.geometry){var Ie=Te.geometry.coordinates,pt=Te.geometry.type,At=Math.pow(Oe.tolerance/((1<<Oe.maxZoom)*Oe.extent),2),De=[],Qe=Te.id;if(Oe.promoteId?Qe=Te.properties[Oe.promoteId]:Oe.generateId&&(Qe=ze||0),pt==="Point")ka(Ie,De);else if(pt==="MultiPoint")for(var It=0;It<Ie.length;It++)ka(Ie[It],De);else if(pt==="LineString")si(Ie,De,At,!1);else if(pt==="MultiLineString"){if(Oe.lineMetrics){for(It=0;It<Ie.length;It++)si(Ie[It],De=[],At,!1),ge.push(Nn(Qe,"LineString",De,Te.properties));return}Hn(Ie,De,At,!1)}else if(pt==="Polygon")Hn(Ie,De,At,!0);else{if(pt!=="MultiPolygon"){if(pt==="GeometryCollection"){for(It=0;It<Te.geometry.geometries.length;It++)Ti(ge,{id:Qe,geometry:Te.geometry.geometries[It],properties:Te.properties},Oe,ze);return}throw new Error("Input data is not a valid GeoJSON object.")}for(It=0;It<Ie.length;It++){var cr=[];Hn(Ie[It],cr,At,!0),De.push(cr)}}ge.push(Nn(Qe,pt,De,Te.properties))}}function ka(ge,Te){Te.push(Di(ge[0])),Te.push(Yi(ge[1])),Te.push(0)}function si(ge,Te,Oe,ze){for(var Ie,pt,At=0,De=0;De<ge.length;De++){var Qe=Di(ge[De][0]),It=Yi(ge[De][1]);Te.push(Qe),Te.push(It),Te.push(0),De>0&&(At+=ze?(Ie*It-Qe*pt)/2:Math.sqrt(Math.pow(Qe-Ie,2)+Math.pow(It-pt,2))),Ie=Qe,pt=It}var cr=Te.length-3;Te[2]=1,function dr($t,lr,Kr,Dr){for(var qt,Lr=Dr,Er=Kr-lr>>1,_r=Kr-lr,Wn=$t[lr],Cr=$t[lr+1],Qn=$t[Kr],Ci=$t[Kr+1],ii=lr+3;ii<Kr;ii+=3){var bi=wr($t[ii],$t[ii+1],Wn,Cr,Qn,Ci);if(bi>Lr)qt=ii,Lr=bi;else if(bi===Lr){var Un=Math.abs(ii-Er);Un<_r&&(qt=ii,_r=Un)}}Lr>Dr&&(qt-lr>3&&dr($t,lr,qt,Dr),$t[qt+2]=Lr,Kr-qt>3&&dr($t,qt,Kr,Dr))}(Te,0,cr,Oe),Te[cr+2]=1,Te.size=Math.abs(At),Te.start=0,Te.end=Te.size}function Hn(ge,Te,Oe,ze){for(var Ie=0;Ie<ge.length;Ie++){var pt=[];si(ge[Ie],pt,Oe,ze),Te.push(pt)}}function Di(ge){return ge/360+.5}function Yi(ge){var Te=Math.sin(ge*Math.PI/180),Oe=.5-.25*Math.log((1+Te)/(1-Te))/Math.PI;return Oe<0?0:Oe>1?1:Oe}function di(ge,Te,Oe,ze,Ie,pt,At,De){if(ze/=Te,pt>=(Oe/=Te)&&At<ze)return ge;if(At<Oe||pt>=ze)return null;for(var Qe=[],It=0;It<ge.length;It++){var cr=ge[It],dr=cr.geometry,$t=cr.type,lr=Ie===0?cr.minX:cr.minY,Kr=Ie===0?cr.maxX:cr.maxY;if(lr>=Oe&&Kr<ze)Qe.push(cr);else if(!(Kr<Oe||lr>=ze)){var Dr=[];if($t==="Point"||$t==="MultiPoint")jr(dr,Dr,Oe,ze,Ie);else if($t==="LineString")Jr(dr,Dr,Oe,ze,Ie,!1,De.lineMetrics);else if($t==="MultiLineString")Gi(dr,Dr,Oe,ze,Ie,!1);else if($t==="Polygon")Gi(dr,Dr,Oe,ze,Ie,!0);else if($t==="MultiPolygon")for(var qt=0;qt<dr.length;qt++){var Lr=[];Gi(dr[qt],Lr,Oe,ze,Ie,!0),Lr.length&&Dr.push(Lr)}if(Dr.length){if(De.lineMetrics&&$t==="LineString"){for(qt=0;qt<Dr.length;qt++)Qe.push(Nn(cr.id,$t,Dr[qt],cr.tags));continue}$t!=="LineString"&&$t!=="MultiLineString"||(Dr.length===1?($t="LineString",Dr=Dr[0]):$t="MultiLineString"),$t!=="Point"&&$t!=="MultiPoint"||($t=Dr.length===3?"Point":"MultiPoint"),Qe.push(Nn(cr.id,$t,Dr,cr.tags))}}}return Qe.length?Qe:null}function jr(ge,Te,Oe,ze,Ie){for(var pt=0;pt<ge.length;pt+=3){var At=ge[pt+Ie];At>=Oe&&At<=ze&&(Te.push(ge[pt]),Te.push(ge[pt+1]),Te.push(ge[pt+2]))}}function Jr(ge,Te,Oe,ze,Ie,pt,At){for(var De,Qe,It=Br(ge),cr=Ie===0?Ua:_a,dr=ge.start,$t=0;$t<ge.length-3;$t+=3){var lr=ge[$t],Kr=ge[$t+1],Dr=ge[$t+2],qt=ge[$t+3],Lr=ge[$t+4],Er=Ie===0?lr:Kr,_r=Ie===0?qt:Lr,Wn=!1;At&&(De=Math.sqrt(Math.pow(lr-qt,2)+Math.pow(Kr-Lr,2))),Er<Oe?_r>Oe&&(Qe=cr(It,lr,Kr,qt,Lr,Oe),At&&(It.start=dr+De*Qe)):Er>ze?_r<ze&&(Qe=cr(It,lr,Kr,qt,Lr,ze),At&&(It.start=dr+De*Qe)):Li(It,lr,Kr,Dr),_r<Oe&&Er>=Oe&&(Qe=cr(It,lr,Kr,qt,Lr,Oe),Wn=!0),_r>ze&&Er<=ze&&(Qe=cr(It,lr,Kr,qt,Lr,ze),Wn=!0),!pt&&Wn&&(At&&(It.end=dr+De*Qe),Te.push(It),It=Br(ge)),At&&(dr+=De)}var Cr=ge.length-3;lr=ge[Cr],Kr=ge[Cr+1],Dr=ge[Cr+2],(Er=Ie===0?lr:Kr)>=Oe&&Er<=ze&&Li(It,lr,Kr,Dr),Cr=It.length-3,pt&&Cr>=3&&(It[Cr]!==It[0]||It[Cr+1]!==It[1])&&Li(It,It[0],It[1],It[2]),It.length&&Te.push(It)}function Br(ge){var Te=[];return Te.size=ge.size,Te.start=ge.start,Te.end=ge.end,Te}function Gi(ge,Te,Oe,ze,Ie,pt){for(var At=0;At<ge.length;At++)Jr(ge[At],Te,Oe,ze,Ie,pt,!1)}function Li(ge,Te,Oe,ze){ge.push(Te),ge.push(Oe),ge.push(ze)}function Ua(ge,Te,Oe,ze,Ie,pt){var At=(pt-Te)/(ze-Te);return ge.push(pt),ge.push(Oe+(Ie-Oe)*At),ge.push(1),At}function _a(ge,Te,Oe,ze,Ie,pt){var At=(pt-Oe)/(Ie-Oe);return ge.push(Te+(ze-Te)*At),ge.push(pt),ge.push(1),At}function Bo(ge,Te){for(var Oe=[],ze=0;ze<ge.length;ze++){var Ie,pt=ge[ze],At=pt.type;if(At==="Point"||At==="MultiPoint"||At==="LineString")Ie=Ka(pt.geometry,Te);else if(At==="MultiLineString"||At==="Polygon"){Ie=[];for(var De=0;De<pt.geometry.length;De++)Ie.push(Ka(pt.geometry[De],Te))}else if(At==="MultiPolygon")for(Ie=[],De=0;De<pt.geometry.length;De++){for(var Qe=[],It=0;It<pt.geometry[De].length;It++)Qe.push(Ka(pt.geometry[De][It],Te));Ie.push(Qe)}Oe.push(Nn(pt.id,At,Ie,pt.tags))}return Oe}function Ka(ge,Te){var Oe=[];Oe.size=ge.size,ge.start!==void 0&&(Oe.start=ge.start,Oe.end=ge.end);for(var ze=0;ze<ge.length;ze+=3)Oe.push(ge[ze]+Te,ge[ze+1],ge[ze+2]);return Oe}function Qs(ge,Te){if(ge.transformed)return ge;var Oe,ze,Ie,pt=1<<ge.z,At=ge.x,De=ge.y;for(Oe=0;Oe<ge.features.length;Oe++){var Qe=ge.features[Oe],It=Qe.geometry,cr=Qe.type;if(Qe.geometry=[],cr===1)for(ze=0;ze<It.length;ze+=2)Qe.geometry.push(co(It[ze],It[ze+1],Te,pt,At,De));else for(ze=0;ze<It.length;ze++){var dr=[];for(Ie=0;Ie<It[ze].length;Ie+=2)dr.push(co(It[ze][Ie],It[ze][Ie+1],Te,pt,At,De));Qe.geometry.push(dr)}}return ge.transformed=!0,ge}function co(ge,Te,Oe,ze,Ie,pt){return[Math.round(Oe*(ge*ze-Ie)),Math.round(Oe*(Te*ze-pt))]}function fo(ge,Te,Oe,ze,Ie){for(var pt=Te===Ie.maxZoom?0:Ie.tolerance/((1<<Te)*Ie.extent),At={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Oe,y:ze,z:Te,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},De=0;De<ge.length;De++){At.numFeatures++,fs(At,ge[De],pt,Ie);var Qe=ge[De].minX,It=ge[De].minY,cr=ge[De].maxX,dr=ge[De].maxY;Qe<At.minX&&(At.minX=Qe),It<At.minY&&(At.minY=It),cr>At.maxX&&(At.maxX=cr),dr>At.maxY&&(At.maxY=dr)}return At}function fs(ge,Te,Oe,ze){var Ie=Te.geometry,pt=Te.type,At=[];if(pt==="Point"||pt==="MultiPoint")for(var De=0;De<Ie.length;De+=3)At.push(Ie[De]),At.push(Ie[De+1]),ge.numPoints++,ge.numSimplified++;else if(pt==="LineString")gu(At,Ie,ge,Oe,!1,!1);else if(pt==="MultiLineString"||pt==="Polygon")for(De=0;De<Ie.length;De++)gu(At,Ie[De],ge,Oe,pt==="Polygon",De===0);else if(pt==="MultiPolygon")for(var Qe=0;Qe<Ie.length;Qe++){var It=Ie[Qe];for(De=0;De<It.length;De++)gu(At,It[De],ge,Oe,!0,De===0)}if(At.length){var cr=Te.tags||null;if(pt==="LineString"&&ze.lineMetrics){for(var dr in cr={},Te.tags)cr[dr]=Te.tags[dr];cr.mapbox_clip_start=Ie.start/Ie.size,cr.mapbox_clip_end=Ie.end/Ie.size}var $t={geometry:At,type:pt==="Polygon"||pt==="MultiPolygon"?3:pt==="LineString"||pt==="MultiLineString"?2:1,tags:cr};Te.id!==null&&($t.id=Te.id),ge.features.push($t)}}function gu(ge,Te,Oe,ze,Ie,pt){var At=ze*ze;if(ze>0&&Te.size<(Ie?At:ze))Oe.numPoints+=Te.length/3;else{for(var De=[],Qe=0;Qe<Te.length;Qe+=3)(ze===0||Te[Qe+2]>At)&&(Oe.numSimplified++,De.push(Te[Qe]),De.push(Te[Qe+1])),Oe.numPoints++;Ie&&function(It,cr){for(var dr=0,$t=0,lr=It.length,Kr=lr-2;$t<lr;Kr=$t,$t+=2)dr+=(It[$t]-It[Kr])*(It[$t+1]+It[Kr+1]);if(dr>0===cr)for($t=0,lr=It.length;$t<lr/2;$t+=2){var Dr=It[$t],qt=It[$t+1];It[$t]=It[lr-2-$t],It[$t+1]=It[lr-1-$t],It[lr-2-$t]=Dr,It[lr-1-$t]=qt}}(De,pt),ge.push(De)}}function Hs(ge,Te){var Oe=(Te=this.options=function(Ie,pt){for(var At in pt)Ie[At]=pt[At];return Ie}(Object.create(this.options),Te)).debug;if(Oe&&console.time("preprocess data"),Te.maxZoom<0||Te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Te.promoteId&&Te.generateId)throw new Error("promoteId and generateId cannot be used together.");var ze=function(Ie,pt){var At=[];if(Ie.type==="FeatureCollection")for(var De=0;De<Ie.features.length;De++)Ti(At,Ie.features[De],pt,De);else Ti(At,Ie.type==="Feature"?Ie:{geometry:Ie},pt);return At}(ge,Te);this.tiles={},this.tileCoords=[],Oe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Te.indexMaxZoom,Te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(ze=function(Ie,pt){var At=pt.buffer/pt.extent,De=Ie,Qe=di(Ie,1,-1-At,At,0,-1,2,pt),It=di(Ie,1,1-At,2+At,0,-1,2,pt);return(Qe||It)&&(De=di(Ie,1,-At,1+At,0,-1,2,pt)||[],Qe&&(De=Bo(Qe,1).concat(De)),It&&(De=De.concat(Bo(It,-1)))),De}(ze,Te)).length&&this.splitTile(ze,0,0,0),Oe&&(ze.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ss(ge,Te,Oe){return 32*((1<<ge)*Oe+Te)+ge}function Au(ge,Te){var Oe=ge.tileID.canonical;if(!this._geoJSONIndex)return Te(null,null);var ze=this._geoJSONIndex.getTile(Oe.z,Oe.x,Oe.y);if(!ze)return Te(null,null);var Ie=new $(ze.features),pt=X(Ie);pt.byteOffset===0&&pt.byteLength===pt.buffer.byteLength||(pt=new Uint8Array(pt)),Te(null,{vectorTile:Ie,rawData:pt.buffer})}Or.prototype.load=function(ge){var Te=this.options,Oe=Te.log,ze=Te.minZoom,Ie=Te.maxZoom,pt=Te.nodeSize;Oe&&console.time("total time");var At="prepare "+ge.length+" points";Oe&&console.time(At),this.points=ge;for(var De=[],Qe=0;Qe<ge.length;Qe++)ge[Qe].geometry&&De.push(xe(ge[Qe],Qe));this.trees[Ie+1]=new Nt(De,an,Fn,pt,Float32Array),Oe&&console.timeEnd(At);for(var It=Ie;It>=ze;It--){var cr=+Date.now();De=this._cluster(De,It),this.trees[It]=new Nt(De,an,Fn,pt,Float32Array),Oe&&console.log("z%d: %d clusters in %dms",It,De.length,+Date.now()-cr)}return Oe&&console.timeEnd("total time"),this},Or.prototype.getClusters=function(ge,Te){var Oe=((ge[0]+180)%360+360)%360-180,ze=Math.max(-90,Math.min(90,ge[1])),Ie=ge[2]===180?180:((ge[2]+180)%360+360)%360-180,pt=Math.max(-90,Math.min(90,ge[3]));if(ge[2]-ge[0]>=360)Oe=-180,Ie=180;else if(Oe>Ie){var At=this.getClusters([Oe,ze,180,pt],Te),De=this.getClusters([-180,ze,Ie,pt],Te);return At.concat(De)}for(var Qe=this.trees[this._limitZoom(Te)],It=[],cr=0,dr=Qe.range(Kt(Oe),Gt(pt),Kt(Ie),Gt(ze));cr<dr.length;cr+=1){var $t=Qe.points[dr[cr]];It.push($t.numPoints?Ge($t):this.points[$t.index])}return It},Or.prototype.getChildren=function(ge){var Te=this._getOriginId(ge),Oe=this._getOriginZoom(ge),ze="No cluster with the specified id.",Ie=this.trees[Oe];if(!Ie)throw new Error(ze);var pt=Ie.points[Te];if(!pt)throw new Error(ze);for(var At=this.options.radius/(this.options.extent*Math.pow(2,Oe-1)),De=[],Qe=0,It=Ie.within(pt.x,pt.y,At);Qe<It.length;Qe+=1){var cr=Ie.points[It[Qe]];cr.parentId===ge&&De.push(cr.numPoints?Ge(cr):this.points[cr.index])}if(De.length===0)throw new Error(ze);return De},Or.prototype.getLeaves=function(ge,Te,Oe){var ze=[];return this._appendLeaves(ze,ge,Te=Te||10,Oe=Oe||0,0),ze},Or.prototype.getTile=function(ge,Te,Oe){var ze=this.trees[this._limitZoom(ge)],Ie=Math.pow(2,ge),pt=this.options,At=pt.radius/pt.extent,De=(Oe-At)/Ie,Qe=(Oe+1+At)/Ie,It={features:[]};return this._addTileFeatures(ze.range((Te-At)/Ie,De,(Te+1+At)/Ie,Qe),ze.points,Te,Oe,Ie,It),Te===0&&this._addTileFeatures(ze.range(1-At/Ie,De,1,Qe),ze.points,Ie,Oe,Ie,It),Te===Ie-1&&this._addTileFeatures(ze.range(0,De,At/Ie,Qe),ze.points,-1,Oe,Ie,It),It.features.length?It:null},Or.prototype.getClusterExpansionZoom=function(ge){for(var Te=this._getOriginZoom(ge)-1;Te<=this.options.maxZoom;){var Oe=this.getChildren(ge);if(Te++,Oe.length!==1)break;ge=Oe[0].properties.cluster_id}return Te},Or.prototype._appendLeaves=function(ge,Te,Oe,ze,Ie){for(var pt=0,At=this.getChildren(Te);pt<At.length;pt+=1){var De=At[pt],Qe=De.properties;if(Qe&&Qe.cluster?Ie+Qe.point_count<=ze?Ie+=Qe.point_count:Ie=this._appendLeaves(ge,Qe.cluster_id,Oe,ze,Ie):Ie<ze?Ie++:ge.push(De),ge.length===Oe)break}return Ie},Or.prototype._addTileFeatures=function(ge,Te,Oe,ze,Ie,pt){for(var At=0,De=ge;At<De.length;At+=1){var Qe=Te[De[At]],It=Qe.numPoints,cr={type:1,geometry:[[Math.round(this.options.extent*(Qe.x*Ie-Oe)),Math.round(this.options.extent*(Qe.y*Ie-ze))]],tags:It?bt(Qe):this.points[Qe.index].properties},dr=void 0;It?dr=Qe.id:this.options.generateId?dr=Qe.index:this.points[Qe.index].id&&(dr=this.points[Qe.index].id),dr!==void 0&&(cr.id=dr),pt.features.push(cr)}},Or.prototype._limitZoom=function(ge){return Math.max(this.options.minZoom,Math.min(+ge,this.options.maxZoom+1))},Or.prototype._cluster=function(ge,Te){for(var Oe=[],ze=this.options,Ie=ze.reduce,pt=ze.minPoints,At=ze.radius/(ze.extent*Math.pow(2,Te)),De=0;De<ge.length;De++){var Qe=ge[De];if(!(Qe.zoom<=Te)){Qe.zoom=Te;for(var It=this.trees[Te+1],cr=It.within(Qe.x,Qe.y,At),dr=Qe.numPoints||1,$t=dr,lr=0,Kr=cr;lr<Kr.length;lr+=1){var Dr=It.points[Kr[lr]];Dr.zoom>Te&&($t+=Dr.numPoints||1)}if($t>=pt){for(var qt=Qe.x*dr,Lr=Qe.y*dr,Er=Ie&&dr>1?this._map(Qe,!0):null,_r=(De<<5)+(Te+1)+this.points.length,Wn=0,Cr=cr;Wn<Cr.length;Wn+=1){var Qn=It.points[Cr[Wn]];if(!(Qn.zoom<=Te)){Qn.zoom=Te;var Ci=Qn.numPoints||1;qt+=Qn.x*Ci,Lr+=Qn.y*Ci,Qn.parentId=_r,Ie&&(Er||(Er=this._map(Qe,!0)),Ie(Er,this._map(Qn)))}}Qe.parentId=_r,Oe.push(he(qt/$t,Lr/$t,_r,$t,Er))}else if(Oe.push(Qe),$t>1)for(var ii=0,bi=cr;ii<bi.length;ii+=1){var Un=It.points[bi[ii]];Un.zoom<=Te||(Un.zoom=Te,Oe.push(Un))}}}return Oe},Or.prototype._getOriginId=function(ge){return ge-this.points.length>>5},Or.prototype._getOriginZoom=function(ge){return(ge-this.points.length)%32},Or.prototype._map=function(ge,Te){if(ge.numPoints)return Te?tn({},ge.properties):ge.properties;var Oe=this.points[ge.index].properties,ze=this.options.map(Oe);return Te&&ze===Oe?tn({},ze):ze},Hs.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Hs.prototype.splitTile=function(ge,Te,Oe,ze,Ie,pt,At){for(var De=[ge,Te,Oe,ze],Qe=this.options,It=Qe.debug;De.length;){ze=De.pop(),Oe=De.pop(),Te=De.pop(),ge=De.pop();var cr=1<<Te,dr=Ss(Te,Oe,ze),$t=this.tiles[dr];if(!$t&&(It>1&&console.time("creation"),$t=this.tiles[dr]=fo(ge,Te,Oe,ze,Qe),this.tileCoords.push({z:Te,x:Oe,y:ze}),It)){It>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Te,Oe,ze,$t.numFeatures,$t.numPoints,$t.numSimplified),console.timeEnd("creation"));var lr="z"+Te;this.stats[lr]=(this.stats[lr]||0)+1,this.total++}if($t.source=ge,Ie){if(Te===Qe.maxZoom||Te===Ie)continue;var Kr=1<<Ie-Te;if(Oe!==Math.floor(pt/Kr)||ze!==Math.floor(At/Kr))continue}else if(Te===Qe.indexMaxZoom||$t.numPoints<=Qe.indexMaxPoints)continue;if($t.source=null,ge.length!==0){It>1&&console.time("clipping");var Dr,qt,Lr,Er,_r,Wn,Cr=.5*Qe.buffer/Qe.extent,Qn=.5-Cr,Ci=.5+Cr,ii=1+Cr;Dr=qt=Lr=Er=null,_r=di(ge,cr,Oe-Cr,Oe+Ci,0,$t.minX,$t.maxX,Qe),Wn=di(ge,cr,Oe+Qn,Oe+ii,0,$t.minX,$t.maxX,Qe),ge=null,_r&&(Dr=di(_r,cr,ze-Cr,ze+Ci,1,$t.minY,$t.maxY,Qe),qt=di(_r,cr,ze+Qn,ze+ii,1,$t.minY,$t.maxY,Qe),_r=null),Wn&&(Lr=di(Wn,cr,ze-Cr,ze+Ci,1,$t.minY,$t.maxY,Qe),Er=di(Wn,cr,ze+Qn,ze+ii,1,$t.minY,$t.maxY,Qe),Wn=null),It>1&&console.timeEnd("clipping"),De.push(Dr||[],Te+1,2*Oe,2*ze),De.push(qt||[],Te+1,2*Oe,2*ze+1),De.push(Lr||[],Te+1,2*Oe+1,2*ze),De.push(Er||[],Te+1,2*Oe+1,2*ze+1)}}},Hs.prototype.getTile=function(ge,Te,Oe){var ze=this.options,Ie=ze.extent,pt=ze.debug;if(ge<0||ge>24)return null;var At=1<<ge,De=Ss(ge,Te=(Te%At+At)%At,Oe);if(this.tiles[De])return Qs(this.tiles[De],Ie);pt>1&&console.log("drilling down to z%d-%d-%d",ge,Te,Oe);for(var Qe,It=ge,cr=Te,dr=Oe;!Qe&&It>0;)It--,cr=Math.floor(cr/2),dr=Math.floor(dr/2),Qe=this.tiles[Ss(It,cr,dr)];return Qe&&Qe.source?(pt>1&&console.log("found parent tile z%d-%d-%d",It,cr,dr),pt>1&&console.time("drilling down"),this.splitTile(Qe.source,It,cr,dr,ge,Te,Oe),pt>1&&console.timeEnd("drilling down"),this.tiles[De]?Qs(this.tiles[De],Ie):null):null};var yu=function(ge){function Te(Oe,ze,Ie,pt){ge.call(this,Oe,ze,Ie,Au),pt&&(this.loadGeoJSON=pt)}return ge&&(Te.__proto__=ge),(Te.prototype=Object.create(ge&&ge.prototype)).constructor=Te,Te.prototype.loadData=function(Oe,ze){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=ze,this._pendingLoadDataParams=Oe,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Te.prototype._loadData=function(){var Oe=this;if(this._pendingCallback&&this._pendingLoadDataParams){var ze=this._pendingCallback,Ie=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var pt=!!(Ie&&Ie.request&&Ie.request.collectResourceTiming)&&new i.RequestPerformance(Ie.request);this.loadGeoJSON(Ie,function(At,De){if(At||!De)return ze(At);if(typeof De!="object")return ze(new Error("Input data given to '"+Ie.source+"' is not a valid GeoJSON object."));(function $t(lr,Kr){var Dr,qt=lr&&lr.type;if(qt==="FeatureCollection")for(Dr=0;Dr<lr.features.length;Dr++)$t(lr.features[Dr],Kr);else if(qt==="GeometryCollection")for(Dr=0;Dr<lr.geometries.length;Dr++)$t(lr.geometries[Dr],Kr);else if(qt==="Feature")$t(lr.geometry,Kr);else if(qt==="Polygon")R(lr.coordinates,Kr);else if(qt==="MultiPolygon")for(Dr=0;Dr<lr.coordinates.length;Dr++)R(lr.coordinates[Dr],Kr);return lr})(De,!0);try{if(Ie.filter){var Qe=i.createExpression(Ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Qe.result==="error")throw new Error(Qe.value.map(function($t){return $t.key+": "+$t.message}).join(", "));var It=De.features.filter(function($t){return Qe.value.evaluate({zoom:0},$t)});De={type:"FeatureCollection",features:It}}Oe._geoJSONIndex=Ie.cluster?new Or(function($t){var lr=$t.superclusterOptions,Kr=$t.clusterProperties;if(!Kr||!lr)return lr;for(var Dr={},qt={},Lr={accumulated:null,zoom:0},Er={properties:null},_r=Object.keys(Kr),Wn=0,Cr=_r;Wn<Cr.length;Wn+=1){var Qn=Cr[Wn],Ci=Kr[Qn],ii=Ci[0],bi=i.createExpression(Ci[1]),Un=i.createExpression(typeof ii=="string"?[ii,["accumulated"],["get",Qn]]:ii);Dr[Qn]=bi.value,qt[Qn]=Un.value}return lr.map=function(oa){Er.properties=oa;for(var xi={},Ki=0,gi=_r;Ki<gi.length;Ki+=1){var Zn=gi[Ki];xi[Zn]=Dr[Zn].evaluate(Lr,Er)}return xi},lr.reduce=function(oa,xi){Er.properties=xi;for(var Ki=0,gi=_r;Ki<gi.length;Ki+=1){var Zn=gi[Ki];Lr.accumulated=oa[Zn],oa[Zn]=qt[Zn].evaluate(Lr,Er)}},lr}(Ie)).load(De.features):function($t,lr){return new Hs($t,lr)}(De,Ie.geojsonVtOptions)}catch($t){return ze($t)}Oe.loaded={};var cr={};if(pt){var dr=pt.finish();dr&&(cr.resourceTiming={},cr.resourceTiming[Ie.source]=JSON.parse(JSON.stringify(dr)))}ze(null,cr)})}},Te.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Te.prototype.reloadTile=function(Oe,ze){var Ie=this.loaded;return Ie&&Ie[Oe.uid]?ge.prototype.reloadTile.call(this,Oe,ze):this.loadTile(Oe,ze)},Te.prototype.loadGeoJSON=function(Oe,ze){if(Oe.request)i.getJSON(Oe.request,ze);else{if(typeof Oe.data!="string")return ze(new Error("Input data given to '"+Oe.source+"' is not a valid GeoJSON object."));try{return ze(null,JSON.parse(Oe.data))}catch{return ze(new Error("Input data given to '"+Oe.source+"' is not a valid GeoJSON object."))}}},Te.prototype.removeSource=function(Oe,ze){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ze()},Te.prototype.getClusterExpansionZoom=function(Oe,ze){try{ze(null,this._geoJSONIndex.getClusterExpansionZoom(Oe.clusterId))}catch(Ie){ze(Ie)}},Te.prototype.getClusterChildren=function(Oe,ze){try{ze(null,this._geoJSONIndex.getChildren(Oe.clusterId))}catch(Ie){ze(Ie)}},Te.prototype.getClusterLeaves=function(Oe,ze){try{ze(null,this._geoJSONIndex.getLeaves(Oe.clusterId,Oe.limit,Oe.offset))}catch(Ie){ze(Ie)}},Te}(v),ra=function(ge){var Te=this;this.self=ge,this.actor=new i.Actor(ge,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:v,geojson:yu},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Oe,ze){if(Te.workerSourceTypes[Oe])throw new Error('Worker source with name "'+Oe+'" already registered.');Te.workerSourceTypes[Oe]=ze},this.self.registerRTLTextPlugin=function(Oe){if(i.plugin.isParsed())throw new Error("RTL text plugin already registered.");i.plugin.applyArabicShaping=Oe.applyArabicShaping,i.plugin.processBidirectionalText=Oe.processBidirectionalText,i.plugin.processStyledBidirectionalText=Oe.processStyledBidirectionalText}};return ra.prototype.setReferrer=function(ge,Te){this.referrer=Te},ra.prototype.setImages=function(ge,Te,Oe){for(var ze in this.availableImages[ge]=Te,this.workerSources[ge]){var Ie=this.workerSources[ge][ze];for(var pt in Ie)Ie[pt].availableImages=Te}Oe()},ra.prototype.setLayers=function(ge,Te,Oe){this.getLayerIndex(ge).replace(Te),Oe()},ra.prototype.updateLayers=function(ge,Te,Oe){this.getLayerIndex(ge).update(Te.layers,Te.removedIds),Oe()},ra.prototype.loadTile=function(ge,Te,Oe){this.getWorkerSource(ge,Te.type,Te.source).loadTile(Te,Oe)},ra.prototype.loadDEMTile=function(ge,Te,Oe){this.getDEMWorkerSource(ge,Te.source).loadTile(Te,Oe)},ra.prototype.reloadTile=function(ge,Te,Oe){this.getWorkerSource(ge,Te.type,Te.source).reloadTile(Te,Oe)},ra.prototype.abortTile=function(ge,Te,Oe){this.getWorkerSource(ge,Te.type,Te.source).abortTile(Te,Oe)},ra.prototype.removeTile=function(ge,Te,Oe){this.getWorkerSource(ge,Te.type,Te.source).removeTile(Te,Oe)},ra.prototype.removeDEMTile=function(ge,Te){this.getDEMWorkerSource(ge,Te.source).removeTile(Te)},ra.prototype.removeSource=function(ge,Te,Oe){if(this.workerSources[ge]&&this.workerSources[ge][Te.type]&&this.workerSources[ge][Te.type][Te.source]){var ze=this.workerSources[ge][Te.type][Te.source];delete this.workerSources[ge][Te.type][Te.source],ze.removeSource!==void 0?ze.removeSource(Te,Oe):Oe()}},ra.prototype.loadWorkerSource=function(ge,Te,Oe){try{this.self.importScripts(Te.url),Oe()}catch(ze){Oe(ze.toString())}},ra.prototype.syncRTLPluginState=function(ge,Te,Oe){try{i.plugin.setState(Te);var ze=i.plugin.getPluginURL();if(i.plugin.isLoaded()&&!i.plugin.isParsed()&&ze!=null){this.self.importScripts(ze);var Ie=i.plugin.isParsed();Oe(Ie?void 0:new Error("RTL Text Plugin failed to import scripts from "+ze),Ie)}}catch(pt){Oe(pt.toString())}},ra.prototype.getAvailableImages=function(ge){var Te=this.availableImages[ge];return Te||(Te=[]),Te},ra.prototype.getLayerIndex=function(ge){var Te=this.layerIndexes[ge];return Te||(Te=this.layerIndexes[ge]=new s),Te},ra.prototype.getWorkerSource=function(ge,Te,Oe){var ze=this;return this.workerSources[ge]||(this.workerSources[ge]={}),this.workerSources[ge][Te]||(this.workerSources[ge][Te]={}),this.workerSources[ge][Te][Oe]||(this.workerSources[ge][Te][Oe]=new this.workerSourceTypes[Te]({send:function(Ie,pt,At){ze.actor.send(Ie,pt,At,ge)}},this.getLayerIndex(ge),this.getAvailableImages(ge))),this.workerSources[ge][Te][Oe]},ra.prototype.getDEMWorkerSource=function(ge,Te){return this.demWorkerSources[ge]||(this.demWorkerSources[ge]={}),this.demWorkerSources[ge][Te]||(this.demWorkerSources[ge][Te]=new E),this.demWorkerSources[ge][Te]},ra.prototype.enforceCacheSizeLimit=function(ge,Te){i.enforceCacheSizeLimit(Te)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new ra(self)),ra}),n(["./shared"],function(i){"use strict";var a=i.createCommonjsModule(function(m){function A(F){return!g(F)}function g(F){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var K,ie,fe=new Blob([""],{type:"text/javascript"}),_e=URL.createObjectURL(fe);try{ie=new Worker(_e),K=!0}catch{K=!1}return ie&&ie.terminate(),URL.revokeObjectURL(_e),K}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var K=document.createElement("canvas");K.width=K.height=1;var ie=K.getContext("2d");if(!ie)return!1;var fe=ie.getImageData(0,0,1,1);return fe&&fe.width===K.width}()?(S[q=F&&F.failIfMajorPerformanceCaveat]===void 0&&(S[q]=function(K){var ie=function(_e){var Re=document.createElement("canvas"),Fe=Object.create(A.webGLContextAttributes);return Fe.failIfMajorPerformanceCaveat=_e,Re.probablySupportsContext?Re.probablySupportsContext("webgl",Fe)||Re.probablySupportsContext("experimental-webgl",Fe):Re.supportsContext?Re.supportsContext("webgl",Fe)||Re.supportsContext("experimental-webgl",Fe):Re.getContext("webgl",Fe)||Re.getContext("experimental-webgl",Fe)}(K);if(!ie)return!1;var fe=ie.createShader(ie.VERTEX_SHADER);return!(!fe||ie.isContextLost())&&(ie.shaderSource(fe,"void main() {}"),ie.compileShader(fe),ie.getShaderParameter(fe,ie.COMPILE_STATUS)===!0)}(q)),S[q]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var q}m.exports?m.exports=A:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=A,window.mapboxgl.notSupportedReason=g);var S={};A.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),o={create:function(m,A,g){var S=i.window.document.createElement(m);return A!==void 0&&(S.className=A),g&&g.appendChild(S),S},createNS:function(m,A){return i.window.document.createElementNS(m,A)}},s=i.window.document&&i.window.document.documentElement.style;function u(m){if(!s)return m[0];for(var A=0;A<m.length;A++)if(m[A]in s)return m[A];return m[0]}var c,h=u(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);o.disableDrag=function(){s&&h&&(c=s[h],s[h]="none")},o.enableDrag=function(){s&&h&&(s[h]=c)};var p=u(["transform","WebkitTransform"]);o.setTransform=function(m,A){m.style[p]=A};var v=!1;try{var x=Object.defineProperty({},"passive",{get:function(){v=!0}});i.window.addEventListener("test",x,x),i.window.removeEventListener("test",x,x)}catch{v=!1}o.addEventListener=function(m,A,g,S){S===void 0&&(S={}),m.addEventListener(A,g,"passive"in S&&v?S:S.capture)},o.removeEventListener=function(m,A,g,S){S===void 0&&(S={}),m.removeEventListener(A,g,"passive"in S&&v?S:S.capture)};var E=function(m){m.preventDefault(),m.stopPropagation(),i.window.removeEventListener("click",E,!0)};function R(m){var A=m.userImage;return!!(A&&A.render&&A.render())&&(m.data.replace(new Uint8Array(A.data.buffer)),!0)}o.suppressClick=function(){i.window.addEventListener("click",E,!0),i.window.setTimeout(function(){i.window.removeEventListener("click",E,!0)},0)},o.mousePos=function(m,A){var g=m.getBoundingClientRect();return new i.Point(A.clientX-g.left-m.clientLeft,A.clientY-g.top-m.clientTop)},o.touchPos=function(m,A){for(var g=m.getBoundingClientRect(),S=[],F=0;F<A.length;F++)S.push(new i.Point(A[F].clientX-g.left-m.clientLeft,A[F].clientY-g.top-m.clientTop));return S},o.mouseButton=function(m){return i.window.InstallTrigger!==void 0&&m.button===2&&m.ctrlKey&&i.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:m.button},o.remove=function(m){m.parentNode&&m.parentNode.removeChild(m)};var D=function(m){function A(){m.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new i.RGBAImage({width:1,height:1}),this.dirty=!0}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.isLoaded=function(){return this.loaded},A.prototype.setLoaded=function(g){if(this.loaded!==g&&(this.loaded=g,g)){for(var S=0,F=this.requestors;S<F.length;S+=1){var q=F[S];this._notify(q.ids,q.callback)}this.requestors=[]}},A.prototype.getImage=function(g){return this.images[g]},A.prototype.addImage=function(g,S){this._validate(g,S)&&(this.images[g]=S)},A.prototype._validate=function(g,S){var F=!0;return this._validateStretch(S.stretchX,S.data&&S.data.width)||(this.fire(new i.ErrorEvent(new Error('Image "'+g+'" has invalid "stretchX" value'))),F=!1),this._validateStretch(S.stretchY,S.data&&S.data.height)||(this.fire(new i.ErrorEvent(new Error('Image "'+g+'" has invalid "stretchY" value'))),F=!1),this._validateContent(S.content,S)||(this.fire(new i.ErrorEvent(new Error('Image "'+g+'" has invalid "content" value'))),F=!1),F},A.prototype._validateStretch=function(g,S){if(!g)return!0;for(var F=0,q=0,K=g;q<K.length;q+=1){var ie=K[q];if(ie[0]<F||ie[1]<ie[0]||S<ie[1])return!1;F=ie[1]}return!0},A.prototype._validateContent=function(g,S){return!(g&&(g.length!==4||g[0]<0||S.data.width<g[0]||g[1]<0||S.data.height<g[1]||g[2]<0||S.data.width<g[2]||g[3]<0||S.data.height<g[3]||g[2]<g[0]||g[3]<g[1]))},A.prototype.updateImage=function(g,S){S.version=this.images[g].version+1,this.images[g]=S,this.updatedImages[g]=!0},A.prototype.removeImage=function(g){var S=this.images[g];delete this.images[g],delete this.patterns[g],S.userImage&&S.userImage.onRemove&&S.userImage.onRemove()},A.prototype.listImages=function(){return Object.keys(this.images)},A.prototype.getImages=function(g,S){var F=!0;if(!this.isLoaded())for(var q=0,K=g;q<K.length;q+=1)this.images[K[q]]||(F=!1);this.isLoaded()||F?this._notify(g,S):this.requestors.push({ids:g,callback:S})},A.prototype._notify=function(g,S){for(var F={},q=0,K=g;q<K.length;q+=1){var ie=K[q];this.images[ie]||this.fire(new i.Event("styleimagemissing",{id:ie}));var fe=this.images[ie];fe?F[ie]={data:fe.data.clone(),pixelRatio:fe.pixelRatio,sdf:fe.sdf,version:fe.version,stretchX:fe.stretchX,stretchY:fe.stretchY,content:fe.content,hasRenderCallback:Boolean(fe.userImage&&fe.userImage.render)}:i.warnOnce('Image "'+ie+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}S(null,F)},A.prototype.getPixelSize=function(){var g=this.atlasImage;return{width:g.width,height:g.height}},A.prototype.getPattern=function(g){var S=this.patterns[g],F=this.getImage(g);if(!F)return null;if(S&&S.position.version===F.version)return S.position;if(S)S.position.version=F.version;else{var q={w:F.data.width+2,h:F.data.height+2,x:0,y:0},K=new i.ImagePosition(q,F);this.patterns[g]={bin:q,position:K}}return this._updatePatternAtlas(),this.patterns[g].position},A.prototype.bind=function(g){var S=g.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new i.Texture(g,this.atlasImage,S.RGBA),this.atlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE)},A.prototype._updatePatternAtlas=function(){var g=[];for(var S in this.patterns)g.push(this.patterns[S].bin);var F=i.potpack(g),q=F.w,K=F.h,ie=this.atlasImage;for(var fe in ie.resize({width:q||1,height:K||1}),this.patterns){var _e=this.patterns[fe].bin,Re=_e.x+1,Fe=_e.y+1,Ne=this.images[fe].data,Je=Ne.width,Ze=Ne.height;i.RGBAImage.copy(Ne,ie,{x:0,y:0},{x:Re,y:Fe},{width:Je,height:Ze}),i.RGBAImage.copy(Ne,ie,{x:0,y:Ze-1},{x:Re,y:Fe-1},{width:Je,height:1}),i.RGBAImage.copy(Ne,ie,{x:0,y:0},{x:Re,y:Fe+Ze},{width:Je,height:1}),i.RGBAImage.copy(Ne,ie,{x:Je-1,y:0},{x:Re-1,y:Fe},{width:1,height:Ze}),i.RGBAImage.copy(Ne,ie,{x:0,y:0},{x:Re+Je,y:Fe},{width:1,height:Ze})}this.dirty=!0},A.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},A.prototype.dispatchRenderCallbacks=function(g){for(var S=0,F=g;S<F.length;S+=1){var q=F[S];if(!this.callbackDispatchedThisFrame[q]){this.callbackDispatchedThisFrame[q]=!0;var K=this.images[q];R(K)&&this.updateImage(q,K)}}},A}(i.Evented),H=J,W=J,$=1e20;function J(m,A,g,S,F,q){this.fontSize=m||24,this.buffer=A===void 0?3:A,this.cutoff=S||.25,this.fontFamily=F||"sans-serif",this.fontWeight=q||"normal",this.radius=g||8;var K=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=K,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(K*K),this.gridInner=new Float64Array(K*K),this.f=new Float64Array(K),this.d=new Float64Array(K),this.z=new Float64Array(K+1),this.v=new Int16Array(K),this.middle=Math.round(K/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function B(m,A,g,S,F,q,K){for(var ie=0;ie<A;ie++){for(var fe=0;fe<g;fe++)S[fe]=m[fe*A+ie];for(se(S,F,q,K,g),fe=0;fe<g;fe++)m[fe*A+ie]=F[fe]}for(fe=0;fe<g;fe++){for(ie=0;ie<A;ie++)S[ie]=m[fe*A+ie];for(se(S,F,q,K,A),ie=0;ie<A;ie++)m[fe*A+ie]=Math.sqrt(F[ie])}}function se(m,A,g,S,F){g[0]=0,S[0]=-$,S[1]=+$;for(var q=1,K=0;q<F;q++){for(var ie=(m[q]+q*q-(m[g[K]]+g[K]*g[K]))/(2*q-2*g[K]);ie<=S[K];)K--,ie=(m[q]+q*q-(m[g[K]]+g[K]*g[K]))/(2*q-2*g[K]);g[++K]=q,S[K]=ie,S[K+1]=+$}for(q=0,K=0;q<F;q++){for(;S[K+1]<q;)K++;A[q]=(q-g[K])*(q-g[K])+m[g[K]]}}J.prototype.draw=function(m){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(m,this.buffer,this.middle);for(var A=this.ctx.getImageData(0,0,this.size,this.size),g=new Uint8ClampedArray(this.size*this.size),S=0;S<this.size*this.size;S++){var F=A.data[4*S+3]/255;this.gridOuter[S]=F===1?0:F===0?$:Math.pow(Math.max(0,.5-F),2),this.gridInner[S]=F===1?$:F===0?0:Math.pow(Math.max(0,F-.5),2)}for(B(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),B(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),S=0;S<this.size*this.size;S++)g[S]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[S]-this.gridInner[S])/this.radius+this.cutoff))));return g},H.default=W;var V=function(m,A){this.requestManager=m,this.localIdeographFontFamily=A,this.entries={}};V.prototype.setURL=function(m){this.url=m},V.prototype.getGlyphs=function(m,A){var g=this,S=[];for(var F in m)for(var q=0,K=m[F];q<K.length;q+=1)S.push({stack:F,id:K[q]});i.asyncAll(S,function(ie,fe){var _e=ie.stack,Re=ie.id,Fe=g.entries[_e];Fe||(Fe=g.entries[_e]={glyphs:{},requests:{},ranges:{}});var Ne=Fe.glyphs[Re];if(Ne===void 0){if(Ne=g._tinySDF(Fe,_e,Re))return Fe.glyphs[Re]=Ne,void fe(null,{stack:_e,id:Re,glyph:Ne});var Je=Math.floor(Re/256);if(256*Je>65535)fe(new Error("glyphs > 65535 not supported"));else if(Fe.ranges[Je])fe(null,{stack:_e,id:Re,glyph:Ne});else{var Ze=Fe.requests[Je];Ze||(Ze=Fe.requests[Je]=[],V.loadGlyphRange(_e,Je,g.url,g.requestManager,function(ct,Xe){if(Xe){for(var st in Xe)g._doesCharSupportLocalGlyph(+st)||(Fe.glyphs[+st]=Xe[+st]);Fe.ranges[Je]=!0}for(var yt=0,Lt=Ze;yt<Lt.length;yt+=1)(0,Lt[yt])(ct,Xe);delete Fe.requests[Je]})),Ze.push(function(ct,Xe){ct?fe(ct):Xe&&fe(null,{stack:_e,id:Re,glyph:Xe[Re]||null})})}}else fe(null,{stack:_e,id:Re,glyph:Ne})},function(ie,fe){if(ie)A(ie);else if(fe){for(var _e={},Re=0,Fe=fe;Re<Fe.length;Re+=1){var Ne=Fe[Re],Je=Ne.stack,Ze=Ne.id,ct=Ne.glyph;(_e[Je]||(_e[Je]={}))[Ze]=ct&&{id:ct.id,bitmap:ct.bitmap.clone(),metrics:ct.metrics}}A(null,_e)}})},V.prototype._doesCharSupportLocalGlyph=function(m){return!!this.localIdeographFontFamily&&(i.isChar["CJK Unified Ideographs"](m)||i.isChar["Hangul Syllables"](m)||i.isChar.Hiragana(m)||i.isChar.Katakana(m))},V.prototype._tinySDF=function(m,A,g){var S=this.localIdeographFontFamily;if(S&&this._doesCharSupportLocalGlyph(g)){var F=m.tinySDF;if(!F){var q="400";/bold/i.test(A)?q="900":/medium/i.test(A)?q="500":/light/i.test(A)&&(q="200"),F=m.tinySDF=new V.TinySDF(24,3,8,.25,S,q)}return{id:g,bitmap:new i.AlphaImage({width:30,height:30},F.draw(String.fromCharCode(g))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},V.loadGlyphRange=function(m,A,g,S,F){var q=256*A,K=q+255,ie=S.transformRequest(S.normalizeGlyphsURL(g).replace("{fontstack}",m).replace("{range}",q+"-"+K),i.ResourceType.Glyphs);i.getArrayBuffer(ie,function(fe,_e){if(fe)F(fe);else if(_e){for(var Re={},Fe=0,Ne=i.parseGlyphPBF(_e);Fe<Ne.length;Fe+=1){var Je=Ne[Fe];Re[Je.id]=Je}F(null,Re)}})},V.TinySDF=H;var X=function(){this.specification=i.styleSpec.light.position};X.prototype.possiblyEvaluate=function(m,A){return i.sphericalToCartesian(m.expression.evaluate(A))},X.prototype.interpolate=function(m,A,g){return{x:i.number(m.x,A.x,g),y:i.number(m.y,A.y,g),z:i.number(m.z,A.z,g)}};var I=new i.Properties({anchor:new i.DataConstantProperty(i.styleSpec.light.anchor),position:new X,color:new i.DataConstantProperty(i.styleSpec.light.color),intensity:new i.DataConstantProperty(i.styleSpec.light.intensity)}),O=function(m){function A(g){m.call(this),this._transitionable=new i.Transitionable(I),this.setLight(g),this._transitioning=this._transitionable.untransitioned()}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getLight=function(){return this._transitionable.serialize()},A.prototype.setLight=function(g,S){if(S===void 0&&(S={}),!this._validate(i.validateLight,g,S))for(var F in g){var q=g[F];i.endsWith(F,"-transition")?this._transitionable.setTransition(F.slice(0,-11),q):this._transitionable.setValue(F,q)}},A.prototype.updateTransitions=function(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)},A.prototype.hasTransition=function(){return this._transitioning.hasTransition()},A.prototype.recalculate=function(g){this.properties=this._transitioning.possiblyEvaluate(g)},A.prototype._validate=function(g,S,F){return(!F||F.validate!==!1)&&i.emitValidationErrors(this,g.call(i.validateStyle,i.extend({value:S,style:{glyphs:!0,sprite:!0},styleSpec:i.styleSpec})))},A}(i.Evented),U=function(m,A){this.width=m,this.height=A,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};U.prototype.getDash=function(m,A){var g=m.join(",")+String(A);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(m,A)),this.dashEntry[g]},U.prototype.getDashRanges=function(m,A,g){var S=[],F=m.length%2==1?-m[m.length-1]*g:0,q=m[0]*g,K=!0;S.push({left:F,right:q,isDash:K,zeroLength:m[0]===0});for(var ie=m[0],fe=1;fe<m.length;fe++){var _e=m[fe];S.push({left:F=ie*g,right:q=(ie+=_e)*g,isDash:K=!K,zeroLength:_e===0})}return S},U.prototype.addRoundDash=function(m,A,g){for(var S=A/2,F=-g;F<=g;F++)for(var q=this.width*(this.nextRow+g+F),K=0,ie=m[K],fe=0;fe<this.width;fe++){fe/ie.right>1&&(ie=m[++K]);var _e=Math.abs(fe-ie.left),Re=Math.abs(fe-ie.right),Fe=Math.min(_e,Re),Ne=void 0,Je=F/g*(S+1);if(ie.isDash){var Ze=S-Math.abs(Je);Ne=Math.sqrt(Fe*Fe+Ze*Ze)}else Ne=S-Math.sqrt(Fe*Fe+Je*Je);this.data[q+fe]=Math.max(0,Math.min(255,Ne+128))}},U.prototype.addRegularDash=function(m){for(var A=m.length-1;A>=0;--A){var g=m[A],S=m[A+1];g.zeroLength?m.splice(A,1):S&&S.isDash===g.isDash&&(S.left=g.left,m.splice(A,1))}var F=m[0],q=m[m.length-1];F.isDash===q.isDash&&(F.left=q.left-this.width,q.right=F.right+this.width);for(var K=this.width*this.nextRow,ie=0,fe=m[ie],_e=0;_e<this.width;_e++){_e/fe.right>1&&(fe=m[++ie]);var Re=Math.abs(_e-fe.left),Fe=Math.abs(_e-fe.right),Ne=Math.min(Re,Fe);this.data[K+_e]=Math.max(0,Math.min(255,(fe.isDash?Ne:-Ne)+128))}},U.prototype.addDash=function(m,A){var g=A?7:0,S=2*g+1;if(this.nextRow+S>this.height)return i.warnOnce("LineAtlas out of space"),null;for(var F=0,q=0;q<m.length;q++)F+=m[q];if(F!==0){var K=this.width/F,ie=this.getDashRanges(m,this.width,K);A?this.addRoundDash(ie,K,g):this.addRegularDash(ie)}var fe={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:F};return this.nextRow+=S,this.dirty=!0,fe},U.prototype.bind=function(m){var A=m.gl;this.texture?(A.bindTexture(A.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,A.texSubImage2D(A.TEXTURE_2D,0,0,0,this.width,this.height,A.ALPHA,A.UNSIGNED_BYTE,this.data))):(this.texture=A.createTexture(),A.bindTexture(A.TEXTURE_2D,this.texture),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.REPEAT),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.REPEAT),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.LINEAR),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.LINEAR),A.texImage2D(A.TEXTURE_2D,0,A.ALPHA,this.width,this.height,0,A.ALPHA,A.UNSIGNED_BYTE,this.data))};var re=function m(A,g){this.workerPool=A,this.actors=[],this.currentActor=0,this.id=i.uniqueId();for(var S=this.workerPool.acquire(this.id),F=0;F<S.length;F++){var q=new m.Actor(S[F],g,this.id);q.name="Worker "+F,this.actors.push(q)}};function ee(m,A,g){var S=function(F,q){if(F)return g(F);if(q){var K=i.pick(i.extend(q,m),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);q.vector_layers&&(K.vectorLayers=q.vector_layers,K.vectorLayerIds=K.vectorLayers.map(function(ie){return ie.id})),K.tiles=A.canonicalizeTileset(K,m.url),g(null,K)}};return m.url?i.getJSON(A.transformRequest(A.normalizeSourceURL(m.url),i.ResourceType.Source),S):i.browser.frame(function(){return S(null,m)})}re.prototype.broadcast=function(m,A,g){i.asyncAll(this.actors,function(S,F){S.send(m,A,F)},g=g||function(){})},re.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},re.prototype.remove=function(){this.actors.forEach(function(m){m.remove()}),this.actors=[],this.workerPool.release(this.id)},re.Actor=i.Actor;var pe=function(m,A,g){this.bounds=i.LngLatBounds.convert(this.validateBounds(m)),this.minzoom=A||0,this.maxzoom=g||24};pe.prototype.validateBounds=function(m){return Array.isArray(m)&&m.length===4?[Math.max(-180,m[0]),Math.max(-90,m[1]),Math.min(180,m[2]),Math.min(90,m[3])]:[-180,-90,180,90]},pe.prototype.contains=function(m){var A=Math.pow(2,m.z),g=Math.floor(i.mercatorXfromLng(this.bounds.getWest())*A),S=Math.floor(i.mercatorYfromLat(this.bounds.getNorth())*A),F=Math.ceil(i.mercatorXfromLng(this.bounds.getEast())*A),q=Math.ceil(i.mercatorYfromLat(this.bounds.getSouth())*A);return m.x>=g&&m.x<F&&m.y>=S&&m.y<q};var je=function(m){function A(g,S,F,q){if(m.call(this),this.id=g,this.dispatcher=F,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.extend(this,i.pick(S,["url","scheme","tileSize","promoteId"])),this._options=i.extend({type:"vector"},S),this._collectResourceTiming=S.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(q)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.load=function(){var g=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ee(this._options,this.map._requestManager,function(S,F){g._tileJSONRequest=null,g._loaded=!0,S?g.fire(new i.ErrorEvent(S)):F&&(i.extend(g,F),F.bounds&&(g.tileBounds=new pe(F.bounds,g.minzoom,g.maxzoom)),i.postTurnstileEvent(F.tiles,g.map._requestManager._customAccessToken),i.postMapLoadEvent(F.tiles,g.map._getMapId(),g.map._requestManager._skuToken,g.map._requestManager._customAccessToken),g.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),g.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))})},A.prototype.loaded=function(){return this._loaded},A.prototype.hasTile=function(g){return!this.tileBounds||this.tileBounds.contains(g.canonical)},A.prototype.onAdd=function(g){this.map=g,this.load()},A.prototype.setSourceProperty=function(g){this._tileJSONRequest&&this._tileJSONRequest.cancel(),g(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},A.prototype.setTiles=function(g){var S=this;return this.setSourceProperty(function(){S._options.tiles=g}),this},A.prototype.setUrl=function(g){var S=this;return this.setSourceProperty(function(){S.url=g,S._options.url=g}),this},A.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},A.prototype.serialize=function(){return i.extend({},this._options)},A.prototype.loadTile=function(g,S){var F=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme)),q={request:this.map._requestManager.transformRequest(F,i.ResourceType.Tile),uid:g.uid,tileID:g.tileID,zoom:g.tileID.overscaledZ,tileSize:this.tileSize*g.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:i.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function K(ie,fe){return delete g.request,g.aborted?S(null):ie&&ie.status!==404?S(ie):(fe&&fe.resourceTiming&&(g.resourceTiming=fe.resourceTiming),this.map._refreshExpiredTiles&&fe&&g.setExpiryData(fe),g.loadVectorData(fe,this.map.painter),i.cacheEntryPossiblyAdded(this.dispatcher),S(null),void(g.reloadCallback&&(this.loadTile(g,g.reloadCallback),g.reloadCallback=null)))}q.request.collectResourceTiming=this._collectResourceTiming,g.actor&&g.state!=="expired"?g.state==="loading"?g.reloadCallback=S:g.request=g.actor.send("reloadTile",q,K.bind(this)):(g.actor=this.dispatcher.getActor(),g.request=g.actor.send("loadTile",q,K.bind(this)))},A.prototype.abortTile=function(g){g.request&&(g.request.cancel(),delete g.request),g.actor&&g.actor.send("abortTile",{uid:g.uid,type:this.type,source:this.id},void 0)},A.prototype.unloadTile=function(g){g.unloadVectorData(),g.actor&&g.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id},void 0)},A.prototype.hasTransition=function(){return!1},A}(i.Evented),qe=function(m){function A(g,S,F,q){m.call(this),this.id=g,this.dispatcher=F,this.setEventedParent(q),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.extend({type:"raster"},S),i.extend(this,i.pick(S,["url","scheme","tileSize"]))}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.load=function(){var g=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ee(this._options,this.map._requestManager,function(S,F){g._tileJSONRequest=null,g._loaded=!0,S?g.fire(new i.ErrorEvent(S)):F&&(i.extend(g,F),F.bounds&&(g.tileBounds=new pe(F.bounds,g.minzoom,g.maxzoom)),i.postTurnstileEvent(F.tiles),i.postMapLoadEvent(F.tiles,g.map._getMapId(),g.map._requestManager._skuToken),g.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),g.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))})},A.prototype.loaded=function(){return this._loaded},A.prototype.onAdd=function(g){this.map=g,this.load()},A.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},A.prototype.serialize=function(){return i.extend({},this._options)},A.prototype.hasTile=function(g){return!this.tileBounds||this.tileBounds.contains(g.canonical)},A.prototype.loadTile=function(g,S){var F=this,q=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);g.request=i.getImage(this.map._requestManager.transformRequest(q,i.ResourceType.Tile),function(K,ie){if(delete g.request,g.aborted)g.state="unloaded",S(null);else if(K)g.state="errored",S(K);else if(ie){F.map._refreshExpiredTiles&&g.setExpiryData(ie),delete ie.cacheControl,delete ie.expires;var fe=F.map.painter.context,_e=fe.gl;g.texture=F.map.painter.getTileTexture(ie.width),g.texture?g.texture.update(ie,{useMipmap:!0}):(g.texture=new i.Texture(fe,ie,_e.RGBA,{useMipmap:!0}),g.texture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE,_e.LINEAR_MIPMAP_NEAREST),fe.extTextureFilterAnisotropic&&_e.texParameterf(_e.TEXTURE_2D,fe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,fe.extTextureFilterAnisotropicMax)),g.state="loaded",i.cacheEntryPossiblyAdded(F.dispatcher),S(null)}})},A.prototype.abortTile=function(g,S){g.request&&(g.request.cancel(),delete g.request),S()},A.prototype.unloadTile=function(g,S){g.texture&&this.map.painter.saveTileTexture(g.texture),S()},A.prototype.hasTransition=function(){return!1},A}(i.Evented),We=function(m){function A(g,S,F,q){m.call(this,g,S,F,q),this.type="raster-dem",this.maxzoom=22,this._options=i.extend({type:"raster-dem"},S),this.encoding=S.encoding||"mapbox"}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},A.prototype.loadTile=function(g,S){var F=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function q(K,ie){K&&(g.state="errored",S(K)),ie&&(g.dem=ie,g.needsHillshadePrepare=!0,g.state="loaded",S(null))}g.request=i.getImage(this.map._requestManager.transformRequest(F,i.ResourceType.Tile),function(K,ie){if(delete g.request,g.aborted)g.state="unloaded",S(null);else if(K)g.state="errored",S(K);else if(ie){this.map._refreshExpiredTiles&&g.setExpiryData(ie),delete ie.cacheControl,delete ie.expires;var fe=i.window.ImageBitmap&&ie instanceof i.window.ImageBitmap&&i.offscreenCanvasSupported()?ie:i.browser.getImageData(ie,1),_e={uid:g.uid,coord:g.tileID,source:this.id,rawImageData:fe,encoding:this.encoding};g.actor&&g.state!=="expired"||(g.actor=this.dispatcher.getActor(),g.actor.send("loadDEMTile",_e,q.bind(this)))}}.bind(this)),g.neighboringTiles=this._getNeighboringTiles(g.tileID)},A.prototype._getNeighboringTiles=function(g){var S=g.canonical,F=Math.pow(2,S.z),q=(S.x-1+F)%F,K=S.x===0?g.wrap-1:g.wrap,ie=(S.x+1+F)%F,fe=S.x+1===F?g.wrap+1:g.wrap,_e={};return _e[new i.OverscaledTileID(g.overscaledZ,K,S.z,q,S.y).key]={backfilled:!1},_e[new i.OverscaledTileID(g.overscaledZ,fe,S.z,ie,S.y).key]={backfilled:!1},S.y>0&&(_e[new i.OverscaledTileID(g.overscaledZ,K,S.z,q,S.y-1).key]={backfilled:!1},_e[new i.OverscaledTileID(g.overscaledZ,g.wrap,S.z,S.x,S.y-1).key]={backfilled:!1},_e[new i.OverscaledTileID(g.overscaledZ,fe,S.z,ie,S.y-1).key]={backfilled:!1}),S.y+1<F&&(_e[new i.OverscaledTileID(g.overscaledZ,K,S.z,q,S.y+1).key]={backfilled:!1},_e[new i.OverscaledTileID(g.overscaledZ,g.wrap,S.z,S.x,S.y+1).key]={backfilled:!1},_e[new i.OverscaledTileID(g.overscaledZ,fe,S.z,ie,S.y+1).key]={backfilled:!1}),_e},A.prototype.unloadTile=function(g){g.demTexture&&this.map.painter.saveTileTexture(g.demTexture),g.fbo&&(g.fbo.destroy(),delete g.fbo),g.dem&&delete g.dem,delete g.neighboringTiles,g.state="unloaded",g.actor&&g.actor.send("removeDEMTile",{uid:g.uid,source:this.id})},A}(qe),ot=function(m){function A(g,S,F,q){m.call(this),this.id=g,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=F.getActor(),this.setEventedParent(q),this._data=S.data,this._options=i.extend({},S),this._collectResourceTiming=S.collectResourceTiming,this._resourceTiming=[],S.maxzoom!==void 0&&(this.maxzoom=S.maxzoom),S.type&&(this.type=S.type),S.attribution&&(this.attribution=S.attribution),this.promoteId=S.promoteId;var K=i.EXTENT/this.tileSize;this.workerOptions=i.extend({source:this.id,cluster:S.cluster||!1,geojsonVtOptions:{buffer:(S.buffer!==void 0?S.buffer:128)*K,tolerance:(S.tolerance!==void 0?S.tolerance:.375)*K,extent:i.EXTENT,maxZoom:this.maxzoom,lineMetrics:S.lineMetrics||!1,generateId:S.generateId||!1},superclusterOptions:{maxZoom:S.clusterMaxZoom!==void 0?Math.min(S.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,S.clusterMinPoints||2),extent:i.EXTENT,radius:(S.clusterRadius||50)*K,log:!1,generateId:S.generateId||!1},clusterProperties:S.clusterProperties,filter:S.filter},S.workerOptions)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.load=function(){var g=this;this.fire(new i.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(S){if(S)g.fire(new i.ErrorEvent(S));else{var F={dataType:"source",sourceDataType:"metadata"};g._collectResourceTiming&&g._resourceTiming&&g._resourceTiming.length>0&&(F.resourceTiming=g._resourceTiming,g._resourceTiming=[]),g.fire(new i.Event("data",F))}})},A.prototype.onAdd=function(g){this.map=g,this.load()},A.prototype.setData=function(g){var S=this;return this._data=g,this.fire(new i.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(F){if(F)S.fire(new i.ErrorEvent(F));else{var q={dataType:"source",sourceDataType:"content"};S._collectResourceTiming&&S._resourceTiming&&S._resourceTiming.length>0&&(q.resourceTiming=S._resourceTiming,S._resourceTiming=[]),S.fire(new i.Event("data",q))}}),this},A.prototype.getClusterExpansionZoom=function(g,S){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:g,source:this.id},S),this},A.prototype.getClusterChildren=function(g,S){return this.actor.send("geojson.getClusterChildren",{clusterId:g,source:this.id},S),this},A.prototype.getClusterLeaves=function(g,S,F,q){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:g,limit:S,offset:F},q),this},A.prototype._updateWorkerData=function(g){var S=this;this._loaded=!1;var F=i.extend({},this.workerOptions),q=this._data;typeof q=="string"?(F.request=this.map._requestManager.transformRequest(i.browser.resolveURL(q),i.ResourceType.Source),F.request.collectResourceTiming=this._collectResourceTiming):F.data=JSON.stringify(q),this.actor.send(this.type+".loadData",F,function(K,ie){S._removed||ie&&ie.abandoned||(S._loaded=!0,ie&&ie.resourceTiming&&ie.resourceTiming[S.id]&&(S._resourceTiming=ie.resourceTiming[S.id].slice(0)),S.actor.send(S.type+".coalesce",{source:F.source},null),g(K))})},A.prototype.loaded=function(){return this._loaded},A.prototype.loadTile=function(g,S){var F=this,q=g.actor?"reloadTile":"loadTile";g.actor=this.actor,g.request=this.actor.send(q,{type:this.type,uid:g.uid,tileID:g.tileID,zoom:g.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:i.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(K,ie){return delete g.request,g.unloadVectorData(),g.aborted?S(null):K?S(K):(g.loadVectorData(ie,F.map.painter,q==="reloadTile"),S(null))})},A.prototype.abortTile=function(g){g.request&&(g.request.cancel(),delete g.request),g.aborted=!0},A.prototype.unloadTile=function(g){g.unloadVectorData(),this.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id})},A.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},A.prototype.serialize=function(){return i.extend({},this._options,{type:this.type,data:this._data})},A.prototype.hasTransition=function(){return!1},A}(i.Evented),gt=i.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Pt=function(m){function A(g,S,F,q){m.call(this),this.id=g,this.dispatcher=F,this.coordinates=S.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(q),this.options=S}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.load=function(g,S){var F=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this.url=this.options.url,i.getImage(this.map._requestManager.transformRequest(this.url,i.ResourceType.Image),function(q,K){F._loaded=!0,q?F.fire(new i.ErrorEvent(q)):K&&(F.image=K,g&&(F.coordinates=g),S&&S(),F._finishLoading())})},A.prototype.loaded=function(){return this._loaded},A.prototype.updateImage=function(g){var S=this;return this.image&&g.url?(this.options.url=g.url,this.load(g.coordinates,function(){S.texture=null}),this):this},A.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})))},A.prototype.onAdd=function(g){this.map=g,this.load()},A.prototype.setCoordinates=function(g){var S=this;this.coordinates=g;var F=g.map(i.MercatorCoordinate.fromLngLat);this.tileID=function(K){for(var ie=1/0,fe=1/0,_e=-1/0,Re=-1/0,Fe=0,Ne=K;Fe<Ne.length;Fe+=1){var Je=Ne[Fe];ie=Math.min(ie,Je.x),fe=Math.min(fe,Je.y),_e=Math.max(_e,Je.x),Re=Math.max(Re,Je.y)}var Ze=Math.max(_e-ie,Re-fe),ct=Math.max(0,Math.floor(-Math.log(Ze)/Math.LN2)),Xe=Math.pow(2,ct);return new i.CanonicalTileID(ct,Math.floor((ie+_e)/2*Xe),Math.floor((fe+Re)/2*Xe))}(F),this.minzoom=this.maxzoom=this.tileID.z;var q=F.map(function(K){return S.tileID.getTilePoint(K)._round()});return this._boundsArray=new i.StructArrayLayout4i8,this._boundsArray.emplaceBack(q[0].x,q[0].y,0,0),this._boundsArray.emplaceBack(q[1].x,q[1].y,i.EXTENT,0),this._boundsArray.emplaceBack(q[3].x,q[3].y,0,i.EXTENT),this._boundsArray.emplaceBack(q[2].x,q[2].y,i.EXTENT,i.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})),this},A.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var g=this.map.painter.context,S=g.gl;for(var F in this.boundsBuffer||(this.boundsBuffer=g.createVertexBuffer(this._boundsArray,gt.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new i.Texture(g,this.image,S.RGBA),this.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE)),this.tiles){var q=this.tiles[F];q.state!=="loaded"&&(q.state="loaded",q.texture=this.texture)}}},A.prototype.loadTile=function(g,S){this.tileID&&this.tileID.equals(g.tileID.canonical)?(this.tiles[String(g.tileID.wrap)]=g,g.buckets={},S(null)):(g.state="errored",S(null))},A.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},A.prototype.hasTransition=function(){return!1},A}(i.Evented),Dt=function(m){function A(g,S,F,q){m.call(this,g,S,F,q),this.roundZoom=!0,this.type="video",this.options=S}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.load=function(){var g=this;this._loaded=!1;var S=this.options;this.urls=[];for(var F=0,q=S.urls;F<q.length;F+=1)this.urls.push(this.map._requestManager.transformRequest(q[F],i.ResourceType.Source).url);i.getVideo(this.urls,function(K,ie){g._loaded=!0,K?g.fire(new i.ErrorEvent(K)):ie&&(g.video=ie,g.video.loop=!0,g.video.addEventListener("playing",function(){g.map.triggerRepaint()}),g.map&&g.video.play(),g._finishLoading())})},A.prototype.pause=function(){this.video&&this.video.pause()},A.prototype.play=function(){this.video&&this.video.play()},A.prototype.seek=function(g){if(this.video){var S=this.video.seekable;g<S.start(0)||g>S.end(0)?this.fire(new i.ErrorEvent(new i.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+S.start(0)+" and "+S.end(0)+"-second mark."))):this.video.currentTime=g}},A.prototype.getVideo=function(){return this.video},A.prototype.onAdd=function(g){this.map||(this.map=g,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},A.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var g=this.map.painter.context,S=g.gl;for(var F in this.boundsBuffer||(this.boundsBuffer=g.createVertexBuffer(this._boundsArray,gt.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE),S.texSubImage2D(S.TEXTURE_2D,0,0,0,S.RGBA,S.UNSIGNED_BYTE,this.video)):(this.texture=new i.Texture(g,this.video,S.RGBA),this.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE)),this.tiles){var q=this.tiles[F];q.state!=="loaded"&&(q.state="loaded",q.texture=this.texture)}}},A.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},A.prototype.hasTransition=function(){return this.video&&!this.video.paused},A}(Pt),nr=function(m){function A(g,S,F,q){m.call(this,g,S,F,q),S.coordinates?Array.isArray(S.coordinates)&&S.coordinates.length===4&&!S.coordinates.some(function(K){return!Array.isArray(K)||K.length!==2||K.some(function(ie){return typeof ie!="number"})})||this.fire(new i.ErrorEvent(new i.ValidationError("sources."+g,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+g,null,'missing required property "coordinates"'))),S.animate&&typeof S.animate!="boolean"&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+g,null,'optional "animate" property must be a boolean value'))),S.canvas?typeof S.canvas=="string"||S.canvas instanceof i.window.HTMLCanvasElement||this.fire(new i.ErrorEvent(new i.ValidationError("sources."+g,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+g,null,'missing required property "canvas"'))),this.options=S,this.animate=S.animate===void 0||S.animate}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof i.window.HTMLCanvasElement?this.options.canvas:i.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new i.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},A.prototype.getCanvas=function(){return this.canvas},A.prototype.onAdd=function(g){this.map=g,this.load(),this.canvas&&this.animate&&this.play()},A.prototype.onRemove=function(){this.pause()},A.prototype.prepare=function(){var g=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,g=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,g=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var S=this.map.painter.context,F=S.gl;for(var q in this.boundsBuffer||(this.boundsBuffer=S.createVertexBuffer(this._boundsArray,gt.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(g||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.Texture(S,this.canvas,F.RGBA,{premultiply:!0}),this.tiles){var K=this.tiles[q];K.state!=="loaded"&&(K.state="loaded",K.texture=this.texture)}}},A.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},A.prototype.hasTransition=function(){return this._playing},A.prototype._hasInvalidDimensions=function(){for(var g=0,S=[this.canvas.width,this.canvas.height];g<S.length;g+=1){var F=S[g];if(isNaN(F)||F<=0)return!0}return!1},A}(Pt),Nt={vector:je,raster:qe,"raster-dem":We,geojson:ot,video:Dt,image:Pt,canvas:nr};function Ut(m,A){var g=i.identity([]);return i.translate(g,g,[1,1,0]),i.scale(g,g,[.5*m.width,.5*m.height,1]),i.multiply(g,g,m.calculatePosMatrix(A.toUnwrapped()))}function Or(m,A,g,S,F,q){var K=function(ct,Xe,st){if(ct)for(var yt=0,Lt=ct;yt<Lt.length;yt+=1){var Jt=Xe[Lt[yt]];if(Jt&&Jt.source===st&&Jt.type==="fill-extrusion")return!0}else for(var Ht in Xe){var er=Xe[Ht];if(er.source===st&&er.type==="fill-extrusion")return!0}return!1}(F&&F.layers,A,m.id),ie=q.maxPitchScaleFactor(),fe=m.tilesIn(S,ie,K);fe.sort(he);for(var _e=[],Re=0,Fe=fe;Re<Fe.length;Re+=1){var Ne=Fe[Re];_e.push({wrappedTileID:Ne.tileID.wrapped().key,queryResults:Ne.tile.queryRenderedFeatures(A,g,m._state,Ne.queryGeometry,Ne.cameraQueryGeometry,Ne.scale,F,q,ie,Ut(m.transform,Ne.tileID))})}var Je=function(ct){for(var Xe={},st={},yt=0,Lt=ct;yt<Lt.length;yt+=1){var Jt=Lt[yt],Ht=Jt.queryResults,er=Jt.wrappedTileID,pr=st[er]=st[er]||{};for(var Sr in Ht)for(var Tr=Ht[Sr],Xr=pr[Sr]=pr[Sr]||{},Tn=Xe[Sr]=Xe[Sr]||[],Ln=0,In=Tr;Ln<In.length;Ln+=1){var zi=In[Ln];Xr[zi.featureIndex]||(Xr[zi.featureIndex]=!0,Tn.push(zi))}}return Xe}(_e);for(var Ze in Je)Je[Ze].forEach(function(ct){var Xe=ct.feature,st=m.getFeatureState(Xe.layer["source-layer"],Xe.id);Xe.source=Xe.layer.source,Xe.layer["source-layer"]&&(Xe.sourceLayer=Xe.layer["source-layer"]),Xe.state=st});return Je}function he(m,A){var g=m.tileID,S=A.tileID;return g.overscaledZ-S.overscaledZ||g.canonical.y-S.canonical.y||g.wrap-S.wrap||g.canonical.x-S.canonical.x}var xe=function(m,A){this.max=m,this.onRemove=A,this.reset()};xe.prototype.reset=function(){for(var m in this.data)for(var A=0,g=this.data[m];A<g.length;A+=1){var S=g[A];S.timeout&&clearTimeout(S.timeout),this.onRemove(S.value)}return this.data={},this.order=[],this},xe.prototype.add=function(m,A,g){var S=this,F=m.wrapped().key;this.data[F]===void 0&&(this.data[F]=[]);var q={value:A,timeout:void 0};if(g!==void 0&&(q.timeout=setTimeout(function(){S.remove(m,q)},g)),this.data[F].push(q),this.order.push(F),this.order.length>this.max){var K=this._getAndRemoveByKey(this.order[0]);K&&this.onRemove(K)}return this},xe.prototype.has=function(m){return m.wrapped().key in this.data},xe.prototype.getAndRemove=function(m){return this.has(m)?this._getAndRemoveByKey(m.wrapped().key):null},xe.prototype._getAndRemoveByKey=function(m){var A=this.data[m].shift();return A.timeout&&clearTimeout(A.timeout),this.data[m].length===0&&delete this.data[m],this.order.splice(this.order.indexOf(m),1),A.value},xe.prototype.getByKey=function(m){var A=this.data[m];return A?A[0].value:null},xe.prototype.get=function(m){return this.has(m)?this.data[m.wrapped().key][0].value:null},xe.prototype.remove=function(m,A){if(!this.has(m))return this;var g=m.wrapped().key,S=A===void 0?0:this.data[g].indexOf(A),F=this.data[g][S];return this.data[g].splice(S,1),F.timeout&&clearTimeout(F.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(F.value),this.order.splice(this.order.indexOf(g),1),this},xe.prototype.setMaxSize=function(m){for(this.max=m;this.order.length>this.max;){var A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this},xe.prototype.filter=function(m){var A=[];for(var g in this.data)for(var S=0,F=this.data[g];S<F.length;S+=1){var q=F[S];m(q.value)||A.push(q)}for(var K=0,ie=A;K<ie.length;K+=1){var fe=ie[K];this.remove(fe.value.tileID,fe)}};var Ge=function(m,A,g){this.context=m;var S=m.gl;this.buffer=S.createBuffer(),this.dynamicDraw=Boolean(g),this.context.unbindVAO(),m.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,A.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete A.arrayBuffer};Ge.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Ge.prototype.updateData=function(m){var A=this.context.gl;this.context.unbindVAO(),this.bind(),A.bufferSubData(A.ELEMENT_ARRAY_BUFFER,0,m.arrayBuffer)},Ge.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var bt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Kt=function(m,A,g,S){this.length=A.length,this.attributes=g,this.itemSize=A.bytesPerElement,this.dynamicDraw=S,this.context=m;var F=m.gl;this.buffer=F.createBuffer(),m.bindVertexBuffer.set(this.buffer),F.bufferData(F.ARRAY_BUFFER,A.arrayBuffer,this.dynamicDraw?F.DYNAMIC_DRAW:F.STATIC_DRAW),this.dynamicDraw||delete A.arrayBuffer};Kt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Kt.prototype.updateData=function(m){var A=this.context.gl;this.bind(),A.bufferSubData(A.ARRAY_BUFFER,0,m.arrayBuffer)},Kt.prototype.enableAttributes=function(m,A){for(var g=0;g<this.attributes.length;g++){var S=A.attributes[this.attributes[g].name];S!==void 0&&m.enableVertexAttribArray(S)}},Kt.prototype.setVertexAttribPointers=function(m,A,g){for(var S=0;S<this.attributes.length;S++){var F=this.attributes[S],q=A.attributes[F.name];q!==void 0&&m.vertexAttribPointer(q,F.components,m[bt[F.type]],!1,this.itemSize,F.offset+this.itemSize*(g||0))}},Kt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Gt=function(m){this.gl=m.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Gt.prototype.get=function(){return this.current},Gt.prototype.set=function(m){},Gt.prototype.getDefault=function(){return this.default},Gt.prototype.setDefault=function(){this.set(this.default)};var tn=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return i.Color.transparent},A.prototype.set=function(g){var S=this.current;(g.r!==S.r||g.g!==S.g||g.b!==S.b||g.a!==S.a||this.dirty)&&(this.gl.clearColor(g.r,g.g,g.b,g.a),this.current=g,this.dirty=!1)},A}(Gt),an=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return 1},A.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.clearDepth(g),this.current=g,this.dirty=!1)},A}(Gt),Fn=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return 0},A.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.clearStencil(g),this.current=g,this.dirty=!1)},A}(Gt),wr=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return[!0,!0,!0,!0]},A.prototype.set=function(g){var S=this.current;(g[0]!==S[0]||g[1]!==S[1]||g[2]!==S[2]||g[3]!==S[3]||this.dirty)&&(this.gl.colorMask(g[0],g[1],g[2],g[3]),this.current=g,this.dirty=!1)},A}(Gt),Nn=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return!0},A.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.depthMask(g),this.current=g,this.dirty=!1)},A}(Gt),pi=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return 255},A.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.stencilMask(g),this.current=g,this.dirty=!1)},A}(Gt),Ti=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},A.prototype.set=function(g){var S=this.current;(g.func!==S.func||g.ref!==S.ref||g.mask!==S.mask||this.dirty)&&(this.gl.stencilFunc(g.func,g.ref,g.mask),this.current=g,this.dirty=!1)},A}(Gt),ka=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){var g=this.gl;return[g.KEEP,g.KEEP,g.KEEP]},A.prototype.set=function(g){var S=this.current;(g[0]!==S[0]||g[1]!==S[1]||g[2]!==S[2]||this.dirty)&&(this.gl.stencilOp(g[0],g[1],g[2]),this.current=g,this.dirty=!1)},A}(Gt),si=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return!1},A.prototype.set=function(g){if(g!==this.current||this.dirty){var S=this.gl;g?S.enable(S.STENCIL_TEST):S.disable(S.STENCIL_TEST),this.current=g,this.dirty=!1}},A}(Gt),Hn=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return[0,1]},A.prototype.set=function(g){var S=this.current;(g[0]!==S[0]||g[1]!==S[1]||this.dirty)&&(this.gl.depthRange(g[0],g[1]),this.current=g,this.dirty=!1)},A}(Gt),Di=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return!1},A.prototype.set=function(g){if(g!==this.current||this.dirty){var S=this.gl;g?S.enable(S.DEPTH_TEST):S.disable(S.DEPTH_TEST),this.current=g,this.dirty=!1}},A}(Gt),Yi=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return this.gl.LESS},A.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.depthFunc(g),this.current=g,this.dirty=!1)},A}(Gt),di=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return!1},A.prototype.set=function(g){if(g!==this.current||this.dirty){var S=this.gl;g?S.enable(S.BLEND):S.disable(S.BLEND),this.current=g,this.dirty=!1}},A}(Gt),jr=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){var g=this.gl;return[g.ONE,g.ZERO]},A.prototype.set=function(g){var S=this.current;(g[0]!==S[0]||g[1]!==S[1]||this.dirty)&&(this.gl.blendFunc(g[0],g[1]),this.current=g,this.dirty=!1)},A}(Gt),Jr=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return i.Color.transparent},A.prototype.set=function(g){var S=this.current;(g.r!==S.r||g.g!==S.g||g.b!==S.b||g.a!==S.a||this.dirty)&&(this.gl.blendColor(g.r,g.g,g.b,g.a),this.current=g,this.dirty=!1)},A}(Gt),Br=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return this.gl.FUNC_ADD},A.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.blendEquation(g),this.current=g,this.dirty=!1)},A}(Gt),Gi=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return!1},A.prototype.set=function(g){if(g!==this.current||this.dirty){var S=this.gl;g?S.enable(S.CULL_FACE):S.disable(S.CULL_FACE),this.current=g,this.dirty=!1}},A}(Gt),Li=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return this.gl.BACK},A.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.cullFace(g),this.current=g,this.dirty=!1)},A}(Gt),Ua=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return this.gl.CCW},A.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.frontFace(g),this.current=g,this.dirty=!1)},A}(Gt),_a=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.useProgram(g),this.current=g,this.dirty=!1)},A}(Gt),Bo=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return this.gl.TEXTURE0},A.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.activeTexture(g),this.current=g,this.dirty=!1)},A}(Gt),Ka=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){var g=this.gl;return[0,0,g.drawingBufferWidth,g.drawingBufferHeight]},A.prototype.set=function(g){var S=this.current;(g[0]!==S[0]||g[1]!==S[1]||g[2]!==S[2]||g[3]!==S[3]||this.dirty)&&(this.gl.viewport(g[0],g[1],g[2],g[3]),this.current=g,this.dirty=!1)},A}(Gt),Qs=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(g){if(g!==this.current||this.dirty){var S=this.gl;S.bindFramebuffer(S.FRAMEBUFFER,g),this.current=g,this.dirty=!1}},A}(Gt),co=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(g){if(g!==this.current||this.dirty){var S=this.gl;S.bindRenderbuffer(S.RENDERBUFFER,g),this.current=g,this.dirty=!1}},A}(Gt),fo=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(g){if(g!==this.current||this.dirty){var S=this.gl;S.bindTexture(S.TEXTURE_2D,g),this.current=g,this.dirty=!1}},A}(Gt),fs=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(g){if(g!==this.current||this.dirty){var S=this.gl;S.bindBuffer(S.ARRAY_BUFFER,g),this.current=g,this.dirty=!1}},A}(Gt),gu=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(g){var S=this.gl;S.bindBuffer(S.ELEMENT_ARRAY_BUFFER,g),this.current=g,this.dirty=!1},A}(Gt),Hs=function(m){function A(g){m.call(this,g),this.vao=g.extVertexArrayObject}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A.prototype.set=function(g){this.vao&&(g!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(g),this.current=g,this.dirty=!1)},A}(Gt),Ss=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return 4},A.prototype.set=function(g){if(g!==this.current||this.dirty){var S=this.gl;S.pixelStorei(S.UNPACK_ALIGNMENT,g),this.current=g,this.dirty=!1}},A}(Gt),Au=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return!1},A.prototype.set=function(g){if(g!==this.current||this.dirty){var S=this.gl;S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g),this.current=g,this.dirty=!1}},A}(Gt),yu=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return!1},A.prototype.set=function(g){if(g!==this.current||this.dirty){var S=this.gl;S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,g),this.current=g,this.dirty=!1}},A}(Gt),ra=function(m){function A(g,S){m.call(this,g),this.context=g,this.parent=S}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getDefault=function(){return null},A}(Gt),ge=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.setDirty=function(){this.dirty=!0},A.prototype.set=function(g){if(g!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var S=this.gl;S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,g,0),this.current=g,this.dirty=!1}},A}(ra),Te=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.set=function(g){if(g!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var S=this.gl;S.framebufferRenderbuffer(S.FRAMEBUFFER,S.DEPTH_ATTACHMENT,S.RENDERBUFFER,g),this.current=g,this.dirty=!1}},A}(ra),Oe=function(m,A,g,S){this.context=m,this.width=A,this.height=g;var F=this.framebuffer=m.gl.createFramebuffer();this.colorAttachment=new ge(m,F),S&&(this.depthAttachment=new Te(m,F))};Oe.prototype.destroy=function(){var m=this.context.gl,A=this.colorAttachment.get();if(A&&m.deleteTexture(A),this.depthAttachment){var g=this.depthAttachment.get();g&&m.deleteRenderbuffer(g)}m.deleteFramebuffer(this.framebuffer)};var ze=function(m,A,g){this.func=m,this.mask=A,this.range=g};ze.ReadOnly=!1,ze.ReadWrite=!0,ze.disabled=new ze(519,ze.ReadOnly,[0,1]);var Ie=function(m,A,g,S,F,q){this.test=m,this.ref=A,this.mask=g,this.fail=S,this.depthFail=F,this.pass=q};Ie.disabled=new Ie({func:519,mask:0},0,0,7680,7680,7680);var pt=function(m,A,g){this.blendFunction=m,this.blendColor=A,this.mask=g};pt.disabled=new pt(pt.Replace=[1,0],i.Color.transparent,[!1,!1,!1,!1]),pt.unblended=new pt(pt.Replace,i.Color.transparent,[!0,!0,!0,!0]),pt.alphaBlended=new pt([1,771],i.Color.transparent,[!0,!0,!0,!0]);var At=function(m,A,g){this.enable=m,this.mode=A,this.frontFace=g};At.disabled=new At(!1,1029,2305),At.backCCW=new At(!0,1029,2305);var De=function(m){this.gl=m,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new tn(this),this.clearDepth=new an(this),this.clearStencil=new Fn(this),this.colorMask=new wr(this),this.depthMask=new Nn(this),this.stencilMask=new pi(this),this.stencilFunc=new Ti(this),this.stencilOp=new ka(this),this.stencilTest=new si(this),this.depthRange=new Hn(this),this.depthTest=new Di(this),this.depthFunc=new Yi(this),this.blend=new di(this),this.blendFunc=new jr(this),this.blendColor=new Jr(this),this.blendEquation=new Br(this),this.cullFace=new Gi(this),this.cullFaceSide=new Li(this),this.frontFace=new Ua(this),this.program=new _a(this),this.activeTexture=new Bo(this),this.viewport=new Ka(this),this.bindFramebuffer=new Qs(this),this.bindRenderbuffer=new co(this),this.bindTexture=new fo(this),this.bindVertexBuffer=new fs(this),this.bindElementBuffer=new gu(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Hs(this),this.pixelStoreUnpack=new Ss(this),this.pixelStoreUnpackPremultiplyAlpha=new Au(this),this.pixelStoreUnpackFlipY=new yu(this),this.extTextureFilterAnisotropic=m.getExtension("EXT_texture_filter_anisotropic")||m.getExtension("MOZ_EXT_texture_filter_anisotropic")||m.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=m.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=m.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(m.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=m.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=m.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=m.getParameter(m.MAX_TEXTURE_SIZE)};De.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},De.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},De.prototype.createIndexBuffer=function(m,A){return new Ge(this,m,A)},De.prototype.createVertexBuffer=function(m,A,g){return new Kt(this,m,A,g)},De.prototype.createRenderbuffer=function(m,A,g){var S=this.gl,F=S.createRenderbuffer();return this.bindRenderbuffer.set(F),S.renderbufferStorage(S.RENDERBUFFER,m,A,g),this.bindRenderbuffer.set(null),F},De.prototype.createFramebuffer=function(m,A,g){return new Oe(this,m,A,g)},De.prototype.clear=function(m){var A=m.color,g=m.depth,S=this.gl,F=0;A&&(F|=S.COLOR_BUFFER_BIT,this.clearColor.set(A),this.colorMask.set([!0,!0,!0,!0])),g!==void 0&&(F|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(g),this.depthMask.set(!0)),S.clear(F)},De.prototype.setCullFace=function(m){m.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(m.mode),this.frontFace.set(m.frontFace))},De.prototype.setDepthMode=function(m){m.func!==this.gl.ALWAYS||m.mask?(this.depthTest.set(!0),this.depthFunc.set(m.func),this.depthMask.set(m.mask),this.depthRange.set(m.range)):this.depthTest.set(!1)},De.prototype.setStencilMode=function(m){m.test.func!==this.gl.ALWAYS||m.mask?(this.stencilTest.set(!0),this.stencilMask.set(m.mask),this.stencilOp.set([m.fail,m.depthFail,m.pass]),this.stencilFunc.set({func:m.test.func,ref:m.ref,mask:m.test.mask})):this.stencilTest.set(!1)},De.prototype.setColorMode=function(m){i.deepEqual(m.blendFunction,pt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(m.blendFunction),this.blendColor.set(m.blendColor)),this.colorMask.set(m.mask)},De.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Qe=function(m){function A(g,S,F){var q=this;m.call(this),this.id=g,this.dispatcher=F,this.on("data",function(K){K.dataType==="source"&&K.sourceDataType==="metadata"&&(q._sourceLoaded=!0),q._sourceLoaded&&!q._paused&&K.dataType==="source"&&K.sourceDataType==="content"&&(q.reload(),q.transform&&q.update(q.transform))}),this.on("error",function(){q._sourceErrored=!0}),this._source=function(K,ie,fe,_e){var Re=new Nt[ie.type](K,ie,fe,_e);if(Re.id!==K)throw new Error("Expected Source id to be "+K+" instead of "+Re.id);return i.bindAll(["load","abort","unload","serialize","prepare"],Re),Re}(g,S,F,this),this._tiles={},this._cache=new xe(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new i.SourceFeatureState}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.onAdd=function(g){this.map=g,this._maxTileCacheSize=g?g._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(g)},A.prototype.onRemove=function(g){this._source&&this._source.onRemove&&this._source.onRemove(g)},A.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var g in this._tiles){var S=this._tiles[g];if(S.state!=="loaded"&&S.state!=="errored")return!1}return!0},A.prototype.getSource=function(){return this._source},A.prototype.pause=function(){this._paused=!0},A.prototype.resume=function(){if(this._paused){var g=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,g&&this.reload(),this.transform&&this.update(this.transform)}},A.prototype._loadTile=function(g,S){return this._source.loadTile(g,S)},A.prototype._unloadTile=function(g){if(this._source.unloadTile)return this._source.unloadTile(g,function(){})},A.prototype._abortTile=function(g){if(this._source.abortTile)return this._source.abortTile(g,function(){})},A.prototype.serialize=function(){return this._source.serialize()},A.prototype.prepare=function(g){for(var S in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var F=this._tiles[S];F.upload(g),F.prepare(this.map.style.imageManager)}},A.prototype.getIds=function(){return i.values(this._tiles).map(function(g){return g.tileID}).sort(It).map(function(g){return g.key})},A.prototype.getRenderableIds=function(g){var S=this,F=[];for(var q in this._tiles)this._isIdRenderable(q,g)&&F.push(this._tiles[q]);return g?F.sort(function(K,ie){var fe=K.tileID,_e=ie.tileID,Re=new i.Point(fe.canonical.x,fe.canonical.y)._rotate(S.transform.angle),Fe=new i.Point(_e.canonical.x,_e.canonical.y)._rotate(S.transform.angle);return fe.overscaledZ-_e.overscaledZ||Fe.y-Re.y||Fe.x-Re.x}).map(function(K){return K.tileID.key}):F.map(function(K){return K.tileID}).sort(It).map(function(K){return K.key})},A.prototype.hasRenderableParent=function(g){var S=this.findLoadedParent(g,0);return!!S&&this._isIdRenderable(S.tileID.key)},A.prototype._isIdRenderable=function(g,S){return this._tiles[g]&&this._tiles[g].hasData()&&!this._coveredTiles[g]&&(S||!this._tiles[g].holdingForFade())},A.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var g in this._cache.reset(),this._tiles)this._tiles[g].state!=="errored"&&this._reloadTile(g,"reloading")},A.prototype._reloadTile=function(g,S){var F=this._tiles[g];F&&(F.state!=="loading"&&(F.state=S),this._loadTile(F,this._tileLoaded.bind(this,F,g,S)))},A.prototype._tileLoaded=function(g,S,F,q){if(q)return g.state="errored",void(q.status!==404?this._source.fire(new i.ErrorEvent(q,{tile:g})):this.update(this.transform));g.timeAdded=i.browser.now(),F==="expired"&&(g.refreshedUponExpiration=!0),this._setTileReloadTimer(S,g),this.getSource().type==="raster-dem"&&g.dem&&this._backfillDEM(g),this._state.initializeTileState(g,this.map?this.map.painter:null),this._source.fire(new i.Event("data",{dataType:"source",tile:g,coord:g.tileID}))},A.prototype._backfillDEM=function(g){for(var S=this.getRenderableIds(),F=0;F<S.length;F++){var q=S[F];if(g.neighboringTiles&&g.neighboringTiles[q]){var K=this.getTileByID(q);ie(g,K),ie(K,g)}}function ie(fe,_e){fe.needsHillshadePrepare=!0;var Re=_e.tileID.canonical.x-fe.tileID.canonical.x,Fe=_e.tileID.canonical.y-fe.tileID.canonical.y,Ne=Math.pow(2,fe.tileID.canonical.z),Je=_e.tileID.key;Re===0&&Fe===0||Math.abs(Fe)>1||(Math.abs(Re)>1&&(Math.abs(Re+Ne)===1?Re+=Ne:Math.abs(Re-Ne)===1&&(Re-=Ne)),_e.dem&&fe.dem&&(fe.dem.backfillBorder(_e.dem,Re,Fe),fe.neighboringTiles&&fe.neighboringTiles[Je]&&(fe.neighboringTiles[Je].backfilled=!0)))}},A.prototype.getTile=function(g){return this.getTileByID(g.key)},A.prototype.getTileByID=function(g){return this._tiles[g]},A.prototype._retainLoadedChildren=function(g,S,F,q){for(var K in this._tiles){var ie=this._tiles[K];if(!(q[K]||!ie.hasData()||ie.tileID.overscaledZ<=S||ie.tileID.overscaledZ>F)){for(var fe=ie.tileID;ie&&ie.tileID.overscaledZ>S+1;){var _e=ie.tileID.scaledTo(ie.tileID.overscaledZ-1);(ie=this._tiles[_e.key])&&ie.hasData()&&(fe=_e)}for(var Re=fe;Re.overscaledZ>S;)if(g[(Re=Re.scaledTo(Re.overscaledZ-1)).key]){q[fe.key]=fe;break}}}},A.prototype.findLoadedParent=function(g,S){if(g.key in this._loadedParentTiles){var F=this._loadedParentTiles[g.key];return F&&F.tileID.overscaledZ>=S?F:null}for(var q=g.overscaledZ-1;q>=S;q--){var K=g.scaledTo(q),ie=this._getLoadedTile(K);if(ie)return ie}},A.prototype._getLoadedTile=function(g){var S=this._tiles[g.key];return S&&S.hasData()?S:this._cache.getByKey(g.wrapped().key)},A.prototype.updateCacheSize=function(g){var S=Math.ceil(g.width/this._source.tileSize)+1,F=Math.ceil(g.height/this._source.tileSize)+1,q=Math.floor(S*F*5),K=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,q):q;this._cache.setMaxSize(K)},A.prototype.handleWrapJump=function(g){var S=Math.round((g-(this._prevLng===void 0?g:this._prevLng))/360);if(this._prevLng=g,S){var F={};for(var q in this._tiles){var K=this._tiles[q];K.tileID=K.tileID.unwrapTo(K.tileID.wrap+S),F[K.tileID.key]=K}for(var ie in this._tiles=F,this._timers)clearTimeout(this._timers[ie]),delete this._timers[ie];for(var fe in this._tiles)this._setTileReloadTimer(fe,this._tiles[fe])}},A.prototype.update=function(g){var S=this;if(this.transform=g,this._sourceLoaded&&!this._paused){var F;this.updateCacheSize(g),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?F=g.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(pr){return new i.OverscaledTileID(pr.canonical.z,pr.wrap,pr.canonical.z,pr.canonical.x,pr.canonical.y)}):(F=g.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(F=F.filter(function(pr){return S._source.hasTile(pr)}))):F=[];var q=g.coveringZoomLevel(this._source),K=Math.max(q-A.maxOverzooming,this._source.minzoom),ie=Math.max(q+A.maxUnderzooming,this._source.minzoom),fe=this._updateRetainedTiles(F,q);if(cr(this._source.type)){for(var _e={},Re={},Fe=0,Ne=Object.keys(fe);Fe<Ne.length;Fe+=1){var Je=Ne[Fe],Ze=fe[Je],ct=this._tiles[Je];if(ct&&!(ct.fadeEndTime&&ct.fadeEndTime<=i.browser.now())){var Xe=this.findLoadedParent(Ze,K);Xe&&(this._addTile(Xe.tileID),_e[Xe.tileID.key]=Xe.tileID),Re[Je]=Ze}}for(var st in this._retainLoadedChildren(Re,q,ie,fe),_e)fe[st]||(this._coveredTiles[st]=!0,fe[st]=_e[st])}for(var yt in fe)this._tiles[yt].clearFadeHold();for(var Lt=0,Jt=i.keysDifference(this._tiles,fe);Lt<Jt.length;Lt+=1){var Ht=Jt[Lt],er=this._tiles[Ht];er.hasSymbolBuckets&&!er.holdingForFade()?er.setHoldDuration(this.map._fadeDuration):er.hasSymbolBuckets&&!er.symbolFadeFinished()||this._removeTile(Ht)}this._updateLoadedParentTileCache()}},A.prototype.releaseSymbolFadeTiles=function(){for(var g in this._tiles)this._tiles[g].holdingForFade()&&this._removeTile(g)},A.prototype._updateRetainedTiles=function(g,S){for(var F={},q={},K=Math.max(S-A.maxOverzooming,this._source.minzoom),ie=Math.max(S+A.maxUnderzooming,this._source.minzoom),fe={},_e=0,Re=g;_e<Re.length;_e+=1){var Fe=Re[_e],Ne=this._addTile(Fe);F[Fe.key]=Fe,Ne.hasData()||S<this._source.maxzoom&&(fe[Fe.key]=Fe)}this._retainLoadedChildren(fe,S,ie,F);for(var Je=0,Ze=g;Je<Ze.length;Je+=1){var ct=Ze[Je],Xe=this._tiles[ct.key];if(!Xe.hasData()){if(S+1>this._source.maxzoom){var st=ct.children(this._source.maxzoom)[0],yt=this.getTile(st);if(yt&&yt.hasData()){F[st.key]=st;continue}}else{var Lt=ct.children(this._source.maxzoom);if(F[Lt[0].key]&&F[Lt[1].key]&&F[Lt[2].key]&&F[Lt[3].key])continue}for(var Jt=Xe.wasRequested(),Ht=ct.overscaledZ-1;Ht>=K;--Ht){var er=ct.scaledTo(Ht);if(q[er.key]||(q[er.key]=!0,!(Xe=this.getTile(er))&&Jt&&(Xe=this._addTile(er)),Xe&&(F[er.key]=er,Jt=Xe.wasRequested(),Xe.hasData())))break}}}return F},A.prototype._updateLoadedParentTileCache=function(){for(var g in this._loadedParentTiles={},this._tiles){for(var S=[],F=void 0,q=this._tiles[g].tileID;q.overscaledZ>0;){if(q.key in this._loadedParentTiles){F=this._loadedParentTiles[q.key];break}S.push(q.key);var K=q.scaledTo(q.overscaledZ-1);if(F=this._getLoadedTile(K))break;q=K}for(var ie=0,fe=S;ie<fe.length;ie+=1)this._loadedParentTiles[fe[ie]]=F}},A.prototype._addTile=function(g){var S=this._tiles[g.key];if(S)return S;(S=this._cache.getAndRemove(g))&&(this._setTileReloadTimer(g.key,S),S.tileID=g,this._state.initializeTileState(S,this.map?this.map.painter:null),this._cacheTimers[g.key]&&(clearTimeout(this._cacheTimers[g.key]),delete this._cacheTimers[g.key],this._setTileReloadTimer(g.key,S)));var F=Boolean(S);return F||(S=new i.Tile(g,this._source.tileSize*g.overscaleFactor()),this._loadTile(S,this._tileLoaded.bind(this,S,g.key,S.state))),S?(S.uses++,this._tiles[g.key]=S,F||this._source.fire(new i.Event("dataloading",{tile:S,coord:S.tileID,dataType:"source"})),S):null},A.prototype._setTileReloadTimer=function(g,S){var F=this;g in this._timers&&(clearTimeout(this._timers[g]),delete this._timers[g]);var q=S.getExpiryTimeout();q&&(this._timers[g]=setTimeout(function(){F._reloadTile(g,"expired"),delete F._timers[g]},q))},A.prototype._removeTile=function(g){var S=this._tiles[g];S&&(S.uses--,delete this._tiles[g],this._timers[g]&&(clearTimeout(this._timers[g]),delete this._timers[g]),S.uses>0||(S.hasData()&&S.state!=="reloading"?this._cache.add(S.tileID,S,S.getExpiryTimeout()):(S.aborted=!0,this._abortTile(S),this._unloadTile(S))))},A.prototype.clearTiles=function(){for(var g in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(g);this._cache.reset()},A.prototype.tilesIn=function(g,S,F){var q=this,K=[],ie=this.transform;if(!ie)return K;for(var fe=F?ie.getCameraQueryGeometry(g):g,_e=g.map(function(Ht){return ie.pointCoordinate(Ht)}),Re=fe.map(function(Ht){return ie.pointCoordinate(Ht)}),Fe=this.getIds(),Ne=1/0,Je=1/0,Ze=-1/0,ct=-1/0,Xe=0,st=Re;Xe<st.length;Xe+=1){var yt=st[Xe];Ne=Math.min(Ne,yt.x),Je=Math.min(Je,yt.y),Ze=Math.max(Ze,yt.x),ct=Math.max(ct,yt.y)}for(var Lt=function(Ht){var er=q._tiles[Fe[Ht]];if(!er.holdingForFade()){var pr=er.tileID,Sr=Math.pow(2,ie.zoom-er.tileID.overscaledZ),Tr=S*er.queryPadding*i.EXTENT/er.tileSize/Sr,Xr=[pr.getTilePoint(new i.MercatorCoordinate(Ne,Je)),pr.getTilePoint(new i.MercatorCoordinate(Ze,ct))];if(Xr[0].x-Tr<i.EXTENT&&Xr[0].y-Tr<i.EXTENT&&Xr[1].x+Tr>=0&&Xr[1].y+Tr>=0){var Tn=_e.map(function(In){return pr.getTilePoint(In)}),Ln=Re.map(function(In){return pr.getTilePoint(In)});K.push({tile:er,tileID:pr,queryGeometry:Tn,cameraQueryGeometry:Ln,scale:Sr})}}},Jt=0;Jt<Fe.length;Jt++)Lt(Jt);return K},A.prototype.getVisibleCoordinates=function(g){for(var S=this,F=this.getRenderableIds(g).map(function(fe){return S._tiles[fe].tileID}),q=0,K=F;q<K.length;q+=1){var ie=K[q];ie.posMatrix=this.transform.calculatePosMatrix(ie.toUnwrapped())}return F},A.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(cr(this._source.type))for(var g in this._tiles){var S=this._tiles[g];if(S.fadeEndTime!==void 0&&S.fadeEndTime>=i.browser.now())return!0}return!1},A.prototype.setFeatureState=function(g,S,F){this._state.updateState(g=g||"_geojsonTileLayer",S,F)},A.prototype.removeFeatureState=function(g,S,F){this._state.removeFeatureState(g=g||"_geojsonTileLayer",S,F)},A.prototype.getFeatureState=function(g,S){return this._state.getState(g=g||"_geojsonTileLayer",S)},A.prototype.setDependencies=function(g,S,F){var q=this._tiles[g];q&&q.setDependencies(S,F)},A.prototype.reloadTilesForDependencies=function(g,S){for(var F in this._tiles)this._tiles[F].hasDependency(g,S)&&this._reloadTile(F,"reloading");this._cache.filter(function(q){return!q.hasDependency(g,S)})},A}(i.Evented);function It(m,A){var g=Math.abs(2*m.wrap)-+(m.wrap<0),S=Math.abs(2*A.wrap)-+(A.wrap<0);return m.overscaledZ-A.overscaledZ||S-g||A.canonical.y-m.canonical.y||A.canonical.x-m.canonical.x}function cr(m){return m==="raster"||m==="image"||m==="video"}function dr(){return new i.window.Worker(Vp.workerUrl)}Qe.maxOverzooming=10,Qe.maxUnderzooming=3;var $t="mapboxgl_preloaded_worker_pool",lr=function(){this.active={}};lr.prototype.acquire=function(m){if(!this.workers)for(this.workers=[];this.workers.length<lr.workerCount;)this.workers.push(new dr);return this.active[m]=!0,this.workers.slice()},lr.prototype.release=function(m){delete this.active[m],this.numActive()===0&&(this.workers.forEach(function(A){A.terminate()}),this.workers=null)},lr.prototype.isPreloaded=function(){return!!this.active[$t]},lr.prototype.numActive=function(){return Object.keys(this.active).length};var Kr,Dr=Math.floor(i.browser.hardwareConcurrency/2);function qt(){return Kr||(Kr=new lr),Kr}function Lr(m,A){var g={};for(var S in m)S!=="ref"&&(g[S]=m[S]);return i.refProperties.forEach(function(F){F in A&&(g[F]=A[F])}),g}function Er(m){m=m.slice();for(var A=Object.create(null),g=0;g<m.length;g++)A[m[g].id]=m[g];for(var S=0;S<m.length;S++)"ref"in m[S]&&(m[S]=Lr(m[S],A[m[S].ref]));return m}lr.workerCount=Math.max(Math.min(Dr,6),1);var _r={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Wn(m,A,g){g.push({command:_r.addSource,args:[m,A[m]]})}function Cr(m,A,g){A.push({command:_r.removeSource,args:[m]}),g[m]=!0}function Qn(m,A,g,S){Cr(m,g,S),Wn(m,A,g)}function Ci(m,A,g){var S;for(S in m[g])if(m[g].hasOwnProperty(S)&&S!=="data"&&!i.deepEqual(m[g][S],A[g][S]))return!1;for(S in A[g])if(A[g].hasOwnProperty(S)&&S!=="data"&&!i.deepEqual(m[g][S],A[g][S]))return!1;return!0}function ii(m,A,g,S,F,q){var K;for(K in A=A||{},m=m||{})m.hasOwnProperty(K)&&(i.deepEqual(m[K],A[K])||g.push({command:q,args:[S,K,A[K],F]}));for(K in A)A.hasOwnProperty(K)&&!m.hasOwnProperty(K)&&(i.deepEqual(m[K],A[K])||g.push({command:q,args:[S,K,A[K],F]}))}function bi(m){return m.id}function Un(m,A){return m[A.id]=A,m}var oa=function(m,A){this.reset(m,A)};oa.prototype.reset=function(m,A){this.points=m||[],this._distances=[0];for(var g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(A||0,.5*this.length),this.paddedLength=this.length-2*this.padding},oa.prototype.lerp=function(m){if(this.points.length===1)return this.points[0];m=i.clamp(m,0,1);for(var A=1,g=this._distances[A],S=m*this.paddedLength+this.padding;g<S&&A<this._distances.length;)g=this._distances[++A];var F=A-1,q=this._distances[F],K=g-q,ie=K>0?(S-q)/K:0;return this.points[F].mult(1-ie).add(this.points[A].mult(ie))};var xi=function(m,A,g){var S=this.boxCells=[],F=this.circleCells=[];this.xCellCount=Math.ceil(m/g),this.yCellCount=Math.ceil(A/g);for(var q=0;q<this.xCellCount*this.yCellCount;q++)S.push([]),F.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=m,this.height=A,this.xScale=this.xCellCount/m,this.yScale=this.yCellCount/A,this.boxUid=0,this.circleUid=0};function Ki(m,A,g,S,F){var q=i.create();return A?(i.scale(q,q,[1/F,1/F,1]),g||i.rotateZ(q,q,S.angle)):i.multiply(q,S.labelPlaneMatrix,m),q}function gi(m,A,g,S,F){if(A){var q=i.clone(m);return i.scale(q,q,[F,F,1]),g||i.rotateZ(q,q,-S.angle),q}return S.glCoordMatrix}function Zn(m,A){var g=[m.x,m.y,0,1];Za(g,g,A);var S=g[3];return{point:new i.Point(g[0]/S,g[1]/S),signedDistanceFromCamera:S}}function $n(m,A){return .5+m/A*.5}function ki(m,A){var g=m[0]/m[3],S=m[1]/m[3];return g>=-A[0]&&g<=A[0]&&S>=-A[1]&&S<=A[1]}function Es(m,A,g,S,F,q,K,ie){var fe=S?m.textSizeData:m.iconSizeData,_e=i.evaluateSizeForZoom(fe,g.transform.zoom),Re=[256/g.width*2+1,256/g.height*2+1],Fe=S?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;Fe.clear();for(var Ne=m.lineVertexArray,Je=S?m.text.placedSymbolArray:m.icon.placedSymbolArray,Ze=g.transform.width/g.transform.height,ct=!1,Xe=0;Xe<Je.length;Xe++){var st=Je.get(Xe);if(st.hidden||st.writingMode===i.WritingMode.vertical&&!ct)ho(st.numGlyphs,Fe);else{ct=!1;var yt=[st.anchorX,st.anchorY,0,1];if(i.transformMat4(yt,yt,A),ki(yt,Re)){var Lt=$n(g.transform.cameraToCenterDistance,yt[3]),Jt=i.evaluateSizeForFeature(fe,_e,st),Ht=K?Jt/Lt:Jt*Lt,er=new i.Point(st.anchorX,st.anchorY),pr=Zn(er,F).point,Sr={},Tr=hs(st,Ht,!1,ie,A,F,q,m.glyphOffsetArray,Ne,Fe,pr,er,Sr,Ze);ct=Tr.useVertical,(Tr.notEnoughRoom||ct||Tr.needsFlipping&&hs(st,Ht,!0,ie,A,F,q,m.glyphOffsetArray,Ne,Fe,pr,er,Sr,Ze).notEnoughRoom)&&ho(st.numGlyphs,Fe)}else ho(st.numGlyphs,Fe)}}S?m.text.dynamicLayoutVertexBuffer.updateData(Fe):m.icon.dynamicLayoutVertexBuffer.updateData(Fe)}function Ba(m,A,g,S,F,q,K,ie,fe,_e,Re){var Fe=ie.glyphStartIndex+ie.numGlyphs,Ne=ie.lineStartIndex,Je=ie.lineStartIndex+ie.lineLength,Ze=A.getoffsetX(ie.glyphStartIndex),ct=A.getoffsetX(Fe-1),Xe=sa(m*Ze,g,S,F,q,K,ie.segment,Ne,Je,fe,_e,Re);if(!Xe)return null;var st=sa(m*ct,g,S,F,q,K,ie.segment,Ne,Je,fe,_e,Re);return st?{first:Xe,last:st}:null}function _o(m,A,g,S){return m===i.WritingMode.horizontal&&Math.abs(g.y-A.y)>Math.abs(g.x-A.x)*S?{useVertical:!0}:(m===i.WritingMode.vertical?A.y<g.y:A.x>g.x)?{needsFlipping:!0}:null}function hs(m,A,g,S,F,q,K,ie,fe,_e,Re,Fe,Ne,Je){var Ze,ct=A/24,Xe=m.lineOffsetX*ct,st=m.lineOffsetY*ct;if(m.numGlyphs>1){var yt=m.glyphStartIndex+m.numGlyphs,Lt=m.lineStartIndex,Jt=m.lineStartIndex+m.lineLength,Ht=Ba(ct,ie,Xe,st,g,Re,Fe,m,fe,q,Ne);if(!Ht)return{notEnoughRoom:!0};var er=Zn(Ht.first.point,K).point,pr=Zn(Ht.last.point,K).point;if(S&&!g){var Sr=_o(m.writingMode,er,pr,Je);if(Sr)return Sr}Ze=[Ht.first];for(var Tr=m.glyphStartIndex+1;Tr<yt-1;Tr++)Ze.push(sa(ct*ie.getoffsetX(Tr),Xe,st,g,Re,Fe,m.segment,Lt,Jt,fe,q,Ne));Ze.push(Ht.last)}else{if(S&&!g){var Xr=Zn(Fe,F).point,Tn=m.lineStartIndex+m.segment+1,Ln=new i.Point(fe.getx(Tn),fe.gety(Tn)),In=Zn(Ln,F),zi=In.signedDistanceFromCamera>0?In.point:eu(Fe,Ln,Xr,1,F),$r=_o(m.writingMode,Xr,zi,Je);if($r)return $r}var pn=sa(ct*ie.getoffsetX(m.glyphStartIndex),Xe,st,g,Re,Fe,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,fe,q,Ne);if(!pn)return{notEnoughRoom:!0};Ze=[pn]}for(var li=0,Kn=Ze;li<Kn.length;li+=1){var qn=Kn[li];i.addDynamicAttributes(_e,qn.point,qn.angle)}return{}}function eu(m,A,g,S,F){var q=Zn(m.add(m.sub(A)._unit()),F).point,K=g.sub(q);return g.add(K._mult(S/K.mag()))}function sa(m,A,g,S,F,q,K,ie,fe,_e,Re,Fe){var Ne=S?m-A:m+A,Je=Ne>0?1:-1,Ze=0;S&&(Je*=-1,Ze=Math.PI),Je<0&&(Ze+=Math.PI);for(var ct=Je>0?ie+K:ie+K+1,Xe=F,st=F,yt=0,Lt=0,Jt=Math.abs(Ne),Ht=[];yt+Lt<=Jt;){if((ct+=Je)<ie||ct>=fe)return null;if(st=Xe,Ht.push(Xe),(Xe=Fe[ct])===void 0){var er=new i.Point(_e.getx(ct),_e.gety(ct)),pr=Zn(er,Re);if(pr.signedDistanceFromCamera>0)Xe=Fe[ct]=pr.point;else{var Sr=ct-Je;Xe=eu(yt===0?q:new i.Point(_e.getx(Sr),_e.gety(Sr)),er,st,Jt-yt+1,Re)}}yt+=Lt,Lt=st.dist(Xe)}var Tr=(Jt-yt)/Lt,Xr=Xe.sub(st),Tn=Xr.mult(Tr)._add(st);Tn._add(Xr._unit()._perp()._mult(g*Je));var Ln=Ze+Math.atan2(Xe.y-st.y,Xe.x-st.x);return Ht.push(Tn),{point:Tn,angle:Ln,path:Ht}}xi.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},xi.prototype.insert=function(m,A,g,S,F){this._forEachCell(A,g,S,F,this._insertBoxCell,this.boxUid++),this.boxKeys.push(m),this.bboxes.push(A),this.bboxes.push(g),this.bboxes.push(S),this.bboxes.push(F)},xi.prototype.insertCircle=function(m,A,g,S){this._forEachCell(A-S,g-S,A+S,g+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(m),this.circles.push(A),this.circles.push(g),this.circles.push(S)},xi.prototype._insertBoxCell=function(m,A,g,S,F,q){this.boxCells[F].push(q)},xi.prototype._insertCircleCell=function(m,A,g,S,F,q){this.circleCells[F].push(q)},xi.prototype._query=function(m,A,g,S,F,q){if(g<0||m>this.width||S<0||A>this.height)return!F&&[];var K=[];if(m<=0&&A<=0&&this.width<=g&&this.height<=S){if(F)return!0;for(var ie=0;ie<this.boxKeys.length;ie++)K.push({key:this.boxKeys[ie],x1:this.bboxes[4*ie],y1:this.bboxes[4*ie+1],x2:this.bboxes[4*ie+2],y2:this.bboxes[4*ie+3]});for(var fe=0;fe<this.circleKeys.length;fe++){var _e=this.circles[3*fe],Re=this.circles[3*fe+1],Fe=this.circles[3*fe+2];K.push({key:this.circleKeys[fe],x1:_e-Fe,y1:Re-Fe,x2:_e+Fe,y2:Re+Fe})}return q?K.filter(q):K}return this._forEachCell(m,A,g,S,this._queryCell,K,{hitTest:F,seenUids:{box:{},circle:{}}},q),F?K.length>0:K},xi.prototype._queryCircle=function(m,A,g,S,F){var q=m-g,K=m+g,ie=A-g,fe=A+g;if(K<0||q>this.width||fe<0||ie>this.height)return!S&&[];var _e=[];return this._forEachCell(q,ie,K,fe,this._queryCellCircle,_e,{hitTest:S,circle:{x:m,y:A,radius:g},seenUids:{box:{},circle:{}}},F),S?_e.length>0:_e},xi.prototype.query=function(m,A,g,S,F){return this._query(m,A,g,S,!1,F)},xi.prototype.hitTest=function(m,A,g,S,F){return this._query(m,A,g,S,!0,F)},xi.prototype.hitTestCircle=function(m,A,g,S){return this._queryCircle(m,A,g,!0,S)},xi.prototype._queryCell=function(m,A,g,S,F,q,K,ie){var fe=K.seenUids,_e=this.boxCells[F];if(_e!==null)for(var Re=this.bboxes,Fe=0,Ne=_e;Fe<Ne.length;Fe+=1){var Je=Ne[Fe];if(!fe.box[Je]){fe.box[Je]=!0;var Ze=4*Je;if(m<=Re[Ze+2]&&A<=Re[Ze+3]&&g>=Re[Ze+0]&&S>=Re[Ze+1]&&(!ie||ie(this.boxKeys[Je]))){if(K.hitTest)return q.push(!0),!0;q.push({key:this.boxKeys[Je],x1:Re[Ze],y1:Re[Ze+1],x2:Re[Ze+2],y2:Re[Ze+3]})}}}var ct=this.circleCells[F];if(ct!==null)for(var Xe=this.circles,st=0,yt=ct;st<yt.length;st+=1){var Lt=yt[st];if(!fe.circle[Lt]){fe.circle[Lt]=!0;var Jt=3*Lt;if(this._circleAndRectCollide(Xe[Jt],Xe[Jt+1],Xe[Jt+2],m,A,g,S)&&(!ie||ie(this.circleKeys[Lt]))){if(K.hitTest)return q.push(!0),!0;var Ht=Xe[Jt],er=Xe[Jt+1],pr=Xe[Jt+2];q.push({key:this.circleKeys[Lt],x1:Ht-pr,y1:er-pr,x2:Ht+pr,y2:er+pr})}}}},xi.prototype._queryCellCircle=function(m,A,g,S,F,q,K,ie){var fe=K.circle,_e=K.seenUids,Re=this.boxCells[F];if(Re!==null)for(var Fe=this.bboxes,Ne=0,Je=Re;Ne<Je.length;Ne+=1){var Ze=Je[Ne];if(!_e.box[Ze]){_e.box[Ze]=!0;var ct=4*Ze;if(this._circleAndRectCollide(fe.x,fe.y,fe.radius,Fe[ct+0],Fe[ct+1],Fe[ct+2],Fe[ct+3])&&(!ie||ie(this.boxKeys[Ze])))return q.push(!0),!0}}var Xe=this.circleCells[F];if(Xe!==null)for(var st=this.circles,yt=0,Lt=Xe;yt<Lt.length;yt+=1){var Jt=Lt[yt];if(!_e.circle[Jt]){_e.circle[Jt]=!0;var Ht=3*Jt;if(this._circlesCollide(st[Ht],st[Ht+1],st[Ht+2],fe.x,fe.y,fe.radius)&&(!ie||ie(this.circleKeys[Jt])))return q.push(!0),!0}}},xi.prototype._forEachCell=function(m,A,g,S,F,q,K,ie){for(var fe=this._convertToXCellCoord(m),_e=this._convertToYCellCoord(A),Re=this._convertToXCellCoord(g),Fe=this._convertToYCellCoord(S),Ne=fe;Ne<=Re;Ne++)for(var Je=_e;Je<=Fe;Je++)if(F.call(this,m,A,g,S,this.xCellCount*Je+Ne,q,K,ie))return},xi.prototype._convertToXCellCoord=function(m){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(m*this.xScale)))},xi.prototype._convertToYCellCoord=function(m){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(m*this.yScale)))},xi.prototype._circlesCollide=function(m,A,g,S,F,q){var K=S-m,ie=F-A,fe=g+q;return fe*fe>K*K+ie*ie},xi.prototype._circleAndRectCollide=function(m,A,g,S,F,q,K){var ie=(q-S)/2,fe=Math.abs(m-(S+ie));if(fe>ie+g)return!1;var _e=(K-F)/2,Re=Math.abs(A-(F+_e));if(Re>_e+g)return!1;if(fe<=ie||Re<=_e)return!0;var Fe=fe-ie,Ne=Re-_e;return Fe*Fe+Ne*Ne<=g*g};var tu=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ho(m,A){for(var g=0;g<m;g++){var S=A.length;A.resize(S+4),A.float32.set(tu,3*S)}}function Za(m,A,g){var S=A[0],F=A[1];return m[0]=g[0]*S+g[4]*F+g[12],m[1]=g[1]*S+g[5]*F+g[13],m[3]=g[3]*S+g[7]*F+g[15],m}var Ho=function(m,A,g){A===void 0&&(A=new xi(m.width+200,m.height+200,25)),g===void 0&&(g=new xi(m.width+200,m.height+200,25)),this.transform=m,this.grid=A,this.ignoredGrid=g,this.pitchfactor=Math.cos(m._pitch)*m.cameraToCenterDistance,this.screenRightBoundary=m.width+100,this.screenBottomBoundary=m.height+100,this.gridRightBoundary=m.width+200,this.gridBottomBoundary=m.height+200};function ai(m,A,g){return A*(i.EXTENT/(m.tileSize*Math.pow(2,g-m.tileID.overscaledZ)))}Ho.prototype.placeCollisionBox=function(m,A,g,S,F){var q=this.projectAndGetPerspectiveRatio(S,m.anchorPointX,m.anchorPointY),K=g*q.perspectiveRatio,ie=m.x1*K+q.point.x,fe=m.y1*K+q.point.y,_e=m.x2*K+q.point.x,Re=m.y2*K+q.point.y;return!this.isInsideGrid(ie,fe,_e,Re)||!A&&this.grid.hitTest(ie,fe,_e,Re,F)?{box:[],offscreen:!1}:{box:[ie,fe,_e,Re],offscreen:this.isOffscreen(ie,fe,_e,Re)}},Ho.prototype.placeCollisionCircles=function(m,A,g,S,F,q,K,ie,fe,_e,Re,Fe,Ne){var Je=[],Ze=new i.Point(A.anchorX,A.anchorY),ct=Zn(Ze,q),Xe=$n(this.transform.cameraToCenterDistance,ct.signedDistanceFromCamera),st=(_e?F/Xe:F*Xe)/i.ONE_EM,yt=Zn(Ze,K).point,Lt=Ba(st,S,A.lineOffsetX*st,A.lineOffsetY*st,!1,yt,Ze,A,g,K,{}),Jt=!1,Ht=!1,er=!0;if(Lt){for(var pr=.5*Fe*Xe+Ne,Sr=new i.Point(-100,-100),Tr=new i.Point(this.screenRightBoundary,this.screenBottomBoundary),Xr=new oa,Tn=Lt.first,Ln=Lt.last,In=[],zi=Tn.path.length-1;zi>=1;zi--)In.push(Tn.path[zi]);for(var $r=1;$r<Ln.path.length;$r++)In.push(Ln.path[$r]);var pn=2.5*pr;if(ie){var li=In.map(function(Ys){return Zn(Ys,ie)});In=li.some(function(Ys){return Ys.signedDistanceFromCamera<=0})?[]:li.map(function(Ys){return Ys.point})}var Kn=[];if(In.length>0){for(var qn=In[0].clone(),ri=In[0].clone(),Gn=1;Gn<In.length;Gn++)qn.x=Math.min(qn.x,In[Gn].x),qn.y=Math.min(qn.y,In[Gn].y),ri.x=Math.max(ri.x,In[Gn].x),ri.y=Math.max(ri.y,In[Gn].y);Kn=qn.x>=Sr.x&&ri.x<=Tr.x&&qn.y>=Sr.y&&ri.y<=Tr.y?[In]:ri.x<Sr.x||qn.x>Tr.x||ri.y<Sr.y||qn.y>Tr.y?[]:i.clipLine([In],Sr.x,Sr.y,Tr.x,Tr.y)}for(var zn=0,Do=Kn;zn<Do.length;zn+=1){var mo;Xr.reset(Do[zn],.25*pr),mo=Xr.length<=.5*pr?1:Math.ceil(Xr.paddedLength/pn)+1;for(var Rs=0;Rs<mo;Rs++){var ns=Rs/Math.max(mo-1,1),ro=Xr.lerp(ns),To=ro.x+100,Ls=ro.y+100;Je.push(To,Ls,pr,0);var no=To-pr,ci=Ls-pr,io=To+pr,bl=Ls+pr;if(er=er&&this.isOffscreen(no,ci,io,bl),Ht=Ht||this.isInsideGrid(no,ci,io,bl),!m&&this.grid.hitTestCircle(To,Ls,pr,Re)&&(Jt=!0,!fe))return{circles:[],offscreen:!1,collisionDetected:Jt}}}}return{circles:!fe&&Jt||!Ht?[]:Je,offscreen:er,collisionDetected:Jt}},Ho.prototype.queryRenderedSymbols=function(m){if(m.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var A=[],g=1/0,S=1/0,F=-1/0,q=-1/0,K=0,ie=m;K<ie.length;K+=1){var fe=ie[K],_e=new i.Point(fe.x+100,fe.y+100);g=Math.min(g,_e.x),S=Math.min(S,_e.y),F=Math.max(F,_e.x),q=Math.max(q,_e.y),A.push(_e)}for(var Re={},Fe={},Ne=0,Je=this.grid.query(g,S,F,q).concat(this.ignoredGrid.query(g,S,F,q));Ne<Je.length;Ne+=1){var Ze=Je[Ne],ct=Ze.key;if(Re[ct.bucketInstanceId]===void 0&&(Re[ct.bucketInstanceId]={}),!Re[ct.bucketInstanceId][ct.featureIndex]){var Xe=[new i.Point(Ze.x1,Ze.y1),new i.Point(Ze.x2,Ze.y1),new i.Point(Ze.x2,Ze.y2),new i.Point(Ze.x1,Ze.y2)];i.polygonIntersectsPolygon(A,Xe)&&(Re[ct.bucketInstanceId][ct.featureIndex]=!0,Fe[ct.bucketInstanceId]===void 0&&(Fe[ct.bucketInstanceId]=[]),Fe[ct.bucketInstanceId].push(ct.featureIndex))}}return Fe},Ho.prototype.insertCollisionBox=function(m,A,g,S,F){(A?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:S,collisionGroupID:F},m[0],m[1],m[2],m[3])},Ho.prototype.insertCollisionCircles=function(m,A,g,S,F){for(var q=A?this.ignoredGrid:this.grid,K={bucketInstanceId:g,featureIndex:S,collisionGroupID:F},ie=0;ie<m.length;ie+=4)q.insertCircle(K,m[ie],m[ie+1],m[ie+2])},Ho.prototype.projectAndGetPerspectiveRatio=function(m,A,g){var S=[A,g,0,1];return Za(S,S,m),{point:new i.Point((S[0]/S[3]+1)/2*this.transform.width+100,(-S[1]/S[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/S[3]*.5}},Ho.prototype.isOffscreen=function(m,A,g,S){return g<100||m>=this.screenRightBoundary||S<100||A>this.screenBottomBoundary},Ho.prototype.isInsideGrid=function(m,A,g,S){return g>=0&&m<this.gridRightBoundary&&S>=0&&A<this.gridBottomBoundary},Ho.prototype.getViewportMatrix=function(){var m=i.identity([]);return i.translate(m,m,[-100,-100,0]),m};var Cs=function(m,A,g,S){this.opacity=m?Math.max(0,Math.min(1,m.opacity+(m.placed?A:-A))):S&&g?1:0,this.placed=g};Cs.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var bo=function(m,A,g,S,F){this.text=new Cs(m?m.text:null,A,g,F),this.icon=new Cs(m?m.icon:null,A,S,F)};bo.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ec=function(m,A,g){this.text=m,this.icon=A,this.skipFade=g},ps=function(){this.invProjMatrix=i.create(),this.viewportMatrix=i.create(),this.circles=[]},Du=function(m,A,g,S,F){this.bucketInstanceId=m,this.featureIndex=A,this.sourceLayerIndex=g,this.bucketIndex=S,this.tileID=F},eo=function(m){this.crossSourceCollisions=m,this.maxGroupID=0,this.collisionGroups={}};function Me(m,A,g,S,F){var q=i.getAnchorAlignment(m),K=-(q.horizontalAlign-.5)*A,ie=-(q.verticalAlign-.5)*g,fe=i.evaluateVariableOffset(m,S);return new i.Point(K+fe[0]*F,ie+fe[1]*F)}function Ve(m,A,g,S,F,q){var K=m.x1,ie=m.x2,fe=m.y1,_e=m.y2,Re=m.anchorPointX,Fe=m.anchorPointY,Ne=new i.Point(A,g);return S&&Ne._rotate(F?q:-q),{x1:K+Ne.x,y1:fe+Ne.y,x2:ie+Ne.x,y2:_e+Ne.y,anchorPointX:Re,anchorPointY:Fe}}eo.prototype.get=function(m){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[m]){var A=++this.maxGroupID;this.collisionGroups[m]={ID:A,predicate:function(g){return g.collisionGroupID===A}}}return this.collisionGroups[m]};var it=function(m,A,g,S){this.transform=m.clone(),this.collisionIndex=new Ho(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=A,this.retainedQueryData={},this.collisionGroups=new eo(g),this.collisionCircleArrays={},this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}};function Xt(m,A,g,S,F){m.emplaceBack(A?1:0,g?1:0,S||0,F||0),m.emplaceBack(A?1:0,g?1:0,S||0,F||0),m.emplaceBack(A?1:0,g?1:0,S||0,F||0),m.emplaceBack(A?1:0,g?1:0,S||0,F||0)}it.prototype.getBucketParts=function(m,A,g,S){var F=g.getBucket(A),q=g.latestFeatureIndex;if(F&&q&&A.id===F.layerIds[0]){var K=g.collisionBoxArray,ie=F.layers[0].layout,fe=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),_e=g.tileSize/i.EXTENT,Re=this.transform.calculatePosMatrix(g.tileID.toUnwrapped()),Fe=ie.get("text-pitch-alignment")==="map",Ne=ie.get("text-rotation-alignment")==="map",Je=ai(g,1,this.transform.zoom),Ze=Ki(Re,Fe,Ne,this.transform,Je),ct=null;if(Fe){var Xe=gi(Re,Fe,Ne,this.transform,Je);ct=i.multiply([],this.transform.labelPlaneMatrix,Xe)}this.retainedQueryData[F.bucketInstanceId]=new Du(F.bucketInstanceId,q,F.sourceLayerIndex,F.index,g.tileID);var st={bucket:F,layout:ie,posMatrix:Re,textLabelPlaneMatrix:Ze,labelToScreenMatrix:ct,scale:fe,textPixelRatio:_e,holdingForFade:g.holdingForFade(),collisionBoxArray:K,partiallyEvaluatedTextSize:i.evaluateSizeForZoom(F.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(F.sourceID)};if(S)for(var yt=0,Lt=F.sortKeyRanges;yt<Lt.length;yt+=1){var Jt=Lt[yt];m.push({sortKey:Jt.sortKey,symbolInstanceStart:Jt.symbolInstanceStart,symbolInstanceEnd:Jt.symbolInstanceEnd,parameters:st})}else m.push({symbolInstanceStart:0,symbolInstanceEnd:F.symbolInstances.length,parameters:st})}},it.prototype.attemptAnchorPlacement=function(m,A,g,S,F,q,K,ie,fe,_e,Re,Fe,Ne,Je,Ze){var ct,Xe=[Fe.textOffset0,Fe.textOffset1],st=Me(m,g,S,Xe,F),yt=this.collisionIndex.placeCollisionBox(Ve(A,st.x,st.y,q,K,this.transform.angle),Re,ie,fe,_e.predicate);if(!Ze||this.collisionIndex.placeCollisionBox(Ve(Ze,st.x,st.y,q,K,this.transform.angle),Re,ie,fe,_e.predicate).box.length!==0)return yt.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Fe.crossTileID]&&this.prevPlacement.placements[Fe.crossTileID]&&this.prevPlacement.placements[Fe.crossTileID].text&&(ct=this.prevPlacement.variableOffsets[Fe.crossTileID].anchor),this.variableOffsets[Fe.crossTileID]={textOffset:Xe,width:g,height:S,anchor:m,textBoxScale:F,prevAnchor:ct},this.markUsedJustification(Ne,m,Fe,Je),Ne.allowVerticalPlacement&&(this.markUsedOrientation(Ne,Je,Fe),this.placedOrientations[Fe.crossTileID]=Je),{shift:st,placedGlyphBoxes:yt}):void 0},it.prototype.placeLayerBucketPart=function(m,A,g){var S=this,F=m.parameters,q=F.bucket,K=F.layout,ie=F.posMatrix,fe=F.textLabelPlaneMatrix,_e=F.labelToScreenMatrix,Re=F.textPixelRatio,Fe=F.holdingForFade,Ne=F.collisionBoxArray,Je=F.partiallyEvaluatedTextSize,Ze=F.collisionGroup,ct=K.get("text-optional"),Xe=K.get("icon-optional"),st=K.get("text-allow-overlap"),yt=K.get("icon-allow-overlap"),Lt=K.get("text-rotation-alignment")==="map",Jt=K.get("text-pitch-alignment")==="map",Ht=K.get("icon-text-fit")!=="none",er=K.get("symbol-z-order")==="viewport-y",pr=st&&(yt||!q.hasIconData()||Xe),Sr=yt&&(st||!q.hasTextData()||ct);!q.collisionArrays&&Ne&&q.deserializeCollisionBoxes(Ne);var Tr=function($r,pn){if(!A[$r.crossTileID])if(Fe)S.placements[$r.crossTileID]=new ec(!1,!1,!1);else{var li,Kn=!1,qn=!1,ri=!0,Gn=null,zn={box:null,offscreen:null},Do={box:null,offscreen:null},mo=null,Rs=null,ns=0,ro=0,To=0;pn.textFeatureIndex?ns=pn.textFeatureIndex:$r.useRuntimeCollisionCircles&&(ns=$r.featureIndex),pn.verticalTextFeatureIndex&&(ro=pn.verticalTextFeatureIndex);var Ls=pn.textBox;if(Ls){var no=function(w){var C=i.WritingMode.horizontal;if(q.allowVerticalPlacement&&!w&&S.prevPlacement){var M=S.prevPlacement.placedOrientations[$r.crossTileID];M&&(S.placedOrientations[$r.crossTileID]=M,S.markUsedOrientation(q,C=M,$r))}return C},ci=function(w,C){if(q.allowVerticalPlacement&&$r.numVerticalGlyphVertices>0&&pn.verticalTextBox)for(var M=0,N=q.writingModes;M<N.length&&(N[M]===i.WritingMode.vertical?(zn=C(),Do=zn):zn=w(),!(zn&&zn.box&&zn.box.length));M+=1);else zn=w()};if(K.get("text-variable-anchor")){var io=K.get("text-variable-anchor");if(S.prevPlacement&&S.prevPlacement.variableOffsets[$r.crossTileID]){var bl=S.prevPlacement.variableOffsets[$r.crossTileID];io.indexOf(bl.anchor)>0&&(io=io.filter(function(w){return w!==bl.anchor})).unshift(bl.anchor)}var Ys=function(w,C,M){for(var N=w.x2-w.x1,G=w.y2-w.y1,j=$r.textBoxScale,Q=Ht&&!yt?C:null,ue={box:[],offscreen:!1},we=st?2*io.length:io.length,Pe=0;Pe<we;++Pe){var ft=S.attemptAnchorPlacement(io[Pe%io.length],w,N,G,j,Lt,Jt,Re,ie,Ze,Pe>=io.length,$r,q,M,Q);if(ft&&(ue=ft.placedGlyphBoxes)&&ue.box&&ue.box.length){Kn=!0,Gn=ft.shift;break}}return ue};ci(function(){return Ys(Ls,pn.iconBox,i.WritingMode.horizontal)},function(){var w=pn.verticalTextBox;return q.allowVerticalPlacement&&!(zn&&zn.box&&zn.box.length)&&$r.numVerticalGlyphVertices>0&&w?Ys(w,pn.verticalIconBox,i.WritingMode.vertical):{box:null,offscreen:null}}),zn&&(Kn=zn.box,ri=zn.offscreen);var Uf=no(zn&&zn.box);if(!Kn&&S.prevPlacement){var jf=S.prevPlacement.variableOffsets[$r.crossTileID];jf&&(S.variableOffsets[$r.crossTileID]=jf,S.markUsedJustification(q,jf.anchor,$r,Uf))}}else{var ou=function(w,C){var M=S.collisionIndex.placeCollisionBox(w,st,Re,ie,Ze.predicate);return M&&M.box&&M.box.length&&(S.markUsedOrientation(q,C,$r),S.placedOrientations[$r.crossTileID]=C),M};ci(function(){return ou(Ls,i.WritingMode.horizontal)},function(){var w=pn.verticalTextBox;return q.allowVerticalPlacement&&$r.numVerticalGlyphVertices>0&&w?ou(w,i.WritingMode.vertical):{box:null,offscreen:null}}),no(zn&&zn.box&&zn.box.length)}}if(Kn=(li=zn)&&li.box&&li.box.length>0,ri=li&&li.offscreen,$r.useRuntimeCollisionCircles){var Mr=q.text.placedSymbolArray.get($r.centerJustifiedTextSymbolIndex),on=i.evaluateSizeForFeature(q.textSizeData,Je,Mr),xl=K.get("text-padding");mo=S.collisionIndex.placeCollisionCircles(st,Mr,q.lineVertexArray,q.glyphOffsetArray,on,ie,fe,_e,g,Jt,Ze.predicate,$r.collisionCircleDiameter,xl),Kn=st||mo.circles.length>0&&!mo.collisionDetected,ri=ri&&mo.offscreen}if(pn.iconFeatureIndex&&(To=pn.iconFeatureIndex),pn.iconBox){var Ic=function(w){var C=Ht&&Gn?Ve(w,Gn.x,Gn.y,Lt,Jt,S.transform.angle):w;return S.collisionIndex.placeCollisionBox(C,yt,Re,ie,Ze.predicate)};qn=Do&&Do.box&&Do.box.length&&pn.verticalIconBox?(Rs=Ic(pn.verticalIconBox)).box.length>0:(Rs=Ic(pn.iconBox)).box.length>0,ri=ri&&Rs.offscreen}var Xu=ct||$r.numHorizontalGlyphVertices===0&&$r.numVerticalGlyphVertices===0,xa=Xe||$r.numIconVertices===0;if(Xu||xa?xa?Xu||(qn=qn&&Kn):Kn=qn&&Kn:qn=Kn=qn&&Kn,Kn&&li&&li.box&&S.collisionIndex.insertCollisionBox(li.box,K.get("text-ignore-placement"),q.bucketInstanceId,Do&&Do.box&&ro?ro:ns,Ze.ID),qn&&Rs&&S.collisionIndex.insertCollisionBox(Rs.box,K.get("icon-ignore-placement"),q.bucketInstanceId,To,Ze.ID),mo&&(Kn&&S.collisionIndex.insertCollisionCircles(mo.circles,K.get("text-ignore-placement"),q.bucketInstanceId,ns,Ze.ID),g)){var zl=q.bucketInstanceId,su=S.collisionCircleArrays[zl];su===void 0&&(su=S.collisionCircleArrays[zl]=new ps);for(var y=0;y<mo.circles.length;y+=4)su.circles.push(mo.circles[y+0]),su.circles.push(mo.circles[y+1]),su.circles.push(mo.circles[y+2]),su.circles.push(mo.collisionDetected?1:0)}S.placements[$r.crossTileID]=new ec(Kn||pr,qn||Sr,ri||q.justReloaded),A[$r.crossTileID]=!0}};if(er)for(var Xr=q.getSortedSymbolIndexes(this.transform.angle),Tn=Xr.length-1;Tn>=0;--Tn){var Ln=Xr[Tn];Tr(q.symbolInstances.get(Ln),q.collisionArrays[Ln])}else for(var In=m.symbolInstanceStart;In<m.symbolInstanceEnd;In++)Tr(q.symbolInstances.get(In),q.collisionArrays[In]);if(g&&q.bucketInstanceId in this.collisionCircleArrays){var zi=this.collisionCircleArrays[q.bucketInstanceId];i.invert(zi.invProjMatrix,ie),zi.viewportMatrix=this.collisionIndex.getViewportMatrix()}q.justReloaded=!1},it.prototype.markUsedJustification=function(m,A,g,S){var F;F=S===i.WritingMode.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[i.getAnchorJustification(A)];for(var q=0,K=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];q<K.length;q+=1){var ie=K[q];ie>=0&&(m.text.placedSymbolArray.get(ie).crossTileID=F>=0&&ie!==F?0:g.crossTileID)}},it.prototype.markUsedOrientation=function(m,A,g){for(var S=A===i.WritingMode.horizontal||A===i.WritingMode.horizontalOnly?A:0,F=A===i.WritingMode.vertical?A:0,q=0,K=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];q<K.length;q+=1)m.text.placedSymbolArray.get(K[q]).placedOrientation=S;g.verticalPlacedTextSymbolIndex&&(m.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=F)},it.prototype.commit=function(m){this.commitTime=m,this.zoomAtLastRecencyCheck=this.transform.zoom;var A=this.prevPlacement,g=!1;this.prevZoomAdjustment=A?A.zoomAdjustment(this.transform.zoom):0;var S=A?A.symbolFadeChange(m):1,F=A?A.opacities:{},q=A?A.variableOffsets:{},K=A?A.placedOrientations:{};for(var ie in this.placements){var fe=this.placements[ie],_e=F[ie];_e?(this.opacities[ie]=new bo(_e,S,fe.text,fe.icon),g=g||fe.text!==_e.text.placed||fe.icon!==_e.icon.placed):(this.opacities[ie]=new bo(null,S,fe.text,fe.icon,fe.skipFade),g=g||fe.text||fe.icon)}for(var Re in F){var Fe=F[Re];if(!this.opacities[Re]){var Ne=new bo(Fe,S,!1,!1);Ne.isHidden()||(this.opacities[Re]=Ne,g=g||Fe.text.placed||Fe.icon.placed)}}for(var Je in q)this.variableOffsets[Je]||!this.opacities[Je]||this.opacities[Je].isHidden()||(this.variableOffsets[Je]=q[Je]);for(var Ze in K)this.placedOrientations[Ze]||!this.opacities[Ze]||this.opacities[Ze].isHidden()||(this.placedOrientations[Ze]=K[Ze]);g?this.lastPlacementChangeTime=m:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=A?A.lastPlacementChangeTime:m)},it.prototype.updateLayerOpacities=function(m,A){for(var g={},S=0,F=A;S<F.length;S+=1){var q=F[S],K=q.getBucket(m);K&&q.latestFeatureIndex&&m.id===K.layerIds[0]&&this.updateBucketOpacities(K,g,q.collisionBoxArray)}},it.prototype.updateBucketOpacities=function(m,A,g){var S=this;m.hasTextData()&&m.text.opacityVertexArray.clear(),m.hasIconData()&&m.icon.opacityVertexArray.clear(),m.hasIconCollisionBoxData()&&m.iconCollisionBox.collisionVertexArray.clear(),m.hasTextCollisionBoxData()&&m.textCollisionBox.collisionVertexArray.clear();var F=m.layers[0].layout,q=new bo(null,0,!1,!1,!0),K=F.get("text-allow-overlap"),ie=F.get("icon-allow-overlap"),fe=F.get("text-variable-anchor"),_e=F.get("text-rotation-alignment")==="map",Re=F.get("text-pitch-alignment")==="map",Fe=F.get("icon-text-fit")!=="none",Ne=new bo(null,0,K&&(ie||!m.hasIconData()||F.get("icon-optional")),ie&&(K||!m.hasTextData()||F.get("text-optional")),!0);!m.collisionArrays&&g&&(m.hasIconCollisionBoxData()||m.hasTextCollisionBoxData())&&m.deserializeCollisionBoxes(g);for(var Je=function(st,yt,Lt){for(var Jt=0;Jt<yt/4;Jt++)st.opacityVertexArray.emplaceBack(Lt)},Ze=function(st){var yt=m.symbolInstances.get(st),Lt=yt.numHorizontalGlyphVertices,Jt=yt.numVerticalGlyphVertices,Ht=yt.crossTileID,er=S.opacities[Ht];A[Ht]?er=q:er||(S.opacities[Ht]=er=Ne),A[Ht]=!0;var pr=yt.numIconVertices>0,Sr=S.placedOrientations[yt.crossTileID],Tr=Sr===i.WritingMode.vertical,Xr=Sr===i.WritingMode.horizontal||Sr===i.WritingMode.horizontalOnly;if(Lt>0||Jt>0){var Tn=tf(er.text);Je(m.text,Lt,Tr?tc:Tn),Je(m.text,Jt,Xr?tc:Tn);var Ln=er.text.isHidden();[yt.rightJustifiedTextSymbolIndex,yt.centerJustifiedTextSymbolIndex,yt.leftJustifiedTextSymbolIndex].forEach(function(zn){zn>=0&&(m.text.placedSymbolArray.get(zn).hidden=Ln||Tr?1:0)}),yt.verticalPlacedTextSymbolIndex>=0&&(m.text.placedSymbolArray.get(yt.verticalPlacedTextSymbolIndex).hidden=Ln||Xr?1:0);var In=S.variableOffsets[yt.crossTileID];In&&S.markUsedJustification(m,In.anchor,yt,Sr);var zi=S.placedOrientations[yt.crossTileID];zi&&(S.markUsedJustification(m,"left",yt,zi),S.markUsedOrientation(m,zi,yt))}if(pr){var $r=tf(er.icon),pn=!(Fe&&yt.verticalPlacedIconSymbolIndex&&Tr);yt.placedIconSymbolIndex>=0&&(Je(m.icon,yt.numIconVertices,pn?$r:tc),m.icon.placedSymbolArray.get(yt.placedIconSymbolIndex).hidden=er.icon.isHidden()),yt.verticalPlacedIconSymbolIndex>=0&&(Je(m.icon,yt.numVerticalIconVertices,pn?tc:$r),m.icon.placedSymbolArray.get(yt.verticalPlacedIconSymbolIndex).hidden=er.icon.isHidden())}if(m.hasIconCollisionBoxData()||m.hasTextCollisionBoxData()){var li=m.collisionArrays[st];if(li){var Kn=new i.Point(0,0);if(li.textBox||li.verticalTextBox){var qn=!0;if(fe){var ri=S.variableOffsets[Ht];ri?(Kn=Me(ri.anchor,ri.width,ri.height,ri.textOffset,ri.textBoxScale),_e&&Kn._rotate(Re?S.transform.angle:-S.transform.angle)):qn=!1}li.textBox&&Xt(m.textCollisionBox.collisionVertexArray,er.text.placed,!qn||Tr,Kn.x,Kn.y),li.verticalTextBox&&Xt(m.textCollisionBox.collisionVertexArray,er.text.placed,!qn||Xr,Kn.x,Kn.y)}var Gn=Boolean(!Xr&&li.verticalIconBox);li.iconBox&&Xt(m.iconCollisionBox.collisionVertexArray,er.icon.placed,Gn,Fe?Kn.x:0,Fe?Kn.y:0),li.verticalIconBox&&Xt(m.iconCollisionBox.collisionVertexArray,er.icon.placed,!Gn,Fe?Kn.x:0,Fe?Kn.y:0)}}},ct=0;ct<m.symbolInstances.length;ct++)Ze(ct);if(m.sortFeatures(this.transform.angle),this.retainedQueryData[m.bucketInstanceId]&&(this.retainedQueryData[m.bucketInstanceId].featureSortOrder=m.featureSortOrder),m.hasTextData()&&m.text.opacityVertexBuffer&&m.text.opacityVertexBuffer.updateData(m.text.opacityVertexArray),m.hasIconData()&&m.icon.opacityVertexBuffer&&m.icon.opacityVertexBuffer.updateData(m.icon.opacityVertexArray),m.hasIconCollisionBoxData()&&m.iconCollisionBox.collisionVertexBuffer&&m.iconCollisionBox.collisionVertexBuffer.updateData(m.iconCollisionBox.collisionVertexArray),m.hasTextCollisionBoxData()&&m.textCollisionBox.collisionVertexBuffer&&m.textCollisionBox.collisionVertexBuffer.updateData(m.textCollisionBox.collisionVertexArray),m.bucketInstanceId in this.collisionCircleArrays){var Xe=this.collisionCircleArrays[m.bucketInstanceId];m.placementInvProjMatrix=Xe.invProjMatrix,m.placementViewportMatrix=Xe.viewportMatrix,m.collisionCircleArray=Xe.circles,delete this.collisionCircleArrays[m.bucketInstanceId]}},it.prototype.symbolFadeChange=function(m){return this.fadeDuration===0?1:(m-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},it.prototype.zoomAdjustment=function(m){return Math.max(0,(this.transform.zoom-m)/1.5)},it.prototype.hasTransitions=function(m){return this.stale||m-this.lastPlacementChangeTime<this.fadeDuration},it.prototype.stillRecent=function(m,A){var g=this.zoomAtLastRecencyCheck===A?1-this.zoomAdjustment(A):1;return this.zoomAtLastRecencyCheck=A,this.commitTime+this.fadeDuration*g>m},it.prototype.setStale=function(){this.stale=!0};var br=Math.pow(2,25),cn=Math.pow(2,24),Ai=Math.pow(2,17),xo=Math.pow(2,16),po=Math.pow(2,9),Wo=Math.pow(2,8),ds=Math.pow(2,1);function tf(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;var A=m.placed?1:0,g=Math.floor(127*m.opacity);return g*br+A*cn+g*Ai+A*xo+g*po+A*Wo+g*ds+A}var tc=0,rf=function(m){this._sortAcrossTiles=m.layout.get("symbol-z-order")!=="viewport-y"&&m.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};rf.prototype.continuePlacement=function(m,A,g,S,F){for(var q=this._bucketParts;this._currentTileIndex<m.length;)if(A.getBucketParts(q,S,m[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,F())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,q.sort(function(K,ie){return K.sortKey-ie.sortKey}));this._currentPartIndex<q.length;)if(A.placeLayerBucketPart(q[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,F())return!0;return!1};var xc=function(m,A,g,S,F,q,K){this.placement=new it(m,F,q,K),this._currentPlacementIndex=A.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=S,this._done=!1};xc.prototype.isDone=function(){return this._done},xc.prototype.continuePlacement=function(m,A,g){for(var S=this,F=i.browser.now(),q=function(){var fe=i.browser.now()-F;return!S._forceFullPlacement&&fe>2};this._currentPlacementIndex>=0;){var K=A[m[this._currentPlacementIndex]],ie=this.placement.collisionIndex.transform.zoom;if(K.type==="symbol"&&(!K.minzoom||K.minzoom<=ie)&&(!K.maxzoom||K.maxzoom>ie)){if(this._inProgressLayer||(this._inProgressLayer=new rf(K)),this._inProgressLayer.continuePlacement(g[K.source],this.placement,this._showCollisionBoxes,K,q))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},xc.prototype.commit=function(m){return this.placement.commit(m),this.placement};var Bf=512/i.EXTENT/2,wc=function(m,A,g){this.tileID=m,this.indexedSymbolInstances={},this.bucketInstanceId=g;for(var S=0;S<A.length;S++){var F=A.get(S),q=F.key;this.indexedSymbolInstances[q]||(this.indexedSymbolInstances[q]=[]),this.indexedSymbolInstances[q].push({crossTileID:F.crossTileID,coord:this.getScaledCoordinates(F,m)})}};wc.prototype.getScaledCoordinates=function(m,A){var g=Bf/Math.pow(2,A.canonical.z-this.tileID.canonical.z);return{x:Math.floor((A.canonical.x*i.EXTENT+m.anchorX)*g),y:Math.floor((A.canonical.y*i.EXTENT+m.anchorY)*g)}},wc.prototype.findMatches=function(m,A,g){for(var S=this.tileID.canonical.z<A.canonical.z?1:Math.pow(2,this.tileID.canonical.z-A.canonical.z),F=0;F<m.length;F++){var q=m.get(F);if(!q.crossTileID){var K=this.indexedSymbolInstances[q.key];if(K)for(var ie=this.getScaledCoordinates(q,A),fe=0,_e=K;fe<_e.length;fe+=1){var Re=_e[fe];if(Math.abs(Re.coord.x-ie.x)<=S&&Math.abs(Re.coord.y-ie.y)<=S&&!g[Re.crossTileID]){g[Re.crossTileID]=!0,q.crossTileID=Re.crossTileID;break}}}}};var Ps=function(){this.maxCrossTileID=0};Ps.prototype.generate=function(){return++this.maxCrossTileID};var Qu=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Qu.prototype.handleWrapJump=function(m){var A=Math.round((m-this.lng)/360);if(A!==0)for(var g in this.indexes){var S=this.indexes[g],F={};for(var q in S){var K=S[q];K.tileID=K.tileID.unwrapTo(K.tileID.wrap+A),F[K.tileID.key]=K}this.indexes[g]=F}this.lng=m},Qu.prototype.addBucket=function(m,A,g){if(this.indexes[m.overscaledZ]&&this.indexes[m.overscaledZ][m.key]){if(this.indexes[m.overscaledZ][m.key].bucketInstanceId===A.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(m.overscaledZ,this.indexes[m.overscaledZ][m.key])}for(var S=0;S<A.symbolInstances.length;S++)A.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[m.overscaledZ]||(this.usedCrossTileIDs[m.overscaledZ]={});var F=this.usedCrossTileIDs[m.overscaledZ];for(var q in this.indexes){var K=this.indexes[q];if(Number(q)>m.overscaledZ)for(var ie in K){var fe=K[ie];fe.tileID.isChildOf(m)&&fe.findMatches(A.symbolInstances,m,F)}else{var _e=K[m.scaledTo(Number(q)).key];_e&&_e.findMatches(A.symbolInstances,m,F)}}for(var Re=0;Re<A.symbolInstances.length;Re++){var Fe=A.symbolInstances.get(Re);Fe.crossTileID||(Fe.crossTileID=g.generate(),F[Fe.crossTileID]=!0)}return this.indexes[m.overscaledZ]===void 0&&(this.indexes[m.overscaledZ]={}),this.indexes[m.overscaledZ][m.key]=new wc(m,A.symbolInstances,A.bucketInstanceId),!0},Qu.prototype.removeBucketCrossTileIDs=function(m,A){for(var g in A.indexedSymbolInstances)for(var S=0,F=A.indexedSymbolInstances[g];S<F.length;S+=1)delete this.usedCrossTileIDs[m][F[S].crossTileID]},Qu.prototype.removeStaleBuckets=function(m){var A=!1;for(var g in this.indexes){var S=this.indexes[g];for(var F in S)m[S[F].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,S[F]),delete S[F],A=!0)}return A};var Fu=function(){this.layerIndexes={},this.crossTileIDs=new Ps,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Fu.prototype.addLayer=function(m,A,g){var S=this.layerIndexes[m.id];S===void 0&&(S=this.layerIndexes[m.id]=new Qu);var F=!1,q={};S.handleWrapJump(g);for(var K=0,ie=A;K<ie.length;K+=1){var fe=ie[K],_e=fe.getBucket(m);_e&&m.id===_e.layerIds[0]&&(_e.bucketInstanceId||(_e.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(fe.tileID,_e,this.crossTileIDs)&&(F=!0),q[_e.bucketInstanceId]=!0)}return S.removeStaleBuckets(q)&&(F=!0),F},Fu.prototype.pruneUnusedLayers=function(m){var A={};for(var g in m.forEach(function(S){A[S]=!0}),this.layerIndexes)A[g]||delete this.layerIndexes[g]};var Nu=function(m,A){return i.emitValidationErrors(m,A&&A.filter(function(g){return g.identifier!=="source.canvas"}))},zu=i.pick(_r,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Uu=i.pick(_r,["setCenter","setZoom","setBearing","setPitch"]),Ll=function(){var m={},A=i.styleSpec.$version;for(var g in i.styleSpec.$root){var S,F=i.styleSpec.$root[g];F.required&&(S=g==="version"?A:F.type==="array"?[]:{})!=null&&(m[g]=S)}return m}(),ms=function(m){function A(g,S){var F=this;S===void 0&&(S={}),m.call(this),this.map=g,this.dispatcher=new re(qt(),this),this.imageManager=new D,this.imageManager.setEventedParent(this),this.glyphManager=new V(g._requestManager,S.localIdeographFontFamily),this.lineAtlas=new U(256,512),this.crossTileSymbolIndex=new Fu,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new i.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",i.getReferrer());var q=this;this._rtlTextPluginCallback=A.registerForPluginStateChange(function(K){q.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:K.pluginStatus,pluginURL:K.pluginURL},function(ie,fe){if(i.triggerPluginCompletionEvent(ie),fe&&fe.every(function(Re){return Re}))for(var _e in q.sourceCaches)q.sourceCaches[_e].reload()})}),this.on("data",function(K){if(K.dataType==="source"&&K.sourceDataType==="metadata"){var ie=F.sourceCaches[K.sourceId];if(ie){var fe=ie.getSource();if(fe&&fe.vectorLayerIds)for(var _e in F._layers){var Re=F._layers[_e];Re.source===fe.id&&F._validateLayer(Re)}}}})}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.loadURL=function(g,S){var F=this;S===void 0&&(S={}),this.fire(new i.Event("dataloading",{dataType:"style"}));var q=typeof S.validate=="boolean"?S.validate:!i.isMapboxURL(g);g=this.map._requestManager.normalizeStyleURL(g,S.accessToken);var K=this.map._requestManager.transformRequest(g,i.ResourceType.Style);this._request=i.getJSON(K,function(ie,fe){F._request=null,ie?F.fire(new i.ErrorEvent(ie)):fe&&F._load(fe,q)})},A.prototype.loadJSON=function(g,S){var F=this;S===void 0&&(S={}),this.fire(new i.Event("dataloading",{dataType:"style"})),this._request=i.browser.frame(function(){F._request=null,F._load(g,S.validate!==!1)})},A.prototype.loadEmpty=function(){this.fire(new i.Event("dataloading",{dataType:"style"})),this._load(Ll,!1)},A.prototype._load=function(g,S){if(!S||!Nu(this,i.validateStyle(g))){for(var F in this._loaded=!0,this.stylesheet=g,g.sources)this.addSource(F,g.sources[F],{validate:!1});g.sprite?this._loadSprite(g.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(g.glyphs);var q=Er(this.stylesheet.layers);this._order=q.map(function(_e){return _e.id}),this._layers={},this._serializedLayers={};for(var K=0,ie=q;K<ie.length;K+=1){var fe=ie[K];(fe=i.createStyleLayer(fe)).setEventedParent(this,{layer:{id:fe.id}}),this._layers[fe.id]=fe,this._serializedLayers[fe.id]=fe.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new O(this.stylesheet.light),this.fire(new i.Event("data",{dataType:"style"})),this.fire(new i.Event("style.load"))}},A.prototype._loadSprite=function(g){var S=this;this._spriteRequest=function(F,q,K){var ie,fe,_e,Re=i.browser.devicePixelRatio>1?"@2x":"",Fe=i.getJSON(q.transformRequest(q.normalizeSpriteURL(F,Re,".json"),i.ResourceType.SpriteJSON),function(Ze,ct){Fe=null,_e||(_e=Ze,ie=ct,Je())}),Ne=i.getImage(q.transformRequest(q.normalizeSpriteURL(F,Re,".png"),i.ResourceType.SpriteImage),function(Ze,ct){Ne=null,_e||(_e=Ze,fe=ct,Je())});function Je(){if(_e)K(_e);else if(ie&&fe){var Ze=i.browser.getImageData(fe),ct={};for(var Xe in ie){var st=ie[Xe],yt=st.width,Lt=st.height,Jt=st.x,Ht=st.y,er=st.sdf,pr=st.pixelRatio,Sr=st.stretchX,Tr=st.stretchY,Xr=st.content,Tn=new i.RGBAImage({width:yt,height:Lt});i.RGBAImage.copy(Ze,Tn,{x:Jt,y:Ht},{x:0,y:0},{width:yt,height:Lt}),ct[Xe]={data:Tn,pixelRatio:pr,sdf:er,stretchX:Sr,stretchY:Tr,content:Xr}}K(null,ct)}}return{cancel:function(){Fe&&(Fe.cancel(),Fe=null),Ne&&(Ne.cancel(),Ne=null)}}}(g,this.map._requestManager,function(F,q){if(S._spriteRequest=null,F)S.fire(new i.ErrorEvent(F));else if(q)for(var K in q)S.imageManager.addImage(K,q[K]);S.imageManager.setLoaded(!0),S._availableImages=S.imageManager.listImages(),S.dispatcher.broadcast("setImages",S._availableImages),S.fire(new i.Event("data",{dataType:"style"}))})},A.prototype._validateLayer=function(g){var S=this.sourceCaches[g.source];if(S){var F=g.sourceLayer;if(F){var q=S.getSource();(q.type==="geojson"||q.vectorLayerIds&&q.vectorLayerIds.indexOf(F)===-1)&&this.fire(new i.ErrorEvent(new Error('Source layer "'+F+'" does not exist on source "'+q.id+'" as specified by style layer "'+g.id+'"')))}}},A.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var g in this.sourceCaches)if(!this.sourceCaches[g].loaded())return!1;return!!this.imageManager.isLoaded()},A.prototype._serializeLayers=function(g){for(var S=[],F=0,q=g;F<q.length;F+=1){var K=this._layers[q[F]];K.type!=="custom"&&S.push(K.serialize())}return S},A.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var g in this.sourceCaches)if(this.sourceCaches[g].hasTransition())return!0;for(var S in this._layers)if(this._layers[S].hasTransition())return!0;return!1},A.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},A.prototype.update=function(g){if(this._loaded){var S=this._changed;if(this._changed){var F=Object.keys(this._updatedLayers),q=Object.keys(this._removedLayers);for(var K in(F.length||q.length)&&this._updateWorkerLayers(F,q),this._updatedSources){var ie=this._updatedSources[K];ie==="reload"?this._reloadSource(K):ie==="clear"&&this._clearSource(K)}for(var fe in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[fe].updateTransitions(g);this.light.updateTransitions(g),this._resetUpdates()}var _e={};for(var Re in this.sourceCaches){var Fe=this.sourceCaches[Re];_e[Re]=Fe.used,Fe.used=!1}for(var Ne=0,Je=this._order;Ne<Je.length;Ne+=1){var Ze=this._layers[Je[Ne]];Ze.recalculate(g,this._availableImages),!Ze.isHidden(g.zoom)&&Ze.source&&(this.sourceCaches[Ze.source].used=!0)}for(var ct in _e){var Xe=this.sourceCaches[ct];_e[ct]!==Xe.used&&Xe.fire(new i.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:ct}))}this.light.recalculate(g),this.z=g.zoom,S&&this.fire(new i.Event("data",{dataType:"style"}))}},A.prototype._updateTilesForChangedImages=function(){var g=Object.keys(this._changedImages);if(g.length){for(var S in this.sourceCaches)this.sourceCaches[S].reloadTilesForDependencies(["icons","patterns"],g);this._changedImages={}}},A.prototype._updateWorkerLayers=function(g,S){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(g),removedIds:S})},A.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},A.prototype.setState=function(g){var S=this;if(this._checkLoaded(),Nu(this,i.validateStyle(g)))return!1;(g=i.clone$1(g)).layers=Er(g.layers);var F=function(K,ie){if(!K)return[{command:_r.setStyle,args:[ie]}];var fe=[];try{if(!i.deepEqual(K.version,ie.version))return[{command:_r.setStyle,args:[ie]}];i.deepEqual(K.center,ie.center)||fe.push({command:_r.setCenter,args:[ie.center]}),i.deepEqual(K.zoom,ie.zoom)||fe.push({command:_r.setZoom,args:[ie.zoom]}),i.deepEqual(K.bearing,ie.bearing)||fe.push({command:_r.setBearing,args:[ie.bearing]}),i.deepEqual(K.pitch,ie.pitch)||fe.push({command:_r.setPitch,args:[ie.pitch]}),i.deepEqual(K.sprite,ie.sprite)||fe.push({command:_r.setSprite,args:[ie.sprite]}),i.deepEqual(K.glyphs,ie.glyphs)||fe.push({command:_r.setGlyphs,args:[ie.glyphs]}),i.deepEqual(K.transition,ie.transition)||fe.push({command:_r.setTransition,args:[ie.transition]}),i.deepEqual(K.light,ie.light)||fe.push({command:_r.setLight,args:[ie.light]});var _e={},Re=[];(function(Ne,Je,Ze,ct){var Xe;for(Xe in Je=Je||{},Ne=Ne||{})Ne.hasOwnProperty(Xe)&&(Je.hasOwnProperty(Xe)||Cr(Xe,Ze,ct));for(Xe in Je)Je.hasOwnProperty(Xe)&&(Ne.hasOwnProperty(Xe)?i.deepEqual(Ne[Xe],Je[Xe])||(Ne[Xe].type==="geojson"&&Je[Xe].type==="geojson"&&Ci(Ne,Je,Xe)?Ze.push({command:_r.setGeoJSONSourceData,args:[Xe,Je[Xe].data]}):Qn(Xe,Je,Ze,ct)):Wn(Xe,Je,Ze))})(K.sources,ie.sources,Re,_e);var Fe=[];K.layers&&K.layers.forEach(function(Ne){_e[Ne.source]?fe.push({command:_r.removeLayer,args:[Ne.id]}):Fe.push(Ne)}),fe=fe.concat(Re),function(Ne,Je,Ze){Je=Je||[];var ct,Xe,st,yt,Lt,Jt,Ht,er=(Ne=Ne||[]).map(bi),pr=Je.map(bi),Sr=Ne.reduce(Un,{}),Tr=Je.reduce(Un,{}),Xr=er.slice(),Tn=Object.create(null);for(ct=0,Xe=0;ct<er.length;ct++)Tr.hasOwnProperty(st=er[ct])?Xe++:(Ze.push({command:_r.removeLayer,args:[st]}),Xr.splice(Xr.indexOf(st,Xe),1));for(ct=0,Xe=0;ct<pr.length;ct++)Xr[Xr.length-1-ct]!==(st=pr[pr.length-1-ct])&&(Sr.hasOwnProperty(st)?(Ze.push({command:_r.removeLayer,args:[st]}),Xr.splice(Xr.lastIndexOf(st,Xr.length-Xe),1)):Xe++,Ze.push({command:_r.addLayer,args:[Tr[st],Jt=Xr[Xr.length-ct]]}),Xr.splice(Xr.length-ct,0,st),Tn[st]=!0);for(ct=0;ct<pr.length;ct++)if(yt=Sr[st=pr[ct]],Lt=Tr[st],!Tn[st]&&!i.deepEqual(yt,Lt))if(i.deepEqual(yt.source,Lt.source)&&i.deepEqual(yt["source-layer"],Lt["source-layer"])&&i.deepEqual(yt.type,Lt.type)){for(Ht in ii(yt.layout,Lt.layout,Ze,st,null,_r.setLayoutProperty),ii(yt.paint,Lt.paint,Ze,st,null,_r.setPaintProperty),i.deepEqual(yt.filter,Lt.filter)||Ze.push({command:_r.setFilter,args:[st,Lt.filter]}),i.deepEqual(yt.minzoom,Lt.minzoom)&&i.deepEqual(yt.maxzoom,Lt.maxzoom)||Ze.push({command:_r.setLayerZoomRange,args:[st,Lt.minzoom,Lt.maxzoom]}),yt)yt.hasOwnProperty(Ht)&&Ht!=="layout"&&Ht!=="paint"&&Ht!=="filter"&&Ht!=="metadata"&&Ht!=="minzoom"&&Ht!=="maxzoom"&&(Ht.indexOf("paint.")===0?ii(yt[Ht],Lt[Ht],Ze,st,Ht.slice(6),_r.setPaintProperty):i.deepEqual(yt[Ht],Lt[Ht])||Ze.push({command:_r.setLayerProperty,args:[st,Ht,Lt[Ht]]}));for(Ht in Lt)Lt.hasOwnProperty(Ht)&&!yt.hasOwnProperty(Ht)&&Ht!=="layout"&&Ht!=="paint"&&Ht!=="filter"&&Ht!=="metadata"&&Ht!=="minzoom"&&Ht!=="maxzoom"&&(Ht.indexOf("paint.")===0?ii(yt[Ht],Lt[Ht],Ze,st,Ht.slice(6),_r.setPaintProperty):i.deepEqual(yt[Ht],Lt[Ht])||Ze.push({command:_r.setLayerProperty,args:[st,Ht,Lt[Ht]]}))}else Ze.push({command:_r.removeLayer,args:[st]}),Jt=Xr[Xr.lastIndexOf(st)+1],Ze.push({command:_r.addLayer,args:[Lt,Jt]})}(Fe,ie.layers,fe)}catch(Ne){console.warn("Unable to compute style diff:",Ne),fe=[{command:_r.setStyle,args:[ie]}]}return fe}(this.serialize(),g).filter(function(K){return!(K.command in Uu)});if(F.length===0)return!1;var q=F.filter(function(K){return!(K.command in zu)});if(q.length>0)throw new Error("Unimplemented: "+q.map(function(K){return K.command}).join(", ")+".");return F.forEach(function(K){K.command!=="setTransition"&&S[K.command].apply(S,K.args)}),this.stylesheet=g,!0},A.prototype.addImage=function(g,S){if(this.getImage(g))return this.fire(new i.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(g,S),this._afterImageUpdated(g)},A.prototype.updateImage=function(g,S){this.imageManager.updateImage(g,S)},A.prototype.getImage=function(g){return this.imageManager.getImage(g)},A.prototype.removeImage=function(g){if(!this.getImage(g))return this.fire(new i.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(g),this._afterImageUpdated(g)},A.prototype._afterImageUpdated=function(g){this._availableImages=this.imageManager.listImages(),this._changedImages[g]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new i.Event("data",{dataType:"style"}))},A.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},A.prototype.addSource=function(g,S,F){var q=this;if(F===void 0&&(F={}),this._checkLoaded(),this.sourceCaches[g]!==void 0)throw new Error("There is already a source with this ID");if(!S.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(S).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(S.type)>=0&&this._validate(i.validateStyle.source,"sources."+g,S,null,F))){this.map&&this.map._collectResourceTiming&&(S.collectResourceTiming=!0);var K=this.sourceCaches[g]=new Qe(g,S,this.dispatcher);K.style=this,K.setEventedParent(this,function(){return{isSourceLoaded:q.loaded(),source:K.serialize(),sourceId:g}}),K.onAdd(this.map),this._changed=!0}},A.prototype.removeSource=function(g){if(this._checkLoaded(),this.sourceCaches[g]===void 0)throw new Error("There is no source with this ID");for(var S in this._layers)if(this._layers[S].source===g)return this.fire(new i.ErrorEvent(new Error('Source "'+g+'" cannot be removed while layer "'+S+'" is using it.')));var F=this.sourceCaches[g];delete this.sourceCaches[g],delete this._updatedSources[g],F.fire(new i.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:g})),F.setEventedParent(null),F.clearTiles(),F.onRemove&&F.onRemove(this.map),this._changed=!0},A.prototype.setGeoJSONSourceData=function(g,S){this._checkLoaded(),this.sourceCaches[g].getSource().setData(S),this._changed=!0},A.prototype.getSource=function(g){return this.sourceCaches[g]&&this.sourceCaches[g].getSource()},A.prototype.addLayer=function(g,S,F){F===void 0&&(F={}),this._checkLoaded();var q=g.id;if(this.getLayer(q))this.fire(new i.ErrorEvent(new Error('Layer with id "'+q+'" already exists on this map')));else{var K;if(g.type==="custom"){if(Nu(this,i.validateCustomStyleLayer(g)))return;K=i.createStyleLayer(g)}else{if(typeof g.source=="object"&&(this.addSource(q,g.source),g=i.clone$1(g),g=i.extend(g,{source:q})),this._validate(i.validateStyle.layer,"layers."+q,g,{arrayIndex:-1},F))return;K=i.createStyleLayer(g),this._validateLayer(K),K.setEventedParent(this,{layer:{id:q}}),this._serializedLayers[K.id]=K.serialize()}var ie=S?this._order.indexOf(S):this._order.length;if(S&&ie===-1)this.fire(new i.ErrorEvent(new Error('Layer with id "'+S+'" does not exist on this map.')));else{if(this._order.splice(ie,0,q),this._layerOrderChanged=!0,this._layers[q]=K,this._removedLayers[q]&&K.source&&K.type!=="custom"){var fe=this._removedLayers[q];delete this._removedLayers[q],fe.type!==K.type?this._updatedSources[K.source]="clear":(this._updatedSources[K.source]="reload",this.sourceCaches[K.source].pause())}this._updateLayer(K),K.onAdd&&K.onAdd(this.map)}}},A.prototype.moveLayer=function(g,S){if(this._checkLoaded(),this._changed=!0,this._layers[g]){if(g!==S){var F=this._order.indexOf(g);this._order.splice(F,1);var q=S?this._order.indexOf(S):this._order.length;S&&q===-1?this.fire(new i.ErrorEvent(new Error('Layer with id "'+S+'" does not exist on this map.'))):(this._order.splice(q,0,g),this._layerOrderChanged=!0)}}else this.fire(new i.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be moved.")))},A.prototype.removeLayer=function(g){this._checkLoaded();var S=this._layers[g];if(S){S.setEventedParent(null);var F=this._order.indexOf(g);this._order.splice(F,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[g]=S,delete this._layers[g],delete this._serializedLayers[g],delete this._updatedLayers[g],delete this._updatedPaintProps[g],S.onRemove&&S.onRemove(this.map)}else this.fire(new i.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be removed.")))},A.prototype.getLayer=function(g){return this._layers[g]},A.prototype.hasLayer=function(g){return g in this._layers},A.prototype.setLayerZoomRange=function(g,S,F){this._checkLoaded();var q=this.getLayer(g);q?q.minzoom===S&&q.maxzoom===F||(S!=null&&(q.minzoom=S),F!=null&&(q.maxzoom=F),this._updateLayer(q)):this.fire(new i.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot have zoom extent.")))},A.prototype.setFilter=function(g,S,F){F===void 0&&(F={}),this._checkLoaded();var q=this.getLayer(g);if(q){if(!i.deepEqual(q.filter,S))return S==null?(q.filter=void 0,void this._updateLayer(q)):void(this._validate(i.validateStyle.filter,"layers."+q.id+".filter",S,null,F)||(q.filter=i.clone$1(S),this._updateLayer(q)))}else this.fire(new i.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be filtered.")))},A.prototype.getFilter=function(g){return i.clone$1(this.getLayer(g).filter)},A.prototype.setLayoutProperty=function(g,S,F,q){q===void 0&&(q={}),this._checkLoaded();var K=this.getLayer(g);K?i.deepEqual(K.getLayoutProperty(S),F)||(K.setLayoutProperty(S,F,q),this._updateLayer(K)):this.fire(new i.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be styled.")))},A.prototype.getLayoutProperty=function(g,S){var F=this.getLayer(g);if(F)return F.getLayoutProperty(S);this.fire(new i.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style.")))},A.prototype.setPaintProperty=function(g,S,F,q){q===void 0&&(q={}),this._checkLoaded();var K=this.getLayer(g);K?i.deepEqual(K.getPaintProperty(S),F)||(K.setPaintProperty(S,F,q)&&this._updateLayer(K),this._changed=!0,this._updatedPaintProps[g]=!0):this.fire(new i.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be styled.")))},A.prototype.getPaintProperty=function(g,S){return this.getLayer(g).getPaintProperty(S)},A.prototype.setFeatureState=function(g,S){this._checkLoaded();var F=g.source,q=g.sourceLayer,K=this.sourceCaches[F];if(K!==void 0){var ie=K.getSource().type;ie==="geojson"&&q?this.fire(new i.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ie!=="vector"||q?(g.id===void 0&&this.fire(new i.ErrorEvent(new Error("The feature id parameter must be provided."))),K.setFeatureState(q,g.id,S)):this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new i.ErrorEvent(new Error("The source '"+F+"' does not exist in the map's style.")))},A.prototype.removeFeatureState=function(g,S){this._checkLoaded();var F=g.source,q=this.sourceCaches[F];if(q!==void 0){var K=q.getSource().type,ie=K==="vector"?g.sourceLayer:void 0;K!=="vector"||ie?S&&typeof g.id!="string"&&typeof g.id!="number"?this.fire(new i.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):q.removeFeatureState(ie,g.id,S):this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new i.ErrorEvent(new Error("The source '"+F+"' does not exist in the map's style.")))},A.prototype.getFeatureState=function(g){this._checkLoaded();var S=g.source,F=g.sourceLayer,q=this.sourceCaches[S];if(q!==void 0){if(q.getSource().type!=="vector"||F)return g.id===void 0&&this.fire(new i.ErrorEvent(new Error("The feature id parameter must be provided."))),q.getFeatureState(F,g.id);this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new i.ErrorEvent(new Error("The source '"+S+"' does not exist in the map's style.")))},A.prototype.getTransition=function(){return i.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},A.prototype.serialize=function(){return i.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:i.mapObject(this.sourceCaches,function(g){return g.serialize()}),layers:this._serializeLayers(this._order)},function(g){return g!==void 0})},A.prototype._updateLayer=function(g){this._updatedLayers[g.id]=!0,g.source&&!this._updatedSources[g.source]&&this.sourceCaches[g.source].getSource().type!=="raster"&&(this._updatedSources[g.source]="reload",this.sourceCaches[g.source].pause()),this._changed=!0},A.prototype._flattenAndSortRenderedFeatures=function(g){for(var S=this,F=function(Sr){return S._layers[Sr].type==="fill-extrusion"},q={},K=[],ie=this._order.length-1;ie>=0;ie--){var fe=this._order[ie];if(F(fe)){q[fe]=ie;for(var _e=0,Re=g;_e<Re.length;_e+=1){var Fe=Re[_e][fe];if(Fe)for(var Ne=0,Je=Fe;Ne<Je.length;Ne+=1)K.push(Je[Ne])}}}K.sort(function(Sr,Tr){return Tr.intersectionZ-Sr.intersectionZ});for(var Ze=[],ct=this._order.length-1;ct>=0;ct--){var Xe=this._order[ct];if(F(Xe))for(var st=K.length-1;st>=0;st--){var yt=K[st].feature;if(q[yt.layer.id]<ct)break;Ze.push(yt),K.pop()}else for(var Lt=0,Jt=g;Lt<Jt.length;Lt+=1){var Ht=Jt[Lt][Xe];if(Ht)for(var er=0,pr=Ht;er<pr.length;er+=1)Ze.push(pr[er].feature)}}return Ze},A.prototype.queryRenderedFeatures=function(g,S,F){S&&S.filter&&this._validate(i.validateStyle.filter,"queryRenderedFeatures.filter",S.filter,null,S);var q={};if(S&&S.layers){if(!Array.isArray(S.layers))return this.fire(new i.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var K=0,ie=S.layers;K<ie.length;K+=1){var fe=ie[K],_e=this._layers[fe];if(!_e)return this.fire(new i.ErrorEvent(new Error("The layer '"+fe+"' does not exist in the map's style and cannot be queried for features."))),[];q[_e.source]=!0}}var Re=[];for(var Fe in S.availableImages=this._availableImages,this.sourceCaches)S.layers&&!q[Fe]||Re.push(Or(this.sourceCaches[Fe],this._layers,this._serializedLayers,g,S,F));return this.placement&&Re.push(function(Ne,Je,Ze,ct,Xe,st,yt){for(var Lt={},Jt=st.queryRenderedSymbols(ct),Ht=[],er=0,pr=Object.keys(Jt).map(Number);er<pr.length;er+=1)Ht.push(yt[pr[er]]);Ht.sort(he);for(var Sr=function(){var In=Xr[Tr],zi=In.featureIndex.lookupSymbolFeatures(Jt[In.bucketInstanceId],Je,In.bucketIndex,In.sourceLayerIndex,Xe.filter,Xe.layers,Xe.availableImages,Ne);for(var $r in zi){var pn=Lt[$r]=Lt[$r]||[],li=zi[$r];li.sort(function(ri,Gn){var zn=In.featureSortOrder;if(zn){var Do=zn.indexOf(ri.featureIndex);return zn.indexOf(Gn.featureIndex)-Do}return Gn.featureIndex-ri.featureIndex});for(var Kn=0,qn=li;Kn<qn.length;Kn+=1)pn.push(qn[Kn])}},Tr=0,Xr=Ht;Tr<Xr.length;Tr+=1)Sr();var Tn=function(In){Lt[In].forEach(function(zi){var $r=zi.feature,pn=Ze[Ne[In].source].getFeatureState($r.layer["source-layer"],$r.id);$r.source=$r.layer.source,$r.layer["source-layer"]&&($r.sourceLayer=$r.layer["source-layer"]),$r.state=pn})};for(var Ln in Lt)Tn(Ln);return Lt}(this._layers,this._serializedLayers,this.sourceCaches,g,S,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Re)},A.prototype.querySourceFeatures=function(g,S){S&&S.filter&&this._validate(i.validateStyle.filter,"querySourceFeatures.filter",S.filter,null,S);var F=this.sourceCaches[g];return F?function(q,K){for(var ie=q.getRenderableIds().map(function(Je){return q.getTileByID(Je)}),fe=[],_e={},Re=0;Re<ie.length;Re++){var Fe=ie[Re],Ne=Fe.tileID.canonical.key;_e[Ne]||(_e[Ne]=!0,Fe.querySourceFeatures(fe,K))}return fe}(F,S):[]},A.prototype.addSourceType=function(g,S,F){return A.getSourceType(g)?F(new Error('A source type called "'+g+'" already exists.')):(A.setSourceType(g,S),S.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:g,url:S.workerSourceURL},F):F(null,null))},A.prototype.getLight=function(){return this.light.getLight()},A.prototype.setLight=function(g,S){S===void 0&&(S={}),this._checkLoaded();var F=this.light.getLight(),q=!1;for(var K in g)if(!i.deepEqual(g[K],F[K])){q=!0;break}if(q){var ie={now:i.browser.now(),transition:i.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(g,S),this.light.updateTransitions(ie)}},A.prototype._validate=function(g,S,F,q,K){return K===void 0&&(K={}),(!K||K.validate!==!1)&&Nu(this,g.call(i.validateStyle,i.extend({key:S,style:this.serialize(),value:F,styleSpec:i.styleSpec},q)))},A.prototype._remove=function(){for(var g in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),i.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[g].setEventedParent(null);for(var S in this.sourceCaches)this.sourceCaches[S].clearTiles(),this.sourceCaches[S].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},A.prototype._clearSource=function(g){this.sourceCaches[g].clearTiles()},A.prototype._reloadSource=function(g){this.sourceCaches[g].resume(),this.sourceCaches[g].reload()},A.prototype._updateSources=function(g){for(var S in this.sourceCaches)this.sourceCaches[S].update(g)},A.prototype._generateCollisionBoxes=function(){for(var g in this.sourceCaches)this._reloadSource(g)},A.prototype._updatePlacement=function(g,S,F,q,K){K===void 0&&(K=!1);for(var ie=!1,fe=!1,_e={},Re=0,Fe=this._order;Re<Fe.length;Re+=1){var Ne=this._layers[Fe[Re]];if(Ne.type==="symbol"){if(!_e[Ne.source]){var Je=this.sourceCaches[Ne.source];_e[Ne.source]=Je.getRenderableIds(!0).map(function(yt){return Je.getTileByID(yt)}).sort(function(yt,Lt){return Lt.tileID.overscaledZ-yt.tileID.overscaledZ||(yt.tileID.isLessThan(Lt.tileID)?-1:1)})}var Ze=this.crossTileSymbolIndex.addLayer(Ne,_e[Ne.source],g.center.lng);ie=ie||Ze}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((K=K||this._layerOrderChanged||F===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(i.browser.now(),g.zoom))&&(this.pauseablePlacement=new xc(g,this._order,K,S,F,q,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,_e),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(i.browser.now()),fe=!0),ie&&this.pauseablePlacement.placement.setStale()),fe||ie)for(var ct=0,Xe=this._order;ct<Xe.length;ct+=1){var st=this._layers[Xe[ct]];st.type==="symbol"&&this.placement.updateLayerOpacities(st,_e[st.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(i.browser.now())},A.prototype._releaseSymbolFadeTiles=function(){for(var g in this.sourceCaches)this.sourceCaches[g].releaseSymbolFadeTiles()},A.prototype.getImages=function(g,S,F){this.imageManager.getImages(S.icons,F),this._updateTilesForChangedImages();var q=this.sourceCaches[S.source];q&&q.setDependencies(S.tileID.key,S.type,S.icons)},A.prototype.getGlyphs=function(g,S,F){this.glyphManager.getGlyphs(S.stacks,F)},A.prototype.getResource=function(g,S,F){return i.makeRequest(S,F)},A}(i.Evented);ms.getSourceType=function(m){return Nt[m]},ms.setSourceType=function(m,A){Nt[m]=A},ms.registerForPluginStateChange=i.registerForPluginStateChange;var $i=i.createLayout([{name:"a_pos",type:"Int16",components:2}]),ru=Fr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Df=Fr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ff=Fr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),rc=Fr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),el=Fr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Tc=Fr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),nc=Fr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Sc=Fr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),_u=Fr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),k=Fr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Y=Fr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),ne=Fr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),oe=Fr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ye=Fr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),be=Fr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Le=Fr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Ee=Fr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Be=Fr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),tt=Fr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),wt=Fr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),b=Fr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Mt=Fr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Vt=Fr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),He=Fr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Bn=Fr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),fn=Fr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Fr(m,A){var g=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,S=A.match(/attribute ([\w]+) ([\w]+)/g),F=m.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),q=A.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),K=q?q.concat(F):F,ie={};return{fragmentSource:m=m.replace(g,function(fe,_e,Re,Fe,Ne){return ie[Ne]=!0,_e==="define"?`
#ifndef HAS_UNIFORM_u_`+Ne+`
varying `+Re+" "+Fe+" "+Ne+`;
#else
uniform `+Re+" "+Fe+" u_"+Ne+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Ne+`
    `+Re+" "+Fe+" "+Ne+" = u_"+Ne+`;
#endif
`}),vertexSource:A=A.replace(g,function(fe,_e,Re,Fe,Ne){var Je=Fe==="float"?"vec2":"vec4",Ze=Ne.match(/color/)?"color":Je;return ie[Ne]?_e==="define"?`
#ifndef HAS_UNIFORM_u_`+Ne+`
uniform lowp float u_`+Ne+`_t;
attribute `+Re+" "+Je+" a_"+Ne+`;
varying `+Re+" "+Fe+" "+Ne+`;
#else
uniform `+Re+" "+Fe+" u_"+Ne+`;
#endif
`:Ze==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ne+`
    `+Ne+" = a_"+Ne+`;
#else
    `+Re+" "+Fe+" "+Ne+" = u_"+Ne+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ne+`
    `+Ne+" = unpack_mix_"+Ze+"(a_"+Ne+", u_"+Ne+`_t);
#else
    `+Re+" "+Fe+" "+Ne+" = u_"+Ne+`;
#endif
`:_e==="define"?`
#ifndef HAS_UNIFORM_u_`+Ne+`
uniform lowp float u_`+Ne+`_t;
attribute `+Re+" "+Je+" a_"+Ne+`;
#else
uniform `+Re+" "+Fe+" u_"+Ne+`;
#endif
`:Ze==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ne+`
    `+Re+" "+Fe+" "+Ne+" = a_"+Ne+`;
#else
    `+Re+" "+Fe+" "+Ne+" = u_"+Ne+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ne+`
    `+Re+" "+Fe+" "+Ne+" = unpack_mix_"+Ze+"(a_"+Ne+", u_"+Ne+`_t);
#else
    `+Re+" "+Fe+" "+Ne+" = u_"+Ne+`;
#endif
`}),staticAttributes:S,staticUniforms:K}}var yi=Object.freeze({__proto__:null,prelude:ru,background:Df,backgroundPattern:Ff,circle:rc,clippingMask:el,heatmap:Tc,heatmapTexture:nc,collisionBox:Sc,collisionCircle:_u,debug:k,fill:Y,fillOutline:ne,fillOutlinePattern:oe,fillPattern:ye,fillExtrusion:be,fillExtrusionPattern:Le,hillshadePrepare:Ee,hillshade:Be,line:tt,lineGradient:wt,linePattern:b,lineSDF:Mt,raster:Vt,symbolIcon:He,symbolSDF:Bn,symbolTextAndIcon:fn}),Oa=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function vn(m){for(var A=[],g=0;g<m.length;g++)if(m[g]!==null){var S=m[g].split(" ");A.push(S.pop())}return A}Oa.prototype.bind=function(m,A,g,S,F,q,K,ie){this.context=m;for(var fe=this.boundPaintVertexBuffers.length!==S.length,_e=0;!fe&&_e<S.length;_e++)this.boundPaintVertexBuffers[_e]!==S[_e]&&(fe=!0);m.extVertexArrayObject&&this.vao&&this.boundProgram===A&&this.boundLayoutVertexBuffer===g&&!fe&&this.boundIndexBuffer===F&&this.boundVertexOffset===q&&this.boundDynamicVertexBuffer===K&&this.boundDynamicVertexBuffer2===ie?(m.bindVertexArrayOES.set(this.vao),K&&K.bind(),F&&F.dynamicDraw&&F.bind(),ie&&ie.bind()):this.freshBind(A,g,S,F,q,K,ie)},Oa.prototype.freshBind=function(m,A,g,S,F,q,K){var ie,fe=m.numAttributes,_e=this.context,Re=_e.gl;if(_e.extVertexArrayObject)this.vao&&this.destroy(),this.vao=_e.extVertexArrayObject.createVertexArrayOES(),_e.bindVertexArrayOES.set(this.vao),ie=0,this.boundProgram=m,this.boundLayoutVertexBuffer=A,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=S,this.boundVertexOffset=F,this.boundDynamicVertexBuffer=q,this.boundDynamicVertexBuffer2=K;else{ie=_e.currentNumAttributes||0;for(var Fe=fe;Fe<ie;Fe++)Re.disableVertexAttribArray(Fe)}A.enableAttributes(Re,m);for(var Ne=0,Je=g;Ne<Je.length;Ne+=1)Je[Ne].enableAttributes(Re,m);q&&q.enableAttributes(Re,m),K&&K.enableAttributes(Re,m),A.bind(),A.setVertexAttribPointers(Re,m,F);for(var Ze=0,ct=g;Ze<ct.length;Ze+=1){var Xe=ct[Ze];Xe.bind(),Xe.setVertexAttribPointers(Re,m,F)}q&&(q.bind(),q.setVertexAttribPointers(Re,m,F)),S&&S.bind(),K&&(K.bind(),K.setVertexAttribPointers(Re,m,F)),_e.currentNumAttributes=fe},Oa.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Gr=function(m,A,g,S,F,q){var K=m.gl;this.program=K.createProgram();for(var ie=vn(g.staticAttributes),fe=S?S.getBinderAttributes():[],_e=ie.concat(fe),Re=g.staticUniforms?vn(g.staticUniforms):[],Fe=S?S.getBinderUniforms():[],Ne=[],Je=0,Ze=Re.concat(Fe);Je<Ze.length;Je+=1){var ct=Ze[Je];Ne.indexOf(ct)<0&&Ne.push(ct)}var Xe=S?S.defines():[];q&&Xe.push("#define OVERDRAW_INSPECTOR;");var st=Xe.concat(ru.fragmentSource,g.fragmentSource).join(`
`),yt=Xe.concat(ru.vertexSource,g.vertexSource).join(`
`),Lt=K.createShader(K.FRAGMENT_SHADER);if(K.isContextLost())this.failedToCreate=!0;else{K.shaderSource(Lt,st),K.compileShader(Lt),K.attachShader(this.program,Lt);var Jt=K.createShader(K.VERTEX_SHADER);if(K.isContextLost())this.failedToCreate=!0;else{K.shaderSource(Jt,yt),K.compileShader(Jt),K.attachShader(this.program,Jt),this.attributes={};var Ht={};this.numAttributes=_e.length;for(var er=0;er<this.numAttributes;er++)_e[er]&&(K.bindAttribLocation(this.program,er,_e[er]),this.attributes[_e[er]]=er);K.linkProgram(this.program),K.deleteShader(Jt),K.deleteShader(Lt);for(var pr=0;pr<Ne.length;pr++){var Sr=Ne[pr];if(Sr&&!Ht[Sr]){var Tr=K.getUniformLocation(this.program,Sr);Tr&&(Ht[Sr]=Tr)}}this.fixedUniforms=F(m,Ht),this.binderUniforms=S?S.getUniforms(m,Ht):[]}}};function $a(m,A,g){var S=1/ai(g,1,A.transform.tileZoom),F=Math.pow(2,g.tileID.overscaledZ),q=g.tileSize*Math.pow(2,A.transform.tileZoom)/F,K=q*(g.tileID.canonical.x+g.tileID.wrap*F),ie=q*g.tileID.canonical.y;return{u_image:0,u_texsize:g.imageAtlasTexture.size,u_scale:[S,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[K>>16,ie>>16],u_pixel_coord_lower:[65535&K,65535&ie]}}Gr.prototype.draw=function(m,A,g,S,F,q,K,ie,fe,_e,Re,Fe,Ne,Je,Ze,ct){var Xe,st=m.gl;if(!this.failedToCreate){for(var yt in m.program.set(this.program),m.setDepthMode(g),m.setStencilMode(S),m.setColorMode(F),m.setCullFace(q),this.fixedUniforms)this.fixedUniforms[yt].set(K[yt]);Je&&Je.setUniforms(m,this.binderUniforms,Fe,{zoom:Ne});for(var Lt=(Xe={},Xe[st.LINES]=2,Xe[st.TRIANGLES]=3,Xe[st.LINE_STRIP]=1,Xe)[A],Jt=0,Ht=Re.get();Jt<Ht.length;Jt+=1){var er=Ht[Jt],pr=er.vaos||(er.vaos={});(pr[ie]||(pr[ie]=new Oa)).bind(m,this,fe,Je?Je.getPaintVertexBuffers():[],_e,er.vertexOffset,Ze,ct),st.drawElements(A,er.primitiveLength*Lt,st.UNSIGNED_SHORT,er.primitiveOffset*Lt*2)}}};var Vi=function(m,A,g,S){var F=A.style.light,q=F.properties.get("position"),K=[q.x,q.y,q.z],ie=i.create$1();F.properties.get("anchor")==="viewport"&&i.fromRotation(ie,-A.transform.angle),i.transformMat3(K,K,ie);var fe=F.properties.get("color");return{u_matrix:m,u_lightpos:K,u_lightintensity:F.properties.get("intensity"),u_lightcolor:[fe.r,fe.g,fe.b],u_vertical_gradient:+g,u_opacity:S}},ua=function(m,A,g,S,F,q,K){return i.extend(Vi(m,A,g,S),$a(q,A,K),{u_height_factor:-Math.pow(2,F.overscaledZ)/K.tileSize/8})},Jo=function(m){return{u_matrix:m}},to=function(m,A,g,S){return i.extend(Jo(m),$a(g,A,S))},wo=function(m,A){return{u_matrix:m,u_world:A}},qo=function(m,A,g,S,F){return i.extend(to(m,A,g,S),{u_world:F})},ju=function(m,A,g,S){var F,q,K=m.transform;if(S.paint.get("circle-pitch-alignment")==="map"){var ie=ai(g,1,K.zoom);F=!0,q=[ie,ie]}else F=!1,q=K.pixelsToGLUnits;return{u_camera_to_center_distance:K.cameraToCenterDistance,u_scale_with_map:+(S.paint.get("circle-pitch-scale")==="map"),u_matrix:m.translatePosMatrix(A.posMatrix,g,S.paint.get("circle-translate"),S.paint.get("circle-translate-anchor")),u_pitch_with_map:+F,u_device_pixel_ratio:i.browser.devicePixelRatio,u_extrude_scale:q}},fa=function(m,A,g){var S=ai(g,1,A.zoom),F=Math.pow(2,A.zoom-g.tileID.overscaledZ),q=g.tileID.overscaleFactor();return{u_matrix:m,u_camera_to_center_distance:A.cameraToCenterDistance,u_pixels_to_tile_units:S,u_extrude_scale:[A.pixelsToGLUnits[0]/(S*F),A.pixelsToGLUnits[1]/(S*F)],u_overscale_factor:q}},Yn=function(m,A,g){return{u_matrix:m,u_inv_matrix:A,u_camera_to_center_distance:g.cameraToCenterDistance,u_viewport_size:[g.width,g.height]}},dt=function(m,A,g){return g===void 0&&(g=1),{u_matrix:m,u_color:A,u_overlay:0,u_overlay_scale:g}},vi=function(m){return{u_matrix:m}},Ec=function(m,A,g,S){return{u_matrix:m,u_extrude_scale:ai(A,1,g),u_intensity:S}},Os=function(m,A,g){var S=m.transform;return{u_matrix:Ce(m,A,g),u_ratio:1/ai(A,1,S.zoom),u_device_pixel_ratio:i.browser.devicePixelRatio,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},Zi=function(m,A,g,S){return i.extend(Os(m,A,g),{u_image:0,u_image_height:S})},Wi=function(m,A,g,S){var F=m.transform,q=te(A,F);return{u_matrix:Ce(m,A,g),u_texsize:A.imageAtlasTexture.size,u_ratio:1/ai(A,1,F.zoom),u_device_pixel_ratio:i.browser.devicePixelRatio,u_image:0,u_scale:[q,S.fromScale,S.toScale],u_fade:S.t,u_units_to_pixels:[1/F.pixelsToGLUnits[0],1/F.pixelsToGLUnits[1]]}},Gu=function(m,A,g,S,F){var q=m.lineAtlas,K=te(A,m.transform),ie=g.layout.get("line-cap")==="round",fe=q.getDash(S.from,ie),_e=q.getDash(S.to,ie),Re=fe.width*F.fromScale,Fe=_e.width*F.toScale;return i.extend(Os(m,A,g),{u_patternscale_a:[K/Re,-fe.height/2],u_patternscale_b:[K/Fe,-_e.height/2],u_sdfgamma:q.width/(256*Math.min(Re,Fe)*i.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:fe.y,u_tex_y_b:_e.y,u_mix:F.t})};function te(m,A){return 1/ai(m,1,A.tileZoom)}function Ce(m,A,g){return m.translatePosMatrix(A.tileID.posMatrix,A,g.paint.get("line-translate"),g.paint.get("line-translate-anchor"))}var rt=function(m,A,g,S,F){return{u_matrix:m,u_tl_parent:A,u_scale_parent:g,u_buffer_scale:1,u_fade_t:S.mix,u_opacity:S.opacity*F.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:F.paint.get("raster-brightness-min"),u_brightness_high:F.paint.get("raster-brightness-max"),u_saturation_factor:(K=F.paint.get("raster-saturation"),K>0?1-1/(1.001-K):-K),u_contrast_factor:(q=F.paint.get("raster-contrast"),q>0?1/(1-q):1+q),u_spin_weights:lt(F.paint.get("raster-hue-rotate"))};var q,K};function lt(m){m*=Math.PI/180;var A=Math.sin(m),g=Math.cos(m);return[(2*g+1)/3,(-Math.sqrt(3)*A-g+1)/3,(Math.sqrt(3)*A-g+1)/3]}var Rt,Tt=function(m,A,g,S,F,q,K,ie,fe,_e){var Re=F.transform;return{u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:A?A.uSizeT:0,u_size:A?A.uSize:0,u_camera_to_center_distance:Re.cameraToCenterDistance,u_pitch:Re.pitch/360*2*Math.PI,u_rotate_symbol:+g,u_aspect_ratio:Re.width/Re.height,u_fade_change:F.options.fadeDuration?F.symbolFadeChange:1,u_matrix:q,u_label_plane_matrix:K,u_coord_matrix:ie,u_is_text:+fe,u_pitch_with_map:+S,u_texsize:_e,u_texture:0}},sr=function(m,A,g,S,F,q,K,ie,fe,_e,Re){var Fe=F.transform;return i.extend(Tt(m,A,g,S,F,q,K,ie,fe,_e),{u_gamma_scale:S?Math.cos(Fe._pitch)*Fe.cameraToCenterDistance:1,u_device_pixel_ratio:i.browser.devicePixelRatio,u_is_halo:+Re})},Nr=function(m,A,g,S,F,q,K,ie,fe,_e){return i.extend(sr(m,A,g,S,F,q,K,ie,!0,fe,!0),{u_texsize_icon:_e,u_texture_icon:1})},ti=function(m,A,g){return{u_matrix:m,u_opacity:A,u_color:g}},jn=function(m,A,g,S,F,q){return i.extend(function(K,ie,fe,_e){var Re=fe.imageManager.getPattern(K.from.toString()),Fe=fe.imageManager.getPattern(K.to.toString()),Ne=fe.imageManager.getPixelSize(),Je=Ne.width,Ze=Ne.height,ct=Math.pow(2,_e.tileID.overscaledZ),Xe=_e.tileSize*Math.pow(2,fe.transform.tileZoom)/ct,st=Xe*(_e.tileID.canonical.x+_e.tileID.wrap*ct),yt=Xe*_e.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Re.tl,u_pattern_br_a:Re.br,u_pattern_tl_b:Fe.tl,u_pattern_br_b:Fe.br,u_texsize:[Je,Ze],u_mix:ie.t,u_pattern_size_a:Re.displaySize,u_pattern_size_b:Fe.displaySize,u_scale_a:ie.fromScale,u_scale_b:ie.toScale,u_tile_units_to_pixels:1/ai(_e,1,fe.transform.tileZoom),u_pixel_coord_upper:[st>>16,yt>>16],u_pixel_coord_lower:[65535&st,65535&yt]}}(S,q,g,F),{u_matrix:m,u_opacity:A})},ha={fillExtrusion:function(m,A){return{u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_lightpos:new i.Uniform3f(m,A.u_lightpos),u_lightintensity:new i.Uniform1f(m,A.u_lightintensity),u_lightcolor:new i.Uniform3f(m,A.u_lightcolor),u_vertical_gradient:new i.Uniform1f(m,A.u_vertical_gradient),u_opacity:new i.Uniform1f(m,A.u_opacity)}},fillExtrusionPattern:function(m,A){return{u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_lightpos:new i.Uniform3f(m,A.u_lightpos),u_lightintensity:new i.Uniform1f(m,A.u_lightintensity),u_lightcolor:new i.Uniform3f(m,A.u_lightcolor),u_vertical_gradient:new i.Uniform1f(m,A.u_vertical_gradient),u_height_factor:new i.Uniform1f(m,A.u_height_factor),u_image:new i.Uniform1i(m,A.u_image),u_texsize:new i.Uniform2f(m,A.u_texsize),u_pixel_coord_upper:new i.Uniform2f(m,A.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(m,A.u_pixel_coord_lower),u_scale:new i.Uniform3f(m,A.u_scale),u_fade:new i.Uniform1f(m,A.u_fade),u_opacity:new i.Uniform1f(m,A.u_opacity)}},fill:function(m,A){return{u_matrix:new i.UniformMatrix4f(m,A.u_matrix)}},fillPattern:function(m,A){return{u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_image:new i.Uniform1i(m,A.u_image),u_texsize:new i.Uniform2f(m,A.u_texsize),u_pixel_coord_upper:new i.Uniform2f(m,A.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(m,A.u_pixel_coord_lower),u_scale:new i.Uniform3f(m,A.u_scale),u_fade:new i.Uniform1f(m,A.u_fade)}},fillOutline:function(m,A){return{u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_world:new i.Uniform2f(m,A.u_world)}},fillOutlinePattern:function(m,A){return{u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_world:new i.Uniform2f(m,A.u_world),u_image:new i.Uniform1i(m,A.u_image),u_texsize:new i.Uniform2f(m,A.u_texsize),u_pixel_coord_upper:new i.Uniform2f(m,A.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(m,A.u_pixel_coord_lower),u_scale:new i.Uniform3f(m,A.u_scale),u_fade:new i.Uniform1f(m,A.u_fade)}},circle:function(m,A){return{u_camera_to_center_distance:new i.Uniform1f(m,A.u_camera_to_center_distance),u_scale_with_map:new i.Uniform1i(m,A.u_scale_with_map),u_pitch_with_map:new i.Uniform1i(m,A.u_pitch_with_map),u_extrude_scale:new i.Uniform2f(m,A.u_extrude_scale),u_device_pixel_ratio:new i.Uniform1f(m,A.u_device_pixel_ratio),u_matrix:new i.UniformMatrix4f(m,A.u_matrix)}},collisionBox:function(m,A){return{u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_camera_to_center_distance:new i.Uniform1f(m,A.u_camera_to_center_distance),u_pixels_to_tile_units:new i.Uniform1f(m,A.u_pixels_to_tile_units),u_extrude_scale:new i.Uniform2f(m,A.u_extrude_scale),u_overscale_factor:new i.Uniform1f(m,A.u_overscale_factor)}},collisionCircle:function(m,A){return{u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_inv_matrix:new i.UniformMatrix4f(m,A.u_inv_matrix),u_camera_to_center_distance:new i.Uniform1f(m,A.u_camera_to_center_distance),u_viewport_size:new i.Uniform2f(m,A.u_viewport_size)}},debug:function(m,A){return{u_color:new i.UniformColor(m,A.u_color),u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_overlay:new i.Uniform1i(m,A.u_overlay),u_overlay_scale:new i.Uniform1f(m,A.u_overlay_scale)}},clippingMask:function(m,A){return{u_matrix:new i.UniformMatrix4f(m,A.u_matrix)}},heatmap:function(m,A){return{u_extrude_scale:new i.Uniform1f(m,A.u_extrude_scale),u_intensity:new i.Uniform1f(m,A.u_intensity),u_matrix:new i.UniformMatrix4f(m,A.u_matrix)}},heatmapTexture:function(m,A){return{u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_world:new i.Uniform2f(m,A.u_world),u_image:new i.Uniform1i(m,A.u_image),u_color_ramp:new i.Uniform1i(m,A.u_color_ramp),u_opacity:new i.Uniform1f(m,A.u_opacity)}},hillshade:function(m,A){return{u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_image:new i.Uniform1i(m,A.u_image),u_latrange:new i.Uniform2f(m,A.u_latrange),u_light:new i.Uniform2f(m,A.u_light),u_shadow:new i.UniformColor(m,A.u_shadow),u_highlight:new i.UniformColor(m,A.u_highlight),u_accent:new i.UniformColor(m,A.u_accent)}},hillshadePrepare:function(m,A){return{u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_image:new i.Uniform1i(m,A.u_image),u_dimension:new i.Uniform2f(m,A.u_dimension),u_zoom:new i.Uniform1f(m,A.u_zoom),u_unpack:new i.Uniform4f(m,A.u_unpack)}},line:function(m,A){return{u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_ratio:new i.Uniform1f(m,A.u_ratio),u_device_pixel_ratio:new i.Uniform1f(m,A.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(m,A.u_units_to_pixels)}},lineGradient:function(m,A){return{u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_ratio:new i.Uniform1f(m,A.u_ratio),u_device_pixel_ratio:new i.Uniform1f(m,A.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(m,A.u_units_to_pixels),u_image:new i.Uniform1i(m,A.u_image),u_image_height:new i.Uniform1f(m,A.u_image_height)}},linePattern:function(m,A){return{u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_texsize:new i.Uniform2f(m,A.u_texsize),u_ratio:new i.Uniform1f(m,A.u_ratio),u_device_pixel_ratio:new i.Uniform1f(m,A.u_device_pixel_ratio),u_image:new i.Uniform1i(m,A.u_image),u_units_to_pixels:new i.Uniform2f(m,A.u_units_to_pixels),u_scale:new i.Uniform3f(m,A.u_scale),u_fade:new i.Uniform1f(m,A.u_fade)}},lineSDF:function(m,A){return{u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_ratio:new i.Uniform1f(m,A.u_ratio),u_device_pixel_ratio:new i.Uniform1f(m,A.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(m,A.u_units_to_pixels),u_patternscale_a:new i.Uniform2f(m,A.u_patternscale_a),u_patternscale_b:new i.Uniform2f(m,A.u_patternscale_b),u_sdfgamma:new i.Uniform1f(m,A.u_sdfgamma),u_image:new i.Uniform1i(m,A.u_image),u_tex_y_a:new i.Uniform1f(m,A.u_tex_y_a),u_tex_y_b:new i.Uniform1f(m,A.u_tex_y_b),u_mix:new i.Uniform1f(m,A.u_mix)}},raster:function(m,A){return{u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_tl_parent:new i.Uniform2f(m,A.u_tl_parent),u_scale_parent:new i.Uniform1f(m,A.u_scale_parent),u_buffer_scale:new i.Uniform1f(m,A.u_buffer_scale),u_fade_t:new i.Uniform1f(m,A.u_fade_t),u_opacity:new i.Uniform1f(m,A.u_opacity),u_image0:new i.Uniform1i(m,A.u_image0),u_image1:new i.Uniform1i(m,A.u_image1),u_brightness_low:new i.Uniform1f(m,A.u_brightness_low),u_brightness_high:new i.Uniform1f(m,A.u_brightness_high),u_saturation_factor:new i.Uniform1f(m,A.u_saturation_factor),u_contrast_factor:new i.Uniform1f(m,A.u_contrast_factor),u_spin_weights:new i.Uniform3f(m,A.u_spin_weights)}},symbolIcon:function(m,A){return{u_is_size_zoom_constant:new i.Uniform1i(m,A.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(m,A.u_is_size_feature_constant),u_size_t:new i.Uniform1f(m,A.u_size_t),u_size:new i.Uniform1f(m,A.u_size),u_camera_to_center_distance:new i.Uniform1f(m,A.u_camera_to_center_distance),u_pitch:new i.Uniform1f(m,A.u_pitch),u_rotate_symbol:new i.Uniform1i(m,A.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(m,A.u_aspect_ratio),u_fade_change:new i.Uniform1f(m,A.u_fade_change),u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(m,A.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(m,A.u_coord_matrix),u_is_text:new i.Uniform1i(m,A.u_is_text),u_pitch_with_map:new i.Uniform1i(m,A.u_pitch_with_map),u_texsize:new i.Uniform2f(m,A.u_texsize),u_texture:new i.Uniform1i(m,A.u_texture)}},symbolSDF:function(m,A){return{u_is_size_zoom_constant:new i.Uniform1i(m,A.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(m,A.u_is_size_feature_constant),u_size_t:new i.Uniform1f(m,A.u_size_t),u_size:new i.Uniform1f(m,A.u_size),u_camera_to_center_distance:new i.Uniform1f(m,A.u_camera_to_center_distance),u_pitch:new i.Uniform1f(m,A.u_pitch),u_rotate_symbol:new i.Uniform1i(m,A.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(m,A.u_aspect_ratio),u_fade_change:new i.Uniform1f(m,A.u_fade_change),u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(m,A.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(m,A.u_coord_matrix),u_is_text:new i.Uniform1i(m,A.u_is_text),u_pitch_with_map:new i.Uniform1i(m,A.u_pitch_with_map),u_texsize:new i.Uniform2f(m,A.u_texsize),u_texture:new i.Uniform1i(m,A.u_texture),u_gamma_scale:new i.Uniform1f(m,A.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(m,A.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(m,A.u_is_halo)}},symbolTextAndIcon:function(m,A){return{u_is_size_zoom_constant:new i.Uniform1i(m,A.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(m,A.u_is_size_feature_constant),u_size_t:new i.Uniform1f(m,A.u_size_t),u_size:new i.Uniform1f(m,A.u_size),u_camera_to_center_distance:new i.Uniform1f(m,A.u_camera_to_center_distance),u_pitch:new i.Uniform1f(m,A.u_pitch),u_rotate_symbol:new i.Uniform1i(m,A.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(m,A.u_aspect_ratio),u_fade_change:new i.Uniform1f(m,A.u_fade_change),u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(m,A.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(m,A.u_coord_matrix),u_is_text:new i.Uniform1i(m,A.u_is_text),u_pitch_with_map:new i.Uniform1i(m,A.u_pitch_with_map),u_texsize:new i.Uniform2f(m,A.u_texsize),u_texsize_icon:new i.Uniform2f(m,A.u_texsize_icon),u_texture:new i.Uniform1i(m,A.u_texture),u_texture_icon:new i.Uniform1i(m,A.u_texture_icon),u_gamma_scale:new i.Uniform1f(m,A.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(m,A.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(m,A.u_is_halo)}},background:function(m,A){return{u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_opacity:new i.Uniform1f(m,A.u_opacity),u_color:new i.UniformColor(m,A.u_color)}},backgroundPattern:function(m,A){return{u_matrix:new i.UniformMatrix4f(m,A.u_matrix),u_opacity:new i.Uniform1f(m,A.u_opacity),u_image:new i.Uniform1i(m,A.u_image),u_pattern_tl_a:new i.Uniform2f(m,A.u_pattern_tl_a),u_pattern_br_a:new i.Uniform2f(m,A.u_pattern_br_a),u_pattern_tl_b:new i.Uniform2f(m,A.u_pattern_tl_b),u_pattern_br_b:new i.Uniform2f(m,A.u_pattern_br_b),u_texsize:new i.Uniform2f(m,A.u_texsize),u_mix:new i.Uniform1f(m,A.u_mix),u_pattern_size_a:new i.Uniform2f(m,A.u_pattern_size_a),u_pattern_size_b:new i.Uniform2f(m,A.u_pattern_size_b),u_scale_a:new i.Uniform1f(m,A.u_scale_a),u_scale_b:new i.Uniform1f(m,A.u_scale_b),u_pixel_coord_upper:new i.Uniform2f(m,A.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(m,A.u_pixel_coord_lower),u_tile_units_to_pixels:new i.Uniform1f(m,A.u_tile_units_to_pixels)}}};function Pi(m,A,g,S,F,q,K){for(var ie=m.context,fe=ie.gl,_e=m.useProgram("collisionBox"),Re=[],Fe=0,Ne=0,Je=0;Je<S.length;Je++){var Ze=S[Je],ct=A.getTile(Ze),Xe=ct.getBucket(g);if(Xe){var st=Ze.posMatrix;F[0]===0&&F[1]===0||(st=m.translatePosMatrix(Ze.posMatrix,ct,F,q));var yt=K?Xe.textCollisionBox:Xe.iconCollisionBox,Lt=Xe.collisionCircleArray;if(Lt.length>0){var Jt=i.create(),Ht=st;i.mul(Jt,Xe.placementInvProjMatrix,m.transform.glCoordMatrix),i.mul(Jt,Jt,Xe.placementViewportMatrix),Re.push({circleArray:Lt,circleOffset:Ne,transform:Ht,invTransform:Jt}),Ne=Fe+=Lt.length/4}yt&&_e.draw(ie,fe.LINES,ze.disabled,Ie.disabled,m.colorModeForRenderPass(),At.disabled,fa(st,m.transform,ct),g.id,yt.layoutVertexBuffer,yt.indexBuffer,yt.segments,null,m.transform.zoom,null,null,yt.collisionVertexBuffer)}}if(K&&Re.length){var er=m.useProgram("collisionCircle"),pr=new i.StructArrayLayout2f1f2i16;pr.resize(4*Fe),pr._trim();for(var Sr=0,Tr=0,Xr=Re;Tr<Xr.length;Tr+=1)for(var Tn=Xr[Tr],Ln=0;Ln<Tn.circleArray.length/4;Ln++){var In=4*Ln,zi=Tn.circleArray[In+0],$r=Tn.circleArray[In+1],pn=Tn.circleArray[In+2],li=Tn.circleArray[In+3];pr.emplace(Sr++,zi,$r,pn,li,0),pr.emplace(Sr++,zi,$r,pn,li,1),pr.emplace(Sr++,zi,$r,pn,li,2),pr.emplace(Sr++,zi,$r,pn,li,3)}(!Rt||Rt.length<2*Fe)&&(Rt=function(mo){var Rs=2*mo,ns=new i.StructArrayLayout3ui6;ns.resize(Rs),ns._trim();for(var ro=0;ro<Rs;ro++){var To=6*ro;ns.uint16[To+0]=4*ro+0,ns.uint16[To+1]=4*ro+1,ns.uint16[To+2]=4*ro+2,ns.uint16[To+3]=4*ro+2,ns.uint16[To+4]=4*ro+3,ns.uint16[To+5]=4*ro+0}return ns}(Fe));for(var Kn=ie.createIndexBuffer(Rt,!0),qn=ie.createVertexBuffer(pr,i.collisionCircleLayout.members,!0),ri=0,Gn=Re;ri<Gn.length;ri+=1){var zn=Gn[ri],Do=Yn(zn.transform,zn.invTransform,m.transform);er.draw(ie,fe.TRIANGLES,ze.disabled,Ie.disabled,m.colorModeForRenderPass(),At.disabled,Do,g.id,qn,Kn,i.SegmentVector.simpleSegment(0,2*zn.circleOffset,zn.circleArray.length,zn.circleArray.length/2),null,m.transform.zoom,null,null,null)}qn.destroy(),Kn.destroy()}}var Ws=i.identity(new Float32Array(16));function vl(m,A,g,S,F,q){var K=i.getAnchorAlignment(m),ie=-(K.horizontalAlign-.5)*A,fe=-(K.verticalAlign-.5)*g,_e=i.evaluateVariableOffset(m,S);return new i.Point((ie/F+_e[0])*q,(fe/F+_e[1])*q)}function Fp(m,A,g,S,F,q,K,ie,fe,_e,Re){var Fe=m.text.placedSymbolArray,Ne=m.text.dynamicLayoutVertexArray,Je=m.icon.dynamicLayoutVertexArray,Ze={};Ne.clear();for(var ct=0;ct<Fe.length;ct++){var Xe=Fe.get(ct),st=Xe.hidden||!Xe.crossTileID||m.allowVerticalPlacement&&!Xe.placedOrientation?null:S[Xe.crossTileID];if(st){var yt=new i.Point(Xe.anchorX,Xe.anchorY),Lt=Zn(yt,g?ie:K),Jt=$n(q.cameraToCenterDistance,Lt.signedDistanceFromCamera),Ht=F.evaluateSizeForFeature(m.textSizeData,_e,Xe)*Jt/i.ONE_EM;g&&(Ht*=m.tilePixelRatio/fe);for(var er=vl(st.anchor,st.width,st.height,st.textOffset,st.textBoxScale,Ht),pr=g?Zn(yt.add(er),K).point:Lt.point.add(A?er.rotate(-q.angle):er),Sr=m.allowVerticalPlacement&&Xe.placedOrientation===i.WritingMode.vertical?Math.PI/2:0,Tr=0;Tr<Xe.numGlyphs;Tr++)i.addDynamicAttributes(Ne,pr,Sr);Re&&Xe.associatedIconIndex>=0&&(Ze[Xe.associatedIconIndex]={shiftedAnchor:pr,angle:Sr})}else ho(Xe.numGlyphs,Ne)}if(Re){Je.clear();for(var Xr=m.icon.placedSymbolArray,Tn=0;Tn<Xr.length;Tn++){var Ln=Xr.get(Tn);if(Ln.hidden)ho(Ln.numGlyphs,Je);else{var In=Ze[Tn];if(In)for(var zi=0;zi<Ln.numGlyphs;zi++)i.addDynamicAttributes(Je,In.shiftedAnchor,In.angle);else ho(Ln.numGlyphs,Je)}}m.icon.dynamicLayoutVertexBuffer.updateData(Je)}m.text.dynamicLayoutVertexBuffer.updateData(Ne)}function Nf(m,A,g){return g.iconsInText&&A?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function vs(m,A,g,S,F,q,K,ie,fe,_e,Re,Fe){for(var Ne=m.context,Je=Ne.gl,Ze=m.transform,ct=ie==="map",Xe=fe==="map",st=ct&&g.layout.get("symbol-placement")!=="point",yt=ct&&!Xe&&!st,Lt=g.layout.get("symbol-sort-key").constantOr(1)!==void 0,Jt=!1,Ht=m.depthModeForSublayer(0,ze.ReadOnly),er=g.layout.get("text-variable-anchor"),pr=[],Sr=0,Tr=S;Sr<Tr.length;Sr+=1){var Xr=Tr[Sr],Tn=A.getTile(Xr),Ln=Tn.getBucket(g);if(Ln){var In=F?Ln.text:Ln.icon;if(In&&In.segments.get().length){var zi=In.programConfigurations.get(g.id),$r=F||Ln.sdfIcons,pn=F?Ln.textSizeData:Ln.iconSizeData,li=Xe||Ze.pitch!==0,Kn=m.useProgram(Nf($r,F,Ln),zi),qn=i.evaluateSizeForZoom(pn,Ze.zoom),ri=void 0,Gn=[0,0],zn=void 0,Do=void 0,mo=null,Rs=void 0;if(F)zn=Tn.glyphAtlasTexture,Do=Je.LINEAR,ri=Tn.glyphAtlasTexture.size,Ln.iconsInText&&(Gn=Tn.imageAtlasTexture.size,mo=Tn.imageAtlasTexture,Rs=li||m.options.rotating||m.options.zooming||pn.kind==="composite"||pn.kind==="camera"?Je.LINEAR:Je.NEAREST);else{var ns=g.layout.get("icon-size").constantOr(0)!==1||Ln.iconsNeedLinear;zn=Tn.imageAtlasTexture,Do=$r||m.options.rotating||m.options.zooming||ns||li?Je.LINEAR:Je.NEAREST,ri=Tn.imageAtlasTexture.size}var ro=ai(Tn,1,m.transform.zoom),To=Ki(Xr.posMatrix,Xe,ct,m.transform,ro),Ls=gi(Xr.posMatrix,Xe,ct,m.transform,ro),no=er&&Ln.hasTextData(),ci=g.layout.get("icon-text-fit")!=="none"&&no&&Ln.hasIconData();st&&Es(Ln,Xr.posMatrix,m,F,To,Ls,Xe,_e);var io=m.translatePosMatrix(Xr.posMatrix,Tn,q,K),bl=st||F&&er||ci?Ws:To,Ys=m.translatePosMatrix(Ls,Tn,q,K,!0),Uf=$r&&g.paint.get(F?"text-halo-width":"icon-halo-width").constantOr(1)!==0,jf={program:Kn,buffers:In,uniformValues:$r?Ln.iconsInText?Nr(pn.kind,qn,yt,Xe,m,io,bl,Ys,ri,Gn):sr(pn.kind,qn,yt,Xe,m,io,bl,Ys,F,ri,!0):Tt(pn.kind,qn,yt,Xe,m,io,bl,Ys,F,ri),atlasTexture:zn,atlasTextureIcon:mo,atlasInterpolation:Do,atlasInterpolationIcon:Rs,isSDF:$r,hasHalo:Uf};if(Lt&&Ln.canOverlap){Jt=!0;for(var ou=0,Mr=In.segments.get();ou<Mr.length;ou+=1){var on=Mr[ou];pr.push({segments:new i.SegmentVector([on]),sortKey:on.sortKey,state:jf})}}else pr.push({segments:In.segments,sortKey:0,state:jf})}}}Jt&&pr.sort(function(su,y){return su.sortKey-y.sortKey});for(var xl=0,Ic=pr;xl<Ic.length;xl+=1){var Xu=Ic[xl],xa=Xu.state;if(Ne.activeTexture.set(Je.TEXTURE0),xa.atlasTexture.bind(xa.atlasInterpolation,Je.CLAMP_TO_EDGE),xa.atlasTextureIcon&&(Ne.activeTexture.set(Je.TEXTURE1),xa.atlasTextureIcon&&xa.atlasTextureIcon.bind(xa.atlasInterpolationIcon,Je.CLAMP_TO_EDGE)),xa.isSDF){var zl=xa.uniformValues;xa.hasHalo&&(zl.u_is_halo=1,nu(xa.buffers,Xu.segments,g,m,xa.program,Ht,Re,Fe,zl)),zl.u_is_halo=0}nu(xa.buffers,Xu.segments,g,m,xa.program,Ht,Re,Fe,xa.uniformValues)}}function nu(m,A,g,S,F,q,K,ie,fe){var _e=S.context;F.draw(_e,_e.gl.TRIANGLES,q,K,ie,At.disabled,fe,g.id,m.layoutVertexBuffer,m.indexBuffer,A,g.paint,S.transform.zoom,m.programConfigurations.get(g.id),m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer)}function nf(m,A,g,S,F,q,K){var ie,fe,_e,Re,Fe,Ne=m.context.gl,Je=g.paint.get("fill-pattern"),Ze=Je&&Je.constantOr(1),ct=g.getCrossfadeParameters();K?(fe=Ze&&!g.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ie=Ne.LINES):(fe=Ze?"fillPattern":"fill",ie=Ne.TRIANGLES);for(var Xe=0,st=S;Xe<st.length;Xe+=1){var yt=st[Xe],Lt=A.getTile(yt);if(!Ze||Lt.patternsLoaded()){var Jt=Lt.getBucket(g);if(Jt){var Ht=Jt.programConfigurations.get(g.id),er=m.useProgram(fe,Ht);Ze&&(m.context.activeTexture.set(Ne.TEXTURE0),Lt.imageAtlasTexture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),Ht.updatePaintBuffers(ct));var pr=Je.constantOr(null);if(pr&&Lt.imageAtlas){var Sr=Lt.imageAtlas,Tr=Sr.patternPositions[pr.to.toString()],Xr=Sr.patternPositions[pr.from.toString()];Tr&&Xr&&Ht.setConstantPatternPositions(Tr,Xr)}var Tn=m.translatePosMatrix(yt.posMatrix,Lt,g.paint.get("fill-translate"),g.paint.get("fill-translate-anchor"));if(K){Re=Jt.indexBuffer2,Fe=Jt.segments2;var Ln=[Ne.drawingBufferWidth,Ne.drawingBufferHeight];_e=fe==="fillOutlinePattern"&&Ze?qo(Tn,m,ct,Lt,Ln):wo(Tn,Ln)}else Re=Jt.indexBuffer,Fe=Jt.segments,_e=Ze?to(Tn,m,ct,Lt):Jo(Tn);er.draw(m.context,ie,F,m.stencilModeForClipping(yt),q,At.disabled,_e,g.id,Jt.layoutVertexBuffer,Re,Fe,g.paint,m.transform.zoom,Ht)}}}}function Ma(m,A,g,S,F,q,K){for(var ie=m.context,fe=ie.gl,_e=g.paint.get("fill-extrusion-pattern"),Re=_e.constantOr(1),Fe=g.getCrossfadeParameters(),Ne=g.paint.get("fill-extrusion-opacity"),Je=0,Ze=S;Je<Ze.length;Je+=1){var ct=Ze[Je],Xe=A.getTile(ct),st=Xe.getBucket(g);if(st){var yt=st.programConfigurations.get(g.id),Lt=m.useProgram(Re?"fillExtrusionPattern":"fillExtrusion",yt);Re&&(m.context.activeTexture.set(fe.TEXTURE0),Xe.imageAtlasTexture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),yt.updatePaintBuffers(Fe));var Jt=_e.constantOr(null);if(Jt&&Xe.imageAtlas){var Ht=Xe.imageAtlas,er=Ht.patternPositions[Jt.to.toString()],pr=Ht.patternPositions[Jt.from.toString()];er&&pr&&yt.setConstantPatternPositions(er,pr)}var Sr=m.translatePosMatrix(ct.posMatrix,Xe,g.paint.get("fill-extrusion-translate"),g.paint.get("fill-extrusion-translate-anchor")),Tr=g.paint.get("fill-extrusion-vertical-gradient"),Xr=Re?ua(Sr,m,Tr,Ne,ct,Fe,Xe):Vi(Sr,m,Tr,Ne);Lt.draw(ie,ie.gl.TRIANGLES,F,q,K,At.backCCW,Xr,g.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,g.paint,m.transform.zoom,yt)}}}function ic(m,A,g,S,F,q){var K=m.context,ie=K.gl,fe=A.fbo;if(fe){var _e=m.useProgram("hillshade");K.activeTexture.set(ie.TEXTURE0),ie.bindTexture(ie.TEXTURE_2D,fe.colorAttachment.get());var Re=function(Fe,Ne,Je){var Ze=Je.paint.get("hillshade-shadow-color"),ct=Je.paint.get("hillshade-highlight-color"),Xe=Je.paint.get("hillshade-accent-color"),st=Je.paint.get("hillshade-illumination-direction")*(Math.PI/180);Je.paint.get("hillshade-illumination-anchor")==="viewport"&&(st-=Fe.transform.angle);var yt,Lt,Jt,Ht=!Fe.options.moving;return{u_matrix:Fe.transform.calculatePosMatrix(Ne.tileID.toUnwrapped(),Ht),u_image:0,u_latrange:(yt=Ne.tileID,Lt=Math.pow(2,yt.canonical.z),Jt=yt.canonical.y,[new i.MercatorCoordinate(0,Jt/Lt).toLngLat().lat,new i.MercatorCoordinate(0,(Jt+1)/Lt).toLngLat().lat]),u_light:[Je.paint.get("hillshade-exaggeration"),st],u_shadow:Ze,u_highlight:ct,u_accent:Xe}}(m,A,g);_e.draw(K,ie.TRIANGLES,S,F,q,At.disabled,Re,g.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}}function Np(m,A,g,S,F,q){var K=m.context,ie=K.gl,fe=A.dem;if(fe&&fe.data){var _e=fe.dim,Re=fe.stride,Fe=fe.getPixels();if(K.activeTexture.set(ie.TEXTURE1),K.pixelStoreUnpackPremultiplyAlpha.set(!1),A.demTexture=A.demTexture||m.getTileTexture(Re),A.demTexture){var Ne=A.demTexture;Ne.update(Fe,{premultiply:!1}),Ne.bind(ie.NEAREST,ie.CLAMP_TO_EDGE)}else A.demTexture=new i.Texture(K,Fe,ie.RGBA,{premultiply:!1}),A.demTexture.bind(ie.NEAREST,ie.CLAMP_TO_EDGE);K.activeTexture.set(ie.TEXTURE0);var Je=A.fbo;if(!Je){var Ze=new i.Texture(K,{width:_e,height:_e,data:null},ie.RGBA);Ze.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),(Je=A.fbo=K.createFramebuffer(_e,_e,!0)).colorAttachment.set(Ze.texture)}K.bindFramebuffer.set(Je.framebuffer),K.viewport.set([0,0,_e,_e]),m.useProgram("hillshadePrepare").draw(K,ie.TRIANGLES,S,F,q,At.disabled,function(ct,Xe){var st=Xe.stride,yt=i.create();return i.ortho(yt,0,i.EXTENT,-i.EXTENT,0,0,1),i.translate(yt,yt,[0,-i.EXTENT,0]),{u_matrix:yt,u_image:1,u_dimension:[st,st],u_zoom:ct.overscaledZ,u_unpack:Xe.getUnpackVector()}}(A.tileID,fe),g.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments),A.needsHillshadePrepare=!1}}function pa(m,A,g,S,F){var q=S.paint.get("raster-fade-duration");if(q>0){var K=i.browser.now(),ie=(K-m.timeAdded)/q,fe=A?(K-A.timeAdded)/q:-1,_e=g.getSource(),Re=F.coveringZoomLevel({tileSize:_e.tileSize,roundZoom:_e.roundZoom}),Fe=!A||Math.abs(A.tileID.overscaledZ-Re)>Math.abs(m.tileID.overscaledZ-Re),Ne=Fe&&m.refreshedUponExpiration?1:i.clamp(Fe?ie:1-fe,0,1);return m.refreshedUponExpiration&&ie>=1&&(m.refreshedUponExpiration=!1),A?{opacity:1,mix:1-Ne}:{opacity:Ne,mix:0}}return{opacity:1,mix:0}}var Cc=new i.Color(1,0,0,1),bu=new i.Color(0,1,0,1),iu=new i.Color(0,0,1,1),kl=new i.Color(1,0,1,1),Pc=new i.Color(0,1,1,1);function Lh(m,A,g,S){ac(m,0,A+g/2,m.transform.width,g,S)}function kh(m,A,g,S){ac(m,A-g/2,0,g,m.transform.height,S)}function ac(m,A,g,S,F,q){var K=m.context,ie=K.gl;ie.enable(ie.SCISSOR_TEST),ie.scissor(A*i.browser.devicePixelRatio,g*i.browser.devicePixelRatio,S*i.browser.devicePixelRatio,F*i.browser.devicePixelRatio),K.clear({color:q}),ie.disable(ie.SCISSOR_TEST)}function gl(m,A,g){var S=m.context,F=S.gl,q=g.posMatrix,K=m.useProgram("debug"),ie=ze.disabled,fe=Ie.disabled,_e=m.colorModeForRenderPass();S.activeTexture.set(F.TEXTURE0),m.emptyTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),K.draw(S,F.LINE_STRIP,ie,fe,_e,At.disabled,dt(q,i.Color.red),"$debug",m.debugBuffer,m.tileBorderIndexBuffer,m.debugSegments);var Re=A.getTileByID(g.key).latestRawTileData,Fe=Math.floor((Re&&Re.byteLength||0)/1024),Ne=A.getTile(g).tileSize,Je=512/Math.min(Ne,512)*(g.overscaledZ/m.transform.zoom)*.5,Ze=g.canonical.toString();g.overscaledZ!==g.canonical.z&&(Ze+=" => "+g.overscaledZ),function(ct,Xe){ct.initDebugOverlayCanvas();var st=ct.debugOverlayCanvas,yt=ct.context.gl,Lt=ct.debugOverlayCanvas.getContext("2d");Lt.clearRect(0,0,st.width,st.height),Lt.shadowColor="white",Lt.shadowBlur=2,Lt.lineWidth=1.5,Lt.strokeStyle="white",Lt.textBaseline="top",Lt.font="bold 36px Open Sans, sans-serif",Lt.fillText(Xe,5,5),Lt.strokeText(Xe,5,5),ct.debugOverlayTexture.update(st),ct.debugOverlayTexture.bind(yt.LINEAR,yt.CLAMP_TO_EDGE)}(m,Ze+" "+Fe+"kb"),K.draw(S,F.TRIANGLES,ie,fe,pt.alphaBlended,At.disabled,dt(q,i.Color.transparent,Je),"$debug",m.debugBuffer,m.quadTriangleIndexBuffer,m.debugSegments)}var Vu={symbol:function(m,A,g,S,F){if(m.renderPass==="translucent"){var q=Ie.disabled,K=m.colorModeForRenderPass();g.layout.get("text-variable-anchor")&&function(ie,fe,_e,Re,Fe,Ne,Je){for(var Ze=fe.transform,ct=Fe==="map",Xe=Ne==="map",st=0,yt=ie;st<yt.length;st+=1){var Lt=yt[st],Jt=Re.getTile(Lt),Ht=Jt.getBucket(_e);if(Ht&&Ht.text&&Ht.text.segments.get().length){var er=i.evaluateSizeForZoom(Ht.textSizeData,Ze.zoom),pr=ai(Jt,1,fe.transform.zoom),Sr=Ki(Lt.posMatrix,Xe,ct,fe.transform,pr),Tr=_e.layout.get("icon-text-fit")!=="none"&&Ht.hasIconData();if(er){var Xr=Math.pow(2,Ze.zoom-Jt.tileID.overscaledZ);Fp(Ht,ct,Xe,Je,i.symbolSize,Ze,Sr,Lt.posMatrix,Xr,er,Tr)}}}}(S,m,g,A,g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),F),g.paint.get("icon-opacity").constantOr(1)!==0&&vs(m,A,g,S,!1,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),g.layout.get("icon-rotation-alignment"),g.layout.get("icon-pitch-alignment"),g.layout.get("icon-keep-upright"),q,K),g.paint.get("text-opacity").constantOr(1)!==0&&vs(m,A,g,S,!0,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),g.layout.get("text-keep-upright"),q,K),A.map.showCollisionBoxes&&(Pi(m,A,g,S,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),!0),Pi(m,A,g,S,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),!1))}},circle:function(m,A,g,S){if(m.renderPass==="translucent"){var F=g.paint.get("circle-opacity"),q=g.paint.get("circle-stroke-width"),K=g.paint.get("circle-stroke-opacity"),ie=g.layout.get("circle-sort-key").constantOr(1)!==void 0;if(F.constantOr(1)!==0||q.constantOr(1)!==0&&K.constantOr(1)!==0){for(var fe=m.context,_e=fe.gl,Re=m.depthModeForSublayer(0,ze.ReadOnly),Fe=Ie.disabled,Ne=m.colorModeForRenderPass(),Je=[],Ze=0;Ze<S.length;Ze++){var ct=S[Ze],Xe=A.getTile(ct),st=Xe.getBucket(g);if(st){var yt=st.programConfigurations.get(g.id),Lt={programConfiguration:yt,program:m.useProgram("circle",yt),layoutVertexBuffer:st.layoutVertexBuffer,indexBuffer:st.indexBuffer,uniformValues:ju(m,ct,Xe,g)};if(ie)for(var Jt=0,Ht=st.segments.get();Jt<Ht.length;Jt+=1){var er=Ht[Jt];Je.push({segments:new i.SegmentVector([er]),sortKey:er.sortKey,state:Lt})}else Je.push({segments:st.segments,sortKey:0,state:Lt})}}ie&&Je.sort(function(Tn,Ln){return Tn.sortKey-Ln.sortKey});for(var pr=0,Sr=Je;pr<Sr.length;pr+=1){var Tr=Sr[pr],Xr=Tr.state;Xr.program.draw(fe,_e.TRIANGLES,Re,Fe,Ne,At.disabled,Xr.uniformValues,g.id,Xr.layoutVertexBuffer,Xr.indexBuffer,Tr.segments,g.paint,m.transform.zoom,Xr.programConfiguration)}}}},heatmap:function(m,A,g,S){if(g.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){var F=m.context,q=F.gl,K=Ie.disabled,ie=new pt([q.ONE,q.ONE],i.Color.transparent,[!0,!0,!0,!0]);(function(Je,Ze,ct){var Xe=Je.gl;Je.activeTexture.set(Xe.TEXTURE1),Je.viewport.set([0,0,Ze.width/4,Ze.height/4]);var st=ct.heatmapFbo;if(st)Xe.bindTexture(Xe.TEXTURE_2D,st.colorAttachment.get()),Je.bindFramebuffer.set(st.framebuffer);else{var yt=Xe.createTexture();Xe.bindTexture(Xe.TEXTURE_2D,yt),Xe.texParameteri(Xe.TEXTURE_2D,Xe.TEXTURE_WRAP_S,Xe.CLAMP_TO_EDGE),Xe.texParameteri(Xe.TEXTURE_2D,Xe.TEXTURE_WRAP_T,Xe.CLAMP_TO_EDGE),Xe.texParameteri(Xe.TEXTURE_2D,Xe.TEXTURE_MIN_FILTER,Xe.LINEAR),Xe.texParameteri(Xe.TEXTURE_2D,Xe.TEXTURE_MAG_FILTER,Xe.LINEAR),st=ct.heatmapFbo=Je.createFramebuffer(Ze.width/4,Ze.height/4,!1),function(Lt,Jt,Ht,er){var pr=Lt.gl;pr.texImage2D(pr.TEXTURE_2D,0,pr.RGBA,Jt.width/4,Jt.height/4,0,pr.RGBA,Lt.extRenderToTextureHalfFloat?Lt.extTextureHalfFloat.HALF_FLOAT_OES:pr.UNSIGNED_BYTE,null),er.colorAttachment.set(Ht)}(Je,Ze,yt,st)}})(F,m,g),F.clear({color:i.Color.transparent});for(var fe=0;fe<S.length;fe++){var _e=S[fe];if(!A.hasRenderableParent(_e)){var Re=A.getTile(_e),Fe=Re.getBucket(g);if(Fe){var Ne=Fe.programConfigurations.get(g.id);m.useProgram("heatmap",Ne).draw(F,q.TRIANGLES,ze.disabled,K,ie,At.disabled,Ec(_e.posMatrix,Re,m.transform.zoom,g.paint.get("heatmap-intensity")),g.id,Fe.layoutVertexBuffer,Fe.indexBuffer,Fe.segments,g.paint,m.transform.zoom,Ne)}}}F.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(Je,Ze){var ct=Je.context,Xe=ct.gl,st=Ze.heatmapFbo;if(st){ct.activeTexture.set(Xe.TEXTURE0),Xe.bindTexture(Xe.TEXTURE_2D,st.colorAttachment.get()),ct.activeTexture.set(Xe.TEXTURE1);var yt=Ze.colorRampTexture;yt||(yt=Ze.colorRampTexture=new i.Texture(ct,Ze.colorRamp,Xe.RGBA)),yt.bind(Xe.LINEAR,Xe.CLAMP_TO_EDGE),Je.useProgram("heatmapTexture").draw(ct,Xe.TRIANGLES,ze.disabled,Ie.disabled,Je.colorModeForRenderPass(),At.disabled,function(Lt,Jt,Ht,er){var pr=i.create();i.ortho(pr,0,Lt.width,Lt.height,0,0,1);var Sr=Lt.context.gl;return{u_matrix:pr,u_world:[Sr.drawingBufferWidth,Sr.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Jt.paint.get("heatmap-opacity")}}(Je,Ze),Ze.id,Je.viewportBuffer,Je.quadTriangleIndexBuffer,Je.viewportSegments,Ze.paint,Je.transform.zoom)}}(m,g))},line:function(m,A,g,S){if(m.renderPass==="translucent"){var F=g.paint.get("line-opacity"),q=g.paint.get("line-width");if(F.constantOr(1)!==0&&q.constantOr(1)!==0)for(var K=m.depthModeForSublayer(0,ze.ReadOnly),ie=m.colorModeForRenderPass(),fe=g.paint.get("line-dasharray"),_e=g.paint.get("line-pattern"),Re=_e.constantOr(1),Fe=g.paint.get("line-gradient"),Ne=g.getCrossfadeParameters(),Je=Re?"linePattern":fe?"lineSDF":Fe?"lineGradient":"line",Ze=m.context,ct=Ze.gl,Xe=!0,st=0,yt=S;st<yt.length;st+=1){var Lt=yt[st],Jt=A.getTile(Lt);if(!Re||Jt.patternsLoaded()){var Ht=Jt.getBucket(g);if(Ht){var er=Ht.programConfigurations.get(g.id),pr=m.context.program.get(),Sr=m.useProgram(Je,er),Tr=Xe||Sr.program!==pr,Xr=_e.constantOr(null);if(Xr&&Jt.imageAtlas){var Tn=Jt.imageAtlas,Ln=Tn.patternPositions[Xr.to.toString()],In=Tn.patternPositions[Xr.from.toString()];Ln&&In&&er.setConstantPatternPositions(Ln,In)}var zi=Re?Wi(m,Jt,g,Ne):fe?Gu(m,Jt,g,fe,Ne):Fe?Zi(m,Jt,g,Ht.lineClipsArray.length):Os(m,Jt,g);if(Re)Ze.activeTexture.set(ct.TEXTURE0),Jt.imageAtlasTexture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE),er.updatePaintBuffers(Ne);else if(fe&&(Tr||m.lineAtlas.dirty))Ze.activeTexture.set(ct.TEXTURE0),m.lineAtlas.bind(Ze);else if(Fe){var $r=Ht.gradients[g.id],pn=$r.texture;if(g.gradientVersion!==$r.version){var li=256;if(g.stepInterpolant){var Kn=A.getSource().maxzoom,qn=Lt.canonical.z===Kn?Math.ceil(1<<m.transform.maxZoom-Lt.canonical.z):1;li=i.clamp(i.nextPowerOfTwo(Ht.maxLineLength/i.EXTENT*1024*qn),256,Ze.maxTextureSize)}$r.gradient=i.renderColorRamp({expression:g.gradientExpression(),evaluationKey:"lineProgress",resolution:li,image:$r.gradient||void 0,clips:Ht.lineClipsArray}),$r.texture?$r.texture.update($r.gradient):$r.texture=new i.Texture(Ze,$r.gradient,ct.RGBA),$r.version=g.gradientVersion,pn=$r.texture}Ze.activeTexture.set(ct.TEXTURE0),pn.bind(g.stepInterpolant?ct.NEAREST:ct.LINEAR,ct.CLAMP_TO_EDGE)}Sr.draw(Ze,ct.TRIANGLES,K,m.stencilModeForClipping(Lt),ie,At.disabled,zi,g.id,Ht.layoutVertexBuffer,Ht.indexBuffer,Ht.segments,g.paint,m.transform.zoom,er,Ht.layoutVertexBuffer2),Xe=!1}}}}},fill:function(m,A,g,S){var F=g.paint.get("fill-color"),q=g.paint.get("fill-opacity");if(q.constantOr(1)!==0){var K=m.colorModeForRenderPass(),ie=g.paint.get("fill-pattern"),fe=m.opaquePassEnabledForLayer()&&!ie.constantOr(1)&&F.constantOr(i.Color.transparent).a===1&&q.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===fe){var _e=m.depthModeForSublayer(1,m.renderPass==="opaque"?ze.ReadWrite:ze.ReadOnly);nf(m,A,g,S,_e,K,!1)}if(m.renderPass==="translucent"&&g.paint.get("fill-antialias")){var Re=m.depthModeForSublayer(g.getPaintProperty("fill-outline-color")?2:0,ze.ReadOnly);nf(m,A,g,S,Re,K,!0)}}},"fill-extrusion":function(m,A,g,S){var F=g.paint.get("fill-extrusion-opacity");if(F!==0&&m.renderPass==="translucent"){var q=new ze(m.context.gl.LEQUAL,ze.ReadWrite,m.depthRangeFor3D);if(F!==1||g.paint.get("fill-extrusion-pattern").constantOr(1))Ma(m,A,g,S,q,Ie.disabled,pt.disabled),Ma(m,A,g,S,q,m.stencilModeFor3D(),m.colorModeForRenderPass());else{var K=m.colorModeForRenderPass();Ma(m,A,g,S,q,Ie.disabled,K)}}},hillshade:function(m,A,g,S){if(m.renderPass==="offscreen"||m.renderPass==="translucent"){for(var F=m.context,q=m.depthModeForSublayer(0,ze.ReadOnly),K=m.colorModeForRenderPass(),ie=m.renderPass==="translucent"?m.stencilConfigForOverlap(S):[{},S],fe=ie[0],_e=0,Re=ie[1];_e<Re.length;_e+=1){var Fe=Re[_e],Ne=A.getTile(Fe);Ne.needsHillshadePrepare&&m.renderPass==="offscreen"?Np(m,Ne,g,q,Ie.disabled,K):m.renderPass==="translucent"&&ic(m,Ne,g,q,fe[Fe.overscaledZ],K)}F.viewport.set([0,0,m.width,m.height])}},raster:function(m,A,g,S){if(m.renderPass==="translucent"&&g.paint.get("raster-opacity")!==0&&S.length)for(var F=m.context,q=F.gl,K=A.getSource(),ie=m.useProgram("raster"),fe=m.colorModeForRenderPass(),_e=K instanceof Pt?[{},S]:m.stencilConfigForOverlap(S),Re=_e[0],Fe=_e[1],Ne=Fe[Fe.length-1].overscaledZ,Je=!m.options.moving,Ze=0,ct=Fe;Ze<ct.length;Ze+=1){var Xe=ct[Ze],st=m.depthModeForSublayer(Xe.overscaledZ-Ne,g.paint.get("raster-opacity")===1?ze.ReadWrite:ze.ReadOnly,q.LESS),yt=A.getTile(Xe),Lt=m.transform.calculatePosMatrix(Xe.toUnwrapped(),Je);yt.registerFadeDuration(g.paint.get("raster-fade-duration"));var Jt=A.findLoadedParent(Xe,0),Ht=pa(yt,Jt,A,g,m.transform),er=void 0,pr=void 0,Sr=g.paint.get("raster-resampling")==="nearest"?q.NEAREST:q.LINEAR;F.activeTexture.set(q.TEXTURE0),yt.texture.bind(Sr,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),F.activeTexture.set(q.TEXTURE1),Jt?(Jt.texture.bind(Sr,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),er=Math.pow(2,Jt.tileID.overscaledZ-yt.tileID.overscaledZ),pr=[yt.tileID.canonical.x*er%1,yt.tileID.canonical.y*er%1]):yt.texture.bind(Sr,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST);var Tr=rt(Lt,pr||[0,0],er||1,Ht,g);K instanceof Pt?ie.draw(F,q.TRIANGLES,st,Ie.disabled,fe,At.disabled,Tr,g.id,K.boundsBuffer,m.quadTriangleIndexBuffer,K.boundsSegments):ie.draw(F,q.TRIANGLES,st,Re[Xe.overscaledZ],fe,At.disabled,Tr,g.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}},background:function(m,A,g){var S=g.paint.get("background-color"),F=g.paint.get("background-opacity");if(F!==0){var q=m.context,K=q.gl,ie=m.transform,fe=ie.tileSize,_e=g.paint.get("background-pattern");if(!m.isPatternMissing(_e)){var Re=!_e&&S.a===1&&F===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass===Re){var Fe=Ie.disabled,Ne=m.depthModeForSublayer(0,Re==="opaque"?ze.ReadWrite:ze.ReadOnly),Je=m.colorModeForRenderPass(),Ze=m.useProgram(_e?"backgroundPattern":"background"),ct=ie.coveringTiles({tileSize:fe});_e&&(q.activeTexture.set(K.TEXTURE0),m.imageManager.bind(m.context));for(var Xe=g.getCrossfadeParameters(),st=0,yt=ct;st<yt.length;st+=1){var Lt=yt[st],Jt=m.transform.calculatePosMatrix(Lt.toUnwrapped()),Ht=_e?jn(Jt,F,m,_e,{tileID:Lt,tileSize:fe},Xe):ti(Jt,F,S);Ze.draw(q,K.TRIANGLES,Ne,Fe,Je,At.disabled,Ht,g.id,m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}}}}},debug:function(m,A,g){for(var S=0;S<g.length;S++)gl(m,A,g[S])},custom:function(m,A,g){var S=m.context,F=g.implementation;if(m.renderPass==="offscreen"){var q=F.prerender;q&&(m.setCustomLayerDefaults(),S.setColorMode(m.colorModeForRenderPass()),q.call(F,S.gl,m.transform.customLayerMatrix()),S.setDirty(),m.setBaseState())}else if(m.renderPass==="translucent"){m.setCustomLayerDefaults(),S.setColorMode(m.colorModeForRenderPass()),S.setStencilMode(Ie.disabled);var K=F.renderingMode==="3d"?new ze(m.context.gl.LEQUAL,ze.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,ze.ReadOnly);S.setDepthMode(K),F.render(S.gl,m.transform.customLayerMatrix()),S.setDirty(),m.setBaseState(),S.bindFramebuffer.set(null)}}},ba=function(m,A){this.context=new De(m),this.transform=A,this._tileTextures={},this.setup(),this.numSublayers=Qe.maxUnderzooming+Qe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Fu,this.gpuTimers={}};ba.prototype.resize=function(m,A){if(this.width=m*i.browser.devicePixelRatio,this.height=A*i.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var g=0,S=this.style._order;g<S.length;g+=1)this.style._layers[S[g]].resize()},ba.prototype.setup=function(){var m=this.context,A=new i.StructArrayLayout2i4;A.emplaceBack(0,0),A.emplaceBack(i.EXTENT,0),A.emplaceBack(0,i.EXTENT),A.emplaceBack(i.EXTENT,i.EXTENT),this.tileExtentBuffer=m.createVertexBuffer(A,$i.members),this.tileExtentSegments=i.SegmentVector.simpleSegment(0,0,4,2);var g=new i.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(i.EXTENT,0),g.emplaceBack(0,i.EXTENT),g.emplaceBack(i.EXTENT,i.EXTENT),this.debugBuffer=m.createVertexBuffer(g,$i.members),this.debugSegments=i.SegmentVector.simpleSegment(0,0,4,5);var S=new i.StructArrayLayout4i8;S.emplaceBack(0,0,0,0),S.emplaceBack(i.EXTENT,0,i.EXTENT,0),S.emplaceBack(0,i.EXTENT,0,i.EXTENT),S.emplaceBack(i.EXTENT,i.EXTENT,i.EXTENT,i.EXTENT),this.rasterBoundsBuffer=m.createVertexBuffer(S,gt.members),this.rasterBoundsSegments=i.SegmentVector.simpleSegment(0,0,4,2);var F=new i.StructArrayLayout2i4;F.emplaceBack(0,0),F.emplaceBack(1,0),F.emplaceBack(0,1),F.emplaceBack(1,1),this.viewportBuffer=m.createVertexBuffer(F,$i.members),this.viewportSegments=i.SegmentVector.simpleSegment(0,0,4,2);var q=new i.StructArrayLayout1ui2;q.emplaceBack(0),q.emplaceBack(1),q.emplaceBack(3),q.emplaceBack(2),q.emplaceBack(0),this.tileBorderIndexBuffer=m.createIndexBuffer(q);var K=new i.StructArrayLayout3ui6;K.emplaceBack(0,1,2),K.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=m.createIndexBuffer(K),this.emptyTexture=new i.Texture(m,{width:1,height:1,data:new Uint8Array([0,0,0,0])},m.gl.RGBA);var ie=this.context.gl;this.stencilClearMode=new Ie({func:ie.ALWAYS,mask:0},0,255,ie.ZERO,ie.ZERO,ie.ZERO)},ba.prototype.clearStencil=function(){var m=this.context,A=m.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var g=i.create();i.ortho(g,0,this.width,this.height,0,0,1),i.scale(g,g,[A.drawingBufferWidth,A.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(m,A.TRIANGLES,ze.disabled,this.stencilClearMode,pt.disabled,At.disabled,vi(g),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ba.prototype._renderTileClippingMasks=function(m,A){if(this.currentStencilSource!==m.source&&m.isTileClipped()&&A&&A.length){this.currentStencilSource=m.source;var g=this.context,S=g.gl;this.nextStencilID+A.length>256&&this.clearStencil(),g.setColorMode(pt.disabled),g.setDepthMode(ze.disabled);var F=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var q=0,K=A;q<K.length;q+=1){var ie=K[q],fe=this._tileClippingMaskIDs[ie.key]=this.nextStencilID++;F.draw(g,S.TRIANGLES,ze.disabled,new Ie({func:S.ALWAYS,mask:0},fe,255,S.KEEP,S.KEEP,S.REPLACE),pt.disabled,At.disabled,vi(ie.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ba.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var m=this.nextStencilID++,A=this.context.gl;return new Ie({func:A.NOTEQUAL,mask:255},m,255,A.KEEP,A.KEEP,A.REPLACE)},ba.prototype.stencilModeForClipping=function(m){var A=this.context.gl;return new Ie({func:A.EQUAL,mask:255},this._tileClippingMaskIDs[m.key],0,A.KEEP,A.KEEP,A.REPLACE)},ba.prototype.stencilConfigForOverlap=function(m){var A,g=this.context.gl,S=m.sort(function(fe,_e){return _e.overscaledZ-fe.overscaledZ}),F=S[S.length-1].overscaledZ,q=S[0].overscaledZ-F+1;if(q>1){this.currentStencilSource=void 0,this.nextStencilID+q>256&&this.clearStencil();for(var K={},ie=0;ie<q;ie++)K[ie+F]=new Ie({func:g.GEQUAL,mask:255},ie+this.nextStencilID,255,g.KEEP,g.KEEP,g.REPLACE);return this.nextStencilID+=q,[K,S]}return[(A={},A[F]=Ie.disabled,A),S]},ba.prototype.colorModeForRenderPass=function(){var m=this.context.gl;return this._showOverdrawInspector?new pt([m.CONSTANT_COLOR,m.ONE],new i.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?pt.unblended:pt.alphaBlended},ba.prototype.depthModeForSublayer=function(m,A,g){if(!this.opaquePassEnabledForLayer())return ze.disabled;var S=1-((1+this.currentLayer)*this.numSublayers+m)*this.depthEpsilon;return new ze(g||this.context.gl.LEQUAL,A,[S,S])},ba.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ba.prototype.render=function(m,A){var g=this;this.style=m,this.options=A,this.lineAtlas=m.lineAtlas,this.imageManager=m.imageManager,this.glyphManager=m.glyphManager,this.symbolFadeChange=m.placement.symbolFadeChange(i.browser.now()),this.imageManager.beginFrame();var S=this.style._order,F=this.style.sourceCaches;for(var q in F){var K=F[q];K.used&&K.prepare(this.context)}var ie,fe,_e={},Re={},Fe={};for(var Ne in F){var Je=F[Ne];_e[Ne]=Je.getVisibleCoordinates(),Re[Ne]=_e[Ne].slice().reverse(),Fe[Ne]=Je.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Ze=0;Ze<S.length;Ze++)if(this.style._layers[S[Ze]].is3D()){this.opaquePassCutoff=Ze;break}this.renderPass="offscreen";for(var ct=0,Xe=S;ct<Xe.length;ct+=1){var st=this.style._layers[Xe[ct]];if(st.hasOffscreenPass()&&!st.isHidden(this.transform.zoom)){var yt=Re[st.source];(st.type==="custom"||yt.length)&&this.renderLayer(this,F[st.source],st,yt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:A.showOverdrawInspector?i.Color.black:i.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=A.showOverdrawInspector,this.depthRangeFor3D=[0,1-(m._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=S.length-1;this.currentLayer>=0;this.currentLayer--){var Lt=this.style._layers[S[this.currentLayer]],Jt=F[Lt.source],Ht=_e[Lt.source];this._renderTileClippingMasks(Lt,Ht),this.renderLayer(this,Jt,Lt,Ht)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<S.length;this.currentLayer++){var er=this.style._layers[S[this.currentLayer]],pr=F[er.source],Sr=(er.type==="symbol"?Fe:Re)[er.source];this._renderTileClippingMasks(er,_e[er.source]),this.renderLayer(this,pr,er,Sr)}this.options.showTileBoundaries&&(i.values(this.style._layers).forEach(function(Tr){Tr.source&&!Tr.isHidden(g.transform.zoom)&&(Tr.source!==(fe&&fe.id)&&(fe=g.style.sourceCaches[Tr.source]),(!ie||ie.getSource().maxzoom<fe.getSource().maxzoom)&&(ie=fe))}),ie&&Vu.debug(this,ie,ie.getVisibleCoordinates())),this.options.showPadding&&function(Tr){var Xr=Tr.transform.padding;Lh(Tr,Tr.transform.height-(Xr.top||0),3,Cc),Lh(Tr,Xr.bottom||0,3,bu),kh(Tr,Xr.left||0,3,iu),kh(Tr,Tr.transform.width-(Xr.right||0),3,kl);var Tn=Tr.transform.centerPoint;(function(Ln,In,zi,$r){ac(Ln,In-1,zi-10,2,20,$r),ac(Ln,In-10,zi-1,20,2,$r)})(Tr,Tn.x,Tr.transform.height-Tn.y,Pc)}(this),this.context.setDefault()},ba.prototype.renderLayer=function(m,A,g,S){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="custom"||S.length)&&(this.id=g.id,this.gpuTimingStart(g),Vu[g.type](m,A,g,S,this.style.placement.variableOffsets),this.gpuTimingEnd())},ba.prototype.gpuTimingStart=function(m){if(this.options.gpuTiming){var A=this.context.extTimerQuery,g=this.gpuTimers[m.id];g||(g=this.gpuTimers[m.id]={calls:0,cpuTime:0,query:A.createQueryEXT()}),g.calls++,A.beginQueryEXT(A.TIME_ELAPSED_EXT,g.query)}},ba.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var m=this.context.extTimerQuery;m.endQueryEXT(m.TIME_ELAPSED_EXT)}},ba.prototype.collectGpuTimers=function(){var m=this.gpuTimers;return this.gpuTimers={},m},ba.prototype.queryGpuTimers=function(m){var A={};for(var g in m){var S=m[g],F=this.context.extTimerQuery,q=F.getQueryObjectEXT(S.query,F.QUERY_RESULT_EXT)/1e6;F.deleteQueryEXT(S.query),A[g]=q}return A},ba.prototype.translatePosMatrix=function(m,A,g,S,F){if(!g[0]&&!g[1])return m;var q=F?S==="map"?this.transform.angle:0:S==="viewport"?-this.transform.angle:0;if(q){var K=Math.sin(q),ie=Math.cos(q);g=[g[0]*ie-g[1]*K,g[0]*K+g[1]*ie]}var fe=[F?g[0]:ai(A,g[0],this.transform.zoom),F?g[1]:ai(A,g[1],this.transform.zoom),0],_e=new Float32Array(16);return i.translate(_e,m,fe),_e},ba.prototype.saveTileTexture=function(m){var A=this._tileTextures[m.size[0]];A?A.push(m):this._tileTextures[m.size[0]]=[m]},ba.prototype.getTileTexture=function(m){var A=this._tileTextures[m];return A&&A.length>0?A.pop():null},ba.prototype.isPatternMissing=function(m){if(!m)return!1;if(!m.from||!m.to)return!0;var A=this.imageManager.getPattern(m.from.toString()),g=this.imageManager.getPattern(m.to.toString());return!A||!g},ba.prototype.useProgram=function(m,A){this.cache=this.cache||{};var g=""+m+(A?A.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[g]||(this.cache[g]=new Gr(this.context,m,yi[m],A,ha[m],this._showOverdrawInspector)),this.cache[g]},ba.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ba.prototype.setBaseState=function(){var m=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(m.FUNC_ADD)},ba.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=i.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new i.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},ba.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var oc=function(m,A){this.points=m,this.planes=A};oc.fromInvProjectionMatrix=function(m,A,g){var S=Math.pow(2,g),F=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(K){return i.transformMat4([],K,m)}).map(function(K){return i.scale$1([],K,1/K[3]/A*S)}),q=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(K){var ie=i.sub([],F[K[0]],F[K[1]]),fe=i.sub([],F[K[2]],F[K[1]]),_e=i.normalize([],i.cross([],ie,fe)),Re=-i.dot(_e,F[K[1]]);return _e.concat(Re)});return new oc(F,q)};var tl=function(m,A){this.min=m,this.max=A,this.center=i.scale$2([],i.add([],this.min,this.max),.5)};tl.prototype.quadrant=function(m){for(var A=[m%2==0,m<2],g=i.clone$2(this.min),S=i.clone$2(this.max),F=0;F<A.length;F++)g[F]=A[F]?this.min[F]:this.center[F],S[F]=A[F]?this.center[F]:this.max[F];return S[2]=this.max[2],new tl(g,S)},tl.prototype.distanceX=function(m){return Math.max(Math.min(this.max[0],m[0]),this.min[0])-m[0]},tl.prototype.distanceY=function(m){return Math.max(Math.min(this.max[1],m[1]),this.min[1])-m[1]},tl.prototype.intersects=function(m){for(var A=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],g=!0,S=0;S<m.planes.length;S++){for(var F=m.planes[S],q=0,K=0;K<A.length;K++)q+=i.dot$1(F,A[K])>=0;if(q===0)return 0;q!==A.length&&(g=!1)}if(g)return 2;for(var ie=0;ie<3;ie++){for(var fe=Number.MAX_VALUE,_e=-Number.MAX_VALUE,Re=0;Re<m.points.length;Re++){var Fe=m.points[Re][ie]-this.min[ie];fe=Math.min(fe,Fe),_e=Math.max(_e,Fe)}if(_e<0||fe>this.max[ie]-this.min[ie])return 0}return 1};var ja=function(m,A,g,S){if(m===void 0&&(m=0),A===void 0&&(A=0),g===void 0&&(g=0),S===void 0&&(S=0),isNaN(m)||m<0||isNaN(A)||A<0||isNaN(g)||g<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=m,this.bottom=A,this.left=g,this.right=S};ja.prototype.interpolate=function(m,A,g){return A.top!=null&&m.top!=null&&(this.top=i.number(m.top,A.top,g)),A.bottom!=null&&m.bottom!=null&&(this.bottom=i.number(m.bottom,A.bottom,g)),A.left!=null&&m.left!=null&&(this.left=i.number(m.left,A.left,g)),A.right!=null&&m.right!=null&&(this.right=i.number(m.right,A.right,g)),this},ja.prototype.getCenter=function(m,A){var g=i.clamp((this.left+m-this.right)/2,0,m),S=i.clamp((this.top+A-this.bottom)/2,0,A);return new i.Point(g,S)},ja.prototype.equals=function(m){return this.top===m.top&&this.bottom===m.bottom&&this.left===m.left&&this.right===m.right},ja.prototype.clone=function(){return new ja(this.top,this.bottom,this.left,this.right)},ja.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var ui=function(m,A,g,S,F){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=F===void 0||F,this._minZoom=m||0,this._maxZoom=A||22,this._minPitch=g??0,this._maxPitch=S??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new i.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ja,this._posMatrixCache={},this._alignedPosMatrixCache={}},mi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ui.prototype.clone=function(){var m=new ui(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return m.tileSize=this.tileSize,m.latRange=this.latRange,m.width=this.width,m.height=this.height,m._center=this._center,m.zoom=this.zoom,m.angle=this.angle,m._fov=this._fov,m._pitch=this._pitch,m._unmodified=this._unmodified,m._edgeInsets=this._edgeInsets.clone(),m._calcMatrices(),m},mi.minZoom.get=function(){return this._minZoom},mi.minZoom.set=function(m){this._minZoom!==m&&(this._minZoom=m,this.zoom=Math.max(this.zoom,m))},mi.maxZoom.get=function(){return this._maxZoom},mi.maxZoom.set=function(m){this._maxZoom!==m&&(this._maxZoom=m,this.zoom=Math.min(this.zoom,m))},mi.minPitch.get=function(){return this._minPitch},mi.minPitch.set=function(m){this._minPitch!==m&&(this._minPitch=m,this.pitch=Math.max(this.pitch,m))},mi.maxPitch.get=function(){return this._maxPitch},mi.maxPitch.set=function(m){this._maxPitch!==m&&(this._maxPitch=m,this.pitch=Math.min(this.pitch,m))},mi.renderWorldCopies.get=function(){return this._renderWorldCopies},mi.renderWorldCopies.set=function(m){m===void 0?m=!0:m===null&&(m=!1),this._renderWorldCopies=m},mi.worldSize.get=function(){return this.tileSize*this.scale},mi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},mi.size.get=function(){return new i.Point(this.width,this.height)},mi.bearing.get=function(){return-this.angle/Math.PI*180},mi.bearing.set=function(m){var A=-i.wrap(m,-180,180)*Math.PI/180;this.angle!==A&&(this._unmodified=!1,this.angle=A,this._calcMatrices(),this.rotationMatrix=i.create$2(),i.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},mi.pitch.get=function(){return this._pitch/Math.PI*180},mi.pitch.set=function(m){var A=i.clamp(m,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==A&&(this._unmodified=!1,this._pitch=A,this._calcMatrices())},mi.fov.get=function(){return this._fov/Math.PI*180},mi.fov.set=function(m){m=Math.max(.01,Math.min(60,m)),this._fov!==m&&(this._unmodified=!1,this._fov=m/180*Math.PI,this._calcMatrices())},mi.zoom.get=function(){return this._zoom},mi.zoom.set=function(m){var A=Math.min(Math.max(m,this.minZoom),this.maxZoom);this._zoom!==A&&(this._unmodified=!1,this._zoom=A,this.scale=this.zoomScale(A),this.tileZoom=Math.floor(A),this.zoomFraction=A-this.tileZoom,this._constrain(),this._calcMatrices())},mi.center.get=function(){return this._center},mi.center.set=function(m){m.lat===this._center.lat&&m.lng===this._center.lng||(this._unmodified=!1,this._center=m,this._constrain(),this._calcMatrices())},mi.padding.get=function(){return this._edgeInsets.toJSON()},mi.padding.set=function(m){this._edgeInsets.equals(m)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,m,1),this._calcMatrices())},mi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},ui.prototype.isPaddingEqual=function(m){return this._edgeInsets.equals(m)},ui.prototype.interpolatePadding=function(m,A,g){this._unmodified=!1,this._edgeInsets.interpolate(m,A,g),this._constrain(),this._calcMatrices()},ui.prototype.coveringZoomLevel=function(m){var A=(m.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/m.tileSize));return Math.max(0,A)},ui.prototype.getVisibleUnwrappedCoordinates=function(m){var A=[new i.UnwrappedTileID(0,m)];if(this._renderWorldCopies)for(var g=this.pointCoordinate(new i.Point(0,0)),S=this.pointCoordinate(new i.Point(this.width,0)),F=this.pointCoordinate(new i.Point(this.width,this.height)),q=this.pointCoordinate(new i.Point(0,this.height)),K=Math.floor(Math.min(g.x,S.x,F.x,q.x)),ie=Math.floor(Math.max(g.x,S.x,F.x,q.x)),fe=K-1;fe<=ie+1;fe++)fe!==0&&A.push(new i.UnwrappedTileID(fe,m));return A},ui.prototype.coveringTiles=function(m){var A=this.coveringZoomLevel(m),g=A;if(m.minzoom!==void 0&&A<m.minzoom)return[];m.maxzoom!==void 0&&A>m.maxzoom&&(A=m.maxzoom);var S=i.MercatorCoordinate.fromLngLat(this.center),F=Math.pow(2,A),q=[F*S.x,F*S.y,0],K=oc.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,A),ie=m.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ie=A);var fe=function(Tr){return{aabb:new tl([Tr*F,0,0],[(Tr+1)*F,F,0]),zoom:0,x:0,y:0,wrap:Tr,fullyVisible:!1}},_e=[],Re=[],Fe=A,Ne=m.reparseOverscaled?g:A;if(this._renderWorldCopies)for(var Je=1;Je<=3;Je++)_e.push(fe(-Je)),_e.push(fe(Je));for(_e.push(fe(0));_e.length>0;){var Ze=_e.pop(),ct=Ze.x,Xe=Ze.y,st=Ze.fullyVisible;if(!st){var yt=Ze.aabb.intersects(K);if(yt===0)continue;st=yt===2}var Lt=Ze.aabb.distanceX(q),Jt=Ze.aabb.distanceY(q),Ht=Math.max(Math.abs(Lt),Math.abs(Jt));if(Ze.zoom===Fe||Ht>3+(1<<Fe-Ze.zoom)-2&&Ze.zoom>=ie)Re.push({tileID:new i.OverscaledTileID(Ze.zoom===Fe?Ne:Ze.zoom,Ze.wrap,Ze.zoom,ct,Xe),distanceSq:i.sqrLen([q[0]-.5-ct,q[1]-.5-Xe])});else for(var er=0;er<4;er++){var pr=(ct<<1)+er%2,Sr=(Xe<<1)+(er>>1);_e.push({aabb:Ze.aabb.quadrant(er),zoom:Ze.zoom+1,x:pr,y:Sr,wrap:Ze.wrap,fullyVisible:st})}}return Re.sort(function(Tr,Xr){return Tr.distanceSq-Xr.distanceSq}).map(function(Tr){return Tr.tileID})},ui.prototype.resize=function(m,A){this.width=m,this.height=A,this.pixelsToGLUnits=[2/m,-2/A],this._constrain(),this._calcMatrices()},mi.unmodified.get=function(){return this._unmodified},ui.prototype.zoomScale=function(m){return Math.pow(2,m)},ui.prototype.scaleZoom=function(m){return Math.log(m)/Math.LN2},ui.prototype.project=function(m){var A=i.clamp(m.lat,-this.maxValidLatitude,this.maxValidLatitude);return new i.Point(i.mercatorXfromLng(m.lng)*this.worldSize,i.mercatorYfromLat(A)*this.worldSize)},ui.prototype.unproject=function(m){return new i.MercatorCoordinate(m.x/this.worldSize,m.y/this.worldSize).toLngLat()},mi.point.get=function(){return this.project(this.center)},ui.prototype.setLocationAtPoint=function(m,A){var g=this.pointCoordinate(A),S=this.pointCoordinate(this.centerPoint),F=this.locationCoordinate(m),q=new i.MercatorCoordinate(F.x-(g.x-S.x),F.y-(g.y-S.y));this.center=this.coordinateLocation(q),this._renderWorldCopies&&(this.center=this.center.wrap())},ui.prototype.locationPoint=function(m){return this.coordinatePoint(this.locationCoordinate(m))},ui.prototype.pointLocation=function(m){return this.coordinateLocation(this.pointCoordinate(m))},ui.prototype.locationCoordinate=function(m){return i.MercatorCoordinate.fromLngLat(m)},ui.prototype.coordinateLocation=function(m){return m.toLngLat()},ui.prototype.pointCoordinate=function(m){var A=[m.x,m.y,0,1],g=[m.x,m.y,1,1];i.transformMat4(A,A,this.pixelMatrixInverse),i.transformMat4(g,g,this.pixelMatrixInverse);var S=A[3],F=g[3],q=A[1]/S,K=g[1]/F,ie=A[2]/S,fe=g[2]/F,_e=ie===fe?0:(0-ie)/(fe-ie);return new i.MercatorCoordinate(i.number(A[0]/S,g[0]/F,_e)/this.worldSize,i.number(q,K,_e)/this.worldSize)},ui.prototype.coordinatePoint=function(m){var A=[m.x*this.worldSize,m.y*this.worldSize,0,1];return i.transformMat4(A,A,this.pixelMatrix),new i.Point(A[0]/A[3],A[1]/A[3])},ui.prototype.getBounds=function(){return new i.LngLatBounds().extend(this.pointLocation(new i.Point(0,0))).extend(this.pointLocation(new i.Point(this.width,0))).extend(this.pointLocation(new i.Point(this.width,this.height))).extend(this.pointLocation(new i.Point(0,this.height)))},ui.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new i.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},ui.prototype.setMaxBounds=function(m){m?(this.lngRange=[m.getWest(),m.getEast()],this.latRange=[m.getSouth(),m.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ui.prototype.calculatePosMatrix=function(m,A){A===void 0&&(A=!1);var g=m.key,S=A?this._alignedPosMatrixCache:this._posMatrixCache;if(S[g])return S[g];var F=m.canonical,q=this.worldSize/this.zoomScale(F.z),K=F.x+Math.pow(2,F.z)*m.wrap,ie=i.identity(new Float64Array(16));return i.translate(ie,ie,[K*q,F.y*q,0]),i.scale(ie,ie,[q/i.EXTENT,q/i.EXTENT,1]),i.multiply(ie,A?this.alignedProjMatrix:this.projMatrix,ie),S[g]=new Float32Array(ie),S[g]},ui.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ui.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var m,A,g,S,F=-90,q=90,K=-180,ie=180,fe=this.size,_e=this._unmodified;if(this.latRange){var Re=this.latRange;F=i.mercatorYfromLat(Re[1])*this.worldSize,m=(q=i.mercatorYfromLat(Re[0])*this.worldSize)-F<fe.y?fe.y/(q-F):0}if(this.lngRange){var Fe=this.lngRange;K=i.mercatorXfromLng(Fe[0])*this.worldSize,A=(ie=i.mercatorXfromLng(Fe[1])*this.worldSize)-K<fe.x?fe.x/(ie-K):0}var Ne=this.point,Je=Math.max(A||0,m||0);if(Je)return this.center=this.unproject(new i.Point(A?(ie+K)/2:Ne.x,m?(q+F)/2:Ne.y)),this.zoom+=this.scaleZoom(Je),this._unmodified=_e,void(this._constraining=!1);if(this.latRange){var Ze=Ne.y,ct=fe.y/2;Ze-ct<F&&(S=F+ct),Ze+ct>q&&(S=q-ct)}if(this.lngRange){var Xe=Ne.x,st=fe.x/2;Xe-st<K&&(g=K+st),Xe+st>ie&&(g=ie-st)}g===void 0&&S===void 0||(this.center=this.unproject(new i.Point(g!==void 0?g:Ne.x,S!==void 0?S:Ne.y))),this._unmodified=_e,this._constraining=!1}},ui.prototype._calcMatrices=function(){if(this.height){var m=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var A=Math.PI/2+this._pitch,g=this._fov*(.5+m.y/this.height),S=Math.sin(g)*this.cameraToCenterDistance/Math.sin(i.clamp(Math.PI-A-g,.01,Math.PI-.01)),F=this.point,q=F.x,K=F.y,ie=1.01*(Math.cos(Math.PI/2-this._pitch)*S+this.cameraToCenterDistance),fe=this.height/50,_e=new Float64Array(16);i.perspective(_e,this._fov,this.width/this.height,fe,ie),_e[8]=2*-m.x/this.width,_e[9]=2*m.y/this.height,i.scale(_e,_e,[1,-1,1]),i.translate(_e,_e,[0,0,-this.cameraToCenterDistance]),i.rotateX(_e,_e,this._pitch),i.rotateZ(_e,_e,this.angle),i.translate(_e,_e,[-q,-K,0]),this.mercatorMatrix=i.scale([],_e,[this.worldSize,this.worldSize,this.worldSize]),i.scale(_e,_e,[1,1,i.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=_e,this.invProjMatrix=i.invert([],this.projMatrix);var Re=this.width%2/2,Fe=this.height%2/2,Ne=Math.cos(this.angle),Je=Math.sin(this.angle),Ze=q-Math.round(q)+Ne*Re+Je*Fe,ct=K-Math.round(K)+Ne*Fe+Je*Re,Xe=new Float64Array(_e);if(i.translate(Xe,Xe,[Ze>.5?Ze-1:Ze,ct>.5?ct-1:ct,0]),this.alignedProjMatrix=Xe,_e=i.create(),i.scale(_e,_e,[this.width/2,-this.height/2,1]),i.translate(_e,_e,[1,-1,0]),this.labelPlaneMatrix=_e,_e=i.create(),i.scale(_e,_e,[1,-1,1]),i.translate(_e,_e,[-1,-1,0]),i.scale(_e,_e,[2/this.width,2/this.height,1]),this.glCoordMatrix=_e,this.pixelMatrix=i.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(_e=i.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=_e,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ui.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var m=this.pointCoordinate(new i.Point(0,0)),A=[m.x*this.worldSize,m.y*this.worldSize,0,1];return i.transformMat4(A,A,this.pixelMatrix)[3]/this.cameraToCenterDistance},ui.prototype.getCameraPoint=function(){var m=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.Point(0,m))},ui.prototype.getCameraQueryGeometry=function(m){var A=this.getCameraPoint();if(m.length===1)return[m[0],A];for(var g=A.x,S=A.y,F=A.x,q=A.y,K=0,ie=m;K<ie.length;K+=1){var fe=ie[K];g=Math.min(g,fe.x),S=Math.min(S,fe.y),F=Math.max(F,fe.x),q=Math.max(q,fe.y)}return[new i.Point(g,S),new i.Point(F,S),new i.Point(F,q),new i.Point(g,q),new i.Point(g,S)]},Object.defineProperties(ui.prototype,mi);var Qo=function(m){var A,g,S,F;this._hashName=m&&encodeURIComponent(m),i.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(A=this._updateHashUnthrottled.bind(this),g=!1,S=null,F=function(){S=null,g&&(A(),S=setTimeout(F,300),g=!1)},function(){return g=!0,S||F(),S})};Qo.prototype.addTo=function(m){return this._map=m,i.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Qo.prototype.remove=function(){return i.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Qo.prototype.getHashString=function(m){var A=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,S=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),F=Math.pow(10,S),q=Math.round(A.lng*F)/F,K=Math.round(A.lat*F)/F,ie=this._map.getBearing(),fe=this._map.getPitch(),_e="";if(_e+=m?"/"+q+"/"+K+"/"+g:g+"/"+K+"/"+q,(ie||fe)&&(_e+="/"+Math.round(10*ie)/10),fe&&(_e+="/"+Math.round(fe)),this._hashName){var Re=this._hashName,Fe=!1,Ne=i.window.location.hash.slice(1).split("&").map(function(Je){var Ze=Je.split("=")[0];return Ze===Re?(Fe=!0,Ze+"="+_e):Je}).filter(function(Je){return Je});return Fe||Ne.push(Re+"="+_e),"#"+Ne.join("&")}return"#"+_e},Qo.prototype._getCurrentHash=function(){var m,A=this,g=i.window.location.hash.replace("#","");return this._hashName?(g.split("&").map(function(S){return S.split("=")}).forEach(function(S){S[0]===A._hashName&&(m=S)}),(m&&m[1]||"").split("/")):g.split("/")},Qo.prototype._onHashChange=function(){var m=this._getCurrentHash();if(m.length>=3&&!m.some(function(g){return isNaN(g)})){var A=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(m[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:A,pitch:+(m[4]||0)}),!0}return!1},Qo.prototype._updateHashUnthrottled=function(){var m=i.window.location.href.replace(/(#.+)?$/,this.getHashString());try{i.window.history.replaceState(i.window.history.state,null,m)}catch{}};var Bl={linearity:.3,easing:i.bezier(0,0,.3,1)},Al=i.extend({deceleration:2500,maxSpeed:1400},Bl),Ue=i.extend({deceleration:20,maxSpeed:1400},Bl),ht=i.extend({deceleration:1e3,maxSpeed:360},Bl),St=i.extend({deceleration:1e3,maxSpeed:90},Bl),ar=function(m){this._map=m,this.clear()};function kt(m,A){(!m.duration||m.duration<A.duration)&&(m.duration=A.duration,m.easing=A.easing)}function fr(m,A,g){var S=g.maxSpeed,F=g.linearity,q=g.deceleration,K=i.clamp(m*F/(A/1e3),-S,S),ie=Math.abs(K)/(q*F);return{easing:g.easing,duration:1e3*ie,amount:K*(ie/2)}}ar.prototype.clear=function(){this._inertiaBuffer=[]},ar.prototype.record=function(m){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:i.browser.now(),settings:m})},ar.prototype._drainInertiaBuffer=function(){for(var m=this._inertiaBuffer,A=i.browser.now();m.length>0&&A-m[0].time>160;)m.shift()},ar.prototype._onMoveEnd=function(m){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var A={zoom:0,bearing:0,pitch:0,pan:new i.Point(0,0),pinchAround:void 0,around:void 0},g=0,S=this._inertiaBuffer;g<S.length;g+=1){var F=S[g].settings;A.zoom+=F.zoomDelta||0,A.bearing+=F.bearingDelta||0,A.pitch+=F.pitchDelta||0,F.panDelta&&A.pan._add(F.panDelta),F.around&&(A.around=F.around),F.pinchAround&&(A.pinchAround=F.pinchAround)}var q=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,K={};if(A.pan.mag()){var ie=fr(A.pan.mag(),q,i.extend({},Al,m||{}));K.offset=A.pan.mult(ie.amount/A.pan.mag()),K.center=this._map.transform.center,kt(K,ie)}if(A.zoom){var fe=fr(A.zoom,q,Ue);K.zoom=this._map.transform.zoom+fe.amount,kt(K,fe)}if(A.bearing){var _e=fr(A.bearing,q,ht);K.bearing=this._map.transform.bearing+i.clamp(_e.amount,-179,179),kt(K,_e)}if(A.pitch){var Re=fr(A.pitch,q,St);K.pitch=this._map.transform.pitch+Re.amount,kt(K,Re)}if(K.zoom||K.bearing){var Fe=A.pinchAround===void 0?A.around:A.pinchAround;K.around=Fe?this._map.unproject(Fe):this._map.getCenter()}return this.clear(),i.extend(K,{noMoveStart:!0})}};var ur=function(m){function A(S,F,q,K){K===void 0&&(K={});var ie=o.mousePos(F.getCanvasContainer(),q),fe=F.unproject(ie);m.call(this,S,i.extend({point:ie,lngLat:fe,originalEvent:q},K)),this._defaultPrevented=!1,this.target=F}m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A;var g={defaultPrevented:{configurable:!0}};return A.prototype.preventDefault=function(){this._defaultPrevented=!0},g.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(A.prototype,g),A}(i.Event),kr=function(m){function A(S,F,q){var K=S==="touchend"?q.changedTouches:q.touches,ie=o.touchPos(F.getCanvasContainer(),K),fe=ie.map(function(Fe){return F.unproject(Fe)}),_e=ie.reduce(function(Fe,Ne,Je,Ze){return Fe.add(Ne.div(Ze.length))},new i.Point(0,0)),Re=F.unproject(_e);m.call(this,S,{points:ie,point:_e,lngLats:fe,lngLat:Re,originalEvent:q}),this._defaultPrevented=!1}m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A;var g={defaultPrevented:{configurable:!0}};return A.prototype.preventDefault=function(){this._defaultPrevented=!0},g.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(A.prototype,g),A}(i.Event),Zr=function(m){function A(S,F,q){m.call(this,S,{originalEvent:q}),this._defaultPrevented=!1}m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A;var g={defaultPrevented:{configurable:!0}};return A.prototype.preventDefault=function(){this._defaultPrevented=!0},g.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(A.prototype,g),A}(i.Event),hn=function(m,A){this._map=m,this._clickTolerance=A.clickTolerance};hn.prototype.reset=function(){delete this._mousedownPos},hn.prototype.wheel=function(m){return this._firePreventable(new Zr(m.type,this._map,m))},hn.prototype.mousedown=function(m,A){return this._mousedownPos=A,this._firePreventable(new ur(m.type,this._map,m))},hn.prototype.mouseup=function(m){this._map.fire(new ur(m.type,this._map,m))},hn.prototype.click=function(m,A){this._mousedownPos&&this._mousedownPos.dist(A)>=this._clickTolerance||this._map.fire(new ur(m.type,this._map,m))},hn.prototype.dblclick=function(m){return this._firePreventable(new ur(m.type,this._map,m))},hn.prototype.mouseover=function(m){this._map.fire(new ur(m.type,this._map,m))},hn.prototype.mouseout=function(m){this._map.fire(new ur(m.type,this._map,m))},hn.prototype.touchstart=function(m){return this._firePreventable(new kr(m.type,this._map,m))},hn.prototype.touchmove=function(m){this._map.fire(new kr(m.type,this._map,m))},hn.prototype.touchend=function(m){this._map.fire(new kr(m.type,this._map,m))},hn.prototype.touchcancel=function(m){this._map.fire(new kr(m.type,this._map,m))},hn.prototype._firePreventable=function(m){if(this._map.fire(m),m.defaultPrevented)return{}},hn.prototype.isEnabled=function(){return!0},hn.prototype.isActive=function(){return!1},hn.prototype.enable=function(){},hn.prototype.disable=function(){};var ir=function(m){this._map=m};ir.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},ir.prototype.mousemove=function(m){this._map.fire(new ur(m.type,this._map,m))},ir.prototype.mousedown=function(){this._delayContextMenu=!0},ir.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ur("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},ir.prototype.contextmenu=function(m){this._delayContextMenu?this._contextMenuEvent=m:this._map.fire(new ur(m.type,this._map,m)),this._map.listens("contextmenu")&&m.preventDefault()},ir.prototype.isEnabled=function(){return!0},ir.prototype.isActive=function(){return!1},ir.prototype.enable=function(){},ir.prototype.disable=function(){};var Pn=function(m,A){this._map=m,this._el=m.getCanvasContainer(),this._container=m.getContainer(),this._clickTolerance=A.clickTolerance||1};function Oi(m,A){for(var g={},S=0;S<m.length;S++)g[m[S].identifier]=A[S];return g}Pn.prototype.isEnabled=function(){return!!this._enabled},Pn.prototype.isActive=function(){return!!this._active},Pn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Pn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Pn.prototype.mousedown=function(m,A){this.isEnabled()&&m.shiftKey&&m.button===0&&(o.disableDrag(),this._startPos=this._lastPos=A,this._active=!0)},Pn.prototype.mousemoveWindow=function(m,A){if(this._active){var g=A;if(!(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)){var S=this._startPos;this._lastPos=g,this._box||(this._box=o.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",m));var F=Math.min(S.x,g.x),q=Math.max(S.x,g.x),K=Math.min(S.y,g.y),ie=Math.max(S.y,g.y);o.setTransform(this._box,"translate("+F+"px,"+K+"px)"),this._box.style.width=q-F+"px",this._box.style.height=ie-K+"px"}}},Pn.prototype.mouseupWindow=function(m,A){var g=this;if(this._active&&m.button===0){var S=this._startPos,F=A;if(this.reset(),o.suppressClick(),S.x!==F.x||S.y!==F.y)return this._map.fire(new i.Event("boxzoomend",{originalEvent:m})),{cameraAnimation:function(q){return q.fitScreenCoordinates(S,F,g._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",m)}},Pn.prototype.keydown=function(m){this._active&&m.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",m))},Pn.prototype.blur=function(){this.reset()},Pn.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(o.remove(this._box),this._box=null),o.enableDrag(),delete this._startPos,delete this._lastPos},Pn.prototype._fireEvent=function(m,A){return this._map.fire(new i.Event(m,{originalEvent:A}))};var na=function(m){this.reset(),this.numTouches=m.numTouches};na.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},na.prototype.touchstart=function(m,A,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=m.timeStamp),g.length===this.numTouches&&(this.centroid=function(S){for(var F=new i.Point(0,0),q=0,K=S;q<K.length;q+=1)F._add(K[q]);return F.div(S.length)}(A),this.touches=Oi(g,A)))},na.prototype.touchmove=function(m,A,g){if(!this.aborted&&this.centroid){var S=Oi(g,A);for(var F in this.touches){var q=S[F];(!q||q.dist(this.touches[F])>30)&&(this.aborted=!0)}}},na.prototype.touchend=function(m,A,g){if((!this.centroid||m.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){var S=!this.aborted&&this.centroid;if(this.reset(),S)return S}};var Dn=function(m){this.singleTap=new na(m),this.numTaps=m.numTaps,this.reset()};Dn.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Dn.prototype.touchstart=function(m,A,g){this.singleTap.touchstart(m,A,g)},Dn.prototype.touchmove=function(m,A,g){this.singleTap.touchmove(m,A,g)},Dn.prototype.touchend=function(m,A,g){var S=this.singleTap.touchend(m,A,g);if(S){var F=m.timeStamp-this.lastTime<500,q=!this.lastTap||this.lastTap.dist(S)<30;if(F&&q||this.reset(),this.count++,this.lastTime=m.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}};var ia=function(){this._zoomIn=new Dn({numTouches:1,numTaps:2}),this._zoomOut=new Dn({numTouches:2,numTaps:1}),this.reset()};ia.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ia.prototype.touchstart=function(m,A,g){this._zoomIn.touchstart(m,A,g),this._zoomOut.touchstart(m,A,g)},ia.prototype.touchmove=function(m,A,g){this._zoomIn.touchmove(m,A,g),this._zoomOut.touchmove(m,A,g)},ia.prototype.touchend=function(m,A,g){var S=this,F=this._zoomIn.touchend(m,A,g),q=this._zoomOut.touchend(m,A,g);return F?(this._active=!0,m.preventDefault(),setTimeout(function(){return S.reset()},0),{cameraAnimation:function(K){return K.easeTo({duration:300,zoom:K.getZoom()+1,around:K.unproject(F)},{originalEvent:m})}}):q?(this._active=!0,m.preventDefault(),setTimeout(function(){return S.reset()},0),{cameraAnimation:function(K){return K.easeTo({duration:300,zoom:K.getZoom()-1,around:K.unproject(q)},{originalEvent:m})}}):void 0},ia.prototype.touchcancel=function(){this.reset()},ia.prototype.enable=function(){this._enabled=!0},ia.prototype.disable=function(){this._enabled=!1,this.reset()},ia.prototype.isEnabled=function(){return this._enabled},ia.prototype.isActive=function(){return this._active};var Xo={0:1,2:2},gr=function(m){this.reset(),this._clickTolerance=m.clickTolerance||1};gr.prototype.blur=function(){this.reset()},gr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},gr.prototype._correctButton=function(m,A){return!1},gr.prototype._move=function(m,A){return{}},gr.prototype.mousedown=function(m,A){if(!this._lastPoint){var g=o.mouseButton(m);this._correctButton(m,g)&&(this._lastPoint=A,this._eventButton=g)}},gr.prototype.mousemoveWindow=function(m,A){var g=this._lastPoint;if(g){if(m.preventDefault(),function(S,F){var q=Xo[F];return S.buttons===void 0||(S.buttons&q)!==q}(m,this._eventButton))this.reset();else if(this._moved||!(A.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=A,this._move(g,A)}},gr.prototype.mouseupWindow=function(m){this._lastPoint&&o.mouseButton(m)===this._eventButton&&(this._moved&&o.suppressClick(),this.reset())},gr.prototype.enable=function(){this._enabled=!0},gr.prototype.disable=function(){this._enabled=!1,this.reset()},gr.prototype.isEnabled=function(){return this._enabled},gr.prototype.isActive=function(){return this._active};var da=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.mousedown=function(g,S){m.prototype.mousedown.call(this,g,S),this._lastPoint&&(this._active=!0)},A.prototype._correctButton=function(g,S){return S===0&&!g.ctrlKey},A.prototype._move=function(g,S){return{around:S,panDelta:S.sub(g)}},A}(gr),Dl=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype._correctButton=function(g,S){return S===0&&g.ctrlKey||S===2},A.prototype._move=function(g,S){var F=.8*(S.x-g.x);if(F)return this._active=!0,{bearingDelta:F}},A.prototype.contextmenu=function(g){g.preventDefault()},A}(gr),Fl=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype._correctButton=function(g,S){return S===0&&g.ctrlKey||S===2},A.prototype._move=function(g,S){var F=-.5*(S.y-g.y);if(F)return this._active=!0,{pitchDelta:F}},A.prototype.contextmenu=function(g){g.preventDefault()},A}(gr),Ga=function(m){this._minTouches=1,this._clickTolerance=m.clickTolerance||1,this.reset()};Ga.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new i.Point(0,0)},Ga.prototype.touchstart=function(m,A,g){return this._calculateTransform(m,A,g)},Ga.prototype.touchmove=function(m,A,g){if(this._active&&!(g.length<this._minTouches))return m.preventDefault(),this._calculateTransform(m,A,g)},Ga.prototype.touchend=function(m,A,g){this._calculateTransform(m,A,g),this._active&&g.length<this._minTouches&&this.reset()},Ga.prototype.touchcancel=function(){this.reset()},Ga.prototype._calculateTransform=function(m,A,g){g.length>0&&(this._active=!0);var S=Oi(g,A),F=new i.Point(0,0),q=new i.Point(0,0),K=0;for(var ie in S){var fe=S[ie],_e=this._touches[ie];_e&&(F._add(fe),q._add(fe.sub(_e)),K++,S[ie]=fe)}if(this._touches=S,!(K<this._minTouches)&&q.mag()){var Re=q.div(K);if(this._sum._add(Re),!(this._sum.mag()<this._clickTolerance))return{around:F.div(K),panDelta:Re}}},Ga.prototype.enable=function(){this._enabled=!0},Ga.prototype.disable=function(){this._enabled=!1,this.reset()},Ga.prototype.isEnabled=function(){return this._enabled},Ga.prototype.isActive=function(){return this._active};var es=function(){this.reset()};function zp(m,A,g){for(var S=0;S<m.length;S++)if(m[S].identifier===g)return A[S]}function Bh(m,A){return Math.log(m/A)/Math.LN2}es.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},es.prototype._start=function(m){},es.prototype._move=function(m,A,g){return{}},es.prototype.touchstart=function(m,A,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([A[0],A[1]]))},es.prototype.touchmove=function(m,A,g){if(this._firstTwoTouches){m.preventDefault();var S=this._firstTwoTouches,F=S[1],q=zp(g,A,S[0]),K=zp(g,A,F);if(q&&K){var ie=this._aroundCenter?null:q.add(K).div(2);return this._move([q,K],ie,m)}}},es.prototype.touchend=function(m,A,g){if(this._firstTwoTouches){var S=this._firstTwoTouches,F=S[1],q=zp(g,A,S[0]),K=zp(g,A,F);q&&K||(this._active&&o.suppressClick(),this.reset())}},es.prototype.touchcancel=function(){this.reset()},es.prototype.enable=function(m){this._enabled=!0,this._aroundCenter=!!m&&m.around==="center"},es.prototype.disable=function(){this._enabled=!1,this.reset()},es.prototype.isEnabled=function(){return this._enabled},es.prototype.isActive=function(){return this._active};var au=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.reset=function(){m.prototype.reset.call(this),delete this._distance,delete this._startDistance},A.prototype._start=function(g){this._startDistance=this._distance=g[0].dist(g[1])},A.prototype._move=function(g,S){var F=this._distance;if(this._distance=g[0].dist(g[1]),this._active||!(Math.abs(Bh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Bh(this._distance,F),pinchAround:S}},A}(es);function Hu(m,A){return 180*m.angleWith(A)/Math.PI}var af=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.reset=function(){m.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},A.prototype._start=function(g){this._startVector=this._vector=g[0].sub(g[1]),this._minDiameter=g[0].dist(g[1])},A.prototype._move=function(g,S){var F=this._vector;if(this._vector=g[0].sub(g[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Hu(this._vector,F),pinchAround:S}},A.prototype._isBelowThreshold=function(g){this._minDiameter=Math.min(this._minDiameter,g.mag());var S=25/(Math.PI*this._minDiameter)*360,F=Hu(g,this._startVector);return Math.abs(F)<S},A}(es);function Dh(m){return Math.abs(m.y)>Math.abs(m.x)}var of=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.reset=function(){m.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},A.prototype._start=function(g){this._lastPoints=g,Dh(g[0].sub(g[1]))&&(this._valid=!1)},A.prototype._move=function(g,S,F){var q=g[0].sub(this._lastPoints[0]),K=g[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(q,K,F.timeStamp),this._valid)return this._lastPoints=g,this._active=!0,{pitchDelta:(q.y+K.y)/2*-.5}},A.prototype.gestureBeginsVertically=function(g,S,F){if(this._valid!==void 0)return this._valid;var q=g.mag()>=2,K=S.mag()>=2;if(q||K){if(!q||!K)return this._firstMove===void 0&&(this._firstMove=F),F-this._firstMove<100&&void 0;var ie=g.y>0==S.y>0;return Dh(g)&&Dh(S)&&ie}},A}(es),Qd={panStep:100,bearingStep:15,pitchStep:10},yl=function(){var m=Qd;this._panStep=m.panStep,this._bearingStep=m.bearingStep,this._pitchStep=m.pitchStep,this._rotationDisabled=!1};function Wu(m){return m*(2-m)}yl.prototype.blur=function(){this.reset()},yl.prototype.reset=function(){this._active=!1},yl.prototype.keydown=function(m){var A=this;if(!(m.altKey||m.ctrlKey||m.metaKey)){var g=0,S=0,F=0,q=0,K=0;switch(m.keyCode){case 61:case 107:case 171:case 187:g=1;break;case 189:case 109:case 173:g=-1;break;case 37:m.shiftKey?S=-1:(m.preventDefault(),q=-1);break;case 39:m.shiftKey?S=1:(m.preventDefault(),q=1);break;case 38:m.shiftKey?F=1:(m.preventDefault(),K=-1);break;case 40:m.shiftKey?F=-1:(m.preventDefault(),K=1);break;default:return}return this._rotationDisabled&&(S=0,F=0),{cameraAnimation:function(ie){var fe=ie.getZoom();ie.easeTo({duration:300,easeId:"keyboardHandler",easing:Wu,zoom:g?Math.round(fe)+g*(m.shiftKey?2:1):fe,bearing:ie.getBearing()+S*A._bearingStep,pitch:ie.getPitch()+F*A._pitchStep,offset:[-q*A._panStep,-K*A._panStep],center:ie.getCenter()},{originalEvent:m})}}}},yl.prototype.enable=function(){this._enabled=!0},yl.prototype.disable=function(){this._enabled=!1,this.reset()},yl.prototype.isEnabled=function(){return this._enabled},yl.prototype.isActive=function(){return this._active},yl.prototype.disableRotation=function(){this._rotationDisabled=!0},yl.prototype.enableRotation=function(){this._rotationDisabled=!1};var Si=function(m,A){this._map=m,this._el=m.getCanvasContainer(),this._handler=A,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,i.bindAll(["_onTimeout"],this)};Si.prototype.setZoomRate=function(m){this._defaultZoomRate=m},Si.prototype.setWheelZoomRate=function(m){this._wheelZoomRate=m},Si.prototype.isEnabled=function(){return!!this._enabled},Si.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Si.prototype.isZooming=function(){return!!this._zooming},Si.prototype.enable=function(m){this.isEnabled()||(this._enabled=!0,this._aroundCenter=m&&m.around==="center")},Si.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Si.prototype.wheel=function(m){if(this.isEnabled()){var A=m.deltaMode===i.window.WheelEvent.DOM_DELTA_LINE?40*m.deltaY:m.deltaY,g=i.browser.now(),S=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,A!==0&&A%4.000244140625==0?this._type="wheel":A!==0&&Math.abs(A)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=A,this._timeout=setTimeout(this._onTimeout,40,m)):this._type||(this._type=Math.abs(S*A)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,A+=this._lastValue)),m.shiftKey&&A&&(A/=4),this._type&&(this._lastWheelEvent=m,this._delta-=A,this._active||this._start(m)),m.preventDefault()}},Si.prototype._onTimeout=function(m){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},Si.prototype._start=function(m){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var A=o.mousePos(this._el,m);this._around=i.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(A)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Si.prototype.renderFrame=function(){var m=this;if(this._frameId&&(this._frameId=null,this.isActive())){var A=this._map.transform;if(this._delta!==0){var g=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,S=2/(1+Math.exp(-Math.abs(this._delta*g)));this._delta<0&&S!==0&&(S=1/S);var F=typeof this._targetZoom=="number"?A.zoomScale(this._targetZoom):A.scale;this._targetZoom=Math.min(A.maxZoom,Math.max(A.minZoom,A.scaleZoom(F*S))),this._type==="wheel"&&(this._startZoom=A.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var q,K=typeof this._targetZoom=="number"?this._targetZoom:A.zoom,ie=this._startZoom,fe=this._easing,_e=!1;if(this._type==="wheel"&&ie&&fe){var Re=Math.min((i.browser.now()-this._lastWheelEventTime)/200,1),Fe=fe(Re);q=i.number(ie,K,Fe),Re<1?this._frameId||(this._frameId=!0):_e=!0}else q=K,_e=!0;return this._active=!0,_e&&(this._active=!1,this._finishTimeout=setTimeout(function(){m._zooming=!1,m._handler._triggerRenderFrame(),delete m._targetZoom,delete m._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!_e,zoomDelta:q-A.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Si.prototype._smoothOutEasing=function(m){var A=i.ease;if(this._prevEase){var g=this._prevEase,S=(i.browser.now()-g.start)/g.duration,F=g.easing(S+.01)-g.easing(S),q=.27/Math.sqrt(F*F+1e-4)*.01,K=Math.sqrt(.0729-q*q);A=i.bezier(q,K,.25,1)}return this._prevEase={start:i.browser.now(),duration:m,easing:A},A},Si.prototype.blur=function(){this.reset()},Si.prototype.reset=function(){this._active=!1};var Nl=function(m,A){this._clickZoom=m,this._tapZoom=A};Nl.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Nl.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Nl.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Nl.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var rl=function(){this.reset()};rl.prototype.reset=function(){this._active=!1},rl.prototype.blur=function(){this.reset()},rl.prototype.dblclick=function(m,A){return m.preventDefault(),{cameraAnimation:function(g){g.easeTo({duration:300,zoom:g.getZoom()+(m.shiftKey?-1:1),around:g.unproject(A)},{originalEvent:m})}}},rl.prototype.enable=function(){this._enabled=!0},rl.prototype.disable=function(){this._enabled=!1,this.reset()},rl.prototype.isEnabled=function(){return this._enabled},rl.prototype.isActive=function(){return this._active};var gs=function(){this._tap=new Dn({numTouches:1,numTaps:1}),this.reset()};gs.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},gs.prototype.touchstart=function(m,A,g){this._swipePoint||(this._tapTime&&m.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=A[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(m,A,g))},gs.prototype.touchmove=function(m,A,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;var S=A[0],F=S.y-this._swipePoint.y;return this._swipePoint=S,m.preventDefault(),this._active=!0,{zoomDelta:F/128}}}else this._tap.touchmove(m,A,g)},gs.prototype.touchend=function(m,A,g){this._tapTime?this._swipePoint&&g.length===0&&this.reset():this._tap.touchend(m,A,g)&&(this._tapTime=m.timeStamp)},gs.prototype.touchcancel=function(){this.reset()},gs.prototype.enable=function(){this._enabled=!0},gs.prototype.disable=function(){this._enabled=!1,this.reset()},gs.prototype.isEnabled=function(){return this._enabled},gs.prototype.isActive=function(){return this._active};var sf=function(m,A,g){this._el=m,this._mousePan=A,this._touchPan=g};sf.prototype.enable=function(m){this._inertiaOptions=m||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},sf.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},sf.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},sf.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var qu=function(m,A,g){this._pitchWithRotate=m.pitchWithRotate,this._mouseRotate=A,this._mousePitch=g};qu.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},qu.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},qu.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},qu.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var _l=function(m,A,g,S){this._el=m,this._touchZoom=A,this._touchRotate=g,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0};_l.prototype.enable=function(m){this._touchZoom.enable(m),this._rotationDisabled||this._touchRotate.enable(m),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},_l.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},_l.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},_l.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},_l.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},_l.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var qs=function(m){return m.zoom||m.drag||m.pitch||m.rotate},Fh=function(m){function A(){m.apply(this,arguments)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A}(i.Event);function wn(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}var sn=function(m,A){this._map=m,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ar(m),this._bearingSnap=A.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(A),i.bindAll(["handleEvent","handleWindowEvent"],this);var g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[i.window.document,"mousemove",{capture:!0}],[i.window.document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[i.window,"blur",void 0]];for(var S=0,F=this._listeners;S<F.length;S+=1){var q=F[S],K=q[0];o.addEventListener(K,q[1],K===i.window.document?this.handleWindowEvent:this.handleEvent,q[2])}};sn.prototype.destroy=function(){for(var m=0,A=this._listeners;m<A.length;m+=1){var g=A[m],S=g[0];o.removeEventListener(S,g[1],S===i.window.document?this.handleWindowEvent:this.handleEvent,g[2])}},sn.prototype._addDefaultHandlers=function(m){var A=this._map,g=A.getCanvasContainer();this._add("mapEvent",new hn(A,m));var S=A.boxZoom=new Pn(A,m);this._add("boxZoom",S);var F=new ia,q=new rl;A.doubleClickZoom=new Nl(q,F),this._add("tapZoom",F),this._add("clickZoom",q);var K=new gs;this._add("tapDragZoom",K);var ie=A.touchPitch=new of;this._add("touchPitch",ie);var fe=new Dl(m),_e=new Fl(m);A.dragRotate=new qu(m,fe,_e),this._add("mouseRotate",fe,["mousePitch"]),this._add("mousePitch",_e,["mouseRotate"]);var Re=new da(m),Fe=new Ga(m);A.dragPan=new sf(g,Re,Fe),this._add("mousePan",Re),this._add("touchPan",Fe,["touchZoom","touchRotate"]);var Ne=new af,Je=new au;A.touchZoomRotate=new _l(g,Je,Ne,K),this._add("touchRotate",Ne,["touchPan","touchZoom"]),this._add("touchZoom",Je,["touchPan","touchRotate"]);var Ze=A.scrollZoom=new Si(A,this);this._add("scrollZoom",Ze,["mousePan"]);var ct=A.keyboard=new yl;this._add("keyboard",ct),this._add("blockableMapEvent",new ir(A));for(var Xe=0,st=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Xe<st.length;Xe+=1){var yt=st[Xe];m.interactive&&m[yt]&&A[yt].enable(m[yt])}},sn.prototype._add=function(m,A,g){this._handlers.push({handlerName:m,handler:A,allowed:g}),this._handlersById[m]=A},sn.prototype.stop=function(m){if(!this._updatingCamera){for(var A=0,g=this._handlers;A<g.length;A+=1)g[A].handler.reset();this._inertia.clear(),this._fireEvents({},{},m),this._changes=[]}},sn.prototype.isActive=function(){for(var m=0,A=this._handlers;m<A.length;m+=1)if(A[m].handler.isActive())return!0;return!1},sn.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},sn.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},sn.prototype.isMoving=function(){return Boolean(qs(this._eventsInProgress))||this.isZooming()},sn.prototype._blockedByActive=function(m,A,g){for(var S in m)if(S!==g&&(!A||A.indexOf(S)<0))return!0;return!1},sn.prototype.handleWindowEvent=function(m){this.handleEvent(m,m.type+"Window")},sn.prototype._getMapTouches=function(m){for(var A=[],g=0,S=m;g<S.length;g+=1){var F=S[g];this._el.contains(F.target)&&A.push(F)}return A},sn.prototype.handleEvent=function(m,A){this._updatingCamera=!0;for(var g=m.type==="renderFrame"?void 0:m,S={needsRenderFrame:!1},F={},q={},K=m.touches?this._getMapTouches(m.touches):void 0,ie=K?o.touchPos(this._el,K):o.mousePos(this._el,m),fe=0,_e=this._handlers;fe<_e.length;fe+=1){var Re=_e[fe],Fe=Re.handlerName,Ne=Re.handler,Je=Re.allowed;if(Ne.isEnabled()){var Ze=void 0;this._blockedByActive(q,Je,Fe)?Ne.reset():Ne[A||m.type]&&(Ze=Ne[A||m.type](m,ie,K),this.mergeHandlerResult(S,F,Ze,Fe,g),Ze&&Ze.needsRenderFrame&&this._triggerRenderFrame()),(Ze||Ne.isActive())&&(q[Fe]=Ne)}}var ct={};for(var Xe in this._previousActiveHandlers)q[Xe]||(ct[Xe]=g);this._previousActiveHandlers=q,(Object.keys(ct).length||wn(S))&&(this._changes.push([S,F,ct]),this._triggerRenderFrame()),(Object.keys(q).length||wn(S))&&this._map._stop(!0),this._updatingCamera=!1;var st=S.cameraAnimation;st&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],st(this._map))},sn.prototype.mergeHandlerResult=function(m,A,g,S,F){if(g){i.extend(m,g);var q={handlerName:S,originalEvent:g.originalEvent||F};g.zoomDelta!==void 0&&(A.zoom=q),g.panDelta!==void 0&&(A.drag=q),g.pitchDelta!==void 0&&(A.pitch=q),g.bearingDelta!==void 0&&(A.rotate=q)}},sn.prototype._applyChanges=function(){for(var m={},A={},g={},S=0,F=this._changes;S<F.length;S+=1){var q=F[S],K=q[0],ie=q[1],fe=q[2];K.panDelta&&(m.panDelta=(m.panDelta||new i.Point(0,0))._add(K.panDelta)),K.zoomDelta&&(m.zoomDelta=(m.zoomDelta||0)+K.zoomDelta),K.bearingDelta&&(m.bearingDelta=(m.bearingDelta||0)+K.bearingDelta),K.pitchDelta&&(m.pitchDelta=(m.pitchDelta||0)+K.pitchDelta),K.around!==void 0&&(m.around=K.around),K.pinchAround!==void 0&&(m.pinchAround=K.pinchAround),K.noInertia&&(m.noInertia=K.noInertia),i.extend(A,ie),i.extend(g,fe)}this._updateMapTransform(m,A,g),this._changes=[]},sn.prototype._updateMapTransform=function(m,A,g){var S=this._map,F=S.transform;if(!wn(m))return this._fireEvents(A,g,!0);var q=m.panDelta,K=m.zoomDelta,ie=m.bearingDelta,fe=m.pitchDelta,_e=m.around,Re=m.pinchAround;Re!==void 0&&(_e=Re),S._stop(!0),_e=_e||S.transform.centerPoint;var Fe=F.pointLocation(q?_e.sub(q):_e);ie&&(F.bearing+=ie),fe&&(F.pitch+=fe),K&&(F.zoom+=K),F.setLocationAtPoint(Fe,_e),this._map._update(),m.noInertia||this._inertia.record(m),this._fireEvents(A,g,!0)},sn.prototype._fireEvents=function(m,A,g){var S=this,F=qs(this._eventsInProgress),q=qs(m),K={};for(var ie in m)this._eventsInProgress[ie]||(K[ie+"start"]=m[ie].originalEvent),this._eventsInProgress[ie]=m[ie];for(var fe in!F&&q&&this._fireEvent("movestart",q.originalEvent),K)this._fireEvent(fe,K[fe]);for(var _e in q&&this._fireEvent("move",q.originalEvent),m)this._fireEvent(_e,m[_e].originalEvent);var Re,Fe={};for(var Ne in this._eventsInProgress){var Je=this._eventsInProgress[Ne],Ze=Je.handlerName,ct=Je.originalEvent;this._handlersById[Ze].isActive()||(delete this._eventsInProgress[Ne],Fe[Ne+"end"]=Re=A[Ze]||ct)}for(var Xe in Fe)this._fireEvent(Xe,Fe[Xe]);var st=qs(this._eventsInProgress);if(g&&(F||q)&&!st){this._updatingCamera=!0;var yt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Lt=function(Jt){return Jt!==0&&-S._bearingSnap<Jt&&Jt<S._bearingSnap};yt?(Lt(yt.bearing||this._map.getBearing())&&(yt.bearing=0),this._map.easeTo(yt,{originalEvent:Re})):(this._map.fire(new i.Event("moveend",{originalEvent:Re})),Lt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},sn.prototype._fireEvent=function(m,A){this._map.fire(new i.Event(m,A?{originalEvent:A}:{}))},sn.prototype._requestFrame=function(){var m=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(A){delete m._frameId,m.handleEvent(new Fh("renderFrame",{timeStamp:A})),m._applyChanges()})},sn.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Up=function(m){function A(g,S){m.call(this),this._moving=!1,this._zooming=!1,this.transform=g,this._bearingSnap=S.bearingSnap,i.bindAll(["_renderFrameCallback"],this)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.getCenter=function(){return new i.LngLat(this.transform.center.lng,this.transform.center.lat)},A.prototype.setCenter=function(g,S){return this.jumpTo({center:g},S)},A.prototype.panBy=function(g,S,F){return g=i.Point.convert(g).mult(-1),this.panTo(this.transform.center,i.extend({offset:g},S),F)},A.prototype.panTo=function(g,S,F){return this.easeTo(i.extend({center:g},S),F)},A.prototype.getZoom=function(){return this.transform.zoom},A.prototype.setZoom=function(g,S){return this.jumpTo({zoom:g},S),this},A.prototype.zoomTo=function(g,S,F){return this.easeTo(i.extend({zoom:g},S),F)},A.prototype.zoomIn=function(g,S){return this.zoomTo(this.getZoom()+1,g,S),this},A.prototype.zoomOut=function(g,S){return this.zoomTo(this.getZoom()-1,g,S),this},A.prototype.getBearing=function(){return this.transform.bearing},A.prototype.setBearing=function(g,S){return this.jumpTo({bearing:g},S),this},A.prototype.getPadding=function(){return this.transform.padding},A.prototype.setPadding=function(g,S){return this.jumpTo({padding:g},S),this},A.prototype.rotateTo=function(g,S,F){return this.easeTo(i.extend({bearing:g},S),F)},A.prototype.resetNorth=function(g,S){return this.rotateTo(0,i.extend({duration:1e3},g),S),this},A.prototype.resetNorthPitch=function(g,S){return this.easeTo(i.extend({bearing:0,pitch:0,duration:1e3},g),S),this},A.prototype.snapToNorth=function(g,S){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(g,S):this},A.prototype.getPitch=function(){return this.transform.pitch},A.prototype.setPitch=function(g,S){return this.jumpTo({pitch:g},S),this},A.prototype.cameraForBounds=function(g,S){g=i.LngLatBounds.convert(g);var F=S&&S.bearing||0;return this._cameraForBoxAndBearing(g.getNorthWest(),g.getSouthEast(),F,S)},A.prototype._cameraForBoxAndBearing=function(g,S,F,q){var K={top:0,bottom:0,right:0,left:0};if(typeof(q=i.extend({padding:K,offset:[0,0],maxZoom:this.transform.maxZoom},q)).padding=="number"){var ie=q.padding;q.padding={top:ie,bottom:ie,right:ie,left:ie}}q.padding=i.extend(K,q.padding);var fe=this.transform,_e=fe.padding,Re=fe.project(i.LngLat.convert(g)),Fe=fe.project(i.LngLat.convert(S)),Ne=Re.rotate(-F*Math.PI/180),Je=Fe.rotate(-F*Math.PI/180),Ze=new i.Point(Math.max(Ne.x,Je.x),Math.max(Ne.y,Je.y)),ct=new i.Point(Math.min(Ne.x,Je.x),Math.min(Ne.y,Je.y)),Xe=Ze.sub(ct),st=(fe.width-(_e.left+_e.right+q.padding.left+q.padding.right))/Xe.x,yt=(fe.height-(_e.top+_e.bottom+q.padding.top+q.padding.bottom))/Xe.y;if(!(yt<0||st<0)){var Lt=Math.min(fe.scaleZoom(fe.scale*Math.min(st,yt)),q.maxZoom),Jt=typeof q.offset.x=="number"?new i.Point(q.offset.x,q.offset.y):i.Point.convert(q.offset),Ht=new i.Point((q.padding.left-q.padding.right)/2,(q.padding.top-q.padding.bottom)/2).rotate(F*Math.PI/180),er=Jt.add(Ht).mult(fe.scale/fe.zoomScale(Lt));return{center:fe.unproject(Re.add(Fe).div(2).sub(er)),zoom:Lt,bearing:F}}i.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},A.prototype.fitBounds=function(g,S,F){return this._fitInternal(this.cameraForBounds(g,S),S,F)},A.prototype.fitScreenCoordinates=function(g,S,F,q,K){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(i.Point.convert(g)),this.transform.pointLocation(i.Point.convert(S)),F,q),q,K)},A.prototype._fitInternal=function(g,S,F){return g?(delete(S=i.extend(g,S)).padding,S.linear?this.easeTo(S,F):this.flyTo(S,F)):this},A.prototype.jumpTo=function(g,S){this.stop();var F=this.transform,q=!1,K=!1,ie=!1;return"zoom"in g&&F.zoom!==+g.zoom&&(q=!0,F.zoom=+g.zoom),g.center!==void 0&&(F.center=i.LngLat.convert(g.center)),"bearing"in g&&F.bearing!==+g.bearing&&(K=!0,F.bearing=+g.bearing),"pitch"in g&&F.pitch!==+g.pitch&&(ie=!0,F.pitch=+g.pitch),g.padding==null||F.isPaddingEqual(g.padding)||(F.padding=g.padding),this.fire(new i.Event("movestart",S)).fire(new i.Event("move",S)),q&&this.fire(new i.Event("zoomstart",S)).fire(new i.Event("zoom",S)).fire(new i.Event("zoomend",S)),K&&this.fire(new i.Event("rotatestart",S)).fire(new i.Event("rotate",S)).fire(new i.Event("rotateend",S)),ie&&this.fire(new i.Event("pitchstart",S)).fire(new i.Event("pitch",S)).fire(new i.Event("pitchend",S)),this.fire(new i.Event("moveend",S))},A.prototype.easeTo=function(g,S){var F=this;this._stop(!1,g.easeId),((g=i.extend({offset:[0,0],duration:500,easing:i.ease},g)).animate===!1||!g.essential&&i.browser.prefersReducedMotion)&&(g.duration=0);var q=this.transform,K=this.getZoom(),ie=this.getBearing(),fe=this.getPitch(),_e=this.getPadding(),Re="zoom"in g?+g.zoom:K,Fe="bearing"in g?this._normalizeBearing(g.bearing,ie):ie,Ne="pitch"in g?+g.pitch:fe,Je="padding"in g?g.padding:q.padding,Ze=i.Point.convert(g.offset),ct=q.centerPoint.add(Ze),Xe=q.pointLocation(ct),st=i.LngLat.convert(g.center||Xe);this._normalizeCenter(st);var yt,Lt,Jt=q.project(Xe),Ht=q.project(st).sub(Jt),er=q.zoomScale(Re-K);g.around&&(yt=i.LngLat.convert(g.around),Lt=q.locationPoint(yt));var pr={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Re!==K,this._rotating=this._rotating||ie!==Fe,this._pitching=this._pitching||Ne!==fe,this._padding=!q.isPaddingEqual(Je),this._easeId=g.easeId,this._prepareEase(S,g.noMoveStart,pr),this._ease(function(Sr){if(F._zooming&&(q.zoom=i.number(K,Re,Sr)),F._rotating&&(q.bearing=i.number(ie,Fe,Sr)),F._pitching&&(q.pitch=i.number(fe,Ne,Sr)),F._padding&&(q.interpolatePadding(_e,Je,Sr),ct=q.centerPoint.add(Ze)),yt)q.setLocationAtPoint(yt,Lt);else{var Tr=q.zoomScale(q.zoom-K),Xr=Re>K?Math.min(2,er):Math.max(.5,er),Tn=Math.pow(Xr,1-Sr),Ln=q.unproject(Jt.add(Ht.mult(Sr*Tn)).mult(Tr));q.setLocationAtPoint(q.renderWorldCopies?Ln.wrap():Ln,ct)}F._fireMoveEvents(S)},function(Sr){F._afterEase(S,Sr)},g),this},A.prototype._prepareEase=function(g,S,F){F===void 0&&(F={}),this._moving=!0,S||F.moving||this.fire(new i.Event("movestart",g)),this._zooming&&!F.zooming&&this.fire(new i.Event("zoomstart",g)),this._rotating&&!F.rotating&&this.fire(new i.Event("rotatestart",g)),this._pitching&&!F.pitching&&this.fire(new i.Event("pitchstart",g))},A.prototype._fireMoveEvents=function(g){this.fire(new i.Event("move",g)),this._zooming&&this.fire(new i.Event("zoom",g)),this._rotating&&this.fire(new i.Event("rotate",g)),this._pitching&&this.fire(new i.Event("pitch",g))},A.prototype._afterEase=function(g,S){if(!this._easeId||!S||this._easeId!==S){delete this._easeId;var F=this._zooming,q=this._rotating,K=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,F&&this.fire(new i.Event("zoomend",g)),q&&this.fire(new i.Event("rotateend",g)),K&&this.fire(new i.Event("pitchend",g)),this.fire(new i.Event("moveend",g))}},A.prototype.flyTo=function(g,S){var F=this;if(!g.essential&&i.browser.prefersReducedMotion){var q=i.pick(g,["center","zoom","bearing","pitch","around"]);return this.jumpTo(q,S)}this.stop(),g=i.extend({offset:[0,0],speed:1.2,curve:1.42,easing:i.ease},g);var K=this.transform,ie=this.getZoom(),fe=this.getBearing(),_e=this.getPitch(),Re=this.getPadding(),Fe="zoom"in g?i.clamp(+g.zoom,K.minZoom,K.maxZoom):ie,Ne="bearing"in g?this._normalizeBearing(g.bearing,fe):fe,Je="pitch"in g?+g.pitch:_e,Ze="padding"in g?g.padding:K.padding,ct=K.zoomScale(Fe-ie),Xe=i.Point.convert(g.offset),st=K.centerPoint.add(Xe),yt=K.pointLocation(st),Lt=i.LngLat.convert(g.center||yt);this._normalizeCenter(Lt);var Jt=K.project(yt),Ht=K.project(Lt).sub(Jt),er=g.curve,pr=Math.max(K.width,K.height),Sr=pr/ct,Tr=Ht.mag();if("minZoom"in g){var Xr=i.clamp(Math.min(g.minZoom,ie,Fe),K.minZoom,K.maxZoom),Tn=pr/K.zoomScale(Xr-ie);er=Math.sqrt(Tn/Tr*2)}var Ln=er*er;function In(Gn){var zn=(Sr*Sr-pr*pr+(Gn?-1:1)*Ln*Ln*Tr*Tr)/(2*(Gn?Sr:pr)*Ln*Tr);return Math.log(Math.sqrt(zn*zn+1)-zn)}function zi(Gn){return(Math.exp(Gn)-Math.exp(-Gn))/2}function $r(Gn){return(Math.exp(Gn)+Math.exp(-Gn))/2}var pn=In(0),li=function(Gn){return $r(pn)/$r(pn+er*Gn)},Kn=function(Gn){return pr*(($r(pn)*(zi(zn=pn+er*Gn)/$r(zn))-zi(pn))/Ln)/Tr;var zn},qn=(In(1)-pn)/er;if(Math.abs(Tr)<1e-6||!isFinite(qn)){if(Math.abs(pr-Sr)<1e-6)return this.easeTo(g,S);var ri=Sr<pr?-1:1;qn=Math.abs(Math.log(Sr/pr))/er,Kn=function(){return 0},li=function(Gn){return Math.exp(ri*er*Gn)}}return g.duration="duration"in g?+g.duration:1e3*qn/("screenSpeed"in g?+g.screenSpeed/er:+g.speed),g.maxDuration&&g.duration>g.maxDuration&&(g.duration=0),this._zooming=!0,this._rotating=fe!==Ne,this._pitching=Je!==_e,this._padding=!K.isPaddingEqual(Ze),this._prepareEase(S,!1),this._ease(function(Gn){var zn=Gn*qn,Do=1/li(zn);K.zoom=Gn===1?Fe:ie+K.scaleZoom(Do),F._rotating&&(K.bearing=i.number(fe,Ne,Gn)),F._pitching&&(K.pitch=i.number(_e,Je,Gn)),F._padding&&(K.interpolatePadding(Re,Ze,Gn),st=K.centerPoint.add(Xe));var mo=Gn===1?Lt:K.unproject(Jt.add(Ht.mult(Kn(zn))).mult(Do));K.setLocationAtPoint(K.renderWorldCopies?mo.wrap():mo,st),F._fireMoveEvents(S)},function(){return F._afterEase(S)},g),this},A.prototype.isEasing=function(){return!!this._easeFrameId},A.prototype.stop=function(){return this._stop()},A.prototype._stop=function(g,S){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var F=this._onEaseEnd;delete this._onEaseEnd,F.call(this,S)}if(!g){var q=this.handlers;q&&q.stop(!1)}return this},A.prototype._ease=function(g,S,F){F.animate===!1||F.duration===0?(g(1),S()):(this._easeStart=i.browser.now(),this._easeOptions=F,this._onEaseFrame=g,this._onEaseEnd=S,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},A.prototype._renderFrameCallback=function(){var g=Math.min((i.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},A.prototype._normalizeBearing=function(g,S){g=i.wrap(g,-180,180);var F=Math.abs(g-S);return Math.abs(g-360-S)<F&&(g-=360),Math.abs(g+360-S)<F&&(g+=360),g},A.prototype._normalizeCenter=function(g){var S=this.transform;if(S.renderWorldCopies&&!S.lngRange){var F=g.lng-S.center.lng;g.lng+=F>180?-360:F<-180?360:0}},A}(i.Evented),Xs=function(m){m===void 0&&(m={}),this.options=m,i.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Xs.prototype.getDefaultPosition=function(){return"bottom-right"},Xs.prototype.onAdd=function(m){var A=this.options&&this.options.compact;return this._map=m,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),A&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),A===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Xs.prototype.onRemove=function(){o.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Xs.prototype._setElementTitle=function(m,A){var g=this._map._getUIString("AttributionControl."+A);m.title=g,m.setAttribute("aria-label",g)},Xs.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Xs.prototype._updateEditLink=function(){var m=this._editLink;m||(m=this._editLink=this._container.querySelector(".mapbox-improve-map"));var A=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||i.config.ACCESS_TOKEN}];if(m){var g=A.reduce(function(S,F,q){return F.value&&(S+=F.key+"="+F.value+(q<A.length-1?"&":"")),S},"?");m.href=i.config.FEEDBACK_URL+"/"+g+(this._map._hash?this._map._hash.getHashString(!0):""),m.rel="noopener nofollow",this._setElementTitle(m,"MapFeedback")}},Xs.prototype._updateData=function(m){!m||m.sourceDataType!=="metadata"&&m.sourceDataType!=="visibility"&&m.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Xs.prototype._updateAttributions=function(){if(this._map.style){var m=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?m=m.concat(this.options.customAttribution.map(function(ie){return typeof ie!="string"?"":ie})):typeof this.options.customAttribution=="string"&&m.push(this.options.customAttribution)),this._map.style.stylesheet){var A=this._map.style.stylesheet;this.styleOwner=A.owner,this.styleId=A.id}var g=this._map.style.sourceCaches;for(var S in g){var F=g[S];if(F.used){var q=F.getSource();q.attribution&&m.indexOf(q.attribution)<0&&m.push(q.attribution)}}m.sort(function(ie,fe){return ie.length-fe.length});var K=(m=m.filter(function(ie,fe){for(var _e=fe+1;_e<m.length;_e++)if(m[_e].indexOf(ie)>=0)return!1;return!0})).join(" | ");K!==this._attribHTML&&(this._attribHTML=K,m.length?(this._innerContainer.innerHTML=K,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Xs.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var nl=function(){i.bindAll(["_updateLogo"],this),i.bindAll(["_updateCompact"],this)};nl.prototype.onAdd=function(m){this._map=m,this._container=o.create("div","mapboxgl-ctrl");var A=o.create("a","mapboxgl-ctrl-logo");return A.target="_blank",A.rel="noopener nofollow",A.href="https://www.mapbox.com/",A.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),A.setAttribute("rel","noopener nofollow"),this._container.appendChild(A),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},nl.prototype.onRemove=function(){o.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},nl.prototype.getDefaultPosition=function(){return"bottom-left"},nl.prototype._updateLogo=function(m){m&&m.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},nl.prototype._logoRequired=function(){if(this._map.style){var m=this._map.style.sourceCaches;for(var A in m)if(m[A].getSource().mapbox_logo)return!0;return!1}},nl.prototype._updateCompact=function(){var m=this._container.children;if(m.length){var A=m[0];this._map.getCanvasContainer().offsetWidth<250?A.classList.add("mapboxgl-compact"):A.classList.remove("mapboxgl-compact")}};var ts=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ts.prototype.add=function(m){var A=++this._id;return this._queue.push({callback:m,id:A,cancelled:!1}),A},ts.prototype.remove=function(m){for(var A=this._currentlyRunning,g=0,S=A?this._queue.concat(A):this._queue;g<S.length;g+=1){var F=S[g];if(F.id===m)return void(F.cancelled=!0)}},ts.prototype.run=function(m){m===void 0&&(m=0);var A=this._currentlyRunning=this._queue;this._queue=[];for(var g=0,S=A;g<S.length;g+=1){var F=S[g];if(!F.cancelled&&(F.callback(m),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ts.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var il={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},em=i.window.HTMLImageElement,Ms=i.window.HTMLElement,ei=i.window.ImageBitmap,rs={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Uv=function(m){function A(S){var F=this;if((S=i.extend({},rs,S)).minZoom!=null&&S.maxZoom!=null&&S.minZoom>S.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(S.minPitch!=null&&S.maxPitch!=null&&S.minPitch>S.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(S.minPitch!=null&&S.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(S.maxPitch!=null&&S.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var q=new ui(S.minZoom,S.maxZoom,S.minPitch,S.maxPitch,S.renderWorldCopies);if(m.call(this,q,S),this._interactive=S.interactive,this._maxTileCacheSize=S.maxTileCacheSize,this._failIfMajorPerformanceCaveat=S.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=S.preserveDrawingBuffer,this._antialias=S.antialias,this._trackResize=S.trackResize,this._bearingSnap=S.bearingSnap,this._refreshExpiredTiles=S.refreshExpiredTiles,this._fadeDuration=S.fadeDuration,this._crossSourceCollisions=S.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=S.collectResourceTiming,this._renderTaskQueue=new ts,this._controls=[],this._mapId=i.uniqueId(),this._locale=i.extend({},il,S.locale),this._clickTolerance=S.clickTolerance,this._requestManager=new i.RequestManager(S.transformRequest,S.accessToken),typeof S.container=="string"){if(this._container=i.window.document.getElementById(S.container),!this._container)throw new Error("Container '"+S.container+"' not found.")}else{if(!(S.container instanceof Ms))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=S.container}if(S.maxBounds&&this.setMaxBounds(S.maxBounds),i.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return F._update(!1)}),this.on("moveend",function(){return F._update(!1)}),this.on("zoom",function(){return F._update(!0)}),i.window!==void 0&&(i.window.addEventListener("online",this._onWindowOnline,!1),i.window.addEventListener("resize",this._onWindowResize,!1),i.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new sn(this,S),this._hash=S.hash&&new Qo(typeof S.hash=="string"&&S.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:S.center,zoom:S.zoom,bearing:S.bearing,pitch:S.pitch}),S.bounds&&(this.resize(),this.fitBounds(S.bounds,i.extend({},S.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=S.localIdeographFontFamily,S.style&&this.setStyle(S.style,{localIdeographFontFamily:S.localIdeographFontFamily}),S.attributionControl&&this.addControl(new Xs({customAttribution:S.customAttribution})),this.addControl(new nl,S.logoPosition),this.on("style.load",function(){F.transform.unmodified&&F.jumpTo(F.style.stylesheet)}),this.on("data",function(K){F._update(K.dataType==="style"),F.fire(new i.Event(K.dataType+"data",K))}),this.on("dataloading",function(K){F.fire(new i.Event(K.dataType+"dataloading",K))})}m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A;var g={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return A.prototype._getMapId=function(){return this._mapId},A.prototype.addControl=function(S,F){if(F===void 0&&(F=S.getDefaultPosition?S.getDefaultPosition():"top-right"),!S||!S.onAdd)return this.fire(new i.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var q=S.onAdd(this);this._controls.push(S);var K=this._controlPositions[F];return F.indexOf("bottom")!==-1?K.insertBefore(q,K.firstChild):K.appendChild(q),this},A.prototype.removeControl=function(S){if(!S||!S.onRemove)return this.fire(new i.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var F=this._controls.indexOf(S);return F>-1&&this._controls.splice(F,1),S.onRemove(this),this},A.prototype.hasControl=function(S){return this._controls.indexOf(S)>-1},A.prototype.resize=function(S){var F=this._containerDimensions(),q=F[0],K=F[1];if(q===this.transform.width&&K===this.transform.height)return this;this._resizeCanvas(q,K),this.transform.resize(q,K),this.painter.resize(q,K);var ie=!this._moving;return ie&&this.fire(new i.Event("movestart",S)).fire(new i.Event("move",S)),this.fire(new i.Event("resize",S)),ie&&this.fire(new i.Event("moveend",S)),this},A.prototype.getBounds=function(){return this.transform.getBounds()},A.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},A.prototype.setMaxBounds=function(S){return this.transform.setMaxBounds(i.LngLatBounds.convert(S)),this._update()},A.prototype.setMinZoom=function(S){if((S=S??-2)>=-2&&S<=this.transform.maxZoom)return this.transform.minZoom=S,this._update(),this.getZoom()<S&&this.setZoom(S),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},A.prototype.getMinZoom=function(){return this.transform.minZoom},A.prototype.setMaxZoom=function(S){if((S=S??22)>=this.transform.minZoom)return this.transform.maxZoom=S,this._update(),this.getZoom()>S&&this.setZoom(S),this;throw new Error("maxZoom must be greater than the current minZoom")},A.prototype.getMaxZoom=function(){return this.transform.maxZoom},A.prototype.setMinPitch=function(S){if((S=S??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(S>=0&&S<=this.transform.maxPitch)return this.transform.minPitch=S,this._update(),this.getPitch()<S&&this.setPitch(S),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},A.prototype.getMinPitch=function(){return this.transform.minPitch},A.prototype.setMaxPitch=function(S){if((S=S??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(S>=this.transform.minPitch)return this.transform.maxPitch=S,this._update(),this.getPitch()>S&&this.setPitch(S),this;throw new Error("maxPitch must be greater than the current minPitch")},A.prototype.getMaxPitch=function(){return this.transform.maxPitch},A.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},A.prototype.setRenderWorldCopies=function(S){return this.transform.renderWorldCopies=S,this._update()},A.prototype.project=function(S){return this.transform.locationPoint(i.LngLat.convert(S))},A.prototype.unproject=function(S){return this.transform.pointLocation(i.Point.convert(S))},A.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},A.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},A.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},A.prototype._createDelegatedListener=function(S,F,q){var K,ie=this;if(S==="mouseenter"||S==="mouseover"){var fe=!1;return{layer:F,listener:q,delegates:{mousemove:function(Re){var Fe=ie.getLayer(F)?ie.queryRenderedFeatures(Re.point,{layers:[F]}):[];Fe.length?fe||(fe=!0,q.call(ie,new ur(S,ie,Re.originalEvent,{features:Fe}))):fe=!1},mouseout:function(){fe=!1}}}}if(S==="mouseleave"||S==="mouseout"){var _e=!1;return{layer:F,listener:q,delegates:{mousemove:function(Re){(ie.getLayer(F)?ie.queryRenderedFeatures(Re.point,{layers:[F]}):[]).length?_e=!0:_e&&(_e=!1,q.call(ie,new ur(S,ie,Re.originalEvent)))},mouseout:function(Re){_e&&(_e=!1,q.call(ie,new ur(S,ie,Re.originalEvent)))}}}}return{layer:F,listener:q,delegates:(K={},K[S]=function(Re){var Fe=ie.getLayer(F)?ie.queryRenderedFeatures(Re.point,{layers:[F]}):[];Fe.length&&(Re.features=Fe,q.call(ie,Re),delete Re.features)},K)}},A.prototype.on=function(S,F,q){if(q===void 0)return m.prototype.on.call(this,S,F);var K=this._createDelegatedListener(S,F,q);for(var ie in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[S]=this._delegatedListeners[S]||[],this._delegatedListeners[S].push(K),K.delegates)this.on(ie,K.delegates[ie]);return this},A.prototype.once=function(S,F,q){if(q===void 0)return m.prototype.once.call(this,S,F);var K=this._createDelegatedListener(S,F,q);for(var ie in K.delegates)this.once(ie,K.delegates[ie]);return this},A.prototype.off=function(S,F,q){var K=this;return q===void 0?m.prototype.off.call(this,S,F):(this._delegatedListeners&&this._delegatedListeners[S]&&function(ie){for(var fe=ie[S],_e=0;_e<fe.length;_e++){var Re=fe[_e];if(Re.layer===F&&Re.listener===q){for(var Fe in Re.delegates)K.off(Fe,Re.delegates[Fe]);return fe.splice(_e,1),K}}}(this._delegatedListeners),this)},A.prototype.queryRenderedFeatures=function(S,F){if(!this.style)return[];var q;if(F!==void 0||S===void 0||S instanceof i.Point||Array.isArray(S)||(F=S,S=void 0),F=F||{},(S=S||[[0,0],[this.transform.width,this.transform.height]])instanceof i.Point||typeof S[0]=="number")q=[i.Point.convert(S)];else{var K=i.Point.convert(S[0]),ie=i.Point.convert(S[1]);q=[K,new i.Point(ie.x,K.y),ie,new i.Point(K.x,ie.y),K]}return this.style.queryRenderedFeatures(q,F,this.transform)},A.prototype.querySourceFeatures=function(S,F){return this.style.querySourceFeatures(S,F)},A.prototype.setStyle=function(S,F){return(F=i.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},F)).diff!==!1&&F.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&S?(this._diffStyle(S,F),this):(this._localIdeographFontFamily=F.localIdeographFontFamily,this._updateStyle(S,F))},A.prototype._getUIString=function(S){var F=this._locale[S];if(F==null)throw new Error("Missing UI string '"+S+"'");return F},A.prototype._updateStyle=function(S,F){return this.style&&(this.style.setEventedParent(null),this.style._remove()),S?(this.style=new ms(this,F||{}),this.style.setEventedParent(this,{style:this.style}),typeof S=="string"?this.style.loadURL(S):this.style.loadJSON(S),this):(delete this.style,this)},A.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ms(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},A.prototype._diffStyle=function(S,F){var q=this;if(typeof S=="string"){var K=this._requestManager.normalizeStyleURL(S),ie=this._requestManager.transformRequest(K,i.ResourceType.Style);i.getJSON(ie,function(fe,_e){fe?q.fire(new i.ErrorEvent(fe)):_e&&q._updateDiff(_e,F)})}else typeof S=="object"&&this._updateDiff(S,F)},A.prototype._updateDiff=function(S,F){try{this.style.setState(S)&&this._update(!0)}catch(q){i.warnOnce("Unable to perform style diff: "+(q.message||q.error||q)+".  Rebuilding the style from scratch."),this._updateStyle(S,F)}},A.prototype.getStyle=function(){if(this.style)return this.style.serialize()},A.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():i.warnOnce("There is no style added to the map.")},A.prototype.addSource=function(S,F){return this._lazyInitEmptyStyle(),this.style.addSource(S,F),this._update(!0)},A.prototype.isSourceLoaded=function(S){var F=this.style&&this.style.sourceCaches[S];if(F!==void 0)return F.loaded();this.fire(new i.ErrorEvent(new Error("There is no source with ID '"+S+"'")))},A.prototype.areTilesLoaded=function(){var S=this.style&&this.style.sourceCaches;for(var F in S){var q=S[F]._tiles;for(var K in q){var ie=q[K];if(ie.state!=="loaded"&&ie.state!=="errored")return!1}}return!0},A.prototype.addSourceType=function(S,F,q){return this._lazyInitEmptyStyle(),this.style.addSourceType(S,F,q)},A.prototype.removeSource=function(S){return this.style.removeSource(S),this._update(!0)},A.prototype.getSource=function(S){return this.style.getSource(S)},A.prototype.addImage=function(S,F,q){q===void 0&&(q={});var K=q.pixelRatio;K===void 0&&(K=1);var ie=q.sdf;ie===void 0&&(ie=!1);var fe=q.stretchX,_e=q.stretchY,Re=q.content;if(this._lazyInitEmptyStyle(),F instanceof em||ei&&F instanceof ei){var Fe=i.browser.getImageData(F);this.style.addImage(S,{data:new i.RGBAImage({width:Fe.width,height:Fe.height},Fe.data),pixelRatio:K,stretchX:fe,stretchY:_e,content:Re,sdf:ie,version:0})}else{if(F.width===void 0||F.height===void 0)return this.fire(new i.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Ne=F;this.style.addImage(S,{data:new i.RGBAImage({width:F.width,height:F.height},new Uint8Array(F.data)),pixelRatio:K,stretchX:fe,stretchY:_e,content:Re,sdf:ie,version:0,userImage:Ne}),Ne.onAdd&&Ne.onAdd(this,S)}},A.prototype.updateImage=function(S,F){var q=this.style.getImage(S);if(!q)return this.fire(new i.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var K=F instanceof em||ei&&F instanceof ei?i.browser.getImageData(F):F,ie=K.width,fe=K.height,_e=K.data;return ie===void 0||fe===void 0?this.fire(new i.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):ie!==q.data.width||fe!==q.data.height?this.fire(new i.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(q.data.replace(_e,!(F instanceof em||ei&&F instanceof ei)),void this.style.updateImage(S,q))},A.prototype.hasImage=function(S){return S?!!this.style.getImage(S):(this.fire(new i.ErrorEvent(new Error("Missing required image id"))),!1)},A.prototype.removeImage=function(S){this.style.removeImage(S)},A.prototype.loadImage=function(S,F){i.getImage(this._requestManager.transformRequest(S,i.ResourceType.Image),F)},A.prototype.listImages=function(){return this.style.listImages()},A.prototype.addLayer=function(S,F){return this._lazyInitEmptyStyle(),this.style.addLayer(S,F),this._update(!0)},A.prototype.moveLayer=function(S,F){return this.style.moveLayer(S,F),this._update(!0)},A.prototype.removeLayer=function(S){return this.style.removeLayer(S),this._update(!0)},A.prototype.getLayer=function(S){return this.style.getLayer(S)},A.prototype.setLayerZoomRange=function(S,F,q){return this.style.setLayerZoomRange(S,F,q),this._update(!0)},A.prototype.setFilter=function(S,F,q){return q===void 0&&(q={}),this.style.setFilter(S,F,q),this._update(!0)},A.prototype.getFilter=function(S){return this.style.getFilter(S)},A.prototype.setPaintProperty=function(S,F,q,K){return K===void 0&&(K={}),this.style.setPaintProperty(S,F,q,K),this._update(!0)},A.prototype.getPaintProperty=function(S,F){return this.style.getPaintProperty(S,F)},A.prototype.setLayoutProperty=function(S,F,q,K){return K===void 0&&(K={}),this.style.setLayoutProperty(S,F,q,K),this._update(!0)},A.prototype.getLayoutProperty=function(S,F){return this.style.getLayoutProperty(S,F)},A.prototype.setLight=function(S,F){return F===void 0&&(F={}),this._lazyInitEmptyStyle(),this.style.setLight(S,F),this._update(!0)},A.prototype.getLight=function(){return this.style.getLight()},A.prototype.setFeatureState=function(S,F){return this.style.setFeatureState(S,F),this._update()},A.prototype.removeFeatureState=function(S,F){return this.style.removeFeatureState(S,F),this._update()},A.prototype.getFeatureState=function(S){return this.style.getFeatureState(S)},A.prototype.getContainer=function(){return this._container},A.prototype.getCanvasContainer=function(){return this._canvasContainer},A.prototype.getCanvas=function(){return this._canvas},A.prototype._containerDimensions=function(){var S=0,F=0;return this._container&&(S=this._container.clientWidth||400,F=this._container.clientHeight||300),[S,F]},A.prototype._detectMissingCSS=function(){i.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&i.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},A.prototype._setupContainer=function(){var S=this._container;S.classList.add("mapboxgl-map"),(this._missingCSSCanary=o.create("div","mapboxgl-canary",S)).style.visibility="hidden",this._detectMissingCSS();var F=this._canvasContainer=o.create("div","mapboxgl-canvas-container",S);this._interactive&&F.classList.add("mapboxgl-interactive"),this._canvas=o.create("canvas","mapboxgl-canvas",F),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var q=this._containerDimensions();this._resizeCanvas(q[0],q[1]);var K=this._controlContainer=o.create("div","mapboxgl-control-container",S),ie=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(fe){ie[fe]=o.create("div","mapboxgl-ctrl-"+fe,K)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},A.prototype._resizeCanvas=function(S,F){var q=i.browser.devicePixelRatio||1;this._canvas.width=q*S,this._canvas.height=q*F,this._canvas.style.width=S+"px",this._canvas.style.height=F+"px"},A.prototype._setupPainter=function(){var S=i.extend({},a.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),F=this._canvas.getContext("webgl",S)||this._canvas.getContext("experimental-webgl",S);F?(this.painter=new ba(F,this.transform),i.webpSupported.testSupport(F)):this.fire(new i.ErrorEvent(new Error("Failed to initialize WebGL")))},A.prototype._contextLost=function(S){S.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new i.Event("webglcontextlost",{originalEvent:S}))},A.prototype._contextRestored=function(S){this._setupPainter(),this.resize(),this._update(),this.fire(new i.Event("webglcontextrestored",{originalEvent:S}))},A.prototype._onMapScroll=function(S){if(S.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},A.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},A.prototype._update=function(S){return this.style?(this._styleDirty=this._styleDirty||S,this._sourcesDirty=!0,this.triggerRepaint(),this):this},A.prototype._requestRenderFrame=function(S){return this._update(),this._renderTaskQueue.add(S)},A.prototype._cancelRenderFrame=function(S){this._renderTaskQueue.remove(S)},A.prototype._render=function(S){var F,q=this,K=0,ie=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(F=ie.createQueryEXT(),ie.beginQueryEXT(ie.TIME_ELAPSED_EXT,F),K=i.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(S),!this._removed){var fe=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var _e=this.transform.zoom,Re=i.browser.now();this.style.zoomHistory.update(_e,Re);var Fe=new i.EvaluationParameters(_e,{now:Re,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ne=Fe.crossFadingFactor();Ne===1&&Ne===this._crossFadingFactor||(fe=!0,this._crossFadingFactor=Ne),this.style.update(Fe)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new i.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new i.Event("load"))),this.style&&(this.style.hasTransitions()||fe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Je=i.browser.now()-K;ie.endQueryEXT(ie.TIME_ELAPSED_EXT,F),setTimeout(function(){var Xe=ie.getQueryObjectEXT(F,ie.QUERY_RESULT_EXT)/1e6;ie.deleteQueryEXT(F),q.fire(new i.Event("gpu-timing-frame",{cpuTime:Je,gpuTime:Xe}))},50)}if(this.listens("gpu-timing-layer")){var Ze=this.painter.collectGpuTimers();setTimeout(function(){var Xe=q.painter.queryGpuTimers(Ze);q.fire(new i.Event("gpu-timing-layer",{layerTimes:Xe}))},50)}var ct=this._sourcesDirty||this._styleDirty||this._placementDirty;return ct||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new i.Event("idle")),!this._loaded||this._fullyLoaded||ct||(this._fullyLoaded=!0),this}},A.prototype.remove=function(){this._hash&&this._hash.remove();for(var S=0,F=this._controls;S<F.length;S+=1)F[S].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),i.window!==void 0&&(i.window.removeEventListener("resize",this._onWindowResize,!1),i.window.removeEventListener("orientationchange",this._onWindowResize,!1),i.window.removeEventListener("online",this._onWindowOnline,!1));var q=this.painter.context.gl.getExtension("WEBGL_lose_context");q&&q.loseContext(),uf(this._canvasContainer),uf(this._controlContainer),uf(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new i.Event("remove"))},A.prototype.triggerRepaint=function(){var S=this;this.style&&!this._frame&&(this._frame=i.browser.frame(function(F){S._frame=null,S._render(F)}))},A.prototype._onWindowOnline=function(){this._update()},A.prototype._onWindowResize=function(S){this._trackResize&&this.resize({originalEvent:S})._update()},g.showTileBoundaries.get=function(){return!!this._showTileBoundaries},g.showTileBoundaries.set=function(S){this._showTileBoundaries!==S&&(this._showTileBoundaries=S,this._update())},g.showPadding.get=function(){return!!this._showPadding},g.showPadding.set=function(S){this._showPadding!==S&&(this._showPadding=S,this._update())},g.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},g.showCollisionBoxes.set=function(S){this._showCollisionBoxes!==S&&(this._showCollisionBoxes=S,S?this.style._generateCollisionBoxes():this._update())},g.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},g.showOverdrawInspector.set=function(S){this._showOverdrawInspector!==S&&(this._showOverdrawInspector=S,this._update())},g.repaint.get=function(){return!!this._repaint},g.repaint.set=function(S){this._repaint!==S&&(this._repaint=S,this.triggerRepaint())},g.vertices.get=function(){return!!this._vertices},g.vertices.set=function(S){this._vertices=S,this._update()},A.prototype._setCacheLimits=function(S,F){i.setCacheLimits(S,F)},g.version.get=function(){return i.version},Object.defineProperties(A.prototype,g),A}(Up);function uf(m){m.parentNode&&m.parentNode.removeChild(m)}var tm={showCompass:!0,showZoom:!0,visualizePitch:!1},sc=function(m){var A=this;this.options=i.extend({},tm,m),this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(g){return g.preventDefault()}),this.options.showZoom&&(i.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(g){return A._map.zoomIn({},{originalEvent:g})}),o.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(g){return A._map.zoomOut({},{originalEvent:g})}),o.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(i.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(g){A.options.visualizePitch?A._map.resetNorthPitch({},{originalEvent:g}):A._map.resetNorth({},{originalEvent:g})}),this._compassIcon=o.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};sc.prototype._updateZoomButtons=function(){var m=this._map.getZoom(),A=m===this._map.getMaxZoom(),g=m===this._map.getMinZoom();this._zoomInButton.disabled=A,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",A.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},sc.prototype._rotateCompassArrow=function(){var m=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=m},sc.prototype.onAdd=function(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Va(this._map,this._compass,this.options.visualizePitch)),this._container},sc.prototype.onRemove=function(){o.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},sc.prototype._createButton=function(m,A){var g=o.create("button",m,this._container);return g.type="button",g.addEventListener("click",A),g},sc.prototype._setButtonTitle=function(m,A){var g=this._map._getUIString("NavigationControl."+A);m.title=g,m.setAttribute("aria-label",g)};var Va=function(m,A,g){g===void 0&&(g=!1),this._clickTolerance=10,this.element=A,this.mouseRotate=new Dl({clickTolerance:m.dragRotate._mouseRotate._clickTolerance}),this.map=m,g&&(this.mousePitch=new Fl({clickTolerance:m.dragRotate._mousePitch._clickTolerance})),i.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),o.addEventListener(A,"mousedown",this.mousedown),o.addEventListener(A,"touchstart",this.touchstart,{passive:!1}),o.addEventListener(A,"touchmove",this.touchmove),o.addEventListener(A,"touchend",this.touchend),o.addEventListener(A,"touchcancel",this.reset)};function Oc(m,A,g){if(m=new i.LngLat(m.lng,m.lat),A){var S=new i.LngLat(m.lng-360,m.lat),F=new i.LngLat(m.lng+360,m.lat),q=g.locationPoint(m).distSqr(A);g.locationPoint(S).distSqr(A)<q?m=S:g.locationPoint(F).distSqr(A)<q&&(m=F)}for(;Math.abs(m.lng-g.center.lng)>180;){var K=g.locationPoint(m);if(K.x>=0&&K.y>=0&&K.x<=g.width&&K.y<=g.height)break;m.lng>g.center.lng?m.lng-=360:m.lng+=360}return m}Va.prototype.down=function(m,A){this.mouseRotate.mousedown(m,A),this.mousePitch&&this.mousePitch.mousedown(m,A),o.disableDrag()},Va.prototype.move=function(m,A){var g=this.map,S=this.mouseRotate.mousemoveWindow(m,A);if(S&&S.bearingDelta&&g.setBearing(g.getBearing()+S.bearingDelta),this.mousePitch){var F=this.mousePitch.mousemoveWindow(m,A);F&&F.pitchDelta&&g.setPitch(g.getPitch()+F.pitchDelta)}},Va.prototype.off=function(){var m=this.element;o.removeEventListener(m,"mousedown",this.mousedown),o.removeEventListener(m,"touchstart",this.touchstart,{passive:!1}),o.removeEventListener(m,"touchmove",this.touchmove),o.removeEventListener(m,"touchend",this.touchend),o.removeEventListener(m,"touchcancel",this.reset),this.offTemp()},Va.prototype.offTemp=function(){o.enableDrag(),o.removeEventListener(i.window,"mousemove",this.mousemove),o.removeEventListener(i.window,"mouseup",this.mouseup)},Va.prototype.mousedown=function(m){this.down(i.extend({},m,{ctrlKey:!0,preventDefault:function(){return m.preventDefault()}}),o.mousePos(this.element,m)),o.addEventListener(i.window,"mousemove",this.mousemove),o.addEventListener(i.window,"mouseup",this.mouseup)},Va.prototype.mousemove=function(m){this.move(m,o.mousePos(this.element,m))},Va.prototype.mouseup=function(m){this.mouseRotate.mouseupWindow(m),this.mousePitch&&this.mousePitch.mouseupWindow(m),this.offTemp()},Va.prototype.touchstart=function(m){m.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=o.touchPos(this.element,m.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return m.preventDefault()}},this._startPos))},Va.prototype.touchmove=function(m){m.targetTouches.length!==1?this.reset():(this._lastPos=o.touchPos(this.element,m.targetTouches)[0],this.move({preventDefault:function(){return m.preventDefault()}},this._lastPos))},Va.prototype.touchend=function(m){m.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Va.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Is={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function jp(m,A,g){var S=m.classList;for(var F in Is)S.remove("mapboxgl-"+g+"-anchor-"+F);S.add("mapboxgl-"+g+"-anchor-"+A)}var Mc,Nh=function(m){function A(g,S){if(m.call(this),(g instanceof i.window.HTMLElement||S)&&(g=i.extend({element:g},S)),i.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=g&&g.anchor||"center",this._color=g&&g.color||"#3FB1CE",this._scale=g&&g.scale||1,this._draggable=g&&g.draggable||!1,this._clickTolerance=g&&g.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=g&&g.rotation||0,this._rotationAlignment=g&&g.rotationAlignment||"auto",this._pitchAlignment=g&&g.pitchAlignment&&g.pitchAlignment!=="auto"?g.pitchAlignment:this._rotationAlignment,g&&g.element)this._element=g.element,this._offset=i.Point.convert(g&&g.offset||[0,0]);else{this._defaultMarker=!0,this._element=o.create("div"),this._element.setAttribute("aria-label","Map marker");var F=o.createNS("http://www.w3.org/2000/svg","svg");F.setAttributeNS(null,"display","block"),F.setAttributeNS(null,"height","41px"),F.setAttributeNS(null,"width","27px"),F.setAttributeNS(null,"viewBox","0 0 27 41");var q=o.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"stroke","none"),q.setAttributeNS(null,"stroke-width","1"),q.setAttributeNS(null,"fill","none"),q.setAttributeNS(null,"fill-rule","evenodd");var K=o.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"fill-rule","nonzero");var ie=o.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ie.setAttributeNS(null,"fill","#000000");for(var fe=0,_e=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];fe<_e.length;fe+=1){var Re=_e[fe],Fe=o.createNS("http://www.w3.org/2000/svg","ellipse");Fe.setAttributeNS(null,"opacity","0.04"),Fe.setAttributeNS(null,"cx","10.5"),Fe.setAttributeNS(null,"cy","5.80029008"),Fe.setAttributeNS(null,"rx",Re.rx),Fe.setAttributeNS(null,"ry",Re.ry),ie.appendChild(Fe)}var Ne=o.createNS("http://www.w3.org/2000/svg","g");Ne.setAttributeNS(null,"fill",this._color);var Je=o.createNS("http://www.w3.org/2000/svg","path");Je.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ne.appendChild(Je);var Ze=o.createNS("http://www.w3.org/2000/svg","g");Ze.setAttributeNS(null,"opacity","0.25"),Ze.setAttributeNS(null,"fill","#000000");var ct=o.createNS("http://www.w3.org/2000/svg","path");ct.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ze.appendChild(ct);var Xe=o.createNS("http://www.w3.org/2000/svg","g");Xe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Xe.setAttributeNS(null,"fill","#FFFFFF");var st=o.createNS("http://www.w3.org/2000/svg","g");st.setAttributeNS(null,"transform","translate(8.0, 8.0)");var yt=o.createNS("http://www.w3.org/2000/svg","circle");yt.setAttributeNS(null,"fill","#000000"),yt.setAttributeNS(null,"opacity","0.25"),yt.setAttributeNS(null,"cx","5.5"),yt.setAttributeNS(null,"cy","5.5"),yt.setAttributeNS(null,"r","5.4999962");var Lt=o.createNS("http://www.w3.org/2000/svg","circle");Lt.setAttributeNS(null,"fill","#FFFFFF"),Lt.setAttributeNS(null,"cx","5.5"),Lt.setAttributeNS(null,"cy","5.5"),Lt.setAttributeNS(null,"r","5.4999962"),st.appendChild(yt),st.appendChild(Lt),K.appendChild(ie),K.appendChild(Ne),K.appendChild(Ze),K.appendChild(Xe),K.appendChild(st),F.appendChild(K),F.setAttributeNS(null,"height",41*this._scale+"px"),F.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(F),this._offset=i.Point.convert(g&&g.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Jt){Jt.preventDefault()}),this._element.addEventListener("mousedown",function(Jt){Jt.preventDefault()}),jp(this._element,this._anchor,"marker"),this._popup=null}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.addTo=function(g){return this.remove(),this._map=g,g.getCanvasContainer().appendChild(this._element),g.on("move",this._update),g.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},A.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),o.remove(this._element),this._popup&&this._popup.remove(),this},A.prototype.getLngLat=function(){return this._lngLat},A.prototype.setLngLat=function(g){return this._lngLat=i.LngLat.convert(g),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},A.prototype.getElement=function(){return this._element},A.prototype.setPopup=function(g){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),g){if(!("offset"in g.options)){var S=Math.sqrt(Math.pow(13.5,2)/2);g.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(24.6+S)],"bottom-right":[-S,-1*(24.6+S)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=g,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},A.prototype._onKeyPress=function(g){var S=g.code,F=g.charCode||g.keyCode;S!=="Space"&&S!=="Enter"&&F!==32&&F!==13||this.togglePopup()},A.prototype._onMapClick=function(g){var S=g.originalEvent.target,F=this._element;this._popup&&(S===F||F.contains(S))&&this.togglePopup()},A.prototype.getPopup=function(){return this._popup},A.prototype.togglePopup=function(){var g=this._popup;return g?(g.isOpen()?g.remove():g.addTo(this._map),this):this},A.prototype._update=function(g){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Oc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var S="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?S="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(S="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var F="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?F="rotateX(0deg)":this._pitchAlignment==="map"&&(F="rotateX("+this._map.getPitch()+"deg)"),g&&g.type!=="moveend"||(this._pos=this._pos.round()),o.setTransform(this._element,Is[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+F+" "+S)}},A.prototype.getOffset=function(){return this._offset},A.prototype.setOffset=function(g){return this._offset=i.Point.convert(g),this._update(),this},A.prototype._onMove=function(g){if(!this._isDragging){var S=this._clickTolerance||this._map._clickTolerance;this._isDragging=g.point.dist(this._pointerdownPos)>=S}this._isDragging&&(this._pos=g.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.Event("dragstart"))),this.fire(new i.Event("drag")))},A.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new i.Event("dragend")),this._state="inactive"},A.prototype._addDragHandler=function(g){this._element.contains(g.originalEvent.target)&&(g.preventDefault(),this._positionDelta=g.point.sub(this._pos).add(this._offset),this._pointerdownPos=g.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},A.prototype.setDraggable=function(g){return this._draggable=!!g,this._map&&(g?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},A.prototype.isDraggable=function(){return this._draggable},A.prototype.setRotation=function(g){return this._rotation=g||0,this._update(),this},A.prototype.getRotation=function(){return this._rotation},A.prototype.setRotationAlignment=function(g){return this._rotationAlignment=g||"auto",this._update(),this},A.prototype.getRotationAlignment=function(){return this._rotationAlignment},A.prototype.setPitchAlignment=function(g){return this._pitchAlignment=g&&g!=="auto"?g:this._rotationAlignment,this._update(),this},A.prototype.getPitchAlignment=function(){return this._pitchAlignment},A}(i.Evented),xu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},lf=0,uc=!1,cf=function(m){function A(g){m.call(this),this.options=i.extend({},xu,g),i.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.onAdd=function(g){var S;return this._map=g,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),S=this._setupUI,Mc!==void 0?S(Mc):i.window.navigator.permissions!==void 0?i.window.navigator.permissions.query({name:"geolocation"}).then(function(F){S(Mc=F.state!=="denied")}):S(Mc=!!i.window.navigator.geolocation),this._container},A.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(i.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),o.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,lf=0,uc=!1},A.prototype._isOutOfMapMaxBounds=function(g){var S=this._map.getMaxBounds(),F=g.coords;return S&&(F.longitude<S.getWest()||F.longitude>S.getEast()||F.latitude<S.getSouth()||F.latitude>S.getNorth())},A.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},A.prototype._onSuccess=function(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new i.Event("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(g),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(g),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("geolocate",g)),this._finish()}},A.prototype._updateCamera=function(g){var S=new i.LngLat(g.coords.longitude,g.coords.latitude),F=g.coords.accuracy,q=this._map.getBearing(),K=i.extend({bearing:q},this.options.fitBoundsOptions);this._map.fitBounds(S.toBounds(F),K,{geolocateSource:!0})},A.prototype._updateMarker=function(g){if(g){var S=new i.LngLat(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(S).addTo(this._map),this._userLocationDotMarker.setLngLat(S).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},A.prototype._updateCircleRadius=function(){var g=this._map._container.clientHeight/2,S=this._map.unproject([0,g]),F=this._map.unproject([1,g]),q=S.distanceTo(F),K=Math.ceil(2*this._accuracy/q);this._circleElement.style.width=K+"px",this._circleElement.style.height=K+"px"},A.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},A.prototype._onError=function(g){if(this._map){if(this.options.trackUserLocation)if(g.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var S=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=S,this._geolocateButton.setAttribute("aria-label",S),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(g.code===3&&uc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("error",g)),this._finish()}},A.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},A.prototype._setupUI=function(g){var S=this;if(this._container.addEventListener("contextmenu",function(K){return K.preventDefault()}),this._geolocateButton=o.create("button","mapboxgl-ctrl-geolocate",this._container),o.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",g===!1){i.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var F=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=F,this._geolocateButton.setAttribute("aria-label",F)}else{var q=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=q,this._geolocateButton.setAttribute("aria-label",q)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Nh(this._dotElement),this._circleElement=o.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Nh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(K){K.geolocateSource||S._watchState!=="ACTIVE_LOCK"||K.originalEvent&&K.originalEvent.type==="resize"||(S._watchState="BACKGROUND",S._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),S._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),S.fire(new i.Event("trackuserlocationend")))})},A.prototype.trigger=function(){if(!this._setup)return i.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":lf--,uc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new i.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var g;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++lf>1?(g={maximumAge:6e5,timeout:0},uc=!0):(g=this.options.positionOptions,uc=!1),this._geolocationWatchID=i.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else i.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},A.prototype._clearWatch=function(){i.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},A}(i.Evented),wu={maxWidth:100,unit:"metric"},Tu=function(m){this.options=i.extend({},wu,m),i.bindAll(["_onMove","setUnit"],this)};function Gp(m,A,g){var S=g&&g.maxWidth||100,F=m._container.clientHeight/2,q=m.unproject([0,F]),K=m.unproject([S,F]),ie=q.distanceTo(K);if(g&&g.unit==="imperial"){var fe=3.2808*ie;fe>5280?lc(A,S,fe/5280,m._getUIString("ScaleControl.Miles")):lc(A,S,fe,m._getUIString("ScaleControl.Feet"))}else g&&g.unit==="nautical"?lc(A,S,ie/1852,m._getUIString("ScaleControl.NauticalMiles")):ie>=1e3?lc(A,S,ie/1e3,m._getUIString("ScaleControl.Kilometers")):lc(A,S,ie,m._getUIString("ScaleControl.Meters"))}function lc(m,A,g,S){var F,q,K,ie=(F=g,(q=Math.pow(10,(""+Math.floor(F)).length-1))*(K=(K=F/q)>=10?10:K>=5?5:K>=3?3:K>=2?2:K>=1?1:function(fe){var _e=Math.pow(10,Math.ceil(-Math.log(fe)/Math.LN10));return Math.round(fe*_e)/_e}(K)));m.style.width=A*(ie/g)+"px",m.innerHTML=ie+"&nbsp;"+S}Tu.prototype.getDefaultPosition=function(){return"bottom-left"},Tu.prototype._onMove=function(){Gp(this._map,this._container,this.options)},Tu.prototype.onAdd=function(m){return this._map=m,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Tu.prototype.onRemove=function(){o.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Tu.prototype.setUnit=function(m){this.options.unit=m,Gp(this._map,this._container,this.options)};var al=function(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof i.window.HTMLElement?this._container=m.container:i.warnOnce("Full screen control 'container' must be a DOM element.")),i.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in i.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in i.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in i.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in i.window.document&&(this._fullscreenchange="MSFullscreenChange")};al.prototype.onAdd=function(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",i.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},al.prototype.onRemove=function(){o.remove(this._controlContainer),this._map=null,i.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},al.prototype._checkFullscreenSupport=function(){return!!(i.window.document.fullscreenEnabled||i.window.document.mozFullScreenEnabled||i.window.document.msFullscreenEnabled||i.window.document.webkitFullscreenEnabled)},al.prototype._setupUI=function(){var m=this._fullscreenButton=o.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);o.create("span","mapboxgl-ctrl-icon",m).setAttribute("aria-hidden",!0),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),i.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},al.prototype._updateTitle=function(){var m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.title=m},al.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},al.prototype._isFullscreen=function(){return this._fullscreen},al.prototype._changeIcon=function(){(i.window.document.fullscreenElement||i.window.document.mozFullScreenElement||i.window.document.webkitFullscreenElement||i.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},al.prototype._onClickFullscreen=function(){this._isFullscreen()?i.window.document.exitFullscreen?i.window.document.exitFullscreen():i.window.document.mozCancelFullScreen?i.window.document.mozCancelFullScreen():i.window.document.msExitFullscreen?i.window.document.msExitFullscreen():i.window.document.webkitCancelFullScreen&&i.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var zh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},zf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),rm=function(m){function A(g){m.call(this),this.options=i.extend(Object.create(zh),g),i.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return m&&(A.__proto__=m),(A.prototype=Object.create(m&&m.prototype)).constructor=A,A.prototype.addTo=function(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new i.Event("open")),this},A.prototype.isOpen=function(){return!!this._map},A.prototype.remove=function(){return this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new i.Event("close")),this},A.prototype.getLngLat=function(){return this._lngLat},A.prototype.setLngLat=function(g){return this._lngLat=i.LngLat.convert(g),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},A.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},A.prototype.getElement=function(){return this._container},A.prototype.setText=function(g){return this.setDOMContent(i.window.document.createTextNode(g))},A.prototype.setHTML=function(g){var S,F=i.window.document.createDocumentFragment(),q=i.window.document.createElement("body");for(q.innerHTML=g;S=q.firstChild;)F.appendChild(S);return this.setDOMContent(F)},A.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},A.prototype.setMaxWidth=function(g){return this.options.maxWidth=g,this._update(),this},A.prototype.setDOMContent=function(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=o.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this},A.prototype.addClassName=function(g){this._container&&this._container.classList.add(g)},A.prototype.removeClassName=function(g){this._container&&this._container.classList.remove(g)},A.prototype.setOffset=function(g){return this.options.offset=g,this._update(),this},A.prototype.toggleClassName=function(g){if(this._container)return this._container.classList.toggle(g)},A.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=o.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},A.prototype._onMouseUp=function(g){this._update(g.point)},A.prototype._onMouseMove=function(g){this._update(g.point)},A.prototype._onDrag=function(g){this._update(g.point)},A.prototype._update=function(g){var S=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=o.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Fe){return S._container.classList.add(Fe)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Oc(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||g)){var F=this._pos=this._trackPointer&&g?g:this._map.project(this._lngLat),q=this.options.anchor,K=function Fe(Ne){if(Ne){if(typeof Ne=="number"){var Je=Math.round(Math.sqrt(.5*Math.pow(Ne,2)));return{center:new i.Point(0,0),top:new i.Point(0,Ne),"top-left":new i.Point(Je,Je),"top-right":new i.Point(-Je,Je),bottom:new i.Point(0,-Ne),"bottom-left":new i.Point(Je,-Je),"bottom-right":new i.Point(-Je,-Je),left:new i.Point(Ne,0),right:new i.Point(-Ne,0)}}if(Ne instanceof i.Point||Array.isArray(Ne)){var Ze=i.Point.convert(Ne);return{center:Ze,top:Ze,"top-left":Ze,"top-right":Ze,bottom:Ze,"bottom-left":Ze,"bottom-right":Ze,left:Ze,right:Ze}}return{center:i.Point.convert(Ne.center||[0,0]),top:i.Point.convert(Ne.top||[0,0]),"top-left":i.Point.convert(Ne["top-left"]||[0,0]),"top-right":i.Point.convert(Ne["top-right"]||[0,0]),bottom:i.Point.convert(Ne.bottom||[0,0]),"bottom-left":i.Point.convert(Ne["bottom-left"]||[0,0]),"bottom-right":i.Point.convert(Ne["bottom-right"]||[0,0]),left:i.Point.convert(Ne.left||[0,0]),right:i.Point.convert(Ne.right||[0,0])}}return Fe(new i.Point(0,0))}(this.options.offset);if(!q){var ie,fe=this._container.offsetWidth,_e=this._container.offsetHeight;ie=F.y+K.bottom.y<_e?["top"]:F.y>this._map.transform.height-_e?["bottom"]:[],F.x<fe/2?ie.push("left"):F.x>this._map.transform.width-fe/2&&ie.push("right"),q=ie.length===0?"bottom":ie.join("-")}var Re=F.add(K[q]).round();o.setTransform(this._container,Is[q]+" translate("+Re.x+"px,"+Re.y+"px)"),jp(this._container,q,"popup")}},A.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var g=this._container.querySelector(zf);g&&g.focus()}},A.prototype._onClose=function(){this.remove()},A}(i.Evented),Vp={version:i.version,supported:a,setRTLTextPlugin:i.setRTLTextPlugin,getRTLTextPluginStatus:i.getRTLTextPluginStatus,Map:Uv,NavigationControl:sc,GeolocateControl:cf,AttributionControl:Xs,ScaleControl:Tu,FullscreenControl:al,Popup:rm,Marker:Nh,Style:ms,LngLat:i.LngLat,LngLatBounds:i.LngLatBounds,Point:i.Point,MercatorCoordinate:i.MercatorCoordinate,Evented:i.Evented,config:i.config,prewarm:function(){qt().acquire($t)},clearPrewarmedResources:function(){var m=Kr;m&&(m.isPreloaded()&&m.numActive()===1?(m.release($t),Kr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return i.config.ACCESS_TOKEN},set accessToken(m){i.config.ACCESS_TOKEN=m},get baseApiUrl(){return i.config.API_URL},set baseApiUrl(m){i.config.API_URL=m},get workerCount(){return lr.workerCount},set workerCount(m){lr.workerCount=m},get maxParallelImageRequests(){return i.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){i.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage:function(m){i.clearTileCache(m)},workerUrl:""};return Vp}),e})});var I5=mr((_st,s2)=>{(function(t,r,e,n){"use strict";var i=["","webkit","Moz","MS","ms","o"],a=r.createElement("div"),o="function",s=Math.round,u=Math.abs,c=Date.now;function h(Me,Ve,it){return setTimeout(W(Me,it),Ve)}function p(Me,Ve,it){return Array.isArray(Me)?(v(Me,it[Ve],it),!0):!1}function v(Me,Ve,it){var Xt;if(Me)if(Me.forEach)Me.forEach(Ve,it);else if(Me.length!==n)for(Xt=0;Xt<Me.length;)Ve.call(it,Me[Xt],Xt,Me),Xt++;else for(Xt in Me)Me.hasOwnProperty(Xt)&&Ve.call(it,Me[Xt],Xt,Me)}function x(Me,Ve,it){var Xt="DEPRECATED METHOD: "+Ve+`
`+it+` AT 
`;return function(){var br=new Error("get-stack-trace"),cn=br&&br.stack?br.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Ai=t.console&&(t.console.warn||t.console.log);return Ai&&Ai.call(t.console,Xt,cn),Me.apply(this,arguments)}}var E;typeof Object.assign!="function"?E=function(Ve){if(Ve===n||Ve===null)throw new TypeError("Cannot convert undefined or null to object");for(var it=Object(Ve),Xt=1;Xt<arguments.length;Xt++){var br=arguments[Xt];if(br!==n&&br!==null)for(var cn in br)br.hasOwnProperty(cn)&&(it[cn]=br[cn])}return it}:E=Object.assign;var R=x(function(Ve,it,Xt){for(var br=Object.keys(it),cn=0;cn<br.length;)(!Xt||Xt&&Ve[br[cn]]===n)&&(Ve[br[cn]]=it[br[cn]]),cn++;return Ve},"extend","Use `assign`."),D=x(function(Ve,it){return R(Ve,it,!0)},"merge","Use `assign`.");function H(Me,Ve,it){var Xt=Ve.prototype,br;br=Me.prototype=Object.create(Xt),br.constructor=Me,br._super=Xt,it&&E(br,it)}function W(Me,Ve){return function(){return Me.apply(Ve,arguments)}}function $(Me,Ve){return typeof Me==o?Me.apply(Ve&&Ve[0]||n,Ve):Me}function J(Me,Ve){return Me===n?Ve:Me}function B(Me,Ve,it){v(I(Ve),function(Xt){Me.addEventListener(Xt,it,!1)})}function se(Me,Ve,it){v(I(Ve),function(Xt){Me.removeEventListener(Xt,it,!1)})}function V(Me,Ve){for(;Me;){if(Me==Ve)return!0;Me=Me.parentNode}return!1}function X(Me,Ve){return Me.indexOf(Ve)>-1}function I(Me){return Me.trim().split(/\s+/g)}function O(Me,Ve,it){if(Me.indexOf&&!it)return Me.indexOf(Ve);for(var Xt=0;Xt<Me.length;){if(it&&Me[Xt][it]==Ve||!it&&Me[Xt]===Ve)return Xt;Xt++}return-1}function U(Me){return Array.prototype.slice.call(Me,0)}function re(Me,Ve,it){for(var Xt=[],br=[],cn=0;cn<Me.length;){var Ai=Ve?Me[cn][Ve]:Me[cn];O(br,Ai)<0&&Xt.push(Me[cn]),br[cn]=Ai,cn++}return it&&(Ve?Xt=Xt.sort(function(po,Wo){return po[Ve]>Wo[Ve]}):Xt=Xt.sort()),Xt}function ee(Me,Ve){for(var it,Xt,br=Ve[0].toUpperCase()+Ve.slice(1),cn=0;cn<i.length;){if(it=i[cn],Xt=it?it+br:Ve,Xt in Me)return Xt;cn++}return n}var pe=1;function je(){return pe++}function qe(Me){var Ve=Me.ownerDocument||Me;return Ve.defaultView||Ve.parentWindow||t}var We=/mobile|tablet|ip(ad|hone|od)|android/i,ot="ontouchstart"in t,gt=ee(t,"PointerEvent")!==n,Pt=ot&&We.test(navigator.userAgent),Dt="touch",nr="pen",Nt="mouse",Ut="kinect",Or=25,he=1,xe=2,Ge=4,bt=8,Kt=1,Gt=2,tn=4,an=8,Fn=16,wr=Gt|tn,Nn=an|Fn,pi=wr|Nn,Ti=["x","y"],ka=["clientX","clientY"];function si(Me,Ve){var it=this;this.manager=Me,this.callback=Ve,this.element=Me.element,this.target=Me.options.inputTarget,this.domHandler=function(Xt){$(Me.options.enable,[Me])&&it.handler(Xt)},this.init()}si.prototype={handler:function(){},init:function(){this.evEl&&B(this.element,this.evEl,this.domHandler),this.evTarget&&B(this.target,this.evTarget,this.domHandler),this.evWin&&B(qe(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&se(this.element,this.evEl,this.domHandler),this.evTarget&&se(this.target,this.evTarget,this.domHandler),this.evWin&&se(qe(this.element),this.evWin,this.domHandler)}};function Hn(Me){var Ve,it=Me.options.inputClass;return it?Ve=it:gt?Ve=yu:Pt?Ve=At:ot?Ve=cr:Ve=fs,new Ve(Me,Di)}function Di(Me,Ve,it){var Xt=it.pointers.length,br=it.changedPointers.length,cn=Ve&he&&Xt-br===0,Ai=Ve&(Ge|bt)&&Xt-br===0;it.isFirst=!!cn,it.isFinal=!!Ai,cn&&(Me.session={}),it.eventType=Ve,Yi(Me,it),Me.emit("hammer.input",it),Me.recognize(it),Me.session.prevInput=it}function Yi(Me,Ve){var it=Me.session,Xt=Ve.pointers,br=Xt.length;it.firstInput||(it.firstInput=Jr(Ve)),br>1&&!it.firstMultiple?it.firstMultiple=Jr(Ve):br===1&&(it.firstMultiple=!1);var cn=it.firstInput,Ai=it.firstMultiple,xo=Ai?Ai.center:cn.center,po=Ve.center=Br(Xt);Ve.timeStamp=c(),Ve.deltaTime=Ve.timeStamp-cn.timeStamp,Ve.angle=_a(xo,po),Ve.distance=Ua(xo,po),di(it,Ve),Ve.offsetDirection=Li(Ve.deltaX,Ve.deltaY);var Wo=Gi(Ve.deltaTime,Ve.deltaX,Ve.deltaY);Ve.overallVelocityX=Wo.x,Ve.overallVelocityY=Wo.y,Ve.overallVelocity=u(Wo.x)>u(Wo.y)?Wo.x:Wo.y,Ve.scale=Ai?Ka(Ai.pointers,Xt):1,Ve.rotation=Ai?Bo(Ai.pointers,Xt):0,Ve.maxPointers=it.prevInput?Ve.pointers.length>it.prevInput.maxPointers?Ve.pointers.length:it.prevInput.maxPointers:Ve.pointers.length,jr(it,Ve);var ds=Me.element;V(Ve.srcEvent.target,ds)&&(ds=Ve.srcEvent.target),Ve.target=ds}function di(Me,Ve){var it=Ve.center,Xt=Me.offsetDelta||{},br=Me.prevDelta||{},cn=Me.prevInput||{};(Ve.eventType===he||cn.eventType===Ge)&&(br=Me.prevDelta={x:cn.deltaX||0,y:cn.deltaY||0},Xt=Me.offsetDelta={x:it.x,y:it.y}),Ve.deltaX=br.x+(it.x-Xt.x),Ve.deltaY=br.y+(it.y-Xt.y)}function jr(Me,Ve){var it=Me.lastInterval||Ve,Xt=Ve.timeStamp-it.timeStamp,br,cn,Ai,xo;if(Ve.eventType!=bt&&(Xt>Or||it.velocity===n)){var po=Ve.deltaX-it.deltaX,Wo=Ve.deltaY-it.deltaY,ds=Gi(Xt,po,Wo);cn=ds.x,Ai=ds.y,br=u(ds.x)>u(ds.y)?ds.x:ds.y,xo=Li(po,Wo),Me.lastInterval=Ve}else br=it.velocity,cn=it.velocityX,Ai=it.velocityY,xo=it.direction;Ve.velocity=br,Ve.velocityX=cn,Ve.velocityY=Ai,Ve.direction=xo}function Jr(Me){for(var Ve=[],it=0;it<Me.pointers.length;)Ve[it]={clientX:s(Me.pointers[it].clientX),clientY:s(Me.pointers[it].clientY)},it++;return{timeStamp:c(),pointers:Ve,center:Br(Ve),deltaX:Me.deltaX,deltaY:Me.deltaY}}function Br(Me){var Ve=Me.length;if(Ve===1)return{x:s(Me[0].clientX),y:s(Me[0].clientY)};for(var it=0,Xt=0,br=0;br<Ve;)it+=Me[br].clientX,Xt+=Me[br].clientY,br++;return{x:s(it/Ve),y:s(Xt/Ve)}}function Gi(Me,Ve,it){return{x:Ve/Me||0,y:it/Me||0}}function Li(Me,Ve){return Me===Ve?Kt:u(Me)>=u(Ve)?Me<0?Gt:tn:Ve<0?an:Fn}function Ua(Me,Ve,it){it||(it=Ti);var Xt=Ve[it[0]]-Me[it[0]],br=Ve[it[1]]-Me[it[1]];return Math.sqrt(Xt*Xt+br*br)}function _a(Me,Ve,it){it||(it=Ti);var Xt=Ve[it[0]]-Me[it[0]],br=Ve[it[1]]-Me[it[1]];return Math.atan2(br,Xt)*180/Math.PI}function Bo(Me,Ve){return _a(Ve[1],Ve[0],ka)+_a(Me[1],Me[0],ka)}function Ka(Me,Ve){return Ua(Ve[0],Ve[1],ka)/Ua(Me[0],Me[1],ka)}var Qs={mousedown:he,mousemove:xe,mouseup:Ge},co="mousedown",fo="mousemove mouseup";function fs(){this.evEl=co,this.evWin=fo,this.pressed=!1,si.apply(this,arguments)}H(fs,si,{handler:function(Ve){var it=Qs[Ve.type];it&he&&Ve.button===0&&(this.pressed=!0),it&xe&&Ve.which!==1&&(it=Ge),this.pressed&&(it&Ge&&(this.pressed=!1),this.callback(this.manager,it,{pointers:[Ve],changedPointers:[Ve],pointerType:Nt,srcEvent:Ve}))}});var gu={pointerdown:he,pointermove:xe,pointerup:Ge,pointercancel:bt,pointerout:bt},Hs={2:Dt,3:nr,4:Nt,5:Ut},Ss="pointerdown",Au="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Ss="MSPointerDown",Au="MSPointerMove MSPointerUp MSPointerCancel");function yu(){this.evEl=Ss,this.evWin=Au,si.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}H(yu,si,{handler:function(Ve){var it=this.store,Xt=!1,br=Ve.type.toLowerCase().replace("ms",""),cn=gu[br],Ai=Hs[Ve.pointerType]||Ve.pointerType,xo=Ai==Dt,po=O(it,Ve.pointerId,"pointerId");cn&he&&(Ve.button===0||xo)?po<0&&(it.push(Ve),po=it.length-1):cn&(Ge|bt)&&(Xt=!0),!(po<0)&&(it[po]=Ve,this.callback(this.manager,cn,{pointers:it,changedPointers:[Ve],pointerType:Ai,srcEvent:Ve}),Xt&&it.splice(po,1))}});var ra={touchstart:he,touchmove:xe,touchend:Ge,touchcancel:bt},ge="touchstart",Te="touchstart touchmove touchend touchcancel";function Oe(){this.evTarget=ge,this.evWin=Te,this.started=!1,si.apply(this,arguments)}H(Oe,si,{handler:function(Ve){var it=ra[Ve.type];if(it===he&&(this.started=!0),!!this.started){var Xt=ze.call(this,Ve,it);it&(Ge|bt)&&Xt[0].length-Xt[1].length===0&&(this.started=!1),this.callback(this.manager,it,{pointers:Xt[0],changedPointers:Xt[1],pointerType:Dt,srcEvent:Ve})}}});function ze(Me,Ve){var it=U(Me.touches),Xt=U(Me.changedTouches);return Ve&(Ge|bt)&&(it=re(it.concat(Xt),"identifier",!0)),[it,Xt]}var Ie={touchstart:he,touchmove:xe,touchend:Ge,touchcancel:bt},pt="touchstart touchmove touchend touchcancel";function At(){this.evTarget=pt,this.targetIds={},si.apply(this,arguments)}H(At,si,{handler:function(Ve){var it=Ie[Ve.type],Xt=De.call(this,Ve,it);Xt&&this.callback(this.manager,it,{pointers:Xt[0],changedPointers:Xt[1],pointerType:Dt,srcEvent:Ve})}});function De(Me,Ve){var it=U(Me.touches),Xt=this.targetIds;if(Ve&(he|xe)&&it.length===1)return Xt[it[0].identifier]=!0,[it,it];var br,cn,Ai=U(Me.changedTouches),xo=[],po=this.target;if(cn=it.filter(function(Wo){return V(Wo.target,po)}),Ve===he)for(br=0;br<cn.length;)Xt[cn[br].identifier]=!0,br++;for(br=0;br<Ai.length;)Xt[Ai[br].identifier]&&xo.push(Ai[br]),Ve&(Ge|bt)&&delete Xt[Ai[br].identifier],br++;if(xo.length)return[re(cn.concat(xo),"identifier",!0),xo]}var Qe=2500,It=25;function cr(){si.apply(this,arguments);var Me=W(this.handler,this);this.touch=new At(this.manager,Me),this.mouse=new fs(this.manager,Me),this.primaryTouch=null,this.lastTouches=[]}H(cr,si,{handler:function(Ve,it,Xt){var br=Xt.pointerType==Dt,cn=Xt.pointerType==Nt;if(!(cn&&Xt.sourceCapabilities&&Xt.sourceCapabilities.firesTouchEvents)){if(br)dr.call(this,it,Xt);else if(cn&&lr.call(this,Xt))return;this.callback(Ve,it,Xt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function dr(Me,Ve){Me&he?(this.primaryTouch=Ve.changedPointers[0].identifier,$t.call(this,Ve)):Me&(Ge|bt)&&$t.call(this,Ve)}function $t(Me){var Ve=Me.changedPointers[0];if(Ve.identifier===this.primaryTouch){var it={x:Ve.clientX,y:Ve.clientY};this.lastTouches.push(it);var Xt=this.lastTouches,br=function(){var cn=Xt.indexOf(it);cn>-1&&Xt.splice(cn,1)};setTimeout(br,Qe)}}function lr(Me){for(var Ve=Me.srcEvent.clientX,it=Me.srcEvent.clientY,Xt=0;Xt<this.lastTouches.length;Xt++){var br=this.lastTouches[Xt],cn=Math.abs(Ve-br.x),Ai=Math.abs(it-br.y);if(cn<=It&&Ai<=It)return!0}return!1}var Kr=ee(a.style,"touchAction"),Dr=Kr!==n,qt="compute",Lr="auto",Er="manipulation",_r="none",Wn="pan-x",Cr="pan-y",Qn=bi();function Ci(Me,Ve){this.manager=Me,this.set(Ve)}Ci.prototype={set:function(Me){Me==qt&&(Me=this.compute()),Dr&&this.manager.element.style&&Qn[Me]&&(this.manager.element.style[Kr]=Me),this.actions=Me.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Me=[];return v(this.manager.recognizers,function(Ve){$(Ve.options.enable,[Ve])&&(Me=Me.concat(Ve.getTouchAction()))}),ii(Me.join(" "))},preventDefaults:function(Me){var Ve=Me.srcEvent,it=Me.offsetDirection;if(this.manager.session.prevented){Ve.preventDefault();return}var Xt=this.actions,br=X(Xt,_r)&&!Qn[_r],cn=X(Xt,Cr)&&!Qn[Cr],Ai=X(Xt,Wn)&&!Qn[Wn];if(br){var xo=Me.pointers.length===1,po=Me.distance<2,Wo=Me.deltaTime<250;if(xo&&po&&Wo)return}if(!(Ai&&cn)&&(br||cn&&it&wr||Ai&&it&Nn))return this.preventSrc(Ve)},preventSrc:function(Me){this.manager.session.prevented=!0,Me.preventDefault()}};function ii(Me){if(X(Me,_r))return _r;var Ve=X(Me,Wn),it=X(Me,Cr);return Ve&&it?_r:Ve||it?Ve?Wn:Cr:X(Me,Er)?Er:Lr}function bi(){if(!Dr)return!1;var Me={},Ve=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(it){Me[it]=Ve?t.CSS.supports("touch-action",it):!0}),Me}var Un=1,oa=2,xi=4,Ki=8,gi=Ki,Zn=16,$n=32;function ki(Me){this.options=E({},this.defaults,Me||{}),this.id=je(),this.manager=null,this.options.enable=J(this.options.enable,!0),this.state=Un,this.simultaneous={},this.requireFail=[]}ki.prototype={defaults:{},set:function(Me){return E(this.options,Me),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Me){if(p(Me,"recognizeWith",this))return this;var Ve=this.simultaneous;return Me=_o(Me,this),Ve[Me.id]||(Ve[Me.id]=Me,Me.recognizeWith(this)),this},dropRecognizeWith:function(Me){return p(Me,"dropRecognizeWith",this)?this:(Me=_o(Me,this),delete this.simultaneous[Me.id],this)},requireFailure:function(Me){if(p(Me,"requireFailure",this))return this;var Ve=this.requireFail;return Me=_o(Me,this),O(Ve,Me)===-1&&(Ve.push(Me),Me.requireFailure(this)),this},dropRequireFailure:function(Me){if(p(Me,"dropRequireFailure",this))return this;Me=_o(Me,this);var Ve=O(this.requireFail,Me);return Ve>-1&&this.requireFail.splice(Ve,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Me){return!!this.simultaneous[Me.id]},emit:function(Me){var Ve=this,it=this.state;function Xt(br){Ve.manager.emit(br,Me)}it<Ki&&Xt(Ve.options.event+Es(it)),Xt(Ve.options.event),Me.additionalEvent&&Xt(Me.additionalEvent),it>=Ki&&Xt(Ve.options.event+Es(it))},tryEmit:function(Me){if(this.canEmit())return this.emit(Me);this.state=$n},canEmit:function(){for(var Me=0;Me<this.requireFail.length;){if(!(this.requireFail[Me].state&($n|Un)))return!1;Me++}return!0},recognize:function(Me){var Ve=E({},Me);if(!$(this.options.enable,[this,Ve])){this.reset(),this.state=$n;return}this.state&(gi|Zn|$n)&&(this.state=Un),this.state=this.process(Ve),this.state&(oa|xi|Ki|Zn)&&this.tryEmit(Ve)},process:function(Me){},getTouchAction:function(){},reset:function(){}};function Es(Me){return Me&Zn?"cancel":Me&Ki?"end":Me&xi?"move":Me&oa?"start":""}function Ba(Me){return Me==Fn?"down":Me==an?"up":Me==Gt?"left":Me==tn?"right":""}function _o(Me,Ve){var it=Ve.manager;return it?it.get(Me):Me}function hs(){ki.apply(this,arguments)}H(hs,ki,{defaults:{pointers:1},attrTest:function(Me){var Ve=this.options.pointers;return Ve===0||Me.pointers.length===Ve},process:function(Me){var Ve=this.state,it=Me.eventType,Xt=Ve&(oa|xi),br=this.attrTest(Me);return Xt&&(it&bt||!br)?Ve|Zn:Xt||br?it&Ge?Ve|Ki:Ve&oa?Ve|xi:oa:$n}});function eu(){hs.apply(this,arguments),this.pX=null,this.pY=null}H(eu,hs,{defaults:{event:"pan",threshold:10,pointers:1,direction:pi},getTouchAction:function(){var Me=this.options.direction,Ve=[];return Me&wr&&Ve.push(Cr),Me&Nn&&Ve.push(Wn),Ve},directionTest:function(Me){var Ve=this.options,it=!0,Xt=Me.distance,br=Me.direction,cn=Me.deltaX,Ai=Me.deltaY;return br&Ve.direction||(Ve.direction&wr?(br=cn===0?Kt:cn<0?Gt:tn,it=cn!=this.pX,Xt=Math.abs(Me.deltaX)):(br=Ai===0?Kt:Ai<0?an:Fn,it=Ai!=this.pY,Xt=Math.abs(Me.deltaY))),Me.direction=br,it&&Xt>Ve.threshold&&br&Ve.direction},attrTest:function(Me){return hs.prototype.attrTest.call(this,Me)&&(this.state&oa||!(this.state&oa)&&this.directionTest(Me))},emit:function(Me){this.pX=Me.deltaX,this.pY=Me.deltaY;var Ve=Ba(Me.direction);Ve&&(Me.additionalEvent=this.options.event+Ve),this._super.emit.call(this,Me)}});function sa(){hs.apply(this,arguments)}H(sa,hs,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[_r]},attrTest:function(Me){return this._super.attrTest.call(this,Me)&&(Math.abs(Me.scale-1)>this.options.threshold||this.state&oa)},emit:function(Me){if(Me.scale!==1){var Ve=Me.scale<1?"in":"out";Me.additionalEvent=this.options.event+Ve}this._super.emit.call(this,Me)}});function tu(){ki.apply(this,arguments),this._timer=null,this._input=null}H(tu,ki,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Lr]},process:function(Me){var Ve=this.options,it=Me.pointers.length===Ve.pointers,Xt=Me.distance<Ve.threshold,br=Me.deltaTime>Ve.time;if(this._input=Me,!Xt||!it||Me.eventType&(Ge|bt)&&!br)this.reset();else if(Me.eventType&he)this.reset(),this._timer=h(function(){this.state=gi,this.tryEmit()},Ve.time,this);else if(Me.eventType&Ge)return gi;return $n},reset:function(){clearTimeout(this._timer)},emit:function(Me){this.state===gi&&(Me&&Me.eventType&Ge?this.manager.emit(this.options.event+"up",Me):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function ho(){hs.apply(this,arguments)}H(ho,hs,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[_r]},attrTest:function(Me){return this._super.attrTest.call(this,Me)&&(Math.abs(Me.rotation)>this.options.threshold||this.state&oa)}});function Za(){hs.apply(this,arguments)}H(Za,hs,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:wr|Nn,pointers:1},getTouchAction:function(){return eu.prototype.getTouchAction.call(this)},attrTest:function(Me){var Ve=this.options.direction,it;return Ve&(wr|Nn)?it=Me.overallVelocity:Ve&wr?it=Me.overallVelocityX:Ve&Nn&&(it=Me.overallVelocityY),this._super.attrTest.call(this,Me)&&Ve&Me.offsetDirection&&Me.distance>this.options.threshold&&Me.maxPointers==this.options.pointers&&u(it)>this.options.velocity&&Me.eventType&Ge},emit:function(Me){var Ve=Ba(Me.offsetDirection);Ve&&this.manager.emit(this.options.event+Ve,Me),this.manager.emit(this.options.event,Me)}});function Ho(){ki.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}H(Ho,ki,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Er]},process:function(Me){var Ve=this.options,it=Me.pointers.length===Ve.pointers,Xt=Me.distance<Ve.threshold,br=Me.deltaTime<Ve.time;if(this.reset(),Me.eventType&he&&this.count===0)return this.failTimeout();if(Xt&&br&&it){if(Me.eventType!=Ge)return this.failTimeout();var cn=this.pTime?Me.timeStamp-this.pTime<Ve.interval:!0,Ai=!this.pCenter||Ua(this.pCenter,Me.center)<Ve.posThreshold;this.pTime=Me.timeStamp,this.pCenter=Me.center,!Ai||!cn?this.count=1:this.count+=1,this._input=Me;var xo=this.count%Ve.taps;if(xo===0)return this.hasRequireFailures()?(this._timer=h(function(){this.state=gi,this.tryEmit()},Ve.interval,this),oa):gi}return $n},failTimeout:function(){return this._timer=h(function(){this.state=$n},this.options.interval,this),$n},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==gi&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function ai(Me,Ve){return Ve=Ve||{},Ve.recognizers=J(Ve.recognizers,ai.defaults.preset),new ec(Me,Ve)}ai.VERSION="2.0.7",ai.defaults={domEvents:!1,touchAction:qt,enable:!0,inputTarget:null,inputClass:null,preset:[[ho,{enable:!1}],[sa,{enable:!1},["rotate"]],[Za,{direction:wr}],[eu,{direction:wr},["swipe"]],[Ho],[Ho,{event:"doubletap",taps:2},["tap"]],[tu]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Cs=1,bo=2;function ec(Me,Ve){this.options=E({},ai.defaults,Ve||{}),this.options.inputTarget=this.options.inputTarget||Me,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Me,this.input=Hn(this),this.touchAction=new Ci(this,this.options.touchAction),ps(this,!0),v(this.options.recognizers,function(it){var Xt=this.add(new it[0](it[1]));it[2]&&Xt.recognizeWith(it[2]),it[3]&&Xt.requireFailure(it[3])},this)}ec.prototype={set:function(Me){return E(this.options,Me),Me.touchAction&&this.touchAction.update(),Me.inputTarget&&(this.input.destroy(),this.input.target=Me.inputTarget,this.input.init()),this},stop:function(Me){this.session.stopped=Me?bo:Cs},recognize:function(Me){var Ve=this.session;if(!Ve.stopped){this.touchAction.preventDefaults(Me);var it,Xt=this.recognizers,br=Ve.curRecognizer;(!br||br&&br.state&gi)&&(br=Ve.curRecognizer=null);for(var cn=0;cn<Xt.length;)it=Xt[cn],Ve.stopped!==bo&&(!br||it==br||it.canRecognizeWith(br))?it.recognize(Me):it.reset(),!br&&it.state&(oa|xi|Ki)&&(br=Ve.curRecognizer=it),cn++}},get:function(Me){if(Me instanceof ki)return Me;for(var Ve=this.recognizers,it=0;it<Ve.length;it++)if(Ve[it].options.event==Me)return Ve[it];return null},add:function(Me){if(p(Me,"add",this))return this;var Ve=this.get(Me.options.event);return Ve&&this.remove(Ve),this.recognizers.push(Me),Me.manager=this,this.touchAction.update(),Me},remove:function(Me){if(p(Me,"remove",this))return this;if(Me=this.get(Me),Me){var Ve=this.recognizers,it=O(Ve,Me);it!==-1&&(Ve.splice(it,1),this.touchAction.update())}return this},on:function(Me,Ve){if(Me!==n&&Ve!==n){var it=this.handlers;return v(I(Me),function(Xt){it[Xt]=it[Xt]||[],it[Xt].push(Ve)}),this}},off:function(Me,Ve){if(Me!==n){var it=this.handlers;return v(I(Me),function(Xt){Ve?it[Xt]&&it[Xt].splice(O(it[Xt],Ve),1):delete it[Xt]}),this}},emit:function(Me,Ve){this.options.domEvents&&Du(Me,Ve);var it=this.handlers[Me]&&this.handlers[Me].slice();if(!(!it||!it.length)){Ve.type=Me,Ve.preventDefault=function(){Ve.srcEvent.preventDefault()};for(var Xt=0;Xt<it.length;)it[Xt](Ve),Xt++}},destroy:function(){this.element&&ps(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function ps(Me,Ve){var it=Me.element;if(it.style){var Xt;v(Me.options.cssProps,function(br,cn){Xt=ee(it.style,cn),Ve?(Me.oldCssProps[Xt]=it.style[Xt],it.style[Xt]=br):it.style[Xt]=Me.oldCssProps[Xt]||""}),Ve||(Me.oldCssProps={})}}function Du(Me,Ve){var it=r.createEvent("Event");it.initEvent(Me,!0,!0),it.gesture=Ve,Ve.target.dispatchEvent(it)}E(ai,{INPUT_START:he,INPUT_MOVE:xe,INPUT_END:Ge,INPUT_CANCEL:bt,STATE_POSSIBLE:Un,STATE_BEGAN:oa,STATE_CHANGED:xi,STATE_ENDED:Ki,STATE_RECOGNIZED:gi,STATE_CANCELLED:Zn,STATE_FAILED:$n,DIRECTION_NONE:Kt,DIRECTION_LEFT:Gt,DIRECTION_RIGHT:tn,DIRECTION_UP:an,DIRECTION_DOWN:Fn,DIRECTION_HORIZONTAL:wr,DIRECTION_VERTICAL:Nn,DIRECTION_ALL:pi,Manager:ec,Input:si,TouchAction:Ci,TouchInput:At,MouseInput:fs,PointerEventInput:yu,TouchMouseInput:cr,SingleTouchInput:Oe,Recognizer:ki,AttrRecognizer:hs,Tap:Ho,Pan:eu,Swipe:Za,Pinch:sa,Rotate:ho,Press:tu,on:B,off:se,each:v,merge:D,extend:R,assign:E,inherit:H,bindFn:W,prefixed:ee});var eo=typeof t<"u"?t:typeof self<"u"?self:{};eo.Hammer=ai,n==="function"&&define.amd?define(function(){return ai}):typeof s2<"u"&&s2.exports?s2.exports=ai:t[e]=ai})(window,document,"Hammer")});var hH=mr((dyt,EI)=>{"use strict";EI.exports=q2;EI.exports.default=q2;function q2(t,r,e){e=e||2;var n=r&&r.length,i=n?r[0]*e:t.length,a=lH(t,0,i,e,!0),o=[];if(!a||a.next===a.prev)return o;var s,u,c,h,p,v,x;if(n&&(a=Fye(t,r,a,e)),t.length>80*e){s=c=t[0],u=h=t[1];for(var E=e;E<i;E+=e)p=t[E],v=t[E+1],p<s&&(s=p),v<u&&(u=v),p>c&&(c=p),v>h&&(h=v);x=Math.max(c-s,h-u),x=x!==0?32767/x:0}return a1(a,o,e,s,u,x,0),o}function lH(t,r,e,n,i){var a,o;if(i===SI(t,r,e,n)>0)for(a=r;a<e;a+=n)o=uH(a,t[a],t[a+1],o);else for(a=e-n;a>=r;a-=n)o=uH(a,t[a],t[a+1],o);return o&&X2(o,o.next)&&(s1(o),o=o.next),o}function Ym(t,r){if(!t)return t;r||(r=t);var e=t,n;do if(n=!1,!e.steiner&&(X2(e,e.next)||cs(e.prev,e,e.next)===0)){if(s1(e),e=r=e.prev,e===e.next)break;n=!0}else e=e.next;while(n||e!==r);return r}function a1(t,r,e,n,i,a,o){if(t){!o&&a&&Gye(t,n,i,a);for(var s=t,u,c;t.prev!==t.next;){if(u=t.prev,c=t.next,a?kye(t,n,i,a):Lye(t)){r.push(u.i/e|0),r.push(t.i/e|0),r.push(c.i/e|0),s1(t),t=c.next,s=c.next;continue}if(t=c,t===s){o?o===1?(t=Bye(Ym(t),r,e),a1(t,r,e,n,i,a,2)):o===2&&Dye(t,r,e,n,i,a):a1(Ym(t),r,e,n,i,a,1);break}}}}function Lye(t){var r=t.prev,e=t,n=t.next;if(cs(r,e,n)>=0)return!1;for(var i=r.x,a=e.x,o=n.x,s=r.y,u=e.y,c=n.y,h=i<a?i<o?i:o:a<o?a:o,p=s<u?s<c?s:c:u<c?u:c,v=i>a?i>o?i:o:a>o?a:o,x=s>u?s>c?s:c:u>c?u:c,E=n.next;E!==r;){if(E.x>=h&&E.x<=v&&E.y>=p&&E.y<=x&&MA(i,s,a,u,o,c,E.x,E.y)&&cs(E.prev,E,E.next)>=0)return!1;E=E.next}return!0}function kye(t,r,e,n){var i=t.prev,a=t,o=t.next;if(cs(i,a,o)>=0)return!1;for(var s=i.x,u=a.x,c=o.x,h=i.y,p=a.y,v=o.y,x=s<u?s<c?s:c:u<c?u:c,E=h<p?h<v?h:v:p<v?p:v,R=s>u?s>c?s:c:u>c?u:c,D=h>p?h>v?h:v:p>v?p:v,H=wI(x,E,r,e,n),W=wI(R,D,r,e,n),$=t.prevZ,J=t.nextZ;$&&$.z>=H&&J&&J.z<=W;){if($.x>=x&&$.x<=R&&$.y>=E&&$.y<=D&&$!==i&&$!==o&&MA(s,h,u,p,c,v,$.x,$.y)&&cs($.prev,$,$.next)>=0||($=$.prevZ,J.x>=x&&J.x<=R&&J.y>=E&&J.y<=D&&J!==i&&J!==o&&MA(s,h,u,p,c,v,J.x,J.y)&&cs(J.prev,J,J.next)>=0))return!1;J=J.nextZ}for(;$&&$.z>=H;){if($.x>=x&&$.x<=R&&$.y>=E&&$.y<=D&&$!==i&&$!==o&&MA(s,h,u,p,c,v,$.x,$.y)&&cs($.prev,$,$.next)>=0)return!1;$=$.prevZ}for(;J&&J.z<=W;){if(J.x>=x&&J.x<=R&&J.y>=E&&J.y<=D&&J!==i&&J!==o&&MA(s,h,u,p,c,v,J.x,J.y)&&cs(J.prev,J,J.next)>=0)return!1;J=J.nextZ}return!0}function Bye(t,r,e){var n=t;do{var i=n.prev,a=n.next.next;!X2(i,a)&&cH(i,n,n.next,a)&&o1(i,a)&&o1(a,i)&&(r.push(i.i/e|0),r.push(n.i/e|0),r.push(a.i/e|0),s1(n),s1(n.next),n=t=a),n=n.next}while(n!==t);return Ym(n)}function Dye(t,r,e,n,i,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Wye(o,s)){var u=fH(o,s);o=Ym(o,o.next),u=Ym(u,u.next),a1(o,r,e,n,i,a,0),a1(u,r,e,n,i,a,0);return}s=s.next}o=o.next}while(o!==t)}function Fye(t,r,e,n){var i=[],a,o,s,u,c;for(a=0,o=r.length;a<o;a++)s=r[a]*n,u=a<o-1?r[a+1]*n:t.length,c=lH(t,s,u,n,!1),c===c.next&&(c.steiner=!0),i.push(Hye(c));for(i.sort(Nye),a=0;a<i.length;a++)e=zye(i[a],e);return e}function Nye(t,r){return t.x-r.x}function zye(t,r){var e=Uye(t,r);if(!e)return r;var n=fH(e,t);return Ym(n,n.next),Ym(e,e.next)}function Uye(t,r){var e=r,n=t.x,i=t.y,a=-1/0,o;do{if(i<=e.y&&i>=e.next.y&&e.next.y!==e.y){var s=e.x+(i-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(s<=n&&s>a&&(a=s,o=e.x<e.next.x?e:e.next,s===n))return o}e=e.next}while(e!==r);if(!o)return null;var u=o,c=o.x,h=o.y,p=1/0,v;e=o;do n>=e.x&&e.x>=c&&n!==e.x&&MA(i<h?n:a,i,c,h,i<h?a:n,i,e.x,e.y)&&(v=Math.abs(i-e.y)/(n-e.x),o1(e,t)&&(v<p||v===p&&(e.x>o.x||e.x===o.x&&jye(o,e)))&&(o=e,p=v)),e=e.next;while(e!==u);return o}function jye(t,r){return cs(t.prev,t,r.prev)<0&&cs(r.next,t,t.next)<0}function Gye(t,r,e,n){var i=t;do i.z===0&&(i.z=wI(i.x,i.y,r,e,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Vye(i)}function Vye(t){var r,e,n,i,a,o,s,u,c=1;do{for(e=t,t=null,a=null,o=0;e;){for(o++,n=e,s=0,r=0;r<c&&(s++,n=n.nextZ,!!n);r++);for(u=c;s>0||u>0&&n;)s!==0&&(u===0||!n||e.z<=n.z)?(i=e,e=e.nextZ,s--):(i=n,n=n.nextZ,u--),a?a.nextZ=i:t=i,i.prevZ=a,a=i;e=n}a.nextZ=null,c*=2}while(o>1);return t}function wI(t,r,e,n,i){return t=(t-e)*i|0,r=(r-n)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t|r<<1}function Hye(t){var r=t,e=t;do(r.x<e.x||r.x===e.x&&r.y<e.y)&&(e=r),r=r.next;while(r!==t);return e}function MA(t,r,e,n,i,a,o,s){return(i-o)*(r-s)>=(t-o)*(a-s)&&(t-o)*(n-s)>=(e-o)*(r-s)&&(e-o)*(a-s)>=(i-o)*(n-s)}function Wye(t,r){return t.next.i!==r.i&&t.prev.i!==r.i&&!qye(t,r)&&(o1(t,r)&&o1(r,t)&&Xye(t,r)&&(cs(t.prev,t,r.prev)||cs(t,r.prev,r))||X2(t,r)&&cs(t.prev,t,t.next)>0&&cs(r.prev,r,r.next)>0)}function cs(t,r,e){return(r.y-t.y)*(e.x-r.x)-(r.x-t.x)*(e.y-r.y)}function X2(t,r){return t.x===r.x&&t.y===r.y}function cH(t,r,e,n){var i=W2(cs(t,r,e)),a=W2(cs(t,r,n)),o=W2(cs(e,n,t)),s=W2(cs(e,n,r));return!!(i!==a&&o!==s||i===0&&H2(t,e,r)||a===0&&H2(t,n,r)||o===0&&H2(e,t,n)||s===0&&H2(e,r,n))}function H2(t,r,e){return r.x<=Math.max(t.x,e.x)&&r.x>=Math.min(t.x,e.x)&&r.y<=Math.max(t.y,e.y)&&r.y>=Math.min(t.y,e.y)}function W2(t){return t>0?1:t<0?-1:0}function qye(t,r){var e=t;do{if(e.i!==t.i&&e.next.i!==t.i&&e.i!==r.i&&e.next.i!==r.i&&cH(e,e.next,t,r))return!0;e=e.next}while(e!==t);return!1}function o1(t,r){return cs(t.prev,t,t.next)<0?cs(t,r,t.next)>=0&&cs(t,t.prev,r)>=0:cs(t,r,t.prev)<0||cs(t,t.next,r)<0}function Xye(t,r){var e=t,n=!1,i=(t.x+r.x)/2,a=(t.y+r.y)/2;do e.y>a!=e.next.y>a&&e.next.y!==e.y&&i<(e.next.x-e.x)*(a-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==t);return n}function fH(t,r){var e=new TI(t.i,t.x,t.y),n=new TI(r.i,r.x,r.y),i=t.next,a=r.prev;return t.next=r,r.prev=t,e.next=i,i.prev=e,n.next=e,e.prev=n,a.next=n,n.prev=a,n}function uH(t,r,e,n){var i=new TI(t,r,e);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function s1(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function TI(t,r,e){this.i=t,this.x=r,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}q2.deviation=function(t,r,e,n){var i=r&&r.length,a=i?r[0]*e:t.length,o=Math.abs(SI(t,0,a,e));if(i)for(var s=0,u=r.length;s<u;s++){var c=r[s]*e,h=s<u-1?r[s+1]*e:t.length;o-=Math.abs(SI(t,c,h,e))}var p=0;for(s=0;s<n.length;s+=3){var v=n[s]*e,x=n[s+1]*e,E=n[s+2]*e;p+=Math.abs((t[v]-t[E])*(t[x+1]-t[v+1])-(t[v]-t[x])*(t[E+1]-t[v+1]))}return o===0&&p===0?0:Math.abs((p-o)/o)};function SI(t,r,e,n){for(var i=0,a=r,o=e-n;a<e;a+=n)i+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return i}q2.flatten=function(t){for(var r=t[0][0].length,e={vertices:[],holes:[],dimensions:r},n=0,i=0;i<t.length;i++){for(var a=0;a<t[i].length;a++)for(var o=0;o<r;o++)e.vertices.push(t[i][a][o]);i>0&&(n+=t[i-1].length,e.holes.push(n))}return e}});var wT=mr(dp=>{"use strict";var xq=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Vbe=xq+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",wq="["+xq+"]["+Vbe+"]*",Hbe=new RegExp("^"+wq+"$"),Wbe=function(r,e){for(var n=[],i=e.exec(r);i;){var a=[];a.startIndex=e.lastIndex-i[0].length;for(var o=i.length,s=0;s<o;s++)a.push(i[s]);n.push(a),i=e.exec(r)}return n},qbe=function(r){var e=Hbe.exec(r);return!(e===null||typeof e>"u")};dp.isExist=function(t){return typeof t<"u"};dp.isEmptyObject=function(t){return Object.keys(t).length===0};dp.merge=function(t,r,e){if(r)for(var n=Object.keys(r),i=n.length,a=0;a<i;a++)e==="strict"?t[n[a]]=[r[n[a]]]:t[n[a]]=r[n[a]]};dp.getValue=function(t){return dp.isExist(t)?t:""};dp.isName=qbe;dp.getAllMatches=Wbe;dp.nameRegexp=wq});var YI=mr(Pq=>{"use strict";var XI=wT(),Xbe={allowBooleanAttributes:!1,unpairedTags:[]};Pq.validate=function(t,r){r=Object.assign({},Xbe,r);var e=[],n=!1,i=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(var a=0;a<t.length;a++)if(t[a]==="<"&&t[a+1]==="?"){if(a+=2,a=Sq(t,a),a.err)return a}else if(t[a]==="<"){var o=a;if(a++,t[a]==="!"){a=Eq(t,a);continue}else{var s=!1;t[a]==="/"&&(s=!0,a++);for(var u="";a<t.length&&t[a]!==">"&&t[a]!==" "&&t[a]!=="	"&&t[a]!==`
`&&t[a]!=="\r";a++)u+=t[a];if(u=u.trim(),u[u.length-1]==="/"&&(u=u.substring(0,u.length-1),a--),!txe(u)){var c=void 0;return u.trim().length===0?c="Invalid space after '<'.":c="Tag '"+u+"' is an invalid name.",$s("InvalidTag",c,Xl(t,a))}var h=Zbe(t,a);if(h===!1)return $s("InvalidAttr","Attributes for '"+u+"' have open quote.",Xl(t,a));var p=h.value;if(a=h.index,p[p.length-1]==="/"){var v=a-p.length;p=p.substring(0,p.length-1);var x=Cq(p,r);if(x===!0)n=!0;else return $s(x.err.code,x.err.msg,Xl(t,v+x.err.line))}else if(s)if(h.tagClosed){if(p.trim().length>0)return $s("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",Xl(t,o));var E=e.pop();if(u!==E.tagName){var R=Xl(t,E.tagStartPos);return $s("InvalidTag","Expected closing tag '"+E.tagName+"' (opened in line "+R.line+", col "+R.col+") instead of closing tag '"+u+"'.",Xl(t,o))}e.length==0&&(i=!0)}else return $s("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",Xl(t,a));else{var D=Cq(p,r);if(D!==!0)return $s(D.err.code,D.err.msg,Xl(t,a-p.length+D.err.line));if(i===!0)return $s("InvalidXml","Multiple possible root nodes found.",Xl(t,a));r.unpairedTags.indexOf(u)!==-1||e.push({tagName:u,tagStartPos:o}),n=!0}for(a++;a<t.length;a++)if(t[a]==="<")if(t[a+1]==="!"){a++,a=Eq(t,a);continue}else if(t[a+1]==="?"){if(a=Sq(t,++a),a.err)return a}else break;else if(t[a]==="&"){var H=Qbe(t,a);if(H==-1)return $s("InvalidChar","char '&' is not expected.",Xl(t,a));a=H}else if(i===!0&&!Tq(t[a]))return $s("InvalidXml","Extra text at the end",Xl(t,a));t[a]==="<"&&a--}}else{if(Tq(t[a]))continue;return $s("InvalidChar","char '"+t[a]+"' is not expected.",Xl(t,a))}if(n){if(e.length==1)return $s("InvalidTag","Unclosed tag '"+e[0].tagName+"'.",Xl(t,e[0].tagStartPos));if(e.length>0)return $s("InvalidXml","Invalid '"+JSON.stringify(e.map(function(W){return W.tagName}),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return $s("InvalidXml","Start tag expected.",1);return!0};function Tq(t){return t===" "||t==="	"||t===`
`||t==="\r"}function Sq(t,r){for(var e=r;r<t.length;r++)if(t[r]=="?"||t[r]==" "){var n=t.substr(e,r-e);if(r>5&&n==="xml")return $s("InvalidXml","XML declaration allowed only at the start of the document.",Xl(t,r));if(t[r]=="?"&&t[r+1]==">"){r++;break}else continue}return r}function Eq(t,r){if(t.length>r+5&&t[r+1]==="-"&&t[r+2]==="-"){for(r+=3;r<t.length;r++)if(t[r]==="-"&&t[r+1]==="-"&&t[r+2]===">"){r+=2;break}}else if(t.length>r+8&&t[r+1]==="D"&&t[r+2]==="O"&&t[r+3]==="C"&&t[r+4]==="T"&&t[r+5]==="Y"&&t[r+6]==="P"&&t[r+7]==="E"){var e=1;for(r+=8;r<t.length;r++)if(t[r]==="<")e++;else if(t[r]===">"&&(e--,e===0))break}else if(t.length>r+9&&t[r+1]==="["&&t[r+2]==="C"&&t[r+3]==="D"&&t[r+4]==="A"&&t[r+5]==="T"&&t[r+6]==="A"&&t[r+7]==="["){for(r+=8;r<t.length;r++)if(t[r]==="]"&&t[r+1]==="]"&&t[r+2]===">"){r+=2;break}}return r}var Ybe='"',Kbe="'";function Zbe(t,r){for(var e="",n="",i=!1;r<t.length;r++){if(t[r]===Ybe||t[r]===Kbe)n===""?n=t[r]:n!==t[r]||(n="");else if(t[r]===">"&&n===""){i=!0;break}e+=t[r]}return n!==""?!1:{value:e,index:r,tagClosed:i}}var $be=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Cq(t,r){for(var e=XI.getAllMatches(t,$be),n={},i=0;i<e.length;i++){if(e[i][1].length===0)return $s("InvalidAttr","Attribute '"+e[i][2]+"' has no space in starting.",d1(e[i]));if(e[i][3]!==void 0&&e[i][4]===void 0)return $s("InvalidAttr","Attribute '"+e[i][2]+"' is without value.",d1(e[i]));if(e[i][3]===void 0&&!r.allowBooleanAttributes)return $s("InvalidAttr","boolean attribute '"+e[i][2]+"' is not allowed.",d1(e[i]));var a=e[i][2];if(!exe(a))return $s("InvalidAttr","Attribute '"+a+"' is an invalid name.",d1(e[i]));if(!n.hasOwnProperty(a))n[a]=1;else return $s("InvalidAttr","Attribute '"+a+"' is repeated.",d1(e[i]))}return!0}function Jbe(t,r){var e=/\d/;for(t[r]==="x"&&(r++,e=/[\da-fA-F]/);r<t.length;r++){if(t[r]===";")return r;if(!t[r].match(e))break}return-1}function Qbe(t,r){if(r++,t[r]===";")return-1;if(t[r]==="#")return r++,Jbe(t,r);for(var e=0;r<t.length;r++,e++)if(!(t[r].match(/\w/)&&e<20)){if(t[r]===";")break;return-1}return r}function $s(t,r,e){return{err:{code:t,msg:r,line:e.line||e,col:e.col}}}function exe(t){return XI.isName(t)}function txe(t){return XI.isName(t)}function Xl(t,r){var e=t.substring(0,r).split(/\r?\n/);return{line:e.length,col:e[e.length-1].length+1}}function d1(t){return t.startIndex+t[1].length}});var Mq=mr(KI=>{var Oq={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(r,e){return e},attributeValueProcessor:function(r,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:function(){return!1},commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(r,e,n){return r}},rxe=function(r){return Object.assign({},Oq,r)};KI.buildOptions=rxe;KI.defaultOptions=Oq});var Rq=mr((tSt,Iq)=>{"use strict";et();at();vt();var nxe=function(){function t(r){ce(this,t),this.tagname=r,this.child=[],this[":@"]={}}return ve(t,[{key:"add",value:function(e,n){e==="__proto__"&&(e="#__proto__"),this.child.push(_({},e,n))}},{key:"addChild",value:function(e){if(e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0){var n;this.child.push((n={},_(n,e.tagname,e.child),_(n,":@",e[":@"]),n))}else this.child.push(_({},e.tagname,e.child))}}]),t}();Iq.exports=nxe});var kq=mr((nSt,Lq)=>{Mn();var ixe=wT();function axe(t,r){var e={};if(t[r+3]==="O"&&t[r+4]==="C"&&t[r+5]==="T"&&t[r+6]==="Y"&&t[r+7]==="P"&&t[r+8]==="E"){r=r+9;for(var n=1,i=!1,a=!1,o="";r<t.length;r++)if(t[r]==="<"&&!a){if(i&&uxe(t,r)){r+=7;var s=oxe(t,r+1),u=Ot(s,3);entityName=u[0],val=u[1],r=u[2],val.indexOf("&")===-1&&(e[hxe(entityName)]={regx:RegExp("&".concat(entityName,";"),"g"),val})}else if(i&&lxe(t,r))r+=8;else if(i&&cxe(t,r))r+=8;else if(i&&fxe(t,r))r+=9;else if(sxe)a=!0;else throw new Error("Invalid DOCTYPE");n++,o=""}else if(t[r]===">"){if(a?t[r-1]==="-"&&t[r-2]==="-"&&(a=!1,n--):n--,n===0)break}else t[r]==="["?i=!0:o+=t[r];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:e,i:r}}function oxe(t,r){for(var e="";r<t.length&&t[r]!=="'"&&t[r]!=='"';r++)e+=t[r];if(e=e.trim(),e.indexOf(" ")!==-1)throw new Error("External entites are not supported");for(var n=t[r++],i="";r<t.length&&t[r]!==n;r++)i+=t[r];return[e,i,r]}function sxe(t,r){return t[r+1]==="!"&&t[r+2]==="-"&&t[r+3]==="-"}function uxe(t,r){return t[r+1]==="!"&&t[r+2]==="E"&&t[r+3]==="N"&&t[r+4]==="T"&&t[r+5]==="I"&&t[r+6]==="T"&&t[r+7]==="Y"}function lxe(t,r){return t[r+1]==="!"&&t[r+2]==="E"&&t[r+3]==="L"&&t[r+4]==="E"&&t[r+5]==="M"&&t[r+6]==="E"&&t[r+7]==="N"&&t[r+8]==="T"}function cxe(t,r){return t[r+1]==="!"&&t[r+2]==="A"&&t[r+3]==="T"&&t[r+4]==="T"&&t[r+5]==="L"&&t[r+6]==="I"&&t[r+7]==="S"&&t[r+8]==="T"}function fxe(t,r){return t[r+1]==="!"&&t[r+2]==="N"&&t[r+3]==="O"&&t[r+4]==="T"&&t[r+5]==="A"&&t[r+6]==="T"&&t[r+7]==="I"&&t[r+8]==="O"&&t[r+9]==="N"}function hxe(t){if(ixe.isName(t))return t;throw new Error("Invalid entity name ".concat(t))}Lq.exports=axe});var Dq=mr((iSt,Bq)=>{var pxe=/^[-+]?0x[a-fA-F0-9]+$/,dxe=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var mxe={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function vxe(t,r={}){if(r=Object.assign({},mxe,r),!t||typeof t!="string")return t;let e=t.trim();if(r.skipLike!==void 0&&r.skipLike.test(e))return t;if(r.hex&&pxe.test(e))return Number.parseInt(e,16);{let n=dxe.exec(e);if(n){let i=n[1],a=n[2],o=gxe(n[3]),s=n[4]||n[6];if(!r.leadingZeros&&a.length>0&&i&&e[2]!==".")return t;if(!r.leadingZeros&&a.length>0&&!i&&e[1]!==".")return t;{let u=Number(e),c=""+u;return c.search(/[eE]/)!==-1||s?r.eNotation?u:t:e.indexOf(".")!==-1?c==="0"&&o===""||c===o||i&&c==="-"+o?u:t:a?o===c||i+o===c?u:t:e===c||e===i+c?u:t}}else return t}}function gxe(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}Bq.exports=vxe});var Nq=mr((lSt,Fq)=>{"use strict";et();Ii();at();var JI=wT(),m1=Rq(),Axe=kq(),yxe=Dq(),uSt="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,JI.nameRegexp),_xe=function t(r){ce(this,t),this.options=r,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=bxe,this.parseXml=Exe,this.parseTextData=xxe,this.resolveNameSpace=wxe,this.buildAttributesMap=Sxe,this.isItStopNode=Mxe,this.replaceEntitiesValue=Pxe,this.readStopNodeData=Rxe,this.saveTextToParentTag=Oxe,this.addChild=Cxe};function bxe(t){for(var r=Object.keys(t),e=0;e<r.length;e++){var n=r[e];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:t[n]}}}function xxe(t,r,e,n,i,a,o){if(t!==void 0&&(this.options.trimValues&&!n&&(t=t.trim()),t.length>0)){o||(t=this.replaceEntitiesValue(t));var s=this.options.tagValueProcessor(r,t,e,i,a);if(s==null)return t;if(vr(s)!==vr(t)||s!==t)return s;if(this.options.trimValues)return $I(t,this.options.parseTagValue,this.options.numberParseOptions);var u=t.trim();return u===t?$I(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function wxe(t){if(this.options.removeNSPrefix){var r=t.split(":"),e=t.charAt(0)==="/"?"/":"";if(r[0]==="xmlns")return"";r.length===2&&(t=e+r[1])}return t}var Txe=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Sxe(t,r,e){if(!this.options.ignoreAttributes&&typeof t=="string"){for(var n=JI.getAllMatches(t,Txe),i=n.length,a={},o=0;o<i;o++){var s=this.resolveNameSpace(n[o][1]),u=n[o][4],c=this.options.attributeNamePrefix+s;if(s.length)if(this.options.transformAttributeName&&(c=this.options.transformAttributeName(c)),c==="__proto__"&&(c="#__proto__"),u!==void 0){this.options.trimValues&&(u=u.trim()),u=this.replaceEntitiesValue(u);var h=this.options.attributeValueProcessor(s,u,r);h==null?a[c]=u:vr(h)!==vr(u)||h!==u?a[c]=h:a[c]=$I(u,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(a[c]=!0)}if(!Object.keys(a).length)return;if(this.options.attributesGroupName){var p={};return p[this.options.attributesGroupName]=a,p}return a}}var Exe=function(r){r=r.replace(/\r\n?/g,`
`);for(var e=new m1("!xml"),n=e,i="",a="",o=0;o<r.length;o++){var s=r[o];if(s==="<")if(r[o+1]==="/"){var u=ev(r,">",o,"Closing Tag is not closed."),c=r.substring(o+2,u).trim();if(this.options.removeNSPrefix){var h=c.indexOf(":");h!==-1&&(c=c.substr(h+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),n&&(i=this.saveTextToParentTag(i,n,a));var p=a.substring(a.lastIndexOf(".")+1);if(c&&this.options.unpairedTags.indexOf(c)!==-1)throw new Error("Unpaired tag can not be used as closing tag: </".concat(c,">"));var v=0;p&&this.options.unpairedTags.indexOf(p)!==-1?(v=a.lastIndexOf(".",a.lastIndexOf(".")-1),this.tagsNodeStack.pop()):v=a.lastIndexOf("."),a=a.substring(0,v),n=this.tagsNodeStack.pop(),i="",o=u}else if(r[o+1]==="?"){var x=ZI(r,o,!1,"?>");if(!x)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,n,a),!(this.options.ignoreDeclaration&&x.tagName==="?xml"||this.options.ignorePiTags)){var E=new m1(x.tagName);E.add(this.options.textNodeName,""),x.tagName!==x.tagExp&&x.attrExpPresent&&(E[":@"]=this.buildAttributesMap(x.tagExp,a,x.tagName)),this.addChild(n,E,a)}o=x.closeIndex+1}else if(r.substr(o+1,3)==="!--"){var R=ev(r,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){var D=r.substring(o+4,R-2);i=this.saveTextToParentTag(i,n,a),n.add(this.options.commentPropName,[_({},this.options.textNodeName,D)])}o=R}else if(r.substr(o+1,2)==="!D"){var H=Axe(r,o);this.docTypeEntities=H.entities,o=H.i}else if(r.substr(o+1,2)==="!["){var W=ev(r,"]]>",o,"CDATA is not closed.")-2,$=r.substring(o+9,W);if(i=this.saveTextToParentTag(i,n,a),this.options.cdataPropName)n.add(this.options.cdataPropName,[_({},this.options.textNodeName,$)]);else{var J=this.parseTextData($,n.tagname,a,!0,!1,!0);J==null&&(J=""),n.add(this.options.textNodeName,J)}o=W+2}else{var B=ZI(r,o,this.options.removeNSPrefix),se=B.tagName,V=B.tagExp,X=B.attrExpPresent,I=B.closeIndex;this.options.transformTagName&&(se=this.options.transformTagName(se)),n&&i&&n.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,n,a,!1));var O=n;if(O&&this.options.unpairedTags.indexOf(O.tagname)!==-1&&(n=this.tagsNodeStack.pop(),a=a.substring(0,a.lastIndexOf("."))),se!==e.tagname&&(a+=a?"."+se:se),this.isItStopNode(this.options.stopNodes,a,se)){var U="";if(V.length>0&&V.lastIndexOf("/")===V.length-1)o=B.closeIndex;else if(this.options.unpairedTags.indexOf(se)!==-1)o=B.closeIndex;else{var re=this.readStopNodeData(r,se,I+1);if(!re)throw new Error("Unexpected end of ".concat(se));o=re.i,U=re.tagContent}var ee=new m1(se);se!==V&&X&&(ee[":@"]=this.buildAttributesMap(V,a,se)),U&&(U=this.parseTextData(U,se,a,!0,X,!0,!0)),a=a.substr(0,a.lastIndexOf(".")),ee.add(this.options.textNodeName,U),this.addChild(n,ee,a)}else{if(V.length>0&&V.lastIndexOf("/")===V.length-1){se[se.length-1]==="/"?(se=se.substr(0,se.length-1),a=a.substr(0,a.length-1),V=se):V=V.substr(0,V.length-1),this.options.transformTagName&&(se=this.options.transformTagName(se));var pe=new m1(se);se!==V&&X&&(pe[":@"]=this.buildAttributesMap(V,a,se)),this.addChild(n,pe,a),a=a.substr(0,a.lastIndexOf("."))}else{var je=new m1(se);this.tagsNodeStack.push(n),se!==V&&X&&(je[":@"]=this.buildAttributesMap(V,a,se)),this.addChild(n,je,a),n=je}i="",o=I}}else i+=r[o]}return e.child};function Cxe(t,r,e){var n=this.options.updateTag(r.tagname,e,r[":@"]);n===!1||(typeof n=="string"&&(r.tagname=n),t.addChild(r))}var Pxe=function(r){if(this.options.processEntities){for(var e in this.docTypeEntities){var n=this.docTypeEntities[e];r=r.replace(n.regx,n.val)}for(var i in this.lastEntities){var a=this.lastEntities[i];r=r.replace(a.regex,a.val)}if(this.options.htmlEntities)for(var o in this.htmlEntities){var s=this.htmlEntities[o];r=r.replace(s.regex,s.val)}r=r.replace(this.ampEntity.regex,this.ampEntity.val)}return r};function Oxe(t,r,e,n){return t&&(n===void 0&&(n=Object.keys(r.child).length===0),t=this.parseTextData(t,r.tagname,e,!1,r[":@"]?Object.keys(r[":@"]).length!==0:!1,n),t!==void 0&&t!==""&&r.add(this.options.textNodeName,t),t=""),t}function Mxe(t,r,e){var n="*."+e;for(var i in t){var a=t[i];if(n===a||r===a)return!0}return!1}function Ixe(t,r){for(var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:">",n,i="",a=r;a<t.length;a++){var o=t[a];if(n)o===n&&(n="");else if(o==='"'||o==="'")n=o;else if(o===e[0])if(e[1]){if(t[a+1]===e[1])return{data:i,index:a}}else return{data:i,index:a};else o==="	"&&(o=" ");i+=o}}function ev(t,r,e,n){var i=t.indexOf(r,e);if(i===-1)throw new Error(n);return i+r.length-1}function ZI(t,r,e){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:">",i=Ixe(t,r+1,n);if(i){var a=i.data,o=i.index,s=a.search(/\s/),u=a,c=!0;if(s!==-1&&(u=a.substr(0,s).replace(/\s\s*$/,""),a=a.substr(s+1)),e){var h=u.indexOf(":");h!==-1&&(u=u.substr(h+1),c=u!==i.data.substr(h+1))}return{tagName:u,tagExp:a,closeIndex:o,attrExpPresent:c}}}function Rxe(t,r,e){for(var n=e,i=1;e<t.length;e++)if(t[e]==="<")if(t[e+1]==="/"){var a=ev(t,">",e,"".concat(r," is not closed")),o=t.substring(e+2,a).trim();if(o===r&&(i--,i===0))return{tagContent:t.substring(n,e),i:a};e=a}else if(t[e+1]==="?"){var s=ev(t,"?>",e+1,"StopNode is not closed.");e=s}else if(t.substr(e+1,3)==="!--"){var u=ev(t,"-->",e+3,"StopNode is not closed.");e=u}else if(t.substr(e+1,2)==="!["){var c=ev(t,"]]>",e,"StopNode is not closed.")-2;e=c}else{var h=ZI(t,e,">");if(h){var p=h&&h.tagName;p===r&&h.tagExp[h.tagExp.length-1]!=="/"&&i++,e=h.closeIndex}}}function $I(t,r,e){if(r&&typeof t=="string"){var n=t.trim();return n==="true"?!0:n==="false"?!1:yxe(t,e)}else return JI.isExist(t)?t:""}Fq.exports=_xe});var jq=mr(Uq=>{"use strict";function Lxe(t,r){return zq(t,r)}function zq(t,r,e){for(var n,i={},a=0;a<t.length;a++){var o=t[a],s=kxe(o),u="";if(e===void 0?u=s:u=e+"."+s,s===r.textNodeName)n===void 0?n=o[s]:n+=""+o[s];else{if(s===void 0)continue;if(o[s]){var c=zq(o[s],r,u),h=Dxe(c,r);o[":@"]?Bxe(c,o[":@"],u,r):Object.keys(c).length===1&&c[r.textNodeName]!==void 0&&!r.alwaysCreateTextNode?c=c[r.textNodeName]:Object.keys(c).length===0&&(r.alwaysCreateTextNode?c[r.textNodeName]="":c=""),i[s]!==void 0&&i.hasOwnProperty(s)?(Array.isArray(i[s])||(i[s]=[i[s]]),i[s].push(c)):r.isArray(s,u,h)?i[s]=[c]:i[s]=c}}}return typeof n=="string"?n.length>0&&(i[r.textNodeName]=n):n!==void 0&&(i[r.textNodeName]=n),i}function kxe(t){for(var r=Object.keys(t),e=0;e<r.length;e++){var n=r[e];if(n!==":@")return n}}function Bxe(t,r,e,n){if(r)for(var i=Object.keys(r),a=i.length,o=0;o<a;o++){var s=i[o];n.isArray(s,e+"."+s,!0,!0)?t[s]=[r[s]]:t[s]=r[s]}}function Dxe(t,r){var e=r.textNodeName,n=Object.keys(t).length;return!!(n===0||n===1&&(t[e]||typeof t[e]=="boolean"||t[e]===0))}Uq.prettify=Lxe});var Vq=mr((pSt,Gq)=>{at();vt();var Fxe=Mq(),Nxe=Fxe.buildOptions,zxe=Nq(),Uxe=jq(),jxe=Uxe.prettify,Gxe=YI(),Vxe=function(){function t(r){ce(this,t),this.externalEntities={},this.options=Nxe(r)}return ve(t,[{key:"parse",value:function(e,n){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});var i=Gxe.validate(e,n);if(i!==!0)throw Error("".concat(i.err.msg,":").concat(i.err.line,":").concat(i.err.col))}var a=new zxe(this.options);a.addExternalEntities(this.externalEntities);var o=a.parseXml(e);return this.options.preserveOrder||o===void 0?o:jxe(o,this.options)}},{key:"addEntity",value:function(e,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=n}}]),t}();Gq.exports=Vxe});var Yq=mr((dSt,Xq)=>{var Hxe=`
`;function Wxe(t,r){var e="";return r.format&&r.indentBy.length>0&&(e=Hxe),Wq(t,r,"",e)}function Wq(t,r,e,n){for(var i="",a=!1,o=0;o<t.length;o++){var s=t[o],u=qxe(s),c="";if(e.length===0?c=u:c="".concat(e,".").concat(u),u===r.textNodeName){var h=s[u];Xxe(c,r)||(h=r.tagValueProcessor(u,h),h=qq(h,r)),a&&(i+=n),i+=h,a=!1;continue}else if(u===r.cdataPropName){a&&(i+=n),i+="<![CDATA[".concat(s[u][0][r.textNodeName],"]]>"),a=!1;continue}else if(u===r.commentPropName){i+=n+"<!--".concat(s[u][0][r.textNodeName],"-->"),a=!0;continue}else if(u[0]==="?"){var p=Hq(s[":@"],r),v=u==="?xml"?"":n,x=s[u][0][r.textNodeName];x=x.length!==0?" "+x:"",i+=v+"<".concat(u).concat(x).concat(p,"?>"),a=!0;continue}var E=n;E!==""&&(E+=r.indentBy);var R=Hq(s[":@"],r),D=n+"<".concat(u).concat(R),H=Wq(s[u],r,c,E);r.unpairedTags.indexOf(u)!==-1?r.suppressUnpairedNode?i+=D+">":i+=D+"/>":(!H||H.length===0)&&r.suppressEmptyNode?i+=D+"/>":H&&H.endsWith(">")?i+=D+">".concat(H).concat(n,"</").concat(u,">"):(i+=D+">",H&&n!==""&&(H.includes("/>")||H.includes("</"))?i+=n+r.indentBy+H+n:i+=H,i+="</".concat(u,">")),a=!0}return i}function qxe(t){for(var r=Object.keys(t),e=0;e<r.length;e++){var n=r[e];if(n!==":@")return n}}function Hq(t,r){var e="";if(t&&!r.ignoreAttributes)for(var n in t){var i=r.attributeValueProcessor(n,t[n]);i=qq(i,r),i===!0&&r.suppressBooleanAttributes?e+=" ".concat(n.substr(r.attributeNamePrefix.length)):e+=" ".concat(n.substr(r.attributeNamePrefix.length),'="').concat(i,'"')}return e}function Xxe(t,r){t=t.substr(0,t.length-r.textNodeName.length-1);var e=t.substr(t.lastIndexOf(".")+1);for(var n in r.stopNodes)if(r.stopNodes[n]===t||r.stopNodes[n]==="*."+e)return!0;return!1}function qq(t,r){if(t&&t.length>0&&r.processEntities)for(var e=0;e<r.entities.length;e++){var n=r.entities[e];t=t.replace(n.regex,n.val)}return t}Xq.exports=Wxe});var Zq=mr((gSt,Kq)=>{"use strict";Ii();et();var Yxe=Yq(),Kxe={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(r,e){return e},attributeValueProcessor:function(r,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Pd(t){this.options=Object.assign({},Kxe,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Jxe),this.processTextOrObjNode=Zxe,this.options.format?(this.indentate=$xe,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Pd.prototype.build=function(t){return this.options.preserveOrder?Yxe(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t=_({},this.options.arrayNodeName,t)),this.j2x(t,0).val)};Pd.prototype.j2x=function(t,r){var e="",n="";for(var i in t)if(typeof t[i]>"u")this.isAttribute(i)&&(n+="");else if(t[i]===null)this.isAttribute(i)?n+="":i[0]==="?"?n+=this.indentate(r)+"<"+i+"?"+this.tagEndChar:n+=this.indentate(r)+"<"+i+"/"+this.tagEndChar;else if(t[i]instanceof Date)n+=this.buildTextValNode(t[i],i,"",r);else if(vr(t[i])!=="object"){var a=this.isAttribute(i);if(a)e+=this.buildAttrPairStr(a,""+t[i]);else if(i===this.options.textNodeName){var o=this.options.tagValueProcessor(i,""+t[i]);n+=this.replaceEntitiesValue(o)}else n+=this.buildTextValNode(t[i],i,"",r)}else if(Array.isArray(t[i])){for(var s=t[i].length,u="",c=0;c<s;c++){var h=t[i][c];typeof h>"u"||(h===null?i[0]==="?"?n+=this.indentate(r)+"<"+i+"?"+this.tagEndChar:n+=this.indentate(r)+"<"+i+"/"+this.tagEndChar:vr(h)==="object"?this.options.oneListGroup?u+=this.j2x(h,r+1).val:u+=this.processTextOrObjNode(h,i,r):u+=this.buildTextValNode(h,i,"",r))}this.options.oneListGroup&&(u=this.buildObjectNode(u,i,"",r)),n+=u}else if(this.options.attributesGroupName&&i===this.options.attributesGroupName)for(var p=Object.keys(t[i]),v=p.length,x=0;x<v;x++)e+=this.buildAttrPairStr(p[x],""+t[i][p[x]]);else n+=this.processTextOrObjNode(t[i],i,r);return{attrStr:e,val:n}};Pd.prototype.buildAttrPairStr=function(t,r){return r=this.options.attributeValueProcessor(t,""+r),r=this.replaceEntitiesValue(r),this.options.suppressBooleanAttributes&&r==="true"?" "+t:" "+t+'="'+r+'"'};function Zxe(t,r,e){var n=this.j2x(t,e+1);return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],r,n.attrStr,e):this.buildObjectNode(n.val,r,n.attrStr,e)}Pd.prototype.buildObjectNode=function(t,r,e,n){if(t==="")return r[0]==="?"?this.indentate(n)+"<"+r+e+"?"+this.tagEndChar:this.indentate(n)+"<"+r+e+this.closeTag(r)+this.tagEndChar;var i="</"+r+this.tagEndChar,a="";return r[0]==="?"&&(a="?",i=""),(e||e==="")&&t.indexOf("<")===-1?this.indentate(n)+"<"+r+e+a+">"+t+i:this.options.commentPropName!==!1&&r===this.options.commentPropName&&a.length===0?this.indentate(n)+"<!--".concat(t,"-->")+this.newLine:this.indentate(n)+"<"+r+e+a+this.tagEndChar+t+this.indentate(n)+i};Pd.prototype.closeTag=function(t){var r="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(r="/"):this.options.suppressEmptyNode?r="/":r="></".concat(t),r};Pd.prototype.buildTextValNode=function(t,r,e,n){if(this.options.cdataPropName!==!1&&r===this.options.cdataPropName)return this.indentate(n)+"<![CDATA[".concat(t,"]]>")+this.newLine;if(this.options.commentPropName!==!1&&r===this.options.commentPropName)return this.indentate(n)+"<!--".concat(t,"-->")+this.newLine;if(r[0]==="?")return this.indentate(n)+"<"+r+e+"?"+this.tagEndChar;var i=this.options.tagValueProcessor(r,t);return i=this.replaceEntitiesValue(i),i===""?this.indentate(n)+"<"+r+e+this.closeTag(r)+this.tagEndChar:this.indentate(n)+"<"+r+e+">"+i+"</"+r+this.tagEndChar};Pd.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(var r=0;r<this.options.entities.length;r++){var e=this.options.entities[r];t=t.replace(e.regex,e.val)}return t};function $xe(t){return this.options.indentBy.repeat(t)}function Jxe(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}Kq.exports=Pd});var Jq=mr((ASt,$q)=>{"use strict";var Qxe=YI(),ewe=Vq(),twe=Zq();$q.exports={XMLParser:ewe,XMLValidator:Qxe,XMLBuilder:twe}});var dR=mr((CX,b1)=>{(function(t,r){typeof define=="function"&&define.amd?define([],r):typeof pg=="function"&&typeof b1=="object"&&b1&&b1.exports?b1.exports=r():(t.dcodeIO=t.dcodeIO||{}).Long=r()})(CX,function(){"use strict";function t(I,O,U){this.low=I|0,this.high=O|0,this.unsigned=!!U}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1});function r(I){return(I&&I.__isLong__)===!0}t.isLong=r;var e={},n={};function i(I,O){var U,re,ee;return O?(I>>>=0,(ee=0<=I&&I<256)&&(re=n[I],re)?re:(U=o(I,(I|0)<0?-1:0,!0),ee&&(n[I]=U),U)):(I|=0,(ee=-128<=I&&I<128)&&(re=e[I],re)?re:(U=o(I,I<0?-1:0,!1),ee&&(e[I]=U),U))}t.fromInt=i;function a(I,O){if(isNaN(I)||!isFinite(I))return O?H:D;if(O){if(I<0)return H;if(I>=x)return se}else{if(I<=-E)return V;if(I+1>=E)return B}return I<0?a(-I,O).neg():o(I%v|0,I/v|0,O)}t.fromNumber=a;function o(I,O,U){return new t(I,O,U)}t.fromBits=o;var s=Math.pow;function u(I,O,U){if(I.length===0)throw Error("empty string");if(I==="NaN"||I==="Infinity"||I==="+Infinity"||I==="-Infinity")return D;if(typeof O=="number"?(U=O,O=!1):O=!!O,U=U||10,U<2||36<U)throw RangeError("radix");var re;if((re=I.indexOf("-"))>0)throw Error("interior hyphen");if(re===0)return u(I.substring(1),O,U).neg();for(var ee=a(s(U,8)),pe=D,je=0;je<I.length;je+=8){var qe=Math.min(8,I.length-je),We=parseInt(I.substring(je,je+qe),U);if(qe<8){var ot=a(s(U,qe));pe=pe.mul(ot).add(a(We))}else pe=pe.mul(ee),pe=pe.add(a(We))}return pe.unsigned=O,pe}t.fromString=u;function c(I){return I instanceof t?I:typeof I=="number"?a(I):typeof I=="string"?u(I):o(I.low,I.high,I.unsigned)}t.fromValue=c;var h=1<<16,p=1<<24,v=h*h,x=v*v,E=x/2,R=i(p),D=i(0);t.ZERO=D;var H=i(0,!0);t.UZERO=H;var W=i(1);t.ONE=W;var $=i(1,!0);t.UONE=$;var J=i(-1);t.NEG_ONE=J;var B=o(-1,2147483647,!1);t.MAX_VALUE=B;var se=o(-1,-1,!0);t.MAX_UNSIGNED_VALUE=se;var V=o(0,-2147483648,!1);t.MIN_VALUE=V;var X=t.prototype;return X.toInt=function(){return this.unsigned?this.low>>>0:this.low},X.toNumber=function(){return this.unsigned?(this.high>>>0)*v+(this.low>>>0):this.high*v+(this.low>>>0)},X.toString=function(O){if(O=O||10,O<2||36<O)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(V)){var U=a(O),re=this.div(U),ee=re.mul(U).sub(this);return re.toString(O)+ee.toInt().toString(O)}else return"-"+this.neg().toString(O);for(var pe=a(s(O,6),this.unsigned),je=this,qe="";;){var We=je.div(pe),ot=je.sub(We.mul(pe)).toInt()>>>0,gt=ot.toString(O);if(je=We,je.isZero())return gt+qe;for(;gt.length<6;)gt="0"+gt;qe=""+gt+qe}},X.getHighBits=function(){return this.high},X.getHighBitsUnsigned=function(){return this.high>>>0},X.getLowBits=function(){return this.low},X.getLowBitsUnsigned=function(){return this.low>>>0},X.getNumBitsAbs=function(){if(this.isNegative())return this.eq(V)?64:this.neg().getNumBitsAbs();for(var O=this.high!=0?this.high:this.low,U=31;U>0&&!(O&1<<U);U--);return this.high!=0?U+33:U+1},X.isZero=function(){return this.high===0&&this.low===0},X.isNegative=function(){return!this.unsigned&&this.high<0},X.isPositive=function(){return this.unsigned||this.high>=0},X.isOdd=function(){return(this.low&1)===1},X.isEven=function(){return(this.low&1)===0},X.equals=function(O){return r(O)||(O=c(O)),this.unsigned!==O.unsigned&&this.high>>>31===1&&O.high>>>31===1?!1:this.high===O.high&&this.low===O.low},X.eq=X.equals,X.notEquals=function(O){return!this.eq(O)},X.neq=X.notEquals,X.lessThan=function(O){return this.comp(O)<0},X.lt=X.lessThan,X.lessThanOrEqual=function(O){return this.comp(O)<=0},X.lte=X.lessThanOrEqual,X.greaterThan=function(O){return this.comp(O)>0},X.gt=X.greaterThan,X.greaterThanOrEqual=function(O){return this.comp(O)>=0},X.gte=X.greaterThanOrEqual,X.compare=function(O){if(r(O)||(O=c(O)),this.eq(O))return 0;var U=this.isNegative(),re=O.isNegative();return U&&!re?-1:!U&&re?1:this.unsigned?O.high>>>0>this.high>>>0||O.high===this.high&&O.low>>>0>this.low>>>0?-1:1:this.sub(O).isNegative()?-1:1},X.comp=X.compare,X.negate=function(){return!this.unsigned&&this.eq(V)?V:this.not().add(W)},X.neg=X.negate,X.add=function(O){r(O)||(O=c(O));var U=this.high>>>16,re=this.high&65535,ee=this.low>>>16,pe=this.low&65535,je=O.high>>>16,qe=O.high&65535,We=O.low>>>16,ot=O.low&65535,gt=0,Pt=0,Dt=0,nr=0;return nr+=pe+ot,Dt+=nr>>>16,nr&=65535,Dt+=ee+We,Pt+=Dt>>>16,Dt&=65535,Pt+=re+qe,gt+=Pt>>>16,Pt&=65535,gt+=U+je,gt&=65535,o(Dt<<16|nr,gt<<16|Pt,this.unsigned)},X.subtract=function(O){return r(O)||(O=c(O)),this.add(O.neg())},X.sub=X.subtract,X.multiply=function(O){if(this.isZero()||(r(O)||(O=c(O)),O.isZero()))return D;if(this.eq(V))return O.isOdd()?V:D;if(O.eq(V))return this.isOdd()?V:D;if(this.isNegative())return O.isNegative()?this.neg().mul(O.neg()):this.neg().mul(O).neg();if(O.isNegative())return this.mul(O.neg()).neg();if(this.lt(R)&&O.lt(R))return a(this.toNumber()*O.toNumber(),this.unsigned);var U=this.high>>>16,re=this.high&65535,ee=this.low>>>16,pe=this.low&65535,je=O.high>>>16,qe=O.high&65535,We=O.low>>>16,ot=O.low&65535,gt=0,Pt=0,Dt=0,nr=0;return nr+=pe*ot,Dt+=nr>>>16,nr&=65535,Dt+=ee*ot,Pt+=Dt>>>16,Dt&=65535,Dt+=pe*We,Pt+=Dt>>>16,Dt&=65535,Pt+=re*ot,gt+=Pt>>>16,Pt&=65535,Pt+=ee*We,gt+=Pt>>>16,Pt&=65535,Pt+=pe*qe,gt+=Pt>>>16,Pt&=65535,gt+=U*ot+re*We+ee*qe+pe*je,gt&=65535,o(Dt<<16|nr,gt<<16|Pt,this.unsigned)},X.mul=X.multiply,X.divide=function(O){if(r(O)||(O=c(O)),O.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?H:D;var U,re,ee;if(this.unsigned){if(O.unsigned||(O=O.toUnsigned()),O.gt(this))return H;if(O.gt(this.shru(1)))return $;ee=H}else{if(this.eq(V)){if(O.eq(W)||O.eq(J))return V;if(O.eq(V))return W;var pe=this.shr(1);return U=pe.div(O).shl(1),U.eq(D)?O.isNegative()?W:J:(re=this.sub(O.mul(U)),ee=U.add(re.div(O)),ee)}else if(O.eq(V))return this.unsigned?H:D;if(this.isNegative())return O.isNegative()?this.neg().div(O.neg()):this.neg().div(O).neg();if(O.isNegative())return this.div(O.neg()).neg();ee=D}for(re=this;re.gte(O);){U=Math.max(1,Math.floor(re.toNumber()/O.toNumber()));for(var je=Math.ceil(Math.log(U)/Math.LN2),qe=je<=48?1:s(2,je-48),We=a(U),ot=We.mul(O);ot.isNegative()||ot.gt(re);)U-=qe,We=a(U,this.unsigned),ot=We.mul(O);We.isZero()&&(We=W),ee=ee.add(We),re=re.sub(ot)}return ee},X.div=X.divide,X.modulo=function(O){return r(O)||(O=c(O)),this.sub(this.div(O).mul(O))},X.mod=X.modulo,X.not=function(){return o(~this.low,~this.high,this.unsigned)},X.and=function(O){return r(O)||(O=c(O)),o(this.low&O.low,this.high&O.high,this.unsigned)},X.or=function(O){return r(O)||(O=c(O)),o(this.low|O.low,this.high|O.high,this.unsigned)},X.xor=function(O){return r(O)||(O=c(O)),o(this.low^O.low,this.high^O.high,this.unsigned)},X.shiftLeft=function(O){return r(O)&&(O=O.toInt()),(O&=63)===0?this:O<32?o(this.low<<O,this.high<<O|this.low>>>32-O,this.unsigned):o(0,this.low<<O-32,this.unsigned)},X.shl=X.shiftLeft,X.shiftRight=function(O){return r(O)&&(O=O.toInt()),(O&=63)===0?this:O<32?o(this.low>>>O|this.high<<32-O,this.high>>O,this.unsigned):o(this.high>>O-32,this.high>=0?0:-1,this.unsigned)},X.shr=X.shiftRight,X.shiftRightUnsigned=function(O){if(r(O)&&(O=O.toInt()),O&=63,O===0)return this;var U=this.high;if(O<32){var re=this.low;return o(re>>>O|U<<32-O,U>>>O,this.unsigned)}else return O===32?o(U,0,this.unsigned):o(U>>>O-32,0,this.unsigned)},X.shru=X.shiftRightUnsigned,X.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},X.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},X.toBytes=function(I){return I?this.toBytesLE():this.toBytesBE()},X.toBytesLE=function(){var I=this.high,O=this.low;return[O&255,O>>>8&255,O>>>16&255,O>>>24&255,I&255,I>>>8&255,I>>>16&255,I>>>24&255]},X.toBytesBE=function(){var I=this.high,O=this.low;return[I>>>24&255,I>>>16&255,I>>>8&255,I&255,O>>>24&255,O>>>16&255,O>>>8&255,O&255]},t})});var OJ=mr(y3=>{y3.read=function(t,r,e,n,i){var a,o,s=i*8-n-1,u=(1<<s)-1,c=u>>1,h=-7,p=e?i-1:0,v=e?-1:1,x=t[r+p];for(p+=v,a=x&(1<<-h)-1,x>>=-h,h+=s;h>0;a=a*256+t[r+p],p+=v,h-=8);for(o=a&(1<<-h)-1,a>>=-h,h+=n;h>0;o=o*256+t[r+p],p+=v,h-=8);if(a===0)a=1-c;else{if(a===u)return o?NaN:(x?-1:1)*(1/0);o=o+Math.pow(2,n),a=a-c}return(x?-1:1)*o*Math.pow(2,a-n)};y3.write=function(t,r,e,n,i,a){var o,s,u,c=a*8-i-1,h=(1<<c)-1,p=h>>1,v=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=n?0:a-1,E=n?1:-1,R=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(s=isNaN(r)?1:0,o=h):(o=Math.floor(Math.log(r)/Math.LN2),r*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+p>=1?r+=v/u:r+=v*Math.pow(2,1-p),r*u>=2&&(o++,u/=2),o+p>=h?(s=0,o=h):o+p>=1?(s=(r*u-1)*Math.pow(2,i),o=o+p):(s=r*Math.pow(2,p-1)*Math.pow(2,i),o=0));i>=8;t[e+x]=s&255,x+=E,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;t[e+x]=o&255,x+=E,o/=256,c-=8);t[e+x-E]|=R*128}});var BJ=mr((v6t,kJ)=>{"use strict";kJ.exports=qa;var HS=OJ();function qa(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}qa.Varint=0;qa.Fixed64=1;qa.Bytes=2;qa.Fixed32=5;var _3=(1<<16)*(1<<16),MJ=1/_3,gMe=12,LJ=typeof TextDecoder>"u"?null:new TextDecoder("utf8");qa.prototype={destroy:function(){this.buf=null},readFields:function(t,r,e){for(e=e||this.length;this.pos<e;){var n=this.readVarint(),i=n>>3,a=this.pos;this.type=n&7,t(i,r,this),this.pos===a&&this.skip(n)}return r},readMessage:function(t,r){return this.readFields(t,r,this.readVarint()+this.pos)},readFixed32:function(){var t=WS(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=RJ(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=WS(this.buf,this.pos)+WS(this.buf,this.pos+4)*_3;return this.pos+=8,t},readSFixed64:function(){var t=WS(this.buf,this.pos)+RJ(this.buf,this.pos+4)*_3;return this.pos+=8,t},readFloat:function(){var t=HS.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=HS.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var r=this.buf,e,n;return n=r[this.pos++],e=n&127,n<128||(n=r[this.pos++],e|=(n&127)<<7,n<128)||(n=r[this.pos++],e|=(n&127)<<14,n<128)||(n=r[this.pos++],e|=(n&127)<<21,n<128)?e:(n=r[this.pos],e|=(n&15)<<28,AMe(e,t,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,r=this.pos;return this.pos=t,t-r>=gMe&&LJ?RMe(this.buf,r,t):IMe(this.buf,r,t)},readBytes:function(){var t=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,t);return this.pos=t,r},readPackedVarint:function(t,r){if(this.type!==qa.Bytes)return t.push(this.readVarint(r));var e=Rp(this);for(t=t||[];this.pos<e;)t.push(this.readVarint(r));return t},readPackedSVarint:function(t){if(this.type!==qa.Bytes)return t.push(this.readSVarint());var r=Rp(this);for(t=t||[];this.pos<r;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==qa.Bytes)return t.push(this.readBoolean());var r=Rp(this);for(t=t||[];this.pos<r;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==qa.Bytes)return t.push(this.readFloat());var r=Rp(this);for(t=t||[];this.pos<r;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==qa.Bytes)return t.push(this.readDouble());var r=Rp(this);for(t=t||[];this.pos<r;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==qa.Bytes)return t.push(this.readFixed32());var r=Rp(this);for(t=t||[];this.pos<r;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==qa.Bytes)return t.push(this.readSFixed32());var r=Rp(this);for(t=t||[];this.pos<r;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==qa.Bytes)return t.push(this.readFixed64());var r=Rp(this);for(t=t||[];this.pos<r;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==qa.Bytes)return t.push(this.readSFixed64());var r=Rp(this);for(t=t||[];this.pos<r;)t.push(this.readSFixed64());return t},skip:function(t){var r=t&7;if(r===qa.Varint)for(;this.buf[this.pos++]>127;);else if(r===qa.Bytes)this.pos=this.readVarint()+this.pos;else if(r===qa.Fixed32)this.pos+=4;else if(r===qa.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+r)},writeTag:function(t,r){this.writeVarint(t<<3|r)},realloc:function(t){for(var r=this.length||16;r<this.pos+t;)r*=2;if(r!==this.length){var e=new Uint8Array(r);e.set(this.buf),this.buf=e,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),E0(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),E0(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),E0(this.buf,t&-1,this.pos),E0(this.buf,Math.floor(t*MJ),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),E0(this.buf,t&-1,this.pos),E0(this.buf,Math.floor(t*MJ),this.pos+4),this.pos+=8},writeVarint:function(t){if(t=+t||0,t>268435455||t<0){yMe(t,this);return}this.realloc(4),this.buf[this.pos++]=t&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=(t>>>=7)&127|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=t>>>7&127)))},writeSVarint:function(t){this.writeVarint(t<0?-t*2-1:t*2)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(t.length*4),this.pos++;var r=this.pos;this.pos=LMe(this.buf,t,this.pos);var e=this.pos-r;e>=128&&IJ(r,e,this),this.pos=r-1,this.writeVarint(e),this.pos+=e},writeFloat:function(t){this.realloc(4),HS.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),HS.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var r=t.length;this.writeVarint(r),this.realloc(r);for(var e=0;e<r;e++)this.buf[this.pos++]=t[e]},writeRawMessage:function(t,r){this.pos++;var e=this.pos;t(r,this);var n=this.pos-e;n>=128&&IJ(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,r,e){this.writeTag(t,qa.Bytes),this.writeRawMessage(r,e)},writePackedVarint:function(t,r){r.length&&this.writeMessage(t,xMe,r)},writePackedSVarint:function(t,r){r.length&&this.writeMessage(t,wMe,r)},writePackedBoolean:function(t,r){r.length&&this.writeMessage(t,EMe,r)},writePackedFloat:function(t,r){r.length&&this.writeMessage(t,TMe,r)},writePackedDouble:function(t,r){r.length&&this.writeMessage(t,SMe,r)},writePackedFixed32:function(t,r){r.length&&this.writeMessage(t,CMe,r)},writePackedSFixed32:function(t,r){r.length&&this.writeMessage(t,PMe,r)},writePackedFixed64:function(t,r){r.length&&this.writeMessage(t,OMe,r)},writePackedSFixed64:function(t,r){r.length&&this.writeMessage(t,MMe,r)},writeBytesField:function(t,r){this.writeTag(t,qa.Bytes),this.writeBytes(r)},writeFixed32Field:function(t,r){this.writeTag(t,qa.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(t,r){this.writeTag(t,qa.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(t,r){this.writeTag(t,qa.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(t,r){this.writeTag(t,qa.Fixed64),this.writeSFixed64(r)},writeVarintField:function(t,r){this.writeTag(t,qa.Varint),this.writeVarint(r)},writeSVarintField:function(t,r){this.writeTag(t,qa.Varint),this.writeSVarint(r)},writeStringField:function(t,r){this.writeTag(t,qa.Bytes),this.writeString(r)},writeFloatField:function(t,r){this.writeTag(t,qa.Fixed32),this.writeFloat(r)},writeDoubleField:function(t,r){this.writeTag(t,qa.Fixed64),this.writeDouble(r)},writeBooleanField:function(t,r){this.writeVarintField(t,Boolean(r))}};function AMe(t,r,e){var n=e.buf,i,a;if(a=n[e.pos++],i=(a&112)>>4,a<128||(a=n[e.pos++],i|=(a&127)<<3,a<128)||(a=n[e.pos++],i|=(a&127)<<10,a<128)||(a=n[e.pos++],i|=(a&127)<<17,a<128)||(a=n[e.pos++],i|=(a&127)<<24,a<128)||(a=n[e.pos++],i|=(a&1)<<31,a<128))return S0(t,i,r);throw new Error("Expected varint not more than 10 bytes")}function Rp(t){return t.type===qa.Bytes?t.readVarint()+t.pos:t.pos+1}function S0(t,r,e){return e?r*4294967296+(t>>>0):(r>>>0)*4294967296+(t>>>0)}function yMe(t,r){var e,n;if(t>=0?(e=t%4294967296|0,n=t/4294967296|0):(e=~(-t%4294967296),n=~(-t/4294967296),e^4294967295?e=e+1|0:(e=0,n=n+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),_Me(e,n,r),bMe(n,r)}function _Me(t,r,e){e.buf[e.pos++]=t&127|128,t>>>=7,e.buf[e.pos++]=t&127|128,t>>>=7,e.buf[e.pos++]=t&127|128,t>>>=7,e.buf[e.pos++]=t&127|128,t>>>=7,e.buf[e.pos]=t&127}function bMe(t,r){var e=(t&7)<<4;r.buf[r.pos++]|=e|((t>>>=3)?128:0),t&&(r.buf[r.pos++]=t&127|((t>>>=7)?128:0),t&&(r.buf[r.pos++]=t&127|((t>>>=7)?128:0),t&&(r.buf[r.pos++]=t&127|((t>>>=7)?128:0),t&&(r.buf[r.pos++]=t&127|((t>>>=7)?128:0),t&&(r.buf[r.pos++]=t&127)))))}function IJ(t,r,e){var n=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(Math.LN2*7));e.realloc(n);for(var i=e.pos-1;i>=t;i--)e.buf[i+n]=e.buf[i]}function xMe(t,r){for(var e=0;e<t.length;e++)r.writeVarint(t[e])}function wMe(t,r){for(var e=0;e<t.length;e++)r.writeSVarint(t[e])}function TMe(t,r){for(var e=0;e<t.length;e++)r.writeFloat(t[e])}function SMe(t,r){for(var e=0;e<t.length;e++)r.writeDouble(t[e])}function EMe(t,r){for(var e=0;e<t.length;e++)r.writeBoolean(t[e])}function CMe(t,r){for(var e=0;e<t.length;e++)r.writeFixed32(t[e])}function PMe(t,r){for(var e=0;e<t.length;e++)r.writeSFixed32(t[e])}function OMe(t,r){for(var e=0;e<t.length;e++)r.writeFixed64(t[e])}function MMe(t,r){for(var e=0;e<t.length;e++)r.writeSFixed64(t[e])}function WS(t,r){return(t[r]|t[r+1]<<8|t[r+2]<<16)+t[r+3]*16777216}function E0(t,r,e){t[e]=r,t[e+1]=r>>>8,t[e+2]=r>>>16,t[e+3]=r>>>24}function RJ(t,r){return(t[r]|t[r+1]<<8|t[r+2]<<16)+(t[r+3]<<24)}function IMe(t,r,e){for(var n="",i=r;i<e;){var a=t[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s>e)break;var u,c,h;s===1?a<128&&(o=a):s===2?(u=t[i+1],(u&192)===128&&(o=(a&31)<<6|u&63,o<=127&&(o=null))):s===3?(u=t[i+1],c=t[i+2],(u&192)===128&&(c&192)===128&&(o=(a&15)<<12|(u&63)<<6|c&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):s===4&&(u=t[i+1],c=t[i+2],h=t[i+3],(u&192)===128&&(c&192)===128&&(h&192)===128&&(o=(a&15)<<18|(u&63)<<12|(c&63)<<6|h&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,s=1):o>65535&&(o-=65536,n+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),n+=String.fromCharCode(o),i+=s}return n}function RMe(t,r,e){return LJ.decode(t.subarray(r,e))}function LMe(t,r,e){for(var n=0,i,a;n<r.length;n++){if(i=r.charCodeAt(n),i>55295&&i<57344)if(a)if(i<56320){t[e++]=239,t[e++]=191,t[e++]=189,a=i;continue}else i=a-55296<<10|i-56320|65536,a=null;else{i>56319||n+1===r.length?(t[e++]=239,t[e++]=191,t[e++]=189):a=i;continue}else a&&(t[e++]=239,t[e++]=191,t[e++]=189,a=null);i<128?t[e++]=i:(i<2048?t[e++]=i>>6|192:(i<65536?t[e++]=i>>12|224:(t[e++]=i>>18|240,t[e++]=i>>12&63|128),t[e++]=i>>6&63|128),t[e++]=i&63|128)}return e}});var yQ=mr((Z1,$S)=>{(function(t){"use strict";var r="Compound",e="Identifier",n="MemberExpression",i="Literal",a="ThisExpression",o="CallExpression",s="UnaryExpression",u="BinaryExpression",c="LogicalExpression",h="ConditionalExpression",p="ArrayExpression",v=46,x=44,E=39,R=34,D=40,H=41,W=91,$=93,J=63,B=59,se=58,V=function(Nt,Ut){var Or=new Error(Nt+" at character "+Ut);throw Or.index=Ut,Or.description=Nt,Or},X=!0,I={"-":X,"!":X,"~":X,"+":X},O={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},U=function(Nt){var Ut=0,Or;for(var he in Nt)(Or=he.length)>Ut&&Nt.hasOwnProperty(he)&&(Ut=Or);return Ut},re=U(I),ee=U(O),pe={true:!0,false:!1,null:null},je="this",qe=function(Nt){return O[Nt]||0},We=function(Nt,Ut,Or){var he=Nt==="||"||Nt==="&&"?c:u;return{type:he,operator:Nt,left:Ut,right:Or}},ot=function(Nt){return Nt>=48&&Nt<=57},gt=function(Nt){return Nt===36||Nt===95||Nt>=65&&Nt<=90||Nt>=97&&Nt<=122||Nt>=128&&!O[String.fromCharCode(Nt)]},Pt=function(Nt){return Nt===36||Nt===95||Nt>=65&&Nt<=90||Nt>=97&&Nt<=122||Nt>=48&&Nt<=57||Nt>=128&&!O[String.fromCharCode(Nt)]},Dt=function(Nt){for(var Ut=0,Or=Nt.charAt,he=Nt.charCodeAt,xe=function(jr){return Or.call(Nt,jr)},Ge=function(jr){return he.call(Nt,jr)},bt=Nt.length,Kt=function(){for(var jr=Ge(Ut);jr===32||jr===9||jr===10||jr===13;)jr=Ge(++Ut)},Gt=function(){var jr=an(),Jr,Br;if(Kt(),Ge(Ut)===J){if(Ut++,Jr=Gt(),Jr||V("Expected expression",Ut),Kt(),Ge(Ut)===se)return Ut++,Br=Gt(),Br||V("Expected expression",Ut),{type:h,test:jr,consequent:Jr,alternate:Br};V("Expected :",Ut)}else return jr},tn=function(){Kt();for(var jr,Jr=Nt.substr(Ut,ee),Br=Jr.length;Br>0;){if(O.hasOwnProperty(Jr)&&(!gt(Ge(Ut))||Ut+Jr.length<Nt.length&&!Pt(Ge(Ut+Jr.length))))return Ut+=Br,Jr;Jr=Jr.substr(0,--Br)}return!1},an=function(){var jr,Jr,Br,Gi,Li,Ua,_a,Bo,Ka;if(_a=Fn(),Br=tn(),!Br)return _a;for(Ua={value:Br,prec:qe(Br)},Bo=Fn(),Bo||V("Expected expression after "+Br,Ut),Li=[_a,Ua,Bo];(Br=tn())&&(Gi=qe(Br),Gi!==0);){for(Ua={value:Br,prec:Gi};Li.length>2&&Gi<=Li[Li.length-2].prec;)Bo=Li.pop(),Br=Li.pop().value,_a=Li.pop(),Jr=We(Br,_a,Bo),Li.push(Jr);Jr=Fn(),Jr||V("Expected expression after "+Br,Ut),Li.push(Ua,Jr)}for(Ka=Li.length-1,Jr=Li[Ka];Ka>1;)Jr=We(Li[Ka-1].value,Li[Ka-2],Jr),Ka-=2;return Jr},Fn=function(){var jr,Jr,Br;if(Kt(),jr=Ge(Ut),ot(jr)||jr===v)return wr();if(jr===E||jr===R)return Nn();if(jr===W)return Hn();for(Jr=Nt.substr(Ut,re),Br=Jr.length;Br>0;){if(I.hasOwnProperty(Jr)&&(!gt(Ge(Ut))||Ut+Jr.length<Nt.length&&!Pt(Ge(Ut+Jr.length))))return Ut+=Br,{type:s,operator:Jr,argument:Fn(),prefix:!0};Jr=Jr.substr(0,--Br)}return gt(jr)||jr===D?ka():!1},wr=function(){for(var jr="",Jr,Br;ot(Ge(Ut));)jr+=xe(Ut++);if(Ge(Ut)===v)for(jr+=xe(Ut++);ot(Ge(Ut));)jr+=xe(Ut++);if(Jr=xe(Ut),Jr==="e"||Jr==="E"){for(jr+=xe(Ut++),Jr=xe(Ut),(Jr==="+"||Jr==="-")&&(jr+=xe(Ut++));ot(Ge(Ut));)jr+=xe(Ut++);ot(Ge(Ut-1))||V("Expected exponent ("+jr+xe(Ut)+")",Ut)}return Br=Ge(Ut),gt(Br)?V("Variable names cannot start with a number ("+jr+xe(Ut)+")",Ut):Br===v&&V("Unexpected period",Ut),{type:i,value:parseFloat(jr),raw:jr}},Nn=function(){for(var jr="",Jr=xe(Ut++),Br=!1,Gi;Ut<bt;)if(Gi=xe(Ut++),Gi===Jr){Br=!0;break}else if(Gi==="\\")switch(Gi=xe(Ut++),Gi){case"n":jr+=`
`;break;case"r":jr+="\r";break;case"t":jr+="	";break;case"b":jr+="\b";break;case"f":jr+="\f";break;case"v":jr+="\v";break;default:jr+=Gi}else jr+=Gi;return Br||V('Unclosed quote after "'+jr+'"',Ut),{type:i,value:jr,raw:Jr+jr+Jr}},pi=function(){var jr=Ge(Ut),Jr=Ut,Br;for(gt(jr)?Ut++:V("Unexpected "+xe(Ut),Ut);Ut<bt&&(jr=Ge(Ut),Pt(jr));)Ut++;return Br=Nt.slice(Jr,Ut),pe.hasOwnProperty(Br)?{type:i,value:pe[Br],raw:Br}:Br===je?{type:a}:{type:e,name:Br}},Ti=function(jr){for(var Jr,Br=[],Gi,Li=!1;Ut<bt;)if(Kt(),Jr=Ge(Ut),Jr===jr){Li=!0,Ut++;break}else Jr===x?Ut++:(Gi=Gt(),(!Gi||Gi.type===r)&&V("Expected comma",Ut),Br.push(Gi));return Li||V("Expected "+String.fromCharCode(jr),Ut),Br},ka=function(){var jr,Jr;for(jr=Ge(Ut),jr===D?Jr=si():Jr=pi(),Kt(),jr=Ge(Ut);jr===v||jr===W||jr===D;)Ut++,jr===v?(Kt(),Jr={type:n,computed:!1,object:Jr,property:pi()}):jr===W?(Jr={type:n,computed:!0,object:Jr,property:Gt()},Kt(),jr=Ge(Ut),jr!==$&&V("Unclosed [",Ut),Ut++):jr===D&&(Jr={type:o,arguments:Ti(H),callee:Jr}),Kt(),jr=Ge(Ut);return Jr},si=function(){Ut++;var jr=Gt();if(Kt(),Ge(Ut)===H)return Ut++,jr;V("Unclosed (",Ut)},Hn=function(){return Ut++,{type:p,elements:Ti($)}},Di=[],Yi,di;Ut<bt;)Yi=Ge(Ut),Yi===B||Yi===x?Ut++:(di=Gt())?Di.push(di):Ut<bt&&V('Unexpected "'+xe(Ut)+'"',Ut);return Di.length===1?Di[0]:{type:r,body:Di}};if(Dt.version="0.3.4",Dt.toString=function(){return"JavaScript Expression Parser (JSEP) v"+Dt.version},Dt.addUnaryOp=function(Nt){return re=Math.max(Nt.length,re),I[Nt]=X,this},Dt.addBinaryOp=function(Nt,Ut){return ee=Math.max(Nt.length,ee),O[Nt]=Ut,this},Dt.addLiteral=function(Nt,Ut){return pe[Nt]=Ut,this},Dt.removeUnaryOp=function(Nt){return delete I[Nt],Nt.length===re&&(re=U(I)),this},Dt.removeAllUnaryOps=function(){return I={},re=0,this},Dt.removeBinaryOp=function(Nt){return delete O[Nt],Nt.length===ee&&(ee=U(O)),this},Dt.removeAllBinaryOps=function(){return O={},ee=0,this},Dt.removeLiteral=function(Nt){return delete pe[Nt],this},Dt.removeAllLiterals=function(){return pe={},this},typeof Z1>"u"){var nr=t.jsep;t.jsep=Dt,Dt.noConflict=function(){return t.jsep===Dt&&(t.jsep=nr),Dt}}else typeof $S<"u"&&$S.exports?Z1=$S.exports=Dt:Z1.parse=Dt})(Z1)});var EQ=mr((c5t,SQ)=>{var R3=yQ(),JS={"||":function(t,r){return t||r},"&&":function(t,r){return t&&r},"|":function(t,r){return t|r},"^":function(t,r){return t^r},"&":function(t,r){return t&r},"==":function(t,r){return t==r},"!=":function(t,r){return t!=r},"===":function(t,r){return t===r},"!==":function(t,r){return t!==r},"<":function(t,r){return t<r},">":function(t,r){return t>r},"<=":function(t,r){return t<=r},">=":function(t,r){return t>=r},"<<":function(t,r){return t<<r},">>":function(t,r){return t>>r},">>>":function(t,r){return t>>>r},"+":function(t,r){return t+r},"-":function(t,r){return t-r},"*":function(t,r){return t*r},"/":function(t,r){return t/r},"%":function(t,r){return t%r}},TQ={"-":function(t){return-t},"+":function(t){return+t},"~":function(t){return~t},"!":function(t){return!t}};function _Q(t,r){return t.map(function(e){return Lu(e,r)})}async function bQ(t,r){return await Promise.all(t.map(n=>ku(n,r)))}function xQ(t,r){let e=Lu(t.object,r);return t.computed?[e,e[Lu(t.property,r)]]:[e,e[t.property.name]]}async function wQ(t,r){let e=await ku(t.object,r);return t.computed?[e,e[await ku(t.property,r)]]:[e,e[t.property.name]]}function Lu(t,r){switch(t.type){case"ArrayExpression":return _Q(t.elements,r);case"BinaryExpression":return JS[t.operator](Lu(t.left,r),Lu(t.right,r));case"CallExpression":let e,n,i;return t.callee.type==="MemberExpression"?(i=xQ(t.callee,r),e=i[0],n=i[1]):n=Lu(t.callee,r),typeof n!="function"?void 0:n.apply(e,_Q(t.arguments,r));case"ConditionalExpression":return Lu(t.test,r)?Lu(t.consequent,r):Lu(t.alternate,r);case"Identifier":return r[t.name];case"Literal":return t.value;case"LogicalExpression":return t.operator==="||"?Lu(t.left,r)||Lu(t.right,r):t.operator==="&&"?Lu(t.left,r)&&Lu(t.right,r):JS[t.operator](Lu(t.left,r),Lu(t.right,r));case"MemberExpression":return xQ(t,r)[1];case"ThisExpression":return r;case"UnaryExpression":return TQ[t.operator](Lu(t.argument,r));default:return}}async function ku(t,r){switch(t.type){case"ArrayExpression":return await bQ(t.elements,r);case"BinaryExpression":{let[a,o]=await Promise.all([ku(t.left,r),ku(t.right,r)]);return JS[t.operator](a,o)}case"CallExpression":let e,n,i;return t.callee.type==="MemberExpression"?(i=await wQ(t.callee,r),e=i[0],n=i[1]):n=await ku(t.callee,r),typeof n!="function"?void 0:await n.apply(e,await bQ(t.arguments,r));case"ConditionalExpression":return await ku(t.test,r)?await ku(t.consequent,r):await ku(t.alternate,r);case"Identifier":return r[t.name];case"Literal":return t.value;case"LogicalExpression":{if(t.operator==="||")return await ku(t.left,r)||await ku(t.right,r);if(t.operator==="&&")return await ku(t.left,r)&&await ku(t.right,r);let[a,o]=await Promise.all([ku(t.left,r),ku(t.right,r)]);return JS[t.operator](a,o)}case"MemberExpression":return(await wQ(t,r))[1];case"ThisExpression":return r;case"UnaryExpression":return TQ[t.operator](await ku(t.argument,r));default:return}}function CIe(t){return Lu.bind(null,R3(t))}function PIe(t){return ku.bind(null,R3(t))}SQ.exports={parse:R3,eval:Lu,evalAsync:ku,compile:CIe,compileAsync:PIe}});var DQ=mr((uGt,BQ)=>{"use strict";var NIe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";BQ.exports=NIe});var UQ=mr((lGt,zQ)=>{"use strict";var zIe=DQ();function FQ(){}function NQ(){}NQ.resetWarningCache=FQ;zQ.exports=function(){function t(n,i,a,o,s,u){if(u!==zIe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function r(){return t}var e={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:r,element:t,elementType:t,instanceOf:r,node:t,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:NQ,resetWarningCache:FQ};return e.PropTypes=e,e}});var GQ=mr((hGt,jQ)=>{jQ.exports=UQ()();var cGt,fGt});var QQ=mr(oE=>{"use strict";oE.byteLength=sRe;oE.toByteArray=lRe;oE.fromByteArray=hRe;var Ph=[],Qc=[],oRe=typeof Uint8Array<"u"?Uint8Array:Array,H3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Mv=0,$Q=H3.length;Mv<$Q;++Mv)Ph[Mv]=H3[Mv],Qc[H3.charCodeAt(Mv)]=Mv;var Mv,$Q;Qc["-".charCodeAt(0)]=62;Qc["_".charCodeAt(0)]=63;function JQ(t){var r=t.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=t.indexOf("=");e===-1&&(e=r);var n=e===r?0:4-e%4;return[e,n]}function sRe(t){var r=JQ(t),e=r[0],n=r[1];return(e+n)*3/4-n}function uRe(t,r,e){return(r+e)*3/4-e}function lRe(t){var r,e=JQ(t),n=e[0],i=e[1],a=new oRe(uRe(t,n,i)),o=0,s=i>0?n-4:n,u;for(u=0;u<s;u+=4)r=Qc[t.charCodeAt(u)]<<18|Qc[t.charCodeAt(u+1)]<<12|Qc[t.charCodeAt(u+2)]<<6|Qc[t.charCodeAt(u+3)],a[o++]=r>>16&255,a[o++]=r>>8&255,a[o++]=r&255;return i===2&&(r=Qc[t.charCodeAt(u)]<<2|Qc[t.charCodeAt(u+1)]>>4,a[o++]=r&255),i===1&&(r=Qc[t.charCodeAt(u)]<<10|Qc[t.charCodeAt(u+1)]<<4|Qc[t.charCodeAt(u+2)]>>2,a[o++]=r>>8&255,a[o++]=r&255),a}function cRe(t){return Ph[t>>18&63]+Ph[t>>12&63]+Ph[t>>6&63]+Ph[t&63]}function fRe(t,r,e){for(var n,i=[],a=r;a<e;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(cRe(n));return i.join("")}function hRe(t){for(var r,e=t.length,n=e%3,i=[],a=16383,o=0,s=e-n;o<s;o+=a)i.push(fRe(t,o,o+a>s?s:o+a));return n===1?(r=t[e-1],i.push(Ph[r>>2]+Ph[r<<4&63]+"==")):n===2&&(r=(t[e-2]<<8)+t[e-1],i.push(Ph[r>>10]+Ph[r>>4&63]+Ph[r<<2&63]+"=")),i.join("")}});var W3=mr(()=>{});var iee=mr((fVt,nee)=>{function pRe(){this.__data__=[],this.size=0}nee.exports=pRe});var X3=mr((hVt,aee)=>{function dRe(t,r){return t===r||t!==t&&r!==r}aee.exports=dRe});var J1=mr((pVt,oee)=>{var mRe=X3();function vRe(t,r){for(var e=t.length;e--;)if(mRe(t[e][0],r))return e;return-1}oee.exports=vRe});var uee=mr((dVt,see)=>{var gRe=J1(),ARe=Array.prototype,yRe=ARe.splice;function _Re(t){var r=this.__data__,e=gRe(r,t);if(e<0)return!1;var n=r.length-1;return e==n?r.pop():yRe.call(r,e,1),--this.size,!0}see.exports=_Re});var cee=mr((mVt,lee)=>{var bRe=J1();function xRe(t){var r=this.__data__,e=bRe(r,t);return e<0?void 0:r[e][1]}lee.exports=xRe});var hee=mr((vVt,fee)=>{var wRe=J1();function TRe(t){return wRe(this.__data__,t)>-1}fee.exports=TRe});var dee=mr((gVt,pee)=>{var SRe=J1();function ERe(t,r){var e=this.__data__,n=SRe(e,t);return n<0?(++this.size,e.push([t,r])):e[n][1]=r,this}pee.exports=ERe});var Q1=mr((AVt,mee)=>{var CRe=iee(),PRe=uee(),ORe=cee(),MRe=hee(),IRe=dee();function L0(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}L0.prototype.clear=CRe;L0.prototype.delete=PRe;L0.prototype.get=ORe;L0.prototype.has=MRe;L0.prototype.set=IRe;mee.exports=L0});var gee=mr((yVt,vee)=>{var RRe=Q1();function LRe(){this.__data__=new RRe,this.size=0}vee.exports=LRe});var yee=mr((_Vt,Aee)=>{function kRe(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e}Aee.exports=kRe});var bee=mr((bVt,_ee)=>{function BRe(t){return this.__data__.get(t)}_ee.exports=BRe});var wee=mr((xVt,xee)=>{function DRe(t){return this.__data__.has(t)}xee.exports=DRe});var Y3=mr((wVt,Tee)=>{var FRe=typeof global=="object"&&global&&global.Object===Object&&global;Tee.exports=FRe});var Oh=mr((TVt,See)=>{var NRe=Y3(),zRe=typeof self=="object"&&self&&self.Object===Object&&self,URe=NRe||zRe||Function("return this")();See.exports=URe});var uE=mr((SVt,Eee)=>{var jRe=Oh(),GRe=jRe.Symbol;Eee.exports=GRe});var Mee=mr((EVt,Oee)=>{var Cee=uE(),Pee=Object.prototype,VRe=Pee.hasOwnProperty,HRe=Pee.toString,eb=Cee?Cee.toStringTag:void 0;function WRe(t){var r=VRe.call(t,eb),e=t[eb];try{t[eb]=void 0;var n=!0}catch{}var i=HRe.call(t);return n&&(r?t[eb]=e:delete t[eb]),i}Oee.exports=WRe});var Ree=mr((CVt,Iee)=>{var qRe=Object.prototype,XRe=qRe.toString;function YRe(t){return XRe.call(t)}Iee.exports=YRe});var k0=mr((PVt,Bee)=>{var Lee=uE(),KRe=Mee(),ZRe=Ree(),$Re="[object Null]",JRe="[object Undefined]",kee=Lee?Lee.toStringTag:void 0;function QRe(t){return t==null?t===void 0?JRe:$Re:kee&&kee in Object(t)?KRe(t):ZRe(t)}Bee.exports=QRe});var K3=mr((OVt,Dee)=>{function eLe(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}Dee.exports=eLe});var Z3=mr((MVt,Fee)=>{var tLe=k0(),rLe=K3(),nLe="[object AsyncFunction]",iLe="[object Function]",aLe="[object GeneratorFunction]",oLe="[object Proxy]";function sLe(t){if(!rLe(t))return!1;var r=tLe(t);return r==iLe||r==aLe||r==nLe||r==oLe}Fee.exports=sLe});var zee=mr((IVt,Nee)=>{var uLe=Oh(),lLe=uLe["__core-js_shared__"];Nee.exports=lLe});var Gee=mr((RVt,jee)=>{var $3=zee(),Uee=function(){var t=/[^.]+$/.exec($3&&$3.keys&&$3.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function cLe(t){return!!Uee&&Uee in t}jee.exports=cLe});var J3=mr((LVt,Vee)=>{var fLe=Function.prototype,hLe=fLe.toString;function pLe(t){if(t!=null){try{return hLe.call(t)}catch{}try{return t+""}catch{}}return""}Vee.exports=pLe});var Wee=mr((kVt,Hee)=>{var dLe=Z3(),mLe=Gee(),vLe=K3(),gLe=J3(),ALe=/[\\^$.*+?()[\]{}|]/g,yLe=/^\[object .+?Constructor\]$/,_Le=Function.prototype,bLe=Object.prototype,xLe=_Le.toString,wLe=bLe.hasOwnProperty,TLe=RegExp("^"+xLe.call(wLe).replace(ALe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function SLe(t){if(!vLe(t)||mLe(t))return!1;var r=dLe(t)?TLe:yLe;return r.test(gLe(t))}Hee.exports=SLe});var Xee=mr((BVt,qee)=>{function ELe(t,r){return t?.[r]}qee.exports=ELe});var Iv=mr((DVt,Yee)=>{var CLe=Wee(),PLe=Xee();function OLe(t,r){var e=PLe(t,r);return CLe(e)?e:void 0}Yee.exports=OLe});var lE=mr((FVt,Kee)=>{var MLe=Iv(),ILe=Oh(),RLe=MLe(ILe,"Map");Kee.exports=RLe});var tb=mr((NVt,Zee)=>{var LLe=Iv(),kLe=LLe(Object,"create");Zee.exports=kLe});var Qee=mr((zVt,Jee)=>{var $ee=tb();function BLe(){this.__data__=$ee?$ee(null):{},this.size=0}Jee.exports=BLe});var tte=mr((UVt,ete)=>{function DLe(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}ete.exports=DLe});var nte=mr((jVt,rte)=>{var FLe=tb(),NLe="__lodash_hash_undefined__",zLe=Object.prototype,ULe=zLe.hasOwnProperty;function jLe(t){var r=this.__data__;if(FLe){var e=r[t];return e===NLe?void 0:e}return ULe.call(r,t)?r[t]:void 0}rte.exports=jLe});var ate=mr((GVt,ite)=>{var GLe=tb(),VLe=Object.prototype,HLe=VLe.hasOwnProperty;function WLe(t){var r=this.__data__;return GLe?r[t]!==void 0:HLe.call(r,t)}ite.exports=WLe});var ste=mr((VVt,ote)=>{var qLe=tb(),XLe="__lodash_hash_undefined__";function YLe(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=qLe&&r===void 0?XLe:r,this}ote.exports=YLe});var lte=mr((HVt,ute)=>{var KLe=Qee(),ZLe=tte(),$Le=nte(),JLe=ate(),QLe=ste();function B0(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}B0.prototype.clear=KLe;B0.prototype.delete=ZLe;B0.prototype.get=$Le;B0.prototype.has=JLe;B0.prototype.set=QLe;ute.exports=B0});var hte=mr((WVt,fte)=>{var cte=lte(),eke=Q1(),tke=lE();function rke(){this.size=0,this.__data__={hash:new cte,map:new(tke||eke),string:new cte}}fte.exports=rke});var dte=mr((qVt,pte)=>{function nke(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}pte.exports=nke});var rb=mr((XVt,mte)=>{var ike=dte();function ake(t,r){var e=t.__data__;return ike(r)?e[typeof r=="string"?"string":"hash"]:e.map}mte.exports=ake});var gte=mr((YVt,vte)=>{var oke=rb();function ske(t){var r=oke(this,t).delete(t);return this.size-=r?1:0,r}vte.exports=ske});var yte=mr((KVt,Ate)=>{var uke=rb();function lke(t){return uke(this,t).get(t)}Ate.exports=lke});var bte=mr((ZVt,_te)=>{var cke=rb();function fke(t){return cke(this,t).has(t)}_te.exports=fke});var wte=mr(($Vt,xte)=>{var hke=rb();function pke(t,r){var e=hke(this,t),n=e.size;return e.set(t,r),this.size+=e.size==n?0:1,this}xte.exports=pke});var Q3=mr((JVt,Tte)=>{var dke=hte(),mke=gte(),vke=yte(),gke=bte(),Ake=wte();function D0(t){var r=-1,e=t==null?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}D0.prototype.clear=dke;D0.prototype.delete=mke;D0.prototype.get=vke;D0.prototype.has=gke;D0.prototype.set=Ake;Tte.exports=D0});var Ete=mr((QVt,Ste)=>{var yke=Q1(),_ke=lE(),bke=Q3(),xke=200;function wke(t,r){var e=this.__data__;if(e instanceof yke){var n=e.__data__;if(!_ke||n.length<xke-1)return n.push([t,r]),this.size=++e.size,this;e=this.__data__=new bke(n)}return e.set(t,r),this.size=e.size,this}Ste.exports=wke});var Pte=mr((e9t,Cte)=>{var Tke=Q1(),Ske=gee(),Eke=yee(),Cke=bee(),Pke=wee(),Oke=Ete();function F0(t){var r=this.__data__=new Tke(t);this.size=r.size}F0.prototype.clear=Ske;F0.prototype.delete=Eke;F0.prototype.get=Cke;F0.prototype.has=Pke;F0.prototype.set=Oke;Cte.exports=F0});var Mte=mr((t9t,Ote)=>{var Mke="__lodash_hash_undefined__";function Ike(t){return this.__data__.set(t,Mke),this}Ote.exports=Ike});var Rte=mr((r9t,Ite)=>{function Rke(t){return this.__data__.has(t)}Ite.exports=Rke});var kte=mr((n9t,Lte)=>{var Lke=Q3(),kke=Mte(),Bke=Rte();function cE(t){var r=-1,e=t==null?0:t.length;for(this.__data__=new Lke;++r<e;)this.add(t[r])}cE.prototype.add=cE.prototype.push=kke;cE.prototype.has=Bke;Lte.exports=cE});var Dte=mr((i9t,Bte)=>{function Dke(t,r){for(var e=-1,n=t==null?0:t.length;++e<n;)if(r(t[e],e,t))return!0;return!1}Bte.exports=Dke});var Nte=mr((a9t,Fte)=>{function Fke(t,r){return t.has(r)}Fte.exports=Fke});var eB=mr((o9t,zte)=>{var Nke=kte(),zke=Dte(),Uke=Nte(),jke=1,Gke=2;function Vke(t,r,e,n,i,a){var o=e&jke,s=t.length,u=r.length;if(s!=u&&!(o&&u>s))return!1;var c=a.get(t),h=a.get(r);if(c&&h)return c==r&&h==t;var p=-1,v=!0,x=e&Gke?new Nke:void 0;for(a.set(t,r),a.set(r,t);++p<s;){var E=t[p],R=r[p];if(n)var D=o?n(R,E,p,r,t,a):n(E,R,p,t,r,a);if(D!==void 0){if(D)continue;v=!1;break}if(x){if(!zke(r,function(H,W){if(!Uke(x,W)&&(E===H||i(E,H,e,n,a)))return x.push(W)})){v=!1;break}}else if(!(E===R||i(E,R,e,n,a))){v=!1;break}}return a.delete(t),a.delete(r),v}zte.exports=Vke});var jte=mr((s9t,Ute)=>{var Hke=Oh(),Wke=Hke.Uint8Array;Ute.exports=Wke});var Vte=mr((u9t,Gte)=>{function qke(t){var r=-1,e=Array(t.size);return t.forEach(function(n,i){e[++r]=[i,n]}),e}Gte.exports=qke});var Wte=mr((l9t,Hte)=>{function Xke(t){var r=-1,e=Array(t.size);return t.forEach(function(n){e[++r]=n}),e}Hte.exports=Xke});var Zte=mr((c9t,Kte)=>{var qte=uE(),Xte=jte(),Yke=X3(),Kke=eB(),Zke=Vte(),$ke=Wte(),Jke=1,Qke=2,e3e="[object Boolean]",t3e="[object Date]",r3e="[object Error]",n3e="[object Map]",i3e="[object Number]",a3e="[object RegExp]",o3e="[object Set]",s3e="[object String]",u3e="[object Symbol]",l3e="[object ArrayBuffer]",c3e="[object DataView]",Yte=qte?qte.prototype:void 0,tB=Yte?Yte.valueOf:void 0;function f3e(t,r,e,n,i,a,o){switch(e){case c3e:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case l3e:return!(t.byteLength!=r.byteLength||!a(new Xte(t),new Xte(r)));case e3e:case t3e:case i3e:return Yke(+t,+r);case r3e:return t.name==r.name&&t.message==r.message;case a3e:case s3e:return t==r+"";case n3e:var s=Zke;case o3e:var u=n&Jke;if(s||(s=$ke),t.size!=r.size&&!u)return!1;var c=o.get(t);if(c)return c==r;n|=Qke,o.set(t,r);var h=Kke(s(t),s(r),n,i,a,o);return o.delete(t),h;case u3e:if(tB)return tB.call(t)==tB.call(r)}return!1}Kte.exports=f3e});var Jte=mr((f9t,$te)=>{function h3e(t,r){for(var e=-1,n=r.length,i=t.length;++e<n;)t[i+e]=r[e];return t}$te.exports=h3e});var fE=mr((h9t,Qte)=>{var p3e=Array.isArray;Qte.exports=p3e});var tre=mr((p9t,ere)=>{var d3e=Jte(),m3e=fE();function v3e(t,r,e){var n=r(t);return m3e(t)?n:d3e(n,e(t))}ere.exports=v3e});var nre=mr((d9t,rre)=>{function g3e(t,r){for(var e=-1,n=t==null?0:t.length,i=0,a=[];++e<n;){var o=t[e];r(o,e,t)&&(a[i++]=o)}return a}rre.exports=g3e});var are=mr((m9t,ire)=>{function A3e(){return[]}ire.exports=A3e});var ure=mr((v9t,sre)=>{var y3e=nre(),_3e=are(),b3e=Object.prototype,x3e=b3e.propertyIsEnumerable,ore=Object.getOwnPropertySymbols,w3e=ore?function(t){return t==null?[]:(t=Object(t),y3e(ore(t),function(r){return x3e.call(t,r)}))}:_3e;sre.exports=w3e});var cre=mr((g9t,lre)=>{function T3e(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}lre.exports=T3e});var N0=mr((A9t,fre)=>{function S3e(t){return t!=null&&typeof t=="object"}fre.exports=S3e});var pre=mr((y9t,hre)=>{var E3e=k0(),C3e=N0(),P3e="[object Arguments]";function O3e(t){return C3e(t)&&E3e(t)==P3e}hre.exports=O3e});var gre=mr((_9t,vre)=>{var dre=pre(),M3e=N0(),mre=Object.prototype,I3e=mre.hasOwnProperty,R3e=mre.propertyIsEnumerable,L3e=dre(function(){return arguments}())?dre:function(t){return M3e(t)&&I3e.call(t,"callee")&&!R3e.call(t,"callee")};vre.exports=L3e});var yre=mr((b9t,Are)=>{function k3e(){return!1}Are.exports=k3e});var rB=mr((nb,z0)=>{var B3e=Oh(),D3e=yre(),xre=typeof nb=="object"&&nb&&!nb.nodeType&&nb,_re=xre&&typeof z0=="object"&&z0&&!z0.nodeType&&z0,F3e=_re&&_re.exports===xre,bre=F3e?B3e.Buffer:void 0,N3e=bre?bre.isBuffer:void 0,z3e=N3e||D3e;z0.exports=z3e});var Tre=mr((x9t,wre)=>{var U3e=9007199254740991,j3e=/^(?:0|[1-9]\d*)$/;function G3e(t,r){var e=typeof t;return r=r??U3e,!!r&&(e=="number"||e!="symbol"&&j3e.test(t))&&t>-1&&t%1==0&&t<r}wre.exports=G3e});var nB=mr((w9t,Sre)=>{var V3e=9007199254740991;function H3e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=V3e}Sre.exports=H3e});var Cre=mr((T9t,Ere)=>{var W3e=k0(),q3e=nB(),X3e=N0(),Y3e="[object Arguments]",K3e="[object Array]",Z3e="[object Boolean]",$3e="[object Date]",J3e="[object Error]",Q3e="[object Function]",eBe="[object Map]",tBe="[object Number]",rBe="[object Object]",nBe="[object RegExp]",iBe="[object Set]",aBe="[object String]",oBe="[object WeakMap]",sBe="[object ArrayBuffer]",uBe="[object DataView]",lBe="[object Float32Array]",cBe="[object Float64Array]",fBe="[object Int8Array]",hBe="[object Int16Array]",pBe="[object Int32Array]",dBe="[object Uint8Array]",mBe="[object Uint8ClampedArray]",vBe="[object Uint16Array]",gBe="[object Uint32Array]",Vo={};Vo[lBe]=Vo[cBe]=Vo[fBe]=Vo[hBe]=Vo[pBe]=Vo[dBe]=Vo[mBe]=Vo[vBe]=Vo[gBe]=!0;Vo[Y3e]=Vo[K3e]=Vo[sBe]=Vo[Z3e]=Vo[uBe]=Vo[$3e]=Vo[J3e]=Vo[Q3e]=Vo[eBe]=Vo[tBe]=Vo[rBe]=Vo[nBe]=Vo[iBe]=Vo[aBe]=Vo[oBe]=!1;function ABe(t){return X3e(t)&&q3e(t.length)&&!!Vo[W3e(t)]}Ere.exports=ABe});var Ore=mr((S9t,Pre)=>{function yBe(t){return function(r){return t(r)}}Pre.exports=yBe});var Ire=mr((ib,U0)=>{var _Be=Y3(),Mre=typeof ib=="object"&&ib&&!ib.nodeType&&ib,ab=Mre&&typeof U0=="object"&&U0&&!U0.nodeType&&U0,bBe=ab&&ab.exports===Mre,iB=bBe&&_Be.process,xBe=function(){try{var t=ab&&ab.require&&ab.require("util").types;return t||iB&&iB.binding&&iB.binding("util")}catch{}}();U0.exports=xBe});var aB=mr((E9t,kre)=>{var wBe=Cre(),TBe=Ore(),Rre=Ire(),Lre=Rre&&Rre.isTypedArray,SBe=Lre?TBe(Lre):wBe;kre.exports=SBe});var Dre=mr((C9t,Bre)=>{var EBe=cre(),CBe=gre(),PBe=fE(),OBe=rB(),MBe=Tre(),IBe=aB(),RBe=Object.prototype,LBe=RBe.hasOwnProperty;function kBe(t,r){var e=PBe(t),n=!e&&CBe(t),i=!e&&!n&&OBe(t),a=!e&&!n&&!i&&IBe(t),o=e||n||i||a,s=o?EBe(t.length,String):[],u=s.length;for(var c in t)(r||LBe.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||MBe(c,u)))&&s.push(c);return s}Bre.exports=kBe});var Nre=mr((P9t,Fre)=>{var BBe=Object.prototype;function DBe(t){var r=t&&t.constructor,e=typeof r=="function"&&r.prototype||BBe;return t===e}Fre.exports=DBe});var oB=mr((O9t,zre)=>{function FBe(t,r){return function(e){return t(r(e))}}zre.exports=FBe});var jre=mr((M9t,Ure)=>{var NBe=oB(),zBe=NBe(Object.keys,Object);Ure.exports=zBe});var Vre=mr((I9t,Gre)=>{var UBe=Nre(),jBe=jre(),GBe=Object.prototype,VBe=GBe.hasOwnProperty;function HBe(t){if(!UBe(t))return jBe(t);var r=[];for(var e in Object(t))VBe.call(t,e)&&e!="constructor"&&r.push(e);return r}Gre.exports=HBe});var Wre=mr((R9t,Hre)=>{var WBe=Z3(),qBe=nB();function XBe(t){return t!=null&&qBe(t.length)&&!WBe(t)}Hre.exports=XBe});var Xre=mr((L9t,qre)=>{var YBe=Dre(),KBe=Vre(),ZBe=Wre();function $Be(t){return ZBe(t)?YBe(t):KBe(t)}qre.exports=$Be});var Kre=mr((k9t,Yre)=>{var JBe=tre(),QBe=ure(),eDe=Xre();function tDe(t){return JBe(t,eDe,QBe)}Yre.exports=tDe});var Jre=mr((B9t,$re)=>{var Zre=Kre(),rDe=1,nDe=Object.prototype,iDe=nDe.hasOwnProperty;function aDe(t,r,e,n,i,a){var o=e&rDe,s=Zre(t),u=s.length,c=Zre(r),h=c.length;if(u!=h&&!o)return!1;for(var p=u;p--;){var v=s[p];if(!(o?v in r:iDe.call(r,v)))return!1}var x=a.get(t),E=a.get(r);if(x&&E)return x==r&&E==t;var R=!0;a.set(t,r),a.set(r,t);for(var D=o;++p<u;){v=s[p];var H=t[v],W=r[v];if(n)var $=o?n(W,H,v,r,t,a):n(H,W,v,t,r,a);if(!($===void 0?H===W||i(H,W,e,n,a):$)){R=!1;break}D||(D=v=="constructor")}if(R&&!D){var J=t.constructor,B=r.constructor;J!=B&&"constructor"in t&&"constructor"in r&&!(typeof J=="function"&&J instanceof J&&typeof B=="function"&&B instanceof B)&&(R=!1)}return a.delete(t),a.delete(r),R}$re.exports=aDe});var ene=mr((D9t,Qre)=>{var oDe=Iv(),sDe=Oh(),uDe=oDe(sDe,"DataView");Qre.exports=uDe});var rne=mr((F9t,tne)=>{var lDe=Iv(),cDe=Oh(),fDe=lDe(cDe,"Promise");tne.exports=fDe});var ine=mr((N9t,nne)=>{var hDe=Iv(),pDe=Oh(),dDe=hDe(pDe,"Set");nne.exports=dDe});var one=mr((z9t,ane)=>{var mDe=Iv(),vDe=Oh(),gDe=mDe(vDe,"WeakMap");ane.exports=gDe});var dne=mr((U9t,pne)=>{var sB=ene(),uB=lE(),lB=rne(),cB=ine(),fB=one(),hne=k0(),j0=J3(),sne="[object Map]",ADe="[object Object]",une="[object Promise]",lne="[object Set]",cne="[object WeakMap]",fne="[object DataView]",yDe=j0(sB),_De=j0(uB),bDe=j0(lB),xDe=j0(cB),wDe=j0(fB),Rv=hne;(sB&&Rv(new sB(new ArrayBuffer(1)))!=fne||uB&&Rv(new uB)!=sne||lB&&Rv(lB.resolve())!=une||cB&&Rv(new cB)!=lne||fB&&Rv(new fB)!=cne)&&(Rv=function(t){var r=hne(t),e=r==ADe?t.constructor:void 0,n=e?j0(e):"";if(n)switch(n){case yDe:return fne;case _De:return sne;case bDe:return une;case xDe:return lne;case wDe:return cne}return r});pne.exports=Rv});var xne=mr((j9t,bne)=>{var hB=Pte(),TDe=eB(),SDe=Zte(),EDe=Jre(),mne=dne(),vne=fE(),gne=rB(),CDe=aB(),PDe=1,Ane="[object Arguments]",yne="[object Array]",hE="[object Object]",ODe=Object.prototype,_ne=ODe.hasOwnProperty;function MDe(t,r,e,n,i,a){var o=vne(t),s=vne(r),u=o?yne:mne(t),c=s?yne:mne(r);u=u==Ane?hE:u,c=c==Ane?hE:c;var h=u==hE,p=c==hE,v=u==c;if(v&&gne(t)){if(!gne(r))return!1;o=!0,h=!1}if(v&&!h)return a||(a=new hB),o||CDe(t)?TDe(t,r,e,n,i,a):SDe(t,r,u,e,n,i,a);if(!(e&PDe)){var x=h&&_ne.call(t,"__wrapped__"),E=p&&_ne.call(r,"__wrapped__");if(x||E){var R=x?t.value():t,D=E?r.value():r;return a||(a=new hB),i(R,D,e,n,a)}}return v?(a||(a=new hB),EDe(t,r,e,n,i,a)):!1}bne.exports=MDe});var Ene=mr((G9t,Sne)=>{var IDe=xne(),wne=N0();function Tne(t,r,e,n,i){return t===r?!0:t==null||r==null||!wne(t)&&!wne(r)?t!==t&&r!==r:IDe(t,r,e,n,Tne,i)}Sne.exports=Tne});var Pne=mr((V9t,Cne)=>{var RDe=Ene();function LDe(t,r){return RDe(t,r)}Cne.exports=LDe});var Mne=mr((H9t,One)=>{var kDe=oB(),BDe=kDe(Object.getPrototypeOf,Object);One.exports=BDe});var Lne=mr((W9t,Rne)=>{var DDe=k0(),FDe=Mne(),NDe=N0(),zDe="[object Object]",UDe=Function.prototype,jDe=Object.prototype,Ine=UDe.toString,GDe=jDe.hasOwnProperty,VDe=Ine.call(Object);function HDe(t){if(!NDe(t)||DDe(t)!=zDe)return!1;var r=FDe(t);if(r===null)return!0;var e=GDe.call(r,"constructor")&&r.constructor;return typeof e=="function"&&e instanceof e&&Ine.call(e)==VDe}Rne.exports=HDe});var Gne=mr((AB,yB)=>{(function(t,r){typeof AB=="object"&&typeof yB<"u"?yB.exports=r():typeof define=="function"&&define.amd?define("underscore",r):(t=typeof globalThis<"u"?globalThis:t||self,function(){var e=t._,n=t._=r();n.noConflict=function(){return t._=e,n}}())})(AB,function(){var t="1.13.1",r=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},e=Array.prototype,n=Object.prototype,i=typeof Symbol<"u"?Symbol.prototype:null,a=e.push,o=e.slice,s=n.toString,u=n.hasOwnProperty,c=typeof ArrayBuffer<"u",h=typeof DataView<"u",p=Array.isArray,v=Object.keys,x=Object.create,E=c&&ArrayBuffer.isView,R=isNaN,D=isFinite,H=!{toString:null}.propertyIsEnumerable("toString"),W=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],$=Math.pow(2,53)-1;function J(te,Ce){return Ce=Ce==null?te.length-1:+Ce,function(){for(var rt=Math.max(arguments.length-Ce,0),lt=Array(rt),Rt=0;Rt<rt;Rt++)lt[Rt]=arguments[Rt+Ce];switch(Ce){case 0:return te.call(this,lt);case 1:return te.call(this,arguments[0],lt);case 2:return te.call(this,arguments[0],arguments[1],lt)}var Tt=Array(Ce+1);for(Rt=0;Rt<Ce;Rt++)Tt[Rt]=arguments[Rt];return Tt[Ce]=lt,te.apply(this,Tt)}}function B(te){var Ce=typeof te;return Ce==="function"||Ce==="object"&&!!te}function se(te){return te===null}function V(te){return te===void 0}function X(te){return te===!0||te===!1||s.call(te)==="[object Boolean]"}function I(te){return!!(te&&te.nodeType===1)}function O(te){var Ce="[object "+te+"]";return function(rt){return s.call(rt)===Ce}}var U=O("String"),re=O("Number"),ee=O("Date"),pe=O("RegExp"),je=O("Error"),qe=O("Symbol"),We=O("ArrayBuffer"),ot=O("Function"),gt=r.document&&r.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof gt!="function"&&(ot=function(te){return typeof te=="function"||!1});var Pt=ot,Dt=O("Object"),nr=h&&Dt(new DataView(new ArrayBuffer(8))),Nt=typeof Map<"u"&&Dt(new Map),Ut=O("DataView");function Or(te){return te!=null&&Pt(te.getInt8)&&We(te.buffer)}var he=nr?Or:Ut,xe=p||O("Array");function Ge(te,Ce){return te!=null&&u.call(te,Ce)}var bt=O("Arguments");(function(){bt(arguments)||(bt=function(te){return Ge(te,"callee")})})();var Kt=bt;function Gt(te){return!qe(te)&&D(te)&&!isNaN(parseFloat(te))}function tn(te){return re(te)&&R(te)}function an(te){return function(){return te}}function Fn(te){return function(Ce){var rt=te(Ce);return typeof rt=="number"&&rt>=0&&rt<=$}}function wr(te){return function(Ce){return Ce?.[te]}}var Nn=wr("byteLength"),pi=Fn(Nn),Ti=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function ka(te){return E?E(te)&&!he(te):pi(te)&&Ti.test(s.call(te))}var si=c?ka:an(!1),Hn=wr("length");function Di(te){for(var Ce={},rt=te.length,lt=0;lt<rt;++lt)Ce[te[lt]]=!0;return{contains:function(Rt){return Ce[Rt]},push:function(Rt){return Ce[Rt]=!0,te.push(Rt)}}}function Yi(te,Ce){Ce=Di(Ce);var rt=W.length,lt=te.constructor,Rt=Pt(lt)&&lt.prototype||n,Tt="constructor";for(Ge(te,Tt)&&!Ce.contains(Tt)&&Ce.push(Tt);rt--;)Tt=W[rt],Tt in te&&te[Tt]!==Rt[Tt]&&!Ce.contains(Tt)&&Ce.push(Tt)}function di(te){if(!B(te))return[];if(v)return v(te);var Ce=[];for(var rt in te)Ge(te,rt)&&Ce.push(rt);return H&&Yi(te,Ce),Ce}function jr(te){if(te==null)return!0;var Ce=Hn(te);return typeof Ce=="number"&&(xe(te)||U(te)||Kt(te))?Ce===0:Hn(di(te))===0}function Jr(te,Ce){var rt=di(Ce),lt=rt.length;if(te==null)return!lt;for(var Rt=Object(te),Tt=0;Tt<lt;Tt++){var sr=rt[Tt];if(Ce[sr]!==Rt[sr]||!(sr in Rt))return!1}return!0}function Br(te){if(te instanceof Br)return te;if(!(this instanceof Br))return new Br(te);this._wrapped=te}Br.VERSION=t,Br.prototype.value=function(){return this._wrapped},Br.prototype.valueOf=Br.prototype.toJSON=Br.prototype.value,Br.prototype.toString=function(){return String(this._wrapped)};function Gi(te){return new Uint8Array(te.buffer||te,te.byteOffset||0,Nn(te))}var Li="[object DataView]";function Ua(te,Ce,rt,lt){if(te===Ce)return te!==0||1/te===1/Ce;if(te==null||Ce==null)return!1;if(te!==te)return Ce!==Ce;var Rt=typeof te;return Rt!=="function"&&Rt!=="object"&&typeof Ce!="object"?!1:_a(te,Ce,rt,lt)}function _a(te,Ce,rt,lt){te instanceof Br&&(te=te._wrapped),Ce instanceof Br&&(Ce=Ce._wrapped);var Rt=s.call(te);if(Rt!==s.call(Ce))return!1;if(nr&&Rt=="[object Object]"&&he(te)){if(!he(Ce))return!1;Rt=Li}switch(Rt){case"[object RegExp]":case"[object String]":return""+te==""+Ce;case"[object Number]":return+te!=+te?+Ce!=+Ce:+te==0?1/+te===1/Ce:+te==+Ce;case"[object Date]":case"[object Boolean]":return+te==+Ce;case"[object Symbol]":return i.valueOf.call(te)===i.valueOf.call(Ce);case"[object ArrayBuffer]":case Li:return _a(Gi(te),Gi(Ce),rt,lt)}var Tt=Rt==="[object Array]";if(!Tt&&si(te)){var sr=Nn(te);if(sr!==Nn(Ce))return!1;if(te.buffer===Ce.buffer&&te.byteOffset===Ce.byteOffset)return!0;Tt=!0}if(!Tt){if(typeof te!="object"||typeof Ce!="object")return!1;var Nr=te.constructor,ti=Ce.constructor;if(Nr!==ti&&!(Pt(Nr)&&Nr instanceof Nr&&Pt(ti)&&ti instanceof ti)&&"constructor"in te&&"constructor"in Ce)return!1}rt=rt||[],lt=lt||[];for(var jn=rt.length;jn--;)if(rt[jn]===te)return lt[jn]===Ce;if(rt.push(te),lt.push(Ce),Tt){if(jn=te.length,jn!==Ce.length)return!1;for(;jn--;)if(!Ua(te[jn],Ce[jn],rt,lt))return!1}else{var ha=di(te),Pi;if(jn=ha.length,di(Ce).length!==jn)return!1;for(;jn--;)if(Pi=ha[jn],!(Ge(Ce,Pi)&&Ua(te[Pi],Ce[Pi],rt,lt)))return!1}return rt.pop(),lt.pop(),!0}function Bo(te,Ce){return Ua(te,Ce)}function Ka(te){if(!B(te))return[];var Ce=[];for(var rt in te)Ce.push(rt);return H&&Yi(te,Ce),Ce}function Qs(te){var Ce=Hn(te);return function(rt){if(rt==null)return!1;var lt=Ka(rt);if(Hn(lt))return!1;for(var Rt=0;Rt<Ce;Rt++)if(!Pt(rt[te[Rt]]))return!1;return te!==Ss||!Pt(rt[co])}}var co="forEach",fo="has",fs=["clear","delete"],gu=["get",fo,"set"],Hs=fs.concat(co,gu),Ss=fs.concat(gu),Au=["add"].concat(fs,co,fo),yu=Nt?Qs(Hs):O("Map"),ra=Nt?Qs(Ss):O("WeakMap"),ge=Nt?Qs(Au):O("Set"),Te=O("WeakSet");function Oe(te){for(var Ce=di(te),rt=Ce.length,lt=Array(rt),Rt=0;Rt<rt;Rt++)lt[Rt]=te[Ce[Rt]];return lt}function ze(te){for(var Ce=di(te),rt=Ce.length,lt=Array(rt),Rt=0;Rt<rt;Rt++)lt[Rt]=[Ce[Rt],te[Ce[Rt]]];return lt}function Ie(te){for(var Ce={},rt=di(te),lt=0,Rt=rt.length;lt<Rt;lt++)Ce[te[rt[lt]]]=rt[lt];return Ce}function pt(te){var Ce=[];for(var rt in te)Pt(te[rt])&&Ce.push(rt);return Ce.sort()}function At(te,Ce){return function(rt){var lt=arguments.length;if(Ce&&(rt=Object(rt)),lt<2||rt==null)return rt;for(var Rt=1;Rt<lt;Rt++)for(var Tt=arguments[Rt],sr=te(Tt),Nr=sr.length,ti=0;ti<Nr;ti++){var jn=sr[ti];(!Ce||rt[jn]===void 0)&&(rt[jn]=Tt[jn])}return rt}}var De=At(Ka),Qe=At(di),It=At(Ka,!0);function cr(){return function(){}}function dr(te){if(!B(te))return{};if(x)return x(te);var Ce=cr();Ce.prototype=te;var rt=new Ce;return Ce.prototype=null,rt}function $t(te,Ce){var rt=dr(te);return Ce&&Qe(rt,Ce),rt}function lr(te){return B(te)?xe(te)?te.slice():De({},te):te}function Kr(te,Ce){return Ce(te),te}function Dr(te){return xe(te)?te:[te]}Br.toPath=Dr;function qt(te){return Br.toPath(te)}function Lr(te,Ce){for(var rt=Ce.length,lt=0;lt<rt;lt++){if(te==null)return;te=te[Ce[lt]]}return rt?te:void 0}function Er(te,Ce,rt){var lt=Lr(te,qt(Ce));return V(lt)?rt:lt}function _r(te,Ce){Ce=qt(Ce);for(var rt=Ce.length,lt=0;lt<rt;lt++){var Rt=Ce[lt];if(!Ge(te,Rt))return!1;te=te[Rt]}return!!rt}function Wn(te){return te}function Cr(te){return te=Qe({},te),function(Ce){return Jr(Ce,te)}}function Qn(te){return te=qt(te),function(Ce){return Lr(Ce,te)}}function Ci(te,Ce,rt){if(Ce===void 0)return te;switch(rt??3){case 1:return function(lt){return te.call(Ce,lt)};case 3:return function(lt,Rt,Tt){return te.call(Ce,lt,Rt,Tt)};case 4:return function(lt,Rt,Tt,sr){return te.call(Ce,lt,Rt,Tt,sr)}}return function(){return te.apply(Ce,arguments)}}function ii(te,Ce,rt){return te==null?Wn:Pt(te)?Ci(te,Ce,rt):B(te)&&!xe(te)?Cr(te):Qn(te)}function bi(te,Ce){return ii(te,Ce,1/0)}Br.iteratee=bi;function Un(te,Ce,rt){return Br.iteratee!==bi?Br.iteratee(te,Ce):ii(te,Ce,rt)}function oa(te,Ce,rt){Ce=Un(Ce,rt);for(var lt=di(te),Rt=lt.length,Tt={},sr=0;sr<Rt;sr++){var Nr=lt[sr];Tt[Nr]=Ce(te[Nr],Nr,te)}return Tt}function xi(){}function Ki(te){return te==null?xi:function(Ce){return Er(te,Ce)}}function gi(te,Ce,rt){var lt=Array(Math.max(0,te));Ce=Ci(Ce,rt,1);for(var Rt=0;Rt<te;Rt++)lt[Rt]=Ce(Rt);return lt}function Zn(te,Ce){return Ce==null&&(Ce=te,te=0),te+Math.floor(Math.random()*(Ce-te+1))}var $n=Date.now||function(){return new Date().getTime()};function ki(te){var Ce=function(Tt){return te[Tt]},rt="(?:"+di(te).join("|")+")",lt=RegExp(rt),Rt=RegExp(rt,"g");return function(Tt){return Tt=Tt==null?"":""+Tt,lt.test(Tt)?Tt.replace(Rt,Ce):Tt}}var Es={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ba=ki(Es),_o=Ie(Es),hs=ki(_o),eu=Br.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},sa=/(.)^/,tu={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ho=/\\|'|\r|\n|\u2028|\u2029/g;function Za(te){return"\\"+tu[te]}var Ho=/^\s*(\w|\$)+\s*$/;function ai(te,Ce,rt){!Ce&&rt&&(Ce=rt),Ce=It({},Ce,Br.templateSettings);var lt=RegExp([(Ce.escape||sa).source,(Ce.interpolate||sa).source,(Ce.evaluate||sa).source].join("|")+"|$","g"),Rt=0,Tt="__p+='";te.replace(lt,function(jn,ha,Pi,Ws,vl){return Tt+=te.slice(Rt,vl).replace(ho,Za),Rt=vl+jn.length,ha?Tt+=`'+
((__t=(`+ha+`))==null?'':_.escape(__t))+
'`:Pi?Tt+=`'+
((__t=(`+Pi+`))==null?'':__t)+
'`:Ws&&(Tt+=`';
`+Ws+`
__p+='`),jn}),Tt+=`';
`;var sr=Ce.variable;if(sr){if(!Ho.test(sr))throw new Error("variable is not a bare identifier: "+sr)}else Tt=`with(obj||{}){
`+Tt+`}
`,sr="obj";Tt=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+Tt+`return __p;
`;var Nr;try{Nr=new Function(sr,"_",Tt)}catch(jn){throw jn.source=Tt,jn}var ti=function(jn){return Nr.call(this,jn,Br)};return ti.source="function("+sr+`){
`+Tt+"}",ti}function Cs(te,Ce,rt){Ce=qt(Ce);var lt=Ce.length;if(!lt)return Pt(rt)?rt.call(te):rt;for(var Rt=0;Rt<lt;Rt++){var Tt=te?.[Ce[Rt]];Tt===void 0&&(Tt=rt,Rt=lt),te=Pt(Tt)?Tt.call(te):Tt}return te}var bo=0;function ec(te){var Ce=++bo+"";return te?te+Ce:Ce}function ps(te){var Ce=Br(te);return Ce._chain=!0,Ce}function Du(te,Ce,rt,lt,Rt){if(!(lt instanceof Ce))return te.apply(rt,Rt);var Tt=dr(te.prototype),sr=te.apply(Tt,Rt);return B(sr)?sr:Tt}var eo=J(function(te,Ce){var rt=eo.placeholder,lt=function(){for(var Rt=0,Tt=Ce.length,sr=Array(Tt),Nr=0;Nr<Tt;Nr++)sr[Nr]=Ce[Nr]===rt?arguments[Rt++]:Ce[Nr];for(;Rt<arguments.length;)sr.push(arguments[Rt++]);return Du(te,lt,this,this,sr)};return lt});eo.placeholder=Br;var Me=J(function(te,Ce,rt){if(!Pt(te))throw new TypeError("Bind must be called on a function");var lt=J(function(Rt){return Du(te,lt,Ce,this,rt.concat(Rt))});return lt}),Ve=Fn(Hn);function it(te,Ce,rt,lt){if(lt=lt||[],!Ce&&Ce!==0)Ce=1/0;else if(Ce<=0)return lt.concat(te);for(var Rt=lt.length,Tt=0,sr=Hn(te);Tt<sr;Tt++){var Nr=te[Tt];if(Ve(Nr)&&(xe(Nr)||Kt(Nr)))if(Ce>1)it(Nr,Ce-1,rt,lt),Rt=lt.length;else for(var ti=0,jn=Nr.length;ti<jn;)lt[Rt++]=Nr[ti++];else rt||(lt[Rt++]=Nr)}return lt}var Xt=J(function(te,Ce){Ce=it(Ce,!1,!1);var rt=Ce.length;if(rt<1)throw new Error("bindAll must be passed function names");for(;rt--;){var lt=Ce[rt];te[lt]=Me(te[lt],te)}return te});function br(te,Ce){var rt=function(lt){var Rt=rt.cache,Tt=""+(Ce?Ce.apply(this,arguments):lt);return Ge(Rt,Tt)||(Rt[Tt]=te.apply(this,arguments)),Rt[Tt]};return rt.cache={},rt}var cn=J(function(te,Ce,rt){return setTimeout(function(){return te.apply(null,rt)},Ce)}),Ai=eo(cn,Br,1);function xo(te,Ce,rt){var lt,Rt,Tt,sr,Nr=0;rt||(rt={});var ti=function(){Nr=rt.leading===!1?0:$n(),lt=null,sr=te.apply(Rt,Tt),lt||(Rt=Tt=null)},jn=function(){var ha=$n();!Nr&&rt.leading===!1&&(Nr=ha);var Pi=Ce-(ha-Nr);return Rt=this,Tt=arguments,Pi<=0||Pi>Ce?(lt&&(clearTimeout(lt),lt=null),Nr=ha,sr=te.apply(Rt,Tt),lt||(Rt=Tt=null)):!lt&&rt.trailing!==!1&&(lt=setTimeout(ti,Pi)),sr};return jn.cancel=function(){clearTimeout(lt),Nr=0,lt=Rt=Tt=null},jn}function po(te,Ce,rt){var lt,Rt,Tt,sr,Nr,ti=function(){var ha=$n()-Rt;Ce>ha?lt=setTimeout(ti,Ce-ha):(lt=null,rt||(sr=te.apply(Nr,Tt)),lt||(Tt=Nr=null))},jn=J(function(ha){return Nr=this,Tt=ha,Rt=$n(),lt||(lt=setTimeout(ti,Ce),rt&&(sr=te.apply(Nr,Tt))),sr});return jn.cancel=function(){clearTimeout(lt),lt=Tt=Nr=null},jn}function Wo(te,Ce){return eo(Ce,te)}function ds(te){return function(){return!te.apply(this,arguments)}}function tf(){var te=arguments,Ce=te.length-1;return function(){for(var rt=Ce,lt=te[Ce].apply(this,arguments);rt--;)lt=te[rt].call(this,lt);return lt}}function tc(te,Ce){return function(){if(--te<1)return Ce.apply(this,arguments)}}function rf(te,Ce){var rt;return function(){return--te>0&&(rt=Ce.apply(this,arguments)),te<=1&&(Ce=null),rt}}var xc=eo(rf,2);function Bf(te,Ce,rt){Ce=Un(Ce,rt);for(var lt=di(te),Rt,Tt=0,sr=lt.length;Tt<sr;Tt++)if(Rt=lt[Tt],Ce(te[Rt],Rt,te))return Rt}function wc(te){return function(Ce,rt,lt){rt=Un(rt,lt);for(var Rt=Hn(Ce),Tt=te>0?0:Rt-1;Tt>=0&&Tt<Rt;Tt+=te)if(rt(Ce[Tt],Tt,Ce))return Tt;return-1}}var Ps=wc(1),Qu=wc(-1);function Fu(te,Ce,rt,lt){rt=Un(rt,lt,1);for(var Rt=rt(Ce),Tt=0,sr=Hn(te);Tt<sr;){var Nr=Math.floor((Tt+sr)/2);rt(te[Nr])<Rt?Tt=Nr+1:sr=Nr}return Tt}function Nu(te,Ce,rt){return function(lt,Rt,Tt){var sr=0,Nr=Hn(lt);if(typeof Tt=="number")te>0?sr=Tt>=0?Tt:Math.max(Tt+Nr,sr):Nr=Tt>=0?Math.min(Tt+1,Nr):Tt+Nr+1;else if(rt&&Tt&&Nr)return Tt=rt(lt,Rt),lt[Tt]===Rt?Tt:-1;if(Rt!==Rt)return Tt=Ce(o.call(lt,sr,Nr),tn),Tt>=0?Tt+sr:-1;for(Tt=te>0?sr:Nr-1;Tt>=0&&Tt<Nr;Tt+=te)if(lt[Tt]===Rt)return Tt;return-1}}var zu=Nu(1,Ps,Fu),Uu=Nu(-1,Qu);function Ll(te,Ce,rt){var lt=Ve(te)?Ps:Bf,Rt=lt(te,Ce,rt);if(Rt!==void 0&&Rt!==-1)return te[Rt]}function ms(te,Ce){return Ll(te,Cr(Ce))}function $i(te,Ce,rt){Ce=Ci(Ce,rt);var lt,Rt;if(Ve(te))for(lt=0,Rt=te.length;lt<Rt;lt++)Ce(te[lt],lt,te);else{var Tt=di(te);for(lt=0,Rt=Tt.length;lt<Rt;lt++)Ce(te[Tt[lt]],Tt[lt],te)}return te}function ru(te,Ce,rt){Ce=Un(Ce,rt);for(var lt=!Ve(te)&&di(te),Rt=(lt||te).length,Tt=Array(Rt),sr=0;sr<Rt;sr++){var Nr=lt?lt[sr]:sr;Tt[sr]=Ce(te[Nr],Nr,te)}return Tt}function Df(te){var Ce=function(rt,lt,Rt,Tt){var sr=!Ve(rt)&&di(rt),Nr=(sr||rt).length,ti=te>0?0:Nr-1;for(Tt||(Rt=rt[sr?sr[ti]:ti],ti+=te);ti>=0&&ti<Nr;ti+=te){var jn=sr?sr[ti]:ti;Rt=lt(Rt,rt[jn],jn,rt)}return Rt};return function(rt,lt,Rt,Tt){var sr=arguments.length>=3;return Ce(rt,Ci(lt,Tt,4),Rt,sr)}}var Ff=Df(1),rc=Df(-1);function el(te,Ce,rt){var lt=[];return Ce=Un(Ce,rt),$i(te,function(Rt,Tt,sr){Ce(Rt,Tt,sr)&&lt.push(Rt)}),lt}function Tc(te,Ce,rt){return el(te,ds(Un(Ce)),rt)}function nc(te,Ce,rt){Ce=Un(Ce,rt);for(var lt=!Ve(te)&&di(te),Rt=(lt||te).length,Tt=0;Tt<Rt;Tt++){var sr=lt?lt[Tt]:Tt;if(!Ce(te[sr],sr,te))return!1}return!0}function Sc(te,Ce,rt){Ce=Un(Ce,rt);for(var lt=!Ve(te)&&di(te),Rt=(lt||te).length,Tt=0;Tt<Rt;Tt++){var sr=lt?lt[Tt]:Tt;if(Ce(te[sr],sr,te))return!0}return!1}function _u(te,Ce,rt,lt){return Ve(te)||(te=Oe(te)),(typeof rt!="number"||lt)&&(rt=0),zu(te,Ce,rt)>=0}var k=J(function(te,Ce,rt){var lt,Rt;return Pt(Ce)?Rt=Ce:(Ce=qt(Ce),lt=Ce.slice(0,-1),Ce=Ce[Ce.length-1]),ru(te,function(Tt){var sr=Rt;if(!sr){if(lt&&lt.length&&(Tt=Lr(Tt,lt)),Tt==null)return;sr=Tt[Ce]}return sr==null?sr:sr.apply(Tt,rt)})});function Y(te,Ce){return ru(te,Qn(Ce))}function ne(te,Ce){return el(te,Cr(Ce))}function oe(te,Ce,rt){var lt=-1/0,Rt=-1/0,Tt,sr;if(Ce==null||typeof Ce=="number"&&typeof te[0]!="object"&&te!=null){te=Ve(te)?te:Oe(te);for(var Nr=0,ti=te.length;Nr<ti;Nr++)Tt=te[Nr],Tt!=null&&Tt>lt&&(lt=Tt)}else Ce=Un(Ce,rt),$i(te,function(jn,ha,Pi){sr=Ce(jn,ha,Pi),(sr>Rt||sr===-1/0&&lt===-1/0)&&(lt=jn,Rt=sr)});return lt}function ye(te,Ce,rt){var lt=1/0,Rt=1/0,Tt,sr;if(Ce==null||typeof Ce=="number"&&typeof te[0]!="object"&&te!=null){te=Ve(te)?te:Oe(te);for(var Nr=0,ti=te.length;Nr<ti;Nr++)Tt=te[Nr],Tt!=null&&Tt<lt&&(lt=Tt)}else Ce=Un(Ce,rt),$i(te,function(jn,ha,Pi){sr=Ce(jn,ha,Pi),(sr<Rt||sr===1/0&&lt===1/0)&&(lt=jn,Rt=sr)});return lt}function be(te,Ce,rt){if(Ce==null||rt)return Ve(te)||(te=Oe(te)),te[Zn(te.length-1)];var lt=Ve(te)?lr(te):Oe(te),Rt=Hn(lt);Ce=Math.max(Math.min(Ce,Rt),0);for(var Tt=Rt-1,sr=0;sr<Ce;sr++){var Nr=Zn(sr,Tt),ti=lt[sr];lt[sr]=lt[Nr],lt[Nr]=ti}return lt.slice(0,Ce)}function Le(te){return be(te,1/0)}function Ee(te,Ce,rt){var lt=0;return Ce=Un(Ce,rt),Y(ru(te,function(Rt,Tt,sr){return{value:Rt,index:lt++,criteria:Ce(Rt,Tt,sr)}}).sort(function(Rt,Tt){var sr=Rt.criteria,Nr=Tt.criteria;if(sr!==Nr){if(sr>Nr||sr===void 0)return 1;if(sr<Nr||Nr===void 0)return-1}return Rt.index-Tt.index}),"value")}function Be(te,Ce){return function(rt,lt,Rt){var Tt=Ce?[[],[]]:{};return lt=Un(lt,Rt),$i(rt,function(sr,Nr){var ti=lt(sr,Nr,rt);te(Tt,sr,ti)}),Tt}}var tt=Be(function(te,Ce,rt){Ge(te,rt)?te[rt].push(Ce):te[rt]=[Ce]}),wt=Be(function(te,Ce,rt){te[rt]=Ce}),b=Be(function(te,Ce,rt){Ge(te,rt)?te[rt]++:te[rt]=1}),Mt=Be(function(te,Ce,rt){te[rt?0:1].push(Ce)},!0),Vt=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function He(te){return te?xe(te)?o.call(te):U(te)?te.match(Vt):Ve(te)?ru(te,Wn):Oe(te):[]}function Bn(te){return te==null?0:Ve(te)?te.length:di(te).length}function fn(te,Ce,rt){return Ce in rt}var Fr=J(function(te,Ce){var rt={},lt=Ce[0];if(te==null)return rt;Pt(lt)?(Ce.length>1&&(lt=Ci(lt,Ce[1])),Ce=Ka(te)):(lt=fn,Ce=it(Ce,!1,!1),te=Object(te));for(var Rt=0,Tt=Ce.length;Rt<Tt;Rt++){var sr=Ce[Rt],Nr=te[sr];lt(Nr,sr,te)&&(rt[sr]=Nr)}return rt}),yi=J(function(te,Ce){var rt=Ce[0],lt;return Pt(rt)?(rt=ds(rt),Ce.length>1&&(lt=Ce[1])):(Ce=ru(it(Ce,!1,!1),String),rt=function(Rt,Tt){return!_u(Ce,Tt)}),Fr(te,rt,lt)});function Oa(te,Ce,rt){return o.call(te,0,Math.max(0,te.length-(Ce==null||rt?1:Ce)))}function vn(te,Ce,rt){return te==null||te.length<1?Ce==null||rt?void 0:[]:Ce==null||rt?te[0]:Oa(te,te.length-Ce)}function Gr(te,Ce,rt){return o.call(te,Ce==null||rt?1:Ce)}function $a(te,Ce,rt){return te==null||te.length<1?Ce==null||rt?void 0:[]:Ce==null||rt?te[te.length-1]:Gr(te,Math.max(0,te.length-Ce))}function Vi(te){return el(te,Boolean)}function ua(te,Ce){return it(te,Ce,!1)}var Jo=J(function(te,Ce){return Ce=it(Ce,!0,!0),el(te,function(rt){return!_u(Ce,rt)})}),to=J(function(te,Ce){return Jo(te,Ce)});function wo(te,Ce,rt,lt){X(Ce)||(lt=rt,rt=Ce,Ce=!1),rt!=null&&(rt=Un(rt,lt));for(var Rt=[],Tt=[],sr=0,Nr=Hn(te);sr<Nr;sr++){var ti=te[sr],jn=rt?rt(ti,sr,te):ti;Ce&&!rt?((!sr||Tt!==jn)&&Rt.push(ti),Tt=jn):rt?_u(Tt,jn)||(Tt.push(jn),Rt.push(ti)):_u(Rt,ti)||Rt.push(ti)}return Rt}var qo=J(function(te){return wo(it(te,!0,!0))});function ju(te){for(var Ce=[],rt=arguments.length,lt=0,Rt=Hn(te);lt<Rt;lt++){var Tt=te[lt];if(!_u(Ce,Tt)){var sr;for(sr=1;sr<rt&&_u(arguments[sr],Tt);sr++);sr===rt&&Ce.push(Tt)}}return Ce}function fa(te){for(var Ce=te&&oe(te,Hn).length||0,rt=Array(Ce),lt=0;lt<Ce;lt++)rt[lt]=Y(te,lt);return rt}var Yn=J(fa);function dt(te,Ce){for(var rt={},lt=0,Rt=Hn(te);lt<Rt;lt++)Ce?rt[te[lt]]=Ce[lt]:rt[te[lt][0]]=te[lt][1];return rt}function vi(te,Ce,rt){Ce==null&&(Ce=te||0,te=0),rt||(rt=Ce<te?-1:1);for(var lt=Math.max(Math.ceil((Ce-te)/rt),0),Rt=Array(lt),Tt=0;Tt<lt;Tt++,te+=rt)Rt[Tt]=te;return Rt}function Ec(te,Ce){if(Ce==null||Ce<1)return[];for(var rt=[],lt=0,Rt=te.length;lt<Rt;)rt.push(o.call(te,lt,lt+=Ce));return rt}function Os(te,Ce){return te._chain?Br(Ce).chain():Ce}function Zi(te){return $i(pt(te),function(Ce){var rt=Br[Ce]=te[Ce];Br.prototype[Ce]=function(){var lt=[this._wrapped];return a.apply(lt,arguments),Os(this,rt.apply(Br,lt))}}),Br}$i(["pop","push","reverse","shift","sort","splice","unshift"],function(te){var Ce=e[te];Br.prototype[te]=function(){var rt=this._wrapped;return rt!=null&&(Ce.apply(rt,arguments),(te==="shift"||te==="splice")&&rt.length===0&&delete rt[0]),Os(this,rt)}}),$i(["concat","join","slice"],function(te){var Ce=e[te];Br.prototype[te]=function(){var rt=this._wrapped;return rt!=null&&(rt=Ce.apply(rt,arguments)),Os(this,rt)}});var Wi={__proto__:null,VERSION:t,restArguments:J,isObject:B,isNull:se,isUndefined:V,isBoolean:X,isElement:I,isString:U,isNumber:re,isDate:ee,isRegExp:pe,isError:je,isSymbol:qe,isArrayBuffer:We,isDataView:he,isArray:xe,isFunction:Pt,isArguments:Kt,isFinite:Gt,isNaN:tn,isTypedArray:si,isEmpty:jr,isMatch:Jr,isEqual:Bo,isMap:yu,isWeakMap:ra,isSet:ge,isWeakSet:Te,keys:di,allKeys:Ka,values:Oe,pairs:ze,invert:Ie,functions:pt,methods:pt,extend:De,extendOwn:Qe,assign:Qe,defaults:It,create:$t,clone:lr,tap:Kr,get:Er,has:_r,mapObject:oa,identity:Wn,constant:an,noop:xi,toPath:Dr,property:Qn,propertyOf:Ki,matcher:Cr,matches:Cr,times:gi,random:Zn,now:$n,escape:Ba,unescape:hs,templateSettings:eu,template:ai,result:Cs,uniqueId:ec,chain:ps,iteratee:bi,partial:eo,bind:Me,bindAll:Xt,memoize:br,delay:cn,defer:Ai,throttle:xo,debounce:po,wrap:Wo,negate:ds,compose:tf,after:tc,before:rf,once:xc,findKey:Bf,findIndex:Ps,findLastIndex:Qu,sortedIndex:Fu,indexOf:zu,lastIndexOf:Uu,find:Ll,detect:Ll,findWhere:ms,each:$i,forEach:$i,map:ru,collect:ru,reduce:Ff,foldl:Ff,inject:Ff,reduceRight:rc,foldr:rc,filter:el,select:el,reject:Tc,every:nc,all:nc,some:Sc,any:Sc,contains:_u,includes:_u,include:_u,invoke:k,pluck:Y,where:ne,max:oe,min:ye,shuffle:Le,sample:be,sortBy:Ee,groupBy:tt,indexBy:wt,countBy:b,partition:Mt,toArray:He,size:Bn,pick:Fr,omit:yi,first:vn,head:vn,take:vn,initial:Oa,last:$a,rest:Gr,tail:Gr,drop:Gr,compact:Vi,flatten:ua,without:to,uniq:wo,unique:wo,union:qo,intersection:ju,difference:Jo,unzip:fa,transpose:fa,zip:Yn,object:dt,range:vi,chunk:Ec,mixin:Zi,default:Br},Gu=Zi(Wi);return Gu._=Gu,Gu})});var _B=mr((Vne,AE)=>{(function(t,r){"use strict";typeof AE=="object"&&typeof AE.exports=="object"?AE.exports=t.document?r(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}:r(t)})(typeof window<"u"?window:Vne,function(t,r){"use strict";var e=[],n=Object.getPrototypeOf,i=e.slice,a=e.flat?function(k){return e.flat.call(k)}:function(k){return e.concat.apply([],k)},o=e.push,s=e.indexOf,u={},c=u.toString,h=u.hasOwnProperty,p=h.toString,v=p.call(Object),x={},E=function(Y){return typeof Y=="function"&&typeof Y.nodeType!="number"},R=function(Y){return Y!=null&&Y===Y.window},D=t.document,H={type:!0,src:!0,nonce:!0,noModule:!0};function W(k,Y,ne){ne=ne||D;var oe,ye,be=ne.createElement("script");if(be.text=k,Y)for(oe in H)ye=Y[oe]||Y.getAttribute&&Y.getAttribute(oe),ye&&be.setAttribute(oe,ye);ne.head.appendChild(be).parentNode.removeChild(be)}function $(k){return k==null?k+"":typeof k=="object"||typeof k=="function"?u[c.call(k)]||"object":typeof k}var J="3.5.1",B=function(k,Y){return new B.fn.init(k,Y)};B.fn=B.prototype={jquery:J,constructor:B,length:0,toArray:function(){return i.call(this)},get:function(k){return k==null?i.call(this):k<0?this[k+this.length]:this[k]},pushStack:function(k){var Y=B.merge(this.constructor(),k);return Y.prevObject=this,Y},each:function(k){return B.each(this,k)},map:function(k){return this.pushStack(B.map(this,function(Y,ne){return k.call(Y,ne,Y)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(B.grep(this,function(k,Y){return(Y+1)%2}))},odd:function(){return this.pushStack(B.grep(this,function(k,Y){return Y%2}))},eq:function(k){var Y=this.length,ne=+k+(k<0?Y:0);return this.pushStack(ne>=0&&ne<Y?[this[ne]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:e.sort,splice:e.splice},B.extend=B.fn.extend=function(){var k,Y,ne,oe,ye,be,Le=arguments[0]||{},Ee=1,Be=arguments.length,tt=!1;for(typeof Le=="boolean"&&(tt=Le,Le=arguments[Ee]||{},Ee++),typeof Le!="object"&&!E(Le)&&(Le={}),Ee===Be&&(Le=this,Ee--);Ee<Be;Ee++)if((k=arguments[Ee])!=null)for(Y in k)oe=k[Y],!(Y==="__proto__"||Le===oe)&&(tt&&oe&&(B.isPlainObject(oe)||(ye=Array.isArray(oe)))?(ne=Le[Y],ye&&!Array.isArray(ne)?be=[]:!ye&&!B.isPlainObject(ne)?be={}:be=ne,ye=!1,Le[Y]=B.extend(tt,be,oe)):oe!==void 0&&(Le[Y]=oe));return Le},B.extend({expando:"jQuery"+(J+Math.random()).replace(/\D/g,""),isReady:!0,error:function(k){throw new Error(k)},noop:function(){},isPlainObject:function(k){var Y,ne;return!k||c.call(k)!=="[object Object]"?!1:(Y=n(k),Y?(ne=h.call(Y,"constructor")&&Y.constructor,typeof ne=="function"&&p.call(ne)===v):!0)},isEmptyObject:function(k){var Y;for(Y in k)return!1;return!0},globalEval:function(k,Y,ne){W(k,{nonce:Y&&Y.nonce},ne)},each:function(k,Y){var ne,oe=0;if(se(k))for(ne=k.length;oe<ne&&Y.call(k[oe],oe,k[oe])!==!1;oe++);else for(oe in k)if(Y.call(k[oe],oe,k[oe])===!1)break;return k},makeArray:function(k,Y){var ne=Y||[];return k!=null&&(se(Object(k))?B.merge(ne,typeof k=="string"?[k]:k):o.call(ne,k)),ne},inArray:function(k,Y,ne){return Y==null?-1:s.call(Y,k,ne)},merge:function(k,Y){for(var ne=+Y.length,oe=0,ye=k.length;oe<ne;oe++)k[ye++]=Y[oe];return k.length=ye,k},grep:function(k,Y,ne){for(var oe,ye=[],be=0,Le=k.length,Ee=!ne;be<Le;be++)oe=!Y(k[be],be),oe!==Ee&&ye.push(k[be]);return ye},map:function(k,Y,ne){var oe,ye,be=0,Le=[];if(se(k))for(oe=k.length;be<oe;be++)ye=Y(k[be],be,ne),ye!=null&&Le.push(ye);else for(be in k)ye=Y(k[be],be,ne),ye!=null&&Le.push(ye);return a(Le)},guid:1,support:x}),typeof Symbol=="function"&&(B.fn[Symbol.iterator]=e[Symbol.iterator]),B.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(k,Y){u["[object "+Y+"]"]=Y.toLowerCase()});function se(k){var Y=!!k&&"length"in k&&k.length,ne=$(k);return E(k)||R(k)?!1:ne==="array"||Y===0||typeof Y=="number"&&Y>0&&Y-1 in k}var V=function(k){var Y,ne,oe,ye,be,Le,Ee,Be,tt,wt,b,Mt,Vt,He,Bn,fn,Fr,yi,Oa,vn="sizzle"+1*new Date,Gr=k.document,$a=0,Vi=0,ua=Cc(),Jo=Cc(),to=Cc(),wo=Cc(),qo=function(Ue,ht){return Ue===ht&&(b=!0),0},ju={}.hasOwnProperty,fa=[],Yn=fa.pop,dt=fa.push,vi=fa.push,Ec=fa.slice,Os=function(Ue,ht){for(var St=0,ar=Ue.length;St<ar;St++)if(Ue[St]===ht)return St;return-1},Zi="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Wi="[\\x20\\t\\r\\n\\f]",Gu="(?:\\\\[\\da-fA-F]{1,6}"+Wi+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",te="\\["+Wi+"*("+Gu+")(?:"+Wi+"*([*^$|!~]?=)"+Wi+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Gu+"))|)"+Wi+"*\\]",Ce=":("+Gu+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+te+")*)|.*)\\)|)",rt=new RegExp(Wi+"+","g"),lt=new RegExp("^"+Wi+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Wi+"+$","g"),Rt=new RegExp("^"+Wi+"*,"+Wi+"*"),Tt=new RegExp("^"+Wi+"*([>+~]|"+Wi+")"+Wi+"*"),sr=new RegExp(Wi+"|>"),Nr=new RegExp(Ce),ti=new RegExp("^"+Gu+"$"),jn={ID:new RegExp("^#("+Gu+")"),CLASS:new RegExp("^\\.("+Gu+")"),TAG:new RegExp("^("+Gu+"|[*])"),ATTR:new RegExp("^"+te),PSEUDO:new RegExp("^"+Ce),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Wi+"*(even|odd|(([+-]|)(\\d*)n|)"+Wi+"*(?:([+-]|)"+Wi+"*(\\d+)|))"+Wi+"*\\)|)","i"),bool:new RegExp("^(?:"+Zi+")$","i"),needsContext:new RegExp("^"+Wi+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Wi+"*((?:-\\d)?\\d*)"+Wi+"*\\)|)(?=[^-]|$)","i")},ha=/HTML$/i,Pi=/^(?:input|select|textarea|button)$/i,Ws=/^h\d$/i,vl=/^[^{]+\{\s*\[native \w/,Fp=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Nf=/[+~]/,vs=new RegExp("\\\\[\\da-fA-F]{1,6}"+Wi+"?|\\\\([^\\r\\n\\f])","g"),nu=function(Ue,ht){var St="0x"+Ue.slice(1)-65536;return ht||(St<0?String.fromCharCode(St+65536):String.fromCharCode(St>>10|55296,St&1023|56320))},nf=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Ma=function(Ue,ht){return ht?Ue==="\0"?"\uFFFD":Ue.slice(0,-1)+"\\"+Ue.charCodeAt(Ue.length-1).toString(16)+" ":"\\"+Ue},ic=function(){Mt()},Np=tl(function(Ue){return Ue.disabled===!0&&Ue.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{vi.apply(fa=Ec.call(Gr.childNodes),Gr.childNodes),fa[Gr.childNodes.length].nodeType}catch{vi={apply:fa.length?function(ht,St){dt.apply(ht,Ec.call(St))}:function(ht,St){for(var ar=ht.length,kt=0;ht[ar++]=St[kt++];);ht.length=ar-1}}}function pa(Ue,ht,St,ar){var kt,fr,ur,kr,Zr,hn,ir,Pn=ht&&ht.ownerDocument,Oi=ht?ht.nodeType:9;if(St=St||[],typeof Ue!="string"||!Ue||Oi!==1&&Oi!==9&&Oi!==11)return St;if(!ar&&(Mt(ht),ht=ht||Vt,Bn)){if(Oi!==11&&(Zr=Fp.exec(Ue)))if(kt=Zr[1]){if(Oi===9)if(ur=ht.getElementById(kt)){if(ur.id===kt)return St.push(ur),St}else return St;else if(Pn&&(ur=Pn.getElementById(kt))&&Oa(ht,ur)&&ur.id===kt)return St.push(ur),St}else{if(Zr[2])return vi.apply(St,ht.getElementsByTagName(Ue)),St;if((kt=Zr[3])&&ne.getElementsByClassName&&ht.getElementsByClassName)return vi.apply(St,ht.getElementsByClassName(kt)),St}if(ne.qsa&&!wo[Ue+" "]&&(!fn||!fn.test(Ue))&&(Oi!==1||ht.nodeName.toLowerCase()!=="object")){if(ir=Ue,Pn=ht,Oi===1&&(sr.test(Ue)||Tt.test(Ue))){for(Pn=Nf.test(Ue)&&Vu(ht.parentNode)||ht,(Pn!==ht||!ne.scope)&&((kr=ht.getAttribute("id"))?kr=kr.replace(nf,Ma):ht.setAttribute("id",kr=vn)),hn=Le(Ue),fr=hn.length;fr--;)hn[fr]=(kr?"#"+kr:":scope")+" "+oc(hn[fr]);ir=hn.join(",")}try{return vi.apply(St,Pn.querySelectorAll(ir)),St}catch{wo(Ue,!0)}finally{kr===vn&&ht.removeAttribute("id")}}}return Be(Ue.replace(lt,"$1"),ht,St,ar)}function Cc(){var Ue=[];function ht(St,ar){return Ue.push(St+" ")>oe.cacheLength&&delete ht[Ue.shift()],ht[St+" "]=ar}return ht}function bu(Ue){return Ue[vn]=!0,Ue}function iu(Ue){var ht=Vt.createElement("fieldset");try{return!!Ue(ht)}catch{return!1}finally{ht.parentNode&&ht.parentNode.removeChild(ht),ht=null}}function kl(Ue,ht){for(var St=Ue.split("|"),ar=St.length;ar--;)oe.attrHandle[St[ar]]=ht}function Pc(Ue,ht){var St=ht&&Ue,ar=St&&Ue.nodeType===1&&ht.nodeType===1&&Ue.sourceIndex-ht.sourceIndex;if(ar)return ar;if(St){for(;St=St.nextSibling;)if(St===ht)return-1}return Ue?1:-1}function Lh(Ue){return function(ht){var St=ht.nodeName.toLowerCase();return St==="input"&&ht.type===Ue}}function kh(Ue){return function(ht){var St=ht.nodeName.toLowerCase();return(St==="input"||St==="button")&&ht.type===Ue}}function ac(Ue){return function(ht){return"form"in ht?ht.parentNode&&ht.disabled===!1?"label"in ht?"label"in ht.parentNode?ht.parentNode.disabled===Ue:ht.disabled===Ue:ht.isDisabled===Ue||ht.isDisabled!==!Ue&&Np(ht)===Ue:ht.disabled===Ue:"label"in ht?ht.disabled===Ue:!1}}function gl(Ue){return bu(function(ht){return ht=+ht,bu(function(St,ar){for(var kt,fr=Ue([],St.length,ht),ur=fr.length;ur--;)St[kt=fr[ur]]&&(St[kt]=!(ar[kt]=St[kt]))})})}function Vu(Ue){return Ue&&typeof Ue.getElementsByTagName<"u"&&Ue}ne=pa.support={},be=pa.isXML=function(Ue){var ht=Ue.namespaceURI,St=(Ue.ownerDocument||Ue).documentElement;return!ha.test(ht||St&&St.nodeName||"HTML")},Mt=pa.setDocument=function(Ue){var ht,St,ar=Ue?Ue.ownerDocument||Ue:Gr;return ar==Vt||ar.nodeType!==9||!ar.documentElement||(Vt=ar,He=Vt.documentElement,Bn=!be(Vt),Gr!=Vt&&(St=Vt.defaultView)&&St.top!==St&&(St.addEventListener?St.addEventListener("unload",ic,!1):St.attachEvent&&St.attachEvent("onunload",ic)),ne.scope=iu(function(kt){return He.appendChild(kt).appendChild(Vt.createElement("div")),typeof kt.querySelectorAll<"u"&&!kt.querySelectorAll(":scope fieldset div").length}),ne.attributes=iu(function(kt){return kt.className="i",!kt.getAttribute("className")}),ne.getElementsByTagName=iu(function(kt){return kt.appendChild(Vt.createComment("")),!kt.getElementsByTagName("*").length}),ne.getElementsByClassName=vl.test(Vt.getElementsByClassName),ne.getById=iu(function(kt){return He.appendChild(kt).id=vn,!Vt.getElementsByName||!Vt.getElementsByName(vn).length}),ne.getById?(oe.filter.ID=function(kt){var fr=kt.replace(vs,nu);return function(ur){return ur.getAttribute("id")===fr}},oe.find.ID=function(kt,fr){if(typeof fr.getElementById<"u"&&Bn){var ur=fr.getElementById(kt);return ur?[ur]:[]}}):(oe.filter.ID=function(kt){var fr=kt.replace(vs,nu);return function(ur){var kr=typeof ur.getAttributeNode<"u"&&ur.getAttributeNode("id");return kr&&kr.value===fr}},oe.find.ID=function(kt,fr){if(typeof fr.getElementById<"u"&&Bn){var ur,kr,Zr,hn=fr.getElementById(kt);if(hn){if(ur=hn.getAttributeNode("id"),ur&&ur.value===kt)return[hn];for(Zr=fr.getElementsByName(kt),kr=0;hn=Zr[kr++];)if(ur=hn.getAttributeNode("id"),ur&&ur.value===kt)return[hn]}return[]}}),oe.find.TAG=ne.getElementsByTagName?function(kt,fr){if(typeof fr.getElementsByTagName<"u")return fr.getElementsByTagName(kt);if(ne.qsa)return fr.querySelectorAll(kt)}:function(kt,fr){var ur,kr=[],Zr=0,hn=fr.getElementsByTagName(kt);if(kt==="*"){for(;ur=hn[Zr++];)ur.nodeType===1&&kr.push(ur);return kr}return hn},oe.find.CLASS=ne.getElementsByClassName&&function(kt,fr){if(typeof fr.getElementsByClassName<"u"&&Bn)return fr.getElementsByClassName(kt)},Fr=[],fn=[],(ne.qsa=vl.test(Vt.querySelectorAll))&&(iu(function(kt){var fr;He.appendChild(kt).innerHTML="<a id='"+vn+"'></a><select id='"+vn+"-\r\\' msallowcapture=''><option selected=''></option></select>",kt.querySelectorAll("[msallowcapture^='']").length&&fn.push("[*^$]="+Wi+`*(?:''|"")`),kt.querySelectorAll("[selected]").length||fn.push("\\["+Wi+"*(?:value|"+Zi+")"),kt.querySelectorAll("[id~="+vn+"-]").length||fn.push("~="),fr=Vt.createElement("input"),fr.setAttribute("name",""),kt.appendChild(fr),kt.querySelectorAll("[name='']").length||fn.push("\\["+Wi+"*name"+Wi+"*="+Wi+`*(?:''|"")`),kt.querySelectorAll(":checked").length||fn.push(":checked"),kt.querySelectorAll("a#"+vn+"+*").length||fn.push(".#.+[+~]"),kt.querySelectorAll("\\\f"),fn.push("[\\r\\n\\f]")}),iu(function(kt){kt.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var fr=Vt.createElement("input");fr.setAttribute("type","hidden"),kt.appendChild(fr).setAttribute("name","D"),kt.querySelectorAll("[name=d]").length&&fn.push("name"+Wi+"*[*^$|!~]?="),kt.querySelectorAll(":enabled").length!==2&&fn.push(":enabled",":disabled"),He.appendChild(kt).disabled=!0,kt.querySelectorAll(":disabled").length!==2&&fn.push(":enabled",":disabled"),kt.querySelectorAll("*,:x"),fn.push(",.*:")})),(ne.matchesSelector=vl.test(yi=He.matches||He.webkitMatchesSelector||He.mozMatchesSelector||He.oMatchesSelector||He.msMatchesSelector))&&iu(function(kt){ne.disconnectedMatch=yi.call(kt,"*"),yi.call(kt,"[s!='']:x"),Fr.push("!=",Ce)}),fn=fn.length&&new RegExp(fn.join("|")),Fr=Fr.length&&new RegExp(Fr.join("|")),ht=vl.test(He.compareDocumentPosition),Oa=ht||vl.test(He.contains)?function(kt,fr){var ur=kt.nodeType===9?kt.documentElement:kt,kr=fr&&fr.parentNode;return kt===kr||!!(kr&&kr.nodeType===1&&(ur.contains?ur.contains(kr):kt.compareDocumentPosition&&kt.compareDocumentPosition(kr)&16))}:function(kt,fr){if(fr){for(;fr=fr.parentNode;)if(fr===kt)return!0}return!1},qo=ht?function(kt,fr){if(kt===fr)return b=!0,0;var ur=!kt.compareDocumentPosition-!fr.compareDocumentPosition;return ur||(ur=(kt.ownerDocument||kt)==(fr.ownerDocument||fr)?kt.compareDocumentPosition(fr):1,ur&1||!ne.sortDetached&&fr.compareDocumentPosition(kt)===ur?kt==Vt||kt.ownerDocument==Gr&&Oa(Gr,kt)?-1:fr==Vt||fr.ownerDocument==Gr&&Oa(Gr,fr)?1:wt?Os(wt,kt)-Os(wt,fr):0:ur&4?-1:1)}:function(kt,fr){if(kt===fr)return b=!0,0;var ur,kr=0,Zr=kt.parentNode,hn=fr.parentNode,ir=[kt],Pn=[fr];if(!Zr||!hn)return kt==Vt?-1:fr==Vt?1:Zr?-1:hn?1:wt?Os(wt,kt)-Os(wt,fr):0;if(Zr===hn)return Pc(kt,fr);for(ur=kt;ur=ur.parentNode;)ir.unshift(ur);for(ur=fr;ur=ur.parentNode;)Pn.unshift(ur);for(;ir[kr]===Pn[kr];)kr++;return kr?Pc(ir[kr],Pn[kr]):ir[kr]==Gr?-1:Pn[kr]==Gr?1:0}),Vt},pa.matches=function(Ue,ht){return pa(Ue,null,null,ht)},pa.matchesSelector=function(Ue,ht){if(Mt(Ue),ne.matchesSelector&&Bn&&!wo[ht+" "]&&(!Fr||!Fr.test(ht))&&(!fn||!fn.test(ht)))try{var St=yi.call(Ue,ht);if(St||ne.disconnectedMatch||Ue.document&&Ue.document.nodeType!==11)return St}catch{wo(ht,!0)}return pa(ht,Vt,null,[Ue]).length>0},pa.contains=function(Ue,ht){return(Ue.ownerDocument||Ue)!=Vt&&Mt(Ue),Oa(Ue,ht)},pa.attr=function(Ue,ht){(Ue.ownerDocument||Ue)!=Vt&&Mt(Ue);var St=oe.attrHandle[ht.toLowerCase()],ar=St&&ju.call(oe.attrHandle,ht.toLowerCase())?St(Ue,ht,!Bn):void 0;return ar!==void 0?ar:ne.attributes||!Bn?Ue.getAttribute(ht):(ar=Ue.getAttributeNode(ht))&&ar.specified?ar.value:null},pa.escape=function(Ue){return(Ue+"").replace(nf,Ma)},pa.error=function(Ue){throw new Error("Syntax error, unrecognized expression: "+Ue)},pa.uniqueSort=function(Ue){var ht,St=[],ar=0,kt=0;if(b=!ne.detectDuplicates,wt=!ne.sortStable&&Ue.slice(0),Ue.sort(qo),b){for(;ht=Ue[kt++];)ht===Ue[kt]&&(ar=St.push(kt));for(;ar--;)Ue.splice(St[ar],1)}return wt=null,Ue},ye=pa.getText=function(Ue){var ht,St="",ar=0,kt=Ue.nodeType;if(kt){if(kt===1||kt===9||kt===11){if(typeof Ue.textContent=="string")return Ue.textContent;for(Ue=Ue.firstChild;Ue;Ue=Ue.nextSibling)St+=ye(Ue)}else if(kt===3||kt===4)return Ue.nodeValue}else for(;ht=Ue[ar++];)St+=ye(ht);return St},oe=pa.selectors={cacheLength:50,createPseudo:bu,match:jn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Ue){return Ue[1]=Ue[1].replace(vs,nu),Ue[3]=(Ue[3]||Ue[4]||Ue[5]||"").replace(vs,nu),Ue[2]==="~="&&(Ue[3]=" "+Ue[3]+" "),Ue.slice(0,4)},CHILD:function(Ue){return Ue[1]=Ue[1].toLowerCase(),Ue[1].slice(0,3)==="nth"?(Ue[3]||pa.error(Ue[0]),Ue[4]=+(Ue[4]?Ue[5]+(Ue[6]||1):2*(Ue[3]==="even"||Ue[3]==="odd")),Ue[5]=+(Ue[7]+Ue[8]||Ue[3]==="odd")):Ue[3]&&pa.error(Ue[0]),Ue},PSEUDO:function(Ue){var ht,St=!Ue[6]&&Ue[2];return jn.CHILD.test(Ue[0])?null:(Ue[3]?Ue[2]=Ue[4]||Ue[5]||"":St&&Nr.test(St)&&(ht=Le(St,!0))&&(ht=St.indexOf(")",St.length-ht)-St.length)&&(Ue[0]=Ue[0].slice(0,ht),Ue[2]=St.slice(0,ht)),Ue.slice(0,3))}},filter:{TAG:function(Ue){var ht=Ue.replace(vs,nu).toLowerCase();return Ue==="*"?function(){return!0}:function(St){return St.nodeName&&St.nodeName.toLowerCase()===ht}},CLASS:function(Ue){var ht=ua[Ue+" "];return ht||(ht=new RegExp("(^|"+Wi+")"+Ue+"("+Wi+"|$)"))&&ua(Ue,function(St){return ht.test(typeof St.className=="string"&&St.className||typeof St.getAttribute<"u"&&St.getAttribute("class")||"")})},ATTR:function(Ue,ht,St){return function(ar){var kt=pa.attr(ar,Ue);return kt==null?ht==="!=":ht?(kt+="",ht==="="?kt===St:ht==="!="?kt!==St:ht==="^="?St&&kt.indexOf(St)===0:ht==="*="?St&&kt.indexOf(St)>-1:ht==="$="?St&&kt.slice(-St.length)===St:ht==="~="?(" "+kt.replace(rt," ")+" ").indexOf(St)>-1:ht==="|="?kt===St||kt.slice(0,St.length+1)===St+"-":!1):!0}},CHILD:function(Ue,ht,St,ar,kt){var fr=Ue.slice(0,3)!=="nth",ur=Ue.slice(-4)!=="last",kr=ht==="of-type";return ar===1&&kt===0?function(Zr){return!!Zr.parentNode}:function(Zr,hn,ir){var Pn,Oi,na,Dn,ia,Xo,gr=fr!==ur?"nextSibling":"previousSibling",da=Zr.parentNode,Dl=kr&&Zr.nodeName.toLowerCase(),Fl=!ir&&!kr,Ga=!1;if(da){if(fr){for(;gr;){for(Dn=Zr;Dn=Dn[gr];)if(kr?Dn.nodeName.toLowerCase()===Dl:Dn.nodeType===1)return!1;Xo=gr=Ue==="only"&&!Xo&&"nextSibling"}return!0}if(Xo=[ur?da.firstChild:da.lastChild],ur&&Fl){for(Dn=da,na=Dn[vn]||(Dn[vn]={}),Oi=na[Dn.uniqueID]||(na[Dn.uniqueID]={}),Pn=Oi[Ue]||[],ia=Pn[0]===$a&&Pn[1],Ga=ia&&Pn[2],Dn=ia&&da.childNodes[ia];Dn=++ia&&Dn&&Dn[gr]||(Ga=ia=0)||Xo.pop();)if(Dn.nodeType===1&&++Ga&&Dn===Zr){Oi[Ue]=[$a,ia,Ga];break}}else if(Fl&&(Dn=Zr,na=Dn[vn]||(Dn[vn]={}),Oi=na[Dn.uniqueID]||(na[Dn.uniqueID]={}),Pn=Oi[Ue]||[],ia=Pn[0]===$a&&Pn[1],Ga=ia),Ga===!1)for(;(Dn=++ia&&Dn&&Dn[gr]||(Ga=ia=0)||Xo.pop())&&!((kr?Dn.nodeName.toLowerCase()===Dl:Dn.nodeType===1)&&++Ga&&(Fl&&(na=Dn[vn]||(Dn[vn]={}),Oi=na[Dn.uniqueID]||(na[Dn.uniqueID]={}),Oi[Ue]=[$a,Ga]),Dn===Zr)););return Ga-=kt,Ga===ar||Ga%ar===0&&Ga/ar>=0}}},PSEUDO:function(Ue,ht){var St,ar=oe.pseudos[Ue]||oe.setFilters[Ue.toLowerCase()]||pa.error("unsupported pseudo: "+Ue);return ar[vn]?ar(ht):ar.length>1?(St=[Ue,Ue,"",ht],oe.setFilters.hasOwnProperty(Ue.toLowerCase())?bu(function(kt,fr){for(var ur,kr=ar(kt,ht),Zr=kr.length;Zr--;)ur=Os(kt,kr[Zr]),kt[ur]=!(fr[ur]=kr[Zr])}):function(kt){return ar(kt,0,St)}):ar}},pseudos:{not:bu(function(Ue){var ht=[],St=[],ar=Ee(Ue.replace(lt,"$1"));return ar[vn]?bu(function(kt,fr,ur,kr){for(var Zr,hn=ar(kt,null,kr,[]),ir=kt.length;ir--;)(Zr=hn[ir])&&(kt[ir]=!(fr[ir]=Zr))}):function(kt,fr,ur){return ht[0]=kt,ar(ht,null,ur,St),ht[0]=null,!St.pop()}}),has:bu(function(Ue){return function(ht){return pa(Ue,ht).length>0}}),contains:bu(function(Ue){return Ue=Ue.replace(vs,nu),function(ht){return(ht.textContent||ye(ht)).indexOf(Ue)>-1}}),lang:bu(function(Ue){return ti.test(Ue||"")||pa.error("unsupported lang: "+Ue),Ue=Ue.replace(vs,nu).toLowerCase(),function(ht){var St;do if(St=Bn?ht.lang:ht.getAttribute("xml:lang")||ht.getAttribute("lang"))return St=St.toLowerCase(),St===Ue||St.indexOf(Ue+"-")===0;while((ht=ht.parentNode)&&ht.nodeType===1);return!1}}),target:function(Ue){var ht=k.location&&k.location.hash;return ht&&ht.slice(1)===Ue.id},root:function(Ue){return Ue===He},focus:function(Ue){return Ue===Vt.activeElement&&(!Vt.hasFocus||Vt.hasFocus())&&!!(Ue.type||Ue.href||~Ue.tabIndex)},enabled:ac(!1),disabled:ac(!0),checked:function(Ue){var ht=Ue.nodeName.toLowerCase();return ht==="input"&&!!Ue.checked||ht==="option"&&!!Ue.selected},selected:function(Ue){return Ue.parentNode&&Ue.parentNode.selectedIndex,Ue.selected===!0},empty:function(Ue){for(Ue=Ue.firstChild;Ue;Ue=Ue.nextSibling)if(Ue.nodeType<6)return!1;return!0},parent:function(Ue){return!oe.pseudos.empty(Ue)},header:function(Ue){return Ws.test(Ue.nodeName)},input:function(Ue){return Pi.test(Ue.nodeName)},button:function(Ue){var ht=Ue.nodeName.toLowerCase();return ht==="input"&&Ue.type==="button"||ht==="button"},text:function(Ue){var ht;return Ue.nodeName.toLowerCase()==="input"&&Ue.type==="text"&&((ht=Ue.getAttribute("type"))==null||ht.toLowerCase()==="text")},first:gl(function(){return[0]}),last:gl(function(Ue,ht){return[ht-1]}),eq:gl(function(Ue,ht,St){return[St<0?St+ht:St]}),even:gl(function(Ue,ht){for(var St=0;St<ht;St+=2)Ue.push(St);return Ue}),odd:gl(function(Ue,ht){for(var St=1;St<ht;St+=2)Ue.push(St);return Ue}),lt:gl(function(Ue,ht,St){for(var ar=St<0?St+ht:St>ht?ht:St;--ar>=0;)Ue.push(ar);return Ue}),gt:gl(function(Ue,ht,St){for(var ar=St<0?St+ht:St;++ar<ht;)Ue.push(ar);return Ue})}},oe.pseudos.nth=oe.pseudos.eq;for(Y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})oe.pseudos[Y]=Lh(Y);for(Y in{submit:!0,reset:!0})oe.pseudos[Y]=kh(Y);function ba(){}ba.prototype=oe.filters=oe.pseudos,oe.setFilters=new ba,Le=pa.tokenize=function(Ue,ht){var St,ar,kt,fr,ur,kr,Zr,hn=Jo[Ue+" "];if(hn)return ht?0:hn.slice(0);for(ur=Ue,kr=[],Zr=oe.preFilter;ur;){(!St||(ar=Rt.exec(ur)))&&(ar&&(ur=ur.slice(ar[0].length)||ur),kr.push(kt=[])),St=!1,(ar=Tt.exec(ur))&&(St=ar.shift(),kt.push({value:St,type:ar[0].replace(lt," ")}),ur=ur.slice(St.length));for(fr in oe.filter)(ar=jn[fr].exec(ur))&&(!Zr[fr]||(ar=Zr[fr](ar)))&&(St=ar.shift(),kt.push({value:St,type:fr,matches:ar}),ur=ur.slice(St.length));if(!St)break}return ht?ur.length:ur?pa.error(Ue):Jo(Ue,kr).slice(0)};function oc(Ue){for(var ht=0,St=Ue.length,ar="";ht<St;ht++)ar+=Ue[ht].value;return ar}function tl(Ue,ht,St){var ar=ht.dir,kt=ht.next,fr=kt||ar,ur=St&&fr==="parentNode",kr=Vi++;return ht.first?function(Zr,hn,ir){for(;Zr=Zr[ar];)if(Zr.nodeType===1||ur)return Ue(Zr,hn,ir);return!1}:function(Zr,hn,ir){var Pn,Oi,na,Dn=[$a,kr];if(ir){for(;Zr=Zr[ar];)if((Zr.nodeType===1||ur)&&Ue(Zr,hn,ir))return!0}else for(;Zr=Zr[ar];)if(Zr.nodeType===1||ur)if(na=Zr[vn]||(Zr[vn]={}),Oi=na[Zr.uniqueID]||(na[Zr.uniqueID]={}),kt&&kt===Zr.nodeName.toLowerCase())Zr=Zr[ar]||Zr;else{if((Pn=Oi[fr])&&Pn[0]===$a&&Pn[1]===kr)return Dn[2]=Pn[2];if(Oi[fr]=Dn,Dn[2]=Ue(Zr,hn,ir))return!0}return!1}}function ja(Ue){return Ue.length>1?function(ht,St,ar){for(var kt=Ue.length;kt--;)if(!Ue[kt](ht,St,ar))return!1;return!0}:Ue[0]}function ui(Ue,ht,St){for(var ar=0,kt=ht.length;ar<kt;ar++)pa(Ue,ht[ar],St);return St}function mi(Ue,ht,St,ar,kt){for(var fr,ur=[],kr=0,Zr=Ue.length,hn=ht!=null;kr<Zr;kr++)(fr=Ue[kr])&&(!St||St(fr,ar,kt))&&(ur.push(fr),hn&&ht.push(kr));return ur}function Qo(Ue,ht,St,ar,kt,fr){return ar&&!ar[vn]&&(ar=Qo(ar)),kt&&!kt[vn]&&(kt=Qo(kt,fr)),bu(function(ur,kr,Zr,hn){var ir,Pn,Oi,na=[],Dn=[],ia=kr.length,Xo=ur||ui(ht||"*",Zr.nodeType?[Zr]:Zr,[]),gr=Ue&&(ur||!ht)?mi(Xo,na,Ue,Zr,hn):Xo,da=St?kt||(ur?Ue:ia||ar)?[]:kr:gr;if(St&&St(gr,da,Zr,hn),ar)for(ir=mi(da,Dn),ar(ir,[],Zr,hn),Pn=ir.length;Pn--;)(Oi=ir[Pn])&&(da[Dn[Pn]]=!(gr[Dn[Pn]]=Oi));if(ur){if(kt||Ue){if(kt){for(ir=[],Pn=da.length;Pn--;)(Oi=da[Pn])&&ir.push(gr[Pn]=Oi);kt(null,da=[],ir,hn)}for(Pn=da.length;Pn--;)(Oi=da[Pn])&&(ir=kt?Os(ur,Oi):na[Pn])>-1&&(ur[ir]=!(kr[ir]=Oi))}}else da=mi(da===kr?da.splice(ia,da.length):da),kt?kt(null,kr,da,hn):vi.apply(kr,da)})}function Bl(Ue){for(var ht,St,ar,kt=Ue.length,fr=oe.relative[Ue[0].type],ur=fr||oe.relative[" "],kr=fr?1:0,Zr=tl(function(Pn){return Pn===ht},ur,!0),hn=tl(function(Pn){return Os(ht,Pn)>-1},ur,!0),ir=[function(Pn,Oi,na){var Dn=!fr&&(na||Oi!==tt)||((ht=Oi).nodeType?Zr(Pn,Oi,na):hn(Pn,Oi,na));return ht=null,Dn}];kr<kt;kr++)if(St=oe.relative[Ue[kr].type])ir=[tl(ja(ir),St)];else{if(St=oe.filter[Ue[kr].type].apply(null,Ue[kr].matches),St[vn]){for(ar=++kr;ar<kt&&!oe.relative[Ue[ar].type];ar++);return Qo(kr>1&&ja(ir),kr>1&&oc(Ue.slice(0,kr-1).concat({value:Ue[kr-2].type===" "?"*":""})).replace(lt,"$1"),St,kr<ar&&Bl(Ue.slice(kr,ar)),ar<kt&&Bl(Ue=Ue.slice(ar)),ar<kt&&oc(Ue))}ir.push(St)}return ja(ir)}function Al(Ue,ht){var St=ht.length>0,ar=Ue.length>0,kt=function(fr,ur,kr,Zr,hn){var ir,Pn,Oi,na=0,Dn="0",ia=fr&&[],Xo=[],gr=tt,da=fr||ar&&oe.find.TAG("*",hn),Dl=$a+=gr==null?1:Math.random()||.1,Fl=da.length;for(hn&&(tt=ur==Vt||ur||hn);Dn!==Fl&&(ir=da[Dn])!=null;Dn++){if(ar&&ir){for(Pn=0,!ur&&ir.ownerDocument!=Vt&&(Mt(ir),kr=!Bn);Oi=Ue[Pn++];)if(Oi(ir,ur||Vt,kr)){Zr.push(ir);break}hn&&($a=Dl)}St&&((ir=!Oi&&ir)&&na--,fr&&ia.push(ir))}if(na+=Dn,St&&Dn!==na){for(Pn=0;Oi=ht[Pn++];)Oi(ia,Xo,ur,kr);if(fr){if(na>0)for(;Dn--;)ia[Dn]||Xo[Dn]||(Xo[Dn]=Yn.call(Zr));Xo=mi(Xo)}vi.apply(Zr,Xo),hn&&!fr&&Xo.length>0&&na+ht.length>1&&pa.uniqueSort(Zr)}return hn&&($a=Dl,tt=gr),ia};return St?bu(kt):kt}return Ee=pa.compile=function(Ue,ht){var St,ar=[],kt=[],fr=to[Ue+" "];if(!fr){for(ht||(ht=Le(Ue)),St=ht.length;St--;)fr=Bl(ht[St]),fr[vn]?ar.push(fr):kt.push(fr);fr=to(Ue,Al(kt,ar)),fr.selector=Ue}return fr},Be=pa.select=function(Ue,ht,St,ar){var kt,fr,ur,kr,Zr,hn=typeof Ue=="function"&&Ue,ir=!ar&&Le(Ue=hn.selector||Ue);if(St=St||[],ir.length===1){if(fr=ir[0]=ir[0].slice(0),fr.length>2&&(ur=fr[0]).type==="ID"&&ht.nodeType===9&&Bn&&oe.relative[fr[1].type]){if(ht=(oe.find.ID(ur.matches[0].replace(vs,nu),ht)||[])[0],ht)hn&&(ht=ht.parentNode);else return St;Ue=Ue.slice(fr.shift().value.length)}for(kt=jn.needsContext.test(Ue)?0:fr.length;kt--&&(ur=fr[kt],!oe.relative[kr=ur.type]);)if((Zr=oe.find[kr])&&(ar=Zr(ur.matches[0].replace(vs,nu),Nf.test(fr[0].type)&&Vu(ht.parentNode)||ht))){if(fr.splice(kt,1),Ue=ar.length&&oc(fr),!Ue)return vi.apply(St,ar),St;break}}return(hn||Ee(Ue,ir))(ar,ht,!Bn,St,!ht||Nf.test(Ue)&&Vu(ht.parentNode)||ht),St},ne.sortStable=vn.split("").sort(qo).join("")===vn,ne.detectDuplicates=!!b,Mt(),ne.sortDetached=iu(function(Ue){return Ue.compareDocumentPosition(Vt.createElement("fieldset"))&1}),iu(function(Ue){return Ue.innerHTML="<a href='#'></a>",Ue.firstChild.getAttribute("href")==="#"})||kl("type|href|height|width",function(Ue,ht,St){if(!St)return Ue.getAttribute(ht,ht.toLowerCase()==="type"?1:2)}),(!ne.attributes||!iu(function(Ue){return Ue.innerHTML="<input/>",Ue.firstChild.setAttribute("value",""),Ue.firstChild.getAttribute("value")===""}))&&kl("value",function(Ue,ht,St){if(!St&&Ue.nodeName.toLowerCase()==="input")return Ue.defaultValue}),iu(function(Ue){return Ue.getAttribute("disabled")==null})||kl(Zi,function(Ue,ht,St){var ar;if(!St)return Ue[ht]===!0?ht.toLowerCase():(ar=Ue.getAttributeNode(ht))&&ar.specified?ar.value:null}),pa}(t);B.find=V,B.expr=V.selectors,B.expr[":"]=B.expr.pseudos,B.uniqueSort=B.unique=V.uniqueSort,B.text=V.getText,B.isXMLDoc=V.isXML,B.contains=V.contains,B.escapeSelector=V.escape;var X=function(k,Y,ne){for(var oe=[],ye=ne!==void 0;(k=k[Y])&&k.nodeType!==9;)if(k.nodeType===1){if(ye&&B(k).is(ne))break;oe.push(k)}return oe},I=function(k,Y){for(var ne=[];k;k=k.nextSibling)k.nodeType===1&&k!==Y&&ne.push(k);return ne},O=B.expr.match.needsContext;function U(k,Y){return k.nodeName&&k.nodeName.toLowerCase()===Y.toLowerCase()}var re=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function ee(k,Y,ne){return E(Y)?B.grep(k,function(oe,ye){return!!Y.call(oe,ye,oe)!==ne}):Y.nodeType?B.grep(k,function(oe){return oe===Y!==ne}):typeof Y!="string"?B.grep(k,function(oe){return s.call(Y,oe)>-1!==ne}):B.filter(Y,k,ne)}B.filter=function(k,Y,ne){var oe=Y[0];return ne&&(k=":not("+k+")"),Y.length===1&&oe.nodeType===1?B.find.matchesSelector(oe,k)?[oe]:[]:B.find.matches(k,B.grep(Y,function(ye){return ye.nodeType===1}))},B.fn.extend({find:function(k){var Y,ne,oe=this.length,ye=this;if(typeof k!="string")return this.pushStack(B(k).filter(function(){for(Y=0;Y<oe;Y++)if(B.contains(ye[Y],this))return!0}));for(ne=this.pushStack([]),Y=0;Y<oe;Y++)B.find(k,ye[Y],ne);return oe>1?B.uniqueSort(ne):ne},filter:function(k){return this.pushStack(ee(this,k||[],!1))},not:function(k){return this.pushStack(ee(this,k||[],!0))},is:function(k){return!!ee(this,typeof k=="string"&&O.test(k)?B(k):k||[],!1).length}});var pe,je=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,qe=B.fn.init=function(k,Y,ne){var oe,ye;if(!k)return this;if(ne=ne||pe,typeof k=="string")if(k[0]==="<"&&k[k.length-1]===">"&&k.length>=3?oe=[null,k,null]:oe=je.exec(k),oe&&(oe[1]||!Y))if(oe[1]){if(Y=Y instanceof B?Y[0]:Y,B.merge(this,B.parseHTML(oe[1],Y&&Y.nodeType?Y.ownerDocument||Y:D,!0)),re.test(oe[1])&&B.isPlainObject(Y))for(oe in Y)E(this[oe])?this[oe](Y[oe]):this.attr(oe,Y[oe]);return this}else return ye=D.getElementById(oe[2]),ye&&(this[0]=ye,this.length=1),this;else return!Y||Y.jquery?(Y||ne).find(k):this.constructor(Y).find(k);else{if(k.nodeType)return this[0]=k,this.length=1,this;if(E(k))return ne.ready!==void 0?ne.ready(k):k(B)}return B.makeArray(k,this)};qe.prototype=B.fn,pe=B(D);var We=/^(?:parents|prev(?:Until|All))/,ot={children:!0,contents:!0,next:!0,prev:!0};B.fn.extend({has:function(k){var Y=B(k,this),ne=Y.length;return this.filter(function(){for(var oe=0;oe<ne;oe++)if(B.contains(this,Y[oe]))return!0})},closest:function(k,Y){var ne,oe=0,ye=this.length,be=[],Le=typeof k!="string"&&B(k);if(!O.test(k)){for(;oe<ye;oe++)for(ne=this[oe];ne&&ne!==Y;ne=ne.parentNode)if(ne.nodeType<11&&(Le?Le.index(ne)>-1:ne.nodeType===1&&B.find.matchesSelector(ne,k))){be.push(ne);break}}return this.pushStack(be.length>1?B.uniqueSort(be):be)},index:function(k){return k?typeof k=="string"?s.call(B(k),this[0]):s.call(this,k.jquery?k[0]:k):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(k,Y){return this.pushStack(B.uniqueSort(B.merge(this.get(),B(k,Y))))},addBack:function(k){return this.add(k==null?this.prevObject:this.prevObject.filter(k))}});function gt(k,Y){for(;(k=k[Y])&&k.nodeType!==1;);return k}B.each({parent:function(k){var Y=k.parentNode;return Y&&Y.nodeType!==11?Y:null},parents:function(k){return X(k,"parentNode")},parentsUntil:function(k,Y,ne){return X(k,"parentNode",ne)},next:function(k){return gt(k,"nextSibling")},prev:function(k){return gt(k,"previousSibling")},nextAll:function(k){return X(k,"nextSibling")},prevAll:function(k){return X(k,"previousSibling")},nextUntil:function(k,Y,ne){return X(k,"nextSibling",ne)},prevUntil:function(k,Y,ne){return X(k,"previousSibling",ne)},siblings:function(k){return I((k.parentNode||{}).firstChild,k)},children:function(k){return I(k.firstChild)},contents:function(k){return k.contentDocument!=null&&n(k.contentDocument)?k.contentDocument:(U(k,"template")&&(k=k.content||k),B.merge([],k.childNodes))}},function(k,Y){B.fn[k]=function(ne,oe){var ye=B.map(this,Y,ne);return k.slice(-5)!=="Until"&&(oe=ne),oe&&typeof oe=="string"&&(ye=B.filter(oe,ye)),this.length>1&&(ot[k]||B.uniqueSort(ye),We.test(k)&&ye.reverse()),this.pushStack(ye)}});var Pt=/[^\x20\t\r\n\f]+/g;function Dt(k){var Y={};return B.each(k.match(Pt)||[],function(ne,oe){Y[oe]=!0}),Y}B.Callbacks=function(k){k=typeof k=="string"?Dt(k):B.extend({},k);var Y,ne,oe,ye,be=[],Le=[],Ee=-1,Be=function(){for(ye=ye||k.once,oe=Y=!0;Le.length;Ee=-1)for(ne=Le.shift();++Ee<be.length;)be[Ee].apply(ne[0],ne[1])===!1&&k.stopOnFalse&&(Ee=be.length,ne=!1);k.memory||(ne=!1),Y=!1,ye&&(ne?be=[]:be="")},tt={add:function(){return be&&(ne&&!Y&&(Ee=be.length-1,Le.push(ne)),function wt(b){B.each(b,function(Mt,Vt){E(Vt)?(!k.unique||!tt.has(Vt))&&be.push(Vt):Vt&&Vt.length&&$(Vt)!=="string"&&wt(Vt)})}(arguments),ne&&!Y&&Be()),this},remove:function(){return B.each(arguments,function(wt,b){for(var Mt;(Mt=B.inArray(b,be,Mt))>-1;)be.splice(Mt,1),Mt<=Ee&&Ee--}),this},has:function(wt){return wt?B.inArray(wt,be)>-1:be.length>0},empty:function(){return be&&(be=[]),this},disable:function(){return ye=Le=[],be=ne="",this},disabled:function(){return!be},lock:function(){return ye=Le=[],!ne&&!Y&&(be=ne=""),this},locked:function(){return!!ye},fireWith:function(wt,b){return ye||(b=b||[],b=[wt,b.slice?b.slice():b],Le.push(b),Y||Be()),this},fire:function(){return tt.fireWith(this,arguments),this},fired:function(){return!!oe}};return tt};function nr(k){return k}function Nt(k){throw k}function Ut(k,Y,ne,oe){var ye;try{k&&E(ye=k.promise)?ye.call(k).done(Y).fail(ne):k&&E(ye=k.then)?ye.call(k,Y,ne):Y.apply(void 0,[k].slice(oe))}catch(be){ne.apply(void 0,[be])}}B.extend({Deferred:function(k){var Y=[["notify","progress",B.Callbacks("memory"),B.Callbacks("memory"),2],["resolve","done",B.Callbacks("once memory"),B.Callbacks("once memory"),0,"resolved"],["reject","fail",B.Callbacks("once memory"),B.Callbacks("once memory"),1,"rejected"]],ne="pending",oe={state:function(){return ne},always:function(){return ye.done(arguments).fail(arguments),this},catch:function(be){return oe.then(null,be)},pipe:function(){var be=arguments;return B.Deferred(function(Le){B.each(Y,function(Ee,Be){var tt=E(be[Be[4]])&&be[Be[4]];ye[Be[1]](function(){var wt=tt&&tt.apply(this,arguments);wt&&E(wt.promise)?wt.promise().progress(Le.notify).done(Le.resolve).fail(Le.reject):Le[Be[0]+"With"](this,tt?[wt]:arguments)})}),be=null}).promise()},then:function(be,Le,Ee){var Be=0;function tt(wt,b,Mt,Vt){return function(){var He=this,Bn=arguments,fn=function(){var yi,Oa;if(!(wt<Be)){if(yi=Mt.apply(He,Bn),yi===b.promise())throw new TypeError("Thenable self-resolution");Oa=yi&&(typeof yi=="object"||typeof yi=="function")&&yi.then,E(Oa)?Vt?Oa.call(yi,tt(Be,b,nr,Vt),tt(Be,b,Nt,Vt)):(Be++,Oa.call(yi,tt(Be,b,nr,Vt),tt(Be,b,Nt,Vt),tt(Be,b,nr,b.notifyWith))):(Mt!==nr&&(He=void 0,Bn=[yi]),(Vt||b.resolveWith)(He,Bn))}},Fr=Vt?fn:function(){try{fn()}catch(yi){B.Deferred.exceptionHook&&B.Deferred.exceptionHook(yi,Fr.stackTrace),wt+1>=Be&&(Mt!==Nt&&(He=void 0,Bn=[yi]),b.rejectWith(He,Bn))}};wt?Fr():(B.Deferred.getStackHook&&(Fr.stackTrace=B.Deferred.getStackHook()),t.setTimeout(Fr))}}return B.Deferred(function(wt){Y[0][3].add(tt(0,wt,E(Ee)?Ee:nr,wt.notifyWith)),Y[1][3].add(tt(0,wt,E(be)?be:nr)),Y[2][3].add(tt(0,wt,E(Le)?Le:Nt))}).promise()},promise:function(be){return be!=null?B.extend(be,oe):oe}},ye={};return B.each(Y,function(be,Le){var Ee=Le[2],Be=Le[5];oe[Le[1]]=Ee.add,Be&&Ee.add(function(){ne=Be},Y[3-be][2].disable,Y[3-be][3].disable,Y[0][2].lock,Y[0][3].lock),Ee.add(Le[3].fire),ye[Le[0]]=function(){return ye[Le[0]+"With"](this===ye?void 0:this,arguments),this},ye[Le[0]+"With"]=Ee.fireWith}),oe.promise(ye),k&&k.call(ye,ye),ye},when:function(k){var Y=arguments.length,ne=Y,oe=Array(ne),ye=i.call(arguments),be=B.Deferred(),Le=function(Ee){return function(Be){oe[Ee]=this,ye[Ee]=arguments.length>1?i.call(arguments):Be,--Y||be.resolveWith(oe,ye)}};if(Y<=1&&(Ut(k,be.done(Le(ne)).resolve,be.reject,!Y),be.state()==="pending"||E(ye[ne]&&ye[ne].then)))return be.then();for(;ne--;)Ut(ye[ne],Le(ne),be.reject);return be.promise()}});var Or=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;B.Deferred.exceptionHook=function(k,Y){t.console&&t.console.warn&&k&&Or.test(k.name)&&t.console.warn("jQuery.Deferred exception: "+k.message,k.stack,Y)},B.readyException=function(k){t.setTimeout(function(){throw k})};var he=B.Deferred();B.fn.ready=function(k){return he.then(k).catch(function(Y){B.readyException(Y)}),this},B.extend({isReady:!1,readyWait:1,ready:function(k){(k===!0?--B.readyWait:B.isReady)||(B.isReady=!0,!(k!==!0&&--B.readyWait>0)&&he.resolveWith(D,[B]))}}),B.ready.then=he.then;function xe(){D.removeEventListener("DOMContentLoaded",xe),t.removeEventListener("load",xe),B.ready()}D.readyState==="complete"||D.readyState!=="loading"&&!D.documentElement.doScroll?t.setTimeout(B.ready):(D.addEventListener("DOMContentLoaded",xe),t.addEventListener("load",xe));var Ge=function(k,Y,ne,oe,ye,be,Le){var Ee=0,Be=k.length,tt=ne==null;if($(ne)==="object"){ye=!0;for(Ee in ne)Ge(k,Y,Ee,ne[Ee],!0,be,Le)}else if(oe!==void 0&&(ye=!0,E(oe)||(Le=!0),tt&&(Le?(Y.call(k,oe),Y=null):(tt=Y,Y=function(wt,b,Mt){return tt.call(B(wt),Mt)})),Y))for(;Ee<Be;Ee++)Y(k[Ee],ne,Le?oe:oe.call(k[Ee],Ee,Y(k[Ee],ne)));return ye?k:tt?Y.call(k):Be?Y(k[0],ne):be},bt=/^-ms-/,Kt=/-([a-z])/g;function Gt(k,Y){return Y.toUpperCase()}function tn(k){return k.replace(bt,"ms-").replace(Kt,Gt)}var an=function(k){return k.nodeType===1||k.nodeType===9||!+k.nodeType};function Fn(){this.expando=B.expando+Fn.uid++}Fn.uid=1,Fn.prototype={cache:function(k){var Y=k[this.expando];return Y||(Y={},an(k)&&(k.nodeType?k[this.expando]=Y:Object.defineProperty(k,this.expando,{value:Y,configurable:!0}))),Y},set:function(k,Y,ne){var oe,ye=this.cache(k);if(typeof Y=="string")ye[tn(Y)]=ne;else for(oe in Y)ye[tn(oe)]=Y[oe];return ye},get:function(k,Y){return Y===void 0?this.cache(k):k[this.expando]&&k[this.expando][tn(Y)]},access:function(k,Y,ne){return Y===void 0||Y&&typeof Y=="string"&&ne===void 0?this.get(k,Y):(this.set(k,Y,ne),ne!==void 0?ne:Y)},remove:function(k,Y){var ne,oe=k[this.expando];if(oe!==void 0){if(Y!==void 0)for(Array.isArray(Y)?Y=Y.map(tn):(Y=tn(Y),Y=Y in oe?[Y]:Y.match(Pt)||[]),ne=Y.length;ne--;)delete oe[Y[ne]];(Y===void 0||B.isEmptyObject(oe))&&(k.nodeType?k[this.expando]=void 0:delete k[this.expando])}},hasData:function(k){var Y=k[this.expando];return Y!==void 0&&!B.isEmptyObject(Y)}};var wr=new Fn,Nn=new Fn,pi=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ti=/[A-Z]/g;function ka(k){return k==="true"?!0:k==="false"?!1:k==="null"?null:k===+k+""?+k:pi.test(k)?JSON.parse(k):k}function si(k,Y,ne){var oe;if(ne===void 0&&k.nodeType===1)if(oe="data-"+Y.replace(Ti,"-$&").toLowerCase(),ne=k.getAttribute(oe),typeof ne=="string"){try{ne=ka(ne)}catch{}Nn.set(k,Y,ne)}else ne=void 0;return ne}B.extend({hasData:function(k){return Nn.hasData(k)||wr.hasData(k)},data:function(k,Y,ne){return Nn.access(k,Y,ne)},removeData:function(k,Y){Nn.remove(k,Y)},_data:function(k,Y,ne){return wr.access(k,Y,ne)},_removeData:function(k,Y){wr.remove(k,Y)}}),B.fn.extend({data:function(k,Y){var ne,oe,ye,be=this[0],Le=be&&be.attributes;if(k===void 0){if(this.length&&(ye=Nn.get(be),be.nodeType===1&&!wr.get(be,"hasDataAttrs"))){for(ne=Le.length;ne--;)Le[ne]&&(oe=Le[ne].name,oe.indexOf("data-")===0&&(oe=tn(oe.slice(5)),si(be,oe,ye[oe])));wr.set(be,"hasDataAttrs",!0)}return ye}return typeof k=="object"?this.each(function(){Nn.set(this,k)}):Ge(this,function(Ee){var Be;if(be&&Ee===void 0)return Be=Nn.get(be,k),Be!==void 0||(Be=si(be,k),Be!==void 0)?Be:void 0;this.each(function(){Nn.set(this,k,Ee)})},null,Y,arguments.length>1,null,!0)},removeData:function(k){return this.each(function(){Nn.remove(this,k)})}}),B.extend({queue:function(k,Y,ne){var oe;if(k)return Y=(Y||"fx")+"queue",oe=wr.get(k,Y),ne&&(!oe||Array.isArray(ne)?oe=wr.access(k,Y,B.makeArray(ne)):oe.push(ne)),oe||[]},dequeue:function(k,Y){Y=Y||"fx";var ne=B.queue(k,Y),oe=ne.length,ye=ne.shift(),be=B._queueHooks(k,Y),Le=function(){B.dequeue(k,Y)};ye==="inprogress"&&(ye=ne.shift(),oe--),ye&&(Y==="fx"&&ne.unshift("inprogress"),delete be.stop,ye.call(k,Le,be)),!oe&&be&&be.empty.fire()},_queueHooks:function(k,Y){var ne=Y+"queueHooks";return wr.get(k,ne)||wr.access(k,ne,{empty:B.Callbacks("once memory").add(function(){wr.remove(k,[Y+"queue",ne])})})}}),B.fn.extend({queue:function(k,Y){var ne=2;return typeof k!="string"&&(Y=k,k="fx",ne--),arguments.length<ne?B.queue(this[0],k):Y===void 0?this:this.each(function(){var oe=B.queue(this,k,Y);B._queueHooks(this,k),k==="fx"&&oe[0]!=="inprogress"&&B.dequeue(this,k)})},dequeue:function(k){return this.each(function(){B.dequeue(this,k)})},clearQueue:function(k){return this.queue(k||"fx",[])},promise:function(k,Y){var ne,oe=1,ye=B.Deferred(),be=this,Le=this.length,Ee=function(){--oe||ye.resolveWith(be,[be])};for(typeof k!="string"&&(Y=k,k=void 0),k=k||"fx";Le--;)ne=wr.get(be[Le],k+"queueHooks"),ne&&ne.empty&&(oe++,ne.empty.add(Ee));return Ee(),ye.promise(Y)}});var Hn=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Di=new RegExp("^(?:([+-])=|)("+Hn+")([a-z%]*)$","i"),Yi=["Top","Right","Bottom","Left"],di=D.documentElement,jr=function(k){return B.contains(k.ownerDocument,k)},Jr={composed:!0};di.getRootNode&&(jr=function(k){return B.contains(k.ownerDocument,k)||k.getRootNode(Jr)===k.ownerDocument});var Br=function(k,Y){return k=Y||k,k.style.display==="none"||k.style.display===""&&jr(k)&&B.css(k,"display")==="none"};function Gi(k,Y,ne,oe){var ye,be,Le=20,Ee=oe?function(){return oe.cur()}:function(){return B.css(k,Y,"")},Be=Ee(),tt=ne&&ne[3]||(B.cssNumber[Y]?"":"px"),wt=k.nodeType&&(B.cssNumber[Y]||tt!=="px"&&+Be)&&Di.exec(B.css(k,Y));if(wt&&wt[3]!==tt){for(Be=Be/2,tt=tt||wt[3],wt=+Be||1;Le--;)B.style(k,Y,wt+tt),(1-be)*(1-(be=Ee()/Be||.5))<=0&&(Le=0),wt=wt/be;wt=wt*2,B.style(k,Y,wt+tt),ne=ne||[]}return ne&&(wt=+wt||+Be||0,ye=ne[1]?wt+(ne[1]+1)*ne[2]:+ne[2],oe&&(oe.unit=tt,oe.start=wt,oe.end=ye)),ye}var Li={};function Ua(k){var Y,ne=k.ownerDocument,oe=k.nodeName,ye=Li[oe];return ye||(Y=ne.body.appendChild(ne.createElement(oe)),ye=B.css(Y,"display"),Y.parentNode.removeChild(Y),ye==="none"&&(ye="block"),Li[oe]=ye,ye)}function _a(k,Y){for(var ne,oe,ye=[],be=0,Le=k.length;be<Le;be++)oe=k[be],oe.style&&(ne=oe.style.display,Y?(ne==="none"&&(ye[be]=wr.get(oe,"display")||null,ye[be]||(oe.style.display="")),oe.style.display===""&&Br(oe)&&(ye[be]=Ua(oe))):ne!=="none"&&(ye[be]="none",wr.set(oe,"display",ne)));for(be=0;be<Le;be++)ye[be]!=null&&(k[be].style.display=ye[be]);return k}B.fn.extend({show:function(){return _a(this,!0)},hide:function(){return _a(this)},toggle:function(k){return typeof k=="boolean"?k?this.show():this.hide():this.each(function(){Br(this)?B(this).show():B(this).hide()})}});var Bo=/^(?:checkbox|radio)$/i,Ka=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Qs=/^$|^module$|\/(?:java|ecma)script/i;(function(){var k=D.createDocumentFragment(),Y=k.appendChild(D.createElement("div")),ne=D.createElement("input");ne.setAttribute("type","radio"),ne.setAttribute("checked","checked"),ne.setAttribute("name","t"),Y.appendChild(ne),x.checkClone=Y.cloneNode(!0).cloneNode(!0).lastChild.checked,Y.innerHTML="<textarea>x</textarea>",x.noCloneChecked=!!Y.cloneNode(!0).lastChild.defaultValue,Y.innerHTML="<option></option>",x.option=!!Y.lastChild})();var co={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};co.tbody=co.tfoot=co.colgroup=co.caption=co.thead,co.th=co.td,x.option||(co.optgroup=co.option=[1,"<select multiple='multiple'>","</select>"]);function fo(k,Y){var ne;return typeof k.getElementsByTagName<"u"?ne=k.getElementsByTagName(Y||"*"):typeof k.querySelectorAll<"u"?ne=k.querySelectorAll(Y||"*"):ne=[],Y===void 0||Y&&U(k,Y)?B.merge([k],ne):ne}function fs(k,Y){for(var ne=0,oe=k.length;ne<oe;ne++)wr.set(k[ne],"globalEval",!Y||wr.get(Y[ne],"globalEval"))}var gu=/<|&#?\w+;/;function Hs(k,Y,ne,oe,ye){for(var be,Le,Ee,Be,tt,wt,b=Y.createDocumentFragment(),Mt=[],Vt=0,He=k.length;Vt<He;Vt++)if(be=k[Vt],be||be===0)if($(be)==="object")B.merge(Mt,be.nodeType?[be]:be);else if(!gu.test(be))Mt.push(Y.createTextNode(be));else{for(Le=Le||b.appendChild(Y.createElement("div")),Ee=(Ka.exec(be)||["",""])[1].toLowerCase(),Be=co[Ee]||co._default,Le.innerHTML=Be[1]+B.htmlPrefilter(be)+Be[2],wt=Be[0];wt--;)Le=Le.lastChild;B.merge(Mt,Le.childNodes),Le=b.firstChild,Le.textContent=""}for(b.textContent="",Vt=0;be=Mt[Vt++];){if(oe&&B.inArray(be,oe)>-1){ye&&ye.push(be);continue}if(tt=jr(be),Le=fo(b.appendChild(be),"script"),tt&&fs(Le),ne)for(wt=0;be=Le[wt++];)Qs.test(be.type||"")&&ne.push(be)}return b}var Ss=/^key/,Au=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,yu=/^([^.]*)(?:\.(.+)|)/;function ra(){return!0}function ge(){return!1}function Te(k,Y){return k===Oe()==(Y==="focus")}function Oe(){try{return D.activeElement}catch{}}function ze(k,Y,ne,oe,ye,be){var Le,Ee;if(typeof Y=="object"){typeof ne!="string"&&(oe=oe||ne,ne=void 0);for(Ee in Y)ze(k,Ee,ne,oe,Y[Ee],be);return k}if(oe==null&&ye==null?(ye=ne,oe=ne=void 0):ye==null&&(typeof ne=="string"?(ye=oe,oe=void 0):(ye=oe,oe=ne,ne=void 0)),ye===!1)ye=ge;else if(!ye)return k;return be===1&&(Le=ye,ye=function(Be){return B().off(Be),Le.apply(this,arguments)},ye.guid=Le.guid||(Le.guid=B.guid++)),k.each(function(){B.event.add(this,Y,ye,oe,ne)})}B.event={global:{},add:function(k,Y,ne,oe,ye){var be,Le,Ee,Be,tt,wt,b,Mt,Vt,He,Bn,fn=wr.get(k);if(an(k))for(ne.handler&&(be=ne,ne=be.handler,ye=be.selector),ye&&B.find.matchesSelector(di,ye),ne.guid||(ne.guid=B.guid++),(Be=fn.events)||(Be=fn.events=Object.create(null)),(Le=fn.handle)||(Le=fn.handle=function(Fr){return typeof B<"u"&&B.event.triggered!==Fr.type?B.event.dispatch.apply(k,arguments):void 0}),Y=(Y||"").match(Pt)||[""],tt=Y.length;tt--;)Ee=yu.exec(Y[tt])||[],Vt=Bn=Ee[1],He=(Ee[2]||"").split(".").sort(),Vt&&(b=B.event.special[Vt]||{},Vt=(ye?b.delegateType:b.bindType)||Vt,b=B.event.special[Vt]||{},wt=B.extend({type:Vt,origType:Bn,data:oe,handler:ne,guid:ne.guid,selector:ye,needsContext:ye&&B.expr.match.needsContext.test(ye),namespace:He.join(".")},be),(Mt=Be[Vt])||(Mt=Be[Vt]=[],Mt.delegateCount=0,(!b.setup||b.setup.call(k,oe,He,Le)===!1)&&k.addEventListener&&k.addEventListener(Vt,Le)),b.add&&(b.add.call(k,wt),wt.handler.guid||(wt.handler.guid=ne.guid)),ye?Mt.splice(Mt.delegateCount++,0,wt):Mt.push(wt),B.event.global[Vt]=!0)},remove:function(k,Y,ne,oe,ye){var be,Le,Ee,Be,tt,wt,b,Mt,Vt,He,Bn,fn=wr.hasData(k)&&wr.get(k);if(!(!fn||!(Be=fn.events))){for(Y=(Y||"").match(Pt)||[""],tt=Y.length;tt--;){if(Ee=yu.exec(Y[tt])||[],Vt=Bn=Ee[1],He=(Ee[2]||"").split(".").sort(),!Vt){for(Vt in Be)B.event.remove(k,Vt+Y[tt],ne,oe,!0);continue}for(b=B.event.special[Vt]||{},Vt=(oe?b.delegateType:b.bindType)||Vt,Mt=Be[Vt]||[],Ee=Ee[2]&&new RegExp("(^|\\.)"+He.join("\\.(?:.*\\.|)")+"(\\.|$)"),Le=be=Mt.length;be--;)wt=Mt[be],(ye||Bn===wt.origType)&&(!ne||ne.guid===wt.guid)&&(!Ee||Ee.test(wt.namespace))&&(!oe||oe===wt.selector||oe==="**"&&wt.selector)&&(Mt.splice(be,1),wt.selector&&Mt.delegateCount--,b.remove&&b.remove.call(k,wt));Le&&!Mt.length&&((!b.teardown||b.teardown.call(k,He,fn.handle)===!1)&&B.removeEvent(k,Vt,fn.handle),delete Be[Vt])}B.isEmptyObject(Be)&&wr.remove(k,"handle events")}},dispatch:function(k){var Y,ne,oe,ye,be,Le,Ee=new Array(arguments.length),Be=B.event.fix(k),tt=(wr.get(this,"events")||Object.create(null))[Be.type]||[],wt=B.event.special[Be.type]||{};for(Ee[0]=Be,Y=1;Y<arguments.length;Y++)Ee[Y]=arguments[Y];if(Be.delegateTarget=this,!(wt.preDispatch&&wt.preDispatch.call(this,Be)===!1)){for(Le=B.event.handlers.call(this,Be,tt),Y=0;(ye=Le[Y++])&&!Be.isPropagationStopped();)for(Be.currentTarget=ye.elem,ne=0;(be=ye.handlers[ne++])&&!Be.isImmediatePropagationStopped();)(!Be.rnamespace||be.namespace===!1||Be.rnamespace.test(be.namespace))&&(Be.handleObj=be,Be.data=be.data,oe=((B.event.special[be.origType]||{}).handle||be.handler).apply(ye.elem,Ee),oe!==void 0&&(Be.result=oe)===!1&&(Be.preventDefault(),Be.stopPropagation()));return wt.postDispatch&&wt.postDispatch.call(this,Be),Be.result}},handlers:function(k,Y){var ne,oe,ye,be,Le,Ee=[],Be=Y.delegateCount,tt=k.target;if(Be&&tt.nodeType&&!(k.type==="click"&&k.button>=1)){for(;tt!==this;tt=tt.parentNode||this)if(tt.nodeType===1&&!(k.type==="click"&&tt.disabled===!0)){for(be=[],Le={},ne=0;ne<Be;ne++)oe=Y[ne],ye=oe.selector+" ",Le[ye]===void 0&&(Le[ye]=oe.needsContext?B(ye,this).index(tt)>-1:B.find(ye,this,null,[tt]).length),Le[ye]&&be.push(oe);be.length&&Ee.push({elem:tt,handlers:be})}}return tt=this,Be<Y.length&&Ee.push({elem:tt,handlers:Y.slice(Be)}),Ee},addProp:function(k,Y){Object.defineProperty(B.Event.prototype,k,{enumerable:!0,configurable:!0,get:E(Y)?function(){if(this.originalEvent)return Y(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[k]},set:function(ne){Object.defineProperty(this,k,{enumerable:!0,configurable:!0,writable:!0,value:ne})}})},fix:function(k){return k[B.expando]?k:new B.Event(k)},special:{load:{noBubble:!0},click:{setup:function(k){var Y=this||k;return Bo.test(Y.type)&&Y.click&&U(Y,"input")&&Ie(Y,"click",ra),!1},trigger:function(k){var Y=this||k;return Bo.test(Y.type)&&Y.click&&U(Y,"input")&&Ie(Y,"click"),!0},_default:function(k){var Y=k.target;return Bo.test(Y.type)&&Y.click&&U(Y,"input")&&wr.get(Y,"click")||U(Y,"a")}},beforeunload:{postDispatch:function(k){k.result!==void 0&&k.originalEvent&&(k.originalEvent.returnValue=k.result)}}}};function Ie(k,Y,ne){if(!ne){wr.get(k,Y)===void 0&&B.event.add(k,Y,ra);return}wr.set(k,Y,!1),B.event.add(k,Y,{namespace:!1,handler:function(oe){var ye,be,Le=wr.get(this,Y);if(oe.isTrigger&1&&this[Y]){if(Le.length)(B.event.special[Y]||{}).delegateType&&oe.stopPropagation();else if(Le=i.call(arguments),wr.set(this,Y,Le),ye=ne(this,Y),this[Y](),be=wr.get(this,Y),Le!==be||ye?wr.set(this,Y,!1):be={},Le!==be)return oe.stopImmediatePropagation(),oe.preventDefault(),be.value}else Le.length&&(wr.set(this,Y,{value:B.event.trigger(B.extend(Le[0],B.Event.prototype),Le.slice(1),this)}),oe.stopImmediatePropagation())}})}B.removeEvent=function(k,Y,ne){k.removeEventListener&&k.removeEventListener(Y,ne)},B.Event=function(k,Y){if(!(this instanceof B.Event))return new B.Event(k,Y);k&&k.type?(this.originalEvent=k,this.type=k.type,this.isDefaultPrevented=k.defaultPrevented||k.defaultPrevented===void 0&&k.returnValue===!1?ra:ge,this.target=k.target&&k.target.nodeType===3?k.target.parentNode:k.target,this.currentTarget=k.currentTarget,this.relatedTarget=k.relatedTarget):this.type=k,Y&&B.extend(this,Y),this.timeStamp=k&&k.timeStamp||Date.now(),this[B.expando]=!0},B.Event.prototype={constructor:B.Event,isDefaultPrevented:ge,isPropagationStopped:ge,isImmediatePropagationStopped:ge,isSimulated:!1,preventDefault:function(){var k=this.originalEvent;this.isDefaultPrevented=ra,k&&!this.isSimulated&&k.preventDefault()},stopPropagation:function(){var k=this.originalEvent;this.isPropagationStopped=ra,k&&!this.isSimulated&&k.stopPropagation()},stopImmediatePropagation:function(){var k=this.originalEvent;this.isImmediatePropagationStopped=ra,k&&!this.isSimulated&&k.stopImmediatePropagation(),this.stopPropagation()}},B.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(k){var Y=k.button;return k.which==null&&Ss.test(k.type)?k.charCode!=null?k.charCode:k.keyCode:!k.which&&Y!==void 0&&Au.test(k.type)?Y&1?1:Y&2?3:Y&4?2:0:k.which}},B.event.addProp),B.each({focus:"focusin",blur:"focusout"},function(k,Y){B.event.special[k]={setup:function(){return Ie(this,k,Te),!1},trigger:function(){return Ie(this,k),!0},delegateType:Y}}),B.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(k,Y){B.event.special[k]={delegateType:Y,bindType:Y,handle:function(ne){var oe,ye=this,be=ne.relatedTarget,Le=ne.handleObj;return(!be||be!==ye&&!B.contains(ye,be))&&(ne.type=Le.origType,oe=Le.handler.apply(this,arguments),ne.type=Y),oe}}}),B.fn.extend({on:function(k,Y,ne,oe){return ze(this,k,Y,ne,oe)},one:function(k,Y,ne,oe){return ze(this,k,Y,ne,oe,1)},off:function(k,Y,ne){var oe,ye;if(k&&k.preventDefault&&k.handleObj)return oe=k.handleObj,B(k.delegateTarget).off(oe.namespace?oe.origType+"."+oe.namespace:oe.origType,oe.selector,oe.handler),this;if(typeof k=="object"){for(ye in k)this.off(ye,Y,k[ye]);return this}return(Y===!1||typeof Y=="function")&&(ne=Y,Y=void 0),ne===!1&&(ne=ge),this.each(function(){B.event.remove(this,k,ne,Y)})}});var pt=/<script|<style|<link/i,At=/checked\s*(?:[^=]|=\s*.checked.)/i,De=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Qe(k,Y){return U(k,"table")&&U(Y.nodeType!==11?Y:Y.firstChild,"tr")&&B(k).children("tbody")[0]||k}function It(k){return k.type=(k.getAttribute("type")!==null)+"/"+k.type,k}function cr(k){return(k.type||"").slice(0,5)==="true/"?k.type=k.type.slice(5):k.removeAttribute("type"),k}function dr(k,Y){var ne,oe,ye,be,Le,Ee,Be;if(Y.nodeType===1){if(wr.hasData(k)&&(be=wr.get(k),Be=be.events,Be)){wr.remove(Y,"handle events");for(ye in Be)for(ne=0,oe=Be[ye].length;ne<oe;ne++)B.event.add(Y,ye,Be[ye][ne])}Nn.hasData(k)&&(Le=Nn.access(k),Ee=B.extend({},Le),Nn.set(Y,Ee))}}function $t(k,Y){var ne=Y.nodeName.toLowerCase();ne==="input"&&Bo.test(k.type)?Y.checked=k.checked:(ne==="input"||ne==="textarea")&&(Y.defaultValue=k.defaultValue)}function lr(k,Y,ne,oe){Y=a(Y);var ye,be,Le,Ee,Be,tt,wt=0,b=k.length,Mt=b-1,Vt=Y[0],He=E(Vt);if(He||b>1&&typeof Vt=="string"&&!x.checkClone&&At.test(Vt))return k.each(function(Bn){var fn=k.eq(Bn);He&&(Y[0]=Vt.call(this,Bn,fn.html())),lr(fn,Y,ne,oe)});if(b&&(ye=Hs(Y,k[0].ownerDocument,!1,k,oe),be=ye.firstChild,ye.childNodes.length===1&&(ye=be),be||oe)){for(Le=B.map(fo(ye,"script"),It),Ee=Le.length;wt<b;wt++)Be=ye,wt!==Mt&&(Be=B.clone(Be,!0,!0),Ee&&B.merge(Le,fo(Be,"script"))),ne.call(k[wt],Be,wt);if(Ee)for(tt=Le[Le.length-1].ownerDocument,B.map(Le,cr),wt=0;wt<Ee;wt++)Be=Le[wt],Qs.test(Be.type||"")&&!wr.access(Be,"globalEval")&&B.contains(tt,Be)&&(Be.src&&(Be.type||"").toLowerCase()!=="module"?B._evalUrl&&!Be.noModule&&B._evalUrl(Be.src,{nonce:Be.nonce||Be.getAttribute("nonce")},tt):W(Be.textContent.replace(De,""),Be,tt))}return k}function Kr(k,Y,ne){for(var oe,ye=Y?B.filter(Y,k):k,be=0;(oe=ye[be])!=null;be++)!ne&&oe.nodeType===1&&B.cleanData(fo(oe)),oe.parentNode&&(ne&&jr(oe)&&fs(fo(oe,"script")),oe.parentNode.removeChild(oe));return k}B.extend({htmlPrefilter:function(k){return k},clone:function(k,Y,ne){var oe,ye,be,Le,Ee=k.cloneNode(!0),Be=jr(k);if(!x.noCloneChecked&&(k.nodeType===1||k.nodeType===11)&&!B.isXMLDoc(k))for(Le=fo(Ee),be=fo(k),oe=0,ye=be.length;oe<ye;oe++)$t(be[oe],Le[oe]);if(Y)if(ne)for(be=be||fo(k),Le=Le||fo(Ee),oe=0,ye=be.length;oe<ye;oe++)dr(be[oe],Le[oe]);else dr(k,Ee);return Le=fo(Ee,"script"),Le.length>0&&fs(Le,!Be&&fo(k,"script")),Ee},cleanData:function(k){for(var Y,ne,oe,ye=B.event.special,be=0;(ne=k[be])!==void 0;be++)if(an(ne)){if(Y=ne[wr.expando]){if(Y.events)for(oe in Y.events)ye[oe]?B.event.remove(ne,oe):B.removeEvent(ne,oe,Y.handle);ne[wr.expando]=void 0}ne[Nn.expando]&&(ne[Nn.expando]=void 0)}}}),B.fn.extend({detach:function(k){return Kr(this,k,!0)},remove:function(k){return Kr(this,k)},text:function(k){return Ge(this,function(Y){return Y===void 0?B.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=Y)})},null,k,arguments.length)},append:function(){return lr(this,arguments,function(k){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var Y=Qe(this,k);Y.appendChild(k)}})},prepend:function(){return lr(this,arguments,function(k){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var Y=Qe(this,k);Y.insertBefore(k,Y.firstChild)}})},before:function(){return lr(this,arguments,function(k){this.parentNode&&this.parentNode.insertBefore(k,this)})},after:function(){return lr(this,arguments,function(k){this.parentNode&&this.parentNode.insertBefore(k,this.nextSibling)})},empty:function(){for(var k,Y=0;(k=this[Y])!=null;Y++)k.nodeType===1&&(B.cleanData(fo(k,!1)),k.textContent="");return this},clone:function(k,Y){return k=k??!1,Y=Y??k,this.map(function(){return B.clone(this,k,Y)})},html:function(k){return Ge(this,function(Y){var ne=this[0]||{},oe=0,ye=this.length;if(Y===void 0&&ne.nodeType===1)return ne.innerHTML;if(typeof Y=="string"&&!pt.test(Y)&&!co[(Ka.exec(Y)||["",""])[1].toLowerCase()]){Y=B.htmlPrefilter(Y);try{for(;oe<ye;oe++)ne=this[oe]||{},ne.nodeType===1&&(B.cleanData(fo(ne,!1)),ne.innerHTML=Y);ne=0}catch{}}ne&&this.empty().append(Y)},null,k,arguments.length)},replaceWith:function(){var k=[];return lr(this,arguments,function(Y){var ne=this.parentNode;B.inArray(this,k)<0&&(B.cleanData(fo(this)),ne&&ne.replaceChild(Y,this))},k)}}),B.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(k,Y){B.fn[k]=function(ne){for(var oe,ye=[],be=B(ne),Le=be.length-1,Ee=0;Ee<=Le;Ee++)oe=Ee===Le?this:this.clone(!0),B(be[Ee])[Y](oe),o.apply(ye,oe.get());return this.pushStack(ye)}});var Dr=new RegExp("^("+Hn+")(?!px)[a-z%]+$","i"),qt=function(k){var Y=k.ownerDocument.defaultView;return(!Y||!Y.opener)&&(Y=t),Y.getComputedStyle(k)},Lr=function(k,Y,ne){var oe,ye,be={};for(ye in Y)be[ye]=k.style[ye],k.style[ye]=Y[ye];oe=ne.call(k);for(ye in Y)k.style[ye]=be[ye];return oe},Er=new RegExp(Yi.join("|"),"i");(function(){function k(){if(tt){Be.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",tt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",di.appendChild(Be).appendChild(tt);var wt=t.getComputedStyle(tt);ne=wt.top!=="1%",Ee=Y(wt.marginLeft)===12,tt.style.right="60%",be=Y(wt.right)===36,oe=Y(wt.width)===36,tt.style.position="absolute",ye=Y(tt.offsetWidth/3)===12,di.removeChild(Be),tt=null}}function Y(wt){return Math.round(parseFloat(wt))}var ne,oe,ye,be,Le,Ee,Be=D.createElement("div"),tt=D.createElement("div");tt.style&&(tt.style.backgroundClip="content-box",tt.cloneNode(!0).style.backgroundClip="",x.clearCloneStyle=tt.style.backgroundClip==="content-box",B.extend(x,{boxSizingReliable:function(){return k(),oe},pixelBoxStyles:function(){return k(),be},pixelPosition:function(){return k(),ne},reliableMarginLeft:function(){return k(),Ee},scrollboxSize:function(){return k(),ye},reliableTrDimensions:function(){var wt,b,Mt,Vt;return Le==null&&(wt=D.createElement("table"),b=D.createElement("tr"),Mt=D.createElement("div"),wt.style.cssText="position:absolute;left:-11111px",b.style.height="1px",Mt.style.height="9px",di.appendChild(wt).appendChild(b).appendChild(Mt),Vt=t.getComputedStyle(b),Le=parseInt(Vt.height)>3,di.removeChild(wt)),Le}}))})();function _r(k,Y,ne){var oe,ye,be,Le,Ee=k.style;return ne=ne||qt(k),ne&&(Le=ne.getPropertyValue(Y)||ne[Y],Le===""&&!jr(k)&&(Le=B.style(k,Y)),!x.pixelBoxStyles()&&Dr.test(Le)&&Er.test(Y)&&(oe=Ee.width,ye=Ee.minWidth,be=Ee.maxWidth,Ee.minWidth=Ee.maxWidth=Ee.width=Le,Le=ne.width,Ee.width=oe,Ee.minWidth=ye,Ee.maxWidth=be)),Le!==void 0?Le+"":Le}function Wn(k,Y){return{get:function(){if(k()){delete this.get;return}return(this.get=Y).apply(this,arguments)}}}var Cr=["Webkit","Moz","ms"],Qn=D.createElement("div").style,Ci={};function ii(k){for(var Y=k[0].toUpperCase()+k.slice(1),ne=Cr.length;ne--;)if(k=Cr[ne]+Y,k in Qn)return k}function bi(k){var Y=B.cssProps[k]||Ci[k];return Y||(k in Qn?k:Ci[k]=ii(k)||k)}var Un=/^(none|table(?!-c[ea]).+)/,oa=/^--/,xi={position:"absolute",visibility:"hidden",display:"block"},Ki={letterSpacing:"0",fontWeight:"400"};function gi(k,Y,ne){var oe=Di.exec(Y);return oe?Math.max(0,oe[2]-(ne||0))+(oe[3]||"px"):Y}function Zn(k,Y,ne,oe,ye,be){var Le=Y==="width"?1:0,Ee=0,Be=0;if(ne===(oe?"border":"content"))return 0;for(;Le<4;Le+=2)ne==="margin"&&(Be+=B.css(k,ne+Yi[Le],!0,ye)),oe?(ne==="content"&&(Be-=B.css(k,"padding"+Yi[Le],!0,ye)),ne!=="margin"&&(Be-=B.css(k,"border"+Yi[Le]+"Width",!0,ye))):(Be+=B.css(k,"padding"+Yi[Le],!0,ye),ne!=="padding"?Be+=B.css(k,"border"+Yi[Le]+"Width",!0,ye):Ee+=B.css(k,"border"+Yi[Le]+"Width",!0,ye));return!oe&&be>=0&&(Be+=Math.max(0,Math.ceil(k["offset"+Y[0].toUpperCase()+Y.slice(1)]-be-Be-Ee-.5))||0),Be}function $n(k,Y,ne){var oe=qt(k),ye=!x.boxSizingReliable()||ne,be=ye&&B.css(k,"boxSizing",!1,oe)==="border-box",Le=be,Ee=_r(k,Y,oe),Be="offset"+Y[0].toUpperCase()+Y.slice(1);if(Dr.test(Ee)){if(!ne)return Ee;Ee="auto"}return(!x.boxSizingReliable()&&be||!x.reliableTrDimensions()&&U(k,"tr")||Ee==="auto"||!parseFloat(Ee)&&B.css(k,"display",!1,oe)==="inline")&&k.getClientRects().length&&(be=B.css(k,"boxSizing",!1,oe)==="border-box",Le=Be in k,Le&&(Ee=k[Be])),Ee=parseFloat(Ee)||0,Ee+Zn(k,Y,ne||(be?"border":"content"),Le,oe,Ee)+"px"}B.extend({cssHooks:{opacity:{get:function(k,Y){if(Y){var ne=_r(k,"opacity");return ne===""?"1":ne}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(k,Y,ne,oe){if(!(!k||k.nodeType===3||k.nodeType===8||!k.style)){var ye,be,Le,Ee=tn(Y),Be=oa.test(Y),tt=k.style;if(Be||(Y=bi(Ee)),Le=B.cssHooks[Y]||B.cssHooks[Ee],ne!==void 0){if(be=typeof ne,be==="string"&&(ye=Di.exec(ne))&&ye[1]&&(ne=Gi(k,Y,ye),be="number"),ne==null||ne!==ne)return;be==="number"&&!Be&&(ne+=ye&&ye[3]||(B.cssNumber[Ee]?"":"px")),!x.clearCloneStyle&&ne===""&&Y.indexOf("background")===0&&(tt[Y]="inherit"),(!Le||!("set"in Le)||(ne=Le.set(k,ne,oe))!==void 0)&&(Be?tt.setProperty(Y,ne):tt[Y]=ne)}else return Le&&"get"in Le&&(ye=Le.get(k,!1,oe))!==void 0?ye:tt[Y]}},css:function(k,Y,ne,oe){var ye,be,Le,Ee=tn(Y),Be=oa.test(Y);return Be||(Y=bi(Ee)),Le=B.cssHooks[Y]||B.cssHooks[Ee],Le&&"get"in Le&&(ye=Le.get(k,!0,ne)),ye===void 0&&(ye=_r(k,Y,oe)),ye==="normal"&&Y in Ki&&(ye=Ki[Y]),ne===""||ne?(be=parseFloat(ye),ne===!0||isFinite(be)?be||0:ye):ye}}),B.each(["height","width"],function(k,Y){B.cssHooks[Y]={get:function(ne,oe,ye){if(oe)return Un.test(B.css(ne,"display"))&&(!ne.getClientRects().length||!ne.getBoundingClientRect().width)?Lr(ne,xi,function(){return $n(ne,Y,ye)}):$n(ne,Y,ye)},set:function(ne,oe,ye){var be,Le=qt(ne),Ee=!x.scrollboxSize()&&Le.position==="absolute",Be=Ee||ye,tt=Be&&B.css(ne,"boxSizing",!1,Le)==="border-box",wt=ye?Zn(ne,Y,ye,tt,Le):0;return tt&&Ee&&(wt-=Math.ceil(ne["offset"+Y[0].toUpperCase()+Y.slice(1)]-parseFloat(Le[Y])-Zn(ne,Y,"border",!1,Le)-.5)),wt&&(be=Di.exec(oe))&&(be[3]||"px")!=="px"&&(ne.style[Y]=oe,oe=B.css(ne,Y)),gi(ne,oe,wt)}}}),B.cssHooks.marginLeft=Wn(x.reliableMarginLeft,function(k,Y){if(Y)return(parseFloat(_r(k,"marginLeft"))||k.getBoundingClientRect().left-Lr(k,{marginLeft:0},function(){return k.getBoundingClientRect().left}))+"px"}),B.each({margin:"",padding:"",border:"Width"},function(k,Y){B.cssHooks[k+Y]={expand:function(ne){for(var oe=0,ye={},be=typeof ne=="string"?ne.split(" "):[ne];oe<4;oe++)ye[k+Yi[oe]+Y]=be[oe]||be[oe-2]||be[0];return ye}},k!=="margin"&&(B.cssHooks[k+Y].set=gi)}),B.fn.extend({css:function(k,Y){return Ge(this,function(ne,oe,ye){var be,Le,Ee={},Be=0;if(Array.isArray(oe)){for(be=qt(ne),Le=oe.length;Be<Le;Be++)Ee[oe[Be]]=B.css(ne,oe[Be],!1,be);return Ee}return ye!==void 0?B.style(ne,oe,ye):B.css(ne,oe)},k,Y,arguments.length>1)}});function ki(k,Y,ne,oe,ye){return new ki.prototype.init(k,Y,ne,oe,ye)}B.Tween=ki,ki.prototype={constructor:ki,init:function(k,Y,ne,oe,ye,be){this.elem=k,this.prop=ne,this.easing=ye||B.easing._default,this.options=Y,this.start=this.now=this.cur(),this.end=oe,this.unit=be||(B.cssNumber[ne]?"":"px")},cur:function(){var k=ki.propHooks[this.prop];return k&&k.get?k.get(this):ki.propHooks._default.get(this)},run:function(k){var Y,ne=ki.propHooks[this.prop];return this.options.duration?this.pos=Y=B.easing[this.easing](k,this.options.duration*k,0,1,this.options.duration):this.pos=Y=k,this.now=(this.end-this.start)*Y+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),ne&&ne.set?ne.set(this):ki.propHooks._default.set(this),this}},ki.prototype.init.prototype=ki.prototype,ki.propHooks={_default:{get:function(k){var Y;return k.elem.nodeType!==1||k.elem[k.prop]!=null&&k.elem.style[k.prop]==null?k.elem[k.prop]:(Y=B.css(k.elem,k.prop,""),!Y||Y==="auto"?0:Y)},set:function(k){B.fx.step[k.prop]?B.fx.step[k.prop](k):k.elem.nodeType===1&&(B.cssHooks[k.prop]||k.elem.style[bi(k.prop)]!=null)?B.style(k.elem,k.prop,k.now+k.unit):k.elem[k.prop]=k.now}}},ki.propHooks.scrollTop=ki.propHooks.scrollLeft={set:function(k){k.elem.nodeType&&k.elem.parentNode&&(k.elem[k.prop]=k.now)}},B.easing={linear:function(k){return k},swing:function(k){return .5-Math.cos(k*Math.PI)/2},_default:"swing"},B.fx=ki.prototype.init,B.fx.step={};var Es,Ba,_o=/^(?:toggle|show|hide)$/,hs=/queueHooks$/;function eu(){Ba&&(D.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(eu):t.setTimeout(eu,B.fx.interval),B.fx.tick())}function sa(){return t.setTimeout(function(){Es=void 0}),Es=Date.now()}function tu(k,Y){var ne,oe=0,ye={height:k};for(Y=Y?1:0;oe<4;oe+=2-Y)ne=Yi[oe],ye["margin"+ne]=ye["padding"+ne]=k;return Y&&(ye.opacity=ye.width=k),ye}function ho(k,Y,ne){for(var oe,ye=(ai.tweeners[Y]||[]).concat(ai.tweeners["*"]),be=0,Le=ye.length;be<Le;be++)if(oe=ye[be].call(ne,Y,k))return oe}function Za(k,Y,ne){var oe,ye,be,Le,Ee,Be,tt,wt,b="width"in Y||"height"in Y,Mt=this,Vt={},He=k.style,Bn=k.nodeType&&Br(k),fn=wr.get(k,"fxshow");ne.queue||(Le=B._queueHooks(k,"fx"),Le.unqueued==null&&(Le.unqueued=0,Ee=Le.empty.fire,Le.empty.fire=function(){Le.unqueued||Ee()}),Le.unqueued++,Mt.always(function(){Mt.always(function(){Le.unqueued--,B.queue(k,"fx").length||Le.empty.fire()})}));for(oe in Y)if(ye=Y[oe],_o.test(ye)){if(delete Y[oe],be=be||ye==="toggle",ye===(Bn?"hide":"show"))if(ye==="show"&&fn&&fn[oe]!==void 0)Bn=!0;else continue;Vt[oe]=fn&&fn[oe]||B.style(k,oe)}if(Be=!B.isEmptyObject(Y),!(!Be&&B.isEmptyObject(Vt))){b&&k.nodeType===1&&(ne.overflow=[He.overflow,He.overflowX,He.overflowY],tt=fn&&fn.display,tt==null&&(tt=wr.get(k,"display")),wt=B.css(k,"display"),wt==="none"&&(tt?wt=tt:(_a([k],!0),tt=k.style.display||tt,wt=B.css(k,"display"),_a([k]))),(wt==="inline"||wt==="inline-block"&&tt!=null)&&B.css(k,"float")==="none"&&(Be||(Mt.done(function(){He.display=tt}),tt==null&&(wt=He.display,tt=wt==="none"?"":wt)),He.display="inline-block")),ne.overflow&&(He.overflow="hidden",Mt.always(function(){He.overflow=ne.overflow[0],He.overflowX=ne.overflow[1],He.overflowY=ne.overflow[2]})),Be=!1;for(oe in Vt)Be||(fn?"hidden"in fn&&(Bn=fn.hidden):fn=wr.access(k,"fxshow",{display:tt}),be&&(fn.hidden=!Bn),Bn&&_a([k],!0),Mt.done(function(){Bn||_a([k]),wr.remove(k,"fxshow");for(oe in Vt)B.style(k,oe,Vt[oe])})),Be=ho(Bn?fn[oe]:0,oe,Mt),oe in fn||(fn[oe]=Be.start,Bn&&(Be.end=Be.start,Be.start=0))}}function Ho(k,Y){var ne,oe,ye,be,Le;for(ne in k)if(oe=tn(ne),ye=Y[oe],be=k[ne],Array.isArray(be)&&(ye=be[1],be=k[ne]=be[0]),ne!==oe&&(k[oe]=be,delete k[ne]),Le=B.cssHooks[oe],Le&&"expand"in Le){be=Le.expand(be),delete k[oe];for(ne in be)ne in k||(k[ne]=be[ne],Y[ne]=ye)}else Y[oe]=ye}function ai(k,Y,ne){var oe,ye,be=0,Le=ai.prefilters.length,Ee=B.Deferred().always(function(){delete Be.elem}),Be=function(){if(ye)return!1;for(var b=Es||sa(),Mt=Math.max(0,tt.startTime+tt.duration-b),Vt=Mt/tt.duration||0,He=1-Vt,Bn=0,fn=tt.tweens.length;Bn<fn;Bn++)tt.tweens[Bn].run(He);return Ee.notifyWith(k,[tt,He,Mt]),He<1&&fn?Mt:(fn||Ee.notifyWith(k,[tt,1,0]),Ee.resolveWith(k,[tt]),!1)},tt=Ee.promise({elem:k,props:B.extend({},Y),opts:B.extend(!0,{specialEasing:{},easing:B.easing._default},ne),originalProperties:Y,originalOptions:ne,startTime:Es||sa(),duration:ne.duration,tweens:[],createTween:function(b,Mt){var Vt=B.Tween(k,tt.opts,b,Mt,tt.opts.specialEasing[b]||tt.opts.easing);return tt.tweens.push(Vt),Vt},stop:function(b){var Mt=0,Vt=b?tt.tweens.length:0;if(ye)return this;for(ye=!0;Mt<Vt;Mt++)tt.tweens[Mt].run(1);return b?(Ee.notifyWith(k,[tt,1,0]),Ee.resolveWith(k,[tt,b])):Ee.rejectWith(k,[tt,b]),this}}),wt=tt.props;for(Ho(wt,tt.opts.specialEasing);be<Le;be++)if(oe=ai.prefilters[be].call(tt,k,wt,tt.opts),oe)return E(oe.stop)&&(B._queueHooks(tt.elem,tt.opts.queue).stop=oe.stop.bind(oe)),oe;return B.map(wt,ho,tt),E(tt.opts.start)&&tt.opts.start.call(k,tt),tt.progress(tt.opts.progress).done(tt.opts.done,tt.opts.complete).fail(tt.opts.fail).always(tt.opts.always),B.fx.timer(B.extend(Be,{elem:k,anim:tt,queue:tt.opts.queue})),tt}B.Animation=B.extend(ai,{tweeners:{"*":[function(k,Y){var ne=this.createTween(k,Y);return Gi(ne.elem,k,Di.exec(Y),ne),ne}]},tweener:function(k,Y){E(k)?(Y=k,k=["*"]):k=k.match(Pt);for(var ne,oe=0,ye=k.length;oe<ye;oe++)ne=k[oe],ai.tweeners[ne]=ai.tweeners[ne]||[],ai.tweeners[ne].unshift(Y)},prefilters:[Za],prefilter:function(k,Y){Y?ai.prefilters.unshift(k):ai.prefilters.push(k)}}),B.speed=function(k,Y,ne){var oe=k&&typeof k=="object"?B.extend({},k):{complete:ne||!ne&&Y||E(k)&&k,duration:k,easing:ne&&Y||Y&&!E(Y)&&Y};return B.fx.off?oe.duration=0:typeof oe.duration!="number"&&(oe.duration in B.fx.speeds?oe.duration=B.fx.speeds[oe.duration]:oe.duration=B.fx.speeds._default),(oe.queue==null||oe.queue===!0)&&(oe.queue="fx"),oe.old=oe.complete,oe.complete=function(){E(oe.old)&&oe.old.call(this),oe.queue&&B.dequeue(this,oe.queue)},oe},B.fn.extend({fadeTo:function(k,Y,ne,oe){return this.filter(Br).css("opacity",0).show().end().animate({opacity:Y},k,ne,oe)},animate:function(k,Y,ne,oe){var ye=B.isEmptyObject(k),be=B.speed(Y,ne,oe),Le=function(){var Ee=ai(this,B.extend({},k),be);(ye||wr.get(this,"finish"))&&Ee.stop(!0)};return Le.finish=Le,ye||be.queue===!1?this.each(Le):this.queue(be.queue,Le)},stop:function(k,Y,ne){var oe=function(ye){var be=ye.stop;delete ye.stop,be(ne)};return typeof k!="string"&&(ne=Y,Y=k,k=void 0),Y&&this.queue(k||"fx",[]),this.each(function(){var ye=!0,be=k!=null&&k+"queueHooks",Le=B.timers,Ee=wr.get(this);if(be)Ee[be]&&Ee[be].stop&&oe(Ee[be]);else for(be in Ee)Ee[be]&&Ee[be].stop&&hs.test(be)&&oe(Ee[be]);for(be=Le.length;be--;)Le[be].elem===this&&(k==null||Le[be].queue===k)&&(Le[be].anim.stop(ne),ye=!1,Le.splice(be,1));(ye||!ne)&&B.dequeue(this,k)})},finish:function(k){return k!==!1&&(k=k||"fx"),this.each(function(){var Y,ne=wr.get(this),oe=ne[k+"queue"],ye=ne[k+"queueHooks"],be=B.timers,Le=oe?oe.length:0;for(ne.finish=!0,B.queue(this,k,[]),ye&&ye.stop&&ye.stop.call(this,!0),Y=be.length;Y--;)be[Y].elem===this&&be[Y].queue===k&&(be[Y].anim.stop(!0),be.splice(Y,1));for(Y=0;Y<Le;Y++)oe[Y]&&oe[Y].finish&&oe[Y].finish.call(this);delete ne.finish})}}),B.each(["toggle","show","hide"],function(k,Y){var ne=B.fn[Y];B.fn[Y]=function(oe,ye,be){return oe==null||typeof oe=="boolean"?ne.apply(this,arguments):this.animate(tu(Y,!0),oe,ye,be)}}),B.each({slideDown:tu("show"),slideUp:tu("hide"),slideToggle:tu("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(k,Y){B.fn[k]=function(ne,oe,ye){return this.animate(Y,ne,oe,ye)}}),B.timers=[],B.fx.tick=function(){var k,Y=0,ne=B.timers;for(Es=Date.now();Y<ne.length;Y++)k=ne[Y],!k()&&ne[Y]===k&&ne.splice(Y--,1);ne.length||B.fx.stop(),Es=void 0},B.fx.timer=function(k){B.timers.push(k),B.fx.start()},B.fx.interval=13,B.fx.start=function(){Ba||(Ba=!0,eu())},B.fx.stop=function(){Ba=null},B.fx.speeds={slow:600,fast:200,_default:400},B.fn.delay=function(k,Y){return k=B.fx&&B.fx.speeds[k]||k,Y=Y||"fx",this.queue(Y,function(ne,oe){var ye=t.setTimeout(ne,k);oe.stop=function(){t.clearTimeout(ye)}})},function(){var k=D.createElement("input"),Y=D.createElement("select"),ne=Y.appendChild(D.createElement("option"));k.type="checkbox",x.checkOn=k.value!=="",x.optSelected=ne.selected,k=D.createElement("input"),k.value="t",k.type="radio",x.radioValue=k.value==="t"}();var Cs,bo=B.expr.attrHandle;B.fn.extend({attr:function(k,Y){return Ge(this,B.attr,k,Y,arguments.length>1)},removeAttr:function(k){return this.each(function(){B.removeAttr(this,k)})}}),B.extend({attr:function(k,Y,ne){var oe,ye,be=k.nodeType;if(!(be===3||be===8||be===2)){if(typeof k.getAttribute>"u")return B.prop(k,Y,ne);if((be!==1||!B.isXMLDoc(k))&&(ye=B.attrHooks[Y.toLowerCase()]||(B.expr.match.bool.test(Y)?Cs:void 0)),ne!==void 0){if(ne===null){B.removeAttr(k,Y);return}return ye&&"set"in ye&&(oe=ye.set(k,ne,Y))!==void 0?oe:(k.setAttribute(Y,ne+""),ne)}return ye&&"get"in ye&&(oe=ye.get(k,Y))!==null?oe:(oe=B.find.attr(k,Y),oe??void 0)}},attrHooks:{type:{set:function(k,Y){if(!x.radioValue&&Y==="radio"&&U(k,"input")){var ne=k.value;return k.setAttribute("type",Y),ne&&(k.value=ne),Y}}}},removeAttr:function(k,Y){var ne,oe=0,ye=Y&&Y.match(Pt);if(ye&&k.nodeType===1)for(;ne=ye[oe++];)k.removeAttribute(ne)}}),Cs={set:function(k,Y,ne){return Y===!1?B.removeAttr(k,ne):k.setAttribute(ne,ne),ne}},B.each(B.expr.match.bool.source.match(/\w+/g),function(k,Y){var ne=bo[Y]||B.find.attr;bo[Y]=function(oe,ye,be){var Le,Ee,Be=ye.toLowerCase();return be||(Ee=bo[Be],bo[Be]=Le,Le=ne(oe,ye,be)!=null?Be:null,bo[Be]=Ee),Le}});var ec=/^(?:input|select|textarea|button)$/i,ps=/^(?:a|area)$/i;B.fn.extend({prop:function(k,Y){return Ge(this,B.prop,k,Y,arguments.length>1)},removeProp:function(k){return this.each(function(){delete this[B.propFix[k]||k]})}}),B.extend({prop:function(k,Y,ne){var oe,ye,be=k.nodeType;if(!(be===3||be===8||be===2))return(be!==1||!B.isXMLDoc(k))&&(Y=B.propFix[Y]||Y,ye=B.propHooks[Y]),ne!==void 0?ye&&"set"in ye&&(oe=ye.set(k,ne,Y))!==void 0?oe:k[Y]=ne:ye&&"get"in ye&&(oe=ye.get(k,Y))!==null?oe:k[Y]},propHooks:{tabIndex:{get:function(k){var Y=B.find.attr(k,"tabindex");return Y?parseInt(Y,10):ec.test(k.nodeName)||ps.test(k.nodeName)&&k.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),x.optSelected||(B.propHooks.selected={get:function(k){var Y=k.parentNode;return Y&&Y.parentNode&&Y.parentNode.selectedIndex,null},set:function(k){var Y=k.parentNode;Y&&(Y.selectedIndex,Y.parentNode&&Y.parentNode.selectedIndex)}}),B.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){B.propFix[this.toLowerCase()]=this});function Du(k){var Y=k.match(Pt)||[];return Y.join(" ")}function eo(k){return k.getAttribute&&k.getAttribute("class")||""}function Me(k){return Array.isArray(k)?k:typeof k=="string"?k.match(Pt)||[]:[]}B.fn.extend({addClass:function(k){var Y,ne,oe,ye,be,Le,Ee,Be=0;if(E(k))return this.each(function(tt){B(this).addClass(k.call(this,tt,eo(this)))});if(Y=Me(k),Y.length){for(;ne=this[Be++];)if(ye=eo(ne),oe=ne.nodeType===1&&" "+Du(ye)+" ",oe){for(Le=0;be=Y[Le++];)oe.indexOf(" "+be+" ")<0&&(oe+=be+" ");Ee=Du(oe),ye!==Ee&&ne.setAttribute("class",Ee)}}return this},removeClass:function(k){var Y,ne,oe,ye,be,Le,Ee,Be=0;if(E(k))return this.each(function(tt){B(this).removeClass(k.call(this,tt,eo(this)))});if(!arguments.length)return this.attr("class","");if(Y=Me(k),Y.length){for(;ne=this[Be++];)if(ye=eo(ne),oe=ne.nodeType===1&&" "+Du(ye)+" ",oe){for(Le=0;be=Y[Le++];)for(;oe.indexOf(" "+be+" ")>-1;)oe=oe.replace(" "+be+" "," ");Ee=Du(oe),ye!==Ee&&ne.setAttribute("class",Ee)}}return this},toggleClass:function(k,Y){var ne=typeof k,oe=ne==="string"||Array.isArray(k);return typeof Y=="boolean"&&oe?Y?this.addClass(k):this.removeClass(k):E(k)?this.each(function(ye){B(this).toggleClass(k.call(this,ye,eo(this),Y),Y)}):this.each(function(){var ye,be,Le,Ee;if(oe)for(be=0,Le=B(this),Ee=Me(k);ye=Ee[be++];)Le.hasClass(ye)?Le.removeClass(ye):Le.addClass(ye);else(k===void 0||ne==="boolean")&&(ye=eo(this),ye&&wr.set(this,"__className__",ye),this.setAttribute&&this.setAttribute("class",ye||k===!1?"":wr.get(this,"__className__")||""))})},hasClass:function(k){var Y,ne,oe=0;for(Y=" "+k+" ";ne=this[oe++];)if(ne.nodeType===1&&(" "+Du(eo(ne))+" ").indexOf(Y)>-1)return!0;return!1}});var Ve=/\r/g;B.fn.extend({val:function(k){var Y,ne,oe,ye=this[0];return arguments.length?(oe=E(k),this.each(function(be){var Le;this.nodeType===1&&(oe?Le=k.call(this,be,B(this).val()):Le=k,Le==null?Le="":typeof Le=="number"?Le+="":Array.isArray(Le)&&(Le=B.map(Le,function(Ee){return Ee==null?"":Ee+""})),Y=B.valHooks[this.type]||B.valHooks[this.nodeName.toLowerCase()],(!Y||!("set"in Y)||Y.set(this,Le,"value")===void 0)&&(this.value=Le))})):ye?(Y=B.valHooks[ye.type]||B.valHooks[ye.nodeName.toLowerCase()],Y&&"get"in Y&&(ne=Y.get(ye,"value"))!==void 0?ne:(ne=ye.value,typeof ne=="string"?ne.replace(Ve,""):ne??"")):void 0}}),B.extend({valHooks:{option:{get:function(k){var Y=B.find.attr(k,"value");return Y??Du(B.text(k))}},select:{get:function(k){var Y,ne,oe,ye=k.options,be=k.selectedIndex,Le=k.type==="select-one",Ee=Le?null:[],Be=Le?be+1:ye.length;for(be<0?oe=Be:oe=Le?be:0;oe<Be;oe++)if(ne=ye[oe],(ne.selected||oe===be)&&!ne.disabled&&(!ne.parentNode.disabled||!U(ne.parentNode,"optgroup"))){if(Y=B(ne).val(),Le)return Y;Ee.push(Y)}return Ee},set:function(k,Y){for(var ne,oe,ye=k.options,be=B.makeArray(Y),Le=ye.length;Le--;)oe=ye[Le],(oe.selected=B.inArray(B.valHooks.option.get(oe),be)>-1)&&(ne=!0);return ne||(k.selectedIndex=-1),be}}}}),B.each(["radio","checkbox"],function(){B.valHooks[this]={set:function(k,Y){if(Array.isArray(Y))return k.checked=B.inArray(B(k).val(),Y)>-1}},x.checkOn||(B.valHooks[this].get=function(k){return k.getAttribute("value")===null?"on":k.value})}),x.focusin="onfocusin"in t;var it=/^(?:focusinfocus|focusoutblur)$/,Xt=function(k){k.stopPropagation()};B.extend(B.event,{trigger:function(k,Y,ne,oe){var ye,be,Le,Ee,Be,tt,wt,b,Mt=[ne||D],Vt=h.call(k,"type")?k.type:k,He=h.call(k,"namespace")?k.namespace.split("."):[];if(be=b=Le=ne=ne||D,!(ne.nodeType===3||ne.nodeType===8)&&!it.test(Vt+B.event.triggered)&&(Vt.indexOf(".")>-1&&(He=Vt.split("."),Vt=He.shift(),He.sort()),Be=Vt.indexOf(":")<0&&"on"+Vt,k=k[B.expando]?k:new B.Event(Vt,typeof k=="object"&&k),k.isTrigger=oe?2:3,k.namespace=He.join("."),k.rnamespace=k.namespace?new RegExp("(^|\\.)"+He.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,k.result=void 0,k.target||(k.target=ne),Y=Y==null?[k]:B.makeArray(Y,[k]),wt=B.event.special[Vt]||{},!(!oe&&wt.trigger&&wt.trigger.apply(ne,Y)===!1))){if(!oe&&!wt.noBubble&&!R(ne)){for(Ee=wt.delegateType||Vt,it.test(Ee+Vt)||(be=be.parentNode);be;be=be.parentNode)Mt.push(be),Le=be;Le===(ne.ownerDocument||D)&&Mt.push(Le.defaultView||Le.parentWindow||t)}for(ye=0;(be=Mt[ye++])&&!k.isPropagationStopped();)b=be,k.type=ye>1?Ee:wt.bindType||Vt,tt=(wr.get(be,"events")||Object.create(null))[k.type]&&wr.get(be,"handle"),tt&&tt.apply(be,Y),tt=Be&&be[Be],tt&&tt.apply&&an(be)&&(k.result=tt.apply(be,Y),k.result===!1&&k.preventDefault());return k.type=Vt,!oe&&!k.isDefaultPrevented()&&(!wt._default||wt._default.apply(Mt.pop(),Y)===!1)&&an(ne)&&Be&&E(ne[Vt])&&!R(ne)&&(Le=ne[Be],Le&&(ne[Be]=null),B.event.triggered=Vt,k.isPropagationStopped()&&b.addEventListener(Vt,Xt),ne[Vt](),k.isPropagationStopped()&&b.removeEventListener(Vt,Xt),B.event.triggered=void 0,Le&&(ne[Be]=Le)),k.result}},simulate:function(k,Y,ne){var oe=B.extend(new B.Event,ne,{type:k,isSimulated:!0});B.event.trigger(oe,null,Y)}}),B.fn.extend({trigger:function(k,Y){return this.each(function(){B.event.trigger(k,Y,this)})},triggerHandler:function(k,Y){var ne=this[0];if(ne)return B.event.trigger(k,Y,ne,!0)}}),x.focusin||B.each({focus:"focusin",blur:"focusout"},function(k,Y){var ne=function(oe){B.event.simulate(Y,oe.target,B.event.fix(oe))};B.event.special[Y]={setup:function(){var oe=this.ownerDocument||this.document||this,ye=wr.access(oe,Y);ye||oe.addEventListener(k,ne,!0),wr.access(oe,Y,(ye||0)+1)},teardown:function(){var oe=this.ownerDocument||this.document||this,ye=wr.access(oe,Y)-1;ye?wr.access(oe,Y,ye):(oe.removeEventListener(k,ne,!0),wr.remove(oe,Y))}}});var br=t.location,cn={guid:Date.now()},Ai=/\?/;B.parseXML=function(k){var Y;if(!k||typeof k!="string")return null;try{Y=new t.DOMParser().parseFromString(k,"text/xml")}catch{Y=void 0}return(!Y||Y.getElementsByTagName("parsererror").length)&&B.error("Invalid XML: "+k),Y};var xo=/\[\]$/,po=/\r?\n/g,Wo=/^(?:submit|button|image|reset|file)$/i,ds=/^(?:input|select|textarea|keygen)/i;function tf(k,Y,ne,oe){var ye;if(Array.isArray(Y))B.each(Y,function(be,Le){ne||xo.test(k)?oe(k,Le):tf(k+"["+(typeof Le=="object"&&Le!=null?be:"")+"]",Le,ne,oe)});else if(!ne&&$(Y)==="object")for(ye in Y)tf(k+"["+ye+"]",Y[ye],ne,oe);else oe(k,Y)}B.param=function(k,Y){var ne,oe=[],ye=function(be,Le){var Ee=E(Le)?Le():Le;oe[oe.length]=encodeURIComponent(be)+"="+encodeURIComponent(Ee??"")};if(k==null)return"";if(Array.isArray(k)||k.jquery&&!B.isPlainObject(k))B.each(k,function(){ye(this.name,this.value)});else for(ne in k)tf(ne,k[ne],Y,ye);return oe.join("&")},B.fn.extend({serialize:function(){return B.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var k=B.prop(this,"elements");return k?B.makeArray(k):this}).filter(function(){var k=this.type;return this.name&&!B(this).is(":disabled")&&ds.test(this.nodeName)&&!Wo.test(k)&&(this.checked||!Bo.test(k))}).map(function(k,Y){var ne=B(this).val();return ne==null?null:Array.isArray(ne)?B.map(ne,function(oe){return{name:Y.name,value:oe.replace(po,`\r
`)}}):{name:Y.name,value:ne.replace(po,`\r
`)}}).get()}});var tc=/%20/g,rf=/#.*$/,xc=/([?&])_=[^&]*/,Bf=/^(.*?):[ \t]*([^\r\n]*)$/mg,wc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ps=/^(?:GET|HEAD)$/,Qu=/^\/\//,Fu={},Nu={},zu="*/".concat("*"),Uu=D.createElement("a");Uu.href=br.href;function Ll(k){return function(Y,ne){typeof Y!="string"&&(ne=Y,Y="*");var oe,ye=0,be=Y.toLowerCase().match(Pt)||[];if(E(ne))for(;oe=be[ye++];)oe[0]==="+"?(oe=oe.slice(1)||"*",(k[oe]=k[oe]||[]).unshift(ne)):(k[oe]=k[oe]||[]).push(ne)}}function ms(k,Y,ne,oe){var ye={},be=k===Nu;function Le(Ee){var Be;return ye[Ee]=!0,B.each(k[Ee]||[],function(tt,wt){var b=wt(Y,ne,oe);if(typeof b=="string"&&!be&&!ye[b])return Y.dataTypes.unshift(b),Le(b),!1;if(be)return!(Be=b)}),Be}return Le(Y.dataTypes[0])||!ye["*"]&&Le("*")}function $i(k,Y){var ne,oe,ye=B.ajaxSettings.flatOptions||{};for(ne in Y)Y[ne]!==void 0&&((ye[ne]?k:oe||(oe={}))[ne]=Y[ne]);return oe&&B.extend(!0,k,oe),k}function ru(k,Y,ne){for(var oe,ye,be,Le,Ee=k.contents,Be=k.dataTypes;Be[0]==="*";)Be.shift(),oe===void 0&&(oe=k.mimeType||Y.getResponseHeader("Content-Type"));if(oe){for(ye in Ee)if(Ee[ye]&&Ee[ye].test(oe)){Be.unshift(ye);break}}if(Be[0]in ne)be=Be[0];else{for(ye in ne){if(!Be[0]||k.converters[ye+" "+Be[0]]){be=ye;break}Le||(Le=ye)}be=be||Le}if(be)return be!==Be[0]&&Be.unshift(be),ne[be]}function Df(k,Y,ne,oe){var ye,be,Le,Ee,Be,tt={},wt=k.dataTypes.slice();if(wt[1])for(Le in k.converters)tt[Le.toLowerCase()]=k.converters[Le];for(be=wt.shift();be;)if(k.responseFields[be]&&(ne[k.responseFields[be]]=Y),!Be&&oe&&k.dataFilter&&(Y=k.dataFilter(Y,k.dataType)),Be=be,be=wt.shift(),be){if(be==="*")be=Be;else if(Be!=="*"&&Be!==be){if(Le=tt[Be+" "+be]||tt["* "+be],!Le){for(ye in tt)if(Ee=ye.split(" "),Ee[1]===be&&(Le=tt[Be+" "+Ee[0]]||tt["* "+Ee[0]],Le)){Le===!0?Le=tt[ye]:tt[ye]!==!0&&(be=Ee[0],wt.unshift(Ee[1]));break}}if(Le!==!0)if(Le&&k.throws)Y=Le(Y);else try{Y=Le(Y)}catch(b){return{state:"parsererror",error:Le?b:"No conversion from "+Be+" to "+be}}}}return{state:"success",data:Y}}B.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:br.href,type:"GET",isLocal:wc.test(br.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zu,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":B.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(k,Y){return Y?$i($i(k,B.ajaxSettings),Y):$i(B.ajaxSettings,k)},ajaxPrefilter:Ll(Fu),ajaxTransport:Ll(Nu),ajax:function(k,Y){typeof k=="object"&&(Y=k,k=void 0),Y=Y||{};var ne,oe,ye,be,Le,Ee,Be,tt,wt,b,Mt=B.ajaxSetup({},Y),Vt=Mt.context||Mt,He=Mt.context&&(Vt.nodeType||Vt.jquery)?B(Vt):B.event,Bn=B.Deferred(),fn=B.Callbacks("once memory"),Fr=Mt.statusCode||{},yi={},Oa={},vn="canceled",Gr={readyState:0,getResponseHeader:function(Vi){var ua;if(Be){if(!be)for(be={};ua=Bf.exec(ye);)be[ua[1].toLowerCase()+" "]=(be[ua[1].toLowerCase()+" "]||[]).concat(ua[2]);ua=be[Vi.toLowerCase()+" "]}return ua==null?null:ua.join(", ")},getAllResponseHeaders:function(){return Be?ye:null},setRequestHeader:function(Vi,ua){return Be==null&&(Vi=Oa[Vi.toLowerCase()]=Oa[Vi.toLowerCase()]||Vi,yi[Vi]=ua),this},overrideMimeType:function(Vi){return Be==null&&(Mt.mimeType=Vi),this},statusCode:function(Vi){var ua;if(Vi)if(Be)Gr.always(Vi[Gr.status]);else for(ua in Vi)Fr[ua]=[Fr[ua],Vi[ua]];return this},abort:function(Vi){var ua=Vi||vn;return ne&&ne.abort(ua),$a(0,ua),this}};if(Bn.promise(Gr),Mt.url=((k||Mt.url||br.href)+"").replace(Qu,br.protocol+"//"),Mt.type=Y.method||Y.type||Mt.method||Mt.type,Mt.dataTypes=(Mt.dataType||"*").toLowerCase().match(Pt)||[""],Mt.crossDomain==null){Ee=D.createElement("a");try{Ee.href=Mt.url,Ee.href=Ee.href,Mt.crossDomain=Uu.protocol+"//"+Uu.host!=Ee.protocol+"//"+Ee.host}catch{Mt.crossDomain=!0}}if(Mt.data&&Mt.processData&&typeof Mt.data!="string"&&(Mt.data=B.param(Mt.data,Mt.traditional)),ms(Fu,Mt,Y,Gr),Be)return Gr;tt=B.event&&Mt.global,tt&&B.active++===0&&B.event.trigger("ajaxStart"),Mt.type=Mt.type.toUpperCase(),Mt.hasContent=!Ps.test(Mt.type),oe=Mt.url.replace(rf,""),Mt.hasContent?Mt.data&&Mt.processData&&(Mt.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Mt.data=Mt.data.replace(tc,"+")):(b=Mt.url.slice(oe.length),Mt.data&&(Mt.processData||typeof Mt.data=="string")&&(oe+=(Ai.test(oe)?"&":"?")+Mt.data,delete Mt.data),Mt.cache===!1&&(oe=oe.replace(xc,"$1"),b=(Ai.test(oe)?"&":"?")+"_="+cn.guid+++b),Mt.url=oe+b),Mt.ifModified&&(B.lastModified[oe]&&Gr.setRequestHeader("If-Modified-Since",B.lastModified[oe]),B.etag[oe]&&Gr.setRequestHeader("If-None-Match",B.etag[oe])),(Mt.data&&Mt.hasContent&&Mt.contentType!==!1||Y.contentType)&&Gr.setRequestHeader("Content-Type",Mt.contentType),Gr.setRequestHeader("Accept",Mt.dataTypes[0]&&Mt.accepts[Mt.dataTypes[0]]?Mt.accepts[Mt.dataTypes[0]]+(Mt.dataTypes[0]!=="*"?", "+zu+"; q=0.01":""):Mt.accepts["*"]);for(wt in Mt.headers)Gr.setRequestHeader(wt,Mt.headers[wt]);if(Mt.beforeSend&&(Mt.beforeSend.call(Vt,Gr,Mt)===!1||Be))return Gr.abort();if(vn="abort",fn.add(Mt.complete),Gr.done(Mt.success),Gr.fail(Mt.error),ne=ms(Nu,Mt,Y,Gr),!ne)$a(-1,"No Transport");else{if(Gr.readyState=1,tt&&He.trigger("ajaxSend",[Gr,Mt]),Be)return Gr;Mt.async&&Mt.timeout>0&&(Le=t.setTimeout(function(){Gr.abort("timeout")},Mt.timeout));try{Be=!1,ne.send(yi,$a)}catch(Vi){if(Be)throw Vi;$a(-1,Vi)}}function $a(Vi,ua,Jo,to){var wo,qo,ju,fa,Yn,dt=ua;Be||(Be=!0,Le&&t.clearTimeout(Le),ne=void 0,ye=to||"",Gr.readyState=Vi>0?4:0,wo=Vi>=200&&Vi<300||Vi===304,Jo&&(fa=ru(Mt,Gr,Jo)),!wo&&B.inArray("script",Mt.dataTypes)>-1&&(Mt.converters["text script"]=function(){}),fa=Df(Mt,fa,Gr,wo),wo?(Mt.ifModified&&(Yn=Gr.getResponseHeader("Last-Modified"),Yn&&(B.lastModified[oe]=Yn),Yn=Gr.getResponseHeader("etag"),Yn&&(B.etag[oe]=Yn)),Vi===204||Mt.type==="HEAD"?dt="nocontent":Vi===304?dt="notmodified":(dt=fa.state,qo=fa.data,ju=fa.error,wo=!ju)):(ju=dt,(Vi||!dt)&&(dt="error",Vi<0&&(Vi=0))),Gr.status=Vi,Gr.statusText=(ua||dt)+"",wo?Bn.resolveWith(Vt,[qo,dt,Gr]):Bn.rejectWith(Vt,[Gr,dt,ju]),Gr.statusCode(Fr),Fr=void 0,tt&&He.trigger(wo?"ajaxSuccess":"ajaxError",[Gr,Mt,wo?qo:ju]),fn.fireWith(Vt,[Gr,dt]),tt&&(He.trigger("ajaxComplete",[Gr,Mt]),--B.active||B.event.trigger("ajaxStop")))}return Gr},getJSON:function(k,Y,ne){return B.get(k,Y,ne,"json")},getScript:function(k,Y){return B.get(k,void 0,Y,"script")}}),B.each(["get","post"],function(k,Y){B[Y]=function(ne,oe,ye,be){return E(oe)&&(be=be||ye,ye=oe,oe=void 0),B.ajax(B.extend({url:ne,type:Y,dataType:be,data:oe,success:ye},B.isPlainObject(ne)&&ne))}}),B.ajaxPrefilter(function(k){var Y;for(Y in k.headers)Y.toLowerCase()==="content-type"&&(k.contentType=k.headers[Y]||"")}),B._evalUrl=function(k,Y,ne){return B.ajax({url:k,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(oe){B.globalEval(oe,Y,ne)}})},B.fn.extend({wrapAll:function(k){var Y;return this[0]&&(E(k)&&(k=k.call(this[0])),Y=B(k,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&Y.insertBefore(this[0]),Y.map(function(){for(var ne=this;ne.firstElementChild;)ne=ne.firstElementChild;return ne}).append(this)),this},wrapInner:function(k){return E(k)?this.each(function(Y){B(this).wrapInner(k.call(this,Y))}):this.each(function(){var Y=B(this),ne=Y.contents();ne.length?ne.wrapAll(k):Y.append(k)})},wrap:function(k){var Y=E(k);return this.each(function(ne){B(this).wrapAll(Y?k.call(this,ne):k)})},unwrap:function(k){return this.parent(k).not("body").each(function(){B(this).replaceWith(this.childNodes)}),this}}),B.expr.pseudos.hidden=function(k){return!B.expr.pseudos.visible(k)},B.expr.pseudos.visible=function(k){return!!(k.offsetWidth||k.offsetHeight||k.getClientRects().length)},B.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var Ff={0:200,1223:204},rc=B.ajaxSettings.xhr();x.cors=!!rc&&"withCredentials"in rc,x.ajax=rc=!!rc,B.ajaxTransport(function(k){var Y,ne;if(x.cors||rc&&!k.crossDomain)return{send:function(oe,ye){var be,Le=k.xhr();if(Le.open(k.type,k.url,k.async,k.username,k.password),k.xhrFields)for(be in k.xhrFields)Le[be]=k.xhrFields[be];k.mimeType&&Le.overrideMimeType&&Le.overrideMimeType(k.mimeType),!k.crossDomain&&!oe["X-Requested-With"]&&(oe["X-Requested-With"]="XMLHttpRequest");for(be in oe)Le.setRequestHeader(be,oe[be]);Y=function(Ee){return function(){Y&&(Y=ne=Le.onload=Le.onerror=Le.onabort=Le.ontimeout=Le.onreadystatechange=null,Ee==="abort"?Le.abort():Ee==="error"?typeof Le.status!="number"?ye(0,"error"):ye(Le.status,Le.statusText):ye(Ff[Le.status]||Le.status,Le.statusText,(Le.responseType||"text")!=="text"||typeof Le.responseText!="string"?{binary:Le.response}:{text:Le.responseText},Le.getAllResponseHeaders()))}},Le.onload=Y(),ne=Le.onerror=Le.ontimeout=Y("error"),Le.onabort!==void 0?Le.onabort=ne:Le.onreadystatechange=function(){Le.readyState===4&&t.setTimeout(function(){Y&&ne()})},Y=Y("abort");try{Le.send(k.hasContent&&k.data||null)}catch(Ee){if(Y)throw Ee}},abort:function(){Y&&Y()}}}),B.ajaxPrefilter(function(k){k.crossDomain&&(k.contents.script=!1)}),B.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(k){return B.globalEval(k),k}}}),B.ajaxPrefilter("script",function(k){k.cache===void 0&&(k.cache=!1),k.crossDomain&&(k.type="GET")}),B.ajaxTransport("script",function(k){if(k.crossDomain||k.scriptAttrs){var Y,ne;return{send:function(oe,ye){Y=B("<script>").attr(k.scriptAttrs||{}).prop({charset:k.scriptCharset,src:k.url}).on("load error",ne=function(be){Y.remove(),ne=null,be&&ye(be.type==="error"?404:200,be.type)}),D.head.appendChild(Y[0])},abort:function(){ne&&ne()}}}});var el=[],Tc=/(=)\?(?=&|$)|\?\?/;B.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var k=el.pop()||B.expando+"_"+cn.guid++;return this[k]=!0,k}}),B.ajaxPrefilter("json jsonp",function(k,Y,ne){var oe,ye,be,Le=k.jsonp!==!1&&(Tc.test(k.url)?"url":typeof k.data=="string"&&(k.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Tc.test(k.data)&&"data");if(Le||k.dataTypes[0]==="jsonp")return oe=k.jsonpCallback=E(k.jsonpCallback)?k.jsonpCallback():k.jsonpCallback,Le?k[Le]=k[Le].replace(Tc,"$1"+oe):k.jsonp!==!1&&(k.url+=(Ai.test(k.url)?"&":"?")+k.jsonp+"="+oe),k.converters["script json"]=function(){return be||B.error(oe+" was not called"),be[0]},k.dataTypes[0]="json",ye=t[oe],t[oe]=function(){be=arguments},ne.always(function(){ye===void 0?B(t).removeProp(oe):t[oe]=ye,k[oe]&&(k.jsonpCallback=Y.jsonpCallback,el.push(oe)),be&&E(ye)&&ye(be[0]),be=ye=void 0}),"script"}),x.createHTMLDocument=function(){var k=D.implementation.createHTMLDocument("").body;return k.innerHTML="<form></form><form></form>",k.childNodes.length===2}(),B.parseHTML=function(k,Y,ne){if(typeof k!="string")return[];typeof Y=="boolean"&&(ne=Y,Y=!1);var oe,ye,be;return Y||(x.createHTMLDocument?(Y=D.implementation.createHTMLDocument(""),oe=Y.createElement("base"),oe.href=D.location.href,Y.head.appendChild(oe)):Y=D),ye=re.exec(k),be=!ne&&[],ye?[Y.createElement(ye[1])]:(ye=Hs([k],Y,be),be&&be.length&&B(be).remove(),B.merge([],ye.childNodes))},B.fn.load=function(k,Y,ne){var oe,ye,be,Le=this,Ee=k.indexOf(" ");return Ee>-1&&(oe=Du(k.slice(Ee)),k=k.slice(0,Ee)),E(Y)?(ne=Y,Y=void 0):Y&&typeof Y=="object"&&(ye="POST"),Le.length>0&&B.ajax({url:k,type:ye||"GET",dataType:"html",data:Y}).done(function(Be){be=arguments,Le.html(oe?B("<div>").append(B.parseHTML(Be)).find(oe):Be)}).always(ne&&function(Be,tt){Le.each(function(){ne.apply(this,be||[Be.responseText,tt,Be])})}),this},B.expr.pseudos.animated=function(k){return B.grep(B.timers,function(Y){return k===Y.elem}).length},B.offset={setOffset:function(k,Y,ne){var oe,ye,be,Le,Ee,Be,tt,wt=B.css(k,"position"),b=B(k),Mt={};wt==="static"&&(k.style.position="relative"),Ee=b.offset(),be=B.css(k,"top"),Be=B.css(k,"left"),tt=(wt==="absolute"||wt==="fixed")&&(be+Be).indexOf("auto")>-1,tt?(oe=b.position(),Le=oe.top,ye=oe.left):(Le=parseFloat(be)||0,ye=parseFloat(Be)||0),E(Y)&&(Y=Y.call(k,ne,B.extend({},Ee))),Y.top!=null&&(Mt.top=Y.top-Ee.top+Le),Y.left!=null&&(Mt.left=Y.left-Ee.left+ye),"using"in Y?Y.using.call(k,Mt):(typeof Mt.top=="number"&&(Mt.top+="px"),typeof Mt.left=="number"&&(Mt.left+="px"),b.css(Mt))}},B.fn.extend({offset:function(k){if(arguments.length)return k===void 0?this:this.each(function(ye){B.offset.setOffset(this,k,ye)});var Y,ne,oe=this[0];if(oe)return oe.getClientRects().length?(Y=oe.getBoundingClientRect(),ne=oe.ownerDocument.defaultView,{top:Y.top+ne.pageYOffset,left:Y.left+ne.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var k,Y,ne,oe=this[0],ye={top:0,left:0};if(B.css(oe,"position")==="fixed")Y=oe.getBoundingClientRect();else{for(Y=this.offset(),ne=oe.ownerDocument,k=oe.offsetParent||ne.documentElement;k&&(k===ne.body||k===ne.documentElement)&&B.css(k,"position")==="static";)k=k.parentNode;k&&k!==oe&&k.nodeType===1&&(ye=B(k).offset(),ye.top+=B.css(k,"borderTopWidth",!0),ye.left+=B.css(k,"borderLeftWidth",!0))}return{top:Y.top-ye.top-B.css(oe,"marginTop",!0),left:Y.left-ye.left-B.css(oe,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var k=this.offsetParent;k&&B.css(k,"position")==="static";)k=k.offsetParent;return k||di})}}),B.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(k,Y){var ne=Y==="pageYOffset";B.fn[k]=function(oe){return Ge(this,function(ye,be,Le){var Ee;if(R(ye)?Ee=ye:ye.nodeType===9&&(Ee=ye.defaultView),Le===void 0)return Ee?Ee[Y]:ye[be];Ee?Ee.scrollTo(ne?Ee.pageXOffset:Le,ne?Le:Ee.pageYOffset):ye[be]=Le},k,oe,arguments.length)}}),B.each(["top","left"],function(k,Y){B.cssHooks[Y]=Wn(x.pixelPosition,function(ne,oe){if(oe)return oe=_r(ne,Y),Dr.test(oe)?B(ne).position()[Y]+"px":oe})}),B.each({Height:"height",Width:"width"},function(k,Y){B.each({padding:"inner"+k,content:Y,"":"outer"+k},function(ne,oe){B.fn[oe]=function(ye,be){var Le=arguments.length&&(ne||typeof ye!="boolean"),Ee=ne||(ye===!0||be===!0?"margin":"border");return Ge(this,function(Be,tt,wt){var b;return R(Be)?oe.indexOf("outer")===0?Be["inner"+k]:Be.document.documentElement["client"+k]:Be.nodeType===9?(b=Be.documentElement,Math.max(Be.body["scroll"+k],b["scroll"+k],Be.body["offset"+k],b["offset"+k],b["client"+k])):wt===void 0?B.css(Be,tt,Ee):B.style(Be,tt,wt,Ee)},Y,Le?ye:void 0,Le)}})}),B.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(k,Y){B.fn[Y]=function(ne){return this.on(Y,ne)}}),B.fn.extend({bind:function(k,Y,ne){return this.on(k,null,Y,ne)},unbind:function(k,Y){return this.off(k,null,Y)},delegate:function(k,Y,ne,oe){return this.on(Y,k,ne,oe)},undelegate:function(k,Y,ne){return arguments.length===1?this.off(k,"**"):this.off(Y,k||"**",ne)},hover:function(k,Y){return this.mouseenter(k).mouseleave(Y||k)}}),B.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(k,Y){B.fn[Y]=function(ne,oe){return arguments.length>0?this.on(Y,null,ne,oe):this.trigger(Y)}});var nc=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;B.proxy=function(k,Y){var ne,oe,ye;if(typeof Y=="string"&&(ne=k[Y],Y=k,k=ne),!!E(k))return oe=i.call(arguments,2),ye=function(){return k.apply(Y||this,oe.concat(i.call(arguments)))},ye.guid=k.guid=k.guid||B.guid++,ye},B.holdReady=function(k){k?B.readyWait++:B.ready(!0)},B.isArray=Array.isArray,B.parseJSON=JSON.parse,B.nodeName=U,B.isFunction=E,B.isWindow=R,B.camelCase=tn,B.type=$,B.now=Date.now,B.isNumeric=function(k){var Y=B.type(k);return(Y==="number"||Y==="string")&&!isNaN(k-parseFloat(k))},B.trim=function(k){return k==null?"":(k+"").replace(nc,"")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return B});var Sc=t.jQuery,_u=t.$;return B.noConflict=function(k){return t.$===B&&(t.$=_u),k&&t.jQuery===B&&(t.jQuery=Sc),B},typeof r>"u"&&(t.jQuery=t.$=B),B})});var xB=mr(bB=>{(function(t){var r=typeof self=="object"&&self.self==self&&self||typeof global=="object"&&global.global==global&&global;if(typeof define=="function"&&define.amd)define(["underscore","jquery","exports"],function(i,a,o){r.Backbone=t(r,o,i,a)});else if(typeof bB<"u"){var e=Gne(),n;try{n=_B()}catch{}t(r,bB,e,n)}else r.Backbone=t(r,{},r._,r.jQuery||r.Zepto||r.ender||r.$)})(function(t,r,e,n){var i=t.Backbone,a=Array.prototype.slice;r.VERSION="1.2.3",r.$=n,r.noConflict=function(){return t.Backbone=i,this},r.emulateHTTP=!1,r.emulateJSON=!1;var o=function(he,xe,Ge){switch(he){case 1:return function(){return e[xe](this[Ge])};case 2:return function(bt){return e[xe](this[Ge],bt)};case 3:return function(bt,Kt){return e[xe](this[Ge],u(bt,this),Kt)};case 4:return function(bt,Kt,Gt){return e[xe](this[Ge],u(bt,this),Kt,Gt)};default:return function(){var bt=a.call(arguments);return bt.unshift(this[Ge]),e[xe].apply(e,bt)}}},s=function(he,xe,Ge){e.each(xe,function(bt,Kt){e[Kt]&&(he.prototype[Kt]=o(bt,Kt,Ge))})},u=function(he,xe){return e.isFunction(he)?he:e.isObject(he)&&!xe._isModel(he)?c(he):e.isString(he)?function(Ge){return Ge.get(he)}:he},c=function(he){var xe=e.matches(he);return function(Ge){return xe(Ge.attributes)}},h=r.Events={},p=/\s+/,v=function(he,xe,Ge,bt,Kt){var Gt=0,tn;if(Ge&&typeof Ge=="object")for(bt!==void 0&&("context"in Kt)&&Kt.context===void 0&&(Kt.context=bt),tn=e.keys(Ge);Gt<tn.length;Gt++)xe=v(he,xe,tn[Gt],Ge[tn[Gt]],Kt);else if(Ge&&p.test(Ge))for(tn=Ge.split(p);Gt<tn.length;Gt++)xe=he(xe,tn[Gt],bt,Kt);else xe=he(xe,Ge,bt,Kt);return xe};h.on=function(he,xe,Ge){return x(this,he,xe,Ge)};var x=function(he,xe,Ge,bt,Kt){if(he._events=v(E,he._events||{},xe,Ge,{context:bt,ctx:he,listening:Kt}),Kt){var Gt=he._listeners||(he._listeners={});Gt[Kt.id]=Kt}return he};h.listenTo=function(he,xe,Ge){if(!he)return this;var bt=he._listenId||(he._listenId=e.uniqueId("l")),Kt=this._listeningTo||(this._listeningTo={}),Gt=Kt[bt];if(!Gt){var tn=this._listenId||(this._listenId=e.uniqueId("l"));Gt=Kt[bt]={obj:he,objId:bt,id:tn,listeningTo:Kt,count:0}}return x(he,xe,Ge,this,Gt),this};var E=function(he,xe,Ge,bt){if(Ge){var Kt=he[xe]||(he[xe]=[]),Gt=bt.context,tn=bt.ctx,an=bt.listening;an&&an.count++,Kt.push({callback:Ge,context:Gt,ctx:Gt||tn,listening:an})}return he};h.off=function(he,xe,Ge){return this._events?(this._events=v(R,this._events,he,xe,{context:Ge,listeners:this._listeners}),this):this},h.stopListening=function(he,xe,Ge){var bt=this._listeningTo;if(!bt)return this;for(var Kt=he?[he._listenId]:e.keys(bt),Gt=0;Gt<Kt.length;Gt++){var tn=bt[Kt[Gt]];if(!tn)break;tn.obj.off(xe,Ge,this)}return e.isEmpty(bt)&&(this._listeningTo=void 0),this};var R=function(he,xe,Ge,bt){if(he){var Kt=0,Gt,tn=bt.context,an=bt.listeners;if(!xe&&!Ge&&!tn){for(var Fn=e.keys(an);Kt<Fn.length;Kt++)Gt=an[Fn[Kt]],delete an[Gt.id],delete Gt.listeningTo[Gt.objId];return}for(var wr=xe?[xe]:e.keys(he);Kt<wr.length;Kt++){xe=wr[Kt];var Nn=he[xe];if(!Nn)break;for(var pi=[],Ti=0;Ti<Nn.length;Ti++){var ka=Nn[Ti];Ge&&Ge!==ka.callback&&Ge!==ka.callback._callback||tn&&tn!==ka.context?pi.push(ka):(Gt=ka.listening,Gt&&--Gt.count===0&&(delete an[Gt.id],delete Gt.listeningTo[Gt.objId]))}pi.length?he[xe]=pi:delete he[xe]}if(e.size(he))return he}};h.once=function(he,xe,Ge){var bt=v(D,{},he,xe,e.bind(this.off,this));return this.on(bt,void 0,Ge)},h.listenToOnce=function(he,xe,Ge){var bt=v(D,{},xe,Ge,e.bind(this.stopListening,this,he));return this.listenTo(he,bt)};var D=function(he,xe,Ge,bt){if(Ge){var Kt=he[xe]=e.once(function(){bt(xe,Kt),Ge.apply(this,arguments)});Kt._callback=Ge}return he};h.trigger=function(he){if(!this._events)return this;for(var xe=Math.max(0,arguments.length-1),Ge=Array(xe),bt=0;bt<xe;bt++)Ge[bt]=arguments[bt+1];return v(H,this._events,he,void 0,Ge),this};var H=function(he,xe,Ge,bt){if(he){var Kt=he[xe],Gt=he.all;Kt&&Gt&&(Gt=Gt.slice()),Kt&&W(Kt,bt),Gt&&W(Gt,[xe].concat(bt))}return he},W=function(he,xe){var Ge,bt=-1,Kt=he.length,Gt=xe[0],tn=xe[1],an=xe[2];switch(xe.length){case 0:for(;++bt<Kt;)(Ge=he[bt]).callback.call(Ge.ctx);return;case 1:for(;++bt<Kt;)(Ge=he[bt]).callback.call(Ge.ctx,Gt);return;case 2:for(;++bt<Kt;)(Ge=he[bt]).callback.call(Ge.ctx,Gt,tn);return;case 3:for(;++bt<Kt;)(Ge=he[bt]).callback.call(Ge.ctx,Gt,tn,an);return;default:for(;++bt<Kt;)(Ge=he[bt]).callback.apply(Ge.ctx,xe);return}};h.bind=h.on,h.unbind=h.off,e.extend(r,h);var $=r.Model=function(he,xe){var Ge=he||{};xe||(xe={}),this.cid=e.uniqueId(this.cidPrefix),this.attributes={},xe.collection&&(this.collection=xe.collection),xe.parse&&(Ge=this.parse(Ge,xe)||{}),Ge=e.defaults({},Ge,e.result(this,"defaults")),this.set(Ge,xe),this.changed={},this.initialize.apply(this,arguments)};e.extend($.prototype,h,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(he){return e.clone(this.attributes)},sync:function(){return r.sync.apply(this,arguments)},get:function(he){return this.attributes[he]},escape:function(he){return e.escape(this.get(he))},has:function(he){return this.get(he)!=null},matches:function(he){return!!e.iteratee(he,this)(this.attributes)},set:function(he,xe,Ge){if(he==null)return this;var bt;if(typeof he=="object"?(bt=he,Ge=xe):(bt={})[he]=xe,Ge||(Ge={}),!this._validate(bt,Ge))return!1;var Kt=Ge.unset,Gt=Ge.silent,tn=[],an=this._changing;this._changing=!0,an||(this._previousAttributes=e.clone(this.attributes),this.changed={});var Fn=this.attributes,wr=this.changed,Nn=this._previousAttributes;for(var pi in bt)xe=bt[pi],e.isEqual(Fn[pi],xe)||tn.push(pi),e.isEqual(Nn[pi],xe)?delete wr[pi]:wr[pi]=xe,Kt?delete Fn[pi]:Fn[pi]=xe;if(this.id=this.get(this.idAttribute),!Gt){tn.length&&(this._pending=Ge);for(var Ti=0;Ti<tn.length;Ti++)this.trigger("change:"+tn[Ti],this,Fn[tn[Ti]],Ge)}if(an)return this;if(!Gt)for(;this._pending;)Ge=this._pending,this._pending=!1,this.trigger("change",this,Ge);return this._pending=!1,this._changing=!1,this},unset:function(he,xe){return this.set(he,void 0,e.extend({},xe,{unset:!0}))},clear:function(he){var xe={};for(var Ge in this.attributes)xe[Ge]=void 0;return this.set(xe,e.extend({},he,{unset:!0}))},hasChanged:function(he){return he==null?!e.isEmpty(this.changed):e.has(this.changed,he)},changedAttributes:function(he){if(!he)return this.hasChanged()?e.clone(this.changed):!1;var xe=this._changing?this._previousAttributes:this.attributes,Ge={};for(var bt in he){var Kt=he[bt];e.isEqual(xe[bt],Kt)||(Ge[bt]=Kt)}return e.size(Ge)?Ge:!1},previous:function(he){return he==null||!this._previousAttributes?null:this._previousAttributes[he]},previousAttributes:function(){return e.clone(this._previousAttributes)},fetch:function(he){he=e.extend({parse:!0},he);var xe=this,Ge=he.success;return he.success=function(bt){var Kt=he.parse?xe.parse(bt,he):bt;if(!xe.set(Kt,he))return!1;Ge&&Ge.call(he.context,xe,bt,he),xe.trigger("sync",xe,bt,he)},Or(this,he),this.sync("read",this,he)},save:function(he,xe,Ge){var bt;he==null||typeof he=="object"?(bt=he,Ge=xe):(bt={})[he]=xe,Ge=e.extend({validate:!0,parse:!0},Ge);var Kt=Ge.wait;if(bt&&!Kt){if(!this.set(bt,Ge))return!1}else if(!this._validate(bt,Ge))return!1;var Gt=this,tn=Ge.success,an=this.attributes;Ge.success=function(Nn){Gt.attributes=an;var pi=Ge.parse?Gt.parse(Nn,Ge):Nn;if(Kt&&(pi=e.extend({},bt,pi)),pi&&!Gt.set(pi,Ge))return!1;tn&&tn.call(Ge.context,Gt,Nn,Ge),Gt.trigger("sync",Gt,Nn,Ge)},Or(this,Ge),bt&&Kt&&(this.attributes=e.extend({},an,bt));var Fn=this.isNew()?"create":Ge.patch?"patch":"update";Fn==="patch"&&!Ge.attrs&&(Ge.attrs=bt);var wr=this.sync(Fn,this,Ge);return this.attributes=an,wr},destroy:function(he){he=he?e.clone(he):{};var xe=this,Ge=he.success,bt=he.wait,Kt=function(){xe.stopListening(),xe.trigger("destroy",xe,xe.collection,he)};he.success=function(tn){bt&&Kt(),Ge&&Ge.call(he.context,xe,tn,he),xe.isNew()||xe.trigger("sync",xe,tn,he)};var Gt=!1;return this.isNew()?e.defer(he.success):(Or(this,he),Gt=this.sync("delete",this,he)),bt||Kt(),Gt},url:function(){var he=e.result(this,"urlRoot")||e.result(this.collection,"url")||Ut();if(this.isNew())return he;var xe=this.get(this.idAttribute);return he.replace(/[^\/]$/,"$&/")+encodeURIComponent(xe)},parse:function(he,xe){return he},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(he){return this._validate({},e.defaults({validate:!0},he))},_validate:function(he,xe){if(!xe.validate||!this.validate)return!0;he=e.extend({},this.attributes,he);var Ge=this.validationError=this.validate(he,xe)||null;return Ge?(this.trigger("invalid",this,Ge,e.extend(xe,{validationError:Ge})),!1):!0}});var J={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};s($,J,"attributes");var B=r.Collection=function(he,xe){xe||(xe={}),xe.model&&(this.model=xe.model),xe.comparator!==void 0&&(this.comparator=xe.comparator),this._reset(),this.initialize.apply(this,arguments),he&&this.reset(he,e.extend({silent:!0},xe))},se={add:!0,remove:!0,merge:!0},V={add:!0,remove:!1},X=function(he,xe,Ge){Ge=Math.min(Math.max(Ge,0),he.length);for(var bt=Array(he.length-Ge),Kt=xe.length,Gt=0;Gt<bt.length;Gt++)bt[Gt]=he[Gt+Ge];for(Gt=0;Gt<Kt;Gt++)he[Gt+Ge]=xe[Gt];for(Gt=0;Gt<bt.length;Gt++)he[Gt+Kt+Ge]=bt[Gt]};e.extend(B.prototype,h,{model:$,initialize:function(){},toJSON:function(he){return this.map(function(xe){return xe.toJSON(he)})},sync:function(){return r.sync.apply(this,arguments)},add:function(he,xe){return this.set(he,e.extend({merge:!1},xe,V))},remove:function(he,xe){xe=e.extend({},xe);var Ge=!e.isArray(he);he=Ge?[he]:e.clone(he);var bt=this._removeModels(he,xe);return!xe.silent&&bt&&this.trigger("update",this,xe),Ge?bt[0]:bt},set:function(he,xe){if(he!=null){xe=e.defaults({},xe,se),xe.parse&&!this._isModel(he)&&(he=this.parse(he,xe));var Ge=!e.isArray(he);he=Ge?[he]:he.slice();var bt=xe.at;bt!=null&&(bt=+bt),bt<0&&(bt+=this.length+1);for(var Kt=[],Gt=[],tn=[],an={},Fn=xe.add,wr=xe.merge,Nn=xe.remove,pi=!1,Ti=this.comparator&&bt==null&&xe.sort!==!1,ka=e.isString(this.comparator)?this.comparator:null,si,Hn=0;Hn<he.length;Hn++){si=he[Hn];var Di=this.get(si);if(Di){if(wr&&si!==Di){var Yi=this._isModel(si)?si.attributes:si;xe.parse&&(Yi=Di.parse(Yi,xe)),Di.set(Yi,xe),Ti&&!pi&&(pi=Di.hasChanged(ka))}an[Di.cid]||(an[Di.cid]=!0,Kt.push(Di)),he[Hn]=Di}else Fn&&(si=he[Hn]=this._prepareModel(si,xe),si&&(Gt.push(si),this._addReference(si,xe),an[si.cid]=!0,Kt.push(si)))}if(Nn){for(Hn=0;Hn<this.length;Hn++)si=this.models[Hn],an[si.cid]||tn.push(si);tn.length&&this._removeModels(tn,xe)}var di=!1,jr=!Ti&&Fn&&Nn;if(Kt.length&&jr?(di=this.length!=Kt.length||e.some(this.models,function(Jr,Br){return Jr!==Kt[Br]}),this.models.length=0,X(this.models,Kt,0),this.length=this.models.length):Gt.length&&(Ti&&(pi=!0),X(this.models,Gt,bt??this.length),this.length=this.models.length),pi&&this.sort({silent:!0}),!xe.silent){for(Hn=0;Hn<Gt.length;Hn++)bt!=null&&(xe.index=bt+Hn),si=Gt[Hn],si.trigger("add",si,this,xe);(pi||di)&&this.trigger("sort",this,xe),(Gt.length||tn.length)&&this.trigger("update",this,xe)}return Ge?he[0]:he}},reset:function(he,xe){xe=xe?e.clone(xe):{};for(var Ge=0;Ge<this.models.length;Ge++)this._removeReference(this.models[Ge],xe);return xe.previousModels=this.models,this._reset(),he=this.add(he,e.extend({silent:!0},xe)),xe.silent||this.trigger("reset",this,xe),he},push:function(he,xe){return this.add(he,e.extend({at:this.length},xe))},pop:function(he){var xe=this.at(this.length-1);return this.remove(xe,he)},unshift:function(he,xe){return this.add(he,e.extend({at:0},xe))},shift:function(he){var xe=this.at(0);return this.remove(xe,he)},slice:function(){return a.apply(this.models,arguments)},get:function(he){if(he!=null){var xe=this.modelId(this._isModel(he)?he.attributes:he);return this._byId[he]||this._byId[xe]||this._byId[he.cid]}},at:function(he){return he<0&&(he+=this.length),this.models[he]},where:function(he,xe){return this[xe?"find":"filter"](he)},findWhere:function(he){return this.where(he,!0)},sort:function(he){var xe=this.comparator;if(!xe)throw new Error("Cannot sort a set without a comparator");he||(he={});var Ge=xe.length;return e.isFunction(xe)&&(xe=e.bind(xe,this)),Ge===1||e.isString(xe)?this.models=this.sortBy(xe):this.models.sort(xe),he.silent||this.trigger("sort",this,he),this},pluck:function(he){return e.invoke(this.models,"get",he)},fetch:function(he){he=e.extend({parse:!0},he);var xe=he.success,Ge=this;return he.success=function(bt){var Kt=he.reset?"reset":"set";Ge[Kt](bt,he),xe&&xe.call(he.context,Ge,bt,he),Ge.trigger("sync",Ge,bt,he)},Or(this,he),this.sync("read",this,he)},create:function(he,xe){xe=xe?e.clone(xe):{};var Ge=xe.wait;if(he=this._prepareModel(he,xe),!he)return!1;Ge||this.add(he,xe);var bt=this,Kt=xe.success;return xe.success=function(Gt,tn,an){Ge&&bt.add(Gt,an),Kt&&Kt.call(an.context,Gt,tn,an)},he.save(null,xe),he},parse:function(he,xe){return he},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(he){return he[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(he,xe){if(this._isModel(he))return he.collection||(he.collection=this),he;xe=xe?e.clone(xe):{},xe.collection=this;var Ge=new this.model(he,xe);return Ge.validationError?(this.trigger("invalid",this,Ge.validationError,xe),!1):Ge},_removeModels:function(he,xe){for(var Ge=[],bt=0;bt<he.length;bt++){var Kt=this.get(he[bt]);if(Kt){var Gt=this.indexOf(Kt);this.models.splice(Gt,1),this.length--,xe.silent||(xe.index=Gt,Kt.trigger("remove",Kt,this,xe)),Ge.push(Kt),this._removeReference(Kt,xe)}}return Ge.length?Ge:!1},_isModel:function(he){return he instanceof $},_addReference:function(he,xe){this._byId[he.cid]=he;var Ge=this.modelId(he.attributes);Ge!=null&&(this._byId[Ge]=he),he.on("all",this._onModelEvent,this)},_removeReference:function(he,xe){delete this._byId[he.cid];var Ge=this.modelId(he.attributes);Ge!=null&&delete this._byId[Ge],this===he.collection&&delete he.collection,he.off("all",this._onModelEvent,this)},_onModelEvent:function(he,xe,Ge,bt){if(!((he==="add"||he==="remove")&&Ge!==this)){if(he==="destroy"&&this.remove(xe,bt),he==="change"){var Kt=this.modelId(xe.previousAttributes()),Gt=this.modelId(xe.attributes);Kt!==Gt&&(Kt!=null&&delete this._byId[Kt],Gt!=null&&(this._byId[Gt]=xe))}this.trigger.apply(this,arguments)}}});var I={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3};s(B,I,"models");var O=r.View=function(he){this.cid=e.uniqueId("view"),e.extend(this,e.pick(he,re)),this._ensureElement(),this.initialize.apply(this,arguments)},U=/^(\S+)\s*(.*)$/,re=["model","collection","el","id","attributes","className","tagName","events"];e.extend(O.prototype,h,{tagName:"div",$:function(he){return this.$el.find(he)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(he){return this.undelegateEvents(),this._setElement(he),this.delegateEvents(),this},_setElement:function(he){this.$el=he instanceof r.$?he:r.$(he),this.el=this.$el[0]},delegateEvents:function(he){if(he||(he=e.result(this,"events")),!he)return this;this.undelegateEvents();for(var xe in he){var Ge=he[xe];if(e.isFunction(Ge)||(Ge=this[Ge]),!!Ge){var bt=xe.match(U);this.delegate(bt[1],bt[2],e.bind(Ge,this))}}return this},delegate:function(he,xe,Ge){return this.$el.on(he+".delegateEvents"+this.cid,xe,Ge),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(he,xe,Ge){return this.$el.off(he+".delegateEvents"+this.cid,xe,Ge),this},_createElement:function(he){return document.createElement(he)},_ensureElement:function(){if(this.el)this.setElement(e.result(this,"el"));else{var he=e.extend({},e.result(this,"attributes"));this.id&&(he.id=e.result(this,"id")),this.className&&(he.class=e.result(this,"className")),this.setElement(this._createElement(e.result(this,"tagName"))),this._setAttributes(he)}},_setAttributes:function(he){this.$el.attr(he)}}),r.sync=function(he,xe,Ge){var bt=ee[he];e.defaults(Ge||(Ge={}),{emulateHTTP:r.emulateHTTP,emulateJSON:r.emulateJSON});var Kt={type:bt,dataType:"json"};if(Ge.url||(Kt.url=e.result(xe,"url")||Ut()),Ge.data==null&&xe&&(he==="create"||he==="update"||he==="patch")&&(Kt.contentType="application/json",Kt.data=JSON.stringify(Ge.attrs||xe.toJSON(Ge))),Ge.emulateJSON&&(Kt.contentType="application/x-www-form-urlencoded",Kt.data=Kt.data?{model:Kt.data}:{}),Ge.emulateHTTP&&(bt==="PUT"||bt==="DELETE"||bt==="PATCH")){Kt.type="POST",Ge.emulateJSON&&(Kt.data._method=bt);var Gt=Ge.beforeSend;Ge.beforeSend=function(Fn){if(Fn.setRequestHeader("X-HTTP-Method-Override",bt),Gt)return Gt.apply(this,arguments)}}Kt.type!=="GET"&&!Ge.emulateJSON&&(Kt.processData=!1);var tn=Ge.error;Ge.error=function(Fn,wr,Nn){Ge.textStatus=wr,Ge.errorThrown=Nn,tn&&tn.call(Ge.context,Fn,wr,Nn)};var an=Ge.xhr=r.ajax(e.extend(Kt,Ge));return xe.trigger("request",xe,an,Ge),an};var ee={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};r.ajax=function(){return r.$.ajax.apply(r.$,arguments)};var pe=r.Router=function(he){he||(he={}),he.routes&&(this.routes=he.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},je=/\((.*?)\)/g,qe=/(\(\?)?:\w+/g,We=/\*\w+/g,ot=/[\-{}\[\]+?.,\\\^$|#\s]/g;e.extend(pe.prototype,h,{initialize:function(){},route:function(he,xe,Ge){e.isRegExp(he)||(he=this._routeToRegExp(he)),e.isFunction(xe)&&(Ge=xe,xe=""),Ge||(Ge=this[xe]);var bt=this;return r.history.route(he,function(Kt){var Gt=bt._extractParameters(he,Kt);bt.execute(Ge,Gt,xe)!==!1&&(bt.trigger.apply(bt,["route:"+xe].concat(Gt)),bt.trigger("route",xe,Gt),r.history.trigger("route",bt,xe,Gt))}),this},execute:function(he,xe,Ge){he&&he.apply(this,xe)},navigate:function(he,xe){return r.history.navigate(he,xe),this},_bindRoutes:function(){if(this.routes){this.routes=e.result(this,"routes");for(var he,xe=e.keys(this.routes);(he=xe.pop())!=null;)this.route(he,this.routes[he])}},_routeToRegExp:function(he){return he=he.replace(ot,"\\$&").replace(je,"(?:$1)?").replace(qe,function(xe,Ge){return Ge?xe:"([^/?]+)"}).replace(We,"([^?]*?)"),new RegExp("^"+he+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(he,xe){var Ge=he.exec(xe).slice(1);return e.map(Ge,function(bt,Kt){return Kt===Ge.length-1?bt||null:bt?decodeURIComponent(bt):null})}});var gt=r.History=function(){this.handlers=[],this.checkUrl=e.bind(this.checkUrl,this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},Pt=/^[#\/]|\s+$/g,Dt=/^\/+|\/+$/g,nr=/#.*$/;gt.started=!1,e.extend(gt.prototype,h,{interval:50,atRoot:function(){var he=this.location.pathname.replace(/[^\/]$/,"$&/");return he===this.root&&!this.getSearch()},matchRoot:function(){var he=this.decodeFragment(this.location.pathname),xe=he.slice(0,this.root.length-1)+"/";return xe===this.root},decodeFragment:function(he){return decodeURI(he.replace(/%25/g,"%2525"))},getSearch:function(){var he=this.location.href.replace(/#.*/,"").match(/\?.+/);return he?he[0]:""},getHash:function(he){var xe=(he||this).location.href.match(/#(.*)$/);return xe?xe[1]:""},getPath:function(){var he=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return he.charAt(0)==="/"?he.slice(1):he},getFragment:function(he){return he==null&&(this._usePushState||!this._wantsHashChange?he=this.getPath():he=this.getHash()),he.replace(Pt,"")},start:function(he){if(gt.started)throw new Error("Backbone.history has already been started");if(gt.started=!0,this.options=e.extend({root:"/"},this.options,he),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(document.documentMode===void 0||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.history&&this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Dt,"/"),this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!this.atRoot()){var xe=this.root.slice(0,-1)||"/";return this.location.replace(xe+"#"+this.getPath()),!0}else this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var Ge=document.body,bt=Ge.insertBefore(this.iframe,Ge.firstChild).contentWindow;bt.document.open(),bt.document.close(),bt.location.hash="#"+this.fragment}var Kt=window.addEventListener||function(Gt,tn){return attachEvent("on"+Gt,tn)};if(this._usePushState?Kt("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?Kt("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var he=window.removeEventListener||function(xe,Ge){return detachEvent("on"+xe,Ge)};this._usePushState?he("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&he("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),gt.started=!1},route:function(he,xe){this.handlers.unshift({route:he,callback:xe})},checkUrl:function(he){var xe=this.getFragment();if(xe===this.fragment&&this.iframe&&(xe=this.getHash(this.iframe.contentWindow)),xe===this.fragment)return!1;this.iframe&&this.navigate(xe),this.loadUrl()},loadUrl:function(he){return this.matchRoot()?(he=this.fragment=this.getFragment(he),e.some(this.handlers,function(xe){if(xe.route.test(he))return xe.callback(he),!0})):!1},navigate:function(he,xe){if(!gt.started)return!1;(!xe||xe===!0)&&(xe={trigger:!!xe}),he=this.getFragment(he||"");var Ge=this.root;(he===""||he.charAt(0)==="?")&&(Ge=Ge.slice(0,-1)||"/");var bt=Ge+he;if(he=this.decodeFragment(he.replace(nr,"")),this.fragment!==he){if(this.fragment=he,this._usePushState)this.history[xe.replace?"replaceState":"pushState"]({},document.title,bt);else if(this._wantsHashChange){if(this._updateHash(this.location,he,xe.replace),this.iframe&&he!==this.getHash(this.iframe.contentWindow)){var Kt=this.iframe.contentWindow;xe.replace||(Kt.document.open(),Kt.document.close()),this._updateHash(Kt.location,he,xe.replace)}}else return this.location.assign(bt);if(xe.trigger)return this.loadUrl(he)}},_updateHash:function(he,xe,Ge){if(Ge){var bt=he.href.replace(/(javascript:|#).*$/,"");he.replace(bt+"#"+xe)}else he.hash="#"+xe}}),r.history=new gt;var Nt=function(he,xe){var Ge=this,bt;he&&e.has(he,"constructor")?bt=he.constructor:bt=function(){return Ge.apply(this,arguments)},e.extend(bt,Ge,xe);var Kt=function(){this.constructor=bt};return Kt.prototype=Ge.prototype,bt.prototype=new Kt,he&&e.extend(bt.prototype,he),bt.__super__=Ge.prototype,bt};$.extend=B.extend=pe.extend=O.extend=gt.extend=Nt;var Ut=function(){throw new Error('A "url" property or function must be specified')},Or=function(he,xe){var Ge=xe.error;xe.error=function(bt){Ge&&Ge.call(xe.context,he,bt,xe),he.trigger("error",he,bt,xe)}};return r})});var MFe={};Tl(MFe,{JupyterTransportModel:()=>Sie,JupyterTransportView:()=>Oie,MODULE_NAME:()=>Sy,MODULE_VERSION:()=>Ty,createDeck:()=>nE,initPlayground:()=>iE,jupyterTransport:()=>aE,updateDeck:()=>ZQ});var Ty="8.9.36",Sy="@deck.gl/jupyter-widget";et();Ii();et();function wF(t,r,e,n,i,a,o){try{var s=t[a](o),u=s.value}catch(c){e(c);return}s.done?r(u):Promise.resolve(u).then(n,i)}function zt(t){return function(){var r=this,e=arguments;return new Promise(function(n,i){var a=t.apply(r,e);function o(u){wF(a,n,i,o,s,"next",u)}function s(u){wF(a,n,i,o,s,"throw",u)}o(void 0)})}}var ky=en(On());et();at();vt();et();at();vt();et();var CF=100,PF=function(){function t(r,e){if(ce(this,t),_(this,"schema",void 0),_(this,"options",void 0),_(this,"length",0),_(this,"rows",null),_(this,"cursor",0),_(this,"_headers",[]),this.options=e,this.schema=r,!Array.isArray(r)){this._headers=[];for(var n in r)this._headers[r[n].index]=r[n].name}}return ve(t,[{key:"rowCount",value:function(){return this.length}},{key:"addArrayRow",value:function(e,n){Number.isFinite(n)&&(this.cursor=n),this.rows=this.rows||new Array(CF),this.rows[this.length]=e,this.length++}},{key:"addObjectRow",value:function(e,n){Number.isFinite(n)&&(this.cursor=n),this.rows=this.rows||new Array(CF),this.rows[this.length]=e,this.length++}},{key:"getBatch",value:function(){var e=this.rows;if(!e)return null;e=e.slice(0,this.length),this.rows=null;var n={shape:this.options.shape,batchType:"data",data:e,length:this.length,schema:this.schema,cursor:this.cursor};return n}}]),t}();at();vt();et();function Ey(t,r){if(!t)throw new Error("null row");if(!r)throw new Error("no headers");for(var e={},n=0;n<r.length;n++)e[r[n]]=t[n];return e}function Cy(t,r){if(!t)throw new Error("null row");if(!r)throw new Error("no headers");for(var e=new Array(r.length),n=0;n<r.length;n++)e[n]=t[r[n]];return e}var OF=100,MF=function(){function t(r,e){if(ce(this,t),_(this,"schema",void 0),_(this,"options",void 0),_(this,"length",0),_(this,"objectRows",null),_(this,"arrayRows",null),_(this,"cursor",0),_(this,"_headers",[]),this.options=e,this.schema=r,!Array.isArray(r)){this._headers=[];for(var n in r)this._headers[r[n].index]=r[n].name}}return ve(t,[{key:"rowCount",value:function(){return this.length}},{key:"addArrayRow",value:function(e,n){switch(Number.isFinite(n)&&(this.cursor=n),this.options.shape){case"object-row-table":var i=Ey(e,this._headers);this.addObjectRow(i,n);break;case"array-row-table":this.arrayRows=this.arrayRows||new Array(OF),this.arrayRows[this.length]=e,this.length++;break}}},{key:"addObjectRow",value:function(e,n){switch(Number.isFinite(n)&&(this.cursor=n),this.options.shape){case"array-row-table":var i=Cy(e,this._headers);this.addArrayRow(i,n);break;case"object-row-table":this.objectRows=this.objectRows||new Array(OF),this.objectRows[this.length]=e,this.length++;break}}},{key:"getBatch",value:function(){var e=this.arrayRows||this.objectRows;return e?(e=e.slice(0,this.length),this.arrayRows=null,this.objectRows=null,{shape:this.options.shape,batchType:"data",data:e,length:this.length,schema:this.schema,cursor:this.cursor}):null}}]),t}();Mn();at();vt();et();var noe=100,kF=function(){function t(r,e){ce(this,t),_(this,"schema",void 0),_(this,"length",0),_(this,"allocated",0),_(this,"columns",{}),this.schema=r,this._reallocateColumns()}return ve(t,[{key:"rowCount",value:function(){return this.length}},{key:"addArrayRow",value:function(e){this._reallocateColumns();var n=0;for(var i in this.columns)this.columns[i][this.length]=e[n++];this.length++}},{key:"addObjectRow",value:function(e){this._reallocateColumns();for(var n in e)this.columns[n][this.length]=e[n];this.length++}},{key:"getBatch",value:function(){this._pruneColumns();var e=Array.isArray(this.schema)?this.columns:{};if(!Array.isArray(this.schema))for(var n in this.schema){var i=this.schema[n];e[i.name]=this.columns[i.index]}this.columns={};var a={shape:"columnar-table",batchType:"data",data:e,schema:this.schema,length:this.length};return a}},{key:"_reallocateColumns",value:function(){if(!(this.length<this.allocated)){this.allocated=this.allocated>0?this.allocated*=2:noe,this.columns={};for(var e in this.schema){var n=this.schema[e],i=n.type||Float32Array,a=this.columns[n.index];if(a&&ArrayBuffer.isView(a)){var o=new i(this.allocated);o.set(a),this.columns[n.index]=o}else a?(a.length=this.allocated,this.columns[n.index]=a):this.columns[n.index]=new i(this.allocated)}}}},{key:"_pruneColumns",value:function(){for(var e=0,n=Object.entries(this.columns);e<n.length;e++){var i=Ot(n[e],2),a=i[0],o=i[1];this.columns[a]=o.slice(0,this.length)}}}]),t}();function BF(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function DF(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?BF(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):BF(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var ioe={shape:"array-row-table",batchSize:"auto",batchDebounceMs:0,limit:0,_limitMB:0},FF="TableBatchBuilder",Kb=function(){function t(r,e){ce(this,t),_(this,"schema",void 0),_(this,"options",void 0),_(this,"aggregator",null),_(this,"batchCount",0),_(this,"bytesUsed",0),_(this,"isChunkComplete",!1),_(this,"lastBatchEmittedMs",Date.now()),_(this,"totalLength",0),_(this,"totalBytes",0),_(this,"rowBytes",0),this.schema=r,this.options=DF(DF({},ioe),e)}return ve(t,[{key:"limitReached",value:function(){var e,n;return!!(Boolean((e=this.options)===null||e===void 0?void 0:e.limit)&&this.totalLength>=this.options.limit||Boolean((n=this.options)===null||n===void 0?void 0:n._limitMB)&&this.totalBytes/1e6>=this.options._limitMB)}},{key:"addRow",value:function(e){this.limitReached()||(this.totalLength++,this.rowBytes=this.rowBytes||this._estimateRowMB(e),this.totalBytes+=this.rowBytes,Array.isArray(e)?this.addArrayRow(e):this.addObjectRow(e))}},{key:"addArrayRow",value:function(e){if(!this.aggregator){var n=this._getTableBatchType();this.aggregator=new n(this.schema,this.options)}this.aggregator.addArrayRow(e)}},{key:"addObjectRow",value:function(e){if(!this.aggregator){var n=this._getTableBatchType();this.aggregator=new n(this.schema,this.options)}this.aggregator.addObjectRow(e)}},{key:"chunkComplete",value:function(e){e instanceof ArrayBuffer&&(this.bytesUsed+=e.byteLength),typeof e=="string"&&(this.bytesUsed+=e.length),this.isChunkComplete=!0}},{key:"getFullBatch",value:function(e){return this._isFull()?this._getBatch(e):null}},{key:"getFinalBatch",value:function(e){return this._getBatch(e)}},{key:"_estimateRowMB",value:function(e){return Array.isArray(e)?e.length*8:Object.keys(e).length*8}},{key:"_isFull",value:function(){if(!this.aggregator||this.aggregator.rowCount()===0)return!1;if(this.options.batchSize==="auto"){if(!this.isChunkComplete)return!1}else if(this.options.batchSize>this.aggregator.rowCount())return!1;return this.options.batchDebounceMs>Date.now()-this.lastBatchEmittedMs?!1:(this.isChunkComplete=!1,this.lastBatchEmittedMs=Date.now(),!0)}},{key:"_getBatch",value:function(e){if(!this.aggregator)return null;e!=null&&e.bytesUsed&&(this.bytesUsed=e.bytesUsed);var n=this.aggregator.getBatch();return n.count=this.batchCount,n.bytesUsed=this.bytesUsed,Object.assign(n,e),this.batchCount++,this.aggregator=null,n}},{key:"_getTableBatchType",value:function(){switch(this.options.shape){case"row-table":return PF;case"array-row-table":case"object-row-table":return MF;case"columnar-table":return kF;case"arrow-table":if(!t.ArrowBatch)throw new Error(FF);return t.ArrowBatch;default:throw new Error(FF)}}}]),t}();_(Kb,"ArrowBatch",void 0);function qh(t){for(var r=1/0,e=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=t.POSITION?t.POSITION.value:[],u=s&&s.length,c=0;c<u;c+=3){var h=s[c],p=s[c+1],v=s[c+2];r=h<r?h:r,e=p<e?p:e,n=v<n?v:n,i=h>i?h:i,a=p>a?p:a,o=v>o?v:o}return[[r,e,n],[i,a,o]]}lC();function hC(t){if(Array.isArray(t))return dg(t)}function pC(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}cC();function dC(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pr(t){return hC(t)||pC(t)||Py(t)||dC()}at();vt();et();function NF(t,r){if(!t)throw new Error(r||"loader assertion failed.")}function mC(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=aoe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function aoe(t,r){if(t){if(typeof t=="string")return zF(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return zF(t,r)}}function zF(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Oy=function(){function t(r,e){ce(this,t),_(this,"fields",void 0),_(this,"metadata",void 0),NF(Array.isArray(r)),ooe(r),this.fields=r,this.metadata=e||new Map}return ve(t,[{key:"compareTo",value:function(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(var n=0;n<this.fields.length;++n)if(!this.fields[n].compareTo(e.fields[n]))return!1;return!0}},{key:"select",value:function(){for(var e=Object.create(null),n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];for(var o=0,s=i;o<s.length;o++){var u=s[o];e[u]=!0}var c=this.fields.filter(function(h){return e[h.name]});return new t(c,this.metadata)}},{key:"selectAt",value:function(){for(var e=this,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var o=i.map(function(s){return e.fields[s]}).filter(Boolean);return new t(o,this.metadata)}},{key:"assign",value:function(e){var n,i=this.metadata;if(e instanceof t){var a=e;n=a.fields,i=UF(UF(new Map,this.metadata),a.metadata)}else n=e;var o=Object.create(null),s=mC(this.fields),u;try{for(s.s();!(u=s.n()).done;){var c=u.value;o[c.name]=c}}catch(E){s.e(E)}finally{s.f()}var h=mC(n),p;try{for(h.s();!(p=h.n()).done;){var v=p.value;o[v.name]=v}}catch(E){h.e(E)}finally{h.f()}var x=Object.values(o);return new t(x,i)}}]),t}();function ooe(t){var r={},e=mC(t),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;r[i.name]&&console.warn("Schema: duplicated field name",i.name,i),r[i.name]=!0}}catch(a){e.e(a)}finally{e.f()}}function UF(t,r){return new Map([].concat(Pr(t||new Map),Pr(r||new Map)))}at();vt();et();var My=function(){function t(r,e){ce(this,t);var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new Map;_(this,"name",void 0),_(this,"type",void 0),_(this,"nullable",void 0),_(this,"metadata",void 0),this.name=r,this.type=e,this.nullable=n,this.metadata=i}return ve(t,[{key:"typeId",get:function(){return this.type&&this.type.typeId}},{key:"clone",value:function(){return new t(this.name,this.type,this.nullable,this.metadata)}},{key:"compareTo",value:function(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}},{key:"toString",value:function(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}]),t}();function jt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xh(t,r){return Xh=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Xh(t,r)}function Ke(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&Xh(t,r)}Ii();function ut(t,r){if(r&&(vr(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jt(t)}function me(t){return me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},me(t)}at();vt();et();var Da=function(t){return t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth",t}({});function Ra(t){var r=soe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function soe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var jF,GF,VF,HF,WF,qF,XF,YF,Vl=function(){function t(){ce(this,t)}return ve(t,[{key:"typeId",get:function(){return Da.NONE}},{key:"compareTo",value:function(e){return this===e}}],[{key:"isNull",value:function(e){return e&&e.typeId===Da.Null}},{key:"isInt",value:function(e){return e&&e.typeId===Da.Int}},{key:"isFloat",value:function(e){return e&&e.typeId===Da.Float}},{key:"isBinary",value:function(e){return e&&e.typeId===Da.Binary}},{key:"isUtf8",value:function(e){return e&&e.typeId===Da.Utf8}},{key:"isBool",value:function(e){return e&&e.typeId===Da.Bool}},{key:"isDecimal",value:function(e){return e&&e.typeId===Da.Decimal}},{key:"isDate",value:function(e){return e&&e.typeId===Da.Date}},{key:"isTime",value:function(e){return e&&e.typeId===Da.Time}},{key:"isTimestamp",value:function(e){return e&&e.typeId===Da.Timestamp}},{key:"isInterval",value:function(e){return e&&e.typeId===Da.Interval}},{key:"isList",value:function(e){return e&&e.typeId===Da.List}},{key:"isStruct",value:function(e){return e&&e.typeId===Da.Struct}},{key:"isUnion",value:function(e){return e&&e.typeId===Da.Union}},{key:"isFixedSizeBinary",value:function(e){return e&&e.typeId===Da.FixedSizeBinary}},{key:"isFixedSizeList",value:function(e){return e&&e.typeId===Da.FixedSizeList}},{key:"isMap",value:function(e){return e&&e.typeId===Da.Map}},{key:"isDictionary",value:function(e){return e&&e.typeId===Da.Dictionary}}]),t}(),KF=function(t,r){Ke(n,t);var e=Ra(n);function n(){return ce(this,n),e.apply(this,arguments)}return ve(n,[{key:"typeId",get:function(){return Da.Null}},{key:r,get:function(){return"Null"}},{key:"toString",value:function(){return"Null"}}]),n}(Vl,Symbol.toStringTag),ZF=function(t,r){Ke(n,t);var e=Ra(n);function n(){return ce(this,n),e.apply(this,arguments)}return ve(n,[{key:"typeId",get:function(){return Da.Bool}},{key:r,get:function(){return"Bool"}},{key:"toString",value:function(){return"Bool"}}]),n}(Vl,Symbol.toStringTag);jF=Symbol.toStringTag;var Kf=function(t,r){Ke(n,t);var e=Ra(n);function n(i,a){var o;return ce(this,n),o=e.call(this),_(jt(o),"isSigned",void 0),_(jt(o),"bitWidth",void 0),o.isSigned=i,o.bitWidth=a,o}return ve(n,[{key:"typeId",get:function(){return Da.Int}},{key:r,get:function(){return"Int"}},{key:"toString",value:function(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}]),n}(Vl,jF),Zb=function(t){Ke(e,t);var r=Ra(e);function e(){return ce(this,e),r.call(this,!0,8)}return e}(Kf),$b=function(t){Ke(e,t);var r=Ra(e);function e(){return ce(this,e),r.call(this,!0,16)}return e}(Kf),Jb=function(t){Ke(e,t);var r=Ra(e);function e(){return ce(this,e),r.call(this,!0,32)}return e}(Kf),$F=function(t){Ke(e,t);var r=Ra(e);function e(){return ce(this,e),r.call(this,!0,64)}return e}(Kf),Qb=function(t){Ke(e,t);var r=Ra(e);function e(){return ce(this,e),r.call(this,!1,8)}return e}(Kf),ex=function(t){Ke(e,t);var r=Ra(e);function e(){return ce(this,e),r.call(this,!1,16)}return e}(Kf),tx=function(t){Ke(e,t);var r=Ra(e);function e(){return ce(this,e),r.call(this,!1,32)}return e}(Kf),JF=function(t){Ke(e,t);var r=Ra(e);function e(){return ce(this,e),r.call(this,!1,64)}return e}(Kf),vC={HALF:16,SINGLE:32,DOUBLE:64};GF=Symbol.toStringTag;var Iy=function(t,r){Ke(n,t);var e=Ra(n);function n(i){var a;return ce(this,n),a=e.call(this),_(jt(a),"precision",void 0),a.precision=i,a}return ve(n,[{key:"typeId",get:function(){return Da.Float}},{key:r,get:function(){return"Float"}},{key:"toString",value:function(){return"Float".concat(this.precision)}}]),n}(Vl,GF),QF=function(t){Ke(e,t);var r=Ra(e);function e(){return ce(this,e),r.call(this,vC.HALF)}return e}(Iy),rx=function(t){Ke(e,t);var r=Ra(e);function e(){return ce(this,e),r.call(this,vC.SINGLE)}return e}(Iy),nx=function(t){Ke(e,t);var r=Ra(e);function e(){return ce(this,e),r.call(this,vC.DOUBLE)}return e}(Iy),e4=function(t,r){Ke(n,t);var e=Ra(n);function n(){return ce(this,n),e.call(this)}return ve(n,[{key:"typeId",get:function(){return Da.Binary}},{key:"toString",value:function(){return"Binary"}},{key:r,get:function(){return"Binary"}}]),n}(Vl,Symbol.toStringTag),t4=function(t,r){Ke(n,t);var e=Ra(n);function n(){return ce(this,n),e.apply(this,arguments)}return ve(n,[{key:"typeId",get:function(){return Da.Utf8}},{key:r,get:function(){return"Utf8"}},{key:"toString",value:function(){return"Utf8"}}]),n}(Vl,Symbol.toStringTag),gC={DAY:0,MILLISECOND:1};VF=Symbol.toStringTag;var ix=function(t,r){Ke(n,t);var e=Ra(n);function n(i){var a;return ce(this,n),a=e.call(this),_(jt(a),"unit",void 0),a.unit=i,a}return ve(n,[{key:"typeId",get:function(){return Da.Date}},{key:r,get:function(){return"Date"}},{key:"toString",value:function(){return"Date".concat((this.unit+1)*32,"<").concat(gC[this.unit],">")}}]),n}(Vl,VF),r4=function(t){Ke(e,t);var r=Ra(e);function e(){return ce(this,e),r.call(this,gC.DAY)}return e}(ix),n4=function(t){Ke(e,t);var r=Ra(e);function e(){return ce(this,e),r.call(this,gC.MILLISECOND)}return e}(ix),Xp={SECOND:1,MILLISECOND:1e3,MICROSECOND:1e6,NANOSECOND:1e9};HF=Symbol.toStringTag;var ax=function(t,r){Ke(n,t);var e=Ra(n);function n(i,a){var o;return ce(this,n),o=e.call(this),_(jt(o),"unit",void 0),_(jt(o),"bitWidth",void 0),o.unit=i,o.bitWidth=a,o}return ve(n,[{key:"typeId",get:function(){return Da.Time}},{key:"toString",value:function(){return"Time".concat(this.bitWidth,"<").concat(Xp[this.unit],">")}},{key:r,get:function(){return"Time"}}]),n}(Vl,HF),i4=function(t){Ke(e,t);var r=Ra(e);function e(){return ce(this,e),r.call(this,Xp.SECOND,32)}return e}(ax),a4=function(t){Ke(e,t);var r=Ra(e);function e(){return ce(this,e),r.call(this,Xp.MILLISECOND,32)}return e}(ax);WF=Symbol.toStringTag;var mg=function(t,r){Ke(n,t);var e=Ra(n);function n(i){var a;ce(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return a=e.call(this),_(jt(a),"unit",void 0),_(jt(a),"timezone",void 0),a.unit=i,a.timezone=o,a}return ve(n,[{key:"typeId",get:function(){return Da.Timestamp}},{key:r,get:function(){return"Timestamp"}},{key:"toString",value:function(){return"Timestamp<".concat(Xp[this.unit]).concat(this.timezone?", ".concat(this.timezone):"",">")}}]),n}(Vl,WF),o4=function(t){Ke(e,t);var r=Ra(e);function e(){ce(this,e);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return r.call(this,Xp.SECOND,n)}return e}(mg),s4=function(t){Ke(e,t);var r=Ra(e);function e(){ce(this,e);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return r.call(this,Xp.MILLISECOND,n)}return e}(mg),u4=function(t){Ke(e,t);var r=Ra(e);function e(){ce(this,e);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return r.call(this,Xp.MICROSECOND,n)}return e}(mg),l4=function(t){Ke(e,t);var r=Ra(e);function e(){ce(this,e);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return r.call(this,Xp.NANOSECOND,n)}return e}(mg),AC={DAY_TIME:0,YEAR_MONTH:1};qF=Symbol.toStringTag;var ox=function(t,r){Ke(n,t);var e=Ra(n);function n(i){var a;return ce(this,n),a=e.call(this),_(jt(a),"unit",void 0),a.unit=i,a}return ve(n,[{key:"typeId",get:function(){return Da.Interval}},{key:r,get:function(){return"Interval"}},{key:"toString",value:function(){return"Interval<".concat(AC[this.unit],">")}}]),n}(Vl,qF),c4=function(t){Ke(e,t);var r=Ra(e);function e(){return ce(this,e),r.call(this,AC.DAY_TIME)}return e}(ox),f4=function(t){Ke(e,t);var r=Ra(e);function e(){return ce(this,e),r.call(this,AC.YEAR_MONTH)}return e}(ox);XF=Symbol.toStringTag;var sx=function(t,r){Ke(n,t);var e=Ra(n);function n(i,a){var o;return ce(this,n),o=e.call(this),_(jt(o),"listSize",void 0),_(jt(o),"children",void 0),o.listSize=i,o.children=[a],o}return ve(n,[{key:"typeId",get:function(){return Da.FixedSizeList}},{key:"valueType",get:function(){return this.children[0].type}},{key:"valueField",get:function(){return this.children[0]}},{key:r,get:function(){return"FixedSizeList"}},{key:"toString",value:function(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}]),n}(Vl,XF);YF=Symbol.toStringTag;var h4=function(t,r){Ke(n,t);var e=Ra(n);function n(i){var a;return ce(this,n),a=e.call(this),_(jt(a),"children",void 0),a.children=i,a}return ve(n,[{key:"typeId",get:function(){return Da.Struct}},{key:"toString",value:function(){return"Struct<{".concat(this.children.map(function(a){return"".concat(a.name,":").concat(a.type)}).join(", "),"}>")}},{key:r,get:function(){return"Struct"}}]),n}(Vl,YF);function p4(t){switch(t.constructor){case Int8Array:return new Zb;case Uint8Array:return new Qb;case Int16Array:return new $b;case Uint16Array:return new ex;case Int32Array:return new Jb;case Uint32Array:return new tx;case Float32Array:return new rx;case Float64Array:return new nx;default:throw new Error("array type not supported")}}function yC(t,r,e){var n=p4(r.value),i=e||d4(r),a=new My(t,new sx(r.size,new My("value",n)),!1,i);return a}function d4(t){var r=new Map;return"byteOffset"in t&&r.set("byteOffset",t.byteOffset.toString(10)),"byteStride"in t&&r.set("byteStride",t.byteStride.toString(10)),"normalized"in t&&r.set("normalized",t.normalized.toString()),r}at();vt();function _C(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function bC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Yp(t,r,e){return bC()?Yp=Reflect.construct:Yp=function(i,a,o){var s=[null];s.push.apply(s,a);var u=Function.bind.apply(i,s),c=new u;return o&&Xh(c,o.prototype),c},Yp.apply(null,arguments)}function Ry(t){var r=typeof Map=="function"?new Map:void 0;return Ry=function(n){if(n===null||!_C(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(n))return r.get(n);r.set(n,i)}function i(){return Yp(n,arguments,me(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Xh(i,n)},Ry(t)}var uoe=en(On());et();function loe(t){var r=coe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function coe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var v4,m4=function(t){Ke(e,t);var r=loe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"enqueue",value:function(i){return this.push(i)}},{key:"dequeue",value:function(){return this.shift()}}]),e}(Ry(Array));v4=Symbol.asyncIterator;var xC=function(t){function r(){ce(this,r),_(this,"_values",void 0),_(this,"_settlers",void 0),_(this,"_closed",void 0),this._values=new m4,this._settlers=new m4,this._closed=!1}return ve(r,[{key:"close",value:function(){for(;this._settlers.length>0;)this._settlers.dequeue().resolve({done:!0});this._closed=!0}},{key:t,value:function(){return this}},{key:"enqueue",value:function(n){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var i=this._settlers.dequeue();n instanceof Error?i.reject(n):i.resolve({value:n})}else this._values.enqueue(n)}},{key:"next",value:function(){var n=this;if(this._values.length>0){var i=this._values.dequeue();return i instanceof Error?Promise.reject(i):Promise.resolve({value:i})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0})}return new Promise(function(a,o){n._settlers.enqueue({resolve:a,reject:o})})}}]),r}(v4);Ii();var g4="\uFEFF",Zf={parse:foe,unparse:hoe,RECORD_SEP:String.fromCharCode(30),UNIT_SEP:String.fromCharCode(31),BYTE_ORDER_MARK:g4,BAD_DELIMITERS:["\r",`
`,'"',g4],WORKERS_SUPPORTED:!1,NODE_STREAM_INPUT:1,LocalChunkSize:1024*1024*10,RemoteChunkSize:1024*1024*5,DefaultDelimiter:",",Parser:wC,ParserHandle:y4,ChunkStreamer:A4,StringStreamer:vg},gg=Zf;function foe(t,r,e){r=r||{};var n=r.dynamicTyping||!1;if(Sl(n)&&(r.dynamicTypingFunction=n,n={}),r.dynamicTyping=n,r.transform=Sl(r.transform)?r.transform:!1,r.worker&&Zf.WORKERS_SUPPORTED){var i=newWorker();i.userStep=r.step,i.userChunk=r.chunk,i.userComplete=r.complete,i.userError=r.error,r.step=Sl(r.step),r.chunk=Sl(r.chunk),r.complete=Sl(r.complete),r.error=Sl(r.error),delete r.worker,i.postMessage({input:t,config:r,workerId:i.id});return}var a=null;return typeof t=="string"&&(a=new vg(r)),a||(a=new e(r)),a.stream(t)}function hoe(t,r){var e=!1,n=!0,i=",",a=`\r
`,o='"',s=o+o,u=!1,c=null;p();var h=new RegExp(Ly(o),"g");if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return x(null,t,u);if(vr(t[0])==="object")return x(c||v(t[0]),t,u)}else if(vr(t)==="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:v(t.data[0])),!Array.isArray(t.data[0])&&vr(t.data[0])!=="object"&&(t.data=[t.data])),x(t.fields||[],t.data||[],u);throw new Error("Unable to serialize unrecognized input");function p(){if(vr(r)==="object"){if(typeof r.delimiter=="string"&&!Zf.BAD_DELIMITERS.filter(function(D){return r.delimiter.indexOf(D)!==-1}).length&&(i=r.delimiter),(typeof r.quotes=="boolean"||Array.isArray(r.quotes))&&(e=r.quotes),(typeof r.skipEmptyLines=="boolean"||typeof r.skipEmptyLines=="string")&&(u=r.skipEmptyLines),typeof r.newline=="string"&&(a=r.newline),typeof r.quoteChar=="string"&&(o=r.quoteChar),typeof r.header=="boolean"&&(n=r.header),Array.isArray(r.columns)){if(r.columns.length===0)throw new Error("Option columns is empty");c=r.columns}r.escapeChar!==void 0&&(s=r.escapeChar+o)}}function v(D){if(vr(D)!=="object")return[];var H=[];for(var W in D)H.push(W);return H}function x(D,H,W){var $="";typeof D=="string"&&(D=JSON.parse(D)),typeof H=="string"&&(H=JSON.parse(H));var J=Array.isArray(D)&&D.length>0,B=!Array.isArray(H[0]);if(J&&n){for(var se=0;se<D.length;se++)se>0&&($+=i),$+=E(D[se],se);H.length>0&&($+=a)}for(var V=0;V<H.length;V++){var X=J?D.length:H[V].length,I=!1,O=J?Object.keys(H[V]).length===0:H[V].length===0;if(W&&!J&&(I=W==="greedy"?H[V].join("").trim()==="":H[V].length===1&&H[V][0].length===0),W==="greedy"&&J){for(var U=[],re=0;re<X;re++){var ee=B?D[re]:re;U.push(H[V][ee])}I=U.join("").trim()===""}if(!I){for(var pe=0;pe<X;pe++){pe>0&&!O&&($+=i);var je=J&&B?D[pe]:pe;$+=E(H[V][je],pe)}V<H.length-1&&(!W||X>0&&!O)&&($+=a)}}return $}function E(D,H){if(typeof D>"u"||D===null)return"";if(D.constructor===Date)return JSON.stringify(D).slice(1,25);D=D.toString().replace(h,s);var W=typeof e=="boolean"&&e||Array.isArray(e)&&e[H]||R(D,Zf.BAD_DELIMITERS)||D.indexOf(i)>-1||D.charAt(0)===" "||D.charAt(D.length-1)===" ";return W?o+D+o:D}function R(D,H){for(var W=0;W<H.length;W++)if(D.indexOf(H[W])>-1)return!0;return!1}}function A4(t){this._handle=null,this._finished=!1,this._completed=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},r.call(this,t),this.parseChunk=function(e,n){if(this.isFirstChunk&&Sl(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(e);i!==void 0&&(e=i)}this.isFirstChunk=!1;var a=this._partialLine+e;this._partialLine="";var o=this._handle.parse(a,this._baseIndex,!this._finished);if(!(this._handle.paused()||this._handle.aborted())){var s=o.meta.cursor;this._finished||(this._partialLine=a.substring(s-this._baseIndex),this._baseIndex=s),o&&o.data&&(this._rowCount+=o.data.length);var u=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(Sl(this._config.chunk)&&!n){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return;o=void 0,this._completeResults=void 0}return!this._config.step&&!this._config.chunk&&(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),!this._completed&&u&&Sl(this._config.complete)&&(!o||!o.meta.aborted)&&(this._config.complete(this._completeResults,this._input),this._completed=!0),!u&&(!o||!o.meta.paused)&&this._nextChunk(),o}},this._sendError=function(e){Sl(this._config.error)&&this._config.error(e)};function r(e){var n=TC(e);n.chunkSize=parseInt(n.chunkSize),!e.step&&!e.chunk&&(n.chunkSize=null),this._handle=new y4(n),this._handle.streamer=this,this._config=n}}function vg(t){t=t||{},A4.call(this,t);var r;this.stream=function(e){return r=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e=this._config.chunkSize,n=e?r.substr(0,e):r;return r=e?r.substr(e):"",this._finished=!r,this.parseChunk(n)}}}vg.prototype=Object.create(vg.prototype);vg.prototype.constructor=vg;function y4(t){var r=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,e=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,n=this,i=0,a=0,o,s,u=!1,c=!1,h,p=[],v={data:[],errors:[],meta:{}};if(Sl(t.step)){var x=t.step;t.step=function(X){if(v=X,D())R();else{if(R(),!v.data||v.data.length===0)return;i+=X.data.length,t.preview&&i>t.preview?s.abort():x(v,n)}}}this.parse=function(X,I,O){var U=t.quoteChar||'"';if(t.newline||(t.newline=se(X,U)),h=!1,t.delimiter)Sl(t.delimiter)&&(t.delimiter=t.delimiter(X),v.meta.delimiter=t.delimiter);else{var re=B(X,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);re.successful?t.delimiter=re.bestDelimiter:(h=!0,t.delimiter=Zf.DefaultDelimiter),v.meta.delimiter=t.delimiter}var ee=TC(t);return t.preview&&t.header&&ee.preview++,o=X,s=new wC(ee),v=s.parse(o,I,O),R(),u?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return u},this.pause=function(){u=!0,s.abort(),o=o.substr(s.getCharIndex())},this.resume=function(){u=!1,n.streamer.parseChunk(o,!0)},this.aborted=function(){return c},this.abort=function(){c=!0,s.abort(),v.meta.aborted=!0,Sl(t.complete)&&t.complete(v),o=""};function E(X){return t.skipEmptyLines==="greedy"?X.join("").trim()==="":X.length===1&&X[0].length===0}function R(){if(v&&h&&(V("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+Zf.DefaultDelimiter+"'"),h=!1),t.skipEmptyLines)for(var X=0;X<v.data.length;X++)E(v.data[X])&&v.data.splice(X--,1);return D()&&H(),J()}function D(){return t.header&&p.length===0}function H(){if(!v)return;function X(O){Sl(t.transformHeader)&&(O=t.transformHeader(O)),p.push(O)}if(Array.isArray(v.data[0])){for(var I=0;D()&&I<v.data.length;I++)v.data[I].forEach(X);v.data.splice(0,1)}else v.data.forEach(X)}function W(X){return t.dynamicTypingFunction&&t.dynamicTyping[X]===void 0&&(t.dynamicTyping[X]=t.dynamicTypingFunction(X)),(t.dynamicTyping[X]||t.dynamicTyping)===!0}function $(X,I){return W(X)?I==="true"||I==="TRUE"?!0:I==="false"||I==="FALSE"?!1:r.test(I)?parseFloat(I):e.test(I)?new Date(I):I===""?null:I:I}function J(){if(!v||!v.data||!t.header&&!t.dynamicTyping&&!t.transform)return v;function X(O,U){var re=t.header?{}:[],ee;for(ee=0;ee<O.length;ee++){var pe=ee,je=O[ee];t.header&&(pe=ee>=p.length?"__parsed_extra":p[ee]),t.transform&&(je=t.transform(je,pe)),je=$(pe,je),pe==="__parsed_extra"?(re[pe]=re[pe]||[],re[pe].push(je)):re[pe]=je}return t.header&&(ee>p.length?V("FieldMismatch","TooManyFields","Too many fields: expected "+p.length+" fields but parsed "+ee,a+U):ee<p.length&&V("FieldMismatch","TooFewFields","Too few fields: expected "+p.length+" fields but parsed "+ee,a+U)),re}var I=1;return!v.data[0]||Array.isArray(v.data[0])?(v.data=v.data.map(X),I=v.data.length):v.data=X(v.data,0),t.header&&v.meta&&(v.meta.fields=p),a+=I,v}function B(X,I,O,U,re){var ee,pe,je;re=re||[",","	","|",";",Zf.RECORD_SEP,Zf.UNIT_SEP];for(var qe=0;qe<re.length;qe++){var We=re[qe],ot=0,gt=0,Pt=0;je=void 0;for(var Dt=new wC({comments:U,delimiter:We,newline:I,preview:10}).parse(X),nr=0;nr<Dt.data.length;nr++){if(O&&E(Dt.data[nr])){Pt++;continue}var Nt=Dt.data[nr].length;if(gt+=Nt,typeof je>"u"){je=0;continue}else Nt>1&&(ot+=Math.abs(Nt-je),je=Nt)}Dt.data.length>0&&(gt/=Dt.data.length-Pt),(typeof pe>"u"||ot>pe)&&gt>1.99&&(pe=ot,ee=We)}return t.delimiter=ee,{successful:!!ee,bestDelimiter:ee}}function se(X,I){X=X.substr(0,1024*1024);var O=new RegExp(Ly(I)+"([^]*?)"+Ly(I),"gm");X=X.replace(O,"");var U=X.split("\r"),re=X.split(`
`),ee=re.length>1&&re[0].length<U[0].length;if(U.length===1||ee)return`
`;for(var pe=0,je=0;je<U.length;je++)U[je][0]===`
`&&pe++;return pe>=U.length/2?`\r
`:"\r"}function V(X,I,O,U){v.errors.push({type:X,code:I,message:O,row:U})}}function Ly(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function wC(t){t=t||{};var r=t.delimiter,e=t.newline,n=t.comments,i=t.step,a=t.preview,o=t.fastMode,s;t.quoteChar===void 0?s='"':s=t.quoteChar;var u=s;if(t.escapeChar!==void 0&&(u=t.escapeChar),(typeof r!="string"||Zf.BAD_DELIMITERS.indexOf(r)>-1)&&(r=","),n===r)throw new Error("Comment character same as delimiter");n===!0?n="#":(typeof n!="string"||Zf.BAD_DELIMITERS.indexOf(n)>-1)&&(n=!1),e!==`
`&&e!=="\r"&&e!==`\r
`&&(e=`
`);var c=0,h=!1;this.parse=function(p,v,x){if(typeof p!="string")throw new Error("Input must be a string");var E=p.length,R=r.length,D=e.length,H=n.length,W=Sl(i);c=0;var $=[],J=[],B=[],se=0;if(!p)return Dt();if(o||o!==!1&&p.indexOf(s)===-1){for(var V=p.split(e),X=0;X<V.length;X++){if(B=V[X],c+=B.length,X!==V.length-1)c+=e.length;else if(x)return Dt();if(!(n&&B.substr(0,H)===n)){if(W){if($=[],We(B.split(r)),nr(),h)return Dt()}else We(B.split(r));if(a&&X>=a)return $=$.slice(0,a),Dt(!0)}}return Dt()}for(var I=p.indexOf(r,c),O=p.indexOf(e,c),U=new RegExp(Ly(u)+Ly(s),"g"),re;;){if(p[c]===s){for(re=c,c++;;){if(re=p.indexOf(s,re+1),re===-1)return x||J.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:$.length,index:c}),gt();if(re===E-1){var ee=p.substring(c,re).replace(U,s);return gt(ee)}if(s===u&&p[re+1]===u){re++;continue}if(!(s!==u&&re!==0&&p[re-1]===u)){var pe=O===-1?I:Math.min(I,O),je=ot(pe);if(p[re+1+je]===r){if(B.push(p.substring(c,re).replace(U,s)),c=re+1+je+R,I=p.indexOf(r,c),O=p.indexOf(e,c),W&&(nr(),h))return Dt();if(a&&$.length>=a)return Dt(!0);break}var qe=ot(O);if(p.substr(re+1+qe,D)===e){if(B.push(p.substring(c,re).replace(U,s)),Pt(re+1+qe+D),I=p.indexOf(r,c),W&&(nr(),h))return Dt();if(a&&$.length>=a)return Dt(!0);break}J.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:$.length,index:c}),re++}}if(W&&(nr(),h))return Dt();if(a&&$.length>=a)return Dt(!0);continue}if(n&&B.length===0&&p.substr(c,H)===n){if(O===-1)return Dt();c=O+D,O=p.indexOf(e,c),I=p.indexOf(r,c);continue}if(I!==-1&&(I<O||O===-1)){B.push(p.substring(c,I)),c=I+R,I=p.indexOf(r,c);continue}if(O!==-1){if(B.push(p.substring(c,O)),Pt(O+D),W&&(nr(),h))return Dt();if(a&&$.length>=a)return Dt(!0);continue}break}return gt();function We(Nt){$.push(Nt),se=c}function ot(Nt){var Ut=0;if(Nt!==-1){var Or=p.substring(re+1,Nt);Or&&Or.trim()===""&&(Ut=Or.length)}return Ut}function gt(Nt){return x||(typeof Nt>"u"&&(Nt=p.substr(c)),B.push(Nt),c=E,We(B),W&&nr()),Dt()}function Pt(Nt){c=Nt,We(B),B=[],O=p.indexOf(e,c)}function Dt(Nt,Ut){var Or=Ut||!1;return{data:Or?$[0]:$,errors:J,meta:{delimiter:r,linebreak:e,aborted:h,truncated:!!Nt,cursor:se+(v||0)}}}function nr(){i(Dt(void 0,!0)),$=[],J=[]}},this.abort=function(){h=!0},this.getCharIndex=function(){return c}}function TC(t){if(vr(t)!=="object"||t===null)return t;var r=Array.isArray(t)?[]:{};for(var e in t)r[e]=TC(t[e]);return r}function Sl(t){return typeof t=="function"}function Yh(t){var r;if(typeof Symbol<"u"&&(Symbol.asyncIterator&&(r=t[Symbol.asyncIterator]),r==null&&Symbol.iterator&&(r=t[Symbol.iterator])),r==null&&(r=t["@@asyncIterator"]),r==null&&(r=t["@@iterator"]),r==null)throw new TypeError("Object is not async iterable");return r.call(t)}var SC=en(On());var _4=gg.ChunkStreamer;function Ag(t){t=t||{},_4.call(this,t),this.textDecoder=new TextDecoder(this._config.encoding),this.stream=function(){var r=zt(SC.default.mark(function e(n){var i,a,o,s,u,c;return SC.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:this._input=n,p.prev=1,i=!1,a=!1,p.prev=4,s=Yh(n);case 6:return p.next=8,s.next();case 8:if(!(i=!(u=p.sent).done)){p.next=14;break}c=u.value,this.parseChunk(this.getStringChunk(c));case 11:i=!1,p.next=6;break;case 14:p.next=20;break;case 16:p.prev=16,p.t0=p.catch(4),a=!0,o=p.t0;case 20:if(p.prev=20,p.prev=21,!(i&&s.return!=null)){p.next=25;break}return p.next=25,s.return();case 25:if(p.prev=25,!a){p.next=28;break}throw o;case 28:return p.finish(25);case 29:return p.finish(20);case 30:this._finished=!0,this.parseChunk(""),p.next=37;break;case 34:p.prev=34,p.t1=p.catch(1),this._sendError(p.t1);case 37:case"end":return p.stop()}},e,this,[[1,34],[4,16,20,30],[21,,25,29]])}));return function(e){return r.apply(this,arguments)}}(),this._nextChunk=function(){},this.getStringChunk=function(r){return typeof r=="string"?r:this.textDecoder.decode(r,{stream:!0})}}Ag.prototype=Object.create(_4.prototype);Ag.prototype.constructor=Ag;function b4(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function $f(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?b4(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):b4(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var poe="3.4.13",CC={csv:{shape:"object-row-table",optimizeMemoryUsage:!1,header:"auto",columnPrefix:"column",quoteChar:'"',escapeChar:'"',dynamicTyping:!0,comments:!1,skipEmptyLines:!0,delimitersToGuess:[",","	","|",";"]}},PC={id:"csv",module:"csv",name:"CSV",version:poe,extensions:["csv","tsv","dsv"],mimeTypes:["text/csv","text/tab-separated-values","text/dsv"],category:"table",parse:function(){var t=zt(ky.default.mark(function e(n,i){return ky.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",x4(new TextDecoder().decode(n),i));case 1:case"end":return o.stop()}},e)}));function r(e,n){return t.apply(this,arguments)}return r}(),parseText:function(r,e){return x4(r,e)},parseInBatches:doe,options:CC};function x4(t,r){return EC.apply(this,arguments)}function EC(){return EC=zt(ky.default.mark(function t(r,e){var n,i,a,o,s,u,c,h;return ky.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:n=$f($f({},CC.csv),e?.csv),i=moe(r),a=n.header==="auto"?w4(i):Boolean(n.header),o=a,s=$f($f({},n),{},{header:o,download:!1,transformHeader:o?T4():void 0,error:function(E){throw new Error(E)}}),u=gg.parse(r,s),c=u.data,h=u.meta.fields||S4(n.columnPrefix,i.length),v.t0=n.shape,v.next=v.t0==="object-row-table"?11:v.t0==="array-row-table"?13:15;break;case 11:return c=c.map(function(x){return Array.isArray(x)?Ey(x,h):x}),v.abrupt("break",15);case 13:return c=c.map(function(x){return Array.isArray(x)?x:Cy(x,h)}),v.abrupt("break",15);case 15:return v.abrupt("return",c);case 16:case"end":return v.stop()}},t)})),EC.apply(this,arguments)}function doe(t,r){var e;r=$f({},r),r.batchSize==="auto"&&(r.batchSize=4e3);var n=$f($f({},CC.csv),(e=r)===null||e===void 0?void 0:e.csv),i=new xC,a=!0,o=null,s=null,u=null,c=$f($f({},n),{},{header:!1,download:!1,chunkSize:1024*1024*5,skipEmptyLines:!1,step:function(p){var v=p.data;if(n.skipEmptyLines){var x=v.flat().join("").trim();if(x==="")return}var E=p.meta.cursor;if(a&&!o){var R=n.header==="auto"?w4(v):Boolean(n.header);if(R){o=v.map(T4());return}}a&&(a=!1,o||(o=S4(n.columnPrefix,v.length)),u=voe(v,o)),n.optimizeMemoryUsage&&(v=JSON.parse(JSON.stringify(v))),s=s||new Kb(u,$f({shape:n.shape||"array-row-table"},r));try{s.addRow(v);var D=s&&s.getFullBatch({bytesUsed:E});D&&i.enqueue(D)}catch(H){i.enqueue(H)}},complete:function(p){try{var v=p.meta.cursor,x=s&&s.getFinalBatch({bytesUsed:v});x&&i.enqueue(x)}catch(E){i.enqueue(E)}i.close()}});return gg.parse(t,c,Ag),i}function w4(t){return t&&t.every(function(r){return typeof r=="string"})}function moe(t){var r=gg.parse(t,{download:!1,dynamicTyping:!0,preview:1});return r.data[0]}function T4(){var t=new Set;return function(r){for(var e=r,n=1;t.has(e);)e="".concat(r,".").concat(n),n++;return t.add(e),e}}function S4(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=[],n=0;n<r;n++)e.push("".concat(t).concat(n+1));return e}function voe(t,r){for(var e=r?{}:[],n=0;n<t.length;n++){var i=r&&r[n]||n,a=t[n];switch(vr(a)){case"number":case"boolean":e[i]={name:String(i),index:n,type:Float32Array};break;case"string":default:e[i]={name:String(i),index:n,type:Array}}}return e}var iP=en(On());function ea(t,r){if(!t)throw new Error(r||"loader assertion failed.")}Ii();var Jf={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},goe=Jf.self||Jf.window||Jf.global||{},Aoe=Jf.window||Jf.self||Jf.global||{},yoe=Jf.global||Jf.self||Jf.window||{},_oe=Jf.document||{};var Kh=Boolean((typeof process>"u"?"undefined":vr(process))!=="object"||String(process)!=="[object process]"||process.browser);var E4=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),boe=E4&&parseFloat(E4[1])||0;Ii();Mn();et();function C4(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function xoe(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?C4(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):C4(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function OC(t,r){for(var e=xoe({},t),n=0,i=Object.entries(r);n<i.length;n++){var a=Ot(i[n],2),o=a[0],s=a[1];s&&vr(s)==="object"?(e[o]=e[o]||{},Object.assign(e[o],r[o])):e[o]=r[o]}return e}var P4="3.4.13";function Pu(t,r){if(!t)throw new Error(r||"loaders.gl assertion failed.")}Ii();var Qf={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},dze=Qf.self||Qf.window||Qf.global||{},mze=Qf.window||Qf.self||Qf.global||{},M4=Qf.global||Qf.self||Qf.window||{},vze=Qf.document||{};var El=(typeof process>"u"?"undefined":vr(process))!=="object"||String(process)!=="[object process]"||process.browser,By=typeof importScripts=="function",I4=typeof window<"u"&&typeof window.orientation<"u",O4=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),gze=O4&&parseFloat(O4[1])||0;at();vt();et();var R4=function(){function t(r,e){var n=this;ce(this,t),_(this,"name",void 0),_(this,"workerThread",void 0),_(this,"isRunning",!0),_(this,"result",void 0),_(this,"_resolve",function(){}),_(this,"_reject",function(){}),this.name=r,this.workerThread=e,this.result=new Promise(function(i,a){n._resolve=i,n._reject=a})}return ve(t,[{key:"postMessage",value:function(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}},{key:"done",value:function(e){Pu(this.isRunning),this.isRunning=!1,this._resolve(e)}},{key:"error",value:function(e){Pu(this.isRunning),this.isRunning=!1,this._reject(e)}}]),t}();at();vt();et();at();vt();var ux=function(){function t(){ce(this,t)}return ve(t,[{key:"terminate",value:function(){}}]),t}();var MC=new Map;function L4(t){Pu(t.source&&!t.url||!t.source&&t.url);var r=MC.get(t.source||t.url);return r||(t.url&&(r=woe(t.url),MC.set(t.url,r)),t.source&&(r=k4(t.source),MC.set(t.source,r))),Pu(r),r}function woe(t){if(!t.startsWith("http"))return t;var r=Toe(t);return k4(r)}function k4(t){var r=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(r)}function Toe(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}Ii();function IC(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,e=arguments.length>2?arguments[2]:void 0,n=e||new Set;if(t){if(B4(t))n.add(t);else if(B4(t.buffer))n.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(r&&vr(t)==="object")for(var i in t)IC(t[i],r,n)}}return e===void 0?Array.from(n):[]}function B4(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}var RC=function(){},Dy=function(){function t(r){ce(this,t),_(this,"name",void 0),_(this,"source",void 0),_(this,"url",void 0),_(this,"terminated",!1),_(this,"worker",void 0),_(this,"onMessage",void 0),_(this,"onError",void 0),_(this,"_loadableURL","");var e=r.name,n=r.source,i=r.url;Pu(n||i),this.name=e,this.source=n,this.url=i,this.onMessage=RC,this.onError=function(a){return console.log(a)},this.worker=El?this._createBrowserWorker():this._createNodeWorker()}return ve(t,[{key:"destroy",value:function(){this.onMessage=RC,this.onError=RC,this.worker.terminate(),this.terminated=!0}},{key:"isRunning",get:function(){return Boolean(this.onMessage)}},{key:"postMessage",value:function(e,n){n=n||IC(e),this.worker.postMessage(e,n)}},{key:"_getErrorFromErrorEvent",value:function(e){var n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}},{key:"_createBrowserWorker",value:function(){var e=this;this._loadableURL=L4({source:this.source,url:this.url});var n=new Worker(this._loadableURL,{name:this.name});return n.onmessage=function(i){i.data?e.onMessage(i.data):e.onError(new Error("No data received"))},n.onerror=function(i){e.onError(e._getErrorFromErrorEvent(i)),e.terminated=!0},n.onmessageerror=function(i){return console.error(i)},n}},{key:"_createNodeWorker",value:function(){var e=this,n;if(this.url){var i=this.url.includes(":/")||this.url.startsWith("/"),a=i?this.url:"./".concat(this.url);n=new ux(a,{eval:!1})}else if(this.source)n=new ux(this.source,{eval:!0});else throw new Error("no worker");return n.on("message",function(o){e.onMessage(o)}),n.on("error",function(o){e.onError(o)}),n.on("exit",function(o){}),n}}],[{key:"isSupported",value:function(){return typeof Worker<"u"&&El||typeof ux<"u"&&!El}}]),t}();et();at();vt();et();et();at();vt();var Fy=en(On());et();function D4(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function F4(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?D4(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):D4(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var N4=function(){function t(r){ce(this,t),_(this,"name","unnamed"),_(this,"source",void 0),_(this,"url",void 0),_(this,"maxConcurrency",1),_(this,"maxMobileConcurrency",1),_(this,"onDebug",function(){}),_(this,"reuseWorkers",!0),_(this,"props",{}),_(this,"jobQueue",[]),_(this,"idleQueue",[]),_(this,"count",0),_(this,"isDestroyed",!1),this.source=r.source,this.url=r.url,this.setProps(r)}return ve(t,[{key:"destroy",value:function(){this.idleQueue.forEach(function(e){return e.destroy()}),this.isDestroyed=!0}},{key:"setProps",value:function(e){this.props=F4(F4({},this.props),e),e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}},{key:"startJob",value:function(){var r=zt(Fy.default.mark(function n(i){var a=this,o,s,u,c=arguments;return Fy.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return o=c.length>1&&c[1]!==void 0?c[1]:function(v,x,E){return v.done(E)},s=c.length>2&&c[2]!==void 0?c[2]:function(v,x){return v.error(x)},u=new Promise(function(v){return a.jobQueue.push({name:i,onMessage:o,onError:s,onStart:v}),a}),this._startQueuedJob(),p.next=6,u;case 6:return p.abrupt("return",p.sent);case 7:case"end":return p.stop()}},n,this)}));function e(n){return r.apply(this,arguments)}return e}()},{key:"_startQueuedJob",value:function(){var r=zt(Fy.default.mark(function n(){var i,a,o;return Fy.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(this.jobQueue.length){u.next=2;break}return u.abrupt("return");case 2:if(i=this._getAvailableWorker(),i){u.next=5;break}return u.abrupt("return");case 5:if(a=this.jobQueue.shift(),!a){u.next=18;break}return this.onDebug({message:"Starting job",name:a.name,workerThread:i,backlog:this.jobQueue.length}),o=new R4(a.name,i),i.onMessage=function(c){return a.onMessage(o,c.type,c.payload)},i.onError=function(c){return a.onError(o,c)},a.onStart(o),u.prev=12,u.next=15,o.result;case 15:return u.prev=15,this.returnWorkerToQueue(i),u.finish(15);case 18:case"end":return u.stop()}},n,this,[[12,,15,18]])}));function e(){return r.apply(this,arguments)}return e}()},{key:"returnWorkerToQueue",value:function(e){var n=this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency();n?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}},{key:"_getAvailableWorker",value:function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;var e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Dy({name:e,source:this.source,url:this.url})}return null}},{key:"_getMaxConcurrency",value:function(){return I4?this.maxMobileConcurrency:this.maxConcurrency}}],[{key:"isSupported",value:function(){return Dy.isSupported()}}]),t}();function z4(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Soe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Soe(t,r){if(t){if(typeof t=="string")return U4(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return U4(t,r)}}function U4(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function j4(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function LC(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?j4(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):j4(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var Eoe={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:function(){}},Ny=function(){function t(r){ce(this,t),_(this,"props",void 0),_(this,"workerPools",new Map),this.props=LC({},Eoe),this.setProps(r),this.workerPools=new Map}return ve(t,[{key:"destroy",value:function(){var e=z4(this.workerPools.values()),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;i.destroy()}}catch(a){e.e(a)}finally{e.f()}this.workerPools=new Map}},{key:"setProps",value:function(e){this.props=LC(LC({},this.props),e);var n=z4(this.workerPools.values()),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;a.setProps(this._getWorkerPoolProps())}}catch(o){n.e(o)}finally{n.f()}}},{key:"getWorkerPool",value:function(e){var n=e.name,i=e.source,a=e.url,o=this.workerPools.get(n);return o||(o=new N4({name:n,source:i,url:a}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,o)),o}},{key:"_getWorkerPoolProps",value:function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}],[{key:"isSupported",value:function(){return Dy.isSupported()}},{key:"getWorkerFarm",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t._workerFarm=t._workerFarm||new t({}),t._workerFarm.setProps(e),t._workerFarm}}]),t}();_(Ny,"_workerFarm",void 0);var Coe="latest";function kC(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r[t.id]||{},n="".concat(t.id,"-worker.js"),i=e.workerUrl;if(!i&&t.id==="compression"&&(i=r.workerUrl),r._workerType==="test"&&(i="modules/".concat(t.module,"/dist/").concat(n)),!i){var a=t.version;a==="latest"&&(a=Coe);var o=a?"@".concat(a):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(n)}return Pu(i),i}function BC(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:P4;Pu(t,"no worker provided");var e=t.version;return!(!r||!e)}var zy=en(On());var lm=en(G4());var Poe="3.4.13",DC={};function eh(t){return FC.apply(this,arguments)}function FC(){return FC=zt(zy.default.mark(function t(r){var e,n,i=arguments;return zy.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return e=i.length>1&&i[1]!==void 0?i[1]:null,n=i.length>2&&i[2]!==void 0?i[2]:{},e&&(r=V4(r,e,n)),DC[r]=DC[r]||Ooe(r),o.next=6,DC[r];case 6:return o.abrupt("return",o.sent);case 7:case"end":return o.stop()}},t)})),FC.apply(this,arguments)}function V4(t,r,e){if(t.startsWith("http"))return t;var n=e.modules||{};return n[t]?n[t]:El?e.CDN?(Pu(e.CDN.startsWith("http")),"".concat(e.CDN,"/").concat(r,"@").concat(Poe,"/dist/libs/").concat(t)):By?"../src/libs/".concat(t):"modules/".concat(r,"/src/libs/").concat(t):"modules/".concat(r,"/dist/libs/").concat(t)}function Ooe(t){return NC.apply(this,arguments)}function NC(){return NC=zt(zy.default.mark(function t(r){var e,n,i;return zy.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!r.endsWith("wasm")){o.next=7;break}return o.next=3,fetch(r);case 3:return e=o.sent,o.next=6,e.arrayBuffer();case 6:return o.abrupt("return",o.sent);case 7:if(El){o.next=20;break}if(o.prev=8,o.t0=lm&&lm.requireFromFile,!o.t0){o.next=14;break}return o.next=13,lm.requireFromFile(r);case 13:o.t0=o.sent;case 14:return o.abrupt("return",o.t0);case 17:return o.prev=17,o.t1=o.catch(8),o.abrupt("return",null);case 20:if(!By){o.next=22;break}return o.abrupt("return",importScripts(r));case 22:return o.next=24,fetch(r);case 24:return n=o.sent,o.next=27,n.text();case 27:return i=o.sent,o.abrupt("return",Moe(i,r));case 29:case"end":return o.stop()}},t,null,[[8,17]])})),NC.apply(this,arguments)}function Moe(t,r){if(!El)return lm.requireFromString&&lm.requireFromString(t,r);if(By)return eval.call(M4,t),null;var e=document.createElement("script");e.id=r;try{e.appendChild(document.createTextNode(t))}catch{e.text=t}return document.body.appendChild(e),null}var Uy=en(On());function jC(t,r){return!Ny.isSupported()||!El&&!(r!=null&&r._nodeWorkers)?!1:t.worker&&r?.worker}function GC(t,r,e,n,i){return zC.apply(this,arguments)}function zC(){return zC=zt(Uy.default.mark(function t(r,e,n,i,a){var o,s,u,c,h,p;return Uy.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return o=r.id,s=kC(r,n),u=Ny.getWorkerFarm(n),c=u.getWorkerPool({name:o,url:s}),n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{})),x.next=8,c.startJob("process-on-worker",Ioe.bind(null,a));case 8:return h=x.sent,h.postMessage("process",{input:e,options:n,context:i}),x.next=12,h.result;case 12:return p=x.sent,x.next=15,p.result;case 15:return x.abrupt("return",x.sent);case 16:case"end":return x.stop()}},t)})),zC.apply(this,arguments)}function Ioe(t,r,e,n){return UC.apply(this,arguments)}function UC(){return UC=zt(Uy.default.mark(function t(r,e,n,i){var a,o,s,u,c;return Uy.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:p.t0=n,p.next=p.t0==="done"?3:p.t0==="error"?5:p.t0==="process"?7:20;break;case 3:return e.done(i),p.abrupt("break",21);case 5:return e.error(new Error(i.error)),p.abrupt("break",21);case 7:return a=i.id,o=i.input,s=i.options,p.prev=8,p.next=11,r(o,s);case 11:u=p.sent,e.postMessage("done",{id:a,result:u}),p.next=19;break;case 15:p.prev=15,p.t1=p.catch(8),c=p.t1 instanceof Error?p.t1.message:"unknown error",e.postMessage("error",{id:a,error:c});case 19:return p.abrupt("break",21);case 20:console.warn("parse-with-worker unknown message ".concat(n));case 21:case"end":return p.stop()}},t,null,[[8,15]])})),UC.apply(this,arguments)}function W4(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;if(typeof t=="string")return t.slice(0,r);if(ArrayBuffer.isView(t))return H4(t.buffer,t.byteOffset,r);if(t instanceof ArrayBuffer){var e=0;return H4(t,e,r)}return""}function H4(t,r,e){if(t.byteLength<=r+e)return"";for(var n=new DataView(t),i="",a=0;a<e;a++)i+=String.fromCharCode(n.getUint8(r+a));return i}function VC(t){try{return JSON.parse(t)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(W4(t),'"'))}}function Roe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Loe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Loe(t,r){if(t){if(typeof t=="string")return q4(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return q4(t,r)}}function q4(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function HC(t,r,e){if(e=e||t.byteLength,t.byteLength<e||r.byteLength<e)return!1;for(var n=new Uint8Array(t),i=new Uint8Array(r),a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0}function WC(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var n=r.map(function(h){return h instanceof ArrayBuffer?new Uint8Array(h):h}),i=n.reduce(function(h,p){return h+p.byteLength},0),a=new Uint8Array(i),o=0,s=Roe(n),u;try{for(s.s();!(u=s.n()).done;){var c=u.value;a.set(c,o),o+=c.byteLength}}catch(h){s.e(h)}finally{s.f()}return a.buffer}function jy(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var n=r,i=n&&n.length>1&&n[0].constructor||null;if(!i)throw new Error('"concatenateTypedArrays" - incorrect quantity of arguments or arguments have incompatible data types');for(var a=n.reduce(function(p,v){return p+v.length},0),o=new i(a),s=0,u=0,c=n;u<c.length;u++){var h=c[u];o.set(h,s),s+=h.length}return o}function cm(t,r,e){var n=e!==void 0?new Uint8Array(t).subarray(r,r+e):new Uint8Array(t).subarray(r),i=new Uint8Array(n);return i.buffer}function Kp(t,r){return ea(t>=0),ea(r>0),t+(r-1)&~(r-1)}function qC(t,r,e){var n;if(t instanceof ArrayBuffer)n=new Uint8Array(t);else{var i=t.byteOffset,a=t.byteLength;n=new Uint8Array(t.buffer||t.arrayBuffer,i,a)}return r.set(n,e),e+Kp(n.byteLength,4)}function Gy(t){this.wrapped=t}function fm(t){return new Gy(t)}function hm(t){var r,e;function n(o,s){return new Promise(function(u,c){var h={key:o,arg:s,resolve:u,reject:c,next:null};e?e=e.next=h:(r=e=h,i(o,s))})}function i(o,s){try{var u=t[o](s),c=u.value,h=c instanceof Gy;Promise.resolve(h?c.wrapped:c).then(function(p){if(h){i(o==="return"?"return":"next",p);return}a(u.done?"return":"normal",p)},function(p){i("throw",p)})}catch(p){a("throw",p)}}function a(o,s){switch(o){case"return":r.resolve({value:s,done:!0});break;case"throw":r.reject(s);break;default:r.resolve({value:s,done:!1});break}r=r.next,r?i(r.key,r.arg):e=null}this._invoke=n,typeof t.return!="function"&&(this.return=void 0)}hm.prototype[typeof Symbol=="function"&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this};hm.prototype.next=function(t){return this._invoke("next",t)};hm.prototype.throw=function(t){return this._invoke("throw",t)};hm.prototype.return=function(t){return this._invoke("return",t)};function yg(t){return function(){return new hm(t.apply(this,arguments))}}var XC=en(On());function KC(t){return YC.apply(this,arguments)}function YC(){return YC=zt(XC.default.mark(function t(r){var e,n,i,a,o,s,u;return XC.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:e=[],n=!1,i=!1,h.prev=3,o=Yh(r);case 5:return h.next=7,o.next();case 7:if(!(n=!(s=h.sent).done)){h.next=13;break}u=s.value,e.push(u);case 10:n=!1,h.next=5;break;case 13:h.next=19;break;case 15:h.prev=15,h.t0=h.catch(3),i=!0,a=h.t0;case 19:if(h.prev=19,h.prev=20,!(n&&o.return!=null)){h.next=24;break}return h.next=24,o.return();case 24:if(h.prev=24,!i){h.next=27;break}throw a;case 27:return h.finish(24);case 28:return h.finish(19);case 29:return h.abrupt("return",WC.apply(void 0,e));case 30:case"end":return h.stop()}},t,null,[[3,15,19,29],[20,,24,28]])})),YC.apply(this,arguments)}et();at();vt();et();et();et();function Vy(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){let r=process.hrtime();t=r[0]*1e3+r[1]/1e6}else t=Date.now();return t}var pm=class{constructor(r,e){_(this,"name",void 0),_(this,"type",void 0),_(this,"sampleSize",1),_(this,"time",0),_(this,"count",0),_(this,"samples",0),_(this,"lastTiming",0),_(this,"lastSampleTime",0),_(this,"lastSampleCount",0),_(this,"_count",0),_(this,"_time",0),_(this,"_samples",0),_(this,"_startTime",0),_(this,"_timerPending",!1),this.name=r,this.type=e,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(r){return this.sampleSize=r,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(r){return this._count+=r,this._samples++,this._checkSampling(),this}subtractCount(r){return this._count-=r,this._samples++,this._checkSampling(),this}addTime(r){return this._time+=r,this.lastTiming=r,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Vy(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Vy()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}};var _g=class{constructor(r){_(this,"id",void 0),_(this,"stats",{}),this.id=r.id,this.stats={},this._initializeStats(r.stats),Object.seal(this)}get(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:r,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(let r of Object.values(this.stats))r.reset();return this}forEach(r){for(let e of Object.values(this.stats))r(e)}getTable(){let r={};return this.forEach(e=>{r[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}}),r}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(e=>this._getOrCreate(e))}_getOrCreate(r){let{name:e,type:n}=r,i=this.stats[e];return i||(r instanceof pm?i=r:i=new pm(e,n),this.stats[e]=i),i}};function X4(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Y4(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?X4(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):X4(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var koe="Queued Requests",Boe="Active Requests",Doe="Cancelled Requests",Foe="Queued Requests Ever",Noe="Active Requests Ever",zoe={id:"request-scheduler",throttleRequests:!0,maxRequests:6},Hy=function(){function t(){ce(this,t);var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_(this,"props",void 0),_(this,"stats",void 0),_(this,"activeRequestCount",0),_(this,"requestQueue",[]),_(this,"requestMap",new Map),_(this,"deferredUpdate",null),this.props=Y4(Y4({},zoe),r),this.stats=new _g({id:this.props.id}),this.stats.get(koe),this.stats.get(Boe),this.stats.get(Doe),this.stats.get(Foe),this.stats.get(Noe)}return ve(t,[{key:"scheduleRequest",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return 0};if(!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has(e))return this.requestMap.get(e);var i={handle:e,priority:0,getPriority:n},a=new Promise(function(o){return i.resolve=o,i});return this.requestQueue.push(i),this.requestMap.set(e,a),this._issueNewRequests(),a}},{key:"_issueRequest",value:function(e){var n=this,i=e.handle,a=e.resolve,o=!1,s=function(){o||(o=!0,n.requestMap.delete(i),n.activeRequestCount--,n._issueNewRequests())};return this.activeRequestCount++,a?a({done:s}):Promise.resolve({done:s})}},{key:"_issueNewRequests",value:function(){var e=this;this.deferredUpdate||(this.deferredUpdate=setTimeout(function(){return e._issueNewRequestsAsync()},0))}},{key:"_issueNewRequestsAsync",value:function(){this.deferredUpdate=null;var e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(e!==0){this._updateAllRequests();for(var n=0;n<e;++n){var i=this.requestQueue.shift();i&&this._issueRequest(i)}}}},{key:"_updateAllRequests",value:function(){for(var e=this.requestQueue,n=0;n<e.length;++n){var i=e[n];this._updateRequest(i)||(e.splice(n,1),this.requestMap.delete(i.handle),n--)}e.sort(function(a,o){return a.priority-o.priority})}},{key:"_updateRequest",value:function(e){return e.priority=e.getPriority(e.handle),e.priority<0?(e.resolve(null),!1):!0}}]),t}();var Uoe="",K4={};function ZC(t){for(var r in K4)if(t.startsWith(r)){var e=K4[r];t=t.replace(r,e)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(Uoe).concat(t)),t}Ii();function Z4(t){return t&&vr(t)==="object"&&t.isBuffer}function lx(t){if(Z4(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){var r=t,e=new TextEncoder().encode(r);return e.buffer}if(t&&vr(t)==="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}var df={};Tl(df,{dirname:()=>Goe,filename:()=>joe,join:()=>Voe,resolve:()=>Hoe});function $4(){var t;if(typeof process<"u"&&typeof process.cwd<"u")return process.cwd();var r=(t=window.location)===null||t===void 0?void 0:t.pathname;return r?.slice(0,r.lastIndexOf("/")+1)||""}function joe(t){var r=t?t.lastIndexOf("/"):-1;return r>=0?t.substr(r+1):""}function Goe(t){var r=t?t.lastIndexOf("/"):-1;return r>=0?t.substr(0,r):""}function Voe(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var n="/";return r=r.map(function(i,a){return a&&(i=i.replace(new RegExp("^".concat(n)),"")),a!==r.length-1&&(i=i.replace(new RegExp("".concat(n,"$")),"")),i}),r.join(n)}function Hoe(){for(var t=[],r=0;r<arguments.length;r++)t[r]=r<0||arguments.length<=r?void 0:arguments[r];for(var e="",n=!1,i,a=t.length-1;a>=-1&&!n;a--){var o=void 0;a>=0?o=t[a]:(i===void 0&&(i=$4()),o=i),o.length!==0&&(e="".concat(o,"/").concat(e),n=o.charCodeAt(0)===Wy)}return e=Woe(e,!n),n?"/".concat(e):e.length>0?e:"."}var Wy=47,$C=46;function Woe(t,r){for(var e="",n=-1,i=0,a,o=!1,s=0;s<=t.length;++s){if(s<t.length)a=t.charCodeAt(s);else{if(a===Wy)break;a=Wy}if(a===Wy){if(!(n===s-1||i===1))if(n!==s-1&&i===2){if(e.length<2||!o||e.charCodeAt(e.length-1)!==$C||e.charCodeAt(e.length-2)!==$C){if(e.length>2){for(var u=e.length-1,c=u;c>=0&&e.charCodeAt(c)!==Wy;--c);if(c!==u){e=c===-1?"":e.slice(0,c),n=s,i=0,o=!1;continue}}else if(e.length===2||e.length===1){e="",n=s,i=0,o=!1;continue}}r&&(e.length>0?e+="/..":e="..",o=!0)}else{var h=t.slice(n+1,s);e.length>0?e+="/".concat(h):e=h,o=!1}n=s,i=0}else a===$C&&i!==-1?++i:i=-1}return e}var Zh=en(On());Ii();var qoe=function(r){return typeof r=="boolean"},qy=function(r){return typeof r=="function"},dm=function(r){return r!==null&&vr(r)==="object"},JC=function(r){return dm(r)&&r.constructor==={}.constructor};var J4=function(r){return r&&typeof r[Symbol.iterator]=="function"},Q4=function(r){return r&&typeof r[Symbol.asyncIterator]=="function"};var Lc=function(r){return typeof Response<"u"&&r instanceof Response||r&&r.arrayBuffer&&r.text&&r.json};var kc=function(r){return typeof Blob<"u"&&r instanceof Blob},eN=function(r){return r&&vr(r)==="object"&&r.isBuffer};var Xoe=function(r){return typeof ReadableStream<"u"&&r instanceof ReadableStream||dm(r)&&qy(r.tee)&&qy(r.cancel)&&qy(r.getReader)};var Yoe=function(r){return dm(r)&&qy(r.read)&&qy(r.pipe)&&qoe(r.readable)},cx=function(r){return Xoe(r)||Yoe(r)};var Koe=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Zoe=/^([-\w.]+\/[-\w.+]+)/;function tN(t){var r=Zoe.exec(t);return r?r[1]:t}function QC(t){var r=Koe.exec(t);return r?r[1]:""}var rN=/\?.*/;function nN(t){var r=t.match(rN);return r&&r[0]}function bg(t){return t.replace(rN,"")}function mm(t){if(Lc(t)){var r=t;return r.url}if(kc(t)){var e=t;return e.name||""}return typeof t=="string"?t:""}function Xy(t){if(Lc(t)){var r=t,e=r.headers.get("content-type")||"",n=bg(r.url);return tN(e)||QC(n)}if(kc(t)){var i=t;return i.type||""}return typeof t=="string"?QC(t):""}function iN(t){if(Lc(t)){var r=t;return r.headers["content-length"]||-1}if(kc(t)){var e=t;return e.size}return typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}function fx(t){return eP.apply(this,arguments)}function eP(){return eP=zt(Zh.default.mark(function t(r){var e,n,i,a,o,s;return Zh.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!Lc(r)){c.next=2;break}return c.abrupt("return",r);case 2:return e={},n=iN(r),n>=0&&(e["content-length"]=String(n)),i=mm(r),a=Xy(r),a&&(e["content-type"]=a),c.next=10,Joe(r);case 10:return o=c.sent,o&&(e["x-first-bytes"]=o),typeof r=="string"&&(r=new TextEncoder().encode(r)),s=new Response(r,{headers:e}),Object.defineProperty(s,"url",{value:i}),c.abrupt("return",s);case 16:case"end":return c.stop()}},t)})),eP.apply(this,arguments)}function aN(t){return tP.apply(this,arguments)}function tP(){return tP=zt(Zh.default.mark(function t(r){var e;return Zh.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(r.ok){i.next=5;break}return i.next=3,$oe(r);case 3:throw e=i.sent,new Error(e);case 5:case"end":return i.stop()}},t)})),tP.apply(this,arguments)}function $oe(t){return rP.apply(this,arguments)}function rP(){return rP=zt(Zh.default.mark(function t(r){var e,n,i;return Zh.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(e="Failed to fetch resource ".concat(r.url," (").concat(r.status,"): "),o.prev=1,n=r.headers.get("Content-Type"),i=r.statusText,!n.includes("application/json")){o.next=11;break}return o.t0=i,o.t1=" ",o.next=9,r.text();case 9:o.t2=o.sent,i=o.t0+=o.t1.concat.call(o.t1,o.t2);case 11:e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e,o.next=17;break;case 15:o.prev=15,o.t3=o.catch(1);case 17:return o.abrupt("return",e);case 18:case"end":return o.stop()}},t,null,[[1,15]])})),rP.apply(this,arguments)}function Joe(t){return nP.apply(this,arguments)}function nP(){return nP=zt(Zh.default.mark(function t(r){var e,n,i,a;return Zh.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(e=5,typeof r!="string"){s.next=3;break}return s.abrupt("return","data:,".concat(r.slice(0,e)));case 3:if(!(r instanceof Blob)){s.next=8;break}return n=r.slice(0,5),s.next=7,new Promise(function(u){var c=new FileReader;c.onload=function(h){var p;return u(h==null||(p=h.target)===null||p===void 0?void 0:p.result)},c.readAsDataURL(n)});case 7:return s.abrupt("return",s.sent);case 8:if(!(r instanceof ArrayBuffer)){s.next=12;break}return i=r.slice(0,e),a=Qoe(i),s.abrupt("return","data:base64,".concat(a));case 12:return s.abrupt("return",null);case 13:case"end":return s.stop()}},t)})),nP.apply(this,arguments)}function Qoe(t){for(var r="",e=new Uint8Array(t),n=0;n<e.byteLength;n++)r+=String.fromCharCode(e[n]);return btoa(r)}function xg(t,r){return aP.apply(this,arguments)}function aP(){return aP=zt(iP.default.mark(function t(r,e){var n;return iP.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(typeof r!="string"){a.next=7;break}return r=ZC(r),n=e,e!=null&&e.fetch&&typeof e?.fetch!="function"&&(n=e.fetch),a.next=6,fetch(r,n);case 6:return a.abrupt("return",a.sent);case 7:return a.next=9,fx(r);case 9:return a.abrupt("return",a.sent);case 10:case"end":return a.stop()}},t)})),aP.apply(this,arguments)}et();at();vt();et();et();function oP(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&Boolean(process.versions.electron))return!0;let r=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,e=t||r;return!!(e&&e.indexOf("Electron")>=0)}function mf(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||oP()}var ese=globalThis.self||globalThis.window||globalThis.global,wg=globalThis.window||globalThis.self||globalThis.global,tse=globalThis.document||{},vm=globalThis.process||{},rse=globalThis.console,qUe=globalThis.navigator||{};var hx=typeof __VERSION__<"u"?__VERSION__:"untranspiled source",KUe=mf();et();function nse(t){try{let r=window[t],e="__storage_test__";return r.setItem(e,e),r.removeItem(e),r}catch{return null}}var px=class{constructor(r,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";_(this,"storage",void 0),_(this,"id",void 0),_(this,"config",void 0),this.storage=nse(n),this.id=r,this.config=e,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(r){if(Object.assign(this.config,r),this.storage){let e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}}_loadConfiguration(){let r={};if(this.storage){let e=this.storage.getItem(this.id);r=e?JSON.parse(e):{}}return Object.assign(this.config,r),this}};function oN(t){let r;return t<10?r="".concat(t.toFixed(2),"ms"):t<100?r="".concat(t.toFixed(1),"ms"):t<1e3?r="".concat(t.toFixed(0),"ms"):r="".concat((t/1e3).toFixed(2),"s"),r}function sN(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,e=Math.max(r-t.length,0);return"".concat(" ".repeat(e)).concat(t)}function dx(t,r,e){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600,i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>n&&(e=Math.min(e,n/t.width));let a=t.width*e,o=t.height*e,s=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(a/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(a,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(r," %c+"),s]}var mx;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(mx||(mx={}));var ise=10;function uN(t){return typeof t!="string"?t:(t=t.toUpperCase(),mx[t]||mx.WHITE)}function lN(t,r,e){if(!mf&&typeof t=="string"){if(r){let n=uN(r);t="\x1B[".concat(n,"m").concat(t,"\x1B[39m")}if(e){let n=uN(e);t="\x1B[".concat(n+ise,"m").concat(t,"\x1B[49m")}}return t}function cN(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"],e=Object.getPrototypeOf(t),n=Object.getOwnPropertyNames(e),i=t;for(let a of n){let o=i[a];typeof o=="function"&&(r.find(s=>a===s)||(i[a]=o.bind(t)))}}function Tg(t,r){if(!t)throw new Error(r||"Assertion failed")}function gm(){let t;if(mf()&&wg.performance){var r,e;t=wg===null||wg===void 0||(r=wg.performance)===null||r===void 0||(e=r.now)===null||e===void 0?void 0:e.call(r)}else if("hrtime"in vm){var n;let i=vm===null||vm===void 0||(n=vm.hrtime)===null||n===void 0?void 0:n.call(vm);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}var Sg={debug:mf()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},ase={enabled:!0,level:0};function Bc(){}var fN={},hN={once:!0},th=class{constructor(){let{id:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};_(this,"id",void 0),_(this,"VERSION",hx),_(this,"_startTs",gm()),_(this,"_deltaTs",gm()),_(this,"_storage",void 0),_(this,"userData",{}),_(this,"LOG_THROTTLE_TIMEOUT",0),this.id=r,this.userData={},this._storage=new px("__probe-".concat(this.id,"__"),ase),this.timeStamp("".concat(this.id," started")),cN(this),Object.seal(this)}set level(r){this.setLevel(r)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((gm()-this._startTs).toPrecision(10))}getDelta(){return Number((gm()-this._deltaTs).toPrecision(10))}set priority(r){this.level=r}get priority(){return this.level}getPriority(){return this.level}enable(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:r}),this}setLevel(r){return this._storage.setConfiguration({level:r}),this}get(r){return this._storage.config[r]}set(r,e){this._storage.setConfiguration({[r]:e})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(r,e){Tg(r,e)}warn(r){return this._getLogFunction(0,r,Sg.warn,arguments,hN)}error(r){return this._getLogFunction(0,r,Sg.error,arguments)}deprecated(r,e){return this.warn("`".concat(r,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}removed(r,e){return this.error("`".concat(r,"` has been removed. Use `").concat(e,"` instead"))}probe(r,e){return this._getLogFunction(r,e,Sg.log,arguments,{time:!0,once:!0})}log(r,e){return this._getLogFunction(r,e,Sg.debug,arguments)}info(r,e){return this._getLogFunction(r,e,console.info,arguments)}once(r,e){return this._getLogFunction(r,e,Sg.debug||Sg.info,arguments,hN)}table(r,e,n){return e?this._getLogFunction(r,e,console.table||Bc,n&&[n],{tag:lse(e)}):Bc}image(r){let{logLevel:e,priority:n,image:i,message:a="",scale:o=1}=r;return this._shouldLog(e||n)?mf()?use({image:i,message:a,scale:o}):sse({image:i,message:a,scale:o}):Bc}time(r,e){return this._getLogFunction(r,e,console.time?console.time:console.info)}timeEnd(r,e){return this._getLogFunction(r,e,console.timeEnd?console.timeEnd:console.info)}timeStamp(r,e){return this._getLogFunction(r,e,console.timeStamp||Bc)}group(r,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1},i=pN({logLevel:r,message:e,opts:n}),{collapsed:a}=n;return i.method=(a?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(r,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(r,e,Object.assign({},n,{collapsed:!0}))}groupEnd(r){return this._getLogFunction(r,"",console.groupEnd||Bc)}withGroup(r,e,n){this.group(r,e)();try{n()}finally{this.groupEnd(r)()}}trace(){console.trace&&console.trace()}_shouldLog(r){return this.isEnabled()&&this.getLevel()>=dN(r)}_getLogFunction(r,e,n,i,a){if(this._shouldLog(r)){a=pN({logLevel:r,message:e,args:i,opts:a}),n=n||a.method,Tg(n),a.total=this.getTotal(),a.delta=this.getDelta(),this._deltaTs=gm();let o=a.tag||a.message;if(a.once&&o)if(!fN[o])fN[o]=gm();else return Bc;return e=ose(this.id,a.message,a),n.bind(console,e,...a.args)}return Bc}};_(th,"VERSION",hx);function dN(t){if(!t)return 0;let r;switch(typeof t){case"number":r=t;break;case"object":r=t.logLevel||t.priority||0;break;default:return 0}return Tg(Number.isFinite(r)&&r>=0),r}function pN(t){let{logLevel:r,message:e}=t;t.logLevel=dN(r);let n=t.args?Array.from(t.args):[];for(;n.length&&n.shift()!==e;);switch(typeof r){case"string":case"function":e!==void 0&&n.unshift(e),t.message=r;break;case"object":Object.assign(t,r);break;default:}typeof t.message=="function"&&(t.message=t.message());let i=typeof t.message;return Tg(i==="string"||i==="object"),Object.assign(t,{args:n},t.opts)}function ose(t,r,e){if(typeof r=="string"){let n=e.time?sN(oN(e.total)):"";r=e.time?"".concat(t,": ").concat(n,"  ").concat(r):"".concat(t,": ").concat(r),r=lN(r,e.color,e.background)}return r}function sse(t){let{image:r,message:e="",scale:n=1}=t;return console.warn("removed"),Bc}function use(t){let{image:r,message:e="",scale:n=1}=t;if(typeof r=="string"){let a=new Image;return a.onload=()=>{let o=dx(a,e,n);console.log(...o)},a.src=r,Bc}let i=r.nodeName||"";if(i.toLowerCase()==="img")return console.log(...dx(r,e,n)),Bc;if(i.toLowerCase()==="canvas"){let a=new Image;return a.onload=()=>console.log(...dx(a,e,n)),a.src=r.toDataURL(),Bc}return Bc}function lse(t){for(let r in t)for(let e in t[r])return e||"untitled";return"empty"}var x6e=new th({id:"@probe.gl/log"});var sP=new th({id:"loaders.gl"}),mN=function(){function t(){ce(this,t)}return ve(t,[{key:"log",value:function(){return function(){}}},{key:"info",value:function(){return function(){}}},{key:"warn",value:function(){return function(){}}},{key:"error",value:function(){return function(){}}}]),t}(),vN=function(){function t(){ce(this,t),_(this,"console",void 0),this.console=console}return ve(t,[{key:"log",value:function(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=this.console.log).bind.apply(e,[this.console].concat(i))}},{key:"info",value:function(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=this.console.info).bind.apply(e,[this.console].concat(i))}},{key:"warn",value:function(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=this.console.warn).bind.apply(e,[this.console].concat(i))}},{key:"error",value:function(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=this.console.error).bind.apply(e,[this.console].concat(i))}}]),t}();var uP={fetch:null,mimeType:void 0,nothrow:!1,log:new vN,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Kh,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},gN={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function xN(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=cse(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function cse(t,r){if(t){if(typeof t=="string")return AN(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return AN(t,r)}}function AN(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function yN(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function vx(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?yN(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):yN(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function lP(){globalThis.loaders=globalThis.loaders||{};var t=globalThis.loaders;return t._state=t._state||{},t._state}var cP=function(){var r=lP();return r.globalOptions=r.globalOptions||vx({},uP),r.globalOptions};function wN(t,r,e,n){return e=e||[],e=Array.isArray(e)?e:[e],fse(t,e),pse(r,t,n)}function fse(t,r){_N(t,null,uP,gN,r);var e=xN(r),n;try{for(e.s();!(n=e.n()).done;){var i=n.value,a=t&&t[i.id]||{},o=i.options&&i.options[i.id]||{},s=i.deprecatedOptions&&i.deprecatedOptions[i.id]||{};_N(a,i.id,o,s,r)}}catch(u){e.e(u)}finally{e.f()}}function _N(t,r,e,n,i){var a=r||"Top level",o=r?"".concat(r,"."):"";for(var s in t){var u=!r&&dm(t[s]),c=s==="baseUri"&&!r,h=s==="workerUrl"&&r;if(!(s in e)&&!c&&!h){if(s in n)sP.warn("".concat(a," loader option '").concat(o).concat(s,"' no longer supported, use '").concat(n[s],"'"))();else if(!u){var p=hse(s,i);sP.warn("".concat(a," loader option '").concat(o).concat(s,"' not recognized. ").concat(p))()}}}}function hse(t,r){var e=t.toLowerCase(),n="",i=xN(r),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;for(var s in o.options){if(t===s)return"Did you mean '".concat(o.id,".").concat(s,"'?");var u=s.toLowerCase(),c=e.startsWith(u)||u.startsWith(e);c&&(n=n||"Did you mean '".concat(o.id,".").concat(s,"'?"))}}}catch(h){i.e(h)}finally{i.f()}return n}function pse(t,r,e){var n=t.options||{},i=vx({},n);return dse(i,e),i.log===null&&(i.log=new mN),bN(i,cP()),bN(i,r),i}function bN(t,r){for(var e in r)if(e in r){var n=r[e];JC(n)&&JC(t[e])?t[e]=vx(vx({},t[e]),r[e]):t[e]=r[e]}}function dse(t,r){r&&!("baseUri"in t)&&(t.baseUri=r)}et();function TN(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function gx(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?TN(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):TN(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Yy(t){var r;if(!t)return!1;Array.isArray(t)&&(t=t[0]);var e=Array.isArray((r=t)===null||r===void 0?void 0:r.extensions);return e}function Ky(t){var r,e;ea(t,"null loader"),ea(Yy(t),"invalid loader");var n;return Array.isArray(t)&&(n=t[1],t=t[0],t=gx(gx({},t),{},{options:gx(gx({},t.options),n)})),((r=t)!==null&&r!==void 0&&r.parseTextSync||(e=t)!==null&&e!==void 0&&e.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}function mse(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=vse(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function vse(t,r){if(t){if(typeof t=="string")return SN(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return SN(t,r)}}function SN(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var EN=function(){var r=lP();return r.loaderRegistry=r.loaderRegistry||[],r.loaderRegistry};function Am(t){var r=EN();t=Array.isArray(t)?t:[t];var e=mse(t),n;try{var i=function(){var o=n.value,s=Ky(o);r.find(function(u){return s===u})||r.unshift(s)};for(e.s();!(n=e.n()).done;)i()}catch(a){e.e(a)}finally{e.f()}}function CN(){return EN()}et();Ii();var hP=en(On());var PN=new th({id:"loaders.gl"});function ON(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function MN(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?ON(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ON(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Zy(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=gse(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function gse(t,r){if(t){if(typeof t=="string")return IN(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return IN(t,r)}}function IN(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Ase=/\.([^.]+)$/;function kN(t){return pP.apply(this,arguments)}function pP(){return pP=zt(hP.default.mark(function t(r){var e,n,i,a,o=arguments;return hP.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(e=o.length>1&&o[1]!==void 0?o[1]:[],n=o.length>2?o[2]:void 0,i=o.length>3?o[3]:void 0,BN(r)){u.next=5;break}return u.abrupt("return",null);case 5:if(a=RN(r,e,MN(MN({},n),{},{nothrow:!0}),i),!a){u.next=8;break}return u.abrupt("return",a);case 8:if(!kc(r)){u.next=13;break}return u.next=11,r.slice(0,10).arrayBuffer();case 11:r=u.sent,a=RN(r,e,n,i);case 13:if(!(!a&&!(n!=null&&n.nothrow))){u.next=15;break}throw new Error(DN(r));case 15:return u.abrupt("return",a);case 16:case"end":return u.stop()}},t)})),pP.apply(this,arguments)}function RN(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],e=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(!BN(t))return null;if(r&&!Array.isArray(r))return Ky(r);var i=[];if(r&&(i=i.concat(r)),!(e!=null&&e.ignoreRegisteredLoaders)){var a;(a=i).push.apply(a,Pr(CN()))}_se(i);var o=yse(t,i,e,n);if(!o&&!(e!=null&&e.nothrow))throw new Error(DN(t));return o}function yse(t,r,e,n){var i=mm(t),a=Xy(t),o=bg(i)||n?.url,s=null,u="";if(e!=null&&e.mimeType&&(s=fP(r,e?.mimeType),u="match forced by supplied MIME type ".concat(e?.mimeType)),s=s||bse(r,o),u=u||(s?"matched url ".concat(o):""),s=s||fP(r,a),u=u||(s?"matched MIME type ".concat(a):""),s=s||wse(r,t),u=u||(s?"matched initial data ".concat(FN(t)):""),s=s||fP(r,e?.fallbackMimeType),u=u||(s?"matched fallback MIME type ".concat(a):""),u){var c;PN.log(1,"selectLoader selected ".concat((c=s)===null||c===void 0?void 0:c.name,": ").concat(u,"."))}return s}function BN(t){return!(t instanceof Response&&t.status===204)}function DN(t){var r=mm(t),e=Xy(t),n="No valid loader found (";n+=r?"".concat(df.filename(r),", "):"no url provided, ",n+="MIME type: ".concat(e?'"'.concat(e,'"'):"not provided",", ");var i=t?FN(t):"";return n+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",n+=")",n}function _se(t){var r=Zy(t),e;try{for(r.s();!(e=r.n()).done;){var n=e.value;Ky(n)}}catch(i){r.e(i)}finally{r.f()}}function bse(t,r){var e=r&&Ase.exec(r),n=e&&e[1];return n?xse(t,n):null}function xse(t,r){r=r.toLowerCase();var e=Zy(t),n;try{for(e.s();!(n=e.n()).done;){var i=n.value,a=Zy(i.extensions),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;if(s.toLowerCase()===r)return i}}catch(u){a.e(u)}finally{a.f()}}}catch(u){e.e(u)}finally{e.f()}return null}function fP(t,r){var e=Zy(t),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;if(i.mimeTypes&&i.mimeTypes.includes(r)||r==="application/x.".concat(i.id))return i}}catch(a){e.e(a)}finally{e.f()}return null}function wse(t,r){if(!r)return null;var e=Zy(t),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;if(typeof r=="string"){if(Tse(r,i))return i}else if(ArrayBuffer.isView(r)){if(LN(r.buffer,r.byteOffset,i))return i}else if(r instanceof ArrayBuffer){var a=0;if(LN(r,a,i))return i}}}catch(o){e.e(o)}finally{e.f()}return null}function Tse(t,r){if(r.testText)return r.testText(t);var e=Array.isArray(r.tests)?r.tests:[r.tests];return e.some(function(n){return t.startsWith(n)})}function LN(t,r,e){var n=Array.isArray(e.tests)?e.tests:[e.tests];return n.some(function(i){return Sse(t,r,e,i)})}function Sse(t,r,e,n){if(n instanceof ArrayBuffer)return HC(n,t,n.byteLength);switch(vr(n)){case"function":return n(t,e);case"string":var i=dP(t,r,n.length);return n===i;default:return!1}}function FN(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;if(typeof t=="string")return t.slice(0,r);if(ArrayBuffer.isView(t))return dP(t.buffer,t.byteOffset,r);if(t instanceof ArrayBuffer){var e=0;return dP(t,e,r)}return""}function dP(t,r,e){if(t.byteLength<r+e)return"";for(var n=new DataView(t),i="",a=0;a<e;a++)i+=String.fromCharCode(n.getUint8(r+a));return i}Ii();var Jy=en(On());var wP=en(On());var mP=en(On()),Ese=mP.default.mark(vP),Cse=256*1024;function vP(t,r){var e,n,i,a,o;return mP.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:e=r?.chunkSize||Cse,n=0,i=new TextEncoder;case 3:if(!(n<t.length)){u.next=11;break}return a=Math.min(t.length-n,e),o=t.slice(n,n+a),n+=a,u.next=9,i.encode(o);case 9:u.next=3;break;case 11:case"end":return u.stop()}},Ese)}var gP=en(On()),Pse=256*1024;function NN(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return gP.default.mark(function e(){var n,i,a,o,s,u,c;return gP.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:n=r.chunkSize,i=n===void 0?Pse:n,a=0;case 2:if(!(a<t.byteLength)){p.next=13;break}return o=Math.min(t.byteLength-a,i),s=new ArrayBuffer(o),u=new Uint8Array(t,a,o),c=new Uint8Array(s),c.set(u),a+=o,p.next=11,s;case 11:p.next=2;break;case 13:case"end":return p.stop()}},e)})()}var AP=en(On()),Ose=1024*1024;function zN(t,r){return yP.apply(this,arguments)}function yP(){return yP=yg(AP.default.mark(function t(r,e){var n,i,a,o;return AP.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:n=e?.chunkSize||Ose,i=0;case 2:if(!(i<r.size)){u.next=12;break}return a=i+n,u.next=6,fm(r.slice(i,a).arrayBuffer());case 6:return o=u.sent,i=a,u.next=10,o;case 10:u.next=2;break;case 12:case"end":return u.stop()}},t)})),yP.apply(this,arguments)}var $y=en(On());function xP(t,r){return Kh?Mse(t,r):Ise(t,r)}function Mse(t,r){return _P.apply(this,arguments)}function _P(){return _P=yg($y.default.mark(function t(r,e){var n,i,a,o,s,u;return $y.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:n=r.getReader(),h.prev=1;case 2:return a=i||n.read(),e!=null&&e._streamReadAhead&&(i=n.read()),h.next=7,fm(a);case 7:if(o=h.sent,s=o.done,u=o.value,!s){h.next=12;break}return h.abrupt("return");case 12:return h.next=14,lx(u);case 14:h.next=2;break;case 16:h.next=21;break;case 18:h.prev=18,h.t0=h.catch(1),n.releaseLock();case 21:case"end":return h.stop()}},t,null,[[1,18]])})),_P.apply(this,arguments)}function Ise(t,r){return bP.apply(this,arguments)}function bP(){return bP=yg($y.default.mark(function t(r,e){var n,i,a,o,s,u;return $y.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:n=!1,i=!1,h.prev=2,o=Yh(r);case 4:return h.next=6,fm(o.next());case 6:if(!(n=!(s=h.sent).done)){h.next=13;break}return u=s.value,h.next=10,lx(u);case 10:n=!1,h.next=4;break;case 13:h.next=19;break;case 15:h.prev=15,h.t0=h.catch(2),i=!0,a=h.t0;case 19:if(h.prev=19,h.prev=20,!(n&&o.return!=null)){h.next=24;break}return h.next=24,fm(o.return());case 24:if(h.prev=24,!i){h.next=27;break}throw a;case 27:return h.finish(24);case 28:return h.finish(19);case 29:case"end":return h.stop()}},t,null,[[2,15,19,29],[20,,24,28]])})),bP.apply(this,arguments)}function UN(t,r){if(typeof t=="string")return vP(t,r);if(t instanceof ArrayBuffer)return NN(t,r);if(kc(t))return zN(t,r);if(cx(t))return xP(t,r);if(Lc(t)){var e=t;return xP(e.body,r)}throw new Error("makeIterator")}var jN="Cannot convert supplied data type";function Rse(t,r,e){if(r.text&&typeof t=="string")return t;if(eN(t)&&(t=t.buffer),t instanceof ArrayBuffer){var n=t;if(r.text&&!r.binary){var i=new TextDecoder("utf8");return i.decode(n)}return n}if(ArrayBuffer.isView(t)){if(r.text&&!r.binary){var a=new TextDecoder("utf8");return a.decode(t)}var o=t.buffer,s=t.byteLength||t.length;return(t.byteOffset!==0||s!==o.byteLength)&&(o=o.slice(t.byteOffset,t.byteOffset+s)),o}throw new Error(jN)}function GN(t,r,e){return TP.apply(this,arguments)}function TP(){return TP=zt(wP.default.mark(function t(r,e,n){var i,a;return wP.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(i=r instanceof ArrayBuffer||ArrayBuffer.isView(r),!(typeof r=="string"||i)){s.next=3;break}return s.abrupt("return",Rse(r,e,n));case 3:if(!kc(r)){s.next=7;break}return s.next=6,fx(r);case 6:r=s.sent;case 7:if(!Lc(r)){s.next=21;break}return a=r,s.next=11,aN(a);case 11:if(!e.binary){s.next=17;break}return s.next=14,a.arrayBuffer();case 14:s.t0=s.sent,s.next=20;break;case 17:return s.next=19,a.text();case 19:s.t0=s.sent;case 20:return s.abrupt("return",s.t0);case 21:if(cx(r)&&(r=UN(r,n)),!(J4(r)||Q4(r))){s.next=24;break}return s.abrupt("return",KC(r));case 24:throw new Error(jN);case 25:case"end":return s.stop()}},t)})),TP.apply(this,arguments)}et();function Ax(t,r){var e=cP(),n=t||e;return typeof n.fetch=="function"?n.fetch:dm(n.fetch)?function(i){return xg(i,n)}:r!=null&&r.fetch?r?.fetch:xg}function VN(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Lse(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?VN(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):VN(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function HN(t,r,e){if(e)return e;var n=Lse({fetch:Ax(r,t)},t);if(n.url){var i=bg(n.url);n.baseUrl=i,n.queryString=nN(n.url),n.filename=df.filename(i),n.baseUrl=df.dirname(i)}return Array.isArray(n.loaders)||(n.loaders=null),n}function WN(t,r){if(!r&&t&&!Array.isArray(t))return t;var e;if(t&&(e=Array.isArray(t)?t:[t]),r&&r.loaders){var n=Array.isArray(r.loaders)?r.loaders:[r.loaders];e=e?[].concat(Pr(e),Pr(n)):n}return e&&e.length?e:null}function ym(t,r,e,n){return SP.apply(this,arguments)}function SP(){return SP=zt(Jy.default.mark(function t(r,e,n,i){var a,o,s,u;return Jy.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return Pu(!i||vr(i)==="object"),e&&!Array.isArray(e)&&!Yy(e)&&(i=void 0,n=e,e=void 0),h.next=4,r;case 4:return r=h.sent,n=n||{},a=mm(r),o=e,s=WN(o,i),h.next=11,kN(r,s,n);case 11:if(u=h.sent,u){h.next=14;break}return h.abrupt("return",null);case 14:return n=wN(n,u,s,a),i=HN({url:a,parse:ym,loaders:s},n,i||null),h.next=18,kse(u,r,n,i);case 18:return h.abrupt("return",h.sent);case 19:case"end":return h.stop()}},t)})),SP.apply(this,arguments)}function kse(t,r,e,n){return EP.apply(this,arguments)}function EP(){return EP=zt(Jy.default.mark(function t(r,e,n,i){var a,o,s,u,c,h,p,v;return Jy.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return BC(r),Lc(e)&&(a=e,o=a.ok,s=a.redirected,u=a.status,c=a.statusText,h=a.type,p=a.url,v=Object.fromEntries(a.headers.entries()),i.response={headers:v,ok:o,redirected:s,status:u,statusText:c,type:h,url:p}),E.next=4,GN(e,r,n);case 4:if(e=E.sent,!(r.parseTextSync&&typeof e=="string")){E.next=8;break}return n.dataType="text",E.abrupt("return",r.parseTextSync(e,n,i,r));case 8:if(!jC(r,n)){E.next=12;break}return E.next=11,GC(r,e,n,i,ym);case 11:return E.abrupt("return",E.sent);case 12:if(!(r.parseText&&typeof e=="string")){E.next=16;break}return E.next=15,r.parseText(e,n,i,r);case 15:return E.abrupt("return",E.sent);case 16:if(!r.parse){E.next=20;break}return E.next=19,r.parse(e,n,i,r);case 19:return E.abrupt("return",E.sent);case 20:throw Pu(!r.parseSync),new Error("".concat(r.id," loader - no parser found and worker is disabled"));case 22:case"end":return E.stop()}},t)})),EP.apply(this,arguments)}var CP=en(On());function Ks(t,r,e,n){return PP.apply(this,arguments)}function PP(){return PP=zt(CP.default.mark(function t(r,e,n,i){var a,o;return CP.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!Array.isArray(e)&&!Yy(e)&&(i=void 0,n=e,e=void 0),a=Ax(n),o=r,typeof r!="string"){u.next=7;break}return u.next=6,a(r);case 6:o=u.sent;case 7:if(!kc(r)){u.next=11;break}return u.next=10,a(r);case 10:o=u.sent;case 11:return u.next=13,ym(o,e,n);case 13:return u.abrupt("return",u.sent);case 14:case"end":return u.stop()}},t)})),PP.apply(this,arguments)}var qN={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795};function XN(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Bse(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Bse(t,r){if(t){if(typeof t=="string")return YN(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return YN(t,r)}}function YN(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var KN,ZN,JN={fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif',display:"flex",flex:"wrap",maxWidth:"500px",flexDirection:"column",zIndex:2};function yx(){return document.createElement("div")}function Dse(t){if(!t.picked)return null;if(t.object===KN)return ZN;var r={html:Nse(t.object),style:JN};return ZN=r,KN=t.object,r}var Fse=new Set(["position","index"]);function Nse(t){var r=yx();for(var e in t)if(!Fse.has(e)){var n=yx();n.className="header",n.textContent=e;var i=yx();i.className="value",i.textContent=Use(t[e]);var a=yx();zse(a,n,i),a.appendChild(n),a.appendChild(i),r.appendChild(a)}return r.innerHTML}function zse(t,r,e){Object.assign(r.style,{fontWeight:700,marginRight:"10px",flex:"1 1 0%"}),Object.assign(e.style,{flex:"none",maxWidth:"250px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}),Object.assign(t.style,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"stretch"})}function Use(t){var r;if(Array.isArray(t)&&t.length>4)r="Array<".concat(t.length,">");else if(typeof t=="string")r=t;else if(typeof t=="number")r=String(t);else try{r=JSON.stringify(t)}catch{r="<Non-Serializable Object>"}var e=50;return r.length>e&&(r=r.slice(0,e)),r}function $N(t,r){var e,n=t,i="properties",a=/{[^}]*}/g,o=function(D){return D.replace(/[{}]/g,"")},s=Pr(new Set(t.match(a).map(o))),u=XN(s),c;try{for(u.s();!(c=u.n()).done;){var h=c.value;if(h.includes(".")){e=r;var p=h.split("."),v=XN(p),x;try{for(v.s();!(x=v.n()).done;){var E=x.value;if(e.hasOwnProperty(E))e=e[E];else{e=void 0;break}}}catch(R){v.e(R)}finally{v.f()}}else r.hasOwnProperty(h)?e=r[h]:r[i]&&r[i].hasOwnProperty(h)?e=r[i][h]:e=void 0;n=n.replaceAll("{".concat(h,"}"),e)}}catch(R){u.e(R)}finally{u.f()}return n}function OP(t){return t?t.html||t.text?function(r){if(!r.picked)return null;var e={style:t.style||JN};return t.html?e.html=$N(t.html,r.object):e.text=$N(t.text,r.object),e}:Dse:null}function QN(t){var r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=t,document.getElementsByTagName("head")[0].appendChild(r)}function ez(t,r){var e=document.createElement("div");return e.style.width=Number.isFinite(t)?"".concat(t,"px"):t,e.style.height="".concat(r,"px"),e.style.position="relative",e}var rz=en(tz()),jse="https://api.tiles.mapbox.com/mapbox-gl-js/v1.13.2/mapbox-gl.css",RP=rz.default;function nz(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:jse;QN(t)}function iz(){for(var t=["mapboxgl-missing-css"],r=0,e=t;r<e.length;r++){var n=e[r],i=document.getElementsByClassName(n)[0];i&&i.style&&(i.style.display="none")}}var LP={};function az(t){if(!LP[t]){var r=document.createElement("script");r.type="text/javascript",r.src=t;var e=document.querySelector("head");e.appendChild(r),LP[t]=new Promise(function(n){r.onload=n})}return LP[t]}et();var oz="3.4.13";var qP=en(On());var Gse=globalThis._parseImageNode,kP=typeof Image<"u",BP=typeof ImageBitmap<"u",Vse=Boolean(Gse),DP=Kh?!0:Vse;function sz(t){switch(t){case"auto":return BP||kP||DP;case"imagebitmap":return BP;case"image":return kP;case"data":return DP;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function uz(){if(BP)return"imagebitmap";if(kP)return"image";if(DP)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}Ii();function Hse(t){var r=Wse(t);if(!r)throw new Error("Not an image");return r}function lz(t){switch(Hse(t)){case"data":return t;case"image":case"imagebitmap":var r=document.createElement("canvas"),e=r.getContext("2d");if(!e)throw new Error("getImageData");return r.width=t.width,r.height=t.height,e.drawImage(t,0,0),e.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function Wse(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&vr(t)==="object"&&t.data&&t.width&&t.height?"data":null}var Qy=en(On());var qse=/^data:image\/svg\+xml/,Xse=/\.svg((\?|#).*)?$/;function _x(t){return t&&(qse.test(t)||Xse.test(t))}function cz(t,r){if(_x(r)){var e=new TextDecoder,n=e.decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(a){throw new Error(a.message)}var i="data:image/svg+xml;base64,".concat(btoa(n));return i}return FP(t,r)}function FP(t,r){if(_x(r))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function e_(t,r,e){return NP.apply(this,arguments)}function NP(){return NP=zt(Qy.default.mark(function t(r,e,n){var i,a,o;return Qy.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=cz(r,n),a=self.URL||self.webkitURL,o=typeof i!="string"&&a.createObjectURL(i),u.prev=3,u.next=6,Yse(o||i,e);case 6:return u.abrupt("return",u.sent);case 7:return u.prev=7,o&&a.revokeObjectURL(o),u.finish(7);case 10:case"end":return u.stop()}},t,null,[[3,,7,10]])})),NP.apply(this,arguments)}function Yse(t,r){return zP.apply(this,arguments)}function zP(){return zP=zt(Qy.default.mark(function t(r,e){var n;return Qy.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n=new Image,n.src=r,!(e.image&&e.image.decode&&n.decode)){a.next=6;break}return a.next=5,n.decode();case 5:return a.abrupt("return",n);case 6:return a.next=8,new Promise(function(o,s){try{n.onload=function(){return o(n)},n.onerror=function(u){return s(new Error("Could not load image ".concat(r,": ").concat(u)))}}catch(u){s(u)}});case 8:return a.abrupt("return",a.sent);case 9:case"end":return a.stop()}},t)})),zP.apply(this,arguments)}var t_=en(On());var Kse={},fz=!0;function GP(t,r,e){return UP.apply(this,arguments)}function UP(){return UP=zt(t_.default.mark(function t(r,e,n){var i,a,o;return t_.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!_x(n)){u.next=7;break}return u.next=3,e_(r,e,n);case 3:a=u.sent,i=a,u.next=8;break;case 7:i=FP(r,n);case 8:return o=e&&e.imagebitmap,u.next=11,Zse(i,o);case 11:return u.abrupt("return",u.sent);case 12:case"end":return u.stop()}},t)})),UP.apply(this,arguments)}function Zse(t){return jP.apply(this,arguments)}function jP(){return jP=zt(t_.default.mark(function t(r){var e,n=arguments;return t_.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=n.length>1&&n[1]!==void 0?n[1]:null,($se(e)||!fz)&&(e=null),!e){a.next=13;break}return a.prev=3,a.next=6,createImageBitmap(r,e);case 6:return a.abrupt("return",a.sent);case 9:a.prev=9,a.t0=a.catch(3),console.warn(a.t0),fz=!1;case 13:return a.next=15,createImageBitmap(r);case 15:return a.abrupt("return",a.sent);case 16:case"end":return a.stop()}},t,null,[[3,9]])})),jP.apply(this,arguments)}function $se(t){for(var r in t||Kse)return!1;return!0}var VP=en(On());function hz(t){return!tue(t,"ftyp",4)||!(t[8]&96)?null:Jse(t)}function Jse(t){var r=Qse(t,8,12).replace("\0"," ").trim();switch(r){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function Qse(t,r,e){return String.fromCharCode.apply(String,Pr(t.slice(r,e)))}function eue(t){return Pr(t).map(function(r){return r.charCodeAt(0)})}function tue(t,r){for(var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=eue(r),i=0;i<n.length;++i)if(n[i]!==t[i+e])return!1;return!0}var rh=!1,r_=!0;function _m(t){var r=n_(t);return nue(r)||oue(r)||iue(r)||aue(r)||rue(r)}function rue(t){var r=new Uint8Array(t instanceof DataView?t.buffer:t),e=hz(r);return e?{mimeType:e.mimeType,width:0,height:0}:null}function nue(t){var r=n_(t),e=r.byteLength>=24&&r.getUint32(0,rh)===2303741511;return e?{mimeType:"image/png",width:r.getUint32(16,rh),height:r.getUint32(20,rh)}:null}function iue(t){var r=n_(t),e=r.byteLength>=10&&r.getUint32(0,rh)===1195984440;return e?{mimeType:"image/gif",width:r.getUint16(6,r_),height:r.getUint16(8,r_)}:null}function aue(t){var r=n_(t),e=r.byteLength>=14&&r.getUint16(0,rh)===16973&&r.getUint32(2,r_)===r.byteLength;return e?{mimeType:"image/bmp",width:r.getUint32(18,r_),height:r.getUint32(22,r_)}:null}function oue(t){var r=n_(t),e=r.byteLength>=3&&r.getUint16(0,rh)===65496&&r.getUint8(2)===255;if(!e)return null;for(var n=sue(),i=n.tableMarkers,a=n.sofMarkers,o=2;o+9<r.byteLength;){var s=r.getUint16(o,rh);if(a.has(s))return{mimeType:"image/jpeg",height:r.getUint16(o+5,rh),width:r.getUint16(o+7,rh)};if(!i.has(s))return null;o+=2,o+=r.getUint16(o,rh)}return null}function sue(){for(var t=new Set([65499,65476,65484,65501,65534]),r=65504;r<65520;++r)t.add(r);var e=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:t,sofMarkers:e}}function n_(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function WP(t,r){return HP.apply(this,arguments)}function HP(){return HP=zt(VP.default.mark(function t(r,e){var n,i,a;return VP.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=_m(r)||{},i=n.mimeType,a=globalThis._parseImageNode,ea(a),s.next=5,a(r,i);case 5:return s.abrupt("return",s.sent);case 6:case"end":return s.stop()}},t)})),HP.apply(this,arguments)}function YP(t,r,e){return XP.apply(this,arguments)}function XP(){return XP=zt(qP.default.mark(function t(r,e,n){var i,a,o,s,u,c;return qP.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:e=e||{},i=e.image||{},a=i.type||"auto",o=n||{},s=o.url,u=uue(a),p.t0=u,p.next=p.t0==="imagebitmap"?8:p.t0==="image"?12:p.t0==="data"?16:20;break;case 8:return p.next=10,GP(r,e,s);case 10:return c=p.sent,p.abrupt("break",21);case 12:return p.next=14,e_(r,e,s);case 14:return c=p.sent,p.abrupt("break",21);case 16:return p.next=18,WP(r,e);case 18:return c=p.sent,p.abrupt("break",21);case 20:ea(!1);case 21:return a==="data"&&(c=lz(c)),p.abrupt("return",c);case 23:case"end":return p.stop()}},t)})),XP.apply(this,arguments)}function uue(t){switch(t){case"auto":case"data":return uz();default:return sz(t),t}}var lue=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],cue=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],fue={image:{type:"auto",decode:!0}},vf={id:"image",module:"images",name:"Images",version:oz,mimeTypes:cue,extensions:lue,parse:YP,tests:[function(t){return Boolean(_m(new DataView(t)))}],options:fue};var hue=en(On());var KP={};function ZP(t){if(KP[t]===void 0){var r=Kh?due(t):pue(t);KP[t]=r}return KP[t]}function pue(t){var r=["image/png","image/jpeg","image/gif"],e=globalThis._parseImageNode,n=globalThis._imageFormatsNode,i=n===void 0?r:n;return Boolean(e)&&i.includes(t)}function due(t){switch(t){case"image/avif":case"image/webp":return mue(t);default:return!0}}function mue(t){try{var r=document.createElement("canvas"),e=r.toDataURL(t);return e.indexOf("data:".concat(t))===0}catch{return!1}}Ii();et();at();vt();et();Ii();Ii();function i_(t){if(typeof window<"u"&&vr(window.process)==="object"&&window.process.type==="renderer"||typeof process<"u"&&vr(process.versions)==="object"&&Boolean(process.versions.electron))return!0;var r=(typeof navigator>"u"?"undefined":vr(navigator))==="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,e=t||r;return!!(e&&e.indexOf("Electron")>=0)}function cu(){var t=(typeof process>"u"?"undefined":vr(process))==="object"&&String(process)==="[object process]"&&!process.browser;return!t||i_()}Ii();var Zp={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:(typeof process>"u"?"undefined":vr(process))==="object"&&process};var vue=Zp.self||Zp.window||Zp.global,Eg=Zp.window||Zp.self||Zp.global,gue=Zp.document||{},bm=Zp.process||{};var bx="8.9.36",sGe=cu();var $P=globalThis;function Cg(t){if(!t&&!cu())return"Node";if(i_(t))return"Electron";var r=typeof navigator<"u"?navigator:{},e=t||r.userAgent||"";if(e.indexOf("Edge")>-1)return"Edge";var n=e.indexOf("MSIE ")!==-1,i=e.indexOf("Trident/")!==-1;return n||i?"IE":$P.chrome?"Chrome":$P.safari?"Safari":$P.mozInnerScreenX?"Firefox":"Unknown"}at();vt();et();function Aue(t){try{var r=window[t],e="__storage_test__";return r.setItem(e,e),r.removeItem(e),r}catch{return null}}var pz=function(){function t(r){ce(this,t);var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";_(this,"storage",void 0),_(this,"id",void 0),_(this,"config",{}),this.storage=Aue(n),this.id=r,this.config={},Object.assign(this.config,e),this._loadConfiguration()}return ve(t,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(e){return this.config={},this.updateConfiguration(e)}},{key:"updateConfiguration",value:function(e){if(Object.assign(this.config,e),this.storage){var n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}return this}},{key:"_loadConfiguration",value:function(){var e={};if(this.storage){var n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}]),t}();function dz(t){var r;return t<10?r="".concat(t.toFixed(2),"ms"):t<100?r="".concat(t.toFixed(1),"ms"):t<1e3?r="".concat(t.toFixed(0),"ms"):r="".concat((t/1e3).toFixed(2),"s"),r}function mz(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,e=Math.max(r-t.length,0);return"".concat(" ".repeat(e)).concat(t)}function xx(t,r,e){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600,i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>n&&(e=Math.min(e,n/t.width));var a=t.width*e,o=t.height*e,s=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(a/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(a,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(r," %c+"),s]}var wx;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(wx||(wx={}));function vz(t){return typeof t=="string"?wx[t.toUpperCase()]||wx.WHITE:t}function gz(t,r,e){return!cu&&typeof t=="string"&&(r&&(r=vz(r),t="\x1B[".concat(r,"m").concat(t,"\x1B[39m")),e&&(r=vz(e),t="\x1B[".concat(e+10,"m").concat(t,"\x1B[49m"))),t}function yue(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=_ue(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function _ue(t,r){if(t){if(typeof t=="string")return Az(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Az(t,r)}}function Az(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function yz(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"],e=Object.getPrototypeOf(t),n=Object.getOwnPropertyNames(e),i=yue(n),a;try{var o=function(){var u=a.value;typeof t[u]=="function"&&(r.find(function(c){return u===c})||(t[u]=t[u].bind(t)))};for(i.s();!(a=i.n()).done;)o()}catch(s){i.e(s)}finally{i.f()}}function Pg(t,r){if(!t)throw new Error(r||"Assertion failed")}function xm(){var t;if(cu&&"performance"in Eg){var r,e;t=Eg===null||Eg===void 0||(r=Eg.performance)===null||r===void 0||(e=r.now)===null||e===void 0?void 0:e.call(r)}else if("hrtime"in bm){var n,i=bm===null||bm===void 0||(n=bm.hrtime)===null||n===void 0?void 0:n.call(bm);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}var Og={debug:cu&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},bue={enabled:!0,level:0};function Dc(){}var _z={},bz={once:!0},$p=function(){function t(){ce(this,t);var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""},e=r.id;_(this,"id",void 0),_(this,"VERSION",bx),_(this,"_startTs",xm()),_(this,"_deltaTs",xm()),_(this,"_storage",void 0),_(this,"userData",{}),_(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this._storage=new pz("__probe-".concat(this.id,"__"),bue),this.userData={},this.timeStamp("".concat(this.id," started")),yz(this),Object.seal(this)}return ve(t,[{key:"level",get:function(){return this.getLevel()},set:function(e){this.setLevel(e)}},{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number((xm()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((xm()-this._deltaTs).toPrecision(10))}},{key:"priority",get:function(){return this.level},set:function(e){this.level=e}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:e}),this}},{key:"setLevel",value:function(e){return this._storage.updateConfiguration({level:e}),this}},{key:"get",value:function(e){return this._storage.config[e]}},{key:"set",value:function(e,n){this._storage.updateConfiguration(_({},e,n))}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"assert",value:function(e,n){Pg(e,n)}},{key:"warn",value:function(e){return this._getLogFunction(0,e,Og.warn,arguments,bz)}},{key:"error",value:function(e){return this._getLogFunction(0,e,Og.error,arguments)}},{key:"deprecated",value:function(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}},{key:"removed",value:function(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}},{key:"probe",value:function(e,n){return this._getLogFunction(e,n,Og.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(e,n){return this._getLogFunction(e,n,Og.debug,arguments)}},{key:"info",value:function(e,n){return this._getLogFunction(e,n,console.info,arguments)}},{key:"once",value:function(e,n){for(var i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];return this._getLogFunction(e,n,Og.debug||Og.info,arguments,bz)}},{key:"table",value:function(e,n,i){return n?this._getLogFunction(e,n,console.table||Dc,i&&[i],{tag:Sue(n)}):Dc}},{key:"image",value:function(e){var n=e.logLevel,i=e.priority,a=e.image,o=e.message,s=o===void 0?"":o,u=e.scale,c=u===void 0?1:u;return this._shouldLog(n||i)?cu?Tue({image:a,message:s,scale:c}):wue({image:a,message:s,scale:c}):Dc}},{key:"time",value:function(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}},{key:"timeEnd",value:function(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(e,n){return this._getLogFunction(e,n,console.timeStamp||Dc)}},{key:"group",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1},a=xz({logLevel:e,message:n,opts:i}),o=i.collapsed;return a.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(a)}},{key:"groupCollapsed",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},i,{collapsed:!0}))}},{key:"groupEnd",value:function(e){return this._getLogFunction(e,"",console.groupEnd||Dc)}},{key:"withGroup",value:function(e,n,i){this.group(e,n)();try{i()}finally{this.groupEnd(e)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(e){return this.isEnabled()&&this.getLevel()>=wz(e)}},{key:"_getLogFunction",value:function(e,n,i,a,o){if(this._shouldLog(e)){var s;o=xz({logLevel:e,message:n,args:a,opts:o}),i=i||o.method,Pg(i),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=xm();var u=o.tag||o.message;if(o.once)if(!_z[u])_z[u]=xm();else return Dc;return n=xue(this.id,o.message,o),(s=i).bind.apply(s,[console,n].concat(Pr(o.args)))}return Dc}}]),t}();_($p,"VERSION",bx);function wz(t){if(!t)return 0;var r;switch(vr(t)){case"number":r=t;break;case"object":r=t.logLevel||t.priority||0;break;default:return 0}return Pg(Number.isFinite(r)&&r>=0),r}function xz(t){var r=t.logLevel,e=t.message;t.logLevel=wz(r);for(var n=t.args?Array.from(t.args):[];n.length&&n.shift()!==e;);switch(vr(r)){case"string":case"function":e!==void 0&&n.unshift(e),t.message=r;break;case"object":Object.assign(t,r);break;default:}typeof t.message=="function"&&(t.message=t.message());var i=vr(t.message);return Pg(i==="string"||i==="object"),Object.assign(t,{args:n},t.opts)}function xue(t,r,e){if(typeof r=="string"){var n=e.time?mz(dz(e.total)):"";r=e.time?"".concat(t,": ").concat(n,"  ").concat(r):"".concat(t,": ").concat(r),r=gz(r,e.color,e.background)}return r}function wue(t){var r=t.image,e=t.message,n=e===void 0?"":e,i=t.scale,a=i===void 0?1:i,o=null;try{o=module.require("asciify-image")}catch{}return o?function(){return o(r,{fit:"box",width:"".concat(Math.round(80*a),"%")}).then(function(s){return console.log(s)})}:Dc}function Tue(t){var r=t.image,e=t.message,n=e===void 0?"":e,i=t.scale,a=i===void 0?1:i;if(typeof r=="string"){var o=new Image;return o.onload=function(){var h,p=xx(o,n,a);(h=console).log.apply(h,Pr(p))},o.src=r,Dc}var s=r.nodeName||"";if(s.toLowerCase()==="img"){var u;return(u=console).log.apply(u,Pr(xx(r,n,a))),Dc}if(s.toLowerCase()==="canvas"){var c=new Image;return c.onload=function(){var h;return(h=console).log.apply(h,Pr(xx(c,n,a)))},c.src=r.toDataURL(),Dc}return Dc}function Sue(t){for(var r in t)for(var e in t[r])return e||"untitled";return"empty"}var XGe=new $p({id:"@probe.gl/log"});var xr=new $p({id:"deck"});var JP={};function Tz(t){JP=t}function _s(t,r,e,n){xr.level>0&&JP[t]&&JP[t].call(null,r,e,n)}function Eue(t){var r=t[0],e=t[t.length-1];return r==="{"&&e==="}"||r==="["&&e==="]"}var Sz={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:Eue,parseTextSync:JSON.parse};function Ez(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Cz(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Ez(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Ez(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Cue(){var t="8.9.36",r=globalThis.deck&&globalThis.deck.VERSION;if(r&&r!==t)throw new Error("deck.gl - multiple versions detected: ".concat(r," vs ").concat(t));return r||(xr.log(1,"deck.gl ".concat(t))(),globalThis.deck=Cz(Cz({},globalThis.deck),{},{VERSION:t,version:t,log:xr,_registerLoggers:Tz}),Am([Sz,[vf,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}var Tx=Cue();var yn={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(yn,"IDENTITY",{get:function(){return xr.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0}});var ol={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Uo={common:0,meters:1,pixels:2},QP={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},Pz={DRAW:"draw",MASK:"mask",TERRAIN:"terrain"};at();vt();et();var Wr=new $p({id:"luma.gl"});function Fs(t,r){if(!t)throw new Error(r||"luma.gl: assertion failed.")}var Pue="Invalid WebGLRenderingContext";var Oue="Requires WebGL2";function $h(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&Number.isFinite(t._version))}function En(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function eO(t){return En(t)?t:null}function Jh(t){return Fs($h(t),Pue),t}function Ro(t){return Fs(En(t),Oue),t}var a_={};function Mue(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function Iue(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function Rue(t,r){a_[t]=!0,r!==void 0&&Mue(r)}function Lue(t){var r=t.getError;t.getError=function(){var n;do n=r.apply(t),n!==0&&(a_[n]=!0);while(n!==0);for(n in a_)if(a_[n])return delete a_[n],parseInt(n,10);return 0}}var o_=function t(r){var e=r.gl;this.ext=r,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(r.maxVertexAttribs);for(var n=0;n<this.attribs.length;n++){var i=new t.VertexAttrib(e);this.attribs[n]=i}this.maxAttrib=0};o_.VertexAttrib=function(r){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};o_.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var wm=function(r){var e=this;this.gl=r,Lue(r);var n=this.original={getParameter:r.getParameter,enableVertexAttribArray:r.enableVertexAttribArray,disableVertexAttribArray:r.disableVertexAttribArray,bindBuffer:r.bindBuffer,getVertexAttrib:r.getVertexAttrib,vertexAttribPointer:r.vertexAttribPointer};r.getParameter=function(a){return a===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:n.getParameter.apply(this,arguments)},r.enableVertexAttribArray=function(a){var o=e.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,a);var s=o.attribs[a];return s.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},r.disableVertexAttribArray=function(a){var o=e.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,a);var s=o.attribs[a];return s.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},r.bindBuffer=function(a,o){switch(a){case 34962:e.currentArrayBuffer=o;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=o;break;default:}return n.bindBuffer.apply(this,arguments)},r.getVertexAttrib=function(a,o){var s=e.currentVertexArrayObject,u=s.attribs[a];switch(o){case 34975:return u.buffer;case 34338:return u.enabled;case 34339:return u.size;case 34340:return u.stride;case 34341:return u.type;case 34922:return u.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},r.vertexAttribPointer=function(a,o,s,u,c,h){var p=e.currentVertexArrayObject;p.maxAttrib=Math.max(p.maxAttrib,a);var v=p.attribs[a];return v.buffer=e.currentArrayBuffer,v.size=o,v.type=s,v.normalized=u,v.stride=c,v.offset=h,v.recache(),n.vertexAttribPointer.apply(this,arguments)},r.instrumentExtension&&r.instrumentExtension(this,"OES_vertex_array_object"),r.canvas&&r.canvas.addEventListener("webglcontextrestored",function(){Iue("OESVertexArrayObject emulation library context restored"),e.reset_()},!0),this.reset_()};wm.prototype.VERTEX_ARRAY_BINDING_OES=34229;wm.prototype.reset_=function(){var r=this.vertexArrayObjects!==void 0;if(r)for(var e=0;e<this.vertexArrayObjects.length;++e)this.vertexArrayObjects.isAlive=!1;var n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new o_(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};wm.prototype.createVertexArrayOES=function(){var r=new o_(this);return this.vertexArrayObjects.push(r),r};wm.prototype.deleteVertexArrayOES=function(r){r.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(r),1),this.currentVertexArrayObject===r&&this.bindVertexArrayOES(null)};wm.prototype.isVertexArrayOES=function(r){return!!(r&&r instanceof o_&&r.hasBeenBound&&r.ext===this)};wm.prototype.bindVertexArrayOES=function(r){var e=this.gl;if(r&&!r.isAlive){Rue(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}var n=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=r||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;var a=this.currentVertexArrayObject;if(i!==a){(!i||a.elementArrayBuffer!==i.elementArrayBuffer)&&n.bindBuffer.call(e,34963,a.elementArrayBuffer);for(var o=this.currentArrayBuffer,s=Math.max(i?i.maxAttrib:0,a.maxAttrib),u=0;u<=s;u++){var c=a.attribs[u],h=i?i.attribs[u]:null;if((!i||c.enabled!==h.enabled)&&(c.enabled?n.enableVertexAttribArray.call(e,u):n.disableVertexAttribArray.call(e,u)),c.enabled){var p=!1;(!i||c.buffer!==h.buffer)&&(o!==c.buffer&&(n.bindBuffer.call(e,34962,c.buffer),o=c.buffer),p=!0),(p||c.cached!==h.cached)&&n.vertexAttribPointer.call(e,u,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!==o&&n.bindBuffer.call(e,34962,this.currentArrayBuffer)}};function Oz(t){if(typeof t.createVertexArray!="function"){var r=t.getSupportedExtensions;t.getSupportedExtensions=function(){var i=r.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};var e=t.getExtension;t.getExtension=function(i){var a=e.call(this,i);return a||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new wm(this)),this.__OESVertexArrayObject))}}}et();et();var ta,Mz="OES_element_index",Iz="WEBGL_draw_buffers",kue="EXT_disjoint_timer_query",Bue="EXT_disjoint_timer_query_webgl2",Due="EXT_texture_filter_anisotropic",Rz="WEBGL_debug_renderer_info",Fue=35723,Nue=4352,zue=36795,Uue=34047,jue=37445,Gue=37446,Lo=function(r){return En(r)?void 0:0},Vue=(ta={},_(ta,3074,function(r){return En(r)?void 0:36064}),_(ta,Fue,function(t){return En(t)?void 0:Nue}),_(ta,35977,Lo),_(ta,32937,Lo),_(ta,zue,function(t,r){var e=En(t)?t.getExtension(Bue):t.getExtension(kue);return e&&e.GPU_DISJOINT_EXT?r(e.GPU_DISJOINT_EXT):0}),_(ta,jue,function(t,r){var e=t.getExtension(Rz);return r(e&&e.UNMASKED_VENDOR_WEBGL||7936)}),_(ta,Gue,function(t,r){var e=t.getExtension(Rz);return r(e&&e.UNMASKED_RENDERER_WEBGL||7937)}),_(ta,Uue,function(t,r){var e=t.luma.extensions[Due];return e?r(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1}),_(ta,32883,Lo),_(ta,35071,Lo),_(ta,37447,Lo),_(ta,36063,function(r,e){if(!En(r)){var n=r.getExtension(Iz);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}}),_(ta,35379,Lo),_(ta,35374,Lo),_(ta,35377,Lo),_(ta,34852,function(r){if(!En(r)){var e=r.getExtension(Iz);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}}),_(ta,36203,function(r){return r.getExtension(Mz)?2147483647:65535}),_(ta,33001,function(r){return r.getExtension(Mz)?16777216:65535}),_(ta,33e3,function(r){return 16777216}),_(ta,37157,Lo),_(ta,35373,Lo),_(ta,35657,Lo),_(ta,36183,Lo),_(ta,37137,Lo),_(ta,34045,Lo),_(ta,35978,Lo),_(ta,35979,Lo),_(ta,35968,Lo),_(ta,35376,Lo),_(ta,35375,Lo),_(ta,35659,Lo),_(ta,37154,Lo),_(ta,35371,Lo),_(ta,35658,Lo),_(ta,35076,Lo),_(ta,35077,Lo),_(ta,35380,Lo),ta);function Lz(t,r,e){var n=Vue[e],i=typeof n=="function"?n(t,r,e):n,a=i!==void 0?i:r(e);return a}var Mg,Hue="OES_vertex_array_object",kz="ANGLE_instanced_arrays",Wue="WEBGL_draw_buffers",que="EXT_disjoint_timer_query",Xue="EXT_texture_filter_anisotropic",Yue="VertexArray requires WebGL2 or OES_vertex_array_object extension";function Kue(t,r){return{webgl2:En(t),ext:t.getExtension(r)}}var tO=(Mg={},_(Mg,Hue,{meta:{suffix:"OES"},createVertexArray:function(){Fs(!1,Yue)},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),_(Mg,kz,{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(r,e){Fs(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),_(Mg,Wue,{meta:{suffix:"WEBGL"},drawBuffers:function(){Fs(!1)}}),_(Mg,que,{meta:{suffix:"EXT"},createQuery:function(){Fs(!1)},deleteQuery:function(){Fs(!1)},beginQuery:function(){Fs(!1)},endQuery:function(){},getQuery:function(r,e){return this.getQueryObject(r,e)},getQueryParameter:function(r,e){return this.getQueryObject(r,e)},getQueryObject:function(){}}),Mg),Sx={readBuffer:function(r,e,n){En(r)&&e(n)},getVertexAttrib:function(r,e,n,i){var a=Kue(r,kz),o=a.webgl2,s=a.ext,u;switch(i){case 35069:u=o?void 0:!1;break;case 35070:u=!o&&!s?0:void 0;break;default:}return u!==void 0?u:e(n,i)},getProgramParameter:function(r,e,n,i){if(!En(r))switch(i){case 35967:return 35981;case 35971:return 0;case 35382:return 0;default:}return e(n,i)},getInternalformatParameter:function(r,e,n,i,a){if(!En(r))switch(a){case 32937:return new Int32Array([0]);default:}return r.getInternalformatParameter(n,i,a)},getTexParameter:function(r,e,n,i){switch(i){case 34046:var a=r.luma.extensions,o=a[Xue];i=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046;break;default:}return e(n,i)},getParameter:Lz,hint:function(r,e,n,i){return e(n,i)}};function Dz(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Zue(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Zue(t,r){if(t){if(typeof t=="string")return Bz(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Bz(t,r)}}function Bz(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function Fz(t){t.luma=t.luma||{};var r=t.luma;return r.polyfilled||(Oz(t),$ue(t),Que(t,tO),Jue(t,{target:r,target2:t}),r.polyfilled=!0),t}globalThis.polyfillContext=Fz;function $ue(t){t.luma.extensions={};var r=t.getSupportedExtensions()||[],e=Dz(r),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;t.luma[i]=t.getExtension(i)}}catch(a){e.e(a)}finally{e.f()}}function Jue(t,r){var e=r.target,n=r.target2;Object.keys(Sx).forEach(function(i){if(typeof Sx[i]=="function"){var a=t[i]?t[i].bind(t):function(){},o=Sx[i].bind(null,t,a);e[i]=o,n[i]=o}})}function Que(t,r){var e=Dz(Object.getOwnPropertyNames(r)),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;i!=="overrides"&&ele(t,{extension:i,target:t.luma,target2:t})}}catch(a){e.e(a)}finally{e.f()}}function ele(t,r){var e=r.extension,n=r.target,i=r.target2,a=tO[e];Fs(a);for(var o=a.meta,s=o===void 0?{}:o,u=s.suffix,c=u===void 0?"":u,h=t.getExtension(e),p=function(){var R=x[v],D="".concat(R).concat(c),H=null;R==="meta"||typeof t[R]=="function"||(h&&typeof h[D]=="function"?H=function(){return h[D].apply(h,arguments)}:typeof a[R]=="function"&&(H=a[R].bind(n))),H&&(n[R]=H,i[R]=H)},v=0,x=Object.keys(a);v<x.length;v++)p()}Mn();et();var Vn,zr,Fc,u_=(Vn={},_(Vn,3042,!1),_(Vn,32773,new Float32Array([0,0,0,0])),_(Vn,32777,32774),_(Vn,34877,32774),_(Vn,32969,1),_(Vn,32968,0),_(Vn,32971,1),_(Vn,32970,0),_(Vn,3106,new Float32Array([0,0,0,0])),_(Vn,3107,[!0,!0,!0,!0]),_(Vn,2884,!1),_(Vn,2885,1029),_(Vn,2929,!1),_(Vn,2931,1),_(Vn,2932,513),_(Vn,2928,new Float32Array([0,1])),_(Vn,2930,!0),_(Vn,3024,!0),_(Vn,36006,null),_(Vn,2886,2305),_(Vn,33170,4352),_(Vn,2849,1),_(Vn,32823,!1),_(Vn,32824,0),_(Vn,10752,0),_(Vn,32938,1),_(Vn,32939,!1),_(Vn,3089,!1),_(Vn,3088,new Int32Array([0,0,1024,1024])),_(Vn,2960,!1),_(Vn,2961,0),_(Vn,2968,4294967295),_(Vn,36005,4294967295),_(Vn,2962,519),_(Vn,2967,0),_(Vn,2963,4294967295),_(Vn,34816,519),_(Vn,36003,0),_(Vn,36004,4294967295),_(Vn,2964,7680),_(Vn,2965,7680),_(Vn,2966,7680),_(Vn,34817,7680),_(Vn,34818,7680),_(Vn,34819,7680),_(Vn,2978,[0,0,1024,1024]),_(Vn,3333,4),_(Vn,3317,4),_(Vn,37440,!1),_(Vn,37441,!1),_(Vn,37443,37444),_(Vn,35723,4352),_(Vn,36010,null),_(Vn,35977,!1),_(Vn,3330,0),_(Vn,3332,0),_(Vn,3331,0),_(Vn,3314,0),_(Vn,32878,0),_(Vn,3316,0),_(Vn,3315,0),_(Vn,32877,0),Vn),Jp=function(r,e,n){return e?r.enable(n):r.disable(n)},Nz=function(r,e,n){return r.hint(n,e)},cc=function(r,e,n){return r.pixelStorei(n,e)},tle=function(r,e){var n=En(r)?36009:36160;return r.bindFramebuffer(n,e)},rle=function(r,e){return r.bindFramebuffer(36008,e)};function s_(t){return Array.isArray(t)||ArrayBuffer.isView(t)}var zz=(zr={},_(zr,3042,Jp),_(zr,32773,function(r,e){return r.blendColor.apply(r,Pr(e))}),_(zr,32777,"blendEquation"),_(zr,34877,"blendEquation"),_(zr,32969,"blendFunc"),_(zr,32968,"blendFunc"),_(zr,32971,"blendFunc"),_(zr,32970,"blendFunc"),_(zr,3106,function(r,e){return r.clearColor.apply(r,Pr(e))}),_(zr,3107,function(r,e){return r.colorMask.apply(r,Pr(e))}),_(zr,2884,Jp),_(zr,2885,function(r,e){return r.cullFace(e)}),_(zr,2929,Jp),_(zr,2931,function(r,e){return r.clearDepth(e)}),_(zr,2932,function(r,e){return r.depthFunc(e)}),_(zr,2928,function(r,e){return r.depthRange.apply(r,Pr(e))}),_(zr,2930,function(r,e){return r.depthMask(e)}),_(zr,3024,Jp),_(zr,35723,Nz),_(zr,36006,tle),_(zr,2886,function(r,e){return r.frontFace(e)}),_(zr,33170,Nz),_(zr,2849,function(r,e){return r.lineWidth(e)}),_(zr,32823,Jp),_(zr,32824,"polygonOffset"),_(zr,10752,"polygonOffset"),_(zr,35977,Jp),_(zr,32938,"sampleCoverage"),_(zr,32939,"sampleCoverage"),_(zr,3089,Jp),_(zr,3088,function(r,e){return r.scissor.apply(r,Pr(e))}),_(zr,2960,Jp),_(zr,2961,function(r,e){return r.clearStencil(e)}),_(zr,2968,function(r,e){return r.stencilMaskSeparate(1028,e)}),_(zr,36005,function(r,e){return r.stencilMaskSeparate(1029,e)}),_(zr,2962,"stencilFuncFront"),_(zr,2967,"stencilFuncFront"),_(zr,2963,"stencilFuncFront"),_(zr,34816,"stencilFuncBack"),_(zr,36003,"stencilFuncBack"),_(zr,36004,"stencilFuncBack"),_(zr,2964,"stencilOpFront"),_(zr,2965,"stencilOpFront"),_(zr,2966,"stencilOpFront"),_(zr,34817,"stencilOpBack"),_(zr,34818,"stencilOpBack"),_(zr,34819,"stencilOpBack"),_(zr,2978,function(r,e){return r.viewport.apply(r,Pr(e))}),_(zr,3333,cc),_(zr,3317,cc),_(zr,37440,cc),_(zr,37441,cc),_(zr,37443,cc),_(zr,3330,cc),_(zr,3332,cc),_(zr,3331,cc),_(zr,36010,rle),_(zr,3314,cc),_(zr,32878,cc),_(zr,3316,cc),_(zr,3315,cc),_(zr,32877,cc),_(zr,"framebuffer",function(r,e){var n=e&&"handle"in e?e.handle:e;return r.bindFramebuffer(36160,n)}),_(zr,"blend",function(r,e){return e?r.enable(3042):r.disable(3042)}),_(zr,"blendColor",function(r,e){return r.blendColor.apply(r,Pr(e))}),_(zr,"blendEquation",function(r,e){e=s_(e)?e:[e,e],r.blendEquationSeparate.apply(r,Pr(e))}),_(zr,"blendFunc",function(r,e){e=s_(e)&&e.length===2?[].concat(Pr(e),Pr(e)):e,r.blendFuncSeparate.apply(r,Pr(e))}),_(zr,"clearColor",function(r,e){return r.clearColor.apply(r,Pr(e))}),_(zr,"clearDepth",function(r,e){return r.clearDepth(e)}),_(zr,"clearStencil",function(r,e){return r.clearStencil(e)}),_(zr,"colorMask",function(r,e){return r.colorMask.apply(r,Pr(e))}),_(zr,"cull",function(r,e){return e?r.enable(2884):r.disable(2884)}),_(zr,"cullFace",function(r,e){return r.cullFace(e)}),_(zr,"depthTest",function(r,e){return e?r.enable(2929):r.disable(2929)}),_(zr,"depthFunc",function(r,e){return r.depthFunc(e)}),_(zr,"depthMask",function(r,e){return r.depthMask(e)}),_(zr,"depthRange",function(r,e){return r.depthRange.apply(r,Pr(e))}),_(zr,"dither",function(r,e){return e?r.enable(3024):r.disable(3024)}),_(zr,"derivativeHint",function(r,e){r.hint(35723,e)}),_(zr,"frontFace",function(r,e){return r.frontFace(e)}),_(zr,"mipmapHint",function(r,e){return r.hint(33170,e)}),_(zr,"lineWidth",function(r,e){return r.lineWidth(e)}),_(zr,"polygonOffsetFill",function(r,e){return e?r.enable(32823):r.disable(32823)}),_(zr,"polygonOffset",function(r,e){return r.polygonOffset.apply(r,Pr(e))}),_(zr,"sampleCoverage",function(r,e){return r.sampleCoverage.apply(r,Pr(e))}),_(zr,"scissorTest",function(r,e){return e?r.enable(3089):r.disable(3089)}),_(zr,"scissor",function(r,e){return r.scissor.apply(r,Pr(e))}),_(zr,"stencilTest",function(r,e){return e?r.enable(2960):r.disable(2960)}),_(zr,"stencilMask",function(r,e){e=s_(e)?e:[e,e];var n=e,i=Ot(n,2),a=i[0],o=i[1];r.stencilMaskSeparate(1028,a),r.stencilMaskSeparate(1029,o)}),_(zr,"stencilFunc",function(r,e){e=s_(e)&&e.length===3?[].concat(Pr(e),Pr(e)):e;var n=e,i=Ot(n,6),a=i[0],o=i[1],s=i[2],u=i[3],c=i[4],h=i[5];r.stencilFuncSeparate(1028,a,o,s),r.stencilFuncSeparate(1029,u,c,h)}),_(zr,"stencilOp",function(r,e){e=s_(e)&&e.length===3?[].concat(Pr(e),Pr(e)):e;var n=e,i=Ot(n,6),a=i[0],o=i[1],s=i[2],u=i[3],c=i[4],h=i[5];r.stencilOpSeparate(1028,a,o,s),r.stencilOpSeparate(1029,u,c,h)}),_(zr,"viewport",function(r,e){return r.viewport.apply(r,Pr(e))}),zr);function bs(t,r,e){return r[t]!==void 0?r[t]:e[t]}var Uz={blendEquation:function(r,e,n){return r.blendEquationSeparate(bs(32777,e,n),bs(34877,e,n))},blendFunc:function(r,e,n){return r.blendFuncSeparate(bs(32969,e,n),bs(32968,e,n),bs(32971,e,n),bs(32970,e,n))},polygonOffset:function(r,e,n){return r.polygonOffset(bs(32824,e,n),bs(10752,e,n))},sampleCoverage:function(r,e,n){return r.sampleCoverage(bs(32938,e,n),bs(32939,e,n))},stencilFuncFront:function(r,e,n){return r.stencilFuncSeparate(1028,bs(2962,e,n),bs(2967,e,n),bs(2963,e,n))},stencilFuncBack:function(r,e,n){return r.stencilFuncSeparate(1029,bs(34816,e,n),bs(36003,e,n),bs(36004,e,n))},stencilOpFront:function(r,e,n){return r.stencilOpSeparate(1028,bs(2964,e,n),bs(2965,e,n),bs(2966,e,n))},stencilOpBack:function(r,e,n){return r.stencilOpSeparate(1029,bs(34817,e,n),bs(34818,e,n),bs(34819,e,n))}},rO={enable:function(r,e){return r(_({},e,!0))},disable:function(r,e){return r(_({},e,!1))},pixelStorei:function(r,e,n){return r(_({},e,n))},hint:function(r,e,n){return r(_({},e,n))},bindFramebuffer:function(r,e,n){var i;switch(e){case 36160:return r((i={},_(i,36006,n),_(i,36010,n),i));case 36009:return r(_({},36006,n));case 36008:return r(_({},36010,n));default:return null}},blendColor:function(r,e,n,i,a){return r(_({},32773,new Float32Array([e,n,i,a])))},blendEquation:function(r,e){var n;return r((n={},_(n,32777,e),_(n,34877,e),n))},blendEquationSeparate:function(r,e,n){var i;return r((i={},_(i,32777,e),_(i,34877,n),i))},blendFunc:function(r,e,n){var i;return r((i={},_(i,32969,e),_(i,32968,n),_(i,32971,e),_(i,32970,n),i))},blendFuncSeparate:function(r,e,n,i,a){var o;return r((o={},_(o,32969,e),_(o,32968,n),_(o,32971,i),_(o,32970,a),o))},clearColor:function(r,e,n,i,a){return r(_({},3106,new Float32Array([e,n,i,a])))},clearDepth:function(r,e){return r(_({},2931,e))},clearStencil:function(r,e){return r(_({},2961,e))},colorMask:function(r,e,n,i,a){return r(_({},3107,[e,n,i,a]))},cullFace:function(r,e){return r(_({},2885,e))},depthFunc:function(r,e){return r(_({},2932,e))},depthRange:function(r,e,n){return r(_({},2928,new Float32Array([e,n])))},depthMask:function(r,e){return r(_({},2930,e))},frontFace:function(r,e){return r(_({},2886,e))},lineWidth:function(r,e){return r(_({},2849,e))},polygonOffset:function(r,e,n){var i;return r((i={},_(i,32824,e),_(i,10752,n),i))},sampleCoverage:function(r,e,n){var i;return r((i={},_(i,32938,e),_(i,32939,n),i))},scissor:function(r,e,n,i,a){return r(_({},3088,new Int32Array([e,n,i,a])))},stencilMask:function(r,e){var n;return r((n={},_(n,2968,e),_(n,36005,e),n))},stencilMaskSeparate:function(r,e,n){return r(_({},e===1028?2968:36005,n))},stencilFunc:function(r,e,n,i){var a;return r((a={},_(a,2962,e),_(a,2967,n),_(a,2963,i),_(a,34816,e),_(a,36003,n),_(a,36004,i),a))},stencilFuncSeparate:function(r,e,n,i,a){var o;return r((o={},_(o,e===1028?2962:34816,n),_(o,e===1028?2967:36003,i),_(o,e===1028?2963:36004,a),o))},stencilOp:function(r,e,n,i){var a;return r((a={},_(a,2964,e),_(a,2965,n),_(a,2966,i),_(a,34817,e),_(a,34818,n),_(a,34819,i),a))},stencilOpSeparate:function(r,e,n,i,a){var o;return r((o={},_(o,e===1028?2964:34817,n),_(o,e===1028?2965:34818,i),_(o,e===1028?2966:34819,a),o))},viewport:function(r,e,n,i,a){return r(_({},2978,[e,n,i,a]))}},nh=function(r,e){return r.isEnabled(e)},nO=(Fc={},_(Fc,3042,nh),_(Fc,2884,nh),_(Fc,2929,nh),_(Fc,3024,nh),_(Fc,32823,nh),_(Fc,32926,nh),_(Fc,32928,nh),_(Fc,3089,nh),_(Fc,2960,nh),_(Fc,35977,nh),Fc);at();vt();function iO(t){for(var r in t)return!1;return!0}function jz(t,r){if(t===r)return!0;var e=Array.isArray(t)||ArrayBuffer.isView(t),n=Array.isArray(r)||ArrayBuffer.isView(r);if(e&&n&&t.length===r.length){for(var i=0;i<t.length;++i)if(t[i]!==r[i])return!1;return!0}return!1}function Gz(t,r){var e=t[r].bind(t);t[r]=function(){var i=arguments.length<=0?void 0:arguments[0];return i in t.state.cache&&t.state.enable?t.state.cache[i]:e.apply(void 0,arguments)},Object.defineProperty(t[r],"name",{value:"".concat(r,"-from-cache"),configurable:!1})}function nle(t,r,e){var n=t[r].bind(t);t[r]=function(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];var u=e.apply(void 0,[t.state._updateCache].concat(o)),c=u.valueChanged,h=u.oldValue;return c&&n.apply(void 0,o),h},Object.defineProperty(t[r],"name",{value:"".concat(r,"-to-cache"),configurable:!1})}function ile(t){var r=t.useProgram.bind(t);t.useProgram=function(n){t.state.program!==n&&(r(n),t.state.program=n)}}var ale=function(){function t(r){ce(this,t);var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.copyState,i=n===void 0?!1:n,a=e.log,o=a===void 0?function(){}:a;this.gl=r,this.program=null,this.stateStack=[],this.enable=!0,this.cache=i?ih(r):Object.assign({},u_),this.log=o,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return ve(t,[{key:"push",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.stateStack.push({})}},{key:"pop",value:function(){Fs(this.stateStack.length>0);var e=this.stateStack[this.stateStack.length-1];Ns(this.gl,e),this.stateStack.pop()}},{key:"_updateCache",value:function(e){var n=!1,i,a=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var o in e){Fs(o!==void 0);var s=e[o],u=this.cache[o];jz(s,u)||(n=!0,i=u,a&&!(o in a)&&(a[o]=u),this.cache[o]=s)}return{valueChanged:n,oldValue:i}}}]),t}();function Ex(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r.enable,n=e===void 0?!0:e,i=r.copyState;if(Fs(i!==void 0),!t.state){var a=globalThis.polyfillContext;a&&a(t),t.state=new ale(t,{copyState:i}),ile(t);for(var o in rO){var s=rO[o];nle(t,o,s)}Gz(t,"getParameter"),Gz(t,"isEnabled")}return t.state.enable=n,t}function aO(t){t.state||Ex(t,{copyState:!1}),t.state.push()}function Cx(t){Fs(t.state),t.state.pop()}function ole(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=sle(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function sle(t,r){if(t){if(typeof t=="string")return Vz(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Vz(t,r)}}function Vz(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function Ns(t,r){if(Fs($h(t),"setParameters requires a WebGL context"),!iO(r)){var e={};for(var n in r){var i=Number(n),a=zz[n];a&&(typeof a=="string"?e[a]=!0:a(t,r[n],i))}var o=t.state&&t.state.cache;if(o)for(var s in e){var u=Uz[s];u(t,r,o)}}}function ih(t,r){if(r=r||u_,typeof r=="number"){var e=r,n=nO[e];return n?n(t,e):t.getParameter(e)}var i=Array.isArray(r)?r:Object.keys(r),a={},o=ole(i),s;try{for(o.s();!(s=o.n()).done;){var u=s.value,c=nO[u];a[u]=c?c(t,Number(u)):t.getParameter(Number(u))}}catch(h){o.e(h)}finally{o.f()}return a}function Px(t){Ns(t,u_)}function Aa(t,r,e){if(iO(r))return e(t);var n=r.nocatch,i=n===void 0?!0:n;aO(t),Ns(t,r);var a;if(i)a=e(t),Cx(t);else try{a=e(t)}finally{Cx(t)}return a}function Cl(t){var r=t.luma;if(t.canvas&&r){var e=r.canvasSizeInfo,n="clientWidth"in e?e.clientWidth:t.canvas.clientWidth;return n?t.drawingBufferWidth/n:1}return 1}function Ig(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=Cl(t),i=t.drawingBufferWidth,a=t.drawingBufferHeight;return ule(r,n,i,a,e)}function qz(t){var r=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?r:1}function ule(t,r,e,n,i){var a=Hz(t[0],r,e),o=Wz(t[1],r,n,i),s=Hz(t[0]+1,r,e),u=s===e-1?s:s-1;s=Wz(t[1]+1,r,n,i);var c;return i?(s=s===0?s:s+1,c=o,o=s):c=s===n-1?s:s-1,{x:a,y:o,width:Math.max(u-a+1,1),height:Math.max(c-o+1,1)}}function Hz(t,r,e){var n=Math.min(Math.round(t*r),e-1);return n}function Wz(t,r,e,n){return n?Math.max(0,e-1-Math.round(t*r)):Math.min(Math.round(t*r),e-1)}var oO=cu(),lle=oO&&typeof document<"u",Xz={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function Rg(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Fs(oO,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},Xz,t);var r=t,e=r.width,n=r.height;function i(c){if(t.throwOnError)throw new Error(c);return console.error(c),null}t.onError=i;var a,o=t,s=o.canvas,u=fle({canvas:s,width:e,height:n,onError:i});return a=cle(u,t),a?(a=Qh(a,t),hle(a),a):null}function Qh(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||ple(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},r=Object.assign({},Xz,r);var e=r,n=e.manageState,i=e.debug;return n&&Ex(t,{copyState:!1,log:function(){for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];return Wr.log.apply(Wr,[1].concat(s))()}}),oO&&i&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,r),Wr.level=Math.max(Wr.level,1)):Wr.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function Yz(t){var r=t.getParameter(7936),e=t.getParameter(7937),n=t.getExtension("WEBGL_debug_renderer_info"),i=n&&t.getParameter(n.UNMASKED_VENDOR_WEBGL||7936),a=n&&t.getParameter(n.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||r,renderer:a||e,vendorMasked:r,rendererMasked:e,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function sO(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){var e=qz(r.useDevicePixels);dle(t,e,r);return}var n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in r&&"height"in r&&n.resize(r.width,r.height)}function cle(t,r){var e=r.onError,n=null,i=function(p){return n=p.statusMessage||n};t.addEventListener("webglcontextcreationerror",i,!1);var a=r.webgl1,o=a===void 0?!0:a,s=r.webgl2,u=s===void 0?!0:s,c=null;return u&&(c=c||t.getContext("webgl2",r),c=c||t.getContext("experimental-webgl2",r)),o&&(c=c||t.getContext("webgl",r),c=c||t.getContext("experimental-webgl",r)),t.removeEventListener("webglcontextcreationerror",i,!1),c?(r.onContextLost&&t.addEventListener("webglcontextlost",r.onContextLost,!1),r.onContextRestored&&t.addEventListener("webglcontextrestored",r.onContextRestored,!1),c):e("Failed to create ".concat(u&&!o?"WebGL2":"WebGL"," context: ").concat(n||"Unknown error"))}function fle(t){var r=t.canvas,e=t.width,n=e===void 0?800:e,i=t.height,a=i===void 0?600:i,o=t.onError,s;if(typeof r=="string"){var u=lle&&document.readyState==="complete";u||o("createGLContext called on canvas '".concat(r,"' before page was loaded")),s=document.getElementById(r)}else r?s=r:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",s.style.height=Number.isFinite(a)?"".concat(a,"px"):"100%",document.body.insertBefore(s,document.body.firstChild));return s}function hle(t){var r=En(t)?"WebGL2":"WebGL1",e=Yz(t),n=e?"(".concat(e.vendor,",").concat(e.renderer,")"):"",i=t.debug?" debug":"";Wr.info(1,"".concat(r).concat(i," context ").concat(n))()}function ple(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function dle(t,r,e){var n="width"in e?e.width:t.canvas.clientWidth,i="height"in e?e.height:t.canvas.clientHeight;(!n||!i)&&(Wr.log(1,"Canvas clientWidth/clientHeight is 0")(),r=1,n=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};var a=t.luma.canvasSizeInfo;if(a.clientWidth!==n||a.clientHeight!==i||a.devicePixelRatio!==r){var o=r,s=Math.floor(n*o),u=Math.floor(i*o);t.canvas.width=s,t.canvas.height=u,(t.drawingBufferWidth!==s||t.drawingBufferHeight!==u)&&(Wr.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/n,t.drawingBufferHeight/i),t.canvas.width=Math.floor(n*o),t.canvas.height=Math.floor(i*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:n,clientHeight:i,devicePixelRatio:r})}}at();vt();at();vt();et();at();vt();et();function l_(){var t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){var r=process.hrtime();t=r[0]*1e3+r[1]/1e6}else t=Date.now();return t}var Ox=function(){function t(r,e){ce(this,t),_(this,"name",void 0),_(this,"type",void 0),_(this,"sampleSize",1),_(this,"time",void 0),_(this,"count",void 0),_(this,"samples",void 0),_(this,"lastTiming",void 0),_(this,"lastSampleTime",void 0),_(this,"lastSampleCount",void 0),_(this,"_count",0),_(this,"_time",0),_(this,"_samples",0),_(this,"_startTime",0),_(this,"_timerPending",!1),this.name=r,this.type=e,this.reset()}return ve(t,[{key:"setSampleSize",value:function(e){return this.sampleSize=e,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(e){return this._count+=e,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(e){return this._count-=e,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=l_(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(l_()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),t}();var Tm=function(){function t(r){ce(this,t),_(this,"id",void 0),_(this,"stats",{}),this.id=r.id,this.stats={},this._initializeStats(r.stats),Object.seal(this)}return ve(t,[{key:"get",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}},{key:"size",get:function(){return Object.keys(this.stats).length}},{key:"reset",value:function(){for(var e in this.stats)this.stats[e].reset();return this}},{key:"forEach",value:function(e){for(var n in this.stats)e(this.stats[n])}},{key:"getTable",value:function(){var e={};return this.forEach(function(n){e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}},{key:"_initializeStats",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];n.forEach(function(i){return e._getOrCreate(i)})}},{key:"_getOrCreate",value:function(e){if(!e||!e.name)return null;var n=e.name,i=e.type;return this.stats[n]||(e instanceof Ox?this.stats[n]=e:this.stats[n]=new Ox(n,i)),this.stats[n]}}]),t}();var c_="8.5.21",mle="set luma.log.level=1 (or higher) to trace rendering",vle=function(){function t(){ce(this,t),this.stats=new Map}return ve(t,[{key:"get",value:function(e){return this.stats.has(e)||this.stats.set(e,new Tm({id:e})),this.stats.get(e)}}]),t}(),Nc=new vle;if(globalThis.luma&&globalThis.luma.VERSION!==c_)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(c_));globalThis.luma||(cu()&&Wr.log(1,"luma.gl ".concat(c_," - ").concat(mle))(),globalThis.luma=globalThis.luma||{VERSION:c_,version:c_,log:Wr,stats:Nc,globals:{modules:{},nodeIO:{}}});var O9e=globalThis.luma;function uO(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function lO(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}et();at();vt();Mn();at();vt();at();vt();function yr(t,r){if(!t)throw new Error(r||"luma.gl: assertion failed.")}function Mx(t,r){if(typeof r!="string")return r;var e=Number(r);if(!isNaN(e))return e;r=r.replace(/^.*\./,"");var n=t[r];return yr(n!==void 0,"Accessing undefined constant GL.".concat(r)),n}function zc(t,r){r=Number(r);for(var e in t)if(t[e]===r)return"GL.".concat(e);return String(r)}var cO={};function Sa(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";cO[t]=cO[t]||1;var r=cO[t]++;return"".concat(t,"-").concat(r)}function fO(t){return yr(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function ah(t){var r=!0;for(var e in t){r=!1;break}return r}function Ix(t,r,e,n){var i="See luma.gl ".concat(e," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),a=Object.getPrototypeOf(t);n.forEach(function(o){a.methodName||(a[o]=function(){throw Wr.removed("Calling removed method ".concat(r,".").concat(o,": "),i)(),new Error(o)})})}function gle(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Ale(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Ale(t,r){if(t){if(typeof t=="string")return Kz(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Kz(t,r)}}function Kz(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Lg="Resource subclass must define virtual methods",Ou=function(t){function r(e){ce(this,r);var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Jh(e);var i=n.id,a=n.userData,o=a===void 0?{}:a;this.gl=e,this.gl2=e,this.id=i||Sa(this[Symbol.toStringTag]),this.userData=o,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return ve(r,[{key:t,get:function(){return"Resource"}},{key:"toString",value:function(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}},{key:"handle",get:function(){return this._handle}},{key:"delete",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.deleteChildren,a=i===void 0?!1:i,o=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,o&&a&&o.filter(Boolean).forEach(function(s){return s.delete()}),this}},{key:"bind",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof n!="function")return this._bindHandle(n),this;var i;return this._bound?i=n():(this._bindHandle(this.handle),this._bound=!0,i=n(),this._bound=!1,this._bindHandle(null)),i}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};n=Mx(this.gl,n),yr(n);var a=this.constructor.PARAMETERS||{},o=a[n];if(o){var s=En(this.gl),u=(!("webgl2"in o)||s)&&(!("extension"in o)||this.gl.getExtension(o.extension));if(!u){var c=o.webgl1,h="webgl2"in o?o.webgl2:o.webgl1,p=s?h:c;return p}}return this._getParameter(n,i)}},{key:"getParameters",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.parameters,a=n.keys,o=this.constructor.PARAMETERS||{},s=En(this.gl),u={},c=i||Object.keys(o),h=gle(c),p;try{for(h.s();!(p=h.n()).done;){var v=p.value,x=o[v],E=x&&(!("webgl2"in x)||s)&&(!("extension"in x)||this.gl.getExtension(x.extension));if(E){var R=a?zc(this.gl,v):v;u[R]=this.getParameter(v,n),a&&x.type==="GLenum"&&(u[R]=zc(this.gl,u[R]))}}}catch(D){h.e(D)}finally{h.f()}return u}},{key:"setParameter",value:function(n,i){n=Mx(this.gl,n),yr(n);var a=this.constructor.PARAMETERS||{},o=a[n];if(o){var s=En(this.gl),u=(!("webgl2"in o)||s)&&(!("extension"in o)||this.gl.getExtension(o.extension));if(!u)throw new Error("Parameter not available on this platform");o.type==="GLenum"&&(i=Mx(i))}return this._setParameter(n,i),this}},{key:"setParameters",value:function(n){for(var i in n)this.setParameter(i,n[i]);return this}},{key:"stubRemovedMethods",value:function(n,i,a){return Ix(this,n,i,a)}},{key:"initialize",value:function(n){}},{key:"_createHandle",value:function(){throw new Error(Lg)}},{key:"_deleteHandle",value:function(){throw new Error(Lg)}},{key:"_bindHandle",value:function(n){throw new Error(Lg)}},{key:"_getOptsFromHandle",value:function(){throw new Error(Lg)}},{key:"_getParameter",value:function(n,i){throw new Error(Lg)}},{key:"_setParameter",value:function(n,i){throw new Error(Lg)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var n=this[Symbol.toStringTag],i=Nc.get("Resource Counts");i.get("Resources Created").incrementCount(),i.get("".concat(n,"s Created")).incrementCount(),i.get("".concat(n,"s Active")).incrementCount()}},{key:"_removeStats",value:function(){var n=this[Symbol.toStringTag],i=Nc.get("Resource Counts");i.get("".concat(n,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(n,i),this._trackAllocatedMemoryForContext(n,i,this.gl.canvas&&this.gl.canvas.id),this.byteLength=n}},{key:"_trackAllocatedMemoryForContext",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",o=Nc.get("Memory Usage".concat(a));o.get("GPU Memory").addCount(n),o.get("".concat(i," Memory")).addCount(n)}},{key:"_trackDeallocatedMemory",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(n),this._trackDeallocatedMemoryForContext(n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}},{key:"_trackDeallocatedMemoryForContext",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=Nc.get("Memory Usage".concat(i));a.get("GPU Memory").subtractCount(this.byteLength),a.get("".concat(n," Memory")).subtractCount(this.byteLength)}}]),r}(Symbol.toStringTag);at();vt();at();vt();var yle="Failed to deduce GL constant from typed array";function f_(t){var r=ArrayBuffer.isView(t)?t.constructor:t;switch(r){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(yle)}}function Qp(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r.clamped,n=e===void 0?!0:e;switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return n?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Zz(t){var r=t.data,e=t.width,n=t.height,i=t.bytesPerPixel,a=i===void 0?4:i,o=t.temp,s=e*a;o=o||new Uint8Array(s);for(var u=0;u<n/2;++u){var c=u*s,h=(n-u-1)*s;o.set(r.subarray(c,c+s)),r.copyWithin(c,h,h+s),r.set(o,h)}}function $z(t){for(var r=t.data,e=t.width,n=t.height,i=Math.round(e/2),a=Math.round(n/2),o=new Uint8Array(i*a*4),s=0;s<a;s++)for(var u=0;u<i;u++)for(var c=0;c<4;c++)o[(s*i+u)*4+c]=r[(s*2*e+u*2)*4+c];return{data:o,width:i,height:a}}function h_(t,r,e){var n=e.removedProps,i=n===void 0?{}:n,a=e.deprecatedProps,o=a===void 0?{}:a,s=e.replacedProps,u=s===void 0?{}:s;for(var c in i)if(c in r){var h=i[c],p=h?"".concat(t,".").concat(i[c]):"N/A";Wr.removed("".concat(t,".").concat(c),p)()}for(var v in o)if(v in r){var x=o[v];Wr.deprecated("".concat(t,".").concat(v),"".concat(t,".").concat(x))()}var E=null;for(var R in u)if(R in r){var D=u[R];Wr.deprecated("".concat(t,".").concat(R),"".concat(t,".").concat(D))(),E=E||Object.assign({},r),E[D]=r[R],delete E[R]}return E||r}var _le={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},ble={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},Pl=function(){function t(){var r=this;ce(this,t);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(function(a){return r._assign(a)}),Object.freeze(this)}return ve(t,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"BYTES_PER_ELEMENT",get:function(){return t.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return t.getBytesPerVertex(this)}},{key:"_assign",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=h_("Accessor",e,ble),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}],[{key:"getBytesPerElement",value:function(e){var n=Qp(e.type||5126);return n.BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(e){yr(e.size);var n=Qp(e.type||5126);return n.BYTES_PER_ELEMENT*e.size}},{key:"resolve",value:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Yp(t,[_le].concat(n))}}]),t}();function xle(t){var r=wle();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function wle(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Jz=10,Qz={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Tle={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Qz},Sle={removedProps:Qz},Jn=function(t,r){Ke(n,t);var e=xle(n);function n(i){var a;ce(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return a=e.call(this,i,o),a.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),a.target=o.target||(a.gl.webgl2?36662:34962),a.initialize(o),Object.seal(jt(a)),a}return ve(n,[{key:r,get:function(){return"Buffer"}},{key:"getElementCount",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Pl.getBytesPerElement(a))}},{key:"getVertexCount",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Pl.getBytesPerVertex(a))}},{key:"initialize",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(a)&&(a={data:a}),Number.isFinite(a)&&(a={byteLength:a}),a=h_("Buffer",a,Tle),this.usage=a.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},a,a.accessor)),a.data?this._setData(a.data,a.offset,a.byteLength):this._setByteLength(a.byteLength||0),this}},{key:"setProps",value:function(a){return a=h_("Buffer",a,Sle),"accessor"in a&&this.setAccessor(a.accessor),this}},{key:"setAccessor",value:function(a){return a=Object.assign({},a),delete a.buffer,this.accessor=new Pl(a),this}},{key:"reallocate",value:function(a){return a>this.byteLength?(this._setByteLength(a),!0):(this.bytesUsed=a,!1)}},{key:"setData",value:function(a){return this.initialize(a)}},{key:"subData",value:function(a){ArrayBuffer.isView(a)&&(a={data:a});var o=a,s=o.data,u=o.offset,c=u===void 0?0:u,h=o.srcOffset,p=h===void 0?0:h,v=a.byteLength||a.length;yr(s);var x=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(x,this.handle),p!==0||v!==void 0?(Ro(this.gl),this.gl.bufferSubData(this.target,c,s,p,v)):this.gl.bufferSubData(x,c,s),this.gl.bindBuffer(x,null),this.debugData=null,this._inferType(s),this}},{key:"copyData",value:function(a){var o=a.sourceBuffer,s=a.readOffset,u=s===void 0?0:s,c=a.writeOffset,h=c===void 0?0:c,p=a.size,v=this.gl;return Ro(v),v.bindBuffer(36662,o.handle),v.bindBuffer(36663,this.handle),v.copyBufferSubData(36662,36663,u,h,p),v.bindBuffer(36662,null),v.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=a.dstData,s=o===void 0?null:o,u=a.srcByteOffset,c=u===void 0?0:u,h=a.dstOffset,p=h===void 0?0:h,v=a.length,x=v===void 0?0:v;Ro(this.gl);var E=Qp(this.accessor.type||5126,{clamped:!1}),R=this._getAvailableElementCount(c),D=p,H,W;s?(W=s.length,H=W-D):(H=Math.min(R,x||R),W=D+H);var $=Math.min(R,H);return x=x||$,yr(x<=$),s=s||new E(W),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,c,s,p,x),this.gl.bindBuffer(36662,null),s}},{key:"bind",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=a.target,s=o===void 0?this.target:o,u=a.index,c=u===void 0?this.accessor&&this.accessor.index:u,h=a.offset,p=h===void 0?0:h,v=a.size;return s===35345||s===35982?v!==void 0?this.gl.bindBufferRange(s,c,this.handle,p,v):(yr(p===0),this.gl.bindBufferBase(s,c,this.handle)):this.gl.bindBuffer(s,this.handle),this}},{key:"unbind",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=a.target,s=o===void 0?this.target:o,u=a.index,c=u===void 0?this.accessor&&this.accessor.index:u,h=s===35345||s===35982;return h?this.gl.bindBufferBase(s,c,null):this.gl.bindBuffer(s,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(Jz,this.byteLength)}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_setData",value:function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a.byteLength+o;yr(ArrayBuffer.isView(a)),this._trackDeallocatedMemory();var u=this._getTarget();this.gl.bindBuffer(u,this.handle),this.gl.bufferData(u,s,this.usage),this.gl.bufferSubData(u,o,a),this.gl.bindBuffer(u,null),this.debugData=a.slice(0,Jz),this.bytesUsed=s,this._trackAllocatedMemory(s);var c=f_(a);return yr(c),this.setAccessor(new Pl(this.accessor,{type:c})),this}},{key:"_setByteLength",value:function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;yr(a>=0),this._trackDeallocatedMemory();var s=a;a===0&&(s=new Float32Array(0));var u=this._getTarget();return this.gl.bindBuffer(u,this.handle),this.gl.bufferData(u,s,o),this.gl.bindBuffer(u,null),this.usage=o,this.debugData=null,this.bytesUsed=a,this._trackAllocatedMemory(a),this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(a){var o=Qp(this.accessor.type||5126,{clamped:!1}),s=a/o.BYTES_PER_ELEMENT;return this.getElementCount()-s}},{key:"_inferType",value:function(a){this.accessor.type||this.setAccessor(new Pl(this.accessor,{type:f_(a)}))}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function(a){this.gl.bindBuffer(this.target,this.handle);var o=this.gl.getBufferParameter(this.target,a);return this.gl.bindBuffer(this.target,null),o}},{key:"type",get:function(){return Wr.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return Wr.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}},{key:"setByteLength",value:function(a){return Wr.deprecated("setByteLength","reallocate")(),this.reallocate(a)}},{key:"updateAccessor",value:function(a){return Wr.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Pl(this.accessor,a),this}}]),n}(Ou,Symbol.toStringTag);et();var gf,Ol,oh,Rx=(gf={},_(gf,6407,{dataFormat:6407,types:[5121,33635]}),_(gf,6408,{dataFormat:6408,types:[5121,32819,32820]}),_(gf,6406,{dataFormat:6406,types:[5121]}),_(gf,6409,{dataFormat:6409,types:[5121]}),_(gf,6410,{dataFormat:6410,types:[5121]}),_(gf,33326,{dataFormat:6403,types:[5126],gl2:!0}),_(gf,33328,{dataFormat:33319,types:[5126],gl2:!0}),_(gf,34837,{dataFormat:6407,types:[5126],gl2:!0}),_(gf,34836,{dataFormat:6408,types:[5126],gl2:!0}),gf),Lx=(Ol={},_(Ol,6403,1),_(Ol,36244,1),_(Ol,33319,2),_(Ol,33320,2),_(Ol,6407,3),_(Ol,36248,3),_(Ol,6408,4),_(Ol,36249,4),_(Ol,6402,1),_(Ol,34041,1),_(Ol,6406,1),_(Ol,6409,1),_(Ol,6410,2),Ol),kx=(oh={},_(oh,5126,4),_(oh,5125,4),_(oh,5124,4),_(oh,5123,2),_(oh,5122,2),_(oh,5131,2),_(oh,5120,1),_(oh,5121,1),oh);function e8(t,r){var e=Rx[r];if(!e)return!1;if(e.gl1===void 0&&e.gl2===void 0)return!0;var n=En(t)&&e.gl2||e.gl1;return typeof n=="string"?t.getExtension(n):n}function t8(t,r){var e=Rx[r];switch(e&&e.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}function Ele(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Cle(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Cle(t,r){if(t){if(typeof t=="string")return r8(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return r8(t,r)}}function r8(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function Ple(t){var r=Ole();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Ole(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Mle=[9729,9728],n8=globalThis.WebGLBuffer||function(){},fc=function(t,r){Ke(n,t);var e=Ple(n);function n(i,a){var o;ce(this,n);var s=a.id,u=s===void 0?Sa("texture"):s,c=a.handle,h=a.target;return o=e.call(this,i,{id:u,handle:c}),o.target=h,o.textureUnit=void 0,o.loaded=!1,o.width=void 0,o.height=void 0,o.depth=void 0,o.format=void 0,o.type=void 0,o.dataFormat=void 0,o.border=void 0,o.textureUnit=void 0,o.mipmaps=void 0,o}return ve(n,[{key:r,get:function(){return"Texture"}},{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var a=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=o.data;if(s instanceof Promise)return s.then(function(ot){return a.initialize(Object.assign({},o,{pixels:ot,data:ot}))}),this;var u=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement;if(u&&s.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,s.addEventListener("loadeddata",function(){return a.initialize(o)}),this;var c=o.pixels,h=c===void 0?null:c,p=o.format,v=p===void 0?6408:p,x=o.border,E=x===void 0?0:x,R=o.recreate,D=R===void 0?!1:R,H=o.parameters,W=H===void 0?{}:H,$=o.pixelStore,J=$===void 0?{}:$,B=o.textureUnit,se=B===void 0?void 0:B;s||(s=h);var V=o.width,X=o.height,I=o.dataFormat,O=o.type,U=o.compressed,re=U===void 0?!1:U,ee=o.mipmaps,pe=ee===void 0?!0:ee,je=o.depth,qe=je===void 0?0:je,We=this._deduceParameters({format:v,type:O,dataFormat:I,compressed:re,data:s,width:V,height:X});return V=We.width,X=We.height,re=We.compressed,I=We.dataFormat,O=We.type,this.width=V,this.height=X,this.depth=qe,this.format=v,this.type=O,this.dataFormat=I,this.border=E,this.textureUnit=se,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),pe&&this._isNPOT()&&(Wr.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),pe=!1,this._updateForNPOT(W)),this.mipmaps=pe,this.setImageData({data:s,width:V,height:X,depth:qe,format:v,type:O,dataFormat:I,border:E,mipmaps:pe,parameters:J,compressed:re}),pe&&this.generateMipmap(),this.setParameters(W),D&&(this.data=s),u&&(this._video={video:s,parameters:W,lastTime:s.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?s.currentTime:-1}),this}},{key:"update",value:function(){if(this._video){var a=this._video,o=a.video,s=a.parameters,u=a.lastTime;if(u===o.currentTime||o.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:o,parameters:s}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=o.currentTime}}},{key:"resize",value:function(a){var o=a.height,s=a.width,u=a.mipmaps,c=u===void 0?!1:u;return s!==this.width||o!==this.height?this.initialize({width:s,height:o,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:c}):this}},{key:"generateMipmap",value:function(){var a=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Wr.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Aa(this.gl,o,function(){a.gl.generateMipmap(a.target)}),this.gl.bindTexture(this.target,null),this)}},{key:"setImageData",value:function(a){this._trackDeallocatedMemory("Texture");var o=a.target,s=o===void 0?this.target:o,u=a.pixels,c=u===void 0?null:u,h=a.level,p=h===void 0?0:h,v=a.format,x=v===void 0?this.format:v,E=a.border,R=E===void 0?this.border:E,D=a.offset,H=D===void 0?0:D,W=a.parameters,$=W===void 0?{}:W,J=a.data,B=J===void 0?null:J,se=a.type,V=se===void 0?this.type:se,X=a.width,I=X===void 0?this.width:X,O=a.height,U=O===void 0?this.height:O,re=a.dataFormat,ee=re===void 0?this.dataFormat:re,pe=a.compressed,je=pe===void 0?!1:pe;B||(B=c);var qe=this._deduceParameters({format:x,type:V,dataFormat:ee,compressed:je,data:B,width:I,height:U});V=qe.type,ee=qe.dataFormat,je=qe.compressed,I=qe.width,U=qe.height;var We=this.gl;We.bindTexture(this.target,this.handle);var ot=null,gt=this._getDataType({data:B,compressed:je});B=gt.data,ot=gt.dataType;var Pt,Dt=0;if(Aa(this.gl,$,function(){switch(ot){case"null":We.texImage2D(s,p,x,I,U,R,ee,V,B);break;case"typed-array":We.texImage2D(s,p,x,I,U,R,ee,V,B,H);break;case"buffer":Pt=Ro(We),Pt.bindBuffer(35052,B.handle||B),Pt.texImage2D(s,p,x,I,U,R,ee,V,H),Pt.bindBuffer(35052,null);break;case"browser-object":En(We)?We.texImage2D(s,p,x,I,U,R,ee,V,B):We.texImage2D(s,p,x,ee,V,B);break;case"compressed":var Ut=Ele(B.entries()),Or;try{for(Ut.s();!(Or=Ut.n()).done;){var he=Ot(Or.value,2),xe=he[0],Ge=he[1];We.compressedTexImage2D(s,xe,Ge.format,Ge.width,Ge.height,R,Ge.data),Dt+=Ge.levelSize}}catch(bt){Ut.e(bt)}finally{Ut.f()}break;default:yr(!1,"Unknown image data type")}}),ot==="compressed")this._trackAllocatedMemory(Dt,"Texture");else if(B&&B.byteLength)this._trackAllocatedMemory(B.byteLength,"Texture");else{var nr=Lx[this.dataFormat]||4,Nt=kx[this.type]||1;this._trackAllocatedMemory(this.width*this.height*nr*Nt,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function(a){var o=this,s=a.target,u=s===void 0?this.target:s,c=a.pixels,h=c===void 0?null:c,p=a.data,v=p===void 0?null:p,x=a.x,E=x===void 0?0:x,R=a.y,D=R===void 0?0:R,H=a.width,W=H===void 0?this.width:H,$=a.height,J=$===void 0?this.height:$,B=a.level,se=B===void 0?0:B,V=a.format,X=V===void 0?this.format:V,I=a.type,O=I===void 0?this.type:I,U=a.dataFormat,re=U===void 0?this.dataFormat:U,ee=a.compressed,pe=ee===void 0?!1:ee,je=a.offset,qe=je===void 0?0:je,We=a.border,ot=We===void 0?this.border:We,gt=a.parameters,Pt=gt===void 0?{}:gt,Dt=this._deduceParameters({format:X,type:O,dataFormat:re,compressed:pe,data:v,width:W,height:J});if(O=Dt.type,re=Dt.dataFormat,pe=Dt.compressed,W=Dt.width,J=Dt.height,yr(this.depth===0,"texSubImage not supported for 3D textures"),v||(v=h),v&&v.data){var nr=v;v=nr.data,W=nr.shape[0],J=nr.shape[1]}v instanceof Jn&&(v=v.handle),this.gl.bindTexture(this.target,this.handle),Aa(this.gl,Pt,function(){if(pe)o.gl.compressedTexSubImage2D(u,se,E,D,W,J,X,v);else if(v===null)o.gl.texSubImage2D(u,se,E,D,W,J,re,O,null);else if(ArrayBuffer.isView(v))o.gl.texSubImage2D(u,se,E,D,W,J,re,O,v,qe);else if(v instanceof n8){var Nt=Ro(o.gl);Nt.bindBuffer(35052,v),Nt.texSubImage2D(u,se,E,D,W,J,re,O,qe),Nt.bindBuffer(35052,null)}else if(En(o.gl)){var Ut=Ro(o.gl);Ut.texSubImage2D(u,se,E,D,W,J,re,O,v)}else o.gl.texSubImage2D(u,se,E,D,re,O,v)}),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Wr.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit,o=this.gl;return a!==void 0&&(this.textureUnit=a,o.activeTexture(33984+a)),o.bindTexture(this.target,this.handle),a}},{key:"unbind",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit,o=this.gl;return a!==void 0&&(this.textureUnit=a,o.activeTexture(33984+a)),o.bindTexture(this.target,null),a}},{key:"_getDataType",value:function(a){var o=a.data,s=a.compressed,u=s===void 0?!1:s;return u?{data:o,dataType:"compressed"}:o===null?{data:o,dataType:"null"}:ArrayBuffer.isView(o)?{data:o,dataType:"typed-array"}:o instanceof Jn?{data:o.handle,dataType:"buffer"}:o instanceof n8?{data:o,dataType:"buffer"}:{data:o,dataType:"browser-object"}}},{key:"_deduceParameters",value:function(a){var o=a.format,s=a.data,u=a.width,c=a.height,h=a.dataFormat,p=a.type,v=a.compressed,x=Rx[o];h=h||x&&x.dataFormat,p=p||x&&x.types[0],v=v||x&&x.compressed;var E=this._deduceImageSize(s,u,c);return u=E.width,c=E.height,{dataFormat:h,type:p,compressed:v,width:u,height:c,format:o,data:s}}},{key:"_deduceImageSize",value:function(a,o,s){var u;return typeof ImageData<"u"&&a instanceof ImageData?u={width:a.width,height:a.height}:typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement?u={width:a.naturalWidth,height:a.naturalHeight}:typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement?u={width:a.width,height:a.height}:typeof ImageBitmap<"u"&&a instanceof ImageBitmap?u={width:a.width,height:a.height}:typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement?u={width:a.videoWidth,height:a.videoHeight}:a?u={width:o,height:s}:u={width:o>=0?o:1,height:s>=0?s:1},yr(u,"Could not deduced texture size"),yr(o===void 0||u.width===o,"Deduced texture width does not match supplied width"),yr(s===void 0||u.height===s,"Deduced texture height does not match supplied height"),u}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function(a){switch(a){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var o=this.gl.getTexParameter(this.target,a);return this.gl.bindTexture(this.target,null),o}}},{key:"_setParameter",value:function(a,o){switch(this.gl.bindTexture(this.target,this.handle),o=this._getNPOTParam(a,o),a){case 33082:case 33083:this.gl.texParameterf(this.handle,a,o);break;case 4096:case 4097:yr(!1);break;default:this.gl.texParameteri(this.target,a,o);break}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return En(this.gl)||!this.width||!this.height?!1:!fO(this.width)||!fO(this.height)}},{key:"_updateForNPOT",value:function(a){a[this.gl.TEXTURE_MIN_FILTER]===void 0&&(a[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),a[this.gl.TEXTURE_WRAP_S]===void 0&&(a[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),a[this.gl.TEXTURE_WRAP_T]===void 0&&(a[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(a,o){if(this._isNPOT())switch(a){case 10241:Mle.indexOf(o)===-1&&(o=9729);break;case 10242:case 10243:o!==33071&&(o=33071);break;default:break}return o}}],[{key:"isSupported",value:function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.format,u=o.linearFiltering,c=!0;return s&&(c=c&&e8(a,s),c=c&&(!u||t8(a,s))),c}}]),n}(Ou,Symbol.toStringTag);var Ile="";function i8(t,r){return yr(typeof t=="string"),t=Ile+t,new Promise(function(e,n){try{var i=new Image;i.onload=function(){return e(i)},i.onerror=function(){return n(new Error("Could not load image ".concat(t,".")))},i.crossOrigin=r&&r.crossOrigin||"anonymous",i.src=t}catch(a){n(a)}})}function Rle(t){var r=Lle();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Lle(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var la=function(t,r){Ke(n,t);var e=Rle(n);function n(i){var a;ce(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Jh(i),(o instanceof Promise||typeof o=="string")&&(o={data:o}),typeof o.data=="string"&&(o=Object.assign({},o,{data:i8(o.data)})),a=e.call(this,i,Object.assign({},o,{target:3553})),a.initialize(o),Object.seal(jt(a)),a}return ve(n,[{key:r,get:function(){return"Texture2D"}}],[{key:"isSupported",value:function(a,o){return fc.isSupported(a,o)}}]),n}(fc,Symbol.toStringTag);at();vt();var hO=en(On());function kle(t){var r=Ble();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Ble(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var pO=[34069,34070,34071,34072,34073,34074],Sm=function(t,r){Ke(n,t);var e=kle(n);function n(i){var a;ce(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Jh(i),a=e.call(this,i,Object.assign({},o,{target:34067})),a.initialize(o),Object.seal(jt(a)),a}return ve(n,[{key:r,get:function(){return"TextureCube"}},{key:"initialize",value:function(){var a=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=o.mipmaps,u=s===void 0?!0:s,c=o.parameters,h=c===void 0?{}:c;return this.opts=o,this.setCubeMapImageData(o).then(function(){a.loaded=!0,u&&a.generateMipmap(o),a.setParameters(h)}),this}},{key:"subImage",value:function(a){var o=a.face,s=a.data,u=a.x,c=u===void 0?0:u,h=a.y,p=h===void 0?0:h,v=a.mipmapLevel,x=v===void 0?0:v;return this._subImage({target:o,data:s,x:c,y:p,mipmapLevel:x})}},{key:"setCubeMapImageData",value:function(){var i=zt(hO.default.mark(function o(s){var u=this,c,h,p,v,x,E,R,D,H,W,$,J,B;return hO.default.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return c=s.width,h=s.height,p=s.pixels,v=s.data,x=s.border,E=x===void 0?0:x,R=s.format,D=R===void 0?6408:R,H=s.type,W=H===void 0?5121:H,$=this.gl,J=p||v,V.next=5,Promise.all(pO.map(function(X){var I=J[X];return Promise.all(Array.isArray(I)?I:[I])}));case 5:B=V.sent,this.bind(),pO.forEach(function(X,I){B[I].length>1&&u.opts.mipmaps!==!1&&Wr.warn("".concat(u.id," has mipmap and multiple LODs."))(),B[I].forEach(function(O,U){c&&h?$.texImage2D(X,U,D,c,h,E,D,W,O):$.texImage2D(X,U,D,D,W,O)})}),this.unbind();case 9:case"end":return V.stop()}},o,this)}));function a(o){return i.apply(this,arguments)}return a}()},{key:"setImageDataForFace",value:function(a){var o=this,s=a.face,u=a.width,c=a.height,h=a.pixels,p=a.data,v=a.border,x=v===void 0?0:v,E=a.format,R=E===void 0?6408:E,D=a.type,H=D===void 0?5121:D,W=this.gl,$=h||p;return this.bind(),$ instanceof Promise?$.then(function(J){return o.setImageDataForFace(Object.assign({},a,{face:s,data:J,pixels:J}))}):this.width||this.height?W.texImage2D(s,0,R,u,c,x,R,H,$):W.texImage2D(s,0,R,R,H,$),this}}]),n}(fc,Symbol.toStringTag);Sm.FACES=pO;at();vt();function Dle(t){var r=Fle();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Fle(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var kg=function(t,r){Ke(n,t);var e=Dle(n);function n(i){var a;ce(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ro(i),o=Object.assign({depth:1},o,{target:32879,unpackFlipY:!1}),a=e.call(this,i,o),a.initialize(o),Object.seal(jt(a)),a}return ve(n,[{key:r,get:function(){return"Texture3D"}},{key:"setImageData",value:function(a){var o=this,s=a.level,u=s===void 0?0:s,c=a.dataFormat,h=c===void 0?6408:c,p=a.width,v=a.height,x=a.depth,E=x===void 0?1:x,R=a.border,D=R===void 0?0:R,H=a.format,W=a.type,$=W===void 0?5121:W,J=a.offset,B=J===void 0?0:J,se=a.data,V=a.parameters,X=V===void 0?{}:V;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Aa(this.gl,X,function(){ArrayBuffer.isView(se)&&o.gl.texImage3D(o.target,u,h,p,v,E,D,H,$,se),se instanceof Jn&&(o.gl.bindBuffer(35052,se.handle),o.gl.texImage3D(o.target,u,h,p,v,E,D,H,$,B))}),se&&se.byteLength)this._trackAllocatedMemory(se.byteLength,"Texture");else{var I=Lx[this.dataFormat]||4,O=kx[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*I*O,"Texture")}return this.loaded=!0,this}}],[{key:"isSupported",value:function(a){return En(a)}}]),n}(fc,Symbol.toStringTag);et();Mn();at();vt();function dO(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=me(t),t!==null););return t}function Yt(t,r,e){return typeof Reflect<"u"&&Reflect.get?Yt=Reflect.get:Yt=function(i,a,o){var s=dO(i,a);if(s){var u=Object.getOwnPropertyDescriptor(s,a);return u.get?u.get.call(o):u.value}},Yt(t,r,e||t)}at();vt();et();var ji,Em="EXT_color_buffer_float",mO=(ji={},_(ji,33189,{bpp:2}),_(ji,33190,{gl2:!0,bpp:3}),_(ji,36012,{gl2:!0,bpp:4}),_(ji,36168,{bpp:1}),_(ji,34041,{bpp:4}),_(ji,35056,{gl2:!0,bpp:4}),_(ji,36013,{gl2:!0,bpp:5}),_(ji,32854,{bpp:2}),_(ji,36194,{bpp:2}),_(ji,32855,{bpp:2}),_(ji,33321,{gl2:!0,bpp:1}),_(ji,33330,{gl2:!0,bpp:1}),_(ji,33329,{gl2:!0,bpp:1}),_(ji,33332,{gl2:!0,bpp:2}),_(ji,33331,{gl2:!0,bpp:2}),_(ji,33334,{gl2:!0,bpp:4}),_(ji,33333,{gl2:!0,bpp:4}),_(ji,33323,{gl2:!0,bpp:2}),_(ji,33336,{gl2:!0,bpp:2}),_(ji,33335,{gl2:!0,bpp:2}),_(ji,33338,{gl2:!0,bpp:4}),_(ji,33337,{gl2:!0,bpp:4}),_(ji,33340,{gl2:!0,bpp:8}),_(ji,33339,{gl2:!0,bpp:8}),_(ji,32849,{gl2:!0,bpp:3}),_(ji,32856,{gl2:!0,bpp:4}),_(ji,32857,{gl2:!0,bpp:4}),_(ji,36220,{gl2:!0,bpp:4}),_(ji,36238,{gl2:!0,bpp:4}),_(ji,36975,{gl2:!0,bpp:4}),_(ji,36214,{gl2:!0,bpp:8}),_(ji,36232,{gl2:!0,bpp:8}),_(ji,36226,{gl2:!0,bpp:16}),_(ji,36208,{gl2:!0,bpp:16}),_(ji,33325,{gl2:Em,bpp:2}),_(ji,33327,{gl2:Em,bpp:4}),_(ji,34842,{gl2:Em,bpp:8}),_(ji,33326,{gl2:Em,bpp:4}),_(ji,33328,{gl2:Em,bpp:8}),_(ji,34836,{gl2:Em,bpp:16}),_(ji,35898,{gl2:Em,bpp:4}),ji);function Nle(t){var r=zle();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function zle(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ule(t,r,e){var n=e[r];if(!n)return!1;var i=En(t)&&n.gl2||n.gl1;return typeof i=="string"?t.getExtension(i):i}var hc=function(t,r){Ke(n,t);var e=Nle(n);function n(i){var a;ce(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return a=e.call(this,i,o),a.initialize(o),Object.seal(jt(a)),a}return ve(n,[{key:r,get:function(){return"Renderbuffer"}},{key:"initialize",value:function(a){var o=a.format,s=a.width,u=s===void 0?1:s,c=a.height,h=c===void 0?1:c,p=a.samples,v=p===void 0?0:p;return yr(o,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),v!==0&&En(this.gl)?this.gl.renderbufferStorageMultisample(36161,v,o,u,h):this.gl.renderbufferStorage(36161,o,u,h),this.format=o,this.width=u,this.height=h,this.samples=v,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*mO[this.format].bpp),this}},{key:"resize",value:function(a){var o=a.width,s=a.height;return o!==this.width||s!==this.height?this.initialize({width:o,height:s,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function(a){this.gl.bindRenderbuffer(36161,a)}},{key:"_syncHandle",value:function(a){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(a){this.gl.bindRenderbuffer(36161,this.handle);var o=this.gl.getRenderbufferParameter(36161,a);return o}}],[{key:"isSupported",value:function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null},s=o.format;return!s||Ule(a,s,mO)}},{key:"getSamplesForFormat",value:function(a,o){var s=o.format;return a.getInternalformatParameter(36161,s,32937)}}]),n}(Ou,Symbol.toStringTag);Mn();var jle=256,Gle=1024,Vle=16384,a8=6144,o8=6145,s8=6146,u8=34041,l8="clear: bad arguments";function sh(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r.framebuffer,n=e===void 0?null:e,i=r.color,a=i===void 0?null:i,o=r.depth,s=o===void 0?null:o,u=r.stencil,c=u===void 0?null:u,h={};n&&(h.framebuffer=n);var p=0;a&&(p|=Vle,a!==!0&&(h.clearColor=a)),s&&(p|=jle,s!==!0&&(h.clearDepth=s)),c&&(p|=Gle,s!==!0&&(h.clearStencil=s)),yr(p!==0,l8),Aa(t,h,function(){t.clear(p)})}function vO(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r.framebuffer,n=e===void 0?null:e,i=r.buffer,a=i===void 0?a8:i,o=r.drawBuffer,s=o===void 0?0:o,u=r.value,c=u===void 0?[0,0,0,0]:u;Ro(t),Aa(t,{framebuffer:n},function(){switch(a){case a8:switch(c.constructor){case Int32Array:t.clearBufferiv(a,s,c);break;case Uint32Array:t.clearBufferuiv(a,s,c);break;case Float32Array:default:t.clearBufferfv(a,s,c)}break;case o8:t.clearBufferfv(o8,0,[c]);break;case s8:t.clearBufferiv(s8,0,[c]);break;case u8:var h=Ot(c,2),p=h[0],v=h[1];t.clearBufferfi(u8,0,p,v);break;default:yr(!1,l8)}})}function gO(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return yr(!1),0}}function c8(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return yr(!1),0}}function ep(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r.sourceX,n=e===void 0?0:e,i=r.sourceY,a=i===void 0?0:i,o=r.sourceFormat,s=o===void 0?6408:o,u=r.sourceAttachment,c=u===void 0?36064:u,h=r.target,p=h===void 0?null:h,v=r.sourceWidth,x=r.sourceHeight,E=r.sourceType,R=AO(t),D=R.framebuffer,H=R.deleteFramebuffer;yr(D);var W=D.gl,$=D.handle,J=D.attachments;v=v||D.width,x=x||D.height,c===36064&&$===null&&(c=1028),yr(J[c]),E=E||J[c].type,p=Hle(p,E,s,v,x),E=E||f_(p);var B=W.bindFramebuffer(36160,$);return W.readPixels(n,a,v,x,s,E,p),W.bindFramebuffer(36160,B||null),H&&D.delete(),p}function tp(t,r){var e=r.sourceX,n=e===void 0?0:e,i=r.sourceY,a=i===void 0?0:i,o=r.sourceFormat,s=o===void 0?6408:o,u=r.target,c=u===void 0?null:u,h=r.targetByteOffset,p=h===void 0?0:h,v=r.sourceWidth,x=r.sourceHeight,E=r.sourceType,R=AO(t),D=R.framebuffer,H=R.deleteFramebuffer;yr(D),v=v||D.width,x=x||D.height;var W=Ro(D.gl);if(E=E||(c?c.type:5121),!c){var $=gO(s),J=c8(E),B=p+v*x*$*J;c=new Jn(W,{byteLength:B,accessor:{type:E,size:$}})}return c.bind({target:35051}),Aa(W,{framebuffer:D},function(){W.readPixels(n,a,v,x,s,E,p)}),c.unbind({target:35051}),H&&D.delete(),c}function Bx(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r.sourceAttachment,n=e===void 0?36064:e,i=r.targetMaxHeight,a=i===void 0?Number.MAX_SAFE_INTEGER:i,o=ep(t,{sourceAttachment:n}),s=t.width,u=t.height;u>a;){var c=$z({data:o,width:s,height:u});o=c.data,s=c.width,u=c.height}Zz({data:o,width:s,height:u});var h=document.createElement("canvas");h.width=s,h.height=u;var p=h.getContext("2d"),v=p.createImageData(s,u);return v.data.set(o),p.putImageData(v,0,0),h.toDataURL()}function Bg(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=e.sourceX,i=n===void 0?0:n,a=e.sourceY,o=a===void 0?0:a,s=e.targetMipmaplevel,u=s===void 0?0:s,c=e.targetInternalFormat,h=c===void 0?6408:c,p=e.targetX,v=e.targetY,x=e.targetZ,E=e.width,R=e.height,D=AO(t),H=D.framebuffer,W=D.deleteFramebuffer;yr(H);var $=H.gl,J=H.handle,B=typeof p<"u"||typeof v<"u"||typeof x<"u";p=p||0,v=v||0,x=x||0;var se=$.bindFramebuffer(36160,J);yr(r);var V=null;if(r instanceof fc&&(V=r,E=Number.isFinite(E)?E:V.width,R=Number.isFinite(R)?R:V.height,V.bind(0),r=V.target),!B)$.copyTexImage2D(r,u,h,i,o,E,R,0);else switch(r){case 3553:case 34067:$.copyTexSubImage2D(r,u,p,v,i,o,E,R);break;case 35866:case 32879:var X=Ro($);X.copyTexSubImage3D(r,u,p,v,x,i,o,E,R);break;default:}return V&&V.unbind(),$.bindFramebuffer(36160,se||null),W&&H.delete(),V}function AO(t){return t instanceof Ea?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:f8(t),deleteFramebuffer:!0}}function Hle(t,r,e,n,i){if(t)return t;r=r||5121;var a=Qp(r,{clamped:!1}),o=gO(e);return new a(n*i*o)}et();var Ko,ni={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function Wle(t){var r=new la(t,{format:6408,type:5126,dataFormat:6408}),e=new Ea(t,{id:"test-framebuffer",check:!1,attachments:_({},36064,r)}),n=e.getStatus();return r.delete(),e.delete(),n===36053}var yO=(Ko={},_(Ko,ni.WEBGL2,[!1,!0]),_(Ko,ni.VERTEX_ARRAY_OBJECT,["OES_vertex_array_object",!0]),_(Ko,ni.TIMER_QUERY,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),_(Ko,ni.INSTANCED_RENDERING,["ANGLE_instanced_arrays",!0]),_(Ko,ni.MULTIPLE_RENDER_TARGETS,["WEBGL_draw_buffers",!0]),_(Ko,ni.ELEMENT_INDEX_UINT32,["OES_element_index_uint",!0]),_(Ko,ni.BLEND_EQUATION_MINMAX,["EXT_blend_minmax",!0]),_(Ko,ni.FLOAT_BLEND,["EXT_float_blend"]),_(Ko,ni.COLOR_ENCODING_SRGB,["EXT_sRGB",!0]),_(Ko,ni.TEXTURE_DEPTH,["WEBGL_depth_texture",!0]),_(Ko,ni.TEXTURE_FLOAT,["OES_texture_float",!0]),_(Ko,ni.TEXTURE_HALF_FLOAT,["OES_texture_half_float",!0]),_(Ko,ni.TEXTURE_FILTER_LINEAR_FLOAT,["OES_texture_float_linear"]),_(Ko,ni.TEXTURE_FILTER_LINEAR_HALF_FLOAT,["OES_texture_half_float_linear"]),_(Ko,ni.TEXTURE_FILTER_ANISOTROPIC,["EXT_texture_filter_anisotropic"]),_(Ko,ni.COLOR_ATTACHMENT_RGBA32F,[Wle,"EXT_color_buffer_float"]),_(Ko,ni.COLOR_ATTACHMENT_FLOAT,[!1,"EXT_color_buffer_float"]),_(Ko,ni.COLOR_ATTACHMENT_HALF_FLOAT,["EXT_color_buffer_half_float"]),_(Ko,ni.GLSL_FRAG_DATA,["WEBGL_draw_buffers",!0]),_(Ko,ni.GLSL_FRAG_DEPTH,["EXT_frag_depth",!0]),_(Ko,ni.GLSL_DERIVATIVES,["OES_standard_derivatives",!0]),_(Ko,ni.GLSL_TEXTURE_LOD,["EXT_shader_texture_lod",!0]),Ko);function qle(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Xle(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Xle(t,r){if(t){if(typeof t=="string")return h8(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return h8(t,r)}}function h8(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Yle=2;function Af(t,r){return Mu(t,r)}function Mu(t,r){return r=Array.isArray(r)?r:[r],r.every(function(e){return p8(t,e)})}function Dx(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(var r in yO)t.luma.caps[r]===void 0&&(t.luma.caps[r]=p8(t,r));return t.luma.caps}function p8(t,r){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[r]===void 0&&(t.luma.caps[r]=Kle(t,r)),t.luma.caps[r]||Wr.log(Yle,"Feature: ".concat(r," not supported"))(),t.luma.caps[r]}function Kle(t,r){var e=yO[r];yr(e,r);var n,i=En(t)&&e[1]||e[0];if(typeof i=="function")n=i(t);else if(Array.isArray(i)){n=!0;var a=qle(i),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;n=n&&Boolean(t.getExtension(s))}}catch(u){a.e(u)}finally{a.f()}}else typeof i=="string"?n=Boolean(t.getExtension(i)):typeof i=="boolean"?n=i:yr(!1);return n}function d8(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Zle(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Zle(t,r){if(t){if(typeof t=="string")return m8(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return m8(t,r)}}function m8(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function $le(t){var r=Jle();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Jle(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var v8="Multiple render targets not supported",Ea=function(t,r){Ke(n,t);var e=$le(n);function n(i){var a;ce(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return a=e.call(this,i,o),a.width=null,a.height=null,a.attachments={},a.readBuffer=36064,a.drawBuffers=[36064],a.ownResources=[],a.initialize(o),Object.seal(jt(a)),a}return ve(n,[{key:r,get:function(){return"Framebuffer"}},{key:"MAX_COLOR_ATTACHMENTS",get:function(){var a=Ro(this.gl);return a.getParameter(a.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){var a=Ro(this.gl);return a.getParameter(a.MAX_DRAW_BUFFERS)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}},{key:"initialize",value:function(a){var o=a.width,s=o===void 0?1:o,u=a.height,c=u===void 0?1:u,h=a.attachments,p=h===void 0?null:h,v=a.color,x=v===void 0?!0:v,E=a.depth,R=E===void 0?!0:E,D=a.stencil,H=D===void 0?!1:D,W=a.check,$=W===void 0?!0:W,J=a.readBuffer,B=J===void 0?void 0:J,se=a.drawBuffers,V=se===void 0?void 0:se;if(yr(s>=0&&c>=0,"Width and height need to be integers"),this.width=s,this.height=c,p)for(var X in p){var I=p[X],O=Array.isArray(I)?I[0]:I;O.resize({width:s,height:c})}else p=this._createDefaultAttachments(x,R,H,s,c);this.update({clearAttachments:!0,attachments:p,readBuffer:B,drawBuffers:V}),p&&$&&this.checkStatus()}},{key:"delete",value:function(){var a=d8(this.ownResources),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;s.delete()}}catch(u){a.e(u)}finally{a.f()}return Yt(me(n.prototype),"delete",this).call(this),this}},{key:"update",value:function(a){var o=a.attachments,s=o===void 0?{}:o,u=a.readBuffer,c=a.drawBuffers,h=a.clearAttachments,p=h===void 0?!1:h,v=a.resizeAttachments,x=v===void 0?!0:v;this.attach(s,{clearAttachments:p,resizeAttachments:x});var E=this.gl,R=E.bindFramebuffer(36160,this.handle);return u&&this._setReadBuffer(u),c&&this._setDrawBuffers(c),E.bindFramebuffer(36160,R||null),this}},{key:"resize",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=a.width,s=a.height;if(this.handle===null)return yr(o===void 0&&s===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;o===void 0&&(o=this.gl.drawingBufferWidth),s===void 0&&(s=this.gl.drawingBufferHeight),o!==this.width&&s!==this.height&&Wr.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(o,"x").concat(s))();for(var u in this.attachments)this.attachments[u].resize({width:o,height:s});return this.width=o,this.height=s,this}},{key:"attach",value:function(a){var o=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=s.clearAttachments,c=u===void 0?!1:u,h=s.resizeAttachments,p=h===void 0?!0:h,v={};c&&Object.keys(this.attachments).forEach(function(X){v[X]=null}),Object.assign(v,a);var x=this.gl.bindFramebuffer(36160,this.handle);for(var E in v){yr(E!==void 0,"Misspelled framebuffer binding point?");var R=Number(E),D=v[R],H=D;if(!H)this._unattach(R);else if(H instanceof hc)this._attachRenderbuffer({attachment:R,renderbuffer:H});else if(Array.isArray(D)){var W=Ot(D,3),$=W[0],J=W[1],B=J===void 0?0:J,se=W[2],V=se===void 0?0:se;H=$,this._attachTexture({attachment:R,texture:$,layer:B,level:V})}else this._attachTexture({attachment:R,texture:H,layer:0,level:0});p&&H&&H.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,x||null),Object.assign(this.attachments,a),Object.keys(this.attachments).filter(function(X){return!o.attachments[X]}).forEach(function(X){delete o.attachments[X]})}},{key:"checkStatus",value:function(){var a=this.gl,o=this.getStatus();if(o!==36053)throw new Error(ece(o));return this}},{key:"getStatus",value:function(){var a=this.gl,o=a.bindFramebuffer(36160,this.handle),s=a.checkFramebufferStatus(36160);return a.bindFramebuffer(36160,o||null),s}},{key:"clear",value:function(){var a=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=o.color,u=o.depth,c=o.stencil,h=o.drawBuffers,p=h===void 0?[]:h,v=this.gl.bindFramebuffer(36160,this.handle);return(s||u||c)&&sh(this.gl,{color:s,depth:u,stencil:c}),p.forEach(function(x,E){vO(a.gl,{drawBuffer:E,value:x})}),this.gl.bindFramebuffer(36160,v||null),this}},{key:"readPixels",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Wr.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Wr.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Wr.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Wr.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Wr.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Wr.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function(a){var o=a.attachments,s=o===void 0?[]:o,u=a.x,c=u===void 0?0:u,h=a.y,p=h===void 0?0:h,v=a.width,x=a.height,E=Ro(this.gl),R=E.bindFramebuffer(36008,this.handle),D=c===0&&p===0&&v===void 0&&x===void 0;return D?E.invalidateFramebuffer(36008,s):E.invalidateFramebuffer(36008,s,c,p,v,x),E.bindFramebuffer(36008,R),this}},{key:"getAttachmentParameter",value:function(a,o,s){var u=this._getAttachmentParameterFallback(o);return u===null&&(this.gl.bindFramebuffer(36160,this.handle),u=this.gl.getFramebufferAttachmentParameter(36160,a,o),this.gl.bindFramebuffer(36160,null)),s&&u>1e3&&(u=zc(this.gl,u)),u}},{key:"getAttachmentParameters",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,o=arguments.length>1?arguments[1]:void 0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],u={},c=d8(s),h;try{for(c.s();!(h=c.n()).done;){var p=h.value,v=o?zc(this.gl,p):p;u[v]=this.getAttachmentParameter(a,p,o)}}catch(x){c.e(x)}finally{c.f()}return u}},{key:"getParameters",value:function(){for(var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,o=Object.keys(this.attachments),s={},u=0,c=o;u<c.length;u++){var h=c[u],p=Number(h),v=a?zc(this.gl,p):p;s[v]=this.getAttachmentParameters(p,a)}return s}},{key:"show",value:function(){return typeof window<"u"&&window.open(Bx(this),"luma-debug-texture"),this}},{key:"log",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(a>Wr.level||typeof window>"u")return this;o=o||"Framebuffer ".concat(this.id);var s=Bx(this,{targetMaxHeight:100});return Wr.image({logLevel:a,message:o,image:s},o)(),this}},{key:"bind",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=a.target,s=o===void 0?36160:o;return this.gl.bindFramebuffer(s,this.handle),this}},{key:"unbind",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=a.target,s=o===void 0?36160:o;return this.gl.bindFramebuffer(s,null),this}},{key:"_createDefaultAttachments",value:function(a,o,s,u,c){var h=null;if(a){var p;h=h||{},h[36064]=new la(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:u,height:c,mipmaps:!1,parameters:(p={},_(p,10241,9729),_(p,10240,9729),_(p,10242,33071),_(p,10243,33071),p)}),this.ownResources.push(h[36064])}return o&&s?(h=h||{},h[33306]=new hc(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:u,height:111}),this.ownResources.push(h[33306])):o?(h=h||{},h[36096]=new hc(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:u,height:c}),this.ownResources.push(h[36096])):s&&yr(!1),h}},{key:"_unattach",value:function(a){var o=this.attachments[a];o&&(o instanceof hc?this.gl.framebufferRenderbuffer(36160,a,36161,null):this.gl.framebufferTexture2D(36160,a,3553,null,0),delete this.attachments[a])}},{key:"_attachRenderbuffer",value:function(a){var o=a.attachment,s=o===void 0?36064:o,u=a.renderbuffer,c=this.gl;c.framebufferRenderbuffer(36160,s,36161,u.handle),this.attachments[s]=u}},{key:"_attachTexture",value:function(a){var o=a.attachment,s=o===void 0?36064:o,u=a.texture,c=a.layer,h=a.level,p=this.gl;switch(p.bindTexture(u.target,u.handle),u.target){case 35866:case 32879:var v=Ro(p);v.framebufferTextureLayer(36160,s,u.target,h,c);break;case 34067:var x=Qle(c);p.framebufferTexture2D(36160,s,x,u.handle,h);break;case 3553:p.framebufferTexture2D(36160,s,3553,u.handle,h);break;default:yr(!1,"Illegal texture type")}p.bindTexture(u.target,null),this.attachments[s]=u}},{key:"_setReadBuffer",value:function(a){var o=eO(this.gl);o?o.readBuffer(a):yr(a===36064||a===1029,v8),this.readBuffer=a}},{key:"_setDrawBuffers",value:function(a){var o=this.gl,s=Ro(o);if(s)s.drawBuffers(a);else{var u=o.getExtension("WEBGL_draw_buffers");u?u.drawBuffersWEBGL(a):yr(a.length===1&&(a[0]===36064||a[0]===1029),v8)}this.drawBuffers=a}},{key:"_getAttachmentParameterFallback",value:function(a){var o=Dx(this.gl);switch(a){case 36052:return o.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return o.WEBGL2?null:8;case 33297:return o.WEBGL2?null:5125;case 33296:return!o.WEBGL2&&!o.EXT_sRGB?9729:null;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(a){return this.gl.bindFramebuffer(36160,a)}}],[{key:"isSupported",value:function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.colorBufferFloat,u=o.colorBufferHalfFloat,c=!0;return s&&(c=Boolean(a.getExtension("EXT_color_buffer_float")||a.getExtension("WEBGL_color_buffer_float")||a.getExtension("OES_texture_float"))),u&&(c=c&&Boolean(a.getExtension("EXT_color_buffer_float")||a.getExtension("EXT_color_buffer_half_float"))),c}},{key:"getDefaultFramebuffer",value:function(a){return a.luma=a.luma||{},a.luma.defaultFramebuffer=a.luma.defaultFramebuffer||new n(a,{id:"default-framebuffer",handle:null,attachments:{}}),a.luma.defaultFramebuffer}}]),n}(Ou,Symbol.toStringTag);function Qle(t){return t<34069?t+34069:t}function ece(t){var r=Ea.STATUS||{};return r[t]||"Framebuffer error ".concat(t)}var tce=[36049,36048,33296,33298,33299,33300,33301,33302,33303];Ea.ATTACHMENT_PARAMETERS=tce;function Dg(t,r){yr(t instanceof la||t instanceof Sm||t instanceof kg);var e=t.constructor,n=t.gl,i=t.width,a=t.height,o=t.format,s=t.type,u=t.dataFormat,c=t.border,h=t.mipmaps,p=Object.assign({width:i,height:a,format:o,type:s,dataFormat:u,border:c,mipmaps:h},r);return new e(n,p)}function f8(t,r){var e=t.gl,n=t.width,i=t.height,a=t.id,o=new Ea(e,Object.assign({},r,{id:"framebuffer-for-".concat(a),width:n,height:i,attachments:_({},36064,t)}));return o}at();vt();function ed(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed",e=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=t.match(e);return n?n[1]:r}var rce=35632,nce=35633;function _O(t){switch(t){case rce:return"fragment";case nce:return"vertex";default:return"unknown type"}}function bO(t,r,e,n){for(var i=t.split(/\r?\n/),a={},o={},s=n||ed(r)||"(unnamed)",u="".concat(_O(e)," shader ").concat(s),c=0;c<i.length;c++){var h=i[c];if(!(h.length<=1)){var p=h.split(":"),v=p[0],x=parseInt(p[2],10);if(isNaN(x))throw new Error("GLSL compilation error in ".concat(u,": ").concat(t));v!=="WARNING"?a[x]=h:o[x]=h}}var E=ice(r);return{shaderName:u,errors:g8(a,E),warnings:g8(o,E)}}function g8(t,r){for(var e="",n=0;n<r.length;n++){var i=r[n];if(!(!t[n+3]&&!t[n+2]&&!t[n+1])&&(e+="".concat(i,`
`),t[n+1])){var a=t[n+1],o=a.split(":",3),s=o[0],u=parseInt(o[1],10)||0,c=a.substring(o.join(":").length+1).trim();e+=A8("^^^ ".concat(s,": ").concat(c,`

`),u)}}return e}function ice(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ",n=t.split(/\r?\n/),i=String(n.length+r-1).length;return n.map(function(a,o){var s=String(o+r),u=s.length,c=A8(s,i-u);return c+e+a})}function A8(t,r){for(var e="",n=0;n<r;++n)e+=" ";return"".concat(e).concat(t)}function Fg(t){var r=100,e=t.match(/[^\s]+/g);if(e.length>=2&&e[0]==="#version"){var n=parseInt(e[1],10);Number.isFinite(n)&&(r=n)}return r}function xO(t){var r=ace();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function ace(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var oce="Shader: GLSL source code must be a JavaScript string",y8=function(t,r){Ke(n,t);var e=xO(n);function n(i,a){var o;ce(this,n),Jh(i),yr(typeof a.source=="string",oce);var s=ed(a.source,null)||a.id||Sa("unnamed ".concat(n.getTypeName(a.shaderType)));return o=e.call(this,i,{id:s}),o.shaderType=a.shaderType,o.source=a.source,o.initialize(a),o}return ve(n,[{key:r,get:function(){return"Shader"}},{key:"initialize",value:function(a){var o=a.source,s=ed(o,null);s&&(this.id=Sa(s)),this._compile(o)}},{key:"getParameter",value:function(a){return this.gl.getShaderParameter(this.handle,a)}},{key:"toString",value:function(){return"".concat(n.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return ed(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var a=this.gl.getExtension("WEBGL_debug_shaders");return a?a.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}},{key:"_compile",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;a.startsWith("#version ")||(a=`#version 100
`.concat(a)),this.source=a,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);var o=this.getParameter(35713);if(!o){var s=this.gl.getShaderInfoLog(this.handle),u=bO(s,this.source,this.shaderType,this.id),c=u.shaderName,h=u.errors,p=u.warnings;throw Wr.error("GLSL compilation errors in ".concat(c,`
`).concat(h))(),Wr.warn("GLSL compilation warnings in ".concat(c,`
`).concat(p))(),new Error("GLSL compilation errors in ".concat(c))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}],[{key:"getTypeName",value:function(a){switch(a){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return yr(!1),"unknown"}}}]),n}(Ou,Symbol.toStringTag),p_=function(t,r){Ke(n,t);var e=xO(n);function n(i,a){return ce(this,n),typeof a=="string"&&(a={source:a}),e.call(this,i,Object.assign({},a,{shaderType:35633}))}return ve(n,[{key:r,get:function(){return"VertexShader"}},{key:"_createHandle",value:function(){return this.gl.createShader(35633)}}]),n}(y8,Symbol.toStringTag),d_=function(t,r){Ke(n,t);var e=xO(n);function n(i,a){return ce(this,n),typeof a=="string"&&(a={source:a}),e.call(this,i,Object.assign({},a,{shaderType:35632}))}return ve(n,[{key:r,get:function(){return"FragmentShader"}},{key:"_createHandle",value:function(){return this.gl.createShader(35632)}}]),n}(y8,Symbol.toStringTag);at();vt();et();var Ui,sce=(Ui={},_(Ui,5126,jo.bind(null,"uniform1fv",pc,1,sl)),_(Ui,35664,jo.bind(null,"uniform2fv",pc,2,sl)),_(Ui,35665,jo.bind(null,"uniform3fv",pc,3,sl)),_(Ui,35666,jo.bind(null,"uniform4fv",pc,4,sl)),_(Ui,5124,jo.bind(null,"uniform1iv",td,1,sl)),_(Ui,35667,jo.bind(null,"uniform2iv",td,2,sl)),_(Ui,35668,jo.bind(null,"uniform3iv",td,3,sl)),_(Ui,35669,jo.bind(null,"uniform4iv",td,4,sl)),_(Ui,35670,jo.bind(null,"uniform1iv",td,1,sl)),_(Ui,35671,jo.bind(null,"uniform2iv",td,2,sl)),_(Ui,35672,jo.bind(null,"uniform3iv",td,3,sl)),_(Ui,35673,jo.bind(null,"uniform4iv",td,4,sl)),_(Ui,35674,jo.bind(null,"uniformMatrix2fv",pc,4,rp)),_(Ui,35675,jo.bind(null,"uniformMatrix3fv",pc,9,rp)),_(Ui,35676,jo.bind(null,"uniformMatrix4fv",pc,16,rp)),_(Ui,35678,Zu),_(Ui,35680,Zu),_(Ui,5125,jo.bind(null,"uniform1uiv",Fx,1,sl)),_(Ui,36294,jo.bind(null,"uniform2uiv",Fx,2,sl)),_(Ui,36295,jo.bind(null,"uniform3uiv",Fx,3,sl)),_(Ui,36296,jo.bind(null,"uniform4uiv",Fx,4,sl)),_(Ui,35685,jo.bind(null,"uniformMatrix2x3fv",pc,6,rp)),_(Ui,35686,jo.bind(null,"uniformMatrix2x4fv",pc,8,rp)),_(Ui,35687,jo.bind(null,"uniformMatrix3x2fv",pc,6,rp)),_(Ui,35688,jo.bind(null,"uniformMatrix3x4fv",pc,12,rp)),_(Ui,35689,jo.bind(null,"uniformMatrix4x2fv",pc,8,rp)),_(Ui,35690,jo.bind(null,"uniformMatrix4x3fv",pc,12,rp)),_(Ui,35678,Zu),_(Ui,35680,Zu),_(Ui,35679,Zu),_(Ui,35682,Zu),_(Ui,36289,Zu),_(Ui,36292,Zu),_(Ui,36293,Zu),_(Ui,36298,Zu),_(Ui,36299,Zu),_(Ui,36300,Zu),_(Ui,36303,Zu),_(Ui,36306,Zu),_(Ui,36307,Zu),_(Ui,36308,Zu),_(Ui,36311,Zu),Ui),uce={},lce={},cce={},_8=[0];function wO(t,r,e,n){r===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(_8[0]=t,t=_8);var i=t.length;if(i%r&&Wr.warn("Uniform size should be multiples of ".concat(r),t)(),t instanceof e)return t;var a=n[i];a||(a=new e(i),n[i]=a);for(var o=0;o<i;o++)a[o]=t[o];return a}function pc(t,r){return wO(t,r,Float32Array,uce)}function td(t,r){return wO(t,r,Int32Array,lce)}function Fx(t,r){return wO(t,r,Uint32Array,cce)}function TO(t,r,e){var n=sce[e.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(e.type));return n().bind(null,t,r)}function b8(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};var r=/([^[]*)(\[[0-9]+\])?/,e=t.match(r);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function x8(t,r,e){for(var n in t){var i=t[n],a=!e||Boolean(e[n]);if(a&&!fce(i))throw r=r?"".concat(r," "):"",console.error("".concat(r," Bad uniform ").concat(n),i),new Error("".concat(r," Bad uniform ").concat(n))}return!0}function fce(t){return Array.isArray(t)||ArrayBuffer.isView(t)?hce(t):isFinite(t)||t===!0||t===!1||t instanceof fc||t instanceof hc?!0:t instanceof Ea?Boolean(t.texture):!1}function w8(t,r,e){if(Array.isArray(e)||ArrayBuffer.isView(e))if(t[r])for(var n=t[r],i=0,a=e.length;i<a;++i)n[i]=e[i];else t[r]=e.slice();else t[r]=e}function hce(t){if(t.length===0)return!1;for(var r=Math.min(t.length,16),e=0;e<r;++e)if(!Number.isFinite(t[e]))return!1;return!0}function Zu(){var t=null;return function(r,e,n){var i=t!==n;return i&&(r.uniform1i(e,n),t=n),i}}function jo(t,r,e,n){var i=null,a=null;return function(o,s,u){var c=r(u,e),h=c.length,p=!1;if(i===null)i=new Float32Array(h),a=h,p=!0;else{yr(a===h,"Uniform length cannot change.");for(var v=0;v<h;++v)if(c[v]!==i[v]){p=!0;break}}return p&&(n(o,t,s,c),i.set(c)),p}}function sl(t,r,e,n){t[r](e,n)}function rp(t,r,e,n){t[r](e,!1,n)}at();vt();Mn();et();var Eo,pce=5120,dce=5121,mce=5122,vce=5123,T8=0,Nx=1,gce=2,Ace=3,zx=4,yce=5,_ce=6,fu=5126,bce=35664,xce=35665,wce=35666,m_=5124,Tce=35667,Sce=35668,Ece=35669,v_=5125,Cce=36294,Pce=36295,Oce=36296,Mce=35670,Ice=35671,Rce=35672,Lce=35673,kce=35674,Bce=35675,Dce=35676,Fce=35685,Nce=35686,zce=35687,Uce=35688,jce=35689,Gce=35690,SO=(Eo={},_(Eo,fu,[fu,1,"float"]),_(Eo,bce,[fu,2,"vec2"]),_(Eo,xce,[fu,3,"vec3"]),_(Eo,wce,[fu,4,"vec4"]),_(Eo,m_,[m_,1,"int"]),_(Eo,Tce,[m_,2,"ivec2"]),_(Eo,Sce,[m_,3,"ivec3"]),_(Eo,Ece,[m_,4,"ivec4"]),_(Eo,v_,[v_,1,"uint"]),_(Eo,Cce,[v_,2,"uvec2"]),_(Eo,Pce,[v_,3,"uvec3"]),_(Eo,Oce,[v_,4,"uvec4"]),_(Eo,Mce,[fu,1,"bool"]),_(Eo,Ice,[fu,2,"bvec2"]),_(Eo,Rce,[fu,3,"bvec3"]),_(Eo,Lce,[fu,4,"bvec4"]),_(Eo,kce,[fu,8,"mat2"]),_(Eo,Fce,[fu,8,"mat2x3"]),_(Eo,Nce,[fu,8,"mat2x4"]),_(Eo,Bce,[fu,12,"mat3"]),_(Eo,zce,[fu,12,"mat3x2"]),_(Eo,Uce,[fu,12,"mat3x4"]),_(Eo,Dce,[fu,16,"mat4"]),_(Eo,jce,[fu,16,"mat4x2"]),_(Eo,Gce,[fu,16,"mat4x3"]),Eo);function S8(t){switch(t){case T8:return T8;case Nx:return Nx;case Ace:return Nx;case gce:return Nx;case zx:return zx;case yce:return zx;case _ce:return zx;default:return yr(!1),0}}function EO(t){var r=SO[t];if(!r)return null;var e=Ot(r,2),n=e[0],i=e[1];return{type:n,components:i}}function Ux(t,r){switch(t){case pce:case dce:case mce:case vce:t=fu;break;default:}for(var e in SO){var n=Ot(SO[e],3),i=n[0],a=n[1],o=n[2];if(i===t&&a===r)return{glType:e,name:o}}return null}var E8=function(){function t(r){ce(this,t),this.id=r.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(r),this._readVaryingsFromProgram(r)}return ve(t,[{key:"getAttributeInfo",value:function(e){var n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}},{key:"getAttributeLocation",value:function(e){var n=this.getAttributeInfo(e);return n?n.location:-1}},{key:"getAttributeAccessor",value:function(e){var n=this.getAttributeInfo(e);return n?n.accessor:null}},{key:"getVaryingInfo",value:function(e){var n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}},{key:"getVaryingIndex",value:function(e){var n=this.getVaryingInfo();return n?n.location:-1}},{key:"getVaryingAccessor",value:function(e){var n=this.getVaryingInfo();return n?n.accessor:null}},{key:"_readAttributesFromProgram",value:function(e){for(var n=e.gl,i=n.getProgramParameter(e.handle,35721),a=0;a<i;a++){var o=n.getActiveAttrib(e.handle,a),s=o.name,u=o.type,c=o.size,h=n.getAttribLocation(e.handle,s);h>=0&&this._addAttribute(h,s,u,c)}this.attributeInfos.sort(function(p,v){return p.location-v.location})}},{key:"_readVaryingsFromProgram",value:function(e){var n=e.gl;if(En(n)){for(var i=n.getProgramParameter(e.handle,35971),a=0;a<i;a++){var o=n.getTransformFeedbackVarying(e.handle,a),s=o.name,u=o.type,c=o.size;this._addVarying(a,s,u,c)}this.varyingInfos.sort(function(h,p){return h.location-p.location})}}},{key:"_addAttribute",value:function(e,n,i,a){var o=EO(i),s=o.type,u=o.components,c={type:s,size:a*u};this._inferProperties(e,n,c);var h={location:e,name:n,accessor:new Pl(c)};this.attributeInfos.push(h),this.attributeInfosByLocation[e]=h,this.attributeInfosByName[h.name]=h}},{key:"_inferProperties",value:function(e,n,i){/instance/i.test(n)&&(i.divisor=1)}},{key:"_addVarying",value:function(e,n,i,a){var o=EO(i),s=o.type,u=o.components,c=new Pl({type:s,size:a*u}),h={location:e,name:n,accessor:c};this.varyingInfos.push(h),this.varyingInfosByName[h.name]=h}}]),t}();function Vce(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Hce(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Hce(t,r){if(t){if(typeof t=="string")return C8(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return C8(t,r)}}function C8(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function Wce(t){var r=qce();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function qce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var P8=4,Xce=35981,Yce=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],rd=function(t,r){Ke(n,t);var e=Wce(n);function n(i){var a;ce(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return a=e.call(this,i,o),a.stubRemovedMethods("Program","v6.0",Yce),a._isCached=!1,a.initialize(o),Object.seal(jt(a)),a._setId(o.id),a}return ve(n,[{key:r,get:function(){return"Program"}},{key:"initialize",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=a.hash,s=a.vs,u=a.fs,c=a.varyings,h=a.bufferMode,p=h===void 0?Xce:h;return this.hash=o||"",this.vs=typeof s=="string"?new p_(this.gl,{id:"".concat(a.id,"-vs"),source:s}):s,this.fs=typeof u=="string"?new d_(this.gl,{id:"".concat(a.id,"-fs"),source:u}):u,yr(this.vs instanceof p_),yr(this.fs instanceof d_),this.uniforms={},this._textureUniforms={},c&&c.length>0&&(Ro(this.gl),this.varyings=c,this.gl2.transformFeedbackVaryings(this.handle,c,p)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new E8(this),this.setProps(a)}},{key:"delete",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:Yt(me(n.prototype),"delete",this).call(this,a)}},{key:"setProps",value:function(a){return"uniforms"in a&&this.setUniforms(a.uniforms),this}},{key:"draw",value:function(a){var o=this,s=a.logPriority,u=a.drawMode,c=u===void 0?4:u,h=a.vertexCount,p=a.offset,v=p===void 0?0:p,x=a.start,E=a.end,R=a.isIndexed,D=R===void 0?!1:R,H=a.indexType,W=H===void 0?5123:H,$=a.instanceCount,J=$===void 0?0:$,B=a.isInstanced,se=B===void 0?J>0:B,V=a.vertexArray,X=V===void 0?null:V,I=a.transformFeedback,O=a.framebuffer,U=a.parameters,re=U===void 0?{}:U,ee=a.uniforms,pe=a.samplers;if((ee||pe)&&(Wr.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(ee||{})),Wr.priority>=s){var je=O?O.id:"default",qe="mode=".concat(zc(this.gl,c)," verts=").concat(h," ")+"instances=".concat(J," indexType=").concat(zc(this.gl,W)," ")+"isInstanced=".concat(se," isIndexed=").concat(D," ")+"Framebuffer=".concat(je);Wr.log(s,qe)()}return yr(X),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||h===0||se&&J===0?!1:(X.bindForDraw(h,J,function(){if(O!==void 0&&(re=Object.assign({},re,{framebuffer:O})),I){var We=S8(c);I.begin(We)}o._bindTextures(),Aa(o.gl,re,function(){D&&se?o.gl2.drawElementsInstanced(c,h,W,v,J):D&&En(o.gl)&&!isNaN(x)&&!isNaN(E)?o.gl2.drawRangeElements(c,x,E,h,W,v):D?o.gl.drawElements(c,h,W,v):se?o.gl2.drawArraysInstanced(c,v,h,J):o.gl.drawArrays(c,v,h)}),I&&I.end()}),!0)}},{key:"setUniforms",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Wr.priority>=2&&x8(a,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(var o in a){var s=a[o],u=this._uniformSetters[o];if(u){var c=s,h=!1;if(c instanceof Ea&&(c=c.texture),c instanceof fc)if(h=this.uniforms[o]!==s,h){u.textureIndex===void 0&&(u.textureIndex=this._textureIndexCounter++);var p=c,v=u.textureIndex;p.bind(v),c=v,this._textureUniforms[o]=p}else c=u.textureIndex;else this._textureUniforms[o]&&delete this._textureUniforms[o];(u(c)||h)&&w8(this.uniforms,o,s)}}return this}},{key:"_areTexturesRenderable",value:function(){var a=!0;for(var o in this._textureUniforms){var s=this._textureUniforms[o];s.update(),a=a&&s.loaded}return a}},{key:"_bindTextures",value:function(){for(var a in this._textureUniforms){var o=this._uniformSetters[a].textureIndex;this._textureUniforms[a].bind(o)}}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(a){var o=this.gl.getAttachedShaders(a),s={},u=Vce(o),c;try{for(u.s();!(c=u.n()).done;){var h=c.value,p=this.gl.getShaderParameter(this.handle,35663);switch(p){case 35633:s.vs=new p_({handle:h});break;case 35632:s.fs=new d_({handle:h});break;default:}}}catch(v){u.e(v)}finally{u.f()}return s}},{key:"_getParameter",value:function(a){return this.gl.getProgramParameter(this.handle,a)}},{key:"_setId",value:function(a){if(!a){var o=this._getName();this.id=Sa(o)}}},{key:"_getName",value:function(){var a=this.vs.getName()||this.fs.getName();return a=a.replace(/shader/i,""),a=a?"".concat(a,"-program"):"program",a}},{key:"_compileAndLink",value:function(){var a=this.gl;if(a.attachShader(this.handle,this.vs.handle),a.attachShader(this.handle,this.fs.handle),Wr.time(P8,"linkProgram for ".concat(this._getName()))(),a.linkProgram(this.handle),Wr.timeEnd(P8,"linkProgram for ".concat(this._getName()))(),a.debug||Wr.level>0){var o=a.getProgramParameter(this.handle,35714);if(!o)throw new Error("Error linking: ".concat(a.getProgramInfoLog(this.handle)));a.validateProgram(this.handle);var s=a.getProgramParameter(this.handle,35715);if(!s)throw new Error("Error validating: ".concat(a.getProgramInfoLog(this.handle)))}}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var a=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var o=0;o<this._uniformCount;o++){var s=this.gl.getActiveUniform(this.handle,o),u=b8(s.name),c=u.name,h=a.getUniformLocation(this.handle,c);if(this._uniformSetters[c]=TO(a,h,s),s.size>1)for(var p=0;p<s.size;p++)h=a.getUniformLocation(this.handle,"".concat(c,"[").concat(p,"]")),this._uniformSetters["".concat(c,"[").concat(p,"]")]=TO(a,h,s)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function(a,o){return this.gl2.getActiveUniforms(this.handle,a,o)}},{key:"getUniformBlockIndex",value:function(a){return this.gl2.getUniformBlockIndex(this.handle,a)}},{key:"getActiveUniformBlockParameter",value:function(a,o){return this.gl2.getActiveUniformBlockParameter(this.handle,a,o)}},{key:"uniformBlockBinding",value:function(a,o){this.gl2.uniformBlockBinding(this.handle,a,o)}}]),n}(Ou,Symbol.toStringTag);at();vt();function Kce(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Zce(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Zce(t,r){if(t){if(typeof t=="string")return O8(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return O8(t,r)}}function O8(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function $ce(t){var r=Jce();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Jce(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Qce=34918,efe=34919,tfe=35007,rfe=36795,nfe=35976,ife=35887,afe=36202,jx=function(t,r){Ke(n,t);var e=$ce(n);function n(i){var a;ce(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return a=e.call(this,i,o),a.target=null,a._queryPending=!1,a._pollingPromise=null,Object.seal(jt(a)),a}return ve(n,[{key:r,get:function(){return"Query"}},{key:"beginTimeElapsedQuery",value:function(){return this.begin(tfe)}},{key:"beginOcclusionQuery",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=a.conservative,s=o===void 0?!1:o;return this.begin(s?afe:ife)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(nfe)}},{key:"begin",value:function(a){return this._queryPending?this:(this.target=a,this.gl2.beginQuery(this.target,this.handle),this)}},{key:"end",value:function(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}},{key:"isResultAvailable",value:function(){if(!this._queryPending)return!1;var a=this.gl2.getQueryParameter(this.handle,efe);return a&&(this._queryPending=!1),a}},{key:"isTimerDisjoint",value:function(){return this.gl2.getParameter(rfe)}},{key:"getResult",value:function(){return this.gl2.getQueryParameter(this.handle,Qce)}},{key:"getTimerMilliseconds",value:function(){return this.getResult()/1e6}},{key:"createPoll",value:function(){var a=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;var s=0;return this._pollingPromise=new Promise(function(u,c){var h=function p(){a.isResultAvailable()?(u(a.getResult()),a._pollingPromise=null):s++>o?(c("Timed out"),a._pollingPromise=null):requestAnimationFrame(p)};requestAnimationFrame(h)}),this._pollingPromise}},{key:"_createHandle",value:function(){return n.isSupported(this.gl)?this.gl2.createQuery():null}},{key:"_deleteHandle",value:function(){this.gl2.deleteQuery(this.handle)}}],[{key:"isSupported",value:function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=En(a),u=Mu(a,ni.TIMER_QUERY),c=s||u,h=Kce(o),p;try{for(h.s();!(p=h.n()).done;){var v=p.value;switch(v){case"queries":c=c&&s;break;case"timers":c=c&&u;break;default:yr(!1)}}}catch(x){h.e(x)}finally{h.f()}return c}}]),n}(Ou,Symbol.toStringTag);at();vt();function ofe(t){var r=sfe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function sfe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var nd=function(t,r){Ke(n,t);var e=ofe(n);function n(i){var a;ce(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ro(i),a=e.call(this,i,o),a.initialize(o),a.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(jt(a)),a}return ve(n,[{key:r,get:function(){return"TransformFeedback"}},{key:"initialize",value:function(){var a=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,ah(this.buffers)||this.bind(function(){return a._unbindBuffers()}),this.setProps(o),this}},{key:"setProps",value:function(a){"program"in a&&(this.configuration=a.program&&a.program.configuration),"configuration"in a&&(this.configuration=a.configuration),"bindOnUse"in a&&(a=a.bindOnUse),"buffers"in a&&this.setBuffers(a.buffers)}},{key:"setBuffers",value:function(){var a=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(function(){for(var s in o)a.setBuffer(s,o[s])}),this}},{key:"setBuffer",value:function(a,o){var s=this._getVaryingIndex(a),u=this._getBufferParams(o),c=u.buffer,h=u.byteSize,p=u.byteOffset;return s<0?(this.unused[a]=c,Wr.warn("".concat(this.id," unused varying buffer ").concat(a))(),this):(this.buffers[s]=o,this.bindOnUse||this._bindBuffer(s,c,p,h),this)}},{key:"begin",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(a),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(a){var o,s,u;return a instanceof Jn?u=a:(u=a.buffer,s=a.byteSize,o=a.byteOffset),(o!==void 0||s!==void 0)&&(o=o||0,s=s||u.byteLength-o),{buffer:u,byteOffset:o,byteSize:s}}},{key:"_getVaryingInfo",value:function(a){return this.configuration&&this.configuration.getVaryingInfo(a)}},{key:"_getVaryingIndex",value:function(a){if(this.configuration)return this.configuration.getVaryingInfo(a).location;var o=Number(a);return Number.isFinite(o)?o:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var a in this.buffers){var o=this._getBufferParams(this.buffers[a]),s=o.buffer,u=o.byteSize,c=o.byteOffset;this._bindBuffer(a,s,c,u)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var a in this.buffers)this._bindBuffer(a,null)}},{key:"_bindBuffer",value:function(a,o){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3?arguments[3]:void 0,c=o&&o.handle;return!c||u===void 0?this.gl.bindBufferBase(35982,a,c):this.gl.bindBufferRange(35982,a,c,s,u),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(a){this.gl.bindTransformFeedback(36386,this.handle)}}],[{key:"isSupported",value:function(a){return En(a)}}]),n}(Ou,Symbol.toStringTag);at();vt();var Gx=null;function ufe(t){return(!Gx||Gx.byteLength<t)&&(Gx=new ArrayBuffer(t)),Gx}function M8(t,r){var e=ufe(t.BYTES_PER_ELEMENT*r);return new t(e,0,r)}function I8(t){for(var r=t.target,e=t.source,n=t.start,i=n===void 0?0:n,a=t.count,o=a===void 0?1:a,s=e.length,u=o*s,c=0,h=i;c<s;c++)r[h++]=e[c];for(;c<u;)c<u-c?(r.copyWithin(i+c,i,i+c),c*=2):(r.copyWithin(i+c,i,i+u-c),c=u);return r}function lfe(t){var r=cfe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function cfe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ffe="elements must be GL.ELEMENT_ARRAY_BUFFER",Vx=function(t,r){Ke(n,t);var e=lfe(n);function n(i){var a;ce(this,n);var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=o.id||o.program&&o.program.id;return a=e.call(this,i,Object.assign({},o,{id:s})),a.buffer=null,a.bufferValue=null,a.isDefaultArray=o.isDefaultArray||!1,a.gl2=i,a.initialize(o),Object.seal(jt(a)),a}return ve(n,[{key:r,get:function(){return"VertexArrayObject"}},{key:"delete",value:function(){return Yt(me(n.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete(),this}},{key:"MAX_ATTRIBUTES",get:function(){return n.getMaxAttributes(this.gl)}},{key:"initialize",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(a)}},{key:"setProps",value:function(a){return this}},{key:"setElementBuffer",value:function(){var a=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return yr(!o||o.target===34963,ffe),this.bind(function(){a.gl.bindBuffer(34963,o?o.handle:null)}),this}},{key:"setBuffer",value:function(a,o,s){if(o.target===34963)return this.setElementBuffer(o,s);var u=s.size,c=s.type,h=s.stride,p=s.offset,v=s.normalized,x=s.integer,E=s.divisor,R=this.gl,D=this.gl2;return a=Number(a),this.bind(function(){R.bindBuffer(34962,o.handle),x?(yr(En(R)),D.vertexAttribIPointer(a,u,c,h,p)):R.vertexAttribPointer(a,u,c,v,h,p),R.enableVertexAttribArray(a),D.vertexAttribDivisor(a,E||0)}),this}},{key:"enable",value:function(a){var o=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,u=!s&&a===0&&!n.isSupported(this.gl,{constantAttributeZero:!0});return u||(a=Number(a),this.bind(function(){return s?o.gl.enableVertexAttribArray(a):o.gl.disableVertexAttribArray(a)})),this}},{key:"getConstantBuffer",value:function(a,o){var s=this._normalizeConstantArrayValue(o),u=s.byteLength*a,c=s.length*a,h=!this.buffer;if(this.buffer=this.buffer||new Jn(this.gl,u),h=h||this.buffer.reallocate(u),h=h||!this._compareConstantArrayValues(s,this.bufferValue),h){var p=M8(o.constructor,c);I8({target:p,source:s,start:0,count:c}),this.buffer.subData(p),this.bufferValue=o}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(a){return Array.isArray(a)?new Float32Array(a):a}},{key:"_compareConstantArrayValues",value:function(a,o){if(!a||!o||a.length!==o.length||a.constructor!==o.constructor)return!1;for(var s=0;s<a.length;++s)if(a[s]!==o[s])return!1;return!0}},{key:"_createHandle",value:function(){var a=this.gl;return a.createVertexArray()}},{key:"_deleteHandle",value:function(a){return this.gl2.deleteVertexArray(a),[this.elements]}},{key:"_bindHandle",value:function(a){this.gl2.bindVertexArray(a)}},{key:"_getParameter",value:function(a,o){var s=this,u=o.location;return yr(Number.isFinite(u)),this.bind(function(){switch(a){case 34373:return s.gl.getVertexAttribOffset(u,a);default:return s.gl.getVertexAttrib(u,a)}})}}],[{key:"isSupported",value:function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.constantAttributeZero?En(a)||Cg()==="Chrome":!0}},{key:"getDefaultArray",value:function(a){return a.luma=a.luma||{},a.luma.defaultVertexArray||(a.luma.defaultVertexArray=new n(a,{handle:null,isDefaultArray:!0})),a.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(a){return n.MAX_ATTRIBUTES=n.MAX_ATTRIBUTES||a.getParameter(34921),n.MAX_ATTRIBUTES}},{key:"setConstant",value:function(a,o,s){switch(s.constructor){case Float32Array:n._setConstantFloatArray(a,o,s);break;case Int32Array:n._setConstantIntArray(a,o,s);break;case Uint32Array:n._setConstantUintArray(a,o,s);break;default:yr(!1)}}},{key:"_setConstantFloatArray",value:function(a,o,s){switch(s.length){case 1:a.vertexAttrib1fv(o,s);break;case 2:a.vertexAttrib2fv(o,s);break;case 3:a.vertexAttrib3fv(o,s);break;case 4:a.vertexAttrib4fv(o,s);break;default:yr(!1)}}},{key:"_setConstantIntArray",value:function(a,o,s){switch(yr(En(a)),s.length){case 1:a.vertexAttribI1iv(o,s);break;case 2:a.vertexAttribI2iv(o,s);break;case 3:a.vertexAttribI3iv(o,s);break;case 4:a.vertexAttribI4iv(o,s);break;default:yr(!1)}}},{key:"_setConstantUintArray",value:function(a,o,s){switch(yr(En(a)),s.length){case 1:a.vertexAttribI1uiv(o,s);break;case 2:a.vertexAttribI2uiv(o,s);break;case 3:a.vertexAttribI3uiv(o,s);break;case 4:a.vertexAttribI4uiv(o,s);break;default:yr(!1)}}}]),n}(Ou,Symbol.toStringTag);at();vt();var hfe="VertexArray: attributes must be Buffers or constants (i.e. typed array)",pfe=/^(.+)__LOCATION_([0-9]+)$/,dfe=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],CO=function(){function t(r){ce(this,t);var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.id||e.program&&e.program.id;this.id=n,this.gl=r,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Vx(r),Ix(this,"VertexArray","v6.0",dfe),this.initialize(e),Object.seal(this)}return ve(t,[{key:"delete",value:function(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}},{key:"reset",value:function(){this.elements=null,this.elementsAccessor=null;var e=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}},{key:"setAttributes",value:function(e){var n=this;return Object.assign(this.attributes,e),this.vertexArrayObject.bind(function(){for(var i in e){var a=e[i];n._setAttribute(i,a)}n.gl.bindBuffer(34962,null)}),this}},{key:"setElementBuffer",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}},{key:"setBuffer",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,i);var a=this._resolveLocationAndAccessor(e,n,n.accessor,i),o=a.location,s=a.accessor;return o>=0&&(this.values[o]=n,this.accessors[o]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(o,n,s)),this}},{key:"setConstant",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},i)),o=a.location,s=a.accessor;return o>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[o]=n,this.accessors[o]=s,this.clearDrawParams(),this.vertexArrayObject.enable(o,!1)),this}},{key:"unbindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind(function(){e.elements&&e.vertexArrayObject.setElementBuffer(null),e.buffer=e.buffer||new Jn(e.gl,{accessor:{size:4}});for(var n=0;n<e.vertexArrayObject.MAX_ATTRIBUTES;n++)e.values[n]instanceof Jn&&(e.gl.disableVertexAttribArray(n),e.gl.bindBuffer(34962,e.buffer.handle),e.gl.vertexAttribPointer(n,1,5126,!1,0,0))}),this}},{key:"bindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind(function(){e.elements&&e.setElementBuffer(e.elements);for(var n=0;n<e.vertexArrayObject.MAX_ATTRIBUTES;n++){var i=e.values[n];i instanceof Jn&&e.setBuffer(n,i)}}),this}},{key:"bindForDraw",value:function(e,n,i){var a=this,o;return this.vertexArrayObject.bind(function(){a._setConstantAttributes(e,n),o=i()}),o}},{key:"_resolveLocationAndAccessor",value:function(e,n,i,a){var o=this,s={location:-1,accessor:null},u=this._getAttributeIndex(e),c=u.location,h=u.name;if(!Number.isFinite(c)||c<0)return this.unused[e]=n,Wr.once(3,function(){return"unused value ".concat(e," in ").concat(o.id)})(),s;var p=this._getAttributeInfo(h||c);if(!p)return s;var v=this.accessors[c]||{},x=Pl.resolve(p.accessor,v,i,a),E=x.size,R=x.type;return yr(Number.isFinite(E)&&Number.isFinite(R)),{location:c,accessor:x}}},{key:"_getAttributeInfo",value:function(e){return this.configuration&&this.configuration.getAttributeInfo(e)}},{key:"_getAttributeIndex",value:function(e){var n=Number(e);if(Number.isFinite(n))return{location:n};var i=pfe.exec(e),a=i?i[1]:e,o=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(a)+o,name:a}:{location:-1}}},{key:"_setAttribute",value:function(e,n){if(n instanceof Jn)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof Jn){var i=n[0],a=n[1];this.setBuffer(e,i,a)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){var o=n;this.setConstant(e,o)}else if(n.buffer instanceof Jn){var s=n;this.setBuffer(e,s.buffer,s)}else throw new Error(hfe)}},{key:"_setConstantAttributes",value:function(e,n){var i=Math.max(e|0,n|0),a=this.values[0];ArrayBuffer.isView(a)&&this._setConstantAttributeZero(a,i);for(var o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)a=this.values[o],ArrayBuffer.isView(a)&&this._setConstantAttribute(o,a)}},{key:"_setConstantAttributeZero",value:function(e,n){if(Vx.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}var i=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}},{key:"_setConstantAttribute",value:function(e,n){Vx.setConstant(this.gl,e,n)}},{key:"_updateDrawParams",value:function(){for(var e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}},{key:"_updateDrawParamsForLocation",value:function(e,n){var i=this.values[n],a=this.accessors[n];if(i){var o=a.divisor,s=o>0;if(e.isInstanced=e.isInstanced||s,i instanceof Jn){var u=i;if(s){var c=u.getVertexCount(a);e.instanceCount=Math.min(e.instanceCount,c)}else{var h=u.getVertexCount(a);e.vertexCount=Math.min(e.vertexCount,h)}}}}},{key:"setElements",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Wr.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}]),t}();et();function mfe(t,r){for(var e=r.maxElts,n=e===void 0?16:e,i=r.size,a=i===void 0?1:i,o="[",s=0;s<t.length&&s<n;++s)s>0&&(o+=",".concat(s%a===0?" ":"")),o+=Cm(t[s],r);var u=t.length>n?"...":"]";return"".concat(o).concat(u)}function Cm(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=1e-16,n=r.isInteger,i=n===void 0?!1:n;if(Array.isArray(t)||ArrayBuffer.isView(t))return mfe(t,r);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<e)return i?"0":"0.";if(i||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);var a=t.toPrecision(2),o=a.indexOf(".0");return o===a.length-2?a.slice(0,-1):a}function PO(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=vfe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function vfe(t,r){if(t){if(typeof t=="string")return R8(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return R8(t,r)}}function R8(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function Hx(t){var r=t.header,e=r===void 0?"Uniforms":r,n=t.program,i=t.uniforms,a=t.undefinedOnly,o=a===void 0?!1:a;yr(n);var s=".*_.*",u=".*Matrix",c=n._uniformSetters,h={},p=Object.keys(c).sort(),v=0,x=PO(p),E;try{for(x.s();!(E=x.n()).done;){var R=E.value;!R.match(s)&&!R.match(u)&&OO({table:h,header:e,uniforms:i,uniformName:R,undefinedOnly:o})&&v++}}catch(O){x.e(O)}finally{x.f()}var D=PO(p),H;try{for(D.s();!(H=D.n()).done;){var W=H.value;W.match(u)&&OO({table:h,header:e,uniforms:i,uniformName:W,undefinedOnly:o})&&v++}}catch(O){D.e(O)}finally{D.f()}var $=PO(p),J;try{for($.s();!(J=$.n()).done;){var B=J.value;h[B]||OO({table:h,header:e,uniforms:i,uniformName:B,undefinedOnly:o})&&v++}}catch(O){$.e(O)}finally{$.f()}var se=0,V={};if(!o)for(var X in i){var I=i[X];h[X]||(se++,V[X]=_({Type:"NOT USED: ".concat(I)},e,Cm(I)))}return{table:h,count:v,unusedTable:V,unusedCount:se}}function OO(t){var r=t.table,e=t.header,n=t.uniforms,i=t.uniformName,a=t.undefinedOnly,o=n[i],s=gfe(o);if(!a||!s){var u;return r[i]=(u={},_(u,e,s?Cm(o):"N/A"),_(u,"Uniform Type",s?o:"NOT PROVIDED"),u),!0}return!1}function gfe(t){return t!=null}et();function MO(t){var r=t.vertexArray,e=t.header,n=e===void 0?"Attributes":e;if(!r.configuration)return{};var i={};r.elements&&(i.ELEMENT_ARRAY_BUFFER=L8(r,r.elements,null,n));var a=r.values;for(var o in a){var s=r._getAttributeInfo(o);if(s){var u="".concat(o,": ").concat(s.name),c=r.accessors[s.location];c&&(u="".concat(o,": ").concat(Afe(s.name,c))),i[u]=L8(r,a[o],c,n)}}return i}function L8(t,r,e,n){var i,a=t.gl;if(!r){var o;return o={},_(o,n,"null"),_(o,"Format ","N/A"),o}var s="NOT PROVIDED",u=1,c=0,h=0,p,v,x;if(e&&(s=e.type,u=e.size,s=String(s).replace("Array",""),p=s.indexOf("nt")!==-1),r instanceof Jn){var E,R=r,D=R.getDebugData(),H=D.data,W=D.changed;v=W?"*":"",x=H,h=R.byteLength,c=h/H.BYTES_PER_ELEMENT/u;var $;if(e){var J=e.divisor>0;$="".concat(J?"I ":"P "," ").concat(c," (x").concat(u,"=").concat(h," bytes ").concat(zc(a,s),")")}else p=!0,$="".concat(h," bytes");return E={},_(E,n,"".concat(v).concat(Cm(x,{size:u,isInteger:p}))),_(E,"Format ",$),E}return x=r,u=r.length,s=String(r.constructor.name).replace("Array",""),p=s.indexOf("nt")!==-1,i={},_(i,n,"".concat(Cm(x,{size:u,isInteger:p})," (constant)")),_(i,"Format ","".concat(u,"x").concat(s," (constant)")),i}function Afe(t,r){var e=r.type,n=r.size,i=Ux(e,n);return i?"".concat(t," (").concat(i.name,")"):t}et();function k8(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=yfe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function yfe(t,r){if(t){if(typeof t=="string")return B8(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return B8(t,r)}}function B8(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function IO(t){var r={},e="Accessors for ".concat(t.id),n=k8(t.attributeInfos),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;if(a){var o=D8(a);r["in ".concat(o)]=_({},e,JSON.stringify(a.accessor))}}}catch(p){n.e(p)}finally{n.f()}var s=k8(t.varyingInfos),u;try{for(s.s();!(u=s.n()).done;){var c=u.value;if(c){var h=D8(c);r["out ".concat(h)]=_({},e,JSON.stringify(c.accessor))}}}catch(p){s.e(p)}finally{s.f()}return r}function D8(t){var r=t.accessor,e=r.type,n=r.size,i=Ux(e,n);return i?"".concat(i.name," ").concat(t.name):t.name}Ii();at();vt();var RO=en(On());var F8=cu()&&typeof document<"u",_fe=0,Wx=function(){function t(){ce(this,t);var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=r.onCreateContext,n=e===void 0?function(ee){return Rg(ee)}:e,i=r.onAddHTML,a=i===void 0?null:i,o=r.onInitialize,s=o===void 0?function(){}:o,u=r.onRender,c=u===void 0?function(){}:u,h=r.onFinalize,p=h===void 0?function(){}:h,v=r.onError,x=r.gl,E=x===void 0?null:x,R=r.glOptions,D=R===void 0?{}:R,H=r.debug,W=H===void 0?!1:H,$=r.createFramebuffer,J=$===void 0?!1:$,B=r.autoResizeViewport,se=B===void 0?!0:B,V=r.autoResizeDrawingBuffer,X=V===void 0?!0:V,I=r.stats,O=I===void 0?Nc.get("animation-loop-".concat(_fe++)):I,U=r.useDevicePixels,re=U===void 0?!0:U;"useDevicePixelRatio"in r&&(Wr.deprecated("useDevicePixelRatio","useDevicePixels")(),re=r.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:a,onInitialize:s,onRender:c,onFinalize:p,onError:v,gl:E,glOptions:D,debug:W,createFramebuffer:J},this.gl=E,this.needsRedraw=null,this.timeline=null,this.stats=O,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:se,autoResizeDrawingBuffer:X,useDevicePixels:re}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}return ve(t,[{key:"delete",value:function(){this.stop(),this._setDisplay(null)}},{key:"setNeedsRedraw",value:function(e){return yr(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}},{key:"setProps",value:function(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}},{key:"start",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;var i=this._getPageLoadPromise().then(function(){return!e._running||e._initialized?null:(e._createWebGLContext(n),e._createFramebuffer(),e._startEventHandling(),e._initializeCallbackData(),e._updateCallbackData(),e._resizeCanvasDrawingBuffer(),e._resizeViewport(),e._gpuTimeQuery=jx.isSupported(e.gl,["timers"])?new jx(e.gl):null,e._initialized=!0,e.onInitialize(e.animationProps))}).then(function(a){e._running&&(e._addCallbackData(a||{}),a!==!1&&e._startLoop())});return this.props.onError&&i.catch(this.props.onError),this}},{key:"redraw",value:function(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}},{key:"stop",value:function(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}},{key:"attachTimeline",value:function(e){return this.timeline=e,this.timeline}},{key:"detachTimeline",value:function(){this.timeline=null}},{key:"waitForRender",value:function(){var e=this;return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(function(n){e._resolveNextFrame=n})),this._nextFramePromise}},{key:"toDataURL",value:function(){var r=zt(RO.default.mark(function n(){return RO.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return this.setNeedsRedraw("toDataURL"),a.next=3,this.waitForRender();case 3:return a.abrupt("return",this.gl.canvas.toDataURL());case 4:case"end":return a.stop()}},n,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"isContextLost",value:function(){return this.gl.isContextLost()}},{key:"onCreateContext",value:function(){var e;return(e=this.props).onCreateContext.apply(e,arguments)}},{key:"onInitialize",value:function(){var e;return(e=this.props).onInitialize.apply(e,arguments)}},{key:"onRender",value:function(){var e;return(e=this.props).onRender.apply(e,arguments)}},{key:"onFinalize",value:function(){var e;return(e=this.props).onFinalize.apply(e,arguments)}},{key:"getHTMLControlValue",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=document.getElementById(e);return i?Number(i.value):n}},{key:"setViewParameters",value:function(){return Wr.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function(){var e=this,n=function i(){e._running&&(e.redraw(),e._animationFrameId=e._requestAnimationFrame(i))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(n)}},{key:"_getPageLoadPromise",value:function(){return this._pageLoadPromise||(this._pageLoadPromise=F8?new Promise(function(e,n){if(F8&&document.readyState==="complete"){e(document);return}window.addEventListener("load",function(){e(document)})}):Promise.resolve({})),this._pageLoadPromise}},{key:"_setDisplay",value:function(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}},{key:"_cancelAnimationFrame",value:function(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):lO(e)}},{key:"_requestAnimationFrame",value:function(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):uO(e)}},{key:"_renderFrame",value:function(){if(this.display){var e;(e=this.display)._renderFrame.apply(e,arguments);return}this.onRender.apply(this,arguments)}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var e=this._getSizeAndAspect(),n=e.width,i=e.height,a=e.aspect;(n!==this.animationProps.width||i!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),a!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=n,this.animationProps.height=i,this.animationProps.aspect=a,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(e){vr(e)==="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}},{key:"_createWebGLContext",value:function(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?Qh(this.props.gl,e):this.onCreateContext(e),!$h(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Px(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";var n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);var i=this.props.onAddHTML(n);i&&(n.innerHTML=i)}}},{key:"_getSizeAndAspect",value:function(){var e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight,i=1,a=this.gl.canvas;return a&&a.clientHeight?i=a.clientWidth/a.clientHeight:e>0&&n>0&&(i=e/n),{width:e,height:n,aspect:i}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&sO(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new Ea(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_beginTimers",value:function(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}},{key:"_endTimers",value:function(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}},{key:"_startEventHandling",value:function(){var e=this.gl.canvas;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}},{key:"_onMousemove",value:function(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}},{key:"_onMouseleave",value:function(e){this.animationProps._mousePosition=null}}]),t}();et();at();vt();at();vt();Mn();et();var Pm="vs",g_="fs";at();vt();function zs(t,r){if(!t)throw new Error(r||"shadertools: assertion failed.")}Ii();var LO={number:{validate:function(r,e){return Number.isFinite(r)&&(!("max"in e)||r<=e.max)&&(!("min"in e)||r>=e.min)}},array:{validate:function(r,e){return Array.isArray(r)||ArrayBuffer.isView(r)}}};function z8(t){var r={};for(var e in t){var n=t[e],i=bfe(n);r[e]=i}return r}function bfe(t){var r=N8(t);return r==="object"?t?"type"in t?Object.assign({},t,LO[t.type]):"value"in t?(r=N8(t.value),Object.assign({type:r},t,LO[r])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:r,value:t},LO[r])}function N8(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":vr(t)}var xfe="vs",wfe="fs",qx=function(){function t(r){ce(this,t);var e=r.name,n=r.vs,i=r.fs,a=r.dependencies,o=a===void 0?[]:a,s=r.uniforms,u=r.getUniforms,c=r.deprecations,h=c===void 0?[]:c,p=r.defines,v=p===void 0?{}:p,x=r.inject,E=x===void 0?{}:x,R=r.vertexShader,D=r.fragmentShader;zs(typeof e=="string"),this.name=e,this.vs=n||R,this.fs=i||D,this.getModuleUniforms=u,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(h),this.defines=v,this.injections=Tfe(E),s&&(this.uniforms=z8(s))}return ve(t,[{key:"getModuleSource",value:function(e){var n;switch(e){case xfe:n=this.vs||"";break;case wfe:n=this.fs||"";break;default:zs(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}},{key:"getUniforms",value:function(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}},{key:"getDefines",value:function(){return this.defines}},{key:"checkDeprecations",value:function(e,n){this.deprecations.forEach(function(i){i.regex.test(e)&&(i.deprecated?n.deprecated(i.old,i.new)():n.removed(i.old,i.new)())})}},{key:"_parseDeprecationDefinitions",value:function(e){return e.forEach(function(n){switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}},{key:"_defaultGetUniforms",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n={},i=this.uniforms;for(var a in i){var o=i[a];a in e&&!o.private?(o.validate&&zs(o.validate(e[a],o),"".concat(this.name,": invalid ").concat(a)),n[a]=e[a]):n[a]=o.value}return n}}]),t}();function Xx(t){if(!t.normalized&&(t.normalized=!0,t.uniforms&&!t.getUniforms)){var r=new qx(t);t.getUniforms=r.getUniforms.bind(r)}return t}function Tfe(t){var r={vs:{},fs:{}};for(var e in t){var n=t[e],i=e.slice(0,2);typeof n=="string"&&(n={order:0,injection:n}),r[i][e]=n}return r}function U8(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Sfe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Sfe(t,r){if(t){if(typeof t=="string")return j8(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return j8(t,r)}}function j8(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function G8(t){return Efe(H8(t))}function Efe(t){var r={},e={};return V8({modules:t,level:0,moduleMap:r,moduleDepth:e}),Object.keys(e).sort(function(n,i){return e[i]-e[n]}).map(function(n){return r[n]})}function V8(t){var r=t.modules,e=t.level,n=t.moduleMap,i=t.moduleDepth;if(e>=5)throw new Error("Possible loop in shader dependency graph");var a=U8(r),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;n[s.name]=s,(i[s.name]===void 0||i[s.name]<e)&&(i[s.name]=e)}}catch(p){a.e(p)}finally{a.f()}var u=U8(r),c;try{for(u.s();!(c=u.n()).done;){var h=c.value;h.dependencies&&V8({modules:h.dependencies,level:e+1,moduleMap:n,moduleDepth:i})}}catch(p){u.e(p)}finally{u.f()}}function H8(t,r){return t.map(function(e){return e instanceof qx||(zs(typeof e!="string","Shader module use by name is deprecated. Import shader module '".concat(e,"' and use it directly.")),zs(e.name,"shader module has no name"),e=new qx(e),e.dependencies=H8(e.dependencies)),e})}function kO(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=typeof window<"u"?window.navigator||{}:{},e=t.userAgent||r.userAgent||"",n=e.indexOf("MSIE ")!==-1,i=e.indexOf("Trident/")!==-1;return n||i}var Cfe=7936,Pfe=7937,Ofe=7938,Mfe=35724,DO={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},id={};Object.keys(DO).forEach(function(t){id[t]=t});function Ife(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:Boolean(t&&t._version===2)}function W8(t){var r=t.getExtension("WEBGL_debug_renderer_info"),e=t.getParameter(r&&r.UNMASKED_VENDOR_WEBGL||Cfe),n=t.getParameter(r&&r.UNMASKED_RENDERER_WEBGL||Pfe),i=Rfe(e,n),a={gpuVendor:i,vendor:e,renderer:n,version:t.getParameter(Ofe),shadingLanguageVersion:t.getParameter(Mfe)};return a}function Rfe(t,r){return t.match(/NVIDIA/i)||r.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||r.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||r.match(/AMD/i)||t.match(/ATI/i)||r.match(/ATI/i)?"AMD":"UNKNOWN GPU"}var BO={};function FO(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=DO[r];if(zs(n,r),!kO(e))return!0;if(r in BO)return BO[r];var i=n[0],a=e.behavior||"enable",o="#extension GL_".concat(i," : ").concat(a,`
void main(void) {}`),s=t.createShader(35633);t.shaderSource(s,o),t.compileShader(s);var u=t.getShaderParameter(s,35713);return t.deleteShader(s),BO[r]=u,u}function Lfe(t,r){var e=DO[r];zs(e,r);var n=Ife(t)&&e[1]||e[0],i=typeof n=="string"?Boolean(t.getExtension(n)):n;return zs(i===!1||i===!0),i}function A_(t,r){return r=Array.isArray(r)?r:[r],r.every(function(e){return Lfe(t,e)})}function q8(t){var r=W8(t);switch(r.gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function X8(t,r,e){var n=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return A_(t,id.GLSL_FRAG_DEPTH)&&(n+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),A_(t,id.GLSL_DERIVATIVES)&&FO(t,id.GLSL_DERIVATIVES)&&(n+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),A_(t,id.GLSL_FRAG_DATA)&&FO(t,id.GLSL_FRAG_DATA,{behavior:"require"})&&(n+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),A_(t,id.GLSL_TEXTURE_LOD)&&(n+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),n}et();var Y8=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,K8=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`;var Yx,kfe=(Yx={},_(Yx,Pm,Y8),_(Yx,g_,K8),Yx),y_="__LUMA_INJECT_DECLARATIONS__",Z8=/void\s+main\s*\([^)]*\)\s*\{\n?/,$8=/}\n?[^{}]*$/,NO=[];function Kx(t,r,e){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=r===Pm,a=function(u){var c=e[u];c.sort(function(x,E){return x.order-E.order}),NO.length=c.length;for(var h=0,p=c.length;h<p;++h)NO[h]=c[h].injection;var v="".concat(NO.join(`
`),`
`);switch(u){case"vs:#decl":i&&(t=t.replace(y_,v));break;case"vs:#main-start":i&&(t=t.replace(Z8,function(x){return x+v}));break;case"vs:#main-end":i&&(t=t.replace($8,function(x){return v+x}));break;case"fs:#decl":i||(t=t.replace(y_,v));break;case"fs:#main-start":i||(t=t.replace(Z8,function(x){return x+v}));break;case"fs:#main-end":i||(t=t.replace($8,function(x){return v+x}));break;default:t=t.replace(u,function(x){return x+v})}};for(var o in e)a(o);return t=t.replace(y_,""),n&&(t=t.replace(/\}\s*$/,function(s){return s+kfe[r]})),t}function Ng(t){var r={};return zs(Array.isArray(t)&&t.length>1),t.forEach(function(e){for(var n in e)r[n]=r[n]?"".concat(r[n],`
`).concat(e[n]):e[n]}),r}Mn();function Bfe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Dfe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Dfe(t,r){if(t){if(typeof t=="string")return J8(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return J8(t,r)}}function J8(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function zg(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}var Q8=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Ffe=[].concat(Q8,[[zg("attribute"),"in $1"],[zg("varying"),"out $1"]]),Nfe=[].concat(Q8,[[zg("varying"),"in $1"]]),eU=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],zfe=[].concat(eU,[[zg("in"),"attribute $1"],[zg("out"),"varying $1"]]),Ufe=[].concat(eU,[[zg("in"),"varying $1"]]),zO="gl_FragColor",UO=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,jfe=/void\s+main\s*\([^)]*\)\s*\{\n?/;function jO(t,r,e){switch(r){case 300:return e?Zx(t,Ffe):Gfe(t);case 100:return e?Zx(t,zfe):Vfe(t);default:throw new Error("unknown GLSL version ".concat(r))}}function Zx(t,r){var e=Bfe(r),n;try{for(e.s();!(n=e.n()).done;){var i=Ot(n.value,2),a=i[0],o=i[1];t=t.replace(a,o)}}catch(s){e.e(s)}finally{e.f()}return t}function Gfe(t){t=Zx(t,Nfe);var r=t.match(UO);if(r){var e=r[1];t=t.replace(new RegExp("\\b".concat(zO,"\\b"),"g"),e)}else{var n="fragmentColor";t=t.replace(jfe,function(i){return"out vec4 ".concat(n,`;
`).concat(i)}).replace(new RegExp("\\b".concat(zO,"\\b"),"g"),n)}return t}function Vfe(t){t=Zx(t,Ufe);var r=t.match(UO);if(r){var e=r[1];t=t.replace(UO,"").replace(new RegExp("\\b".concat(e,"\\b"),"g"),zO)}return t}var $x;function GO(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Hfe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Hfe(t,r){if(t){if(typeof t=="string")return tU(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return tU(t,r)}}function tU(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Wfe=`

`.concat(y_,`

`),nU=($x={},_($x,Pm,"vertex"),_($x,g_,"fragment"),$x),qfe=`precision highp float;

`;function VO(t,r){var e=r.vs,n=r.fs,i=G8(r.modules||[]);return{gl:t,vs:rU(t,Object.assign({},r,{source:e,type:Pm,modules:i})),fs:rU(t,Object.assign({},r,{source:n,type:g_,modules:i})),getUniforms:Xfe(i)}}function rU(t,r){var e=r.id,n=r.source,i=r.type,a=r.modules,o=r.defines,s=o===void 0?{}:o,u=r.hookFunctions,c=u===void 0?[]:u,h=r.inject,p=h===void 0?{}:h,v=r.transpileToGLSL100,x=v===void 0?!1:v,E=r.prologue,R=E===void 0?!0:E,D=r.log;zs(typeof n=="string","shader source must be a string");var H=i===Pm,W=n.split(`
`),$=100,J="",B=n;W[0].indexOf("#version ")===0?($=300,J=W[0],B=W.slice(1).join(`
`)):J="#version ".concat($);var se={};a.forEach(function(he){Object.assign(se,he.getDefines())}),Object.assign(se,s);var V=R?"".concat(J,`
`).concat(Kfe({id:e,source:n,type:i}),`
`).concat(Yfe({type:i}),`
`).concat(q8(t),`
`).concat(X8(t,$,!H),`
`).concat(Zfe(se),`
`).concat(H?"":qfe,`
`):"".concat(J,`
`),X=Jfe(c),I={},O={},U={};for(var re in p){var ee=typeof p[re]=="string"?{injection:p[re],order:0}:p[re],pe=re.match(/^(v|f)s:(#)?([\w-]+)$/);if(pe){var je=pe[2],qe=pe[3];je?qe==="decl"?O[re]=[ee]:U[re]=[ee]:I[re]=[ee]}else U[re]=[ee]}var We=GO(a),ot;try{for(We.s();!(ot=We.n()).done;){var gt=ot.value;D&&gt.checkDeprecations(B,D);var Pt=gt.getModuleSource(i,$);V+=Pt;var Dt=gt.injections[i];for(var nr in Dt){var Nt=nr.match(/^(v|f)s:#([\w-]+)$/);if(Nt){var Ut=Nt[2],Or=Ut==="decl"?O:U;Or[nr]=Or[nr]||[],Or[nr].push(Dt[nr])}else I[nr]=I[nr]||[],I[nr].push(Dt[nr])}}}catch(he){We.e(he)}finally{We.f()}return V+=Wfe,V=Kx(V,i,O),V+=$fe(X[i],I),V+=B,V=Kx(V,i,U),V=jO(V,x?100:$,H),V}function Xfe(t){return function(e){var n={},i=GO(t),a;try{for(i.s();!(a=i.n()).done;){var o=a.value,s=o.getUniforms(e,n);Object.assign(n,s)}}catch(u){i.e(u)}finally{i.f()}return n}}function Yfe(t){var r=t.type;return`
#define SHADER_TYPE_`.concat(nU[r].toUpperCase(),`
`)}function Kfe(t){var r=t.id,e=t.source,n=t.type,i=r&&typeof r=="string"&&e.indexOf("SHADER_NAME")===-1;return i?`
#define SHADER_NAME `.concat(r,"_").concat(nU[n],`

`):""}function Zfe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=0,e="";for(var n in t){r===0&&(e+=`
// APPLICATION DEFINES
`),r++;var i=t[n];(i||Number.isFinite(i))&&(e+="#define ".concat(n.toUpperCase()," ").concat(t[n],`
`))}return r===0&&(e+=`
`),e}function $fe(t,r){var e="";for(var n in t){var i=t[n];if(e+="void ".concat(i.signature,` {
`),i.header&&(e+="  ".concat(i.header)),r[n]){var a=r[n];a.sort(function(c,h){return c.order-h.order});var o=GO(a),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;e+="  ".concat(u.injection,`
`)}}catch(c){o.e(c)}finally{o.f()}}i.footer&&(e+="  ".concat(i.footer)),e+=`}
`}return e}function Jfe(t){var r={vs:{},fs:{}};return t.forEach(function(e){var n;typeof e!="string"?(n=e,e=n.hook):n={},e=e.trim();var i=e.split(":"),a=Ot(i,2),o=a[0],s=a[1],u=e.replace(/\(.+/,"");r[o][u]=Object.assign(n,{signature:s})}),r}Mn();var Qfe="void main() {gl_FragColor = vec4(0);}",iU=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,ehe=`#version 300 es
`.concat(iU);function Jx(t,r){r=Array.isArray(r)?r:[r];var e=t.replace(/^\s+/,"").split(/\s+/),n=Ot(e,3),i=n[0],a=n[1],o=n[2];if(!r.includes(i)||!a||!o)return null;var s=o.split(";")[0];return{qualifier:i,type:a,name:s}}function __(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.version,e=r===void 0?100:r,n=t.input,i=t.inputType,a=t.output;if(!n)return e===300?ehe:e>300?"#version ".concat(e,`
`).concat(iU):Qfe;var o=aU(n,i);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(i," ").concat(n,`;
out vec4 `).concat(a,`;
void main() {
  `).concat(a," = ").concat(o,`;
}`):"varying ".concat(i," ").concat(n,`;
void main() {
  gl_FragColor = `).concat(o,`;
}`)}function HO(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return zs(!1),null}}function WO(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return zs(!1),null}}function aU(t,r){switch(r){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return zs(!1),null}}var the=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,Qx={name:"fp32",vs:the,fs:null};function qO(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=Math.fround(t),i=t-n;return r[e]=n,r[e+1]=i,r}function oU(t){return t-Math.fround(t)}function sU(t){for(var r=new Float32Array(32),e=0;e<4;++e)for(var n=0;n<4;++n){var i=e*4+n;qO(t[n*4+e],r,i*2)}return r}var uU=`uniform float ONE;
vec2 split(float a) {
  const float SPLIT = 4097.0;
  float t = a * SPLIT;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float a_hi = t * ONE - (t - a);
  float a_lo = a * ONE - a_hi;
#else
  float a_hi = t - (t - a);
  float a_lo = a - a_hi;
#endif
  return vec2(a_hi, a_lo);
}
vec2 split2(vec2 a) {
  vec2 b = split(a.x);
  b.y += a.y;
  return b;
}
vec2 quickTwoSum(float a, float b) {
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float sum = (a + b) * ONE;
  float err = b - (sum - a) * ONE;
#else
  float sum = a + b;
  float err = b - (sum - a);
#endif
  return vec2(sum, err);
}
vec2 twoSum(float a, float b) {
  float s = (a + b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float v = (s * ONE - a) * ONE;
  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);
#else
  float v = s - a;
  float err = (a - (s - v)) + (b - v);
#endif
  return vec2(s, err);
}

vec2 twoSub(float a, float b) {
  float s = (a - b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float v = (s * ONE - a) * ONE;
  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);
#else
  float v = s - a;
  float err = (a - (s - v)) - (b + v);
#endif
  return vec2(s, err);
}

vec2 twoSqr(float a) {
  float prod = a * a;
  vec2 a_fp64 = split(a);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *
    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;
#else
  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;
#endif
  return vec2(prod, err);
}

vec2 twoProd(float a, float b) {
  float prod = a * b;
  vec2 a_fp64 = split(a);
  vec2 b_fp64 = split(b);
  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +
    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;
  return vec2(prod, err);
}

vec2 sum_fp64(vec2 a, vec2 b) {
  vec2 s, t;
  s = twoSum(a.x, b.x);
  t = twoSum(a.y, b.y);
  s.y += t.x;
  s = quickTwoSum(s.x, s.y);
  s.y += t.y;
  s = quickTwoSum(s.x, s.y);
  return s;
}

vec2 sub_fp64(vec2 a, vec2 b) {
  vec2 s, t;
  s = twoSub(a.x, b.x);
  t = twoSub(a.y, b.y);
  s.y += t.x;
  s = quickTwoSum(s.x, s.y);
  s.y += t.y;
  s = quickTwoSum(s.x, s.y);
  return s;
}

vec2 mul_fp64(vec2 a, vec2 b) {
  vec2 prod = twoProd(a.x, b.x);
  prod.y += a.x * b.y;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  prod = split2(prod);
#endif
  prod = quickTwoSum(prod.x, prod.y);
  prod.y += a.y * b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  prod = split2(prod);
#endif
  prod = quickTwoSum(prod.x, prod.y);
  return prod;
}

vec2 div_fp64(vec2 a, vec2 b) {
  float xn = 1.0 / b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  vec2 yn = mul_fp64(a, vec2(xn, 0));
#else
  vec2 yn = a * xn;
#endif
  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;
  vec2 prod = twoProd(xn, diff);
  return sum_fp64(yn, prod);
}

vec2 sqrt_fp64(vec2 a) {
  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);
  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);

  float x = 1.0 / sqrt(a.x);
  float yn = a.x * x;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  vec2 yn_sqr = twoSqr(yn) * ONE;
#else
  vec2 yn_sqr = twoSqr(yn);
#endif
  float diff = sub_fp64(a, yn_sqr).x;
  vec2 prod = twoProd(x * 0.5, diff);
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  return sum_fp64(split(yn), prod);
#else
  return sum_fp64(vec2(yn, 0.0), prod);
#endif
}
`;var rhe={ONE:1};function nhe(){return rhe}var Ug={name:"fp64-arithmetic",vs:uU,fs:null,getUniforms:nhe,fp64ify:qO,fp64LowPart:oU,fp64ifyMatrix4:sU};at();vt();at();vt();at();vt();Ii();function Ca(t,r){if(!t)throw new Error("math.gl assertion ".concat(r))}var ihe=1/Math.PI*180,ahe=1/180*Math.PI,uo={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function b_(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r.precision,n=e===void 0?uo.precision:e;return t=ohe(t),"".concat(parseFloat(t.toPrecision(n)))}function Ml(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function XO(t){return Om(t)}function YO(t){return Iu(t)}function Om(t,r){return KO(t,function(e){return e*ahe},r)}function Iu(t,r){return KO(t,function(e){return e*ihe},r)}function ya(t,r,e){return KO(t,function(n){return Math.max(r,Math.min(e,n))})}function hu(t,r,e){return Ml(t)?t.map(function(n,i){return hu(n,r[i],e)}):e*r+(1-e)*t}function Ao(t,r,e){var n=uo.EPSILON;e&&(uo.EPSILON=e);try{if(t===r)return!0;if(Ml(t)&&Ml(r)){if(t.length!==r.length)return!1;for(var i=0;i<t.length;++i)if(!Ao(t[i],r[i]))return!1;return!0}return t&&t.equals?t.equals(r):r&&r.equals?r.equals(t):typeof t=="number"&&typeof r=="number"?Math.abs(t-r)<=uo.EPSILON*Math.max(1,Math.abs(t),Math.abs(r)):!1}finally{uo.EPSILON=n}}function ohe(t){return Math.round(t/uo.EPSILON)*uo.EPSILON}function she(t){return t.clone?t.clone():new Array(t.length)}function KO(t,r,e){if(Ml(t)){var n=t;e=e||she(n);for(var i=0;i<e.length&&i<n.length;++i)e[i]=r(t[i],i,e);return e}return r(t)}function uhe(t){var r=lhe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function lhe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function che(t){function r(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return r.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t,r}var jg=function(t){Ke(e,t);var r=uhe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"clone",value:function(){return new this.constructor().copy(this)}},{key:"fromArray",value:function(i){for(var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=0;o<this.ELEMENTS;++o)this[o]=i[o+a];return this.check()}},{key:"toArray",value:function(){for(var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=0;o<this.ELEMENTS;++o)i[a+o]=this[o];return i}},{key:"from",value:function(i){return Array.isArray(i)?this.copy(i):this.fromObject(i)}},{key:"to",value:function(i){return i===this?this:Ml(i)?this.toArray(i):this.toObject(i)}},{key:"toTarget",value:function(i){return i?this.to(i):this}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"toString",value:function(){return this.formatString(uo)}},{key:"formatString",value:function(i){for(var a="",o=0;o<this.ELEMENTS;++o)a+=(o>0?", ":"")+b_(this[o],i);return"".concat(i.printTypes?this.constructor.name:"","[").concat(a,"]")}},{key:"equals",value:function(i){if(!i||this.length!==i.length)return!1;for(var a=0;a<this.ELEMENTS;++a)if(!Ao(this[a],i[a]))return!1;return!0}},{key:"exactEquals",value:function(i){if(!i||this.length!==i.length)return!1;for(var a=0;a<this.ELEMENTS;++a)if(this[a]!==i[a])return!1;return!0}},{key:"negate",value:function(){for(var i=0;i<this.ELEMENTS;++i)this[i]=-this[i];return this.check()}},{key:"lerp",value:function(i,a,o){if(o===void 0)return this.lerp(this,i,a);for(var s=0;s<this.ELEMENTS;++s){var u=i[s];this[s]=u+o*(a[s]-u)}return this.check()}},{key:"min",value:function(i){for(var a=0;a<this.ELEMENTS;++a)this[a]=Math.min(i[a],this[a]);return this.check()}},{key:"max",value:function(i){for(var a=0;a<this.ELEMENTS;++a)this[a]=Math.max(i[a],this[a]);return this.check()}},{key:"clamp",value:function(i,a){for(var o=0;o<this.ELEMENTS;++o)this[o]=Math.min(Math.max(this[o],i[o]),a[o]);return this.check()}},{key:"add",value:function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];for(var s=0,u=a;s<u.length;s++)for(var c=u[s],h=0;h<this.ELEMENTS;++h)this[h]+=c[h];return this.check()}},{key:"subtract",value:function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];for(var s=0,u=a;s<u.length;s++)for(var c=u[s],h=0;h<this.ELEMENTS;++h)this[h]-=c[h];return this.check()}},{key:"scale",value:function(i){if(typeof i=="number")for(var a=0;a<this.ELEMENTS;++a)this[a]*=i;else for(var o=0;o<this.ELEMENTS&&o<i.length;++o)this[o]*=i[o];return this.check()}},{key:"multiplyByScalar",value:function(i){for(var a=0;a<this.ELEMENTS;++a)this[a]*=i;return this.check()}},{key:"check",value:function(){if(uo.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function(){for(var i=this.length===this.ELEMENTS,a=0;a<this.ELEMENTS;++a)i=i&&Number.isFinite(this[a]);return i}},{key:"sub",value:function(i){return this.subtract(i)}},{key:"setScalar",value:function(i){for(var a=0;a<this.ELEMENTS;++a)this[a]=i;return this.check()}},{key:"addScalar",value:function(i){for(var a=0;a<this.ELEMENTS;++a)this[a]+=i;return this.check()}},{key:"subScalar",value:function(i){return this.addScalar(-i)}},{key:"multiplyScalar",value:function(i){for(var a=0;a<this.ELEMENTS;++a)this[a]*=i;return this.check()}},{key:"divideScalar",value:function(i){return this.multiplyByScalar(1/i)}},{key:"clampScalar",value:function(i,a){for(var o=0;o<this.ELEMENTS;++o)this[o]=Math.min(Math.max(this[o],i),a);return this.check()}},{key:"elements",get:function(){return this}}]),e}(che(Array));function fhe(t,r){if(t.length!==r)return!1;for(var e=0;e<t.length;++e)if(!Number.isFinite(t[e]))return!1;return!0}function ca(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function ad(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(uo.debug&&!fhe(t,r))throw new Error("math.gl: ".concat(e," some fields set to invalid numbers'"));return t}function hhe(t){var r=phe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function phe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Gg=function(t){Ke(e,t);var r=hhe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"x",get:function(){return this[0]},set:function(i){this[0]=ca(i)}},{key:"y",get:function(){return this[1]},set:function(i){this[1]=ca(i)}},{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return this.len()}},{key:"lengthSquared",value:function(){for(var i=0,a=0;a<this.ELEMENTS;++a)i+=this[a]*this[a];return i}},{key:"magnitudeSquared",value:function(){return this.lengthSquared()}},{key:"distance",value:function(i){return Math.sqrt(this.distanceSquared(i))}},{key:"distanceSquared",value:function(i){for(var a=0,o=0;o<this.ELEMENTS;++o){var s=this[o]-i[o];a+=s*s}return ca(a)}},{key:"dot",value:function(i){for(var a=0,o=0;o<this.ELEMENTS;++o)a+=this[o]*i[o];return ca(a)}},{key:"normalize",value:function(){var i=this.magnitude();if(i!==0)for(var a=0;a<this.ELEMENTS;++a)this[a]/=i;return this.check()}},{key:"multiply",value:function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];for(var s=0,u=a;s<u.length;s++)for(var c=u[s],h=0;h<this.ELEMENTS;++h)this[h]*=c[h];return this.check()}},{key:"divide",value:function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];for(var s=0,u=a;s<u.length;s++)for(var c=u[s],h=0;h<this.ELEMENTS;++h)this[h]/=c[h];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(i){return this.distance(i)}},{key:"distanceToSquared",value:function(i){return this.distanceSquared(i)}},{key:"getComponent",value:function(i){return Ca(i>=0&&i<this.ELEMENTS,"index is out of range"),ca(this[i])}},{key:"setComponent",value:function(i,a){return Ca(i>=0&&i<this.ELEMENTS,"index is out of range"),this[i]=a,this.check()}},{key:"addVectors",value:function(i,a){return this.copy(i).add(a)}},{key:"subVectors",value:function(i,a){return this.copy(i).subtract(a)}},{key:"multiplyVectors",value:function(i,a){return this.copy(i).multiply(a)}},{key:"addScaledVector",value:function(i,a){return this.add(new this.constructor(i).multiplyScalar(a))}}]),e}(jg);var Co=1e-6,$u=typeof Float32Array<"u"?Float32Array:Array;var LKe=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,r=arguments.length;r--;)t+=arguments[r]*arguments[r];return Math.sqrt(t)});function dhe(){var t=new $u(2);return $u!=Float32Array&&(t[0]=0,t[1]=0),t}function x_(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t}function mhe(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t}function lU(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t}function cU(t){var r=t[0],e=t[1];return Math.hypot(r,e)}function fU(t,r){return t[0]=-r[0],t[1]=-r[1],t}function ew(t,r,e,n){var i=r[0],a=r[1];return t[0]=i+n*(e[0]-i),t[1]=a+n*(e[1]-a),t}function hU(t,r,e){var n=r[0],i=r[1];return t[0]=e[0]*n+e[2]*i,t[1]=e[1]*n+e[3]*i,t}function pU(t,r,e){var n=r[0],i=r[1];return t[0]=e[0]*n+e[2]*i+e[4],t[1]=e[1]*n+e[3]*i+e[5],t}function tw(t,r,e){var n=r[0],i=r[1];return t[0]=e[0]*n+e[3]*i+e[6],t[1]=e[1]*n+e[4]*i+e[7],t}function rw(t,r,e){var n=r[0],i=r[1];return t[0]=e[0]*n+e[4]*i+e[12],t[1]=e[1]*n+e[5]*i+e[13],t}var dU=mhe;var kKe=function(){var t=dhe();return function(r,e,n,i,a,o){var s,u;for(e||(e=2),n||(n=0),i?u=Math.min(i*e+n,r.length):u=r.length,s=n;s<u;s+=e)t[0]=r[s],t[1]=r[s+1],a(t,t,o),r[s]=t[0],r[s+1]=t[1];return r}}();function nw(t,r,e){var n=r[0],i=r[1],a=e[3]*n+e[7]*i||1;return t[0]=(e[0]*n+e[4]*i)/a,t[1]=(e[1]*n+e[5]*i)/a,t}function iw(t,r,e){var n=r[0],i=r[1],a=r[2],o=e[3]*n+e[7]*i+e[11]*a||1;return t[0]=(e[0]*n+e[4]*i+e[8]*a)/o,t[1]=(e[1]*n+e[5]*i+e[9]*a)/o,t[2]=(e[2]*n+e[6]*i+e[10]*a)/o,t}function mU(t,r,e){var n=r[0],i=r[1];return t[0]=e[0]*n+e[2]*i,t[1]=e[1]*n+e[3]*i,t[2]=r[2],t}function vU(t,r,e){var n=r[0],i=r[1];return t[0]=e[0]*n+e[2]*i,t[1]=e[1]*n+e[3]*i,t[2]=r[2],t[3]=r[3],t}function aw(t,r,e){var n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n+e[3]*i+e[6]*a,t[1]=e[1]*n+e[4]*i+e[7]*a,t[2]=e[2]*n+e[5]*i+e[8]*a,t[3]=r[3],t}function vhe(t){var r=ghe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function ghe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var yf=function(t){Ke(e,t);var r=vhe(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return ce(this,e),n=r.call(this,2),Ml(i)&&arguments.length===1?n.copy(i):(uo.debug&&(ca(i),ca(a)),n[0]=i,n[1]=a),n}return ve(e,[{key:"set",value:function(i,a){return this[0]=i,this[1]=a,this.check()}},{key:"copy",value:function(i){return this[0]=i[0],this[1]=i[1],this.check()}},{key:"fromObject",value:function(i){return uo.debug&&(ca(i.x),ca(i.y)),this[0]=i.x,this[1]=i.y,this.check()}},{key:"toObject",value:function(i){return i.x=this[0],i.y=this[1],i}},{key:"ELEMENTS",get:function(){return 2}},{key:"horizontalAngle",value:function(){return Math.atan2(this.y,this.x)}},{key:"verticalAngle",value:function(){return Math.atan2(this.x,this.y)}},{key:"transform",value:function(i){return this.transformAsPoint(i)}},{key:"transformAsPoint",value:function(i){return rw(this,this,i),this.check()}},{key:"transformAsVector",value:function(i){return nw(this,this,i),this.check()}},{key:"transformByMatrix3",value:function(i){return tw(this,this,i),this.check()}},{key:"transformByMatrix2x3",value:function(i){return pU(this,this,i),this.check()}},{key:"transformByMatrix2",value:function(i){return hU(this,this,i),this.check()}}]),e}(Gg);at();vt();function $O(){var t=new $u(3);return $u!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function w_(t){var r=t[0],e=t[1],n=t[2];return Math.hypot(r,e,n)}function JO(t,r,e){var n=new $u(3);return n[0]=t,n[1]=r,n[2]=e,n}function gU(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t}function Ahe(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t}function AU(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t}function yU(t,r){var e=r[0],n=r[1],i=r[2],a=e*e+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t}function T_(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function Hg(t,r,e){var n=r[0],i=r[1],a=r[2],o=e[0],s=e[1],u=e[2];return t[0]=i*u-a*s,t[1]=a*o-n*u,t[2]=n*s-i*o,t}function Wg(t,r,e){var n=r[0],i=r[1],a=r[2],o=e[3]*n+e[7]*i+e[11]*a+e[15];return o=o||1,t[0]=(e[0]*n+e[4]*i+e[8]*a+e[12])/o,t[1]=(e[1]*n+e[5]*i+e[9]*a+e[13])/o,t[2]=(e[2]*n+e[6]*i+e[10]*a+e[14])/o,t}function ow(t,r,e){var n=r[0],i=r[1],a=r[2];return t[0]=n*e[0]+i*e[3]+a*e[6],t[1]=n*e[1]+i*e[4]+a*e[7],t[2]=n*e[2]+i*e[5]+a*e[8],t}function sw(t,r,e){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],u=r[1],c=r[2],h=i*c-a*u,p=a*s-n*c,v=n*u-i*s,x=i*v-a*p,E=a*h-n*v,R=n*p-i*h,D=o*2;return h*=D,p*=D,v*=D,x*=2,E*=2,R*=2,t[0]=s+h+x,t[1]=u+p+E,t[2]=c+v+R,t}function _U(t,r,e,n){var i=[],a=[];return i[0]=r[0]-e[0],i[1]=r[1]-e[1],i[2]=r[2]-e[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function bU(t,r,e,n){var i=[],a=[];return i[0]=r[0]-e[0],i[1]=r[1]-e[1],i[2]=r[2]-e[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function xU(t,r,e,n){var i=[],a=[];return i[0]=r[0]-e[0],i[1]=r[1]-e[1],i[2]=r[2]-e[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function wU(t,r){var e=t[0],n=t[1],i=t[2],a=r[0],o=r[1],s=r[2],u=Math.sqrt(e*e+n*n+i*i),c=Math.sqrt(a*a+o*o+s*s),h=u*c,p=h&&T_(t,r)/h;return Math.acos(Math.min(Math.max(p,-1),1))}var TU=Ahe;var SU=w_;var qKe=function(){var t=$O();return function(r,e,n,i,a,o){var s,u;for(e||(e=3),n||(n=0),i?u=Math.min(i*e+n,r.length):u=r.length,s=n;s<u;s+=e)t[0]=r[s],t[1]=r[s+1],t[2]=r[s+2],a(t,t,o),r[s]=t[0],r[s+1]=t[1],r[s+2]=t[2];return r}}();function yhe(t){var r=_he();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function _he(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var QO=[0,0,0],uw,_t=function(t){Ke(e,t);var r=yhe(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return ce(this,e),n=r.call(this,-0,-0,-0),arguments.length===1&&Ml(i)?n.copy(i):(uo.debug&&(ca(i),ca(a),ca(o)),n[0]=i,n[1]=a,n[2]=o),n}return ve(e,[{key:"set",value:function(i,a,o){return this[0]=i,this[1]=a,this[2]=o,this.check()}},{key:"copy",value:function(i){return this[0]=i[0],this[1]=i[1],this[2]=i[2],this.check()}},{key:"fromObject",value:function(i){return uo.debug&&(ca(i.x),ca(i.y),ca(i.z)),this[0]=i.x,this[1]=i.y,this[2]=i.z,this.check()}},{key:"toObject",value:function(i){return i.x=this[0],i.y=this[1],i.z=this[2],i}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(i){this[2]=ca(i)}},{key:"angle",value:function(i){return wU(this,i)}},{key:"cross",value:function(i){return Hg(this,this,i),this.check()}},{key:"rotateX",value:function(i){var a=i.radians,o=i.origin,s=o===void 0?QO:o;return _U(this,this,s,a),this.check()}},{key:"rotateY",value:function(i){var a=i.radians,o=i.origin,s=o===void 0?QO:o;return bU(this,this,s,a),this.check()}},{key:"rotateZ",value:function(i){var a=i.radians,o=i.origin,s=o===void 0?QO:o;return xU(this,this,s,a),this.check()}},{key:"transform",value:function(i){return this.transformAsPoint(i)}},{key:"transformAsPoint",value:function(i){return Wg(this,this,i),this.check()}},{key:"transformAsVector",value:function(i){return iw(this,this,i),this.check()}},{key:"transformByMatrix3",value:function(i){return ow(this,this,i),this.check()}},{key:"transformByMatrix2",value:function(i){return mU(this,this,i),this.check()}},{key:"transformByQuaternion",value:function(i){return sw(this,this,i),this.check()}}],[{key:"ZERO",get:function(){return uw||(uw=new e(0,0,0),Object.freeze(uw)),uw}}]),e}(Gg);at();vt();function bhe(t){var r=xhe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function xhe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var lw,EU=function(t){Ke(e,t);var r=bhe(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return ce(this,e),n=r.call(this,-0,-0,-0,-0),Ml(i)&&arguments.length===1?n.copy(i):(uo.debug&&(ca(i),ca(a),ca(o),ca(s)),n[0]=i,n[1]=a,n[2]=o,n[3]=s),n}return ve(e,[{key:"set",value:function(i,a,o,s){return this[0]=i,this[1]=a,this[2]=o,this[3]=s,this.check()}},{key:"copy",value:function(i){return this[0]=i[0],this[1]=i[1],this[2]=i[2],this[3]=i[3],this.check()}},{key:"fromObject",value:function(i){return uo.debug&&(ca(i.x),ca(i.y),ca(i.z),ca(i.w)),this[0]=i.x,this[1]=i.y,this[2]=i.z,this[3]=i.w,this}},{key:"toObject",value:function(i){return i.x=this[0],i.y=this[1],i.z=this[2],i.w=this[3],i}},{key:"ELEMENTS",get:function(){return 4}},{key:"z",get:function(){return this[2]},set:function(i){this[2]=ca(i)}},{key:"w",get:function(){return this[3]},set:function(i){this[3]=ca(i)}},{key:"transform",value:function(i){return Wg(this,this,i),this.check()}},{key:"transformByMatrix3",value:function(i){return aw(this,this,i),this.check()}},{key:"transformByMatrix2",value:function(i){return vU(this,this,i),this.check()}},{key:"transformByQuaternion",value:function(i){return sw(this,this,i),this.check()}},{key:"applyMatrix4",value:function(i){return i.transform(this,this),this}}],[{key:"ZERO",get:function(){return lw||(lw=new e(0,0,0,0),Object.freeze(lw)),lw}}]),e}(Gg);at();vt();at();vt();function whe(t){var r=The();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function The(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var cw=function(t){Ke(e,t);var r=whe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"toString",value:function(){var i="[";if(uo.printRowMajor){i+="row-major:";for(var a=0;a<this.RANK;++a)for(var o=0;o<this.RANK;++o)i+=" ".concat(this[o*this.RANK+a])}else{i+="column-major:";for(var s=0;s<this.ELEMENTS;++s)i+=" ".concat(this[s])}return i+="]",i}},{key:"getElementIndex",value:function(i,a){return a*this.RANK+i}},{key:"getElement",value:function(i,a){return this[a*this.RANK+i]}},{key:"setElement",value:function(i,a,o){return this[a*this.RANK+i]=ca(o),this}},{key:"getColumn",value:function(i){for(var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Array(this.RANK).fill(-0),o=i*this.RANK,s=0;s<this.RANK;++s)a[s]=this[o+s];return a}},{key:"setColumn",value:function(i,a){for(var o=i*this.RANK,s=0;s<this.RANK;++s)this[o+s]=a[s];return this}}]),e}(jg);function CU(){var t=new $u(9);return $u!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function PU(t,r){if(t===r){var e=r[1],n=r[2],i=r[5];t[1]=r[3],t[2]=r[6],t[3]=e,t[5]=r[7],t[6]=n,t[7]=i}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t}function OU(t,r){var e=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],u=r[6],c=r[7],h=r[8],p=h*o-s*c,v=-h*a+s*u,x=c*a-o*u,E=e*p+n*v+i*x;return E?(E=1/E,t[0]=p*E,t[1]=(-h*n+i*c)*E,t[2]=(s*n-i*o)*E,t[3]=v*E,t[4]=(h*e-i*u)*E,t[5]=(-s*e+i*a)*E,t[6]=x*E,t[7]=(-c*e+n*u)*E,t[8]=(o*e-n*a)*E,t):null}function MU(t){var r=t[0],e=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],c=t[8];return r*(c*a-o*u)+e*(-c*i+o*s)+n*(u*i-a*s)}function eM(t,r,e){var n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],u=r[5],c=r[6],h=r[7],p=r[8],v=e[0],x=e[1],E=e[2],R=e[3],D=e[4],H=e[5],W=e[6],$=e[7],J=e[8];return t[0]=v*n+x*o+E*c,t[1]=v*i+x*s+E*h,t[2]=v*a+x*u+E*p,t[3]=R*n+D*o+H*c,t[4]=R*i+D*s+H*h,t[5]=R*a+D*u+H*p,t[6]=W*n+$*o+J*c,t[7]=W*i+$*s+J*h,t[8]=W*a+$*u+J*p,t}function IU(t,r,e){var n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],u=r[5],c=r[6],h=r[7],p=r[8],v=e[0],x=e[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=v*n+x*o+c,t[7]=v*i+x*s+h,t[8]=v*a+x*u+p,t}function RU(t,r,e){var n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],u=r[5],c=r[6],h=r[7],p=r[8],v=Math.sin(e),x=Math.cos(e);return t[0]=x*n+v*o,t[1]=x*i+v*s,t[2]=x*a+v*u,t[3]=x*o-v*n,t[4]=x*s-v*i,t[5]=x*u-v*a,t[6]=c,t[7]=h,t[8]=p,t}function tM(t,r,e){var n=e[0],i=e[1];return t[0]=n*r[0],t[1]=n*r[1],t[2]=n*r[2],t[3]=i*r[3],t[4]=i*r[4],t[5]=i*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function LU(t,r){var e=r[0],n=r[1],i=r[2],a=r[3],o=e+e,s=n+n,u=i+i,c=e*o,h=n*o,p=n*s,v=i*o,x=i*s,E=i*u,R=a*o,D=a*s,H=a*u;return t[0]=1-p-E,t[3]=h-H,t[6]=v+D,t[1]=h+H,t[4]=1-c-E,t[7]=x-R,t[2]=v-D,t[5]=x+R,t[8]=1-c-p,t}function She(t){var r=Ehe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Ehe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var rM;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"})(rM||(rM={}));var Che=Object.freeze([1,0,0,0,1,0,0,0,1]),lo=function(t){Ke(e,t);var r=She(e);function e(n){for(var i,a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];return ce(this,e),i=r.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(n)?i.copy(n):o.length>0?i.copy([n].concat(o)):i.identity(),i}return ve(e,[{key:"ELEMENTS",get:function(){return 9}},{key:"RANK",get:function(){return 3}},{key:"INDICES",get:function(){return rM}},{key:"copy",value:function(i){return this[0]=i[0],this[1]=i[1],this[2]=i[2],this[3]=i[3],this[4]=i[4],this[5]=i[5],this[6]=i[6],this[7]=i[7],this[8]=i[8],this.check()}},{key:"identity",value:function(){return this.copy(Che)}},{key:"fromObject",value:function(i){return this.check()}},{key:"fromQuaternion",value:function(i){return LU(this,i),this.check()}},{key:"set",value:function(i,a,o,s,u,c,h,p,v){return this[0]=i,this[1]=a,this[2]=o,this[3]=s,this[4]=u,this[5]=c,this[6]=h,this[7]=p,this[8]=v,this.check()}},{key:"setRowMajor",value:function(i,a,o,s,u,c,h,p,v){return this[0]=i,this[1]=s,this[2]=h,this[3]=a,this[4]=u,this[5]=p,this[6]=o,this[7]=c,this[8]=v,this.check()}},{key:"determinant",value:function(){return MU(this)}},{key:"transpose",value:function(){return PU(this,this),this.check()}},{key:"invert",value:function(){return OU(this,this),this.check()}},{key:"multiplyLeft",value:function(i){return eM(this,i,this),this.check()}},{key:"multiplyRight",value:function(i){return eM(this,this,i),this.check()}},{key:"rotate",value:function(i){return RU(this,this,i),this.check()}},{key:"scale",value:function(i){return Array.isArray(i)?tM(this,this,i):tM(this,this,[i,i]),this.check()}},{key:"translate",value:function(i){return IU(this,this,i),this.check()}},{key:"transform",value:function(i,a){var o;switch(i.length){case 2:o=tw(a||[-0,-0],i,this);break;case 3:o=ow(a||[-0,-0,-0],i,this);break;case 4:o=aw(a||[-0,-0,-0,-0],i,this);break;default:throw new Error("Illegal vector")}return ad(o,i.length),o}},{key:"transformVector",value:function(i,a){return this.transform(i,a)}},{key:"transformVector2",value:function(i,a){return this.transform(i,a)}},{key:"transformVector3",value:function(i,a){return this.transform(i,a)}}],[{key:"IDENTITY",get:function(){return Ohe()}},{key:"ZERO",get:function(){return Phe()}}]),e}(cw);var fw,hw;function Phe(){return fw||(fw=new lo([0,0,0,0,0,0,0,0,0]),Object.freeze(fw)),fw}function Ohe(){return hw||(hw=new lo,Object.freeze(hw)),hw}at();vt();function Mhe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function BU(t,r){if(t===r){var e=r[1],n=r[2],i=r[3],a=r[6],o=r[7],s=r[11];t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=e,t[6]=r[9],t[7]=r[13],t[8]=n,t[9]=a,t[11]=r[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=r[0],t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=r[1],t[5]=r[5],t[6]=r[9],t[7]=r[13],t[8]=r[2],t[9]=r[6],t[10]=r[10],t[11]=r[14],t[12]=r[3],t[13]=r[7],t[14]=r[11],t[15]=r[15];return t}function pw(t,r){var e=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],u=r[6],c=r[7],h=r[8],p=r[9],v=r[10],x=r[11],E=r[12],R=r[13],D=r[14],H=r[15],W=e*s-n*o,$=e*u-i*o,J=e*c-a*o,B=n*u-i*s,se=n*c-a*s,V=i*c-a*u,X=h*R-p*E,I=h*D-v*E,O=h*H-x*E,U=p*D-v*R,re=p*H-x*R,ee=v*H-x*D,pe=W*ee-$*re+J*U+B*O-se*I+V*X;return pe?(pe=1/pe,t[0]=(s*ee-u*re+c*U)*pe,t[1]=(i*re-n*ee-a*U)*pe,t[2]=(R*V-D*se+H*B)*pe,t[3]=(v*se-p*V-x*B)*pe,t[4]=(u*O-o*ee-c*I)*pe,t[5]=(e*ee-i*O+a*I)*pe,t[6]=(D*J-E*V-H*$)*pe,t[7]=(h*V-v*J+x*$)*pe,t[8]=(o*re-s*O+c*X)*pe,t[9]=(n*O-e*re-a*X)*pe,t[10]=(E*se-R*J+H*W)*pe,t[11]=(p*J-h*se-x*W)*pe,t[12]=(s*I-o*U-u*X)*pe,t[13]=(e*U-n*I+i*X)*pe,t[14]=(R*$-E*B-D*W)*pe,t[15]=(h*B-p*$+v*W)*pe,t):null}function DU(t){var r=t[0],e=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],c=t[8],h=t[9],p=t[10],v=t[11],x=t[12],E=t[13],R=t[14],D=t[15],H=r*o-e*a,W=r*s-n*a,$=r*u-i*a,J=e*s-n*o,B=e*u-i*o,se=n*u-i*s,V=c*E-h*x,X=c*R-p*x,I=c*D-v*x,O=h*R-p*E,U=h*D-v*E,re=p*D-v*R;return H*re-W*U+$*O+J*I-B*X+se*V}function Im(t,r,e){var n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],u=r[5],c=r[6],h=r[7],p=r[8],v=r[9],x=r[10],E=r[11],R=r[12],D=r[13],H=r[14],W=r[15],$=e[0],J=e[1],B=e[2],se=e[3];return t[0]=$*n+J*s+B*p+se*R,t[1]=$*i+J*u+B*v+se*D,t[2]=$*a+J*c+B*x+se*H,t[3]=$*o+J*h+B*E+se*W,$=e[4],J=e[5],B=e[6],se=e[7],t[4]=$*n+J*s+B*p+se*R,t[5]=$*i+J*u+B*v+se*D,t[6]=$*a+J*c+B*x+se*H,t[7]=$*o+J*h+B*E+se*W,$=e[8],J=e[9],B=e[10],se=e[11],t[8]=$*n+J*s+B*p+se*R,t[9]=$*i+J*u+B*v+se*D,t[10]=$*a+J*c+B*x+se*H,t[11]=$*o+J*h+B*E+se*W,$=e[12],J=e[13],B=e[14],se=e[15],t[12]=$*n+J*s+B*p+se*R,t[13]=$*i+J*u+B*v+se*D,t[14]=$*a+J*c+B*x+se*H,t[15]=$*o+J*h+B*E+se*W,t}function Rm(t,r,e){var n=e[0],i=e[1],a=e[2],o,s,u,c,h,p,v,x,E,R,D,H;return r===t?(t[12]=r[0]*n+r[4]*i+r[8]*a+r[12],t[13]=r[1]*n+r[5]*i+r[9]*a+r[13],t[14]=r[2]*n+r[6]*i+r[10]*a+r[14],t[15]=r[3]*n+r[7]*i+r[11]*a+r[15]):(o=r[0],s=r[1],u=r[2],c=r[3],h=r[4],p=r[5],v=r[6],x=r[7],E=r[8],R=r[9],D=r[10],H=r[11],t[0]=o,t[1]=s,t[2]=u,t[3]=c,t[4]=h,t[5]=p,t[6]=v,t[7]=x,t[8]=E,t[9]=R,t[10]=D,t[11]=H,t[12]=o*n+h*i+E*a+r[12],t[13]=s*n+p*i+R*a+r[13],t[14]=u*n+v*i+D*a+r[14],t[15]=c*n+x*i+H*a+r[15]),t}function qg(t,r,e){var n=e[0],i=e[1],a=e[2];return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*i,t[5]=r[5]*i,t[6]=r[6]*i,t[7]=r[7]*i,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,t[11]=r[11]*a,t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function FU(t,r,e,n){var i=n[0],a=n[1],o=n[2],s=Math.hypot(i,a,o),u,c,h,p,v,x,E,R,D,H,W,$,J,B,se,V,X,I,O,U,re,ee,pe,je;return s<Co?null:(s=1/s,i*=s,a*=s,o*=s,u=Math.sin(e),c=Math.cos(e),h=1-c,p=r[0],v=r[1],x=r[2],E=r[3],R=r[4],D=r[5],H=r[6],W=r[7],$=r[8],J=r[9],B=r[10],se=r[11],V=i*i*h+c,X=a*i*h+o*u,I=o*i*h-a*u,O=i*a*h-o*u,U=a*a*h+c,re=o*a*h+i*u,ee=i*o*h+a*u,pe=a*o*h-i*u,je=o*o*h+c,t[0]=p*V+R*X+$*I,t[1]=v*V+D*X+J*I,t[2]=x*V+H*X+B*I,t[3]=E*V+W*X+se*I,t[4]=p*O+R*U+$*re,t[5]=v*O+D*U+J*re,t[6]=x*O+H*U+B*re,t[7]=E*O+W*U+se*re,t[8]=p*ee+R*pe+$*je,t[9]=v*ee+D*pe+J*je,t[10]=x*ee+H*pe+B*je,t[11]=E*ee+W*pe+se*je,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)}function dw(t,r,e){var n=Math.sin(e),i=Math.cos(e),a=r[4],o=r[5],s=r[6],u=r[7],c=r[8],h=r[9],p=r[10],v=r[11];return r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[4]=a*i+c*n,t[5]=o*i+h*n,t[6]=s*i+p*n,t[7]=u*i+v*n,t[8]=c*i-a*n,t[9]=h*i-o*n,t[10]=p*i-s*n,t[11]=v*i-u*n,t}function NU(t,r,e){var n=Math.sin(e),i=Math.cos(e),a=r[0],o=r[1],s=r[2],u=r[3],c=r[8],h=r[9],p=r[10],v=r[11];return r!==t&&(t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=a*i-c*n,t[1]=o*i-h*n,t[2]=s*i-p*n,t[3]=u*i-v*n,t[8]=a*n+c*i,t[9]=o*n+h*i,t[10]=s*n+p*i,t[11]=u*n+v*i,t}function mw(t,r,e){var n=Math.sin(e),i=Math.cos(e),a=r[0],o=r[1],s=r[2],u=r[3],c=r[4],h=r[5],p=r[6],v=r[7];return r!==t&&(t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=a*i+c*n,t[1]=o*i+h*n,t[2]=s*i+p*n,t[3]=u*i+v*n,t[4]=c*i-a*n,t[5]=h*i-o*n,t[6]=p*i-s*n,t[7]=v*i-u*n,t}function zU(t,r){var e=r[0],n=r[1],i=r[2],a=r[4],o=r[5],s=r[6],u=r[8],c=r[9],h=r[10];return t[0]=Math.hypot(e,n,i),t[1]=Math.hypot(a,o,s),t[2]=Math.hypot(u,c,h),t}function UU(t,r){var e=r[0],n=r[1],i=r[2],a=r[3],o=e+e,s=n+n,u=i+i,c=e*o,h=n*o,p=n*s,v=i*o,x=i*s,E=i*u,R=a*o,D=a*s,H=a*u;return t[0]=1-p-E,t[1]=h+H,t[2]=v-D,t[3]=0,t[4]=h-H,t[5]=1-c-E,t[6]=x+R,t[7]=0,t[8]=v+D,t[9]=x-R,t[10]=1-c-p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function jU(t,r,e,n,i,a,o){var s=1/(e-r),u=1/(i-n),c=1/(a-o);return t[0]=a*2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a*2*u,t[6]=0,t[7]=0,t[8]=(e+r)*s,t[9]=(i+n)*u,t[10]=(o+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*c,t[15]=0,t}function Ihe(t,r,e,n,i){var a=1/Math.tan(r/2),o;return t[0]=a/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(n-i),t[10]=(i+n)*o,t[14]=2*i*n*o):(t[10]=-1,t[14]=-2*n),t}var vw=Ihe;function Rhe(t,r,e,n,i,a,o){var s=1/(r-e),u=1/(n-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(r+e)*s,t[13]=(i+n)*u,t[14]=(o+a)*c,t[15]=1,t}var GU=Rhe;function VU(t,r,e,n){var i,a,o,s,u,c,h,p,v,x,E=r[0],R=r[1],D=r[2],H=n[0],W=n[1],$=n[2],J=e[0],B=e[1],se=e[2];return Math.abs(E-J)<Co&&Math.abs(R-B)<Co&&Math.abs(D-se)<Co?Mhe(t):(h=E-J,p=R-B,v=D-se,x=1/Math.hypot(h,p,v),h*=x,p*=x,v*=x,i=W*v-$*p,a=$*h-H*v,o=H*p-W*h,x=Math.hypot(i,a,o),x?(x=1/x,i*=x,a*=x,o*=x):(i=0,a=0,o=0),s=p*o-v*a,u=v*i-h*o,c=h*a-p*i,x=Math.hypot(s,u,c),x?(x=1/x,s*=x,u*=x,c*=x):(s=0,u=0,c=0),t[0]=i,t[1]=s,t[2]=h,t[3]=0,t[4]=a,t[5]=u,t[6]=p,t[7]=0,t[8]=o,t[9]=c,t[10]=v,t[11]=0,t[12]=-(i*E+a*R+o*D),t[13]=-(s*E+u*R+c*D),t[14]=-(h*E+p*R+v*D),t[15]=1,t)}function nM(t,r){var e=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],h=t[8],p=t[9],v=t[10],x=t[11],E=t[12],R=t[13],D=t[14],H=t[15],W=r[0],$=r[1],J=r[2],B=r[3],se=r[4],V=r[5],X=r[6],I=r[7],O=r[8],U=r[9],re=r[10],ee=r[11],pe=r[12],je=r[13],qe=r[14],We=r[15];return Math.abs(e-W)<=Co*Math.max(1,Math.abs(e),Math.abs(W))&&Math.abs(n-$)<=Co*Math.max(1,Math.abs(n),Math.abs($))&&Math.abs(i-J)<=Co*Math.max(1,Math.abs(i),Math.abs(J))&&Math.abs(a-B)<=Co*Math.max(1,Math.abs(a),Math.abs(B))&&Math.abs(o-se)<=Co*Math.max(1,Math.abs(o),Math.abs(se))&&Math.abs(s-V)<=Co*Math.max(1,Math.abs(s),Math.abs(V))&&Math.abs(u-X)<=Co*Math.max(1,Math.abs(u),Math.abs(X))&&Math.abs(c-I)<=Co*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(h-O)<=Co*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(p-U)<=Co*Math.max(1,Math.abs(p),Math.abs(U))&&Math.abs(v-re)<=Co*Math.max(1,Math.abs(v),Math.abs(re))&&Math.abs(x-ee)<=Co*Math.max(1,Math.abs(x),Math.abs(ee))&&Math.abs(E-pe)<=Co*Math.max(1,Math.abs(E),Math.abs(pe))&&Math.abs(R-je)<=Co*Math.max(1,Math.abs(R),Math.abs(je))&&Math.abs(D-qe)<=Co*Math.max(1,Math.abs(D),Math.abs(qe))&&Math.abs(H-We)<=Co*Math.max(1,Math.abs(H),Math.abs(We))}function Lhe(){var t=new $u(4);return $u!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function HU(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function Aw(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function WU(t){var r=t[0],e=t[1],n=t[2],i=t[3];return Math.hypot(r,e,n,i)}function qU(t){var r=t[0],e=t[1],n=t[2],i=t[3];return r*r+e*e+n*n+i*i}function XU(t,r){var e=r[0],n=r[1],i=r[2],a=r[3],o=e*e+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=e*o,t[1]=n*o,t[2]=i*o,t[3]=a*o,t}function YU(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]}function KU(t,r,e,n){var i=r[0],a=r[1],o=r[2],s=r[3];return t[0]=i+n*(e[0]-i),t[1]=a+n*(e[1]-a),t[2]=o+n*(e[2]-o),t[3]=s+n*(e[3]-s),t}function yw(t,r,e){var n=r[0],i=r[1],a=r[2],o=r[3];return t[0]=e[0]*n+e[4]*i+e[8]*a+e[12]*o,t[1]=e[1]*n+e[5]*i+e[9]*a+e[13]*o,t[2]=e[2]*n+e[6]*i+e[10]*a+e[14]*o,t[3]=e[3]*n+e[7]*i+e[11]*a+e[15]*o,t}function ZU(t,r,e){var n=r[0],i=r[1],a=r[2],o=e[0],s=e[1],u=e[2],c=e[3],h=c*n+s*a-u*i,p=c*i+u*n-o*a,v=c*a+o*i-s*n,x=-o*n-s*i-u*a;return t[0]=h*c+x*-o+p*-u-v*-s,t[1]=p*c+x*-s+v*-o-h*-u,t[2]=v*c+x*-u+h*-s-p*-o,t[3]=r[3],t}var IZe=function(){var t=Lhe();return function(r,e,n,i,a,o){var s,u;for(e||(e=4),n||(n=0),i?u=Math.min(i*e+n,r.length):u=r.length,s=n;s<u;s+=e)t[0]=r[s],t[1]=r[s+1],t[2]=r[s+2],t[3]=r[s+3],a(t,t,o),r[s]=t[0],r[s+1]=t[1],r[s+2]=t[2],r[s+3]=t[3];return r}}();function khe(t){var r=Bhe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Bhe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var sM;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(sM||(sM={}));var Dhe=45*Math.PI/180,Fhe=1,aM=.1,oM=500,Nhe=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),gn=function(t){Ke(e,t);var r=khe(e);function e(n){var i;return ce(this,e),i=r.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(n)?i.copy(n):i.identity(),i}return ve(e,[{key:"ELEMENTS",get:function(){return 16}},{key:"RANK",get:function(){return 4}},{key:"INDICES",get:function(){return sM}},{key:"copy",value:function(i){return this[0]=i[0],this[1]=i[1],this[2]=i[2],this[3]=i[3],this[4]=i[4],this[5]=i[5],this[6]=i[6],this[7]=i[7],this[8]=i[8],this[9]=i[9],this[10]=i[10],this[11]=i[11],this[12]=i[12],this[13]=i[13],this[14]=i[14],this[15]=i[15],this.check()}},{key:"set",value:function(i,a,o,s,u,c,h,p,v,x,E,R,D,H,W,$){return this[0]=i,this[1]=a,this[2]=o,this[3]=s,this[4]=u,this[5]=c,this[6]=h,this[7]=p,this[8]=v,this[9]=x,this[10]=E,this[11]=R,this[12]=D,this[13]=H,this[14]=W,this[15]=$,this.check()}},{key:"setRowMajor",value:function(i,a,o,s,u,c,h,p,v,x,E,R,D,H,W,$){return this[0]=i,this[1]=u,this[2]=v,this[3]=D,this[4]=a,this[5]=c,this[6]=x,this[7]=H,this[8]=o,this[9]=h,this[10]=E,this[11]=W,this[12]=s,this[13]=p,this[14]=R,this[15]=$,this.check()}},{key:"toRowMajor",value:function(i){return i[0]=this[0],i[1]=this[4],i[2]=this[8],i[3]=this[12],i[4]=this[1],i[5]=this[5],i[6]=this[9],i[7]=this[13],i[8]=this[2],i[9]=this[6],i[10]=this[10],i[11]=this[14],i[12]=this[3],i[13]=this[7],i[14]=this[11],i[15]=this[15],i}},{key:"identity",value:function(){return this.copy(Nhe)}},{key:"fromObject",value:function(i){return this.check()}},{key:"fromQuaternion",value:function(i){return UU(this,i),this.check()}},{key:"frustum",value:function(i){var a=i.left,o=i.right,s=i.bottom,u=i.top,c=i.near,h=c===void 0?aM:c,p=i.far,v=p===void 0?oM:p;return v===1/0?jhe(this,a,o,s,u,h):jU(this,a,o,s,u,h,v),this.check()}},{key:"lookAt",value:function(i){var a=i.eye,o=i.center,s=o===void 0?[0,0,0]:o,u=i.up,c=u===void 0?[0,1,0]:u;return VU(this,a,s,c),this.check()}},{key:"ortho",value:function(i){var a=i.left,o=i.right,s=i.bottom,u=i.top,c=i.near,h=c===void 0?aM:c,p=i.far,v=p===void 0?oM:p;return GU(this,a,o,s,u,h,v),this.check()}},{key:"orthographic",value:function(i){var a=i.fovy,o=a===void 0?Dhe:a,s=i.aspect,u=s===void 0?Fhe:s,c=i.focalDistance,h=c===void 0?1:c,p=i.near,v=p===void 0?aM:p,x=i.far,E=x===void 0?oM:x;$U(o);var R=o/2,D=h*Math.tan(R),H=D*u;return this.ortho({left:-H,right:H,bottom:-D,top:D,near:v,far:E})}},{key:"perspective",value:function(i){var a=i.fovy,o=a===void 0?45*Math.PI/180:a,s=i.aspect,u=s===void 0?1:s,c=i.near,h=c===void 0?.1:c,p=i.far,v=p===void 0?500:p;return $U(o),vw(this,o,u,h,v),this.check()}},{key:"determinant",value:function(){return DU(this)}},{key:"getScale",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[-0,-0,-0];return i[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),i[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),i[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),i}},{key:"getTranslation",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[-0,-0,-0];return i[0]=this[12],i[1]=this[13],i[2]=this[14],i}},{key:"getRotation",value:function(i,a){i=i||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],a=a||[-0,-0,-0];var o=this.getScale(a),s=1/o[0],u=1/o[1],c=1/o[2];return i[0]=this[0]*s,i[1]=this[1]*u,i[2]=this[2]*c,i[3]=0,i[4]=this[4]*s,i[5]=this[5]*u,i[6]=this[6]*c,i[7]=0,i[8]=this[8]*s,i[9]=this[9]*u,i[10]=this[10]*c,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},{key:"getRotationMatrix3",value:function(i,a){i=i||[-0,-0,-0,-0,-0,-0,-0,-0,-0],a=a||[-0,-0,-0];var o=this.getScale(a),s=1/o[0],u=1/o[1],c=1/o[2];return i[0]=this[0]*s,i[1]=this[1]*u,i[2]=this[2]*c,i[3]=this[4]*s,i[4]=this[5]*u,i[5]=this[6]*c,i[6]=this[8]*s,i[7]=this[9]*u,i[8]=this[10]*c,i}},{key:"transpose",value:function(){return BU(this,this),this.check()}},{key:"invert",value:function(){return pw(this,this),this.check()}},{key:"multiplyLeft",value:function(i){return Im(this,i,this),this.check()}},{key:"multiplyRight",value:function(i){return Im(this,this,i),this.check()}},{key:"rotateX",value:function(i){return dw(this,this,i),this.check()}},{key:"rotateY",value:function(i){return NU(this,this,i),this.check()}},{key:"rotateZ",value:function(i){return mw(this,this,i),this.check()}},{key:"rotateXYZ",value:function(i){return this.rotateX(i[0]).rotateY(i[1]).rotateZ(i[2])}},{key:"rotateAxis",value:function(i,a){return FU(this,this,i,a),this.check()}},{key:"scale",value:function(i){return qg(this,this,Array.isArray(i)?i:[i,i,i]),this.check()}},{key:"translate",value:function(i){return Rm(this,this,i),this.check()}},{key:"transform",value:function(i,a){return i.length===4?(a=yw(a||[-0,-0,-0,-0],i,this),ad(a,4),a):this.transformAsPoint(i,a)}},{key:"transformAsPoint",value:function(i,a){var o=i.length,s;switch(o){case 2:s=rw(a||[-0,-0],i,this);break;case 3:s=Wg(a||[-0,-0,-0],i,this);break;default:throw new Error("Illegal vector")}return ad(s,i.length),s}},{key:"transformAsVector",value:function(i,a){var o;switch(i.length){case 2:o=nw(a||[-0,-0],i,this);break;case 3:o=iw(a||[-0,-0,-0],i,this);break;default:throw new Error("Illegal vector")}return ad(o,i.length),o}},{key:"transformPoint",value:function(i,a){return this.transformAsPoint(i,a)}},{key:"transformVector",value:function(i,a){return this.transformAsPoint(i,a)}},{key:"transformDirection",value:function(i,a){return this.transformAsVector(i,a)}},{key:"makeRotationX",value:function(i){return this.identity().rotateX(i)}},{key:"makeTranslation",value:function(i,a,o){return this.identity().translate([i,a,o])}}],[{key:"IDENTITY",get:function(){return Uhe()}},{key:"ZERO",get:function(){return zhe()}}]),e}(cw);var _w,bw;function zhe(){return _w||(_w=new gn([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(_w)),_w}function Uhe(){return bw||(bw=new gn,Object.freeze(bw)),bw}function $U(t){if(t>Math.PI*2)throw Error("expected radians")}function jhe(t,r,e,n,i,a){var o=2*a/(e-r),s=2*a/(i-n),u=(e+r)/(e-r),c=(i+n)/(i-n),h=-1,p=-1,v=-2*a;return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=u,t[9]=c,t[10]=h,t[11]=p,t[12]=0,t[13]=0,t[14]=v,t[15]=0,t}at();vt();function JU(){var t=new $u(4);return $u!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function QU(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function uM(t,r,e){e=e*.5;var n=Math.sin(e);return t[0]=n*r[0],t[1]=n*r[1],t[2]=n*r[2],t[3]=Math.cos(e),t}function lM(t,r,e){var n=r[0],i=r[1],a=r[2],o=r[3],s=e[0],u=e[1],c=e[2],h=e[3];return t[0]=n*h+o*s+i*c-a*u,t[1]=i*h+o*u+a*s-n*c,t[2]=a*h+o*c+n*u-i*s,t[3]=o*h-n*s-i*u-a*c,t}function e6(t,r,e){e*=.5;var n=r[0],i=r[1],a=r[2],o=r[3],s=Math.sin(e),u=Math.cos(e);return t[0]=n*u+o*s,t[1]=i*u+a*s,t[2]=a*u-i*s,t[3]=o*u-n*s,t}function t6(t,r,e){e*=.5;var n=r[0],i=r[1],a=r[2],o=r[3],s=Math.sin(e),u=Math.cos(e);return t[0]=n*u-a*s,t[1]=i*u+o*s,t[2]=a*u+n*s,t[3]=o*u-i*s,t}function r6(t,r,e){e*=.5;var n=r[0],i=r[1],a=r[2],o=r[3],s=Math.sin(e),u=Math.cos(e);return t[0]=n*u+i*s,t[1]=i*u-n*s,t[2]=a*u+o*s,t[3]=o*u-a*s,t}function n6(t,r){var e=r[0],n=r[1],i=r[2];return t[0]=e,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-e*e-n*n-i*i)),t}function S_(t,r,e,n){var i=r[0],a=r[1],o=r[2],s=r[3],u=e[0],c=e[1],h=e[2],p=e[3],v,x,E,R,D;return x=i*u+a*c+o*h+s*p,x<0&&(x=-x,u=-u,c=-c,h=-h,p=-p),1-x>Co?(v=Math.acos(x),E=Math.sin(v),R=Math.sin((1-n)*v)/E,D=Math.sin(n*v)/E):(R=1-n,D=n),t[0]=R*i+D*u,t[1]=R*a+D*c,t[2]=R*o+D*h,t[3]=R*s+D*p,t}function i6(t,r){var e=r[0],n=r[1],i=r[2],a=r[3],o=e*e+n*n+i*i+a*a,s=o?1/o:0;return t[0]=-e*s,t[1]=-n*s,t[2]=-i*s,t[3]=a*s,t}function a6(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t}function cM(t,r){var e=r[0]+r[4]+r[8],n;if(e>0)n=Math.sqrt(e+1),t[3]=.5*n,n=.5/n,t[0]=(r[5]-r[7])*n,t[1]=(r[6]-r[2])*n,t[2]=(r[1]-r[3])*n;else{var i=0;r[4]>r[0]&&(i=1),r[8]>r[i*3+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;n=Math.sqrt(r[i*3+i]-r[a*3+a]-r[o*3+o]+1),t[i]=.5*n,n=.5/n,t[3]=(r[a*3+o]-r[o*3+a])*n,t[a]=(r[a*3+i]+r[i*3+a])*n,t[o]=(r[o*3+i]+r[i*3+o])*n}return t}var o6=HU;var s6=Aw,u6=YU,l6=KU,c6=WU;var f6=qU;var h6=XU;var p6=function(){var t=$O(),r=JO(1,0,0),e=JO(0,1,0);return function(n,i,a){var o=T_(i,a);return o<-.999999?(Hg(t,r,i),SU(t)<1e-6&&Hg(t,e,i),yU(t,t),uM(n,t,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(Hg(t,i,a),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+o,h6(n,n))}}(),XZe=function(){var t=JU(),r=JU();return function(e,n,i,a,o,s){return S_(t,n,o,s),S_(r,i,a,s),S_(e,t,r,2*s*(1-s)),e}}(),YZe=function(){var t=CU();return function(r,e,n,i){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],h6(r,cM(r,t))}}();function Vhe(t){var r=Hhe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Hhe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Whe=[0,0,0,1],uh=function(t){Ke(e,t);var r=Vhe(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;return ce(this,e),n=r.call(this,-0,-0,-0,-0),Array.isArray(i)&&arguments.length===1?n.copy(i):n.set(i,a,o,s),n}return ve(e,[{key:"copy",value:function(i){return this[0]=i[0],this[1]=i[1],this[2]=i[2],this[3]=i[3],this.check()}},{key:"set",value:function(i,a,o,s){return this[0]=i,this[1]=a,this[2]=o,this[3]=s,this.check()}},{key:"fromObject",value:function(i){return this[0]=i.x,this[1]=i.y,this[2]=i.z,this[3]=i.w,this.check()}},{key:"fromMatrix3",value:function(i){return cM(this,i),this.check()}},{key:"fromAxisRotation",value:function(i,a){return uM(this,i,a),this.check()}},{key:"identity",value:function(){return QU(this),this.check()}},{key:"setAxisAngle",value:function(i,a){return this.fromAxisRotation(i,a)}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(i){this[0]=ca(i)}},{key:"y",get:function(){return this[1]},set:function(i){this[1]=ca(i)}},{key:"z",get:function(){return this[2]},set:function(i){this[2]=ca(i)}},{key:"w",get:function(){return this[3]},set:function(i){this[3]=ca(i)}},{key:"len",value:function(){return c6(this)}},{key:"lengthSquared",value:function(){return f6(this)}},{key:"dot",value:function(i){return u6(this,i)}},{key:"rotationTo",value:function(i,a){return p6(this,i,a),this.check()}},{key:"add",value:function(i){return o6(this,this,i),this.check()}},{key:"calculateW",value:function(){return n6(this,this),this.check()}},{key:"conjugate",value:function(){return a6(this,this),this.check()}},{key:"invert",value:function(){return i6(this,this),this.check()}},{key:"lerp",value:function(i,a,o){return o===void 0?this.lerp(this,i,a):(l6(this,i,a,o),this.check())}},{key:"multiplyRight",value:function(i){return lM(this,this,i),this.check()}},{key:"multiplyLeft",value:function(i){return lM(this,i,this),this.check()}},{key:"normalize",value:function(){var i=this.len(),a=i>0?1/i:0;return this[0]=this[0]*a,this[1]=this[1]*a,this[2]=this[2]*a,this[3]=this[3]*a,i===0&&(this[3]=1),this.check()}},{key:"rotateX",value:function(i){return e6(this,this,i),this.check()}},{key:"rotateY",value:function(i){return t6(this,this,i),this.check()}},{key:"rotateZ",value:function(i){return r6(this,this,i),this.check()}},{key:"scale",value:function(i){return s6(this,this,i),this.check()}},{key:"slerp",value:function(i,a,o){var s,u,c;switch(arguments.length){case 1:var h=i.start;s=h===void 0?Whe:h,u=i.target,c=i.ratio;break;case 2:s=this,u=i,c=a;break;default:s=i,u=a,c=o}return S_(this,s,u,c),this.check()}},{key:"transformVector4",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new EU;return ZU(a,i,this),ad(a,4)}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"setFromAxisAngle",value:function(i,a){return this.setAxisAngle(i,a)}},{key:"premultiply",value:function(i){return this.multiplyLeft(i)}},{key:"multiply",value:function(i){return this.multiplyRight(i)}}]),e}(jg);Mn();at();vt();et();var d6=1e-6,qhe=6371e3,E_=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=r.phi,n=e===void 0?0:e,i=r.theta,a=i===void 0?0:i,o=r.radius,s=o===void 0?1:o,u=r.bearing,c=r.pitch,h=r.altitude,p=r.radiusScale,v=p===void 0?qhe:p;ce(this,t),_(this,"phi",void 0),_(this,"theta",void 0),_(this,"radius",void 0),_(this,"radiusScale",void 0),this.phi=n,this.theta=a,this.radius=s||h||1,this.radiusScale=v||1,u!==void 0&&(this.bearing=u),c!==void 0&&(this.pitch=c),this.check()}return ve(t,[{key:"toString",value:function(){return this.formatString(uo)}},{key:"formatString",value:function(e){var n=e.printTypes,i=n===void 0?!1:n,a=b_;return"".concat(i?"Spherical":"","[rho:").concat(a(this.radius),",theta:").concat(a(this.theta),",phi:").concat(a(this.phi),"]")}},{key:"equals",value:function(e){return Ao(this.radius,e.radius)&&Ao(this.theta,e.theta)&&Ao(this.phi,e.phi)}},{key:"exactEquals",value:function(e){return this.radius===e.radius&&this.theta===e.theta&&this.phi===e.phi}},{key:"bearing",get:function(){return 180-Iu(this.phi)},set:function(e){this.phi=Math.PI-Om(e)}},{key:"pitch",get:function(){return Iu(this.theta)},set:function(e){this.theta=Om(e)}},{key:"longitude",get:function(){return Iu(this.phi)}},{key:"latitude",get:function(){return Iu(this.theta)}},{key:"lng",get:function(){return Iu(this.phi)}},{key:"lat",get:function(){return Iu(this.theta)}},{key:"z",get:function(){return(this.radius-1)*this.radiusScale}},{key:"set",value:function(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this.check()}},{key:"clone",value:function(){return new t().copy(this)}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this.check()}},{key:"fromLngLatZ",value:function(e){var n=Ot(e,3),i=n[0],a=n[1],o=n[2];return this.radius=1+o/this.radiusScale,this.phi=Om(a),this.theta=Om(i),this.check()}},{key:"fromVector3",value:function(e){return this.radius=w_(e),this.radius>0&&(this.theta=Math.atan2(e[0],e[1]),this.phi=Math.acos(ya(e[2]/this.radius,-1,1))),this.check()}},{key:"toVector3",value:function(){return new _t(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:"makeSafe",value:function(){return this.phi=Math.max(d6,Math.min(Math.PI-d6,this.phi)),this}},{key:"check",value:function(){if(!Number.isFinite(this.phi)||!Number.isFinite(this.theta)||!(this.radius>0))throw new Error("SphericalCoordinates: some fields set to invalid numbers");return this}}]),t}();var lh={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:Math.PI*2};var fM=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`;function Xhe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Yhe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Yhe(t,r){if(t){if(typeof t=="string")return m6(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return m6(t,r)}}function m6(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Khe={lightSources:{}};function hM(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.color,e=r===void 0?[0,0,0]:r,n=t.intensity,i=n===void 0?1:n;return e.map(function(a){return a*i/255})}function Zhe(t){var r=t.ambientLight,e=t.pointLights,n=e===void 0?[]:e,i=t.directionalLights,a=i===void 0?[]:i,o={};return r?o["lighting_uAmbientLight.color"]=hM(r):o["lighting_uAmbientLight.color"]=[0,0,0],n.forEach(function(s,u){o["lighting_uPointLight[".concat(u,"].color")]=hM(s),o["lighting_uPointLight[".concat(u,"].position")]=s.position,o["lighting_uPointLight[".concat(u,"].attenuation")]=s.attenuation||[1,0,0]}),o.lighting_uPointLightCount=n.length,a.forEach(function(s,u){o["lighting_uDirectionalLight[".concat(u,"].color")]=hM(s),o["lighting_uDirectionalLight[".concat(u,"].direction")]=s.direction}),o.lighting_uDirectionalLightCount=a.length,o}function v6(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Khe;if("lightSources"in t){var r=t.lightSources||{},e=r.ambientLight,n=r.pointLights,i=r.directionalLights,a=e||n&&n.length>0||i&&i.length>0;return a?Object.assign({},Zhe({ambientLight:e,pointLights:n,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){var o={pointLights:[],directionalLights:[]},s=Xhe(t.lights||[]),u;try{for(s.s();!(u=s.n()).done;){var c=u.value;switch(c.type){case"ambient":o.ambientLight=c;break;case"directional":o.directionalLights.push(c);break;case"point":o.pointLights.push(c);break;default:}}}catch(h){s.e(h)}finally{s.f()}return v6({lightSources:o})}return{}}var C_={name:"lights",vs:fM,fs:fM,getUniforms:v6,defines:{MAX_LIGHTS:3}};var $he=new Uint8Array([0,255,255,255]),Jhe={pickingSelectedColor:null,pickingHighlightColor:$he,pickingActive:!1,pickingAttribute:!1};function Qhe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Jhe,r={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)r.picking_uSelectedColorValid=0;else{var e=t.pickingSelectedColor.slice(0,3);r.picking_uSelectedColorValid=1,r.picking_uSelectedColor=e}if(t.pickingHighlightColor){var n=Array.from(t.pickingHighlightColor,function(i){return i/255});Number.isFinite(n[3])||(n[3]=1),r.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(r.picking_uActive=Boolean(t.pickingActive),r.picking_uAttribute=Boolean(t.pickingAttribute)),r}var epe=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,tpe=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,xw={name:"picking",vs:epe,fs:tpe,getUniforms:Qhe};var pM=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`;var rpe={};function npe(t){var r=t.ambient,e=r===void 0?.35:r,n=t.diffuse,i=n===void 0?.6:n,a=t.shininess,o=a===void 0?32:a,s=t.specularColor,u=s===void 0?[30,30,30]:s;return{lighting_uAmbient:e,lighting_uDiffuse:i,lighting_uShininess:o,lighting_uSpecularColor:u.map(function(c){return c/255})}}function g6(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:rpe;if(!("material"in t))return{};var r=t.material;return r?npe(r):{lighting_uEnabled:!1}}var dc={name:"gouraud-lighting",dependencies:[C_],vs:pM,defines:{LIGHTING_VERTEX:1},getUniforms:g6},ip={name:"phong-lighting",dependencies:[C_],fs:pM,defines:{LIGHTING_FRAGMENT:1},getUniforms:g6};var A6=`uniform mat4 u_MVPMatrix;
uniform mat4 u_ModelMatrix;
uniform mat4 u_NormalMatrix;

varying vec3 pbr_vPosition;
varying vec2 pbr_vUV;

#ifdef HAS_NORMALS
# ifdef HAS_TANGENTS
varying mat3 pbr_vTBN;
# else
varying vec3 pbr_vNormal;
# endif
#endif

void pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)
{
  vec4 pos = u_ModelMatrix * position;
  pbr_vPosition = vec3(pos.xyz) / pos.w;

#ifdef HAS_NORMALS
#ifdef HAS_TANGENTS
  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));
  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));
  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;
  pbr_vTBN = mat3(tangentW, bitangentW, normalW);
#else
  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));
#endif
#endif

#ifdef HAS_UV
  pbr_vUV = uv;
#else
  pbr_vUV = vec2(0.,0.);
#endif
}
`;var y6=`#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)
# error PBR fragment shader: Texture LOD is not available
#endif

#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)
# error PBR fragment shader: Derivatives are not available
#endif


#if (__VERSION__ < 300)
  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)
#else
  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)
#endif

precision highp float;

uniform bool pbr_uUnlit;

#ifdef USE_IBL
uniform samplerCube u_DiffuseEnvSampler;
uniform samplerCube u_SpecularEnvSampler;
uniform sampler2D u_brdfLUT;
uniform vec2 u_ScaleIBLAmbient;
#endif

#ifdef HAS_BASECOLORMAP
uniform sampler2D u_BaseColorSampler;
#endif
#ifdef HAS_NORMALMAP
uniform sampler2D u_NormalSampler;
uniform float u_NormalScale;
#endif
#ifdef HAS_EMISSIVEMAP
uniform sampler2D u_EmissiveSampler;
uniform vec3 u_EmissiveFactor;
#endif
#ifdef HAS_METALROUGHNESSMAP
uniform sampler2D u_MetallicRoughnessSampler;
#endif
#ifdef HAS_OCCLUSIONMAP
uniform sampler2D u_OcclusionSampler;
uniform float u_OcclusionStrength;
#endif

#ifdef ALPHA_CUTOFF
uniform float u_AlphaCutoff;
#endif

uniform vec2 u_MetallicRoughnessValues;
uniform vec4 u_BaseColorFactor;

uniform vec3 u_Camera;
#ifdef PBR_DEBUG
uniform vec4 u_ScaleDiffBaseMR;
uniform vec4 u_ScaleFGDSpec;
#endif

varying vec3 pbr_vPosition;

varying vec2 pbr_vUV;

#ifdef HAS_NORMALS
#ifdef HAS_TANGENTS
varying mat3 pbr_vTBN;
#else
varying vec3 pbr_vNormal;
#endif
#endif


struct PBRInfo
{
  float NdotL;
  float NdotV;
  float NdotH;
  float LdotH;
  float VdotH;
  float perceptualRoughness;
  float metalness;
  vec3 reflectance0;
  vec3 reflectance90;
  float alphaRoughness;
  vec3 diffuseColor;
  vec3 specularColor;
  vec3 n;
  vec3 v;
};

const float M_PI = 3.141592653589793;
const float c_MinRoughness = 0.04;

vec4 SRGBtoLINEAR(vec4 srgbIn)
{
#ifdef MANUAL_SRGB
#ifdef SRGB_FAST_APPROXIMATION
  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));
#else
  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);
  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );
#endif
  return vec4(linOut,srgbIn.w);;
#else
  return srgbIn;
#endif
}

vec3 getNormal()
{
#ifndef HAS_TANGENTS
  vec3 pos_dx = dFdx(pbr_vPosition);
  vec3 pos_dy = dFdy(pbr_vPosition);
  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));
  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));
  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);

#ifdef HAS_NORMALS
  vec3 ng = normalize(pbr_vNormal);
#else
  vec3 ng = cross(pos_dx, pos_dy);
#endif

  t = normalize(t - ng * dot(ng, t));
  vec3 b = normalize(cross(ng, t));
  mat3 tbn = mat3(t, b, ng);
#else
  mat3 tbn = pbr_vTBN;
#endif

#ifdef HAS_NORMALMAP
  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;
  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));
#else
  vec3 n = normalize(tbn[2].xyz);
#endif

  return n;
}


#ifdef USE_IBL
vec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)
{
  float mipCount = 9.0;
  float lod = (pbrInputs.perceptualRoughness * mipCount);
  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,
    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;
  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;

#ifdef USE_TEX_LOD
  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;
#else
  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;
#endif

  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;
  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);
  diffuse *= u_ScaleIBLAmbient.x;
  specular *= u_ScaleIBLAmbient.y;

  return diffuse + specular;
}
#endif


vec3 diffuse(PBRInfo pbrInputs)
{
  return pbrInputs.diffuseColor / M_PI;
}

vec3 specularReflection(PBRInfo pbrInputs)
{
  return pbrInputs.reflectance0 +
    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *
    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);
}



float geometricOcclusion(PBRInfo pbrInputs)
{
  float NdotL = pbrInputs.NdotL;
  float NdotV = pbrInputs.NdotV;
  float r = pbrInputs.alphaRoughness;

  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));
  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));
  return attenuationL * attenuationV;
}





float microfacetDistribution(PBRInfo pbrInputs)
{
  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;
  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;
  return roughnessSq / (M_PI * f * f);
}

void PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {
  pbrInputs.NdotL = 1.0;
  pbrInputs.NdotH = 0.0;
  pbrInputs.LdotH = 0.0;
  pbrInputs.VdotH = 1.0;
}

void PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {
  vec3 n = pbrInputs.n;
  vec3 v = pbrInputs.v;
  vec3 l = normalize(lightDirection);
  vec3 h = normalize(l+v);

  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);
  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);
  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);
  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);
}

void PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {
  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);
  PBRInfo_setDirectionalLight(pbrInputs, light_direction);
}

vec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {
  vec3 F = specularReflection(pbrInputs);
  float G = geometricOcclusion(pbrInputs);
  float D = microfacetDistribution(pbrInputs);
  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);
  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);
  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);
}

vec4 pbr_filterColor(vec4 colorUnused)
{
#ifdef HAS_BASECOLORMAP
  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;
#else
  vec4 baseColor = u_BaseColorFactor;
#endif

#ifdef ALPHA_CUTOFF
  if (baseColor.a < u_AlphaCutoff) {
    discard;
  }
#endif

  vec3 color = vec3(0, 0, 0);

  if(pbr_uUnlit){
    color.rgb = baseColor.rgb;
  }
  else{


    float perceptualRoughness = u_MetallicRoughnessValues.y;
    float metallic = u_MetallicRoughnessValues.x;
#ifdef HAS_METALROUGHNESSMAP

    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);
    perceptualRoughness = mrSample.g * perceptualRoughness;
    metallic = mrSample.b * metallic;
#endif
    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);
    metallic = clamp(metallic, 0.0, 1.0);

    float alphaRoughness = perceptualRoughness * perceptualRoughness;

    vec3 f0 = vec3(0.04);
    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);
    diffuseColor *= 1.0 - metallic;
    vec3 specularColor = mix(f0, baseColor.rgb, metallic);
    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);



    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);
    vec3 specularEnvironmentR0 = specularColor.rgb;
    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;

    vec3 n = getNormal();
    vec3 v = normalize(u_Camera - pbr_vPosition);

    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);
    vec3 reflection = -normalize(reflect(v, n));

    PBRInfo pbrInputs = PBRInfo(
      0.0,
      NdotV,
      0.0,
      0.0,
      0.0,
      perceptualRoughness,
      metallic,
      specularEnvironmentR0,
      specularEnvironmentR90,
      alphaRoughness,
      diffuseColor,
      specularColor,
      n,
      v
    );

#ifdef USE_LIGHTS
    PBRInfo_setAmbientLight(pbrInputs);
    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);
    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {
      if (i < lighting_uDirectionalLightCount) {
        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);
        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);
      }
    }
    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {
      if (i < lighting_uPointLightCount) {
        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);
        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));
        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);
      }
    }
#endif
#ifdef USE_IBL
    color += getIBLContribution(pbrInputs, n, reflection);
#endif
#ifdef HAS_OCCLUSIONMAP
    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;
    color = mix(color, color * ao, u_OcclusionStrength);
#endif

#ifdef HAS_EMISSIVEMAP
    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;
    color += emissive;
#endif

#ifdef PBR_DEBUG





    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);
    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);
    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);
#endif

  }

  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);
}
`;var od={name:"pbr",vs:A6,fs:y6,defines:{LIGHTING_FRAGMENT:1},dependencies:[C_]};var ipe=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,dM={name:"transform",vs:ipe,fs:null};function _6(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=ope(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function ope(t,r){if(t){if(typeof t=="string")return b6(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return b6(t,r)}}function b6(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var ch=function(){function t(r){ce(this,t),this.gl=r,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}return ve(t,[{key:"addDefaultModule",value:function(e){this._defaultModules.find(function(n){return n.name===e.name})||this._defaultModules.push(e),this.stateHash++}},{key:"removeDefaultModule",value:function(e){var n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(function(i){return i.name!==n}),this.stateHash++}},{key:"addShaderHook",value:function(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}},{key:"get",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.vs,a=i===void 0?"":i,o=n.fs,s=o===void 0?"":o,u=n.defines,c=u===void 0?{}:u,h=n.inject,p=h===void 0?{}:h,v=n.varyings,x=v===void 0?[]:v,E=n.bufferMode,R=E===void 0?35981:E,D=n.transpileToGLSL100,H=D===void 0?!1:D,W=this._getModuleList(n.modules),$=this._getHash(a),J=this._getHash(s),B=W.map(function(gt){return e._getHash(gt.name)}).sort(),se=x.map(function(gt){return e._getHash(gt)}),V=Object.keys(c).sort(),X=Object.keys(p).sort(),I=[],O=[],U=_6(V),re;try{for(U.s();!(re=U.n()).done;){var ee=re.value;I.push(this._getHash(ee)),I.push(this._getHash(c[ee]))}}catch(gt){U.e(gt)}finally{U.f()}var pe=_6(X),je;try{for(pe.s();!(je=pe.n()).done;){var qe=je.value;O.push(this._getHash(qe)),O.push(this._getHash(p[qe]))}}catch(gt){pe.e(gt)}finally{pe.f()}var We="".concat($,"/").concat(J,"D").concat(I.join("/"),"M").concat(B.join("/"),"I").concat(O.join("/"),"V").concat(se.join("/"),"H").concat(this.stateHash,"B").concat(R).concat(H?"T":"");if(!this._programCache[We]){var ot=VO(this.gl,{vs:a,fs:s,modules:W,inject:p,defines:c,hookFunctions:this._hookFunctions,transpileToGLSL100:H});this._programCache[We]=new rd(this.gl,{hash:We,vs:ot.vs,fs:ot.fs,varyings:x,bufferMode:R}),this._getUniforms[We]=ot.getUniforms||function(gt){},this._useCounts[We]=0}return this._useCounts[We]++,this._programCache[We]}},{key:"getUniforms",value:function(e){return this._getUniforms[e.hash]||null}},{key:"release",value:function(e){var n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}},{key:"_getHash",value:function(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}},{key:"_getModuleList",value:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=new Array(this._defaultModules.length+e.length),i={},a=0,o=0,s=this._defaultModules.length;o<s;++o){var u=this._defaultModules[o],c=u.name;n[a++]=u,i[c]=!0}for(var h=0,p=e.length;h<p;++h){var v=e[h],x=v.name;i[x]||(n[a++]=v,i[x]=!0)}return n.length=a,n}}],[{key:"getDefaultProgramManager",value:function(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new t(e),e.luma.defaultProgramManager}}]),t}();et();function x6(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function spe(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?x6(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):x6(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var upe={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function w6(t,r,e){var n={},i=r.indices;for(var a in r.attributes){var o=r.attributes[a],s=lpe(a,e);if(a==="indices")i=o;else if(o.constant)n[s]=o.value;else{var u=o.value,c=spe({},o);delete c.value,n[s]=[new Jn(t,u),c],cpe(a,c)}}if(i){var h=i.value||i;yr(h instanceof Uint16Array||h instanceof Uint32Array,'attribute array for "indices" must be of integer type');var p={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};n.indices=[new Jn(t,{data:h,target:34963}),p]}return n}function lpe(t,r){var e=r||{},n=e.attributeMap,i=n===void 0?upe:n;return i&&i[t]||t}function cpe(t,r){var e;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":e="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":e="vectors";break;default:}switch(e){case"vectors":r.size=r.size||3;break;case"uvs":r.size=r.size||2;break;default:}yr(Number.isFinite(r.size),"attribute ".concat(t," needs size"))}var Xg=2,fpe=1e4,hpe="Model needs drawMode and vertexCount",T6=function(){},ppe={},Ni=function(){function t(r){ce(this,t);var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.id,i=n===void 0?Sa("model"):n;yr($h(r)),this.id=i,this.gl=r,this.id=e.id||Sa("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(e)}return ve(t,[{key:"initialize",value:function(e){this.props={},this.programManager=e.programManager||ch.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;var n=e.program,i=n===void 0?null:n,a=e.vs,o=e.fs,s=e.modules,u=e.defines,c=e.inject,h=e.varyings,p=e.bufferMode,v=e.transpileToGLSL100;this.programProps={program:i,vs:a,fs:o,modules:s,defines:u,inject:c,varyings:h,bufferMode:p,transpileToGLSL100:v},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},yr(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),hpe)}},{key:"setProps",value:function(e){this._setModelProps(e)}},{key:"delete",value:function(){for(var e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getProgram",value:function(){return this.program}},{key:"setProgram",value:function(e){var n=e.program,i=e.vs,a=e.fs,o=e.modules,s=e.defines,u=e.inject,c=e.varyings,h=e.bufferMode,p=e.transpileToGLSL100;this.programProps={program:n,vs:i,fs:a,modules:o,defines:s,inject:u,varyings:c,bufferMode:h,transpileToGLSL100:p},this._programDirty=!0}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setDrawMode",value:function(e){return this.drawMode=e,this}},{key:"setVertexCount",value:function(e){return yr(Number.isFinite(e)),this.vertexCount=e,this}},{key:"setInstanceCount",value:function(e){return yr(Number.isFinite(e)),this.instanceCount=e,this}},{key:"setGeometry",value:function(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=w6(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ah(e))return this;var n={};for(var i in e){var a=e[i];n[i]=a.getValue?a.getValue():a}return this.vertexArray.setAttributes(n),this}},{key:"setUniforms",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}},{key:"getModuleUniforms",value:function(e){this._checkProgram();var n=this.programManager.getUniforms(this.program);return n?n(e):{}}},{key:"updateModuleSettings",value:function(e){var n=this.getModuleUniforms(e||{});return this.setUniforms(n)}},{key:"clear",value:function(e){return sh(this.program.gl,e),this}},{key:"draw",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();var n=e.moduleSettings,i=n===void 0?null:n,a=e.framebuffer,o=e.uniforms,s=o===void 0?{}:o,u=e.attributes,c=u===void 0?{}:u,h=e.transformFeedback,p=h===void 0?this.transformFeedback:h,v=e.parameters,x=v===void 0?{}:v,E=e.vertexArray,R=E===void 0?this.vertexArray:E;this.setAttributes(c),this.updateModuleSettings(i),this.setUniforms(s);var D;Wr.priority>=Xg&&(D=this._logDrawCallStart(Xg));var H=this.vertexArray.getDrawParams(),W=this.props,$=W.isIndexed,J=$===void 0?H.isIndexed:$,B=W.indexType,se=B===void 0?H.indexType:B,V=W.indexOffset,X=V===void 0?H.indexOffset:V,I=W.vertexArrayInstanced,O=I===void 0?H.isInstanced:I;O&&!this.isInstanced&&Wr.warn("Found instanced attributes on non-instanced model",this.id)();var U=this.isInstanced,re=this.instanceCount,ee=this.props,pe=ee.onBeforeRender,je=pe===void 0?T6:pe,qe=ee.onAfterRender,We=qe===void 0?T6:qe;je(),this.program.setUniforms(this.uniforms);var ot=this.program.draw(Object.assign(ppe,e,{logPriority:D,uniforms:null,framebuffer:a,parameters:x,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:R,transformFeedback:p,isIndexed:J,indexType:se,isInstanced:U,instanceCount:re,offset:J?X:0}));return We(),Wr.priority>=Xg&&this._logDrawCallEnd(D,R,a),ot}},{key:"transform",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.discard,i=n===void 0?!0:n,a=e.feedbackBuffers,o=e.unbindModels,s=o===void 0?[]:o,u=e.parameters;a&&this._setFeedbackBuffers(a),i&&(u=Object.assign({},u,_({},35977,i))),s.forEach(function(c){return c.vertexArray.unbindBuffers()});try{this.draw(Object.assign({},e,{parameters:u}))}finally{s.forEach(function(c){return c.vertexArray.bindBuffers()})}return this}},{key:"render",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Wr.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}},{key:"_setModelProps",value:function(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}},{key:"_checkProgram",value:function(){var e=this._programDirty||this.programManager.stateHash!==this._programManagerState;if(e){var n=this.programProps.program;if(n)this._managedProgram=!1;else{var i=this.programProps,a=i.vs,o=i.fs,s=i.modules,u=i.inject,c=i.defines,h=i.varyings,p=i.bufferMode,v=i.transpileToGLSL100;n=this.programManager.get({vs:a,fs:o,modules:s,inject:u,defines:c,varyings:h,bufferMode:p,transpileToGLSL100:v}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}yr(n instanceof rd,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new CO(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}}},{key:"_deleteGeometryBuffers",value:function(){for(var e in this.geometryBuffers){var n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof Jn&&n.delete()}}},{key:"_setAnimationProps",value:function(e){this.animated&&yr(e,"Model.draw(): animated uniforms but no animationProps")}},{key:"_setFeedbackBuffers",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(ah(e))return this;var n=this.program.gl;return this.transformFeedback=this.transformFeedback||new nd(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}},{key:"_logDrawCallStart",value:function(e){var n=e>3?0:fpe;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),Wr.group(Xg,">>> DRAWING MODEL ".concat(this.id),{collapsed:Wr.level<=2})(),e}},{key:"_logDrawCallEnd",value:function(e,n,i,a){if(e!==void 0){var o=MO({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),s=Hx({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),u=s.table,c=s.unusedTable,h=s.unusedCount,p=Hx({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0}),v=p.table,x=p.count;x>0&&Wr.log("MISSING UNIFORMS",Object.keys(v))(),h>0&&Wr.log("UNUSED UNIFORMS",Object.keys(c))();var E=IO(this.vertexArray.configuration);Wr.table(e,o)(),Wr.table(e,u)(),Wr.table(e+1,E)(),a&&a.log({logLevel:Xg,message:"Rendered to ".concat(a.id)}),Wr.groupEnd(Xg)()}}}]),t}();at();vt();at();vt();function dpe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=mpe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function mpe(t,r){if(t){if(typeof t=="string")return S6(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return S6(t,r)}}function S6(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var E6=function(){function t(r){ce(this,t);var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=r,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}return ve(t,[{key:"setupResources",value:function(e){var n=dpe(this.bindings),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;this._setupTransformFeedback(a,e)}}catch(o){n.e(o)}finally{n.f()}}},{key:"updateModelProps",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=this.varyings;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}},{key:"getDrawOptions",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=this.bindings[this.currentIndex],i=n.sourceBuffers,a=n.transformFeedback,o=Object.assign({},i,e.attributes);return{attributes:o,transformFeedback:a}}},{key:"swap",value:function(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}},{key:"getBuffer",value:function(e){var n=this.bindings[this.currentIndex].feedbackBuffers,i=e?n[e]:null;return i?i instanceof Jn?i:i.buffer:null}},{key:"getData",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.varyingName,i=this.getBuffer(n);return i?i.getData():null}},{key:"delete",value:function(){for(var e in this.resources)this.resources[e].delete()}},{key:"_initialize",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&yr(En(this.gl))}},{key:"_getFeedbackBuffers",value:function(e){var n=e.sourceBuffers,i=n===void 0?{}:n,a={};if(this.bindings[this.currentIndex]&&Object.assign(a,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(var o in this.feedbackMap){var s=this.feedbackMap[o];o in i&&(a[s]=o)}Object.assign(a,e.feedbackBuffers);for(var u in a){var c=a[u];if(typeof c=="string"){var h=i[c],p=h.byteLength,v=h.usage,x=h.accessor;a[u]=this._createNewBuffer(u,{byteLength:p,usage:v,accessor:x})}}return a}},{key:"_setupBuffers",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.sourceBuffers,i=n===void 0?null:n;Object.assign(this.feedbackMap,e.feedbackMap);var a=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:i,feedbackBuffers:a})}},{key:"_setupTransformFeedback",value:function(e,n){var i=n.model,a=i.program;e.transformFeedback=new nd(this.gl,{program:a,buffers:e.feedbackBuffers})}},{key:"_updateBindings",value:function(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){var n=this._swapBuffers(this.bindings[this.currentIndex]),i=n.sourceBuffers,a=n.feedbackBuffers,o=this._getNextIndex();this.bindings[o]=this._updateBinding(this.bindings[o],{sourceBuffers:i,feedbackBuffers:a})}}},{key:"_updateBinding",value:function(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}},{key:"_swapBuffers",value:function(e){if(!this.feedbackMap)return null;var n=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(var a in this.feedbackMap){var o=this.feedbackMap[a];n[a]=e.feedbackBuffers[o],i[o]=e.sourceBuffers[a],yr(i[o]instanceof Jn)}return{sourceBuffers:n,feedbackBuffers:i}}},{key:"_createNewBuffer",value:function(e,n){var i=new Jn(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}}]),t}();at();vt();et();var vpe="transform_uSampler_",ww="transform_uSize_",C6="transform_position";function P6(t){var r=t.vs,e=t.sourceTextureMap,n=t.targetTextureVarying,i=t.targetTexture,a=Object.keys(e),o=a.length,s=null,u={},c=r,h={};if(o>0||n){var p=c.split(`
`),v=p.slice();if(p.forEach(function(H,W,$){if(o>0){var J=_pe(H,e);if(J){var B=J.updatedLine,se=J.inject;v[W]=B,h=Ng([h,se]),Object.assign(u,J.samplerTextureMap),o--}}n&&!s&&(s=ype(H,n))}),n){yr(i);var x="".concat(ww).concat(n),E="uniform vec2 ".concat(x,`;
`),R="     vec2 ".concat(C6," = transform_getPos(").concat(x,`);
     gl_Position = vec4(`).concat(C6,`, 0, 1.);
`),D={"vs:#decl":E,"vs:#main-start":R};h=Ng([h,D])}c=v.join(`
`)}return{vs:c,targetTextureType:s,inject:h,samplerTextureMap:u}}function O6(t){var r=t.sourceTextureMap,e=t.targetTextureVarying,n=t.targetTexture,i={},a,o;e&&(a=n.width,o=n.height,i["".concat(ww).concat(e)]=[a,o]);for(var s in r){var u=r[s];a=u.width,o=u.height,i["".concat(ww).concat(s)]=[a,o]}return i}function gpe(t){return Jx(t,["attribute","in"])}function Ape(t){var r="".concat(vpe).concat(t),e="".concat(ww).concat(t),n="  uniform sampler2D ".concat(r,`;
  uniform vec2 `).concat(e,";");return{samplerName:r,sizeName:e,uniformDeclerations:n}}function ype(t,r){var e=Jx(t,["varying","out"]);return e&&e.name===r?e.type:null}function _pe(t,r){var e={},n=gpe(t);if(!n)return null;var i=n.type,a=n.name;if(a&&r[a]){var o="// ".concat(t," => Replaced by Transform with a sampler"),s=Ape(a),u=s.samplerName,c=s.sizeName,h=s.uniformDeclerations,p=HO(i),v="  ".concat(i," ").concat(a," = transform_getInput(").concat(u,", ").concat(c,").").concat(p,`;
`);e[u]=a;var x={"vs:#decl":h,"vs:#main-start":v};return{updatedLine:o,inject:x,samplerTextureMap:e}}return null}var Yg,bpe=(Yg={},_(Yg,10241,9728),_(Yg,10240,9728),_(Yg,10242,33071),_(Yg,10243,33071),Yg),xpe="transform_output",M6=function(){function t(r){ce(this,t);var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=r,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}return ve(t,[{key:"updateModelProps",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=this._processVertexShader(e);return Object.assign({},e,n)}},{key:"getDrawOptions",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=this.bindings[this.currentIndex],i=n.sourceBuffers,a=n.sourceTextures,o=n.framebuffer,s=n.targetTexture,u=Object.assign({},i,e.attributes),c=Object.assign({},e.uniforms),h=Object.assign({},e.parameters),p=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){u.transform_elementID=this.elementIDBuffer;for(var v in this.samplerTextureMap){var x=this.samplerTextureMap[v];c[v]=a[x]}this._setSourceTextureParameters();var E=O6({sourceTextureMap:a,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(c,E)}return this.hasTargetTexture&&(p=!1,h.viewport=[0,0,o.width,o.height]),{attributes:u,framebuffer:o,uniforms:c,discard:p,parameters:h}}},{key:"swap",value:function(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}},{key:"getTargetTexture",value:function(){var e=this.bindings[this.currentIndex].targetTexture;return e}},{key:"getData",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.packed,i=n===void 0?!1:n,a=this.bindings[this.currentIndex].framebuffer,o=ep(a);if(!i)return o;for(var s=o.constructor,u=WO(this.targetTextureType),c=new s(o.length*u/4),h=0,p=0;p<o.length;p+=4)for(var v=0;v<u;v++)c[h++]=o[p+v];return c}},{key:"getFramebuffer",value:function(){var e=this.bindings[this.currentIndex];return e.framebuffer}},{key:"delete",value:function(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}},{key:"_initialize",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e._targetTextureVarying,i=e._swapTexture;this._swapTexture=i,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}},{key:"_createTargetTexture",value:function(e){var n=e.sourceTextures,i=e.textureOrReference;if(i instanceof la)return i;var a=n[i];return a?(this._targetRefTexName=i,this._createNewTexture(a)):null}},{key:"_setupTextures",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.sourceBuffers,i=e._sourceTextures,a=i===void 0?{}:i,o=e._targetTexture,s=this._createTargetTexture({sourceTextures:a,textureOrReference:o});this.hasSourceTextures=this.hasSourceTextures||a&&Object.keys(a).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:a,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}},{key:"_updateElementIDBuffer",value:function(e){if(!(typeof e!="number"||this.elementCount>=e)){var n=new Float32Array(e);n.forEach(function(i,a,o){o[a]=a}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new Jn(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}}},{key:"_updateBindings",value:function(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){var n=this._swapTextures(this.bindings[this.currentIndex]),i=n.sourceTextures,a=n.targetTexture,o=this._getNextIndex();this.bindings[o]=this._updateBinding(this.bindings[o],{sourceTextures:i,targetTexture:a})}}},{key:"_updateBinding",value:function(e,n){var i=n.sourceBuffers,a=n.sourceTextures,o=n.targetTexture;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,a),Object.assign(e.sourceBuffers,i),o){e.targetTexture=o;var s=o.width,u=o.height,c=e,h=c.framebuffer;h?(h.update({attachments:_({},36064,o),resizeAttachments:!1}),h.resize({width:s,height:u})):e.framebuffer=new Ea(this.gl,{id:"transform-framebuffer",width:s,height:u,attachments:_({},36064,o)})}return e}},{key:"_setSourceTextureParameters",value:function(){var e=this.currentIndex,n=this.bindings[e].sourceTextures;for(var i in n)n[i].setParameters(bpe)}},{key:"_swapTextures",value:function(e){if(!this._swapTexture)return null;var n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;var i=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:i}}},{key:"_createNewTexture",value:function(e){var n,i=Dg(e,{parameters:(n={},_(n,10241,9728),_(n,10240,9728),_(n,10242,33071),_(n,10243,33071),n),pixelStore:_({},37440,!1)});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=i,i}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}},{key:"_processVertexShader",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=this.bindings[this.currentIndex],i=n.sourceTextures,a=n.targetTexture,o=P6({vs:e.vs,sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:a}),s=o.vs,u=o.uniforms,c=o.targetTextureType,h=o.inject,p=o.samplerTextureMap,v=Ng([e.inject||{},h]);this.targetTextureType=c,this.samplerTextureMap=p;var x=e._fs||__({version:Fg(s),input:this.targetTextureVarying,inputType:c,output:xpe}),E=this.hasSourceTextures||this.targetTextureVarying?[dM].concat(e.modules||[]):e.modules;return{vs:s,fs:x,modules:E,uniforms:u,inject:v}}}]),t}();function P_(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=wpe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function wpe(t,r){if(t){if(typeof t=="string")return I6(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return I6(t,r)}}function I6(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Il=function(){function t(r){ce(this,t);var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=r,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(e),Object.seal(this)}return ve(t,[{key:"delete",value:function(){var e=this.model,n=this.bufferTransform,i=this.textureTransform;e&&e.delete(),n&&n.delete(),i&&i.delete()}},{key:"run",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.clearRenderTarget,i=n===void 0?!0:n,a=this._updateDrawOptions(e);i&&a.framebuffer&&a.framebuffer.clear({color:!0}),this.model.transform(a)}},{key:"swap",value:function(){var e=!1,n=[this.bufferTransform,this.textureTransform].filter(Boolean),i=P_(n),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;e=e||o.swap()}}catch(s){i.e(s)}finally{i.f()}yr(e,"Nothing to swap")}},{key:"getBuffer",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}},{key:"getData",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=[this.bufferTransform,this.textureTransform].filter(Boolean),i=P_(n),a;try{for(i.s();!(a=i.n()).done;){var o=a.value,s=o.getData(e);if(s)return s}}catch(u){i.e(u)}finally{i.f()}return null}},{key:"getFramebuffer",value:function(){return this.textureTransform&&this.textureTransform.getFramebuffer()}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);var n=[this.bufferTransform,this.textureTransform].filter(Boolean),i=P_(n),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;o.update(e)}}catch(s){i.e(s)}finally{i.f()}}},{key:"_initialize",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=this.gl;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new Ni(n,Object.assign({},e,{fs:e.fs||__({version:Fg(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}},{key:"_updateModelProps",value:function(e){var n=Object.assign({},e),i=[this.bufferTransform,this.textureTransform].filter(Boolean),a=P_(i),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;n=s.updateModelProps(n)}}catch(u){a.e(u)}finally{a.f()}return n}},{key:"_buildResourceTransforms",value:function(e,n){Tpe(n)&&(this.bufferTransform=new E6(e,n)),Spe(n)&&(this.textureTransform=new M6(e,n)),yr(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}},{key:"_updateDrawOptions",value:function(e){var n=Object.assign({},e),i=[this.bufferTransform,this.textureTransform].filter(Boolean),a=P_(i),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;n=Object.assign(n,s.getDrawOptions(n))}}catch(u){a.e(u)}finally{a.f()}return n}}],[{key:"isSupported",value:function(e){return En(e)}}]),t}();function Tpe(t){return!!(!ah(t.feedbackBuffers)||!ah(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function Spe(t){return!!(!ah(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}et();at();vt();function R6(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Epe(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?R6(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):R6(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var L6={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Bi=function(){function t(){ce(this,t);var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=r.id,n=e===void 0?Sa("geometry"):e,i=r.drawMode,a=i===void 0?L6.TRIANGLES:i,o=r.attributes,s=o===void 0?{}:o,u=r.indices,c=u===void 0?null:u,h=r.vertexCount,p=h===void 0?null:h;this.id=n,this.drawMode=a|0,this.attributes={},this.userData={},this._setAttributes(s,c),this.vertexCount=p||this._calculateVertexCount(this.attributes,this.indices)}return ve(t,[{key:"mode",get:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getAttributes",value:function(){return this.indices?Epe({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function(e){return"Geometry ".concat(this.id," attribute ").concat(e)}},{key:"_setAttributes",value:function(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(var i in e){var a=e[i];a=ArrayBuffer.isView(a)?{value:a}:a,yr(ArrayBuffer.isView(a.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),(i==="POSITION"||i==="positions")&&!a.size&&(a.size=3),i==="indices"?(yr(!this.indices),this.indices=a):this.attributes[i]=a}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}},{key:"_calculateVertexCount",value:function(e,n){if(n)return n.value.length;var i=1/0;for(var a in e){var o=e[a],s=o.value,u=o.size,c=o.constant;!c&&s&&u>=1&&(i=Math.min(i,s.length/u))}return yr(Number.isFinite(i)),i}}],[{key:"DRAW_MODE",get:function(){return L6}}]),t}();et();at();et();at();function k6(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Tw(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?k6(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):k6(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Cpe(t){var r=Ppe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Ppe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ope={x:[2,0,1],y:[0,1,2],z:[1,2,0]},sd=function(t){Ke(e,t);var r=Cpe(e);function e(){ce(this,e);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.id,a=i===void 0?Sa("truncated-code-geometry"):i,o=Mpe(n),s=o.indices,u=o.attributes;return r.call(this,Tw(Tw({},n),{},{id:a,indices:s,attributes:Tw(Tw({},u),n.attributes)}))}return e}(Bi);function Mpe(t){for(var r=t.bottomRadius,e=r===void 0?0:r,n=t.topRadius,i=n===void 0?0:n,a=t.height,o=a===void 0?1:a,s=t.nradial,u=s===void 0?10:s,c=t.nvertical,h=c===void 0?10:c,p=t.verticalAxis,v=p===void 0?"y":p,x=t.topCap,E=x===void 0?!1:x,R=t.bottomCap,D=R===void 0?!1:R,H=(E?2:0)+(D?2:0),W=(u+1)*(h+1+H),$=Math.atan2(e-i,o),J=Math.sin,B=Math.cos,se=Math.PI,V=B($),X=J($),I=E?-2:0,O=h+(D?2:0),U=u+1,re=new Uint16Array(u*(h+H)*6),ee=Ope[v],pe=new Float32Array(W*3),je=new Float32Array(W*3),qe=new Float32Array(W*2),We=0,ot=0,gt=I;gt<=O;gt++){var Pt=gt/h,Dt=o*Pt,nr=void 0;gt<0?(Dt=0,Pt=1,nr=e):gt>h?(Dt=o,Pt=1,nr=i):nr=e+(i-e)*(gt/h),(gt===-2||gt===h+2)&&(nr=0,Pt=0),Dt-=o/2;for(var Nt=0;Nt<U;Nt++){var Ut=J(Nt*se*2/u),Or=B(Nt*se*2/u);pe[We+ee[0]]=Ut*nr,pe[We+ee[1]]=Dt,pe[We+ee[2]]=Or*nr,je[We+ee[0]]=gt<0||gt>h?0:Ut*V,je[We+ee[1]]=gt<0?-1:gt>h?1:X,je[We+ee[2]]=gt<0||gt>h?0:Or*V,qe[ot+0]=Nt/u,qe[ot+1]=Pt,ot+=2,We+=3}}for(var he=0;he<h+H;he++)for(var xe=0;xe<u;xe++){var Ge=(he*u+xe)*6;re[Ge+0]=U*(he+0)+0+xe,re[Ge+1]=U*(he+0)+1+xe,re[Ge+2]=U*(he+1)+1+xe,re[Ge+3]=U*(he+0)+0+xe,re[Ge+4]=U*(he+1)+1+xe,re[Ge+5]=U*(he+1)+0+xe}return{indices:re,attributes:{POSITION:{size:3,value:pe},NORMAL:{size:3,value:je},TEXCOORD_0:{size:2,value:qe}}}}function B6(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function D6(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?B6(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):B6(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Ipe(t){var r=Rpe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Rpe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Sw=function(t){Ke(e,t);var r=Ipe(e);function e(){ce(this,e);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.id,a=i===void 0?Sa("cone-geometry"):i,o=n.radius,s=o===void 0?1:o,u=n.cap,c=u===void 0?!0:u;return r.call(this,D6(D6({},n),{},{id:a,topRadius:0,topCap:Boolean(c),bottomCap:Boolean(c),bottomRadius:s}))}return e}(sd);et();at();function F6(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Ew(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?F6(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):F6(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Lpe(t){var r=kpe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function kpe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Bpe=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Dpe=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),Fpe=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),Npe=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),zpe={POSITION:{size:3,value:new Float32Array(Dpe)},NORMAL:{size:3,value:new Float32Array(Fpe)},TEXCOORD_0:{size:2,value:new Float32Array(Npe)}},ud=function(t){Ke(e,t);var r=Lpe(e);function e(){ce(this,e);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.id,a=i===void 0?Sa("cube-geometry"):i;return r.call(this,Ew(Ew({},n),{},{id:a,indices:{size:1,value:new Uint16Array(Bpe)},attributes:Ew(Ew({},zpe),n.attributes)}))}return e}(Bi);et();at();function N6(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function z6(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?N6(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):N6(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Upe(t){var r=jpe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function jpe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Cw=function(t){Ke(e,t);var r=Upe(e);function e(){ce(this,e);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.id,a=i===void 0?Sa("cylinder-geometry"):i,o=n.radius,s=o===void 0?1:o;return r.call(this,z6(z6({},n),{},{id:a,bottomRadius:s,topRadius:s}))}return e}(sd);et();at();function U6(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Pw(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?U6(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):U6(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Gpe(t){var r=Vpe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Vpe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Hpe=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0],Wpe=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1],Ow=function(t){Ke(e,t);var r=Gpe(e);function e(){ce(this,e);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.id,a=i===void 0?Sa("ico-sphere-geometry"):i,o=qpe(n),s=o.indices,u=o.attributes;return r.call(this,Pw(Pw({},n),{},{id:a,indices:s,attributes:Pw(Pw({},u),n.attributes)}))}return e}(Bi);function qpe(t){var r=t.iterations,e=r===void 0?0:r,n=Math.PI,i=n*2,a=[].concat(Hpe),o=[].concat(Wpe);a.push(),o.push();for(var s=function(){var Nn={};return function(pi,Ti){pi*=3,Ti*=3;var ka=pi<Ti?pi:Ti,si=pi>Ti?pi:Ti,Hn="".concat(ka,"|").concat(si);if(Hn in Nn)return Nn[Hn];var Di=a[pi],Yi=a[pi+1],di=a[pi+2],jr=a[Ti],Jr=a[Ti+1],Br=a[Ti+2],Gi=(Di+jr)/2,Li=(Yi+Jr)/2,Ua=(di+Br)/2,_a=Math.sqrt(Gi*Gi+Li*Li+Ua*Ua);return Gi/=_a,Li/=_a,Ua/=_a,a.push(Gi,Li,Ua),Nn[Hn]=a.length/3-1}}(),u=0;u<e;u++){for(var c=[],h=0;h<o.length;h+=3){var p=s(o[h+0],o[h+1]),v=s(o[h+1],o[h+2]),x=s(o[h+2],o[h+0]);c.push(x,o[h+0],p,p,o[h+1],v,v,o[h+2],x,p,v,x)}o=c}for(var E=new Array(a.length),R=new Array(a.length/3*2),D=o.length,H=D-3;H>=0;H-=3){var W=o[H+0],$=o[H+1],J=o[H+2],B=W*3,se=$*3,V=J*3,X=W*2,I=$*2,O=J*2,U=a[B+0],re=a[B+1],ee=a[B+2],pe=Math.acos(ee/Math.sqrt(U*U+re*re+ee*ee)),je=Math.atan2(re,U)+n,qe=pe/n,We=1-je/i,ot=a[se+0],gt=a[se+1],Pt=a[se+2],Dt=Math.acos(Pt/Math.sqrt(ot*ot+gt*gt+Pt*Pt)),nr=Math.atan2(gt,ot)+n,Nt=Dt/n,Ut=1-nr/i,Or=a[V+0],he=a[V+1],xe=a[V+2],Ge=Math.acos(xe/Math.sqrt(Or*Or+he*he+xe*xe)),bt=Math.atan2(he,Or)+n,Kt=Ge/n,Gt=1-bt/i,tn=[Or-ot,he-gt,xe-Pt],an=[U-ot,re-gt,ee-Pt],Fn=new _t(tn).cross(an).normalize(),wr=void 0;(We===0||Ut===0||Gt===0)&&(We===0||We>.5)&&(Ut===0||Ut>.5)&&(Gt===0||Gt>.5)&&(a.push(a[B+0],a[B+1],a[B+2]),wr=a.length/3-1,o.push(wr),R[wr*2+0]=1,R[wr*2+1]=qe,E[wr*3+0]=Fn.x,E[wr*3+1]=Fn.y,E[wr*3+2]=Fn.z,a.push(a[se+0],a[se+1],a[se+2]),wr=a.length/3-1,o.push(wr),R[wr*2+0]=1,R[wr*2+1]=Nt,E[wr*3+0]=Fn.x,E[wr*3+1]=Fn.y,E[wr*3+2]=Fn.z,a.push(a[V+0],a[V+1],a[V+2]),wr=a.length/3-1,o.push(wr),R[wr*2+0]=1,R[wr*2+1]=Kt,E[wr*3+0]=Fn.x,E[wr*3+1]=Fn.y,E[wr*3+2]=Fn.z),E[B+0]=E[se+0]=E[V+0]=Fn.x,E[B+1]=E[se+1]=E[V+1]=Fn.y,E[B+2]=E[se+2]=E[V+2]=Fn.z,R[X+0]=We,R[X+1]=qe,R[I+0]=Ut,R[I+1]=Nt,R[O+0]=Gt,R[O+1]=Kt}return{indices:{size:1,value:new Uint16Array(o)},attributes:{POSITION:{size:3,value:new Float32Array(a)},NORMAL:{size:3,value:new Float32Array(E)},TEXCOORD_0:{size:2,value:new Float32Array(R)}}}}et();at();function j6(t){var r=t.indices,e=t.attributes;if(!r)return t;var n=r.value.length,i={};for(var a in e){var o=e[a],s=o.constant,u=o.value,c=o.size;if(!(s||!c)){for(var h=new u.constructor(n*c),p=0;p<n;++p)for(var v=r.value[p],x=0;x<c;x++)h[p*c+x]=u[v*c+x];i[a]={size:c,value:h}}}return{attributes:Object.assign({},e,i)}}function G6(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Mw(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?G6(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):G6(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Xpe(t){var r=Ype();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Ype(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Iw=function(t){Ke(e,t);var r=Xpe(e);function e(){ce(this,e);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.id,a=i===void 0?Sa("plane-geometry"):i,o=Kpe(n),s=o.indices,u=o.attributes;return r.call(this,Mw(Mw({},n),{},{id:a,indices:s,attributes:Mw(Mw({},u),n.attributes)}))}return e}(Bi);function Kpe(t){var r=t.type,e=r===void 0?"x,y":r,n=t.offset,i=n===void 0?0:n,a=t.flipCull,o=a===void 0?!1:a,s=t.unpack,u=s===void 0?!1:s,c=e.split(","),h=t["".concat(c[0],"len")]||1,p=t["".concat(c[1],"len")]||1,v=t["n".concat(c[0])]||1,x=t["n".concat(c[1])]||1,E=(v+1)*(x+1),R=new Float32Array(E*3),D=new Float32Array(E*3),H=new Float32Array(E*2);o&&(h=-h);for(var W=0,$=0,J=0;J<=x;J++)for(var B=0;B<=v;B++){var se=B/v,V=J/x;switch(H[W+0]=o?1-se:se,H[W+1]=V,e){case"x,y":R[$+0]=h*se-h*.5,R[$+1]=p*V-p*.5,R[$+2]=i,D[$+0]=0,D[$+1]=0,D[$+2]=o?1:-1;break;case"x,z":R[$+0]=h*se-h*.5,R[$+1]=i,R[$+2]=p*V-p*.5,D[$+0]=0,D[$+1]=o?1:-1,D[$+2]=0;break;case"y,z":R[$+0]=i,R[$+1]=h*se-h*.5,R[$+2]=p*V-p*.5,D[$+0]=o?1:-1,D[$+1]=0,D[$+2]=0;break;default:throw new Error("PlaneGeometry: unknown type")}W+=2,$+=3}for(var X=v+1,I=new Uint16Array(v*x*6),O=0;O<x;O++)for(var U=0;U<v;U++){var re=(O*v+U)*6;I[re+0]=(O+0)*X+U,I[re+1]=(O+1)*X+U,I[re+2]=(O+0)*X+U+1,I[re+3]=(O+1)*X+U,I[re+4]=(O+1)*X+U+1,I[re+5]=(O+0)*X+U+1}var ee={indices:{size:1,value:I},attributes:{POSITION:{size:3,value:R},NORMAL:{size:3,value:D},TEXCOORD_0:{size:2,value:H}}};return u?j6(ee):ee}et();at();function V6(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Rw(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?V6(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):V6(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Zpe(t){var r=$pe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function $pe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Lw=function(t){Ke(e,t);var r=Zpe(e);function e(){ce(this,e);var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.id,a=i===void 0?Sa("sphere-geometry"):i,o=Jpe(n),s=o.indices,u=o.attributes;return r.call(this,Rw(Rw({},n),{},{id:a,indices:s,attributes:Rw(Rw({},u),n.attributes)}))}return e}(Bi);function Jpe(t){var r=t.nlat,e=r===void 0?10:r,n=t.nlong,i=n===void 0?10:n,a=t.radius,o=a===void 0?1:a,s=0,u=Math.PI,c=u-s,h=0,p=2*Math.PI,v=p-h,x=(e+1)*(i+1);if(typeof o=="number"){var E=o;o=function(he,xe,Ge,bt,Kt){return E}}for(var R=new Float32Array(x*3),D=new Float32Array(x*3),H=new Float32Array(x*2),W=x>65535?Uint32Array:Uint16Array,$=new W(e*i*6),J=0;J<=e;J++)for(var B=0;B<=i;B++){var se=B/i,V=J/e,X=B+J*(i+1),I=X*2,O=X*3,U=v*se,re=c*V,ee=Math.sin(U),pe=Math.cos(U),je=Math.sin(re),qe=Math.cos(re),We=pe*je,ot=qe,gt=ee*je,Pt=o(We,ot,gt,se,V);R[O+0]=Pt*We,R[O+1]=Pt*ot,R[O+2]=Pt*gt,D[O+0]=We,D[O+1]=ot,D[O+2]=gt,H[I+0]=se,H[I+1]=1-V}for(var Dt=i+1,nr=0;nr<i;nr++)for(var Nt=0;Nt<e;Nt++){var Ut=(nr*e+Nt)*6;$[Ut+0]=Nt*Dt+nr,$[Ut+1]=Nt*Dt+nr+1,$[Ut+2]=(Nt+1)*Dt+nr,$[Ut+3]=(Nt+1)*Dt+nr,$[Ut+4]=Nt*Dt+nr+1,$[Ut+5]=(Nt+1)*Dt+nr+1}return{indices:{size:1,value:$},attributes:{POSITION:{size:3,value:R},NORMAL:{size:3,value:D},TEXCOORD_0:{size:2,value:H}}}}Mn();at();vt();function mM(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Qpe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Qpe(t,r){if(t){if(typeof t=="string")return H6(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return H6(t,r)}}function H6(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var ede=1,tde=1,ld=function(){function t(){ce(this,t),this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}return ve(t,[{key:"addChannel",value:function(e){var n=e.delay,i=n===void 0?0:n,a=e.duration,o=a===void 0?Number.POSITIVE_INFINITY:a,s=e.rate,u=s===void 0?1:s,c=e.repeat,h=c===void 0?1:c,p=ede++,v={time:0,delay:i,duration:o,rate:u,repeat:h};return this._setChannelTime(v,this.time),this.channels.set(p,v),p}},{key:"removeChannel",value:function(e){this.channels.delete(e);var n=mM(this.animations),i;try{for(n.s();!(i=n.n()).done;){var a=Ot(i.value,2),o=a[0],s=a[1];s.channel===e&&this.detachAnimation(o)}}catch(u){n.e(u)}finally{n.f()}}},{key:"isFinished",value:function(e){var n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}},{key:"getTime",value:function(e){if(e===void 0)return this.time;var n=this.channels.get(e);return n===void 0?-1:n.time}},{key:"setTime",value:function(e){this.time=Math.max(0,e);var n=this.channels.values(),i=mM(n),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;this._setChannelTime(o,this.time)}}catch(x){i.e(x)}finally{i.f()}var s=this.animations.values(),u=mM(s),c;try{for(u.s();!(c=u.n()).done;){var h=c.value,p=h.animation,v=h.channel;p.setTime(this.getTime(v))}}catch(x){u.e(x)}finally{u.f()}}},{key:"play",value:function(){this.playing=!0}},{key:"pause",value:function(){this.playing=!1,this.lastEngineTime=-1}},{key:"reset",value:function(){this.setTime(0)}},{key:"attachAnimation",value:function(e,n){var i=tde++;return this.animations.set(i,{animation:e,channel:n}),e.setTime(this.getTime(n)),i}},{key:"detachAnimation",value:function(e){this.animations.delete(e)}},{key:"update",value:function(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}},{key:"_setChannelTime",value:function(e,n){var i=n-e.delay,a=e.duration*e.repeat;i>=a?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}]),t}();at();function rde(t){var r=nde();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function nde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ide=`attribute vec2 aClipSpacePosition;
attribute vec2 aTexCoord;
attribute vec2 aCoordinate;

varying vec2 position;
varying vec2 coordinate;
varying vec2 uv;

void main(void) {
  gl_Position = vec4(aClipSpacePosition, 0., 1.);
  position = aClipSpacePosition;
  coordinate = aCoordinate;
  uv = aTexCoord;
}
`,W6=[-1,-1,1,-1,-1,1,1,1],kw=function(t){Ke(e,t);var r=rde(e);function e(n,i){var a;ce(this,e);var o=W6.map(function(s){return s===-1?0:s});return a=r.call(this,n,Object.assign({},i,{vs:ide,geometry:new Bi({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(W6)},aTexCoord:{size:2,value:new Float32Array(o)},aCoordinate:{size:2,value:new Float32Array(o)}}})})),a.setVertexCount(4),a}return e}(Ni);at();et();var ade=[255,255,255],ode=1,sde=0,Bw=function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ce(this,t),_(this,"id",void 0),_(this,"color",void 0),_(this,"intensity",void 0),_(this,"type","ambient");var e=r.color,n=e===void 0?ade:e,i=r.intensity,a=i===void 0?ode:i;this.id=r.id||"ambient-".concat(sde++),this.color=n,this.intensity=a};at();vt();et();var ude=[255,255,255],lde=1,cde=[0,0,-1],fde=0,Lm=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ce(this,t),_(this,"id",void 0),_(this,"color",void 0),_(this,"intensity",void 0),_(this,"type","directional"),_(this,"direction",void 0),_(this,"shadow",void 0);var e=r.color,n=e===void 0?ude:e,i=r.intensity,a=i===void 0?lde:i,o=r.direction,s=o===void 0?cde:o,u=r._shadow,c=u===void 0?!1:u;this.id=r.id||"directional-".concat(fde++),this.color=n,this.intensity=a,this.type="directional",this.direction=new _t(s).normalize().toArray(),this.shadow=c}return ve(t,[{key:"getProjectedLight",value:function(e){return this}}]),t}();at();vt();et();at();vt();et();at();vt();et();function q6(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function hde(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?q6(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):q6(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var Dw=function(){function t(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{id:"pass"};ce(this,t),_(this,"id",void 0),_(this,"gl",void 0),_(this,"props",void 0);var n=e.id;this.id=n,this.gl=r,this.props=hde({},e)}return ve(t,[{key:"setProps",value:function(e){Object.assign(this.props,e)}},{key:"render",value:function(e){}},{key:"cleanup",value:function(){}}]),t}();function vM(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=pde(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function pde(t,r){if(t){if(typeof t=="string")return X6(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return X6(t,r)}}function X6(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function dde(t){var r=mde();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function mde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var cd=function(t){Ke(e,t);var r=dde(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"_lastRenderIndex",-1),n}return ve(e,[{key:"render",value:function(i){var a=this.gl;return Ns(a,{framebuffer:i.target}),this._drawLayers(i)}},{key:"_drawLayers",value:function(i){var a=i.target,o=i.moduleParameters,s=i.viewports,u=i.views,c=i.onViewportActive,h=i.clearStack,p=h===void 0?!0:h,v=i.clearCanvas,x=v===void 0?!0:v;i.pass=i.pass||"unknown";var E=this.gl;x&&gde(E,a),p&&(this._lastRenderIndex=-1);var R=[],D=vM(s),H;try{for(D.s();!(H=D.n()).done;){var W=H.value,$=u&&u[W.id];c?.(W);var J=this._getDrawLayerParams(W,i),B=W.subViewports||[W],se=vM(B),V;try{for(se.s();!(V=se.n()).done;){var X=V.value,I=this._drawLayersInViewport(E,{target:a,moduleParameters:o,viewport:X,view:$,pass:i.pass,layers:i.layers},J);R.push(I)}}catch(O){se.e(O)}finally{se.f()}}}catch(O){D.e(O)}finally{D.f()}return R}},{key:"_getDrawLayerParams",value:function(i,a){for(var o=a.layers,s=a.pass,u=a.isPicking,c=u===void 0?!1:u,h=a.layerFilter,p=a.cullRect,v=a.effects,x=a.moduleParameters,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,R=[],D=Y6(this._lastRenderIndex+1),H={layer:o[0],viewport:i,isPicking:c,renderPass:s,cullRect:p},W={},$=0;$<o.length;$++){var J=o[$],B=this._shouldDrawLayer(J,H,h,W),se={shouldDrawLayer:B};B&&!E&&(se.layerRenderIndex=D(J,B),se.moduleParameters=this._getModuleParameters(J,v,s,x),se.layerParameters=this.getLayerParameters(J,$,i)),R[$]=se}return R}},{key:"_drawLayersInViewport",value:function(i,a,o){var s=a.layers,u=a.moduleParameters,c=a.pass,h=a.target,p=a.viewport,v=a.view,x=vde(i,{moduleParameters:u,target:h,viewport:p});if(v&&v.props.clear){var E=v.props.clear===!0?{color:!0,depth:!0}:v.props.clear;Aa(i,{scissorTest:!0,scissor:x},function(){return sh(i,E)})}var R={totalCount:s.length,visibleCount:0,compositeCount:0,pickableCount:0};Ns(i,{viewport:x});for(var D=0;D<s.length;D++){var H=s[D],W=o[D],$=W.shouldDrawLayer,J=W.layerRenderIndex,B=W.moduleParameters,se=W.layerParameters;if($&&H.props.pickable&&R.pickableCount++,H.isComposite)R.compositeCount++;else if($){R.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,J),B.viewport=p;try{H._drawLayer({moduleParameters:B,uniforms:{layerIndex:J},parameters:se})}catch(V){H.raiseError(V,"drawing ".concat(H," to ").concat(c))}}}return R}},{key:"shouldDrawLayer",value:function(i){return!0}},{key:"getModuleParameters",value:function(i,a){return null}},{key:"getLayerParameters",value:function(i,a,o){return i.props.parameters}},{key:"_shouldDrawLayer",value:function(i,a,o,s){var u=i.props.visible&&this.shouldDrawLayer(i);if(!u)return!1;a.layer=i;for(var c=i.parent;c;){if(!c.props.visible||!c.filterSubLayer(a))return!1;a.layer=c,c=c.parent}if(o){var h=a.layer.id;if(h in s||(s[h]=o(a)),!s[h])return!1}return i.activateViewport(a.viewport),!0}},{key:"_getModuleParameters",value:function(i,a,o,s){var u,c=Object.assign(Object.create(((u=i.internalState)===null||u===void 0?void 0:u.propsInTransition)||i.props),{autoWrapLongitude:i.wrapLongitude,viewport:i.context.viewport,mousePosition:i.context.mousePosition,pickingActive:0,devicePixelRatio:Cl(this.gl)});if(a){var h=vM(a),p;try{for(h.s();!(p=h.n()).done;){var v,x=p.value;Object.assign(c,(v=x.getModuleParameters)===null||v===void 0?void 0:v.call(x,i))}}catch(E){h.e(E)}finally{h.f()}}return Object.assign(c,this.getModuleParameters(i,a),s)}}]),e}(Dw);function Y6(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e={},n=function i(a,o){var s=a.props._offset,u=a.id,c=a.parent&&a.parent.id,h;if(c&&!(c in r)&&i(a.parent,!1),c in e){var p=e[c]=e[c]||Y6(r[c],r);h=p(a,o),e[u]=p}else Number.isFinite(s)?(h=s+(r[c]||0),e[u]=null):h=t;return o&&h>=t&&(t=h+1),r[u]=h,h};return n}function vde(t,r){var e=r.moduleParameters,n=r.target,i=r.viewport,a=n&&n.id!=="default-framebuffer",o=e&&e.devicePixelRatio||Cl(t),s=a?n.height:t.drawingBufferHeight,u=i;return[u.x*o,s-(u.y+u.height)*o,u.width*o,u.height*o]}function gde(t,r){var e=r?r.width:t.drawingBufferWidth,n=r?r.height:t.drawingBufferHeight;Ns(t,{viewport:[0,0,e,n]}),t.clear(16640)}function K6(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Z6(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?K6(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):K6(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Ade(t){var r=yde();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function yde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $6=function(t){Ke(e,t);var r=Ade(e);function e(n,i){var a,o,s;return ce(this,e),s=r.call(this,n,i),_(jt(s),"shadowMap",void 0),_(jt(s),"depthBuffer",void 0),_(jt(s),"fbo",void 0),s.shadowMap=new la(n,{width:1,height:1,parameters:(a={},_(a,10241,9729),_(a,10240,9729),_(a,10242,33071),_(a,10243,33071),a)}),s.depthBuffer=new hc(n,{format:33189,width:1,height:1}),s.fbo=new Ea(n,{id:"shadowmap",width:1,height:1,attachments:(o={},_(o,36064,s.shadowMap),_(o,36096,s.depthBuffer),o)}),s}return ve(e,[{key:"render",value:function(i){var a=this,o=this.fbo;Aa(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},function(){var s=i.viewports[0],u=Cl(a.gl),c=s.width*u,h=s.height*u;(c!==o.width||h!==o.height)&&o.resize({width:c,height:h}),Yt(me(e.prototype),"render",a).call(a,Z6(Z6({},i),{},{target:o,pass:"shadow"}))})}},{key:"shouldDrawLayer",value:function(i){return i.props.shadowEnabled!==!1}},{key:"getModuleParameters",value:function(){return{drawToShadowMap:!0}}},{key:"delete",value:function(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}]),e}(cd);Mn();var J6="#define SMOOTH_EDGE_RADIUS 0.5",_de=`
`.concat(J6,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),bde=`
`.concat(J6,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),Q6={name:"geometry",vs:_de,fs:bde};var xde=Object.keys(yn).map(function(t){return"const int COORDINATE_SYSTEM_".concat(t," = ").concat(yn[t],";")}).join(""),wde=Object.keys(ol).map(function(t){return"const int PROJECTION_MODE_".concat(t," = ").concat(ol[t],";")}).join(""),Tde=Object.keys(Uo).map(function(t){return"const int UNIT_".concat(t.toUpperCase()," = ").concat(Uo[t],";")}).join(""),ej="".concat(xde,`
`).concat(wde,`
`).concat(Tde,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world) + project_offset_(project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);var ap=typeof Float32Array<"u"?Float32Array:Array;var wtt=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,r=arguments.length;r--;)t+=arguments[r]*arguments[r];return Math.sqrt(t)});function AM(t,r){var e=r[0],n=r[1],i=r[2],a=r[3],o=r[4],s=r[5],u=r[6],c=r[7],h=r[8],p=r[9],v=r[10],x=r[11],E=r[12],R=r[13],D=r[14],H=r[15],W=e*s-n*o,$=e*u-i*o,J=e*c-a*o,B=n*u-i*s,se=n*c-a*s,V=i*c-a*u,X=h*R-p*E,I=h*D-v*E,O=h*H-x*E,U=p*D-v*R,re=p*H-x*R,ee=v*H-x*D,pe=W*ee-$*re+J*U+B*O-se*I+V*X;return pe?(pe=1/pe,t[0]=(s*ee-u*re+c*U)*pe,t[1]=(i*re-n*ee-a*U)*pe,t[2]=(R*V-D*se+H*B)*pe,t[3]=(v*se-p*V-x*B)*pe,t[4]=(u*O-o*ee-c*I)*pe,t[5]=(e*ee-i*O+a*I)*pe,t[6]=(D*J-E*V-H*$)*pe,t[7]=(h*V-v*J+x*$)*pe,t[8]=(o*re-s*O+c*X)*pe,t[9]=(n*O-e*re-a*X)*pe,t[10]=(E*se-R*J+H*W)*pe,t[11]=(p*J-h*se-x*W)*pe,t[12]=(s*I-o*U-u*X)*pe,t[13]=(e*U-n*I+i*X)*pe,t[14]=(R*$-E*B-D*W)*pe,t[15]=(h*B-p*$+v*W)*pe,t):null}function km(t,r,e){var n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],u=r[5],c=r[6],h=r[7],p=r[8],v=r[9],x=r[10],E=r[11],R=r[12],D=r[13],H=r[14],W=r[15],$=e[0],J=e[1],B=e[2],se=e[3];return t[0]=$*n+J*s+B*p+se*R,t[1]=$*i+J*u+B*v+se*D,t[2]=$*a+J*c+B*x+se*H,t[3]=$*o+J*h+B*E+se*W,$=e[4],J=e[5],B=e[6],se=e[7],t[4]=$*n+J*s+B*p+se*R,t[5]=$*i+J*u+B*v+se*D,t[6]=$*a+J*c+B*x+se*H,t[7]=$*o+J*h+B*E+se*W,$=e[8],J=e[9],B=e[10],se=e[11],t[8]=$*n+J*s+B*p+se*R,t[9]=$*i+J*u+B*v+se*D,t[10]=$*a+J*c+B*x+se*H,t[11]=$*o+J*h+B*E+se*W,$=e[12],J=e[13],B=e[14],se=e[15],t[12]=$*n+J*s+B*p+se*R,t[13]=$*i+J*u+B*v+se*D,t[14]=$*a+J*c+B*x+se*H,t[15]=$*o+J*h+B*E+se*W,t}function tj(t,r,e){var n=e[0],i=e[1],a=e[2],o,s,u,c,h,p,v,x,E,R,D,H;return r===t?(t[12]=r[0]*n+r[4]*i+r[8]*a+r[12],t[13]=r[1]*n+r[5]*i+r[9]*a+r[13],t[14]=r[2]*n+r[6]*i+r[10]*a+r[14],t[15]=r[3]*n+r[7]*i+r[11]*a+r[15]):(o=r[0],s=r[1],u=r[2],c=r[3],h=r[4],p=r[5],v=r[6],x=r[7],E=r[8],R=r[9],D=r[10],H=r[11],t[0]=o,t[1]=s,t[2]=u,t[3]=c,t[4]=h,t[5]=p,t[6]=v,t[7]=x,t[8]=E,t[9]=R,t[10]=D,t[11]=H,t[12]=o*n+h*i+E*a+r[12],t[13]=s*n+p*i+R*a+r[13],t[14]=u*n+v*i+D*a+r[14],t[15]=c*n+x*i+H*a+r[15]),t}function rj(t,r,e){var n=e[0],i=e[1],a=e[2];return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*i,t[5]=r[5]*i,t[6]=r[6]*i,t[7]=r[7]*i,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,t[11]=r[11]*a,t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function Sde(){var t=new ap(4);return ap!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function oj(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function Bm(t,r,e){var n=r[0],i=r[1],a=r[2],o=r[3];return t[0]=e[0]*n+e[4]*i+e[8]*a+e[12]*o,t[1]=e[1]*n+e[5]*i+e[9]*a+e[13]*o,t[2]=e[2]*n+e[6]*i+e[10]*a+e[14]*o,t[3]=e[3]*n+e[7]*i+e[11]*a+e[15]*o,t}var Ttt=function(){var t=Sde();return function(r,e,n,i,a,o){var s,u;for(e||(e=4),n||(n=0),i?u=Math.min(i*e+n,r.length):u=r.length,s=n;s<u;s+=e)t[0]=r[s],t[1]=r[s+1],t[2]=r[s+2],t[3]=r[s+3],a(t,t,o),r[s]=t[0],r[s+1]=t[1],r[s+2]=t[2],r[s+3]=t[3];return r}}();function Ede(t,r){if(t===r)return!0;if(Array.isArray(t)){var e=t.length;if(!r||r.length!==e)return!1;for(var n=0;n<e;n++)if(t[n]!==r[n])return!1;return!0}return!1}function Uc(t){var r={},e;return function(n){for(var i in n)if(!Ede(n[i],r[i])){e=t(n),r=n;break}return e}}var sj=[0,0,0,0],Cde=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],uj=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Pde=[0,0,0],lj=[0,0,0],Ode=Uc(Ide);function _M(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:lj;e.length<3&&(e=[e[0],e[1],0]);var n=e,i,a=!0;switch(r===yn.LNGLAT_OFFSETS||r===yn.METER_OFFSETS?i=e:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case ol.WEB_MERCATOR:(r===yn.LNGLAT||r===yn.CARTESIAN)&&(i=[0,0,0],a=!1);break;case ol.WEB_MERCATOR_AUTO_OFFSET:r===yn.LNGLAT?n=i:r===yn.CARTESIAN&&(n=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(n),n[0]-=e[0],n[1]-=e[1],n[2]-=e[2]);break;case ol.IDENTITY:n=t.position.map(Math.fround),n[2]=n[2]||0;break;case ol.GLOBE:a=!1,i=null;break;default:a=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:n,offsetMode:a}}function Mde(t,r,e){var n=t.viewMatrixUncentered,i=t.projectionMatrix,a=t.viewMatrix,o=t.viewProjectionMatrix,s=sj,u=sj,c=t.cameraPosition,h=_M(t,r,e),p=h.geospatialOrigin,v=h.shaderCoordinateOrigin,x=h.offsetMode;return x&&(u=t.projectPosition(p||v),c=[c[0]-u[0],c[1]-u[1],c[2]-u[2]],u[3]=1,s=Bm([],u,o),a=n||a,o=km([],i,a),o=km([],o,Cde)),{viewMatrix:a,viewProjectionMatrix:o,projectionCenter:s,originCommon:u,cameraPosCommon:c,shaderCoordinateOrigin:v,geospatialOrigin:p}}function Fw(t){var r=t.viewport,e=t.devicePixelRatio,n=e===void 0?1:e,i=t.modelMatrix,a=i===void 0?null:i,o=t.coordinateSystem,s=o===void 0?yn.DEFAULT:o,u=t.coordinateOrigin,c=u===void 0?lj:u,h=t.autoWrapLongitude,p=h===void 0?!1:h;s===yn.DEFAULT&&(s=r.isGeospatial?yn.LNGLAT:yn.CARTESIAN);var v=Ode({viewport:r,devicePixelRatio:n,coordinateSystem:s,coordinateOrigin:c});return v.project_uWrapLongitude=p,v.project_uModelMatrix=a||uj,v}function Ide(t){var r=t.viewport,e=t.devicePixelRatio,n=t.coordinateSystem,i=t.coordinateOrigin,a=Mde(r,n,i),o=a.projectionCenter,s=a.viewProjectionMatrix,u=a.originCommon,c=a.cameraPosCommon,h=a.shaderCoordinateOrigin,p=a.geospatialOrigin,v=r.getDistanceScales(),x=[r.width*e,r.height*e],E=Bm([],[0,0,-r.focalDistance,1],r.projectionMatrix)[3]||1,R={project_uCoordinateSystem:n,project_uProjectionMode:r.projectionMode,project_uCoordinateOrigin:h,project_uCommonOrigin:u.slice(0,3),project_uCenter:o,project_uPseudoMeters:Boolean(r._pseudoMeters),project_uViewportSize:x,project_uDevicePixelRatio:e,project_uFocalDistance:E,project_uCommonUnitsPerMeter:v.unitsPerMeter,project_uCommonUnitsPerWorldUnit:v.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:Pde,project_uScale:r.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:uj,project_uCameraPosition:c};if(p){var D=r.getDistanceScales(p);switch(n){case yn.METER_OFFSETS:R.project_uCommonUnitsPerWorldUnit=D.unitsPerMeter,R.project_uCommonUnitsPerWorldUnit2=D.unitsPerMeter2;break;case yn.LNGLAT:case yn.LNGLAT_OFFSETS:r._pseudoMeters||(R.project_uCommonUnitsPerMeter=D.unitsPerMeter),R.project_uCommonUnitsPerWorldUnit=D.unitsPerDegree,R.project_uCommonUnitsPerWorldUnit2=D.unitsPerDegree2;break;case yn.CARTESIAN:R.project_uCommonUnitsPerWorldUnit=[1,1,D.unitsPerMeter[2]],R.project_uCommonUnitsPerWorldUnit2=[0,0,D.unitsPerMeter2[2]];break;default:break}}return R}var Rde={};function Lde(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rde;return"viewport"in t?Fw(t):{}}var fd={name:"project",dependencies:[Qx,Q6],vs:ej,getUniforms:Lde};Mn();at();vt();et();function Kg(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function hd(t,r){var e=yw([],r,t);return Aw(e,e,1/e[3]),e}function bM(t,r){var e=t%r;return e<0?r+e:e}function cj(t,r,e){return e*r+(1-e)*t}function O_(t,r,e){return t<r?r:t>e?e:t}function kde(t){return Math.log(t)*Math.LOG2E}var Zg=Math.log2||kde;Mn();function jc(t,r){if(!t)throw new Error(r||"@math.gl/web-mercator: assertion failed.")}var _f=Math.PI,fj=_f/4,Gc=_f/180,xM=180/_f,$g=512,Nw=4003e4,Jg=85.051129,wM=1.5;function Qg(t){return Math.pow(2,t)}function zw(t){return Zg(t)}function ss(t){var r=Ot(t,2),e=r[0],n=r[1];jc(Number.isFinite(e)),jc(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");var i=e*Gc,a=n*Gc,o=$g*(i+_f)/(2*_f),s=$g*(_f+Math.log(Math.tan(fj+a*.5)))/(2*_f);return[o,s]}function Zs(t){var r=Ot(t,2),e=r[0],n=r[1],i=e/$g*(2*_f)-_f,a=2*(Math.atan(Math.exp(n/$g*(2*_f)-_f))-fj);return[i*xM,a*xM]}function M_(t){var r=t.latitude;jc(Number.isFinite(r));var e=Math.cos(r*Gc);return zw(Nw*e)-9}function I_(t){var r=Math.cos(t*Gc);return $g/Nw/r}function Dm(t){var r=t.latitude,e=t.longitude,n=t.highPrecision,i=n===void 0?!1:n;jc(Number.isFinite(r)&&Number.isFinite(e));var a=$g,o=Math.cos(r*Gc),s=a/360,u=s/o,c=a/Nw/o,h={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[s,u,c],degreesPerUnit:[1/s,1/u,1/c]};if(i){var p=Gc*Math.tan(r*Gc)/o,v=s*p/2,x=a/Nw*p,E=x/u*c;h.unitsPerDegree2=[0,v,x],h.unitsPerMeter2=[E,0,E]}return h}function R_(t,r){var e=Ot(t,3),n=e[0],i=e[1],a=e[2],o=Ot(r,3),s=o[0],u=o[1],c=o[2],h=Dm({longitude:n,latitude:i,highPrecision:!0}),p=h.unitsPerMeter,v=h.unitsPerMeter2,x=ss(t);x[0]+=s*(p[0]+v[0]*u),x[1]+=u*(p[1]+v[1]*u);var E=Zs(x),R=(a||0)+(c||0);return Number.isFinite(a)||Number.isFinite(c)?[E[0],E[1],R]:E}function L_(t){var r=t.height,e=t.pitch,n=t.bearing,i=t.altitude,a=t.scale,o=t.center,s=Kg();Rm(s,s,[0,0,-i]),dw(s,s,-e*Gc),mw(s,s,n*Gc);var u=a/r;return qg(s,s,[u,u,u]),o&&Rm(s,s,AU([],o)),s}function Uw(t){var r=t.width,e=t.height,n=t.altitude,i=t.pitch,a=i===void 0?0:i,o=t.offset,s=t.center,u=t.scale,c=t.nearZMultiplier,h=c===void 0?1:c,p=t.farZMultiplier,v=p===void 0?1:p,x=t.fovy,E=x===void 0?op(wM):x;n!==void 0&&(E=op(n));var R=E*Gc,D=a*Gc,H=pd(E),W=H;s&&(W+=s[2]*u/Math.cos(D)/e);var $=R*(.5+(o?o[1]:0)/e),J=Math.sin($)*W/Math.sin(O_(Math.PI/2-D-$,.01,Math.PI-.01)),B=Math.sin(D)*J+W,se=W*10,V=Math.min(B*v,se);return{fov:R,aspect:r/e,focalDistance:H,near:h,far:V}}function TM(t){var r=Uw(t),e=r.fov,n=r.aspect,i=r.near,a=r.far,o=vw([],e,n,i,a);return o}function op(t){return 2*Math.atan(.5/t)*xM}function pd(t){return .5/Math.tan(.5*t*Gc)}function Fm(t,r){var e=Ot(t,3),n=e[0],i=e[1],a=e[2],o=a===void 0?0:a;return jc(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(o)),hd(r,[n,i,o,1])}function Hl(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=Ot(t,3),i=n[0],a=n[1],o=n[2];if(jc(Number.isFinite(i)&&Number.isFinite(a),"invalid pixel coordinate"),Number.isFinite(o)){var s=hd(r,[i,a,o,1]);return s}var u=hd(r,[i,a,0,1]),c=hd(r,[i,a,1,1]),h=u[2],p=c[2],v=h===p?0:((e||0)-h)/(p-h);return ew([],u,c,v)}Mn();function eA(t){var r=t.width,e=t.height,n=t.bounds,i=t.minExtent,a=i===void 0?0:i,o=t.maxZoom,s=o===void 0?24:o,u=t.offset,c=u===void 0?[0,0]:u,h=Ot(n,2),p=Ot(h[0],2),v=p[0],x=p[1],E=Ot(h[1],2),R=E[0],D=E[1],H=Bde(t.padding),W=ss([v,O_(D,-Jg,Jg)]),$=ss([R,O_(x,-Jg,Jg)]),J=[Math.max(Math.abs($[0]-W[0]),a),Math.max(Math.abs($[1]-W[1]),a)],B=[r-H.left-H.right-Math.abs(c[0])*2,e-H.top-H.bottom-Math.abs(c[1])*2];jc(B[0]>0&&B[1]>0);var se=B[0]/J[0],V=B[1]/J[1],X=(H.right-H.left)/2/se,I=(H.bottom-H.top)/2/V,O=[($[0]+W[0])/2+X,($[1]+W[1])/2+I],U=Zs(O),re=Math.min(s,Zg(Math.abs(Math.min(se,V))));return jc(Number.isFinite(re)),{longitude:U[0],latitude:U[1],zoom:re}}function Bde(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(jc(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}var hj=Math.PI/180;function tA(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=t.width,n=t.height,i=t.unproject,a={targetZ:r},o=i([0,n],a),s=i([e,n],a),u,c,h=t.fovy?.5*t.fovy*hj:Math.atan(.5/t.altitude),p=(90-t.pitch)*hj;return h>p-.01?(u=pj(t,0,r),c=pj(t,e,r)):(u=i([0,0],a),c=i([e,0],a)),[o,s,c,u]}function pj(t,r,e){var n=t.pixelUnprojectionMatrix,i=hd(n,[r,0,1,1]),a=hd(n,[r,t.height,1,1]),o=e*t.distanceScales.unitsPerMeter[2],s=(o-i[2])/(a[2]-i[2]),u=ew([],i,a,s),c=Zs(u);return c.push(e),c}var dj=function(){function t(){var r=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{width:1,height:1};ce(this,t),_(this,"latitude",void 0),_(this,"longitude",void 0),_(this,"zoom",void 0),_(this,"pitch",void 0),_(this,"bearing",void 0),_(this,"altitude",void 0),_(this,"fovy",void 0),_(this,"meterOffset",void 0),_(this,"center",void 0),_(this,"width",void 0),_(this,"height",void 0),_(this,"scale",void 0),_(this,"distanceScales",void 0),_(this,"viewMatrix",void 0),_(this,"projectionMatrix",void 0),_(this,"viewProjectionMatrix",void 0),_(this,"pixelProjectionMatrix",void 0),_(this,"pixelUnprojectionMatrix",void 0),_(this,"equals",function(re){return re instanceof t?re.width===r.width&&re.height===r.height&&nM(re.projectionMatrix,r.projectionMatrix)&&nM(re.viewMatrix,r.viewMatrix):!1}),_(this,"project",function(re){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=ee.topLeft,je=pe===void 0?!0:pe,qe=r.projectPosition(re),We=Fm(qe,r.pixelProjectionMatrix),ot=Ot(We,2),gt=ot[0],Pt=ot[1],Dt=je?Pt:r.height-Pt;return re.length===2?[gt,Dt]:[gt,Dt,We[2]]}),_(this,"unproject",function(re){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=ee.topLeft,je=pe===void 0?!0:pe,qe=ee.targetZ,We=qe===void 0?void 0:qe,ot=Ot(re,3),gt=ot[0],Pt=ot[1],Dt=ot[2],nr=je?Pt:r.height-Pt,Nt=We&&We*r.distanceScales.unitsPerMeter[2],Ut=Hl([gt,nr,Dt],r.pixelUnprojectionMatrix,Nt),Or=r.unprojectPosition(Ut),he=Ot(Or,3),xe=he[0],Ge=he[1],bt=he[2];return Number.isFinite(Dt)?[xe,Ge,bt]:Number.isFinite(We)?[xe,Ge,We]:[xe,Ge]}),_(this,"projectPosition",function(re){var ee=ss(re),pe=Ot(ee,2),je=pe[0],qe=pe[1],We=(re[2]||0)*r.distanceScales.unitsPerMeter[2];return[je,qe,We]}),_(this,"unprojectPosition",function(re){var ee=Zs(re),pe=Ot(ee,2),je=pe[0],qe=pe[1],We=(re[2]||0)*r.distanceScales.metersPerUnit[2];return[je,qe,We]});var n=e.width,i=e.height,a=e.altitude,o=a===void 0?null:a,s=e.fovy,u=s===void 0?null:s,c=e.latitude,h=c===void 0?0:c,p=e.longitude,v=p===void 0?0:p,x=e.zoom,E=x===void 0?0:x,R=e.pitch,D=R===void 0?0:R,H=e.bearing,W=H===void 0?0:H,$=e.position,J=$===void 0?null:$,B=e.nearZMultiplier,se=B===void 0?.02:B,V=e.farZMultiplier,X=V===void 0?1.01:V;n=n||1,i=i||1,u===null&&o===null?(o=wM,u=op(o)):u===null?u=op(o):o===null&&(o=pd(u));var I=Qg(E);o=Math.max(.75,o);var O=Dm({longitude:v,latitude:h}),U=ss([v,h]);U.push(0),J&&gU(U,U,TU([],J,O.unitsPerMeter)),this.projectionMatrix=TM({width:n,height:i,scale:I,center:U,pitch:D,fovy:u,nearZMultiplier:se,farZMultiplier:X}),this.viewMatrix=L_({height:i,scale:I,center:U,pitch:D,bearing:W,altitude:o}),this.width=n,this.height=i,this.scale=I,this.latitude=h,this.longitude=v,this.zoom=E,this.pitch=D,this.bearing=W,this.altitude=o,this.fovy=u,this.center=U,this.meterOffset=J||[0,0,0],this.distanceScales=O,this._initMatrices(),Object.freeze(this)}return ve(t,[{key:"_initMatrices",value:function(){var e=this.width,n=this.height,i=this.projectionMatrix,a=this.viewMatrix,o=Kg();Im(o,o,i),Im(o,o,a),this.viewProjectionMatrix=o;var s=Kg();qg(s,s,[e/2,-n/2,1]),Rm(s,s,[1,-1,0]),Im(s,s,o);var u=pw(Kg(),s);if(!u)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=s,this.pixelUnprojectionMatrix=u}},{key:"projectFlat",value:function(e){return ss(e)}},{key:"unprojectFlat",value:function(e){return Zs(e)}},{key:"getMapCenterByLngLatPosition",value:function(e){var n=e.lngLat,i=e.pos,a=Hl(i,this.pixelUnprojectionMatrix),o=ss(n),s=x_([],o,fU([],a)),u=x_([],this.center,s);return Zs(u)}},{key:"fitBounds",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.width,a=this.height,o=eA(Object.assign({width:i,height:a,bounds:e},n)),s=o.longitude,u=o.latitude,c=o.zoom;return new t({width:i,height:a,longitude:s,latitude:u,zoom:c})}},{key:"getBounds",value:function(e){var n=this.getBoundingRegion(e),i=Math.min.apply(Math,Pr(n.map(function(u){return u[0]}))),a=Math.max.apply(Math,Pr(n.map(function(u){return u[0]}))),o=Math.min.apply(Math,Pr(n.map(function(u){return u[1]}))),s=Math.max.apply(Math,Pr(n.map(function(u){return u[1]})));return[[i,o],[a,s]]}},{key:"getBoundingRegion",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return tA(this,e.z||0)}},{key:"getLocationAtPoint",value:function(e){var n=e.lngLat,i=e.pos;return this.getMapCenterByLngLatPosition({lngLat:n,pos:i})}}]),t}();var mj=512;function jw(t){var r=t.width,e=t.height,n=t.pitch,i=n===void 0?0:n,a=t.longitude,o=t.latitude,s=t.zoom,u=t.bearing,c=u===void 0?0:u;(a<-180||a>180)&&(a=bM(a+180,360)-180),(c<-180||c>180)&&(c=bM(c+180,360)-180);var h=Zg(e/mj);if(s<=h)s=h,o=0;else{var p=e/2/Math.pow(2,s),v=Zs([0,p])[1];if(o<v)o=v;else{var x=Zs([0,mj-p])[1];o>x&&(o=x)}}return{width:r,height:e,longitude:a,latitude:o,zoom:s,pitch:i,bearing:c}}et();function vj(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function gj(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?vj(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):vj(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Dde(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Fde(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Fde(t,r){if(t){if(typeof t=="string")return Aj(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Aj(t,r)}}function Aj(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var yj=.01,Nde=["longitude","latitude","zoom"],_j={curve:1.414,speed:1.2};function Gw(t,r,e,n){var i=bj(t,r,n),a=i.startZoom,o=i.startCenterXY,s=i.uDelta,u=i.w0,c=i.u1,h=i.S,p=i.rho,v=i.rho2,x=i.r0;if(c<yj){var E={},R=Dde(Nde),D;try{for(R.s();!(D=R.n()).done;){var H=D.value,W=t[H],$=r[H];E[H]=cj(W,$,e)}}catch(U){R.e(U)}finally{R.f()}return E}var J=e*h,B=Math.cosh(x)/Math.cosh(x+p*J),se=u*((Math.cosh(x)*Math.tanh(x+p*J)-Math.sinh(x))/v)/c,V=1/B,X=a+zw(V),I=lU([],s,se);x_(I,I,o);var O=Zs(I);return{longitude:O[0],latitude:O[1],zoom:X}}function SM(t,r,e){var n=gj(gj({},_j),e),i=n.screenSpeed,a=n.speed,o=n.maxDuration,s=bj(t,r,n),u=s.S,c=s.rho,h=1e3*u,p;return Number.isFinite(i)?p=h/(i/c):p=h/a,Number.isFinite(o)&&p>o?0:p}function bj(t,r,e){e=Object.assign({},_j,e);var n=e.curve,i=t.zoom,a=[t.longitude,t.latitude],o=Qg(i),s=r.zoom,u=[r.longitude,r.latitude],c=Qg(s-i),h=ss(a),p=ss(u),v=dU([],p,h),x=Math.max(t.width,t.height),E=x/c,R=cU(v)*o,D=Math.max(R,yj),H=n*n,W=(E*E-x*x+H*H*D*D)/(2*x*H*D),$=(E*E-x*x-H*H*D*D)/(2*E*H*D),J=Math.log(Math.sqrt(W*W+1)-W),B=Math.log(Math.sqrt($*$+1)-$),se=(B-J)/n;return{startZoom:i,startCenterXY:h,uDelta:v,w0:x,u1:R,S:se,rho:n,rho2:H,r0:J,r1:B}}function zde(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Ude(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Ude(t,r){if(t){if(typeof t=="string")return xj(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return xj(t,r)}}function xj(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var jde=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,Gde=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,Vde=Uc(Yde),Hde=Uc(Kde),Wde=[0,0,0,1],qde=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function Xde(t,r){var e=Ot(t,3),n=e[0],i=e[1],a=e[2],o=Hl([n,i,a],r);return Number.isFinite(a)?o:[o[0],o[1],0]}function Yde(t){var r=t.viewport,e=t.center;return new gn(r.viewProjectionMatrix).invert().transform(e)}function Kde(t){var r=t.viewport,e=t.shadowMatrices,n=[],i=r.pixelUnprojectionMatrix,a=r.isGeospatial?void 0:1,o=[[0,0,a],[r.width,0,a],[0,r.height,a],[r.width,r.height,a],[0,0,-1],[r.width,0,-1],[0,r.height,-1],[r.width,r.height,-1]].map(function(h){return Xde(h,i)}),s=zde(e),u;try{var c=function(){var p=u.value,v=p.clone().translate(new _t(r.center).negate()),x=o.map(function(R){return v.transform(R)}),E=new gn().ortho({left:Math.min.apply(Math,Pr(x.map(function(R){return R[0]}))),right:Math.max.apply(Math,Pr(x.map(function(R){return R[0]}))),bottom:Math.min.apply(Math,Pr(x.map(function(R){return R[1]}))),top:Math.max.apply(Math,Pr(x.map(function(R){return R[1]}))),near:Math.min.apply(Math,Pr(x.map(function(R){return-R[2]}))),far:Math.max.apply(Math,Pr(x.map(function(R){return-R[2]})))});n.push(E.multiplyRight(p))};for(s.s();!(u=s.n()).done;)c()}catch(h){s.e(h)}finally{s.f()}return n}function Zde(t,r){var e=t.shadowEnabled,n=e===void 0?!0:e;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};for(var i={shadow_uDrawShadowMap:Boolean(t.drawToShadowMap),shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||Wde,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},a=Vde({viewport:t.viewport,center:r.project_uCenter}),o=[],s=Hde({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice(),u=0;u<t.shadowMatrices.length;u++){var c=s[u],h=c.clone().translate(new _t(t.viewport.center).negate());r.project_uCoordinateSystem===yn.LNGLAT&&r.project_uProjectionMode===ol.WEB_MERCATOR?(s[u]=h,o[u]=a):(s[u]=c.clone().multiplyRight(qde),o[u]=h.transform(a))}for(var p=0;p<s.length;p++)i["shadow_uViewProjectionMatrices[".concat(p,"]")]=s[p],i["shadow_uProjectCenters[".concat(p,"]")]=o[p],t.shadowMaps&&t.shadowMaps.length>0?i["shadow_uShadowMap".concat(p)]=t.shadowMaps[p]:i["shadow_uShadowMap".concat(p)]=t.dummyShadowMap;return i}var Nm={name:"shadow",dependencies:[fd],vs:jde,fs:Gde,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return"viewport"in r&&(r.drawToShadowMap||r.shadowMaps&&r.shadowMaps.length>0)?Zde(r,e):{}}};function wj(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=$de(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function $de(t,r){if(t){if(typeof t=="string")return Tj(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Tj(t,r)}}function Tj(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Jde={color:[255,255,255],intensity:1},Sj=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Qde=[0,0,0,200/255],k_=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ce(this,t),_(this,"id","lighting-effect"),_(this,"props",void 0),_(this,"shadowColor",Qde),_(this,"shadow",void 0),_(this,"ambientLight",void 0),_(this,"directionalLights",void 0),_(this,"pointLights",void 0),_(this,"shadowPasses",[]),_(this,"shadowMaps",[]),_(this,"dummyShadowMap",null),_(this,"programManager",void 0),_(this,"shadowMatrices",void 0),this.setProps(r)}return ve(t,[{key:"setProps",value:function(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(var n in e){var i=e[n];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i);break;default:}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(function(a){return a.shadow}),this.props=e}},{key:"preRender",value:function(e,n){var i=n.layers,a=n.layerFilter,o=n.viewports,s=n.onViewportActive,u=n.views;if(this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=ch.getDefaultProgramManager(e),Nm&&this.programManager.addDefaultModule(Nm)),this.dummyShadowMap||(this.dummyShadowMap=new la(e,{width:1,height:1}));for(var c=0;c<this.shadowPasses.length;c++){var h=this.shadowPasses[c];h.render({layers:i,layerFilter:a,viewports:o,onViewportActive:s,views:u,moduleParameters:{shadowLightId:c,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}},{key:"getModuleParameters",value:function(e){var n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(function(i){return i.getProjectedLight({layer:e})}),pointLights:this.pointLights.map(function(i){return i.getProjectedLight({layer:e})})},n}},{key:"cleanup",value:function(){var e=wj(this.shadowPasses),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;i.delete()}}catch(a){e.e(a)}finally{e.f()}this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(Nm),this.programManager=null)}},{key:"_calculateMatrices",value:function(){var e=[],n=wj(this.directionalLights),i;try{for(n.s();!(i=n.n()).done;){var a=i.value,o=new gn().lookAt({eye:new _t(a.direction).negate()});e.push(o)}}catch(s){n.e(s)}finally{n.f()}return e}},{key:"_createShadowPasses",value:function(e){for(var n=0;n<this.directionalLights.length;n++){var i=new $6(e);this.shadowPasses[n]=i,this.shadowMaps[n]=i.shadowMap}}},{key:"_applyDefaultLights",value:function(){var e=this.ambientLight,n=this.pointLights,i=this.directionalLights;!e&&n.length===0&&i.length===0&&(this.ambientLight=new Bw(Jde),this.directionalLights.push(new Lm(Sj[0]),new Lm(Sj[1])))}}]),t}();at();vt();et();Mn();Mn();at();vt();et();Mn();at();vt();et();at();vt();et();var eme=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ce(this,t),_(this,"_pool",[]),_(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(r)}return ve(t,[{key:"setOptions",value:function(e){Object.assign(this.opts,e)}},{key:"allocate",value:function(e,n,i){var a=i.size,o=a===void 0?1:a,s=i.type,u=i.padding,c=u===void 0?0:u,h=i.copy,p=h===void 0?!1:h,v=i.initialize,x=v===void 0?!1:v,E=i.maxCount,R=s||e&&e.constructor||Float32Array,D=n*o+c;if(ArrayBuffer.isView(e)){if(D<=e.length)return e;if(D*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new R(e.buffer,0,D)}var H=1/0;E&&(H=E*o+c);var W=this._allocate(R,D,x,H);return e&&p?W.set(e):x||W.fill(0,0,4),this._release(e),W}},{key:"release",value:function(e){this._release(e)}},{key:"_allocate",value:function(e,n,i,a){var o=Math.max(Math.ceil(n*this.opts.overAlloc),1);o>a&&(o=a);var s=this._pool,u=e.BYTES_PER_ELEMENT*o,c=s.findIndex(function(p){return p.byteLength>=u});if(c>=0){var h=new e(s.splice(c,1)[0],0,o);return i&&h.fill(0),h}return new e(o)}},{key:"_release",value:function(e){if(ArrayBuffer.isView(e)){var n=this._pool,i=e.buffer,a=i.byteLength,o=n.findIndex(function(s){return s.byteLength>=a});o<0?n.push(i):(o>0||n.length<this.opts.poolSize)&&n.splice(o,0,i),n.length>this.opts.poolSize&&n.shift()}}}]),t}(),bf=new eme;function tme(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=rme(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function rme(t,r){if(t){if(typeof t=="string")return Ej(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ej(t,r)}}function Ej(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function nA(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function zm(t,r){var e=t%r;return e<0?r+e:e}function Pj(t){return[t[12],t[13],t[14]]}function Oj(t){return{left:rA(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:rA(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:rA(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:rA(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:rA(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:rA(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}var Cj=new _t;function rA(t,r,e,n){Cj.set(t,r,e);var i=Cj.len();return{distance:n/i,normal:new _t(-t/i,-r/i,-e/i)}}function dd(t){return t-Math.fround(t)}var B_;function Vw(t,r){var e=r.size,n=e===void 0?1:e,i=r.startIndex,a=i===void 0?0:i,o=r.endIndex!==void 0?r.endIndex:t.length,s=(o-a)/n;B_=bf.allocate(B_,s,{type:Float32Array,size:n*2});for(var u=a,c=0;u<o;){for(var h=0;h<n;h++){var p=t[u++];B_[c+h]=p,B_[c+h+n]=dd(p)}c+=n*2}return B_.subarray(0,s*n*2)}function Mj(t){var r=null,e=!1,n=tme(t),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;a&&(r?(e||(r=[[r[0][0],r[0][1]],[r[1][0],r[1][1]]],e=!0),r[0][0]=Math.min(r[0][0],a[0][0]),r[0][1]=Math.min(r[0][1],a[0][1]),r[1][0]=Math.max(r[1][0],a[1][0]),r[1][1]=Math.max(r[1][1],a[1][1])):r=a)}}catch(o){n.e(o)}finally{n.f()}return r}var nme=Math.PI/180,ime=nA(),Ij=[0,0,0],ame={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function ome(t){var r=t.width,e=t.height,n=t.orthographic,i=t.fovyRadians,a=t.focalDistance,o=t.padding,s=t.near,u=t.far,c=r/e,h=n?new gn().orthographic({fovy:i,aspect:c,focalDistance:a,near:s,far:u}):new gn().perspective({fovy:i,aspect:c,near:s,far:u});if(o){var p=o.left,v=p===void 0?0:p,x=o.right,E=x===void 0?0:x,R=o.top,D=R===void 0?0:R,H=o.bottom,W=H===void 0?0:H,$=ya((v+r-E)/2,0,r)-r/2,J=ya((D+e-W)/2,0,e)-e/2;h[8]-=$*2/r,h[9]+=J*2/e}return h}var Ju=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ce(this,t),_(this,"id",void 0),_(this,"x",void 0),_(this,"y",void 0),_(this,"width",void 0),_(this,"height",void 0),_(this,"padding",void 0),_(this,"isGeospatial",void 0),_(this,"zoom",void 0),_(this,"focalDistance",void 0),_(this,"position",void 0),_(this,"modelMatrix",void 0),_(this,"distanceScales",void 0),_(this,"scale",void 0),_(this,"center",void 0),_(this,"cameraPosition",void 0),_(this,"projectionMatrix",void 0),_(this,"viewMatrix",void 0),_(this,"viewMatrixUncentered",void 0),_(this,"viewMatrixInverse",void 0),_(this,"viewProjectionMatrix",void 0),_(this,"pixelProjectionMatrix",void 0),_(this,"pixelUnprojectionMatrix",void 0),_(this,"resolution",void 0),_(this,"_frustumPlanes",{}),this.id=r.id||this.constructor.displayName||"viewport",this.x=r.x||0,this.y=r.y||0,this.width=r.width||1,this.height=r.height||1,this.zoom=r.zoom||0,this.padding=r.padding,this.distanceScales=r.distanceScales||ame,this.focalDistance=r.focalDistance||1,this.position=r.position||Ij,this.modelMatrix=r.modelMatrix||null;var e=r.longitude,n=r.latitude;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(e),this._initProps(r),this._initMatrices(r),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return ve(t,[{key:"subViewports",get:function(){return null}},{key:"metersPerPixel",get:function(){return this.distanceScales.metersPerUnit[2]/this.scale}},{key:"projectionMode",get:function(){return this.isGeospatial?this.zoom<12?ol.WEB_MERCATOR:ol.WEB_MERCATOR_AUTO_OFFSET:ol.IDENTITY}},{key:"equals",value:function(e){return e instanceof t?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Ao(e.projectionMatrix,this.projectionMatrix)&&Ao(e.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.topLeft,a=i===void 0?!0:i,o=this.projectPosition(e),s=Fm(o,this.pixelProjectionMatrix),u=Ot(s,2),c=u[0],h=u[1],p=a?h:this.height-h;return e.length===2?[c,p]:[c,p,s[2]]}},{key:"unproject",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.topLeft,a=i===void 0?!0:i,o=n.targetZ,s=Ot(e,3),u=s[0],c=s[1],h=s[2],p=a?c:this.height-c,v=o&&o*this.distanceScales.unitsPerMeter[2],x=Hl([u,p,h],this.pixelUnprojectionMatrix,v),E=this.unprojectPosition(x),R=Ot(E,3),D=R[0],H=R[1],W=R[2];return Number.isFinite(h)?[D,H,W]:Number.isFinite(o)?[D,H,o]:[D,H]}},{key:"projectPosition",value:function(e){var n=this.projectFlat(e),i=Ot(n,2),a=i[0],o=i[1],s=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[a,o,s]}},{key:"unprojectPosition",value:function(e){var n=this.unprojectFlat(e),i=Ot(n,2),a=i[0],o=i[1],s=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[a,o,s]}},{key:"projectFlat",value:function(e){if(this.isGeospatial){var n=ss(e);return n[1]=ya(n[1],-318,830),n}return e}},{key:"unprojectFlat",value:function(e){return this.isGeospatial?Zs(e):e}},{key:"getBounds",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n={targetZ:e.z||0},i=this.unproject([0,0],n),a=this.unproject([this.width,0],n),o=this.unproject([0,this.height],n),s=this.unproject([this.width,this.height],n);return[Math.min(i[0],a[0],o[0],s[0]),Math.min(i[1],a[1],o[1],s[1]),Math.max(i[0],a[0],o[0],s[0]),Math.max(i[1],a[1],o[1],s[1])]}},{key:"getDistanceScales",value:function(e){return e?Dm({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}},{key:"containsPixel",value:function(e){var n=e.x,i=e.y,a=e.width,o=a===void 0?1:a,s=e.height,u=s===void 0?1:s;return n<this.x+this.width&&this.x<n+o&&i<this.y+this.height&&this.y<i+u}},{key:"getFrustumPlanes",value:function(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,Oj(this.viewProjectionMatrix)),this._frustumPlanes)}},{key:"panByPosition",value:function(e,n){return null}},{key:"_initProps",value:function(e){var n=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=M_({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||Dm({latitude:i,longitude:n}));var a=Math.pow(2,this.zoom);this.scale=a;var o=e.position,s=e.modelMatrix,u=Ij;if(o&&(u=s?new gn(s).transformAsVector(o,[]):o),this.isGeospatial){var c=this.projectPosition([n,i,0]);this.center=new _t(u).scale(this.distanceScales.unitsPerMeter).add(c)}else this.center=this.projectPosition(u)}},{key:"_initMatrices",value:function(e){var n=e.viewMatrix,i=n===void 0?ime:n,a=e.projectionMatrix,o=a===void 0?null:a,s=e.orthographic,u=s===void 0?!1:s,c=e.fovyRadians,h=e.fovy,p=h===void 0?75:h,v=e.near,x=v===void 0?.1:v,E=e.far,R=E===void 0?1e3:E,D=e.padding,H=D===void 0?null:D,W=e.focalDistance,$=W===void 0?1:W;this.viewMatrixUncentered=i,this.viewMatrix=new gn().multiplyRight(i).translate(new _t(this.center).negate()),this.projectionMatrix=o||ome({width:this.width,height:this.height,orthographic:u,fovyRadians:c||p*nme,focalDistance:$,padding:H,near:x,far:R});var J=nA();km(J,J,this.projectionMatrix),km(J,J,this.viewMatrix),this.viewProjectionMatrix=J,this.viewMatrixInverse=AM([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=Pj(this.viewMatrixInverse);var B=nA(),se=nA();rj(B,B,[this.width/2,-this.height/2,1]),tj(B,B,[1,-1,0]),km(se,B,this.viewProjectionMatrix),this.pixelProjectionMatrix=se,this.pixelUnprojectionMatrix=AM(nA(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||xr.warn("Pixel project matrix not invertible")()}}]),t}();_(Ju,"displayName","Viewport");function sme(){var t=new ap(2);return ap!=Float32Array&&(t[0]=0,t[1]=0),t}function iA(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t}function Hw(t,r){return t[0]=-r[0],t[1]=-r[1],t}var tnt=function(){var t=sme();return function(r,e,n,i,a,o){var s,u;for(e||(e=2),n||(n=0),i?u=Math.min(i*e+n,r.length):u=r.length,s=n;s<u;s+=e)t[0]=r[s],t[1]=r[s+1],a(t,t,o),r[s]=t[0],r[s+1]=t[1];return r}}();function Lj(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function aA(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Lj(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Lj(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function ume(t){var r=lme();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function lme(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Vc=function(t){Ke(e,t);var r=ume(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ce(this,e);var a=i.latitude,o=a===void 0?0:a,s=i.longitude,u=s===void 0?0:s,c=i.zoom,h=c===void 0?0:c,p=i.pitch,v=p===void 0?0:p,x=i.bearing,E=x===void 0?0:x,R=i.nearZMultiplier,D=R===void 0?.1:R,H=i.farZMultiplier,W=H===void 0?1.01:H,$=i.nearZ,J=i.farZ,B=i.orthographic,se=B===void 0?!1:B,V=i.projectionMatrix,X=i.repeat,I=X===void 0?!1:X,O=i.worldOffset,U=O===void 0?0:O,re=i.position,ee=i.padding,pe=i.legacyMeterSizes,je=pe===void 0?!1:pe,qe=i.width,We=i.height,ot=i.altitude,gt=ot===void 0?1.5:ot,Pt=Math.pow(2,h);qe=qe||1,We=We||1;var Dt,nr=null;if(V)gt=V[5]/2,Dt=op(gt);else{i.fovy?(Dt=i.fovy,gt=pd(Dt)):Dt=op(gt);var Nt;if(ee){var Ut=ee.top,Or=Ut===void 0?0:Ut,he=ee.bottom,xe=he===void 0?0:he;Nt=[0,ya((Or+We-xe)/2,0,We)-We/2]}nr=Uw({width:qe,height:We,scale:Pt,center:re&&[0,0,re[2]*I_(o)],offset:Nt,pitch:v,fovy:Dt,nearZMultiplier:D,farZMultiplier:W}),Number.isFinite($)&&(nr.near=$),Number.isFinite(J)&&(nr.far=J)}var Ge=L_({height:We,pitch:v,bearing:E,scale:Pt,altitude:gt});if(U){var bt=new gn().translate([512*U,0,0]);Ge=bt.multiplyLeft(Ge)}return n=r.call(this,aA(aA(aA({},i),{},{width:qe,height:We,viewMatrix:Ge,longitude:u,latitude:o,zoom:h},nr),{},{fovy:Dt,focalDistance:gt})),_(jt(n),"longitude",void 0),_(jt(n),"latitude",void 0),_(jt(n),"pitch",void 0),_(jt(n),"bearing",void 0),_(jt(n),"altitude",void 0),_(jt(n),"fovy",void 0),_(jt(n),"orthographic",void 0),_(jt(n),"_subViewports",void 0),_(jt(n),"_pseudoMeters",void 0),n.latitude=o,n.longitude=u,n.zoom=h,n.pitch=v,n.bearing=E,n.altitude=gt,n.fovy=Dt,n.orthographic=se,n._subViewports=I?[]:null,n._pseudoMeters=je,Object.freeze(jt(n)),n}return ve(e,[{key:"subViewports",get:function(){if(this._subViewports&&!this._subViewports.length)for(var i=this.getBounds(),a=Math.floor((i[0]+180)/360),o=Math.ceil((i[2]-180)/360),s=a;s<=o;s++){var u=s?new e(aA(aA({},this),{},{worldOffset:s})):this;this._subViewports.push(u)}return this._subViewports}},{key:"projectPosition",value:function(i){if(this._pseudoMeters)return Yt(me(e.prototype),"projectPosition",this).call(this,i);var a=this.projectFlat(i),o=Ot(a,2),s=o[0],u=o[1],c=(i[2]||0)*I_(i[1]);return[s,u,c]}},{key:"unprojectPosition",value:function(i){if(this._pseudoMeters)return Yt(me(e.prototype),"unprojectPosition",this).call(this,i);var a=this.unprojectFlat(i),o=Ot(a,2),s=o[0],u=o[1],c=(i[2]||0)/I_(u);return[s,u,c]}},{key:"addMetersToLngLat",value:function(i,a){return R_(i,a)}},{key:"panByPosition",value:function(i,a){var o=Hl(a,this.pixelUnprojectionMatrix),s=this.projectFlat(i),u=iA([],s,Hw([],o)),c=iA([],this.center,u),h=this.unprojectFlat(c),p=Ot(h,2),v=p[0],x=p[1];return{longitude:v,latitude:x}}},{key:"getBounds",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=tA(this,i.z||0);return[Math.min(a[0][0],a[1][0],a[2][0],a[3][0]),Math.min(a[0][1],a[1][1],a[2][1],a[3][1]),Math.max(a[0][0],a[1][0],a[2][0],a[3][0]),Math.max(a[0][1],a[1][1],a[2][1],a[3][1])]}},{key:"fitBounds",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.width,s=this.height,u=eA(aA({width:o,height:s,bounds:i},a)),c=u.longitude,h=u.latitude,p=u.zoom;return new e({width:o,height:s,longitude:c,latitude:h,zoom:p})}}]),e}(Ju);_(Vc,"displayName","WebMercatorViewport");function cme(){var t=new ap(3);return ap!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function fme(t){var r=t[0],e=t[1],n=t[2];return Math.hypot(r,e,n)}function hme(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}function pme(t){var r=t[0],e=t[1],n=t[2];return r*r+e*e+n*n}function kj(t,r,e,n){var i=r[0],a=r[1],o=r[2];return t[0]=i+n*(e[0]-i),t[1]=a+n*(e[1]-a),t[2]=o+n*(e[2]-o),t}var Ww=hme;var Bj=fme,qw=pme,mnt=function(){var t=cme();return function(r,e,n,i,a,o){var s,u;for(e||(e=3),n||(n=0),i?u=Math.min(i*e+n,r.length):u=r.length,s=n;s<u;s+=e)t[0]=r[s],t[1]=r[s+1],t[2]=r[s+2],a(t,t,o),r[s]=t[0],r[s+1]=t[1],r[s+2]=t[2];return r}}();var Fj=[0,0,0];function EM(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=r.projectPosition(t);if(e&&r instanceof Vc){var i=Ot(t,3),a=i[0],o=i[1],s=i[2],u=s===void 0?0:s,c=r.getDistanceScales([a,o]);n[2]=u*c.unitsPerMeter[2]}return n}function dme(t){var r=t.viewport,e=t.modelMatrix,n=t.coordinateOrigin,i=t.coordinateSystem,a=t.fromCoordinateSystem,o=t.fromCoordinateOrigin;return i===yn.DEFAULT&&(i=r.isGeospatial?yn.LNGLAT:yn.CARTESIAN),a===void 0&&(a=i),o===void 0&&(o=n),{viewport:r,coordinateSystem:i,coordinateOrigin:n,modelMatrix:e,fromCoordinateSystem:a,fromCoordinateOrigin:o}}function CM(t,r){var e=r.viewport,n=r.modelMatrix,i=r.coordinateSystem,a=r.coordinateOrigin,o=r.offsetMode,s=Ot(t,3),u=s[0],c=s[1],h=s[2],p=h===void 0?0:h;if(n){var v=Bm([],[u,c,p,1],n),x=Ot(v,3);u=x[0],c=x[1],p=x[2]}switch(i){case yn.LNGLAT:return EM([u,c,p],e,o);case yn.LNGLAT_OFFSETS:return EM([u+a[0],c+a[1],p+(a[2]||0)],e,o);case yn.METER_OFFSETS:return EM(R_(a,[u,c,p]),e,o);case yn.CARTESIAN:default:return e.isGeospatial?[u+a[0],c+a[1],p+a[2]]:e.projectPosition([u,c,p])}}function Xw(t,r){var e=dme(r),n=e.viewport,i=e.coordinateSystem,a=e.coordinateOrigin,o=e.modelMatrix,s=e.fromCoordinateSystem,u=e.fromCoordinateOrigin,c=r.autoOffset,h=c===void 0?!0:c,p=h?_M(n,i,a):{},v=p.geospatialOrigin,x=v===void 0?Fj:v,E=p.shaderCoordinateOrigin,R=E===void 0?Fj:E,D=p.offsetMode,H=D===void 0?!1:D,W=CM(t,{viewport:n,modelMatrix:o,coordinateSystem:s,coordinateOrigin:u,offsetMode:H});if(H){var $=n.projectPosition(x||R);Ww(W,W,$)}return W}function Nj(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function mme(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Nj(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Nj(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var vme=[255,255,255],gme=1,Ame=[0,0,1],yme=[0,0,1],_me=0,Yw=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ce(this,t),_(this,"id",void 0),_(this,"color",void 0),_(this,"intensity",void 0),_(this,"type","point"),_(this,"position",void 0),_(this,"attenuation",void 0),_(this,"projectedLight",void 0);var e=r.color,n=e===void 0?vme:e,i=r.intensity,a=i===void 0?gme:i,o=r.position,s=o===void 0?yme:o;this.id=r.id||"point-".concat(_me++),this.color=n,this.intensity=a,this.type="point",this.position=s,this.attenuation=bme(r),this.projectedLight=mme({},this)}return ve(t,[{key:"getProjectedLight",value:function(e){var n=e.layer,i=this.projectedLight,a=n.context.viewport,o=n.props,s=o.coordinateSystem,u=o.coordinateOrigin,c=Xw(this.position,{viewport:a,coordinateSystem:s,coordinateOrigin:u,fromCoordinateSystem:a.isGeospatial?yn.LNGLAT:yn.CARTESIAN,fromCoordinateOrigin:[0,0,0]});return i.color=this.color,i.intensity=this.intensity,i.position=c,i}}]),t}();function bme(t){return t.attenuation?t.attenuation:"intensity"in t?[0,0,t.intensity||0]:Ame}at();vt();function xme(t){var r=wme();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function wme(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var zj=function(t){Ke(e,t);var r=xme(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"getProjectedLight",value:function(i){var a=i.layer,o=this.projectedLight,s=a.context.viewport,u=a.props,c=u.coordinateSystem,h=u.coordinateOrigin,p=u.modelMatrix,v=Fw({viewport:s,modelMatrix:p,coordinateSystem:c,coordinateOrigin:h}),x=v.project_uCameraPosition;return o.color=this.color,o.intensity=this.intensity,o.position=x,o}}]),e}(Yw);Mn();at();vt();et();var Um=Math.PI/180,Tme=1e3*60*60*24,Sme=2440588,Eme=2451545,Kw=Um*23.4397,Cme=357.5291,Pme=.98560028,Ome=280.147,Mme=360.9856235;function Uj(t,r,e){var n=Um*-e,i=Um*r,a=Rme(t),o=Ume(a),s=Fme(a,n)-o.rightAscension;return{azimuth:Bme(s,i,o.declination),altitude:Dme(s,i,o.declination)}}function Zw(t,r,e){var n=Uj(t,r,e),i=n.azimuth,a=n.altitude;return[Math.sin(i)*Math.cos(a),Math.cos(i)*Math.cos(a),-Math.sin(a)]}function Ime(t){var r=typeof t=="number"?t:t.getTime();return r/Tme-.5+Sme}function Rme(t){return Ime(t)-Eme}function Lme(t,r){var e=t;return Math.atan2(Math.sin(e)*Math.cos(Kw)-Math.tan(r)*Math.sin(Kw),Math.cos(e))}function kme(t,r){var e=t;return Math.asin(Math.sin(r)*Math.cos(Kw)+Math.cos(r)*Math.sin(Kw)*Math.sin(e))}function Bme(t,r,e){var n=t,i=r,a=e;return Math.atan2(Math.sin(n),Math.cos(n)*Math.sin(i)-Math.tan(a)*Math.cos(i))}function Dme(t,r,e){var n=t,i=r,a=e;return Math.asin(Math.sin(i)*Math.sin(a)+Math.cos(i)*Math.cos(a)*Math.cos(n))}function Fme(t,r){return Um*(Ome+Mme*t)-r}function Nme(t){return Um*(Cme+Pme*t)}function zme(t){var r=t,e=Um*(1.9148*Math.sin(r)+.02*Math.sin(2*r)+3e-4*Math.sin(3*r)),n=Um*102.9372;return r+e+n+Math.PI}function Ume(t){var r=Nme(t),e=zme(r);return{declination:kme(e,0),rightAscension:Lme(e,0)}}function jme(t){var r=Gme();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Gme(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var jj=function(t){Ke(e,t);var r=jme(e);function e(n){var i;return ce(this,e),i=r.call(this,n),_(jt(i),"timestamp",void 0),i.timestamp=n.timestamp,i}return ve(e,[{key:"getProjectedLight",value:function(i){var a=i.layer,o=a.context.viewport,s=o.resolution&&o.resolution>0;if(s){var u=Zw(this.timestamp,0,0),c=Ot(u,3),h=c[0],p=c[1],v=c[2];this.direction=[h,-v,p]}else{var x=o.latitude,E=o.longitude;this.direction=Zw(this.timestamp,x,E)}return this}}]),e}(Lm);at();vt();et();at();vt();et();function Vme(t){var r=Hme();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Hme(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var PM=function(t){Ke(e,t);var r=Vme(e);function e(n,i){var a;ce(this,e),a=r.call(this,n,i),_(jt(a),"model",void 0);var o=i.module,s=i.fs,u=i.id;return a.model=new kw(n,{id:u,fs:s,modules:[o]}),a}return ve(e,[{key:"render",value:function(i){var a=this,o=this.gl;Ns(o,{viewport:[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}),Aa(o,{framebuffer:i.outputBuffer,clearColor:[0,0,0,0]},function(){return a._renderPass(o,i)})}},{key:"delete",value:function(){this.model.delete(),this.model=null}},{key:"_renderPass",value:function(i,a){var o=a.inputBuffer;sh(i,{color:!0}),this.model.draw({moduleSettings:a.moduleSettings,uniforms:{texture:o,texSize:[o.width,o.height]},parameters:{depthWrite:!1,depthTest:!1}})}}]),e}(Dw);function Wme(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=qme(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function qme(t,r){if(t){if(typeof t=="string")return Gj(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Gj(t,r)}}function Gj(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Hj=function(){function t(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ce(this,t),_(this,"id",void 0),_(this,"props",void 0),_(this,"module",void 0),_(this,"passes",void 0),this.id="".concat(r.name,"-pass"),this.props=e,Xx(r),this.module=r}return ve(t,[{key:"setProps",value:function(e){this.props=e}},{key:"preRender",value:function(){}},{key:"postRender",value:function(e,n){var i=this.passes||Xme(e,this.module,this.id);this.passes=i;for(var a=n.target,o=n.inputBuffer,s=n.swapBuffer,u=0;u<this.passes.length;u++){a&&u===this.passes.length-1&&(s=a),this.passes[u].render({inputBuffer:o,outputBuffer:s,moduleSettings:this.props});var c=s;s=o,o=c}return o}},{key:"cleanup",value:function(){if(this.passes){var e=Wme(this.passes),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;i.delete()}}catch(a){e.e(a)}finally{e.f()}this.passes=void 0}}}]),t}();function Xme(t,r,e){if(!r.passes){var n=Vj(r),i=new PM(t,{id:e,module:r,fs:n});return[i]}return r.passes.map(function(a,o){var s=Vj(r,a),u="".concat(e,"-").concat(o);return new PM(t,{id:u,module:r,fs:s})})}var Yme=function(r){return`uniform sampler2D texture;
uniform vec2 texSize;

varying vec2 position;
varying vec2 coordinate;
varying vec2 uv;

void main() {
  vec2 texCoord = coordinate;

  gl_FragColor = texture2D(texture, texCoord);
  gl_FragColor = `.concat(r,`(gl_FragColor, texSize, texCoord);
}
`)},Kme=function(r){return`uniform sampler2D texture;
uniform vec2 texSize;

varying vec2 position;
varying vec2 coordinate;
varying vec2 uv;

void main() {
  vec2 texCoord = coordinate;

  gl_FragColor = `.concat(r,`(texture, texSize, texCoord);
}
`)};function Vj(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;if(r.filter){var e=typeof r.filter=="string"?r.filter:"".concat(t.name,"_filterColor");return Yme(e)}if(r.sampler){var n=typeof r.sampler=="string"?r.sampler:"".concat(t.name,"_sampleColor");return Kme(n)}return null}at();vt();et();function Wj(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function OM(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Wj(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Wj(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Zme(t){var r=$me();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function $me(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var qj={blendFunc:[1,0,32771,0],blendEquation:32774},oA=function(t){Ke(e,t);var r=Zme(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"pickZ",void 0),_(jt(n),"_colorEncoderState",null),n}return ve(e,[{key:"render",value:function(i){return"pickingFBO"in i?this._drawPickingBuffer(i):Yt(me(e.prototype),"render",this).call(this,i)}},{key:"_drawPickingBuffer",value:function(i){var a=this,o=i.layers,s=i.layerFilter,u=i.views,c=i.viewports,h=i.onViewportActive,p=i.pickingFBO,v=i.deviceRect,x=v.x,E=v.y,R=v.width,D=v.height,H=i.cullRect,W=i.effects,$=i.pass,J=$===void 0?"picking":$,B=i.pickZ,se=i.moduleParameters,V=this.gl;this.pickZ=B;var X=this._resetColorEncoder(B),I=Aa(V,OM(OM({scissorTest:!0,scissor:[x,E,R,D],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},qj),{},{blend:!B}),function(){return Yt(me(e.prototype),"render",a).call(a,{target:p,layers:o,layerFilter:s,views:u,viewports:c,onViewportActive:h,cullRect:H,effects:W?.filter(function(U){return U.useInPicking}),pass:J,isPicking:!0,moduleParameters:se})});this._colorEncoderState=null;var O=X&&Qme.bind(null,X);return{decodePickingColor:O,stats:I}}},{key:"shouldDrawLayer",value:function(i){var a=i.props,o=a.pickable,s=a.operation;return o&&s.includes("draw")||s.includes("terrain")||s.includes("mask")}},{key:"getModuleParameters",value:function(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}},{key:"getLayerParameters",value:function(i,a,o){var s=OM({},i.props.parameters),u=i.props,c=u.pickable,h=u.operation;return this._colorEncoderState?c&&h.includes("draw")&&(Object.assign(s,qj),s.blend=!0,s.blendColor=Jme(this._colorEncoderState,i,o)):s.blend=!1,h.includes("terrain")&&(s.blend=!1),s}},{key:"_resetColorEncoder",value:function(i){return this._colorEncoderState=i?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}]),e}(cd);function Jme(t,r,e){var n=t.byLayer,i=t.byAlpha,a,o=n.get(r);return o?(o.viewports.push(e),a=o.a):(a=n.size+1,a<=255?(o={a,layer:r,viewports:[e]},n.set(r,o),i[a]=o):(xr.warn("Too many pickable layers, only picking the first 255")(),a=0)),[0,0,0,a/255]}function Qme(t,r){var e=t.byAlpha[r[3]];return e&&{pickedLayer:e.layer,pickedViewports:e.viewports,pickedObjectIndex:e.layer.decodePickingColor(r)}}at();vt();et();at();vt();et();var md={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},sA=Symbol.for("component"),Hc=Symbol.for("propTypes"),$w=Symbol.for("deprecatedProps"),sp=Symbol.for("asyncPropDefaults"),fh=Symbol.for("asyncPropOriginal"),xf=Symbol.for("asyncPropResolved");function hh(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};return Array.isArray(t)?Xj(t,r,[]):r(t)?[t]:[]}function Xj(t,r,e){for(var n=-1;++n<t.length;){var i=t[n];Array.isArray(i)?Xj(i,r,e):r(i)&&e.push(i)}return e}function Jw(t){for(var r=t.target,e=t.source,n=t.start,i=n===void 0?0:n,a=t.count,o=a===void 0?1:a,s=e.length,u=o*s,c=0,h=i;c<s;c++)r[h++]=e[c];for(;c<u;)c<u-c?(r.copyWithin(i+c,i,i+c),c*=2):(r.copyWithin(i+c,i,i+u-c),c=u);return r}at();vt();et();at();vt();et();function eve(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=tve(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function tve(t,r){if(t){if(typeof t=="string")return Yj(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Yj(t,r)}}function Yj(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Kj=function(){function t(r,e,n){ce(this,t),_(this,"id",void 0),_(this,"context",void 0),_(this,"isLoaded",void 0),_(this,"persistent",void 0),_(this,"_loadCount",0),_(this,"_subscribers",new Set),_(this,"_data",void 0),_(this,"_loader",void 0),_(this,"_error",void 0),_(this,"_content",void 0),this.id=r,this.context=n,this.setData(e)}return ve(t,[{key:"subscribe",value:function(e){this._subscribers.add(e)}},{key:"unsubscribe",value:function(e){this._subscribers.delete(e)}},{key:"inUse",value:function(){return this._subscribers.size>0}},{key:"delete",value:function(){}},{key:"getData",value:function(){var e=this;return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(function(){return e.getData()})}},{key:"setData",value:function(e,n){var i=this;if(!(e===this._data&&!n)){this._data=e;var a=++this._loadCount,o=e;typeof e=="string"&&(o=Ks(e)),o instanceof Promise?(this.isLoaded=!1,this._loader=o.then(function(h){i._loadCount===a&&(i.isLoaded=!0,i._error=void 0,i._content=h)}).catch(function(h){i._loadCount===a&&(i.isLoaded=!0,i._error=h||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);var s=eve(this._subscribers),u;try{for(s.s();!(u=s.n()).done;){var c=u.value;c.onChange(this.getData())}}catch(h){s.e(h)}finally{s.f()}}}}]),t}();var Zj=function(){function t(r){var e=r.gl,n=r.protocol;ce(this,t),_(this,"protocol",void 0),_(this,"_context",void 0),_(this,"_resources",void 0),_(this,"_consumers",void 0),_(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}return ve(t,[{key:"contains",value:function(e){return e.startsWith(this.protocol)?!0:e in this._resources}},{key:"add",value:function(e){var n=e.resourceId,i=e.data,a=e.forceUpdate,o=a===void 0?!1:a,s=e.persistent,u=s===void 0?!0:s,c=this._resources[n];c?c.setData(i,o):(c=new Kj(n,i,this._context),this._resources[n]=c),c.persistent=u}},{key:"remove",value:function(e){var n=this._resources[e];n&&(n.delete(),delete this._resources[e])}},{key:"unsubscribe",value:function(e){var n=e.consumerId,i=this._consumers[n];if(i){for(var a in i){var o=i[a],s=this._resources[o.resourceId];s&&s.unsubscribe(o)}delete this._consumers[n],this.prune()}}},{key:"subscribe",value:function(e){var n=e.resourceId,i=e.onChange,a=e.consumerId,o=e.requestId,s=o===void 0?"default":o,u=this._resources,c=this.protocol;n.startsWith(c)&&(n=n.replace(c,""),u[n]||this.add({resourceId:n,data:null,persistent:!1}));var h=u[n];if(this._track(a,s,h,i),h)return h.getData()}},{key:"prune",value:function(){var e=this;this._pruneRequest||(this._pruneRequest=setTimeout(function(){return e._prune()},0))}},{key:"finalize",value:function(){for(var e in this._resources)this._resources[e].delete()}},{key:"_track",value:function(e,n,i,a){var o=this._consumers,s=o[e]=o[e]||{},u=s[n]||{},c=u.resourceId&&this._resources[u.resourceId];c&&(c.unsubscribe(u),this.prune()),i&&(s[n]=u,u.onChange=a,u.resourceId=i.id,i.subscribe(u))}},{key:"_prune",value:function(){this._pruneRequest=null;for(var e=0,n=Object.keys(this._resources);e<n.length;e++){var i=n[e],a=this._resources[i];!a.persistent&&!a.inUse()&&(a.delete(),delete this._resources[i])}}}]),t}();var rve=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,La={name:"project32",dependencies:[fd],vs:rve};et();function $j(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function nve(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?$j(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):$j(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var Wa=nve({inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:#decl":`
uniform bool picking_uAttribute;
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}}},xw);function Jj(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=ive(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function ive(t,r){if(t){if(typeof t=="string")return Qj(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Qj(t,r)}}function Qj(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var ave=[fd],ove=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function e5(t){var r=ch.getDefaultProgramManager(t),e=Jj(ave),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;r.addDefaultModule(i)}}catch(u){e.e(u)}finally{e.f()}var a=Jj(ove),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;r.addShaderHook(s)}}catch(u){a.e(u)}finally{a.f()}return r}function D_(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=sve(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function sve(t,r){if(t){if(typeof t=="string")return t5(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return t5(t,r)}}function t5(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var uve="layerManager.setLayers",lve="layerManager.activateViewport",Qw=function(){function t(r){var e=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.deck,a=n.stats,o=n.viewport,s=n.timeline;ce(this,t),_(this,"layers",void 0),_(this,"context",void 0),_(this,"resourceManager",void 0),_(this,"_lastRenderedLayers",[]),_(this,"_needsRedraw",!1),_(this,"_needsUpdate",!1),_(this,"_nextLayers",null),_(this,"_debug",!1),_(this,"activateViewport",function(u){_s(lve,e,u),u&&(e.context.viewport=u)}),this.layers=[],this.resourceManager=new Zj({gl:r,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:r,deck:i,programManager:r&&e5(r),stats:a||new Tm({id:"deck.gl"}),viewport:o||new Ju({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new ld,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}return ve(t,[{key:"finalize",value:function(){this.resourceManager.finalize();var e=D_(this.layers),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;this._finalizeLayer(i)}}catch(a){e.e(a)}finally{e.f()}}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{clearRedrawFlags:!1},n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var i=D_(this.layers),a;try{for(i.s();!(a=i.n()).done;){var o=a.value,s=o.getNeedsRedraw(e);n=n||s}}catch(u){i.e(u)}finally{i.f()}return n}},{key:"needsUpdate",value:function(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}},{key:"setNeedsRedraw",value:function(e){this._needsRedraw=this._needsRedraw||e}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e}},{key:"getLayers",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.layerIds;return n?this.layers.filter(function(i){return n.find(function(a){return i.id.indexOf(a)===0})}):this.layers}},{key:"setProps",value:function(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}},{key:"setLayers",value:function(e,n){_s(uve,this,n,e),this._lastRenderedLayers=e;var i=hh(e,Boolean),a=D_(i),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;s.context=this.context}}catch(u){a.e(u)}finally{a.f()}this._updateLayers(this.layers,i)}},{key:"updateLayers",value:function(){var e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}},{key:"_handleError",value:function(e,n,i){i.raiseError(n,"".concat(e," of ").concat(i))}},{key:"_updateLayers",value:function(e,n){var i={},a=D_(e),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;i[s.id]?xr.warn("Multiple old layers with same id ".concat(s.id))():i[s.id]=s}}catch(x){a.e(x)}finally{a.f()}var u=[];this._updateSublayersRecursively(n,i,u),this._finalizeOldLayers(i);for(var c=!1,h=0,p=u;h<p.length;h++){var v=p[h];if(v.hasUniformTransition()){c="Uniform transition in ".concat(v);break}}this._needsUpdate=c,this.layers=u}},{key:"_updateSublayersRecursively",value:function(e,n,i){var a=D_(e),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;s.context=this.context;var u=n[s.id];u===null&&xr.warn("Multiple new layers with same id ".concat(s.id))(),n[s.id]=null;var c=null;try{this._debug&&u!==s&&s.validateProps(),u?(this._transferLayerState(u,s),this._updateLayer(s)):this._initializeLayer(s),i.push(s),c=s.isComposite?s.getSubLayers():null}catch(h){this._handleError("matching",h,s)}c&&this._updateSublayersRecursively(c,n,i)}}catch(h){a.e(h)}finally{a.f()}}},{key:"_finalizeOldLayers",value:function(e){for(var n in e){var i=e[n];i&&this._finalizeLayer(i)}}},{key:"_initializeLayer",value:function(e){try{e._initialize(),e.lifecycle=md.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}},{key:"_transferLayerState",value:function(e,n){n._transferState(e),n.lifecycle=md.MATCHED,n!==e&&(e.lifecycle=md.AWAITING_GC)}},{key:"_updateLayer",value:function(e){try{e._update()}catch(n){this._handleError("update",n,e)}}},{key:"_finalizeLayer",value:function(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=md.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=md.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}]),t}();at();vt();et();Ii();function Us(t,r,e){if(t===r)return!0;if(!e||!t||!r)return!1;if(Array.isArray(t)){if(!Array.isArray(r)||t.length!==r.length)return!1;for(var n=0;n<t.length;n++)if(!Us(t[n],r[n],e-1))return!1;return!0}if(Array.isArray(r))return!1;if(vr(t)==="object"&&vr(r)==="object"){var i=Object.keys(t),a=Object.keys(r);if(i.length!==a.length)return!1;for(var o=0,s=i;o<s.length;o++){var u=s[o];if(!r.hasOwnProperty(u)||!Us(t[u],r[u],e-1))return!1}return!0}return!1}function r5(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function F_(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?r5(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):r5(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var n5=function(){function t(r){ce(this,t),_(this,"width",void 0),_(this,"height",void 0),_(this,"views",void 0),_(this,"viewState",void 0),_(this,"controllers",void 0),_(this,"timeline",void 0),_(this,"_viewports",void 0),_(this,"_viewportMap",void 0),_(this,"_isUpdating",void 0),_(this,"_needsRedraw",void 0),_(this,"_needsUpdate",void 0),_(this,"_eventManager",void 0),_(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=r.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=r.eventManager,this._eventCallbacks={onViewStateChange:r.onViewStateChange,onInteractionStateChange:r.onInteractionStateChange},Object.seal(this),this.setProps(r)}return ve(t,[{key:"finalize",value:function(){for(var e in this.controllers){var n=this.controllers[e];n&&n.finalize()}this.controllers={}}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{clearRedrawFlags:!1},n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}},{key:"updateViewStates",value:function(){for(var e in this.controllers){var n=this.controllers[e];n&&n.updateTransition()}}},{key:"getViewports",value:function(e){return e?this._viewports.filter(function(n){return n.containsPixel(e)}):this._viewports}},{key:"getViews",value:function(){var e={};return this.views.forEach(function(n){e[n.id]=n}),e}},{key:"getView",value:function(e){return this.views.find(function(n){return n.id===e})}},{key:"getViewState",value:function(e){var n=typeof e=="string"?this.getView(e):e,i=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(i):i}},{key:"getViewport",value:function(e){return this._viewportMap[e]}},{key:"unproject",value:function(e,n){for(var i=this.getViewports(),a={x:e[0],y:e[1]},o=i.length-1;o>=0;--o){var s=i[o];if(s.containsPixel(a)){var u=e.slice();return u[0]-=s.x,u[1]-=s.y,s.unproject(u,n)}}return null}},{key:"setProps",value:function(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}},{key:"_update",value:function(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function(e){e=hh(e,Boolean);var n=this._diffViews(e,this.views);n&&this.setNeedsUpdate("views changed"),this.views=e}},{key:"_setViewState",value:function(e){if(e){var n=!Us(e,this.viewState,3);n&&this.setNeedsUpdate("viewState changed"),this.viewState=e}else xr.warn("missing `viewState` or `initialViewState`")()}},{key:"_onViewStateChange",value:function(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange(F_(F_({},n),{},{viewId:e}))}},{key:"_createController",value:function(e,n){var i=this,a=n.type,o=new a({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:function(u){var c;return(c=i.getView(e.id))===null||c===void 0?void 0:c.makeViewport({viewState:u,width:i.width,height:i.height})}});return o}},{key:"_updateController",value:function(e,n,i,a){var o=e.controller;if(o&&i){var s=F_(F_(F_({},n),o),{},{id:e.id,x:i.x,y:i.y,width:i.width,height:i.height});return(!a||a.constructor!==o.type)&&(a=this._createController(e,s)),a&&a.setProps(s),a}return null}},{key:"_rebuildViewports",value:function(){var e=this.views,n=this.controllers;this._viewports=[],this.controllers={};for(var i=!1,a=e.length;a--;){var o=e[a],s=this.getViewState(o),u=o.makeViewport({viewState:s,width:this.width,height:this.height}),c=n[o.id],h=Boolean(o.controller);h&&!c&&(i=!0),(i||!h)&&c&&(c.finalize(),c=null),this.controllers[o.id]=this._updateController(o,s,u,c),u&&this._viewports.unshift(u)}for(var p in n){var v=n[p];v&&!this.controllers[p]&&v.finalize()}this._buildViewportMap()}},{key:"_buildViewportMap",value:function(){var e=this;this._viewportMap={},this._viewports.forEach(function(n){n.id&&(e._viewportMap[n.id]=e._viewportMap[n.id]||n)})}},{key:"_diffViews",value:function(e,n){return e.length!==n.length?!0:e.some(function(i,a){return!e[a].equals(n[a])})}}]),t}();at();vt();et();Ii();at();vt();et();Ii();var cve=/([0-9]+\.?[0-9]*)(%|px)/;function up(t){switch(vr(t)){case"number":return{position:t,relative:!1};case"string":var r=cve.exec(t);if(r&&r.length>=3){var e=r[2]==="%",n=parseFloat(r[1]);return{position:e?n/100:n,relative:e}}default:throw new Error("Could not parse position string ".concat(t))}}function lp(t,r){return t.relative?Math.round(t.position*r):t.position}function yo(t,r){if(!t)throw new Error(r||"deck.gl: assertion failed.")}function i5(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function jm(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?i5(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i5(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var Wc=function(){function t(r){ce(this,t),_(this,"id",void 0),_(this,"viewportInstance",void 0),_(this,"_x",void 0),_(this,"_y",void 0),_(this,"_width",void 0),_(this,"_height",void 0),_(this,"_padding",void 0),_(this,"props",void 0);var e=r||{},n=e.id,i=e.x,a=i===void 0?0:i,o=e.y,s=o===void 0?0:o,u=e.width,c=u===void 0?"100%":u,h=e.height,p=h===void 0?"100%":h,v=e.padding,x=v===void 0?null:v,E=e.viewportInstance;yo(!E||E instanceof Ju),this.viewportInstance=E,this.id=n||this.constructor.displayName||"view",this.props=jm(jm({},r),{},{id:this.id}),this._x=up(a),this._y=up(s),this._width=up(c),this._height=up(p),this._padding=x&&{left:up(x.left||0),right:up(x.right||0),top:up(x.top||0),bottom:up(x.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}return ve(t,[{key:"equals",value:function(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&Us(this.props,e.props,2)}},{key:"makeViewport",value:function(e){var n=e.width,i=e.height,a=e.viewState;if(this.viewportInstance)return this.viewportInstance;a=this.filterViewState(a);var o=this.getDimensions({width:n,height:i});return!o.height||!o.width?null:new this.ViewportType(jm(jm(jm({},a),this.props),o))}},{key:"getViewStateId",value:function(){var e=this.props.viewState;return typeof e=="string"?e:e?.id||this.id}},{key:"filterViewState",value:function(e){if(this.props.viewState&&vr(this.props.viewState)==="object"){if(!this.props.viewState.id)return this.props.viewState;var n=jm({},e);for(var i in this.props.viewState)i!=="id"&&(n[i]=this.props.viewState[i]);return n}return e}},{key:"getDimensions",value:function(e){var n=e.width,i=e.height,a={x:lp(this._x,n),y:lp(this._y,i),width:lp(this._width,n),height:lp(this._height,i)};return this._padding&&(a.padding={left:lp(this._padding.left,n),top:lp(this._padding.top,i),right:lp(this._padding.right,n),bottom:lp(this._padding.bottom,i)}),a}},{key:"controller",get:function(){var e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:jm({type:this.ControllerType},e):null}}]),t}();at();vt();et();at();vt();et();at();vt();et();at();vt();et();var ph=function(){function t(r){ce(this,t),_(this,"_inProgress",void 0),_(this,"_handle",void 0),_(this,"_timeline",void 0),_(this,"time",void 0),_(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=r,this.time=0,this.settings={duration:0}}return ve(t,[{key:"inProgress",get:function(){return this._inProgress}},{key:"start",value:function(e){var n,i;this.cancel(),this.settings=e,this._inProgress=!0,(n=(i=this.settings).onStart)===null||n===void 0||n.call(i,this)}},{key:"end",value:function(){if(this._inProgress){var e,n;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(n=this.settings).onEnd)===null||e===void 0||e.call(n,this)}}},{key:"cancel",value:function(){if(this._inProgress){var e,n;(e=(n=this.settings).onInterrupt)===null||e===void 0||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}},{key:"update",value:function(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){var i=this._timeline,a=this.settings;this._handle=i.addChannel({delay:i.getTime(),duration:a.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(n=this.settings).onUpdate)===null||e===void 0||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}},{key:"_onUpdate",value:function(){}}]),t}();function a5(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function e2(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?a5(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):a5(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var o5=function(){},N_={BREAK:1,SNAP_TO_END:2,IGNORE:3},fve=function(r){return r},hve=N_.BREAK,s5=function(){function t(r){var e=this;ce(this,t),_(this,"getControllerState",void 0),_(this,"props",void 0),_(this,"propsInTransition",void 0),_(this,"transition",void 0),_(this,"onViewStateChange",void 0),_(this,"onStateChange",void 0),_(this,"_onTransitionUpdate",function(n){var i=n.time,a=n.settings,o=a.interpolator,s=a.startProps,u=a.endProps,c=a.duration,h=a.easing,p=h(i/c),v=o.interpolateProps(s,u,p);e.propsInTransition=e.getControllerState(e2(e2({},e.props),v)).getViewportProps(),e.onViewStateChange({viewState:e.propsInTransition,oldViewState:e.props})}),this.getControllerState=r.getControllerState,this.propsInTransition=null,this.transition=new ph(r.timeline),this.onViewStateChange=r.onViewStateChange||o5,this.onStateChange=r.onStateChange||o5}return ve(t,[{key:"finalize",value:function(){this.transition.cancel()}},{key:"getViewportInTransition",value:function(){return this.propsInTransition}},{key:"processViewStateChange",value:function(e){var n=!1,i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){var a=i;if(this.transition.inProgress){var o=this.transition.settings,s=o.interruption,u=o.endProps;a=e2(e2({},i),s===N_.SNAP_TO_END?u:this.propsInTransition||i)}this._triggerTransition(a,e),n=!0}else this.transition.cancel();return n}},{key:"updateTransition",value:function(){this.transition.update()}},{key:"_isTransitionEnabled",value:function(e){var n=e.transitionDuration,i=e.transitionInterpolator;return(n>0||n==="auto")&&Boolean(i)}},{key:"_isUpdateDueToCurrentTransition",value:function(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}},{key:"_shouldIgnoreViewportChange",value:function(e,n){return this.transition.inProgress?this.transition.settings.interruption===N_.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}},{key:"_triggerTransition",value:function(e,n){var i=this.getControllerState(e),a=this.getControllerState(n).shortestPathFrom(i),o=n.transitionInterpolator,s=o.getDuration?o.getDuration(e,n):n.transitionDuration;if(s!==0){var u=o.initializeProps(e,a);this.propsInTransition={};var c={duration:s,easing:n.transitionEasing||fve,interpolator:o,interruption:n.transitionInterruption||hve,startProps:u.start,endProps:u.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(c),this.onStateChange({inTransition:!0}),this.updateTransition()}}},{key:"_onTransitionEnd",value:function(e){var n=this;return function(i){n.propsInTransition=null,n.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(i)}}}]),t}();at();vt();et();at();vt();et();function u5(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=pve(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function pve(t,r){if(t){if(typeof t=="string")return l5(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return l5(t,r)}}function l5(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var uA=function(){function t(r){ce(this,t),_(this,"_propsToCompare",void 0),_(this,"_propsToExtract",void 0),_(this,"_requiredProps",void 0);var e=r.compare,n=r.extract,i=r.required;this._propsToCompare=e,this._propsToExtract=n||e,this._requiredProps=i}return ve(t,[{key:"arePropsEqual",value:function(e,n){var i=u5(this._propsToCompare),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!(o in e)||!(o in n)||!Ao(e[o],n[o]))return!1}}catch(s){i.e(s)}finally{i.f()}return!0}},{key:"initializeProps",value:function(e,n){var i={},a={},o=u5(this._propsToExtract),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;(u in e||u in n)&&(i[u]=e[u],a[u]=n[u])}}catch(c){o.e(c)}finally{o.f()}return this._checkRequiredProps(i),this._checkRequiredProps(a),{start:i,end:a}}},{key:"getDuration",value:function(e,n){return n.transitionDuration}},{key:"_checkRequiredProps",value:function(e){this._requiredProps&&this._requiredProps.forEach(function(n){var i=e[n];yo(Number.isFinite(i)||Array.isArray(i),"".concat(n," is required for transition"))})}}]),t}();function c5(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function f5(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?c5(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):c5(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function dve(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=mve(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function mve(t,r){if(t){if(typeof t=="string")return h5(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return h5(t,r)}}function h5(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function vve(t){var r=gve();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function gve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ave=["longitude","latitude","zoom","bearing","pitch"],yve=["longitude","latitude","zoom"],Wl=function(t){Ke(e,t);var r=vve(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ce(this,e);var a=Array.isArray(i)?i:i.transitionProps,o=Array.isArray(i)?{}:i;return o.transitionProps=Array.isArray(a)?{compare:a,required:a}:a||{compare:Ave,required:yve},n=r.call(this,o.transitionProps),_(jt(n),"opts",void 0),n.opts=o,n}return ve(e,[{key:"initializeProps",value:function(i,a){var o=Yt(me(e.prototype),"initializeProps",this).call(this,i,a),s=this.opts,u=s.makeViewport,c=s.around;if(u&&c){var h=u(i),p=u(a),v=h.unproject(c);o.start.around=c,Object.assign(o.end,{around:p.project(v),aroundPosition:v,width:a.width,height:a.height})}return o}},{key:"interpolateProps",value:function(i,a,o){var s={},u=dve(this._propsToExtract),c;try{for(u.s();!(c=u.n()).done;){var h=c.value;s[h]=hu(i[h]||0,a[h]||0,o)}}catch(v){u.e(v)}finally{u.f()}if(a.aroundPosition&&this.opts.makeViewport){var p=this.opts.makeViewport(f5(f5({},a),s));Object.assign(s,p.panByPosition(a.aroundPosition,hu(i.around,a.around,o)))}return s}}]),e}(uA);function p5(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function us(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?p5(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):p5(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var vd={transitionDuration:0},_ve=300,t2=function(r){return 1-(1-r)*(1-r)},lA={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},Gm={},qc=function(){function t(r){var e=this;ce(this,t),_(this,"props",void 0),_(this,"state",{}),_(this,"transitionManager",void 0),_(this,"eventManager",void 0),_(this,"onViewStateChange",void 0),_(this,"onStateChange",void 0),_(this,"makeViewport",void 0),_(this,"_controllerState",void 0),_(this,"_events",{}),_(this,"_interactionState",{isDragging:!1}),_(this,"_customEvents",[]),_(this,"_eventStartBlocked",null),_(this,"_panMove",!1),_(this,"invertPan",!1),_(this,"dragMode","rotate"),_(this,"inertia",0),_(this,"scrollZoom",!0),_(this,"dragPan",!0),_(this,"dragRotate",!0),_(this,"doubleClickZoom",!0),_(this,"touchZoom",!0),_(this,"touchRotate",!1),_(this,"keyboard",!0),this.transitionManager=new s5(us(us({},r),{},{getControllerState:function(i){return new e.ControllerState(i)},onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)})),this.handleEvent=this.handleEvent.bind(this),this.eventManager=r.eventManager,this.onViewStateChange=r.onViewStateChange||function(){},this.onStateChange=r.onStateChange||function(){},this.makeViewport=r.makeViewport}return ve(t,[{key:"events",set:function(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}},{key:"finalize",value:function(){for(var e in this._events)if(this._events[e]){var n;(n=this.eventManager)===null||n===void 0||n.off(e,this.handleEvent)}this.transitionManager.finalize()}},{key:"handleEvent",value:function(e){this._controllerState=void 0;var n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}},{key:"controllerState",get:function(){return this._controllerState=this._controllerState||new this.ControllerState(us(us({makeViewport:this.makeViewport},this.props),this.state)),this._controllerState}},{key:"getCenter",value:function(e){var n=this.props,i=n.x,a=n.y,o=e.offsetCenter;return[o.x-i,o.y-a]}},{key:"isPointInBounds",value:function(e,n){var i=this.props,a=i.width,o=i.height;if(n&&n.handled)return!1;var s=e[0]>=0&&e[0]<=a&&e[1]>=0&&e[1]<=o;return s&&n&&n.stopPropagation(),s}},{key:"isFunctionKeyPressed",value:function(e){var n=e.srcEvent;return Boolean(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}},{key:"isDragging",value:function(){return this._interactionState.isDragging||!1}},{key:"blockEvents",value:function(e){var n=this,i=setTimeout(function(){n._eventStartBlocked===i&&(n._eventStartBlocked=null)},e);this._eventStartBlocked=i}},{key:"setProps",value:function(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);var n=e.inertia;this.inertia=Number.isFinite(n)?n:n===!0?_ve:0;var i=e.scrollZoom,a=i===void 0?!0:i,o=e.dragPan,s=o===void 0?!0:o,u=e.dragRotate,c=u===void 0?!0:u,h=e.doubleClickZoom,p=h===void 0?!0:h,v=e.touchZoom,x=v===void 0?!0:v,E=e.touchRotate,R=E===void 0?!1:E,D=e.keyboard,H=D===void 0?!0:D,W=Boolean(this.onViewStateChange);this.toggleEvents(lA.WHEEL,W&&a),this.toggleEvents(lA.PAN,W),this.toggleEvents(lA.PINCH,W&&(x||R)),this.toggleEvents(lA.TRIPLE_PAN,W&&R),this.toggleEvents(lA.DOUBLE_TAP,W&&p),this.toggleEvents(lA.KEYBOARD,W&&H),this.scrollZoom=a,this.dragPan=s,this.dragRotate=c,this.doubleClickZoom=p,this.touchZoom=x,this.touchRotate=R,this.keyboard=H}},{key:"updateTransition",value:function(){this.transitionManager.updateTransition()}},{key:"toggleEvents",value:function(e,n){var i=this;this.eventManager&&e.forEach(function(a){i._events[a]!==n&&(i._events[a]=n,n?i.eventManager.on(a,i.handleEvent):i.eventManager.off(a,i.handleEvent))})}},{key:"updateViewport",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=us(us({},e.getViewportProps()),n),o=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),o){var s=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:a,interactionState:this._interactionState,oldViewState:s})}}},{key:"_onTransition",value:function(e){this.onViewStateChange(us(us({},e),{},{interactionState:this._interactionState}))}},{key:"_setInteractionState",value:function(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}},{key:"_onPanStart",value:function(e){var n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;var i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(i=!i);var a=this.controllerState[i?"panStart":"rotateStart"]({pos:n});return this._panMove=i,this.updateViewport(a,vd,{isDragging:!0}),!0}},{key:"_onPan",value:function(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}},{key:"_onPanEnd",value:function(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}},{key:"_onPanMove",value:function(e){if(!this.dragPan)return!1;var n=this.getCenter(e),i=this.controllerState.pan({pos:n});return this.updateViewport(i,vd,{isDragging:!0,isPanning:!0}),!0}},{key:"_onPanMoveEnd",value:function(e){var n=this.inertia;if(this.dragPan&&n&&e.velocity){var i=this.getCenter(e),a=[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2],o=this.controllerState.pan({pos:a}).panEnd();this.updateViewport(o,us(us({},this._getTransitionProps()),{},{transitionDuration:n,transitionEasing:t2}),{isDragging:!1,isPanning:!0})}else{var s=this.controllerState.panEnd();this.updateViewport(s,null,{isDragging:!1,isPanning:!1})}return!0}},{key:"_onPanRotate",value:function(e){if(!this.dragRotate)return!1;var n=this.getCenter(e),i=this.controllerState.rotate({pos:n});return this.updateViewport(i,vd,{isDragging:!0,isRotating:!0}),!0}},{key:"_onPanRotateEnd",value:function(e){var n=this.inertia;if(this.dragRotate&&n&&e.velocity){var i=this.getCenter(e),a=[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2],o=this.controllerState.rotate({pos:a}).rotateEnd();this.updateViewport(o,us(us({},this._getTransitionProps()),{},{transitionDuration:n,transitionEasing:t2}),{isDragging:!1,isRotating:!0})}else{var s=this.controllerState.rotateEnd();this.updateViewport(s,null,{isDragging:!1,isRotating:!1})}return!0}},{key:"_onWheel",value:function(e){if(!this.scrollZoom)return!1;var n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;e.srcEvent.preventDefault();var i=this.scrollZoom===!0?{}:this.scrollZoom,a=i.speed,o=a===void 0?.01:a,s=i.smooth,u=s===void 0?!1:s,c=e.delta,h=2/(1+Math.exp(-Math.abs(c*o)));c<0&&h!==0&&(h=1/h);var p=this.controllerState.zoom({pos:n,scale:h});return this.updateViewport(p,us(us({},this._getTransitionProps({around:n})),{},{transitionDuration:u?250:1}),{isZooming:!0,isPanning:!0}),!0}},{key:"_onTriplePanStart",value:function(e){var n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;var i=this.controllerState.rotateStart({pos:n});return this.updateViewport(i,vd,{isDragging:!0}),!0}},{key:"_onTriplePan",value:function(e){if(!this.touchRotate||!this.isDragging())return!1;var n=this.getCenter(e);n[0]-=e.deltaX;var i=this.controllerState.rotate({pos:n});return this.updateViewport(i,vd,{isDragging:!0,isRotating:!0}),!0}},{key:"_onTriplePanEnd",value:function(e){if(!this.isDragging())return!1;var n=this.inertia;if(this.touchRotate&&n&&e.velocityY){var i=this.getCenter(e),a=[i[0],i[1]+=e.velocityY*n/2],o=this.controllerState.rotate({pos:a});this.updateViewport(o,us(us({},this._getTransitionProps()),{},{transitionDuration:n,transitionEasing:t2}),{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{var s=this.controllerState.rotateEnd();this.updateViewport(s,null,{isDragging:!1,isRotating:!1})}return!0}},{key:"_onPinchStart",value:function(e){var n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;var i=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Gm._startPinchRotation=e.rotation,Gm._lastPinchEvent=e,this.updateViewport(i,vd,{isDragging:!0}),!0}},{key:"_onPinch",value:function(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;var n=this.controllerState;if(this.touchZoom){var i=e.scale,a=this.getCenter(e);n=n.zoom({pos:a,scale:i})}if(this.touchRotate){var o=e.rotation;n=n.rotate({deltaAngleX:Gm._startPinchRotation-o})}return this.updateViewport(n,vd,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Gm._lastPinchEvent=e,!0}},{key:"_onPinchEnd",value:function(e){if(!this.isDragging())return!1;var n=this.inertia,i=Gm._lastPinchEvent;if(this.touchZoom&&n&&i&&e.scale!==i.scale){var a=this.getCenter(e),o=this.controllerState.rotateEnd(),s=Math.log2(e.scale),u=(s-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),c=Math.pow(2,s+u*n/2);o=o.zoom({pos:a,scale:c}).zoomEnd(),this.updateViewport(o,us(us({},this._getTransitionProps({around:a})),{},{transitionDuration:n,transitionEasing:t2}),{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{var h=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(h,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Gm._startPinchRotation=null,Gm._lastPinchEvent=null,!0}},{key:"_onDoubleTap",value:function(e){if(!this.doubleClickZoom)return!1;var n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;var i=this.isFunctionKeyPressed(e),a=this.controllerState.zoom({pos:n,scale:i?.5:2});return this.updateViewport(a,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}},{key:"_onKeyDown",value:function(e){if(!this.keyboard)return!1;var n=this.isFunctionKeyPressed(e),i=this.keyboard===!0?{}:this.keyboard,a=i.zoomSpeed,o=i.moveSpeed,s=i.rotateSpeedX,u=i.rotateSpeedY,c=this.controllerState,h,p={};switch(e.srcEvent.code){case"Minus":h=n?c.zoomOut(a).zoomOut(a):c.zoomOut(a),p.isZooming=!0;break;case"Equal":h=n?c.zoomIn(a).zoomIn(a):c.zoomIn(a),p.isZooming=!0;break;case"ArrowLeft":n?(h=c.rotateLeft(s),p.isRotating=!0):(h=c.moveLeft(o),p.isPanning=!0);break;case"ArrowRight":n?(h=c.rotateRight(s),p.isRotating=!0):(h=c.moveRight(o),p.isPanning=!0);break;case"ArrowUp":n?(h=c.rotateUp(u),p.isRotating=!0):(h=c.moveUp(o),p.isPanning=!0);break;case"ArrowDown":n?(h=c.rotateDown(u),p.isRotating=!0):(h=c.moveDown(o),p.isPanning=!0);break;default:return!1}return this.updateViewport(h,this._getTransitionProps(),p),!0}},{key:"_getTransitionProps",value:function(e){var n=this.transition;return!n||!n.transitionInterpolator?vd:e?us(us({},n),{},{transitionInterpolator:new Wl(us(us(us({},e),n.transitionInterpolator.opts),{},{makeViewport:this.controllerState.makeViewport}))}):n}}]),t}();at();vt();et();var cA=function(){function t(r,e){ce(this,t),_(this,"_viewportProps",void 0),_(this,"_state",void 0),this._viewportProps=this.applyConstraints(r),this._state=e}return ve(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getState",value:function(){return this._state}}]),t}();function d5(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function cp(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?d5(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):d5(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function v5(t){var r=bve();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function bve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var m5=5,xve=1.2,MM=function(t){Ke(e,t);var r=v5(e);function e(n){var i;ce(this,e);var a=n.width,o=n.height,s=n.latitude,u=n.longitude,c=n.zoom,h=n.bearing,p=h===void 0?0:h,v=n.pitch,x=v===void 0?0:v,E=n.altitude,R=E===void 0?1.5:E,D=n.position,H=D===void 0?[0,0,0]:D,W=n.maxZoom,$=W===void 0?20:W,J=n.minZoom,B=J===void 0?0:J,se=n.maxPitch,V=se===void 0?60:se,X=n.minPitch,I=X===void 0?0:X,O=n.startPanLngLat,U=n.startZoomLngLat,re=n.startRotatePos,ee=n.startBearing,pe=n.startPitch,je=n.startZoom,qe=n.normalize,We=qe===void 0?!0:qe;return yo(Number.isFinite(u)),yo(Number.isFinite(s)),yo(Number.isFinite(c)),i=r.call(this,{width:a,height:o,latitude:s,longitude:u,zoom:c,bearing:p,pitch:x,altitude:R,maxZoom:$,minZoom:B,maxPitch:V,minPitch:I,normalize:We,position:H},{startPanLngLat:O,startZoomLngLat:U,startRotatePos:re,startBearing:ee,startPitch:pe,startZoom:je}),_(jt(i),"makeViewport",void 0),i.makeViewport=n.makeViewport,i}return ve(e,[{key:"panStart",value:function(i){var a=i.pos;return this._getUpdatedState({startPanLngLat:this._unproject(a)})}},{key:"pan",value:function(i){var a=i.pos,o=i.startPos,s=this.getState().startPanLngLat||this._unproject(o);if(!s)return this;var u=this.makeViewport(this.getViewportProps()),c=u.panByPosition(s,a);return this._getUpdatedState(c)}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(i){var a=i.pos;return this._getUpdatedState({startRotatePos:a,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}},{key:"rotate",value:function(i){var a=i.pos,o=i.deltaAngleX,s=o===void 0?0:o,u=i.deltaAngleY,c=u===void 0?0:u,h=this.getState(),p=h.startRotatePos,v=h.startBearing,x=h.startPitch;if(!p||v===void 0||x===void 0)return this;var E;return a?E=this._getNewRotation(a,p,x,v):E={bearing:v+s,pitch:x+c},this._getUpdatedState(E)}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(i){var a=i.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(a),startZoom:this.getViewportProps().zoom})}},{key:"zoom",value:function(i){var a=i.pos,o=i.startPos,s=i.scale,u=this.getState(),c=u.startZoom,h=u.startZoomLngLat;if(h||(c=this.getViewportProps().zoom,h=this._unproject(o)||this._unproject(a)),!h)return this;var p=this.getViewportProps(),v=p.maxZoom,x=p.minZoom,E=c+Math.log2(s);E=ya(E,x,v);var R=this.makeViewport(cp(cp({},this.getViewportProps()),{},{zoom:E}));return this._getUpdatedState(cp({zoom:E},R.panByPosition(h,a)))}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2;return this._zoomFromCenter(i)}},{key:"zoomOut",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2;return this._zoomFromCenter(1/i)}},{key:"moveLeft",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return this._panFromCenter([i,0])}},{key:"moveRight",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return this._panFromCenter([-i,0])}},{key:"moveUp",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return this._panFromCenter([0,i])}},{key:"moveDown",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;return this._panFromCenter([0,-i])}},{key:"rotateLeft",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing-i})}},{key:"rotateRight",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing+i})}},{key:"rotateUp",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch+i})}},{key:"rotateDown",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch-i})}},{key:"shortestPathFrom",value:function(i){var a=i.getViewportProps(),o=cp({},this.getViewportProps()),s=o.bearing,u=o.longitude;return Math.abs(s-a.bearing)>180&&(o.bearing=s<0?s+360:s-360),Math.abs(u-a.longitude)>180&&(o.longitude=u<0?u+360:u-360),o}},{key:"applyConstraints",value:function(i){var a=i.maxZoom,o=i.minZoom,s=i.zoom;i.zoom=ya(s,o,a);var u=i.maxPitch,c=i.minPitch,h=i.pitch;i.pitch=ya(h,c,u);var p=i.normalize,v=p===void 0?!0:p;return v&&Object.assign(i,jw(i)),i}},{key:"_zoomFromCenter",value:function(i){var a=this.getViewportProps(),o=a.width,s=a.height;return this.zoom({pos:[o/2,s/2],scale:i})}},{key:"_panFromCenter",value:function(i){var a=this.getViewportProps(),o=a.width,s=a.height;return this.pan({startPos:[o/2,s/2],pos:[o/2+i[0],s/2+i[1]]})}},{key:"_getUpdatedState",value:function(i){return new this.constructor(cp(cp(cp({makeViewport:this.makeViewport},this.getViewportProps()),this.getState()),i))}},{key:"_unproject",value:function(i){var a=this.makeViewport(this.getViewportProps());return i&&a.unproject(i)}},{key:"_getNewRotation",value:function(i,a,o,s){var u=i[0]-a[0],c=i[1]-a[1],h=i[1],p=a[1],v=this.getViewportProps(),x=v.width,E=v.height,R=u/x,D=0;c>0?Math.abs(E-p)>m5&&(D=c/(p-E)*xve):c<0&&p>m5&&(D=1-h/p),D=ya(D,-1,1);var H=this.getViewportProps(),W=H.minPitch,$=H.maxPitch,J=s+180*R,B=o;return D>0?B=o+D*($-o):D<0&&(B=o-D*(W-o)),{pitch:B,bearing:J}}}]),e}(cA),r2=function(t){Ke(e,t);var r=v5(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"ControllerState",MM),_(jt(n),"transition",{transitionDuration:300,transitionInterpolator:new Wl({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),_(jt(n),"dragMode","pan"),n}return ve(e,[{key:"setProps",value:function(i){i.position=i.position||[0,0,0];var a=this.props;Yt(me(e.prototype),"setProps",this).call(this,i);var o=!a||a.height!==i.height;o&&this.updateViewport(new this.ControllerState(cp(cp({makeViewport:this.makeViewport},i),this.state)))}}]),e}(qc);function wve(t){var r=Tve();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Tve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var z_=function(t){Ke(e,t);var r=wve(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"ViewportType",get:function(){return Vc}},{key:"ControllerType",get:function(){return r2}}]),e}(Wc);_(z_,"displayName","MapView");at();vt();et();function IM(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Sve(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Sve(t,r){if(t){if(typeof t=="string")return g5(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return g5(t,r)}}function g5(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Eve=new k_;function Cve(t,r){var e,n,i=(e=t.order)!==null&&e!==void 0?e:1/0,a=(n=r.order)!==null&&n!==void 0?n:1/0;return i-a}var A5=function(){function t(){ce(this,t),_(this,"effects",void 0),_(this,"_resolvedEffects",[]),_(this,"_defaultEffects",[]),_(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}return ve(t,[{key:"addDefaultEffect",value:function(e){var n=this._defaultEffects;if(!n.find(function(a){return a.id===e.id})){var i=n.findIndex(function(a){return Cve(a,e)>0});i<0?n.push(e):n.splice(i,0,e),this._setEffects(this.effects)}}},{key:"setProps",value:function(e){"effects"in e&&(Us(e.effects,this.effects,1)||this._setEffects(e.effects))}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{clearRedrawFlags:!1},n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}},{key:"getEffects",value:function(){return this._resolvedEffects}},{key:"_setEffects",value:function(e){var n={},i=IM(this.effects),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;n[o.id]=o}}catch(x){i.e(x)}finally{i.f()}var s=[],u=IM(e),c;try{for(u.s();!(c=u.n()).done;){var h=c.value,p=n[h.id];p&&p!==h?p.setProps?(p.setProps(h.props),s.push(p)):(p.cleanup(),s.push(h)):s.push(h),delete n[h.id]}}catch(x){u.e(x)}finally{u.f()}for(var v in n)n[v].cleanup();this.effects=s,this._resolvedEffects=s.concat(this._defaultEffects),e.some(function(x){return x instanceof k_})||this._resolvedEffects.push(Eve),this._needsRedraw="effects changed"}},{key:"finalize",value:function(){var e=IM(this._resolvedEffects),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;i.cleanup()}}catch(a){e.e(a)}finally{e.f()}this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}]),t}();at();vt();et();at();vt();function Pve(t){var r=Ove();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Ove(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var y5=function(t){Ke(e,t);var r=Pve(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"shouldDrawLayer",value:function(i){var a=i.props.operation;return a.includes("draw")||a.includes("terrain")}}]),e}(cd);function n2(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Mve(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Mve(t,r){if(t){if(typeof t=="string")return _5(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _5(t,r)}}function _5(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function b5(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function fA(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?b5(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):b5(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var Ive="deckRenderer.renderLayers",i2=function(){function t(r){ce(this,t),_(this,"gl",void 0),_(this,"layerFilter",void 0),_(this,"drawPickingColors",void 0),_(this,"drawLayersPass",void 0),_(this,"pickLayersPass",void 0),_(this,"renderCount",void 0),_(this,"_needsRedraw",void 0),_(this,"renderBuffers",void 0),_(this,"lastPostProcessEffect",void 0),this.gl=r,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new y5(r),this.pickLayersPass=new oA(r),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}return ve(t,[{key:"setProps",value:function(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}},{key:"renderLayers",value:function(e){if(e.viewports.length){var n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,i=fA(fA({layerFilter:this.layerFilter,isPicking:this.drawPickingColors},e),{},{target:e.target||Ea.getDefaultFramebuffer(this.gl)});i.effects&&this._preRender(i.effects,i);var a=this.lastPostProcessEffect?this.renderBuffers[0]:i.target,o=n.render(fA(fA({},i),{},{target:a}));i.effects&&this._postRender(i.effects,i),this.renderCount++,_s(Ive,this,o,e)}}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{clearRedrawFlags:!1},n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}},{key:"finalize",value:function(){var e=this.renderBuffers,n=n2(e),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;a.delete()}}catch(o){n.e(o)}finally{n.f()}e.length=0}},{key:"_preRender",value:function(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};var i=n2(e),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;n.preRenderStats[o.id]=o.preRender(this.gl,n),o.postRender&&(this.lastPostProcessEffect=o.id)}}catch(s){i.e(s)}finally{i.f()}this.lastPostProcessEffect&&this._resizeRenderBuffers()}},{key:"_resizeRenderBuffers",value:function(){var e=this.renderBuffers;e.length===0&&e.push(new Ea(this.gl),new Ea(this.gl));var n=n2(e),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;a.resize()}}catch(o){n.e(o)}finally{n.f()}}},{key:"_postRender",value:function(e,n){var i=this.renderBuffers,a=fA(fA({},n),{},{inputBuffer:i[0],swapBuffer:i[1],target:null}),o=n2(e),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;if(u.postRender){if(u.id===this.lastPostProcessEffect){a.target=n.target,u.postRender(this.gl,a);break}var c=u.postRender(this.gl,a);a.inputBuffer=c,a.swapBuffer=c===i[0]?i[1]:i[0]}}}catch(h){o.e(h)}finally{o.f()}}}]),t}();at();vt();et();et();function x5(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function a2(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?x5(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):x5(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var Rve={pickedColor:null,pickedObjectIndex:-1};function w5(t){for(var r=t.pickedColors,e=t.decodePickingColor,n=t.deviceX,i=t.deviceY,a=t.deviceRadius,o=t.deviceRect,s=o.x,u=o.y,c=o.width,h=o.height,p=a*a,v=-1,x=0,E=0;E<h;E++){var R=E+u-i,D=R*R;if(D>p)x+=4*c;else for(var H=0;H<c;H++){var W=r[x+3]-1;if(W>=0){var $=H+s-n,J=$*$+D;J<=p&&(p=J,v=x)}x+=4}}if(v>=0){var B=r.slice(v,v+4),se=e(B);if(se){var V=Math.floor(v/4/c),X=v/4-V*c;return a2(a2({},se),{},{pickedColor:B,pickedX:s+X,pickedY:u+V})}xr.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Rve}function T5(t){var r=t.pickedColors,e=t.decodePickingColor,n=new Map;if(r)for(var i=0;i<r.length;i+=4){var a=r[i+3]-1;if(a>=0){var o=r.slice(i,i+4),s=o.join(",");if(!n.has(s)){var u=e(o);u?n.set(s,a2(a2({},u),{},{color:o})):xr.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}et();function S5(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Lve(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?S5(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):S5(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function RM(t){var r=t.pickInfo,e=t.viewports,n=t.pixelRatio,i=t.x,a=t.y,o=t.z,s=e[0];e.length>1&&(s=kve(r?.pickedViewports||e,{x:i,y:a}));var u;if(s){var c=[i-s.x,a-s.y];o!==void 0&&(c[2]=o),u=s.unproject(c)}return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:i,y:a,pixel:[i,a],coordinate:u,devicePixel:r&&"pickedX"in r?[r.pickedX,r.pickedY]:void 0,pixelRatio:n}}function E5(t){var r=t.pickInfo,e=t.lastPickedInfo,n=t.mode,i=t.layers,a=r.pickedColor,o=r.pickedLayer,s=r.pickedObjectIndex,u=o?[o]:[];if(n==="hover"){var c=e.index,h=e.layerId,p=o?o.props.id:null;if(p!==h||s!==c){if(p!==h){var v=i.find(function(R){return R.props.id===h});v&&u.unshift(v)}e.layerId=p,e.index=s,e.info=null}}var x=RM(t),E=new Map;return E.set(null,x),u.forEach(function(R){var D=Lve({},x);R===o&&(D.color=a,D.index=s,D.picked=!0),D=LM({layer:R,info:D,mode:n});var H=D.layer;R===o&&n==="hover"&&(e.info=D),E.set(H.id,D),n==="hover"&&H.updateAutoHighlight(D)}),E}function LM(t){for(var r=t.layer,e=t.info,n=t.mode;r&&e;){var i=e.layer||null;e.sourceLayer=i,e.layer=r,e=r.getPickingInfo({info:e,mode:n,sourceLayer:i}),r=r.parent}return e}function kve(t,r){for(var e=t.length-1;e>=0;e--){var n=t[e];if(n.containsPixel(r))return n}return t[0]}function kM(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Bve(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Bve(t,r){if(t){if(typeof t=="string")return C5(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return C5(t,r)}}function C5(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function P5(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function o2(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?P5(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):P5(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var O5=function(){function t(r){ce(this,t),_(this,"gl",void 0),_(this,"pickingFBO",void 0),_(this,"depthFBO",void 0),_(this,"pickLayersPass",void 0),_(this,"layerFilter",void 0),_(this,"lastPickedInfo",void 0),_(this,"_pickable",!0),this.gl=r,this.pickLayersPass=new oA(r),this.lastPickedInfo={index:-1,layerId:null,info:null}}return ve(t,[{key:"setProps",value:function(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}},{key:"finalize",value:function(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}},{key:"pickObject",value:function(e){return this._pickClosestObject(e)}},{key:"pickObjects",value:function(e){return this._pickVisibleObjects(e)}},{key:"getLastPickedObject",value:function(e){var n=e.x,i=e.y,a=e.layers,o=e.viewports,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.lastPickedInfo.info,u=s&&s.layer&&s.layer.id,c=s&&s.viewport&&s.viewport.id,h=u?a.find(function(E){return E.id===u}):null,p=c&&o.find(function(E){return E.id===c})||o[0],v=p&&p.unproject([n-p.x,i-p.y]),x={x:n,y:i,viewport:p,coordinate:v,layer:h};return o2(o2({},s),x)}},{key:"_resizeBuffer",value:function(){var e,n,i=this.gl;if(!this.pickingFBO&&(this.pickingFBO=new Ea(i),Ea.isSupported(i,{colorBufferFloat:!0}))){var a=new Ea(i);a.attach(_({},36064,new la(i,{format:En(i)?34836:6408,type:5126}))),this.depthFBO=a}(e=this.pickingFBO)===null||e===void 0||e.resize({width:i.canvas.width,height:i.canvas.height}),(n=this.depthFBO)===null||n===void 0||n.resize({width:i.canvas.width,height:i.canvas.height})}},{key:"_getPickable",value:function(e){var n=this;if(this._pickable===!1)return null;var i=e.filter(function(a){return n.pickLayersPass.shouldDrawLayer(a)&&!a.isComposite});return i.length?i:null}},{key:"_pickClosestObject",value:function(e){var n=e.layers,i=e.views,a=e.viewports,o=e.x,s=e.y,u=e.radius,c=u===void 0?0:u,h=e.depth,p=h===void 0?1:h,v=e.mode,x=v===void 0?"query":v,E=e.unproject3D,R=e.onViewportActive,D=e.effects,H=this._getPickable(n),W=Cl(this.gl);if(!H)return{result:[],emptyInfo:RM({viewports:a,x:o,y:s,pixelRatio:W})};this._resizeBuffer();for(var $=Ig(this.gl,[o,s],!0),J=[$.x+Math.floor($.width/2),$.y+Math.floor($.height/2)],B=Math.round(c*W),se=this.pickingFBO,V=se.width,X=se.height,I=this._getPickingRect({deviceX:J[0],deviceY:J[1],deviceRadius:B,deviceWidth:V,deviceHeight:X}),O={x:o-c,y:s-c,width:c*2+1,height:c*2+1},U,re=[],ee=new Set,pe=0;pe<p;pe++){var je=void 0;if(I){var qe=this._drawAndSample({layers:H,views:i,viewports:a,onViewportActive:R,deviceRect:I,cullRect:O,effects:D,pass:"picking:".concat(x)});je=w5(o2(o2({},qe),{},{deviceX:J[0],deviceY:J[1],deviceRadius:B,deviceRect:I}))}else je={pickedColor:null,pickedObjectIndex:-1};var We=void 0;if(je.pickedLayer&&E&&this.depthFBO){var ot=this._drawAndSample({layers:[je.pickedLayer],views:i,viewports:a,onViewportActive:R,deviceRect:{x:je.pickedX,y:je.pickedY,width:1,height:1},cullRect:O,effects:D,pass:"picking:".concat(x,":z")},!0),gt=ot.pickedColors;gt[3]&&(We=gt[0])}je.pickedLayer&&pe+1<p&&(ee.add(je.pickedLayer),je.pickedLayer.disablePickingIndex(je.pickedObjectIndex)),U=E5({pickInfo:je,lastPickedInfo:this.lastPickedInfo,mode:x,layers:H,viewports:a,x:o,y:s,z:We,pixelRatio:W});var Pt=kM(U.values()),Dt;try{for(Pt.s();!(Dt=Pt.n()).done;){var nr=Dt.value;nr.layer&&re.push(nr)}}catch(he){Pt.e(he)}finally{Pt.f()}if(!je.pickedColor)break}var Nt=kM(ee),Ut;try{for(Nt.s();!(Ut=Nt.n()).done;){var Or=Ut.value;Or.restorePickingColors()}}catch(he){Nt.e(he)}finally{Nt.f()}return{result:re,emptyInfo:U.get(null)}}},{key:"_pickVisibleObjects",value:function(e){var n=e.layers,i=e.views,a=e.viewports,o=e.x,s=e.y,u=e.width,c=u===void 0?1:u,h=e.height,p=h===void 0?1:h,v=e.mode,x=v===void 0?"query":v,E=e.maxObjects,R=E===void 0?null:E,D=e.onViewportActive,H=e.effects,W=this._getPickable(n);if(!W)return[];this._resizeBuffer();for(var $=Cl(this.gl),J=Ig(this.gl,[o,s],!0),B=J.x,se=J.y+J.height,V=Ig(this.gl,[o+c,s+p],!0),X=V.x+V.width,I=V.y,O={x:B,y:I,width:X-B,height:se-I},U=this._drawAndSample({layers:W,views:i,viewports:a,onViewportActive:D,deviceRect:O,cullRect:{x:o,y:s,width:c,height:p},effects:H,pass:"picking:".concat(x)}),re=T5(U),ee=new Map,pe=Number.isFinite(R),je=0;je<re.length;je++){var qe;if(pe&&R&&ee.size>=R)break;var We=re[je],ot={color:We.pickedColor,layer:null,index:We.pickedObjectIndex,picked:!0,x:o,y:s,pixelRatio:$};ot=LM({layer:We.pickedLayer,info:ot,mode:x});var gt=(qe=ot.object)!==null&&qe!==void 0?qe:"".concat(ot.layer.id,"[").concat(ot.index,"]");ee.has(gt)||ee.set(gt,ot)}return Array.from(ee.values())}},{key:"_drawAndSample",value:function(e){var n=e.layers,i=e.views,a=e.viewports,o=e.onViewportActive,s=e.deviceRect,u=e.cullRect,c=e.effects,h=e.pass,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,v=p?this.depthFBO:this.pickingFBO,x={layers:n,layerFilter:this.layerFilter,views:i,viewports:a,onViewportActive:o,pickingFBO:v,deviceRect:s,cullRect:u,effects:c,pass:h,pickZ:p,preRenderStats:{}},E=kM(c),R;try{for(E.s();!(R=E.n()).done;){var D=R.value;D.useInPicking&&(x.preRenderStats[D.id]=D.preRender(this.gl,x))}}catch(X){E.e(X)}finally{E.f()}var H=this.pickLayersPass.render(x),W=H.decodePickingColor,$=s.x,J=s.y,B=s.width,se=s.height,V=new(p?Float32Array:Uint8Array)(B*se*4);return ep(v,{sourceX:$,sourceY:J,sourceWidth:B,sourceHeight:se,target:V}),{pickedColors:V,decodePickingColor:W}}},{key:"_getPickingRect",value:function(e){var n=e.deviceX,i=e.deviceY,a=e.deviceRadius,o=e.deviceWidth,s=e.deviceHeight,u=Math.max(0,n-a),c=Math.max(0,i-a),h=Math.min(o,n+a+1)-u,p=Math.min(s,i+a+1)-c;return h<=0||p<=0?null:{x:u,y:c,width:h,height:p}}}]),t}();Ii();at();vt();et();var Dve={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"},M5=function(){function t(r){ce(this,t),_(this,"el",null),_(this,"isVisible",!1);var e=r.parentElement;e&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Dve),e.appendChild(this.el))}return ve(t,[{key:"setTooltip",value:function(e,n,i){var a=this.el;if(a){if(typeof e=="string")a.innerText=e;else if(e)e.text&&(a.innerText=e.text),e.html&&(a.innerHTML=e.html),e.className&&(a.className=e.className);else{this.isVisible=!1,a.style.display="none";return}this.isVisible=!0,a.style.display="block",a.style.transform="translate(".concat(n,"px, ").concat(i,"px)"),e&&vr(e)==="object"&&"style"in e&&Object.assign(a.style,e.style)}}},{key:"remove",value:function(){this.el&&(this.el.remove(),this.el=null)}}]),t}();Mn();et();at();vt();var U_=en(I5());var R5=1,L5=2,BM=4,Fve={mousedown:R5,mousemove:L5,mouseup:BM};function Nve(t,r){for(var e=0;e<t.length;e++)if(r(t[e]))return!0;return!1}function k5(t){var r=t.prototype.handler;t.prototype.handler=function(n){var i=this.store;n.button>0&&n.type==="pointerdown"&&(Nve(i,function(a){return a.pointerId===n.pointerId})||i.push(n)),r.call(this,n)}}function B5(t){t.prototype.handler=function(e){var n=Fve[e.type];n&R5&&e.button>=0&&(this.pressed=!0),n&L5&&e.which===0&&(n=BM),this.pressed&&(n&BM&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}}k5(U_.default.PointerEventInput);B5(U_.default.MouseInput);var D5=U_.default.Manager,wf=U_.default;at();vt();et();at();function F5(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function zve(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?F5(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):F5(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var gd=function t(r,e,n){ce(this,t),this.element=r,this.callback=e,this.options=zve({enable:!0},n)};var N5=wf?[[wf.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[wf.Rotate,{enable:!1}],[wf.Pinch,{enable:!1}],[wf.Swipe,{enable:!1}],[wf.Pan,{threshold:0,enable:!1}],[wf.Press,{enable:!1}],[wf.Tap,{event:"doubletap",taps:2,enable:!1}],[wf.Tap,{event:"anytap",enable:!1}],[wf.Tap,{enable:!1}]]:null,DM={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},z5={doubletap:["tap"]},U5={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},hA={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},j5={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},FM={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"};var V5=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Vm=typeof window<"u"?window:global;var u2=!1;try{G5={get passive(){return u2=!0,!0}},Vm.addEventListener("test",null,G5),Vm.removeEventListener("test",null)}catch{u2=!1}var G5;function Uve(t){var r=jve();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function jve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Gve=V5.indexOf("firefox")!==-1,Vve=hA.WHEEL_EVENTS,H5="wheel",W5=4.000244140625,Hve=40,Wve=.25,q5=function(t){Ke(e,t);var r=Uve(e);function e(n,i,a){var o;return ce(this,e),o=r.call(this,n,i,a),o.handleEvent=function(s){if(o.options.enable){var u=s.deltaY;Vm.WheelEvent&&(Gve&&s.deltaMode===Vm.WheelEvent.DOM_DELTA_PIXEL&&(u/=Vm.devicePixelRatio),s.deltaMode===Vm.WheelEvent.DOM_DELTA_LINE&&(u*=Hve)),u!==0&&u%W5===0&&(u=Math.floor(u/W5)),s.shiftKey&&u&&(u=u*Wve),o.callback({type:H5,center:{x:s.clientX,y:s.clientY},delta:-u,srcEvent:s,pointerType:"mouse",target:s.target})}},o.events=(o.options.events||[]).concat(Vve),o.events.forEach(function(s){return n.addEventListener(s,o.handleEvent,u2?{passive:!1}:!1)}),o}return ve(e,[{key:"destroy",value:function(){var i=this;this.events.forEach(function(a){return i.element.removeEventListener(a,i.handleEvent)})}},{key:"enableEventType",value:function(i,a){i===H5&&(this.options.enable=a)}}]),e}(gd);at();vt();function qve(t){var r=Xve();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Xve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Yve=hA.MOUSE_EVENTS,X5="pointermove",Y5="pointerover",K5="pointerout",Z5="pointerenter",$5="pointerleave",J5=function(t){Ke(e,t);var r=qve(e);function e(n,i,a){var o;ce(this,e),o=r.call(this,n,i,a),o.handleEvent=function(u){o.handleOverEvent(u),o.handleOutEvent(u),o.handleEnterEvent(u),o.handleLeaveEvent(u),o.handleMoveEvent(u)},o.pressed=!1;var s=o.options.enable;return o.enableMoveEvent=s,o.enableLeaveEvent=s,o.enableEnterEvent=s,o.enableOutEvent=s,o.enableOverEvent=s,o.events=(o.options.events||[]).concat(Yve),o.events.forEach(function(u){return n.addEventListener(u,o.handleEvent)}),o}return ve(e,[{key:"destroy",value:function(){var i=this;this.events.forEach(function(a){return i.element.removeEventListener(a,i.handleEvent)})}},{key:"enableEventType",value:function(i,a){i===X5&&(this.enableMoveEvent=a),i===Y5&&(this.enableOverEvent=a),i===K5&&(this.enableOutEvent=a),i===Z5&&(this.enableEnterEvent=a),i===$5&&(this.enableLeaveEvent=a)}},{key:"handleOverEvent",value:function(i){this.enableOverEvent&&i.type==="mouseover"&&this._emit(Y5,i)}},{key:"handleOutEvent",value:function(i){this.enableOutEvent&&i.type==="mouseout"&&this._emit(K5,i)}},{key:"handleEnterEvent",value:function(i){this.enableEnterEvent&&i.type==="mouseenter"&&this._emit(Z5,i)}},{key:"handleLeaveEvent",value:function(i){this.enableLeaveEvent&&i.type==="mouseleave"&&this._emit($5,i)}},{key:"handleMoveEvent",value:function(i){if(this.enableMoveEvent)switch(i.type){case"mousedown":i.button>=0&&(this.pressed=!0);break;case"mousemove":i.which===0&&(this.pressed=!1),this.pressed||this._emit(X5,i);break;case"mouseup":this.pressed=!1;break;default:}}},{key:"_emit",value:function(i,a){this.callback({type:i,center:{x:a.clientX,y:a.clientY},srcEvent:a,pointerType:"mouse",target:a.target})}}]),e}(gd);at();vt();function Kve(t){var r=Zve();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Zve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $ve=hA.KEY_EVENTS,Q5="keydown",eG="keyup",tG=function(t){Ke(e,t);var r=Kve(e);function e(n,i,a){var o;return ce(this,e),o=r.call(this,n,i,a),o.handleEvent=function(s){var u=s.target||s.srcElement;u.tagName==="INPUT"&&u.type==="text"||u.tagName==="TEXTAREA"||(o.enableDownEvent&&s.type==="keydown"&&o.callback({type:Q5,srcEvent:s,key:s.key,target:s.target}),o.enableUpEvent&&s.type==="keyup"&&o.callback({type:eG,srcEvent:s,key:s.key,target:s.target}))},o.enableDownEvent=o.options.enable,o.enableUpEvent=o.options.enable,o.events=(o.options.events||[]).concat($ve),n.tabIndex=o.options.tabIndex||0,n.style.outline="none",o.events.forEach(function(s){return n.addEventListener(s,o.handleEvent)}),o}return ve(e,[{key:"destroy",value:function(){var i=this;this.events.forEach(function(a){return i.element.removeEventListener(a,i.handleEvent)})}},{key:"enableEventType",value:function(i,a){i===Q5&&(this.enableDownEvent=a),i===eG&&(this.enableUpEvent=a)}}]),e}(gd);at();vt();function Jve(t){var r=Qve();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Qve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var rG="contextmenu",nG=function(t){Ke(e,t);var r=Jve(e);function e(n,i,a){var o;return ce(this,e),o=r.call(this,n,i,a),o.handleEvent=function(s){o.options.enable&&o.callback({type:rG,center:{x:s.clientX,y:s.clientY},srcEvent:s,pointerType:"mouse",target:s.target})},n.addEventListener("contextmenu",o.handleEvent),o}return ve(e,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function(i,a){i===rG&&(this.options.enable=a)}}]),e}(gd);et();at();vt();var NM=1,l2=2,zM=4,ege={pointerdown:NM,pointermove:l2,pointerup:zM,mousedown:NM,mousemove:l2,mouseup:zM},tge=1,rge=2,nge=3,ige=0,age=1,oge=2,sge=1,uge=2,lge=4;function iG(t){var r=ege[t.srcEvent.type];if(!r)return null;var e=t.srcEvent,n=e.buttons,i=e.button,a=e.which,o=!1,s=!1,u=!1;return r===zM||r===l2&&!Number.isFinite(n)?(o=a===tge,s=a===rge,u=a===nge):r===l2?(o=Boolean(n&sge),s=Boolean(n&lge),u=Boolean(n&uge)):r===NM&&(o=i===ige,s=i===age,u=i===oge),{leftButton:o,middleButton:s,rightButton:u}}function aG(t,r){var e=t.center;if(!e)return null;var n=r.getBoundingClientRect(),i=n.width/r.offsetWidth||1,a=n.height/r.offsetHeight||1,o={x:(e.x-n.left-r.clientLeft)/i,y:(e.y-n.top-r.clientTop)/a};return{center:e,offsetCenter:o}}function oG(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function dh(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?oG(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):oG(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var UM={srcElement:"root",priority:0},sG=function(){function t(r){var e=this;ce(this,t),this.handleEvent=function(n){if(!e.isEmpty()){for(var i=e._normalizeEvent(n),a=n.srcEvent.target;a&&a!==i.rootElement;){if(e._emit(i,a),i.handled)return;a=a.parentNode}e._emit(i,"root")}},this.eventManager=r,this.handlers=[],this.handlersByElement=new Map,this._active=!1}return ve(t,[{key:"isEmpty",value:function(){return!this._active}},{key:"add",value:function(e,n,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,s=this.handlers,u=this.handlersByElement,c=UM;typeof i=="string"||i&&i.addEventListener?c=dh(dh({},UM),{},{srcElement:i}):i&&(c=dh(dh({},UM),i));var h=u.get(c.srcElement);h||(h=[],u.set(c.srcElement,h));var p={type:e,handler:n,srcElement:c.srcElement,priority:c.priority};a&&(p.once=!0),o&&(p.passive=!0),s.push(p),this._active=this._active||!p.passive;for(var v=h.length-1;v>=0&&!(h[v].priority>=p.priority);)v--;h.splice(v+1,0,p)}},{key:"remove",value:function(e,n){for(var i=this.handlers,a=this.handlersByElement,o=i.length-1;o>=0;o--){var s=i[o];if(s.type===e&&s.handler===n){i.splice(o,1);var u=a.get(s.srcElement);u.splice(u.indexOf(s),1),u.length===0&&a.delete(s.srcElement)}}this._active=i.some(function(c){return!c.passive})}},{key:"_emit",value:function(e,n){var i=this.handlersByElement.get(n);if(i){for(var a=!1,o=function(){e.handled=!0},s=function(){e.handled=!0,a=!0},u=[],c=0;c<i.length;c++){var h=i[c],p=h.type,v=h.handler,x=h.once;if(v(dh(dh({},e),{},{type:p,stopPropagation:o,stopImmediatePropagation:s})),x&&u.push(i[c]),a)break}for(var E=0;E<u.length;E++){var R=u[E],D=R.type,H=R.handler;this.remove(D,H)}}}},{key:"_normalizeEvent",value:function(e){var n=this.eventManager.getElement();return dh(dh(dh(dh({},e),iG(e)),aG(e,n)),{},{preventDefault:function(){e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n})}}]),t}();function uG(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=cge(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function cge(t,r){if(t){if(typeof t=="string")return lG(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return lG(t,r)}}function lG(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function cG(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function fG(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?cG(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):cG(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var fge={events:null,recognizers:null,recognizerOptions:{},Manager:D5,touchAction:"none",tabIndex:0},jM=function(){function t(){var r=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;ce(this,t),this._onBasicInput=function(a){var o=a.srcEvent,s=U5[o.type];s&&r.manager.emit(s,a)},this._onOtherEvent=function(a){r.manager.emit(a.type,a)},this.options=fG(fG({},fge),n),this.events=new Map,this.setElement(e);var i=this.options.events;i&&this.on(i)}return ve(t,[{key:"getElement",value:function(){return this.element}},{key:"setElement",value:function(e){var n=this;if(this.element&&this.destroy(),this.element=e,!!e){var i=this.options,a=i.Manager;this.manager=new a(e,{touchAction:i.touchAction,recognizers:i.recognizers||N5}).on("hammer.input",this._onBasicInput),i.recognizers||Object.keys(DM).forEach(function(E){var R=n.manager.get(E);R&&DM[E].forEach(function(D){R.recognizeWith(D)})});for(var o in i.recognizerOptions){var s=this.manager.get(o);if(s){var u=i.recognizerOptions[o];delete u.enable,s.set(u)}}this.wheelInput=new q5(e,this._onOtherEvent,{enable:!1}),this.moveInput=new J5(e,this._onOtherEvent,{enable:!1}),this.keyInput=new tG(e,this._onOtherEvent,{enable:!1,tabIndex:i.tabIndex}),this.contextmenuInput=new nG(e,this._onOtherEvent,{enable:!1});var c=uG(this.events),h;try{for(c.s();!(h=c.n()).done;){var p=Ot(h.value,2),v=p[0],x=p[1];x.isEmpty()||(this._toggleRecognizer(x.recognizerName,!0),this.manager.on(v,x.handleEvent))}}catch(E){c.e(E)}finally{c.f()}}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(e,n,i){this._addEventHandler(e,n,i,!1)}},{key:"once",value:function(e,n,i){this._addEventHandler(e,n,i,!0)}},{key:"watch",value:function(e,n,i){this._addEventHandler(e,n,i,!1,!0)}},{key:"off",value:function(e,n){this._removeEventHandler(e,n)}},{key:"_toggleRecognizer",value:function(e,n){var i=this.manager;if(i){var a=i.get(e);if(a&&a.options.enable!==n){a.set({enable:n});var o=z5[e];o&&!this.options.recognizers&&o.forEach(function(s){var u=i.get(s);n?(u.requireFailure(e),a.dropRequireFailure(s)):u.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}}},{key:"_addEventHandler",value:function(e,n,i,a,o){if(typeof e!="string"){i=n;for(var s in e)this._addEventHandler(s,e[s],i,a,o);return}var u=this.manager,c=this.events,h=FM[e]||e,p=c.get(h);p||(p=new sG(this),c.set(h,p),p.recognizerName=j5[h]||h,u&&u.on(h,p.handleEvent)),p.add(e,n,i,a,o),p.isEmpty()||this._toggleRecognizer(p.recognizerName,!0)}},{key:"_removeEventHandler",value:function(e,n){if(typeof e!="string"){for(var i in e)this._removeEventHandler(i,e[i]);return}var a=this.events,o=FM[e]||e,s=a.get(o);if(s&&(s.remove(e,n),s.isEmpty())){var u=s.recognizerName,c=!1,h=uG(a.values()),p;try{for(h.s();!(p=h.n()).done;){var v=p.value;if(v.recognizerName===u&&!v.isEmpty()){c=!0;break}}}catch(x){h.e(x)}finally{h.f()}c||this._toggleRecognizer(u,!1)}}}]),t}();function hG(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=hge(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function hge(t,r){if(t){if(typeof t=="string")return pG(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return pG(t,r)}}function pG(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function dG(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function fp(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?dG(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):dG(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Hm(){}var pge=function(r){var e=r.isDragging;return e?"grabbing":"grab"},mG={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Hm,onResize:Hm,onViewStateChange:Hm,onInteractionStateChange:Hm,onBeforeRender:Hm,onAfterRender:Hm,onLoad:Hm,onError:function(r){return xr.error(r.message,r.cause)()},onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:pge,getTooltip:null,debug:!1,drawPickingColors:!1},Ad=function(){function t(r){var e=this;ce(this,t),_(this,"props",void 0),_(this,"width",0),_(this,"height",0),_(this,"userData",{}),_(this,"canvas",null),_(this,"viewManager",null),_(this,"layerManager",null),_(this,"effectManager",null),_(this,"deckRenderer",null),_(this,"deckPicker",null),_(this,"eventManager",null),_(this,"tooltip",null),_(this,"metrics",void 0),_(this,"animationLoop",void 0),_(this,"stats",void 0),_(this,"viewState",void 0),_(this,"cursorState",void 0),_(this,"_needsRedraw",void 0),_(this,"_pickRequest",void 0),_(this,"_lastPointerDownInfo",null),_(this,"_metricsCounter",void 0),_(this,"_onPointerMove",function(n){var i=e._pickRequest;if(n.type==="pointerleave")i.x=-1,i.y=-1,i.radius=0;else{if(n.leftButton||n.rightButton)return;var a=n.offsetCenter;if(!a)return;i.x=a.x,i.y=a.y,i.radius=e.props.pickingRadius}e.layerManager&&(e.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=n}),_(this,"_onEvent",function(n){var i=QP[n.type],a=n.offsetCenter;if(!(!i||!a||!e.layerManager)){var o=e.layerManager.getLayers(),s=e.deckPicker.getLastPickedObject({x:a.x,y:a.y,layers:o,viewports:e.getViewports(a)},e._lastPointerDownInfo),u=s.layer,c=u&&(u[i.handler]||u.props[i.handler]),h=e.props[i.handler],p=!1;c&&(p=c.call(u,s,n)),!p&&h&&h(s,n)}}),_(this,"_onPointerDown",function(n){var i=n.offsetCenter,a=e._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:e.props.pickingRadius});e._lastPointerDownInfo=a.result[0]||a.emptyInfo}),this.props=fp(fp({},mG),r),r=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},r.viewState&&r.initialViewState&&xr.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),Cg()==="IE"&&xr.warn("IE 11 is not supported")(),this.viewState=r.initialViewState,r.gl||typeof document<"u"&&(this.canvas=this._createCanvas(r)),this.animationLoop=this._createAnimationLoop(r),this.stats=new Tm({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(r),r._typedArrayManagerProps&&bf.setOptions(r._typedArrayManagerProps),this.animationLoop.start()}return ve(t,[{key:"finalize",value:function(){var e,n,i,a,o,s,u,c;if((e=this.animationLoop)===null||e===void 0||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(n=this.layerManager)===null||n===void 0||n.finalize(),this.layerManager=null,(i=this.viewManager)===null||i===void 0||i.finalize(),this.viewManager=null,(a=this.effectManager)===null||a===void 0||a.finalize(),this.effectManager=null,(o=this.deckRenderer)===null||o===void 0||o.finalize(),this.deckRenderer=null,(s=this.deckPicker)===null||s===void 0||s.finalize(),this.deckPicker=null,(u=this.eventManager)===null||u===void 0||u.destroy(),this.eventManager=null,(c=this.tooltip)===null||c===void 0||c.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var h;(h=this.canvas.parentElement)===null||h===void 0||h.removeChild(this.canvas),this.canvas=null}}},{key:"setProps",value:function(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&xr.removed("onLayerHover","onHover")(),"onLayerClick"in e&&xr.removed("onLayerClick","onClick")(),e.initialViewState&&!Us(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);var n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{clearRedrawFlags:!1};if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";var n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var i=this.viewManager.needsRedraw(e),a=this.layerManager.needsRedraw(e),o=this.effectManager.needsRedraw(e),s=this.deckRenderer.needsRedraw(e);return n=n||i||a||o||s,n}},{key:"redraw",value:function(e){if(this.layerManager){var n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}}},{key:"isInitialized",get:function(){return this.viewManager!==null}},{key:"getViews",value:function(){return yo(this.viewManager),this.viewManager.views}},{key:"getViewports",value:function(e){return yo(this.viewManager),this.viewManager.getViewports(e)}},{key:"getCanvas",value:function(){return this.canvas}},{key:"pickObject",value:function(e){var n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}},{key:"pickMultipleObjects",value:function(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}},{key:"pickObjects",value:function(e){return this._pick("pickObjects","pickObjects Time",e)}},{key:"_addResources",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(var i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:n})}},{key:"_removeResources",value:function(e){var n=hG(e),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;this.layerManager.resourceManager.remove(a)}}catch(o){n.e(o)}finally{n.f()}}},{key:"_addDefaultEffect",value:function(e){this.effectManager.addDefaultEffect(e)}},{key:"_pick",value:function(e,n,i){yo(this.deckPicker);var a=this.stats;a.get("Pick Count").incrementCount(),a.get(n).timeStart();var o=this.deckPicker[e](fp({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects()},i));return a.get(n).timeEnd(),o}},{key:"_createCanvas",value:function(e){var n=e.canvas;if(typeof n=="string"&&(n=document.getElementById(n),yo(n)),!n){n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay";var i=e.parent||document.body;i.appendChild(n)}return Object.assign(n.style,e.style),n}},{key:"_setCanvasSize",value:function(e){if(this.canvas){var n=e.width,i=e.height;if(n||n===0){var a=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=a}if(i||i===0){var o,s=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=((o=e.style)===null||o===void 0?void 0:o.position)||"absolute",this.canvas.style.height=s}}}},{key:"_updateCanvasSize",value:function(){var e,n,i=this.canvas;if(i){var a=(e=i.clientWidth)!==null&&e!==void 0?e:i.width,o=(n=i.clientHeight)!==null&&n!==void 0?n:i.height;if(a!==this.width||o!==this.height){var s,u;this.width=a,this.height=o,(s=this.viewManager)===null||s===void 0||s.setProps({width:a,height:o}),(u=this.layerManager)===null||u===void 0||u.activateViewport(this.getViewports()[0]),this.props.onResize({width:a,height:o})}}}},{key:"_createAnimationLoop",value:function(e){var n=this,i=e.width,a=e.height,o=e.gl,s=e.glOptions,u=e.debug,c=e.onError,h=e.onBeforeRender,p=e.onAfterRender,v=e.useDevicePixels;return new Wx({width:i,height:a,useDevicePixels:v,autoResizeDrawingBuffer:!o,autoResizeViewport:!1,gl:o,onCreateContext:function(E){return Rg(fp(fp(fp({},s),E),{},{canvas:n.canvas,debug:u,onContextLost:function(){return n._onContextLost()}}))},onInitialize:function(E){return n._setGLContext(E.gl)},onRender:this._onRenderFrame.bind(this),onBeforeRender:h,onAfterRender:p,onError:c})}},{key:"_getViewState",value:function(){return this.props.viewState||this.viewState}},{key:"_getViews",value:function(){var e=this.props.views||[new z_({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}},{key:"_onContextLost",value:function(){var e=this.props.onError;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}},{key:"_pickAndCallback",value:function(){var e=this._pickRequest;if(e.event){var n=this._pick("pickObject","pickObject Time",e),i=n.result,a=n.emptyInfo;this.cursorState.isHovering=i.length>0;var o=a,s=!1,u=hG(i),c;try{for(u.s();!(c=u.n()).done;){var h,p=c.value;o=p,s=((h=p.layer)===null||h===void 0?void 0:h.onHover(p,e.event))||s}}catch(x){u.e(x)}finally{u.f()}if(!s&&this.props.onHover&&this.props.onHover(o,e.event),this.props.getTooltip&&this.tooltip){var v=this.props.getTooltip(o);this.tooltip.setTooltip(v,o.x,o.y)}e.event=null}}},{key:"_updateCursor",value:function(){var e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}},{key:"_setGLContext",value:function(e){if(!this.layerManager){this.canvas||(this.canvas=e.canvas,Qh(e,{enable:!0,copyState:!0})),this.tooltip=new M5(this.canvas),Ns(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);var n=new ld;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new jM(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(var i in QP)this.eventManager.on(i,this._onEvent);this.viewManager=new n5({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});var a=this.viewManager.getViewports()[0];this.layerManager=new Qw(e,{deck:this,stats:this.stats,viewport:a,timeline:n}),this.effectManager=new A5,this.deckRenderer=new i2(e),this.deckPicker=new O5(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function(e,n){var i=this.layerManager.context.gl;Ns(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers(fp({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects()},n)),this.props.onAfterRender({gl:i})}},{key:"_onRenderFrame",value:function(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),xr.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}},{key:"_onViewStateChange",value:function(e){var n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState=fp(fp({},this.viewState),{},_({},e.viewId,n)),this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}},{key:"_onInteractionStateChange",value:function(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}},{key:"_getFrameStats",value:function(){var e=this.stats;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();var n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}},{key:"_getMetrics",value:function(){var e=this.metrics,n=this.stats;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();var i=Nc.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}]),t}();_(Ad,"defaultProps",mG);_(Ad,"VERSION",Tx);at();vt();et();Mn();at();vt();et();at();vt();et();at();vt();et();function vG(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function gG(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?vG(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):vG(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var c2=function(){function t(r,e){ce(this,t),_(this,"opts",void 0),_(this,"source",void 0),this.opts=e,this.source=r}return ve(t,[{key:"value",get:function(){return this.source.value}},{key:"getValue",value:function(){var e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];var i=this.source.value,a=n.size,o=i;if(i&&i.length!==a){o=new Float32Array(a);for(var s=n.elementOffset||0,u=0;u<a;++u)o[u]=i[s+u]}return o}},{key:"getAccessor",value:function(){return gG(gG({},this.source.getAccessor()),this.opts)}}]),t}();function AG(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function yG(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function mh(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?yG(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):yG(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function f2(t){return t.stride||t.size*t.bytesPerElement}function _G(t,r){r.offset&&xr.removed("shaderAttribute.offset","vertexOffset, elementOffset")();var e=f2(t),n=r.vertexOffset!==void 0?r.vertexOffset:t.vertexOffset||0,i=r.elementOffset||0,a=n*e+i*t.bytesPerElement+(t.offset||0);return mh(mh({},r),{},{offset:a,stride:e})}function dge(t,r){var e=_G(t,r);return{high:e,low:mh(mh({},e),{},{offset:e.offset+t.size*4})}}var bG=function(){function t(r,e,n){ce(this,t),_(this,"gl",void 0),_(this,"id",void 0),_(this,"size",void 0),_(this,"settings",void 0),_(this,"value",void 0),_(this,"doublePrecision",void 0),_(this,"_buffer",void 0),_(this,"state",void 0),this.gl=r,this.id=e.id||"",this.size=e.size||1;var i=e.logicalType||e.type,a=i===5130,o=e.defaultValue;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0);var s;a?s=5126:!i&&e.isIndexed?s=r&&Af(r,ni.ELEMENT_INDEX_UINT32)?5125:5123:s=i||5126;var u=AG(i||s||5126);this.doublePrecision=a,a&&e.fp64===!1&&(u=Float32Array),this.value=null,this.settings=mh(mh({},e),{},{defaultType:u,defaultValue:o,logicalType:i,type:s,size:this.size,bytesPerElement:u.BYTES_PER_ELEMENT}),this.state=mh(mh({},n),{},{externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}),this._buffer=null}return ve(t,[{key:"isConstant",get:function(){return this.state.constant}},{key:"buffer",get:function(){if(!this._buffer){var e=this.settings,n=e.isIndexed,i=e.type;this._buffer=new Jn(this.gl,{id:this.id,target:n?34963:34962,accessor:{type:i}})}return this._buffer}},{key:"byteOffset",get:function(){var e=this.getAccessor();return e.vertexOffset?e.vertexOffset*f2(e):0}},{key:"numInstances",get:function(){return this.state.numInstances},set:function(e){this.state.numInstances=e}},{key:"delete",value:function(){this._buffer&&(this._buffer.delete(),this._buffer=null),bf.release(this.state.allocatedValue)}},{key:"getShaderAttributes",value:function(e,n){if(this.doublePrecision){var i={},a=this.value instanceof Float64Array,o=dge(this.getAccessor(),n||{});return i[e]=new c2(this,o.high),i["".concat(e,"64Low")]=a?new c2(this,o.low):new Float32Array(this.size),i}if(n){var s=_G(this.getAccessor(),n);return _({},e,new c2(this,s))}return _({},e,this)}},{key:"getBuffer",value:function(){return this.state.constant?null:this.state.externalBuffer||this._buffer}},{key:"getValue",value:function(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}},{key:"getAccessor",value:function(){return this.state.bufferAccessor}},{key:"getBounds",value:function(){if(this.state.bounds)return this.state.bounds;var e=null;if(this.state.constant&&this.value){var n=Array.from(this.value);e=[n,n]}else{var i=this.value,a=this.numInstances,o=this.size,s=a*o;if(i&&s&&i.length>=s){for(var u=new Array(o).fill(1/0),c=new Array(o).fill(-1/0),h=0;h<s;)for(var p=0;p<o;p++){var v=i[h++];v<u[p]&&(u[p]=v),v>c[p]&&(c[p]=v)}e=[u,c]}}return this.state.bounds=e,e}},{key:"setData",value:function(e){var n=this.state,i;ArrayBuffer.isView(e)?i={value:e}:e instanceof Jn?i={buffer:e}:i=e;var a=mh(mh({},this.settings),i);if(n.bufferAccessor=a,n.bounds=null,i.constant){var o=i.value;o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o));var s=!n.constant||!this._areValuesEqual(o,this.value);if(!s)return!1;n.externalBuffer=null,n.constant=!0,this.value=o}else if(i.buffer){var u=i.buffer;n.externalBuffer=u,n.constant=!1,this.value=i.value||null;var c=i.value instanceof Float64Array;a.type=i.type||u.accessor.type,a.bytesPerElement=u.accessor.BYTES_PER_ELEMENT*(c?2:1),a.stride=f2(a)}else if(i.value){this._checkExternalBuffer(i);var h=i.value;n.externalBuffer=null,n.constant=!1,this.value=h,a.bytesPerElement=h.BYTES_PER_ELEMENT,a.stride=f2(a);var p=this.buffer,v=this.byteOffset;this.doublePrecision&&h instanceof Float64Array&&(h=Vw(h,a));var x=h.byteLength+v+a.stride*2;p.byteLength<x&&p.reallocate(x),p.setAccessor(null),p.subData({data:h,offset:v}),a.type=i.type||p.accessor.type}return!0}},{key:"updateSubBuffer",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.state.bounds=null;var n=this.value,i=e.startOffset,a=i===void 0?0:i,o=e.endOffset;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?Vw(n,{size:this.size,startIndex:a,endIndex:o}):n.subarray(a,o),offset:a*n.BYTES_PER_ELEMENT+this.byteOffset})}},{key:"allocate",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=this.state,a=i.allocatedValue,o=bf.allocate(a,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=o;var s=this.buffer,u=this.byteOffset;return s.byteLength<o.byteLength+u&&(s.reallocate(o.byteLength+u),n&&a&&s.subData({data:a instanceof Float64Array?Vw(a,this):a,offset:u})),i.allocatedValue=o,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}},{key:"_checkExternalBuffer",value:function(e){var n=e.value;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));var i=this.settings.defaultType,a=!1;if(this.doublePrecision&&(a=n.BYTES_PER_ELEMENT<4),a)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof i)&&this.settings.normalized&&!("normalized"in e)&&xr.warn("Attribute ".concat(this.id," is normalized"))()}},{key:"normalizeConstant",value:function(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(function(n){return(n+128)/255*2-1});case 5122:return new Float32Array(e).map(function(n){return(n+32768)/65535*2-1});case 5121:return new Float32Array(e).map(function(n){return n/255});case 5123:return new Float32Array(e).map(function(n){return n/65535});default:return e}}},{key:"_normalizeValue",value:function(e,n,i){var a=this.settings,o=a.defaultValue,s=a.size;if(Number.isFinite(e))return n[i]=e,n;if(!e){for(var u=s;--u>=0;)n[i+u]=o[u];return n}switch(s){case 4:n[i+3]=Number.isFinite(e[3])?e[3]:o[3];case 3:n[i+2]=Number.isFinite(e[2])?e[2]:o[2];case 2:n[i+1]=Number.isFinite(e[1])?e[1]:o[1];case 1:n[i+0]=Number.isFinite(e[0])?e[0]:o[0];break;default:for(var c=s;--c>=0;)n[i+c]=Number.isFinite(e[c])?e[c]:o[c]}return n}},{key:"_areValuesEqual",value:function(e,n){if(!e||!n)return!1;for(var i=this.size,a=0;a<i;a++)if(e[a]!==n[a])return!1;return!0}}]),t}();var xG=[],wG=[];function xs(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1/0,n=xG,i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?n=t:t.length>0&&(wG.length=t.length,n=wG):n=xG,(r>0||Number.isFinite(e))&&(n=(Array.isArray(n)?n:Array.from(n)).slice(r,e),i.index=r-1),{iterable:n,objectInfo:i}}function h2(t){return t&&t[Symbol.asyncIterator]}function p2(t,r){var e=r.size,n=r.stride,i=r.offset,a=r.startIndices,o=r.nested,s=t.BYTES_PER_ELEMENT,u=n?n/s:e,c=i?i/s:0,h=Math.floor((t.length-c)/u);return function(p,v){var x=v.index,E=v.target;if(!a){for(var R=x*u+c,D=0;D<e;D++)E[D]=t[R+D];return E}var H=a[x],W=a[x+1]||h,$;if(o){$=new Array(W-H);for(var J=H;J<W;J++){var B=J*u+c;E=new Array(e);for(var se=0;se<e;se++)E[se]=t[B+se];$[J-H]=E}}else if(u===e)$=t.subarray(H*e+c,W*e+c);else{$=new t.constructor((W-H)*e);for(var V=0,X=H;X<W;X++)for(var I=X*u+c,O=0;O<e;O++)$[V++]=t[I+O]}return $}}var TG=[],j_=[[0,1/0]];function SG(t,r){if(t===j_||(r[0]<0&&(r[0]=0),r[0]>=r[1]))return t;for(var e=[],n=t.length,i=0,a=0;a<n;a++){var o=t[a];o[1]<r[0]?(e.push(o),i=a+1):o[0]>r[1]?e.push(o):r=[Math.min(o[0],r[0]),Math.max(o[1],r[1])]}return e.splice(i,0,r),e}et();function GM(t){var r=t.source,e=t.target,n=t.start,i=n===void 0?0:n,a=t.size,o=t.getData,s=t.end||e.length,u=r.length,c=s-i;if(u>c){e.set(r.subarray(0,c),i);return}if(e.set(r,i),!!o)for(var h=u;h<c;)for(var p=o(h,r),v=0;v<a;v++)e[i+h]=p[v]||0,h++}function EG(t){var r=t.source,e=t.target,n=t.size,i=t.getData,a=t.sourceStartIndices,o=t.targetStartIndices;if(!Array.isArray(o))return GM({source:r,target:e,size:n,getData:i}),e;for(var s=0,u=0,c=i&&function(E,R){return i(E+u,R)},h=Math.min(a.length,o.length),p=1;p<h;p++){var v=a[p]*n,x=o[p]*n;GM({source:r.subarray(s,v),target:e,start:u,end:x,size:n,getData:c}),s=v,u=x}return u<e.length&&GM({source:[],target:e,start:u,size:n,getData:c}),e}function CG(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function d2(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?CG(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):CG(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var vge={interpolation:{duration:0,easing:function(r){return r}},spring:{stiffness:.05,damping:.5}};function m2(t,r){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});var e=t.type||"interpolation";return d2(d2(d2(d2({},vge[e]),r),t),{},{type:e})}function v2(t,r){var e=r.getBuffer();return e?[e,{divisor:0,size:r.size,normalized:r.settings.normalized}]:r.value}function g2(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function A2(t){t.push(t.shift())}function G_(t,r){var e=t.doublePrecision,n=t.settings,i=t.value,a=t.size,o=e&&i instanceof Float64Array?2:1;return(n.noAlloc?i.length:r*a)*o}function y2(t){var r=t.buffer,e=t.numInstances,n=t.attribute,i=t.fromLength,a=t.fromStartIndices,o=t.getData,s=o===void 0?function(J){return J}:o,u=n.doublePrecision&&n.value instanceof Float64Array?2:1,c=n.size*u,h=n.byteOffset,p=n.startIndices,v=a&&p,x=G_(n,e),E=n.isConstant;if(!(!v&&i>=x)){var R=E?n.value:n.getBuffer().getData({srcByteOffset:h});if(n.settings.normalized&&!E){var D=s;s=function(B,se){return n.normalizeConstant(D(B,se))}}var H=E?function(J,B){return s(R,B)}:function(J,B){return s(R.subarray(J,J+c),B)},W=r.getData({length:i}),$=new Float32Array(x);EG({source:W,target:$,sourceStartIndices:a,targetStartIndices:p,size:c,getData:H}),r.byteLength<$.byteLength+h&&r.reallocate($.byteLength+h),r.subData({data:$,offset:h})}}function _2(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=gge(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function gge(t,r){if(t){if(typeof t=="string")return PG(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return PG(t,r)}}function PG(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function Age(t){var r=yge();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function yge(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var pA=function(t){Ke(e,t);var r=Age(e);function e(n,i){var a;return ce(this,e),a=r.call(this,n,i,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:j_}),_(jt(a),"constant",!1),a.settings.update=i.update||(i.accessor?a._autoUpdater:void 0),Object.seal(a.settings),Object.seal(a.state),a._validateAttributeUpdaters(),a}return ve(e,[{key:"startIndices",get:function(){return this.state.startIndices},set:function(i){this.state.startIndices=i}},{key:"needsUpdate",value:function(){return this.state.needsUpdate}},{key:"needsRedraw",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=i.clearChangedFlags,o=a===void 0?!1:a,s=this.state.needsRedraw;return this.state.needsRedraw=s&&!o,s}},{key:"getUpdateTriggers",value:function(){var i=this.settings.accessor;return[this.id].concat(typeof i!="function"&&i||[])}},{key:"supportsTransition",value:function(){return Boolean(this.settings.transition)}},{key:"getTransitionSetting",value:function(i){if(!i||!this.supportsTransition())return null;var a=this.settings.accessor,o=this.settings.transition,s=Array.isArray(a)?i[a.find(function(u){return i[u]})]:i[a];return m2(s,o)}},{key:"setNeedsUpdate",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.id,a=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||i,this.setNeedsRedraw(i),a){var o=a.startRow,s=o===void 0?0:o,u=a.endRow,c=u===void 0?1/0:u;this.state.updateRanges=SG(this.state.updateRanges,[s,c])}else this.state.updateRanges=j_}},{key:"clearNeedsUpdate",value:function(){this.state.needsUpdate=!1,this.state.updateRanges=TG}},{key:"setNeedsRedraw",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||i}},{key:"allocate",value:function(i){var a=this.state,o=this.settings;return o.noAlloc?!1:o.update?(Yt(me(e.prototype),"allocate",this).call(this,i,a.updateRanges!==j_),!0):!1}},{key:"updateBuffer",value:function(i){var a=i.numInstances,o=i.data,s=i.props,u=i.context;if(!this.needsUpdate())return!1;var c=this.state.updateRanges,h=this.settings,p=h.update,v=h.noAlloc,x=!0;if(p){var E=_2(c),R;try{for(E.s();!(R=E.n()).done;){var D=Ot(R.value,2),H=D[0],W=D[1];p.call(u,this,{data:o,startRow:H,endRow:W,props:s,numInstances:a})}}catch(O){E.e(O)}finally{E.f()}if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else{var $=_2(c),J;try{for($.s();!(J=$.n()).done;){var B=Ot(J.value,2),se=B[0],V=B[1],X=Number.isFinite(se)?this.getVertexOffset(se):0,I=Number.isFinite(V)?this.getVertexOffset(V):v||!Number.isFinite(a)?this.value.length:a*this.size;Yt(me(e.prototype),"updateSubBuffer",this).call(this,{startOffset:X,endOffset:I})}}catch(O){$.e(O)}finally{$.f()}}this._checkAttributeArray()}else x=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),x}},{key:"setConstantValue",value:function(i){if(i===void 0||typeof i=="function")return!1;var a=this.setData({constant:!0,value:i});return a&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0}},{key:"setExternalBuffer",value:function(i){var a=this.state;return i?(this.clearNeedsUpdate(),a.lastExternalBuffer===i||(a.lastExternalBuffer=i,this.setNeedsRedraw(),this.setData(i)),!0):(a.lastExternalBuffer=null,!1)}},{key:"setBinaryValue",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,o=this.state,s=this.settings;if(!i)return o.binaryValue=null,o.binaryAccessor=null,!1;if(s.noAlloc)return!1;if(o.binaryValue===i)return this.clearNeedsUpdate(),!0;o.binaryValue=i,this.setNeedsRedraw();var u=s.transform||a!==this.startIndices;if(u){ArrayBuffer.isView(i)&&(i={value:i});var c=i;yo(ArrayBuffer.isView(c.value),"invalid ".concat(s.accessor));var h=Boolean(c.size)&&c.size!==this.size;return o.binaryAccessor=p2(c.value,{size:c.size||this.size,stride:c.stride,offset:c.offset,startIndices:a,nested:h}),!1}return this.clearNeedsUpdate(),this.setData(i),!0}},{key:"getVertexOffset",value:function(i){var a=this.startIndices,o=a?i<a.length?a[i]:this.numInstances:i;return o*this.size}},{key:"getShaderAttributes",value:function(){var i=this.settings.shaderAttributes||_({},this.id,null),a={};for(var o in i)Object.assign(a,Yt(me(e.prototype),"getShaderAttributes",this).call(this,o,i[o]));return a}},{key:"_autoUpdater",value:function(i,a){var o=a.data,s=a.startRow,u=a.endRow,c=a.props,h=a.numInstances;if(!i.constant){var p=i.settings,v=i.state,x=i.value,E=i.size,R=i.startIndices,D=p.accessor,H=p.transform,W=v.binaryAccessor||(typeof D=="function"?D:c[D]);yo(typeof W=="function",'accessor "'.concat(D,'" is not a function'));var $=i.getVertexOffset(s),J=xs(o,s,u),B=J.iterable,se=J.objectInfo,V=_2(B),X;try{for(V.s();!(X=V.n()).done;){var I=X.value;se.index++;var O=W(I,se);if(H&&(O=H.call(this,O)),R){var U=(se.index<R.length-1?R[se.index+1]:h)-R[se.index];if(O&&Array.isArray(O[0])){var re=$,ee=_2(O),pe;try{for(ee.s();!(pe=ee.n()).done;){var je=pe.value;i._normalizeValue(je,x,re),re+=E}}catch(qe){ee.e(qe)}finally{ee.f()}}else O&&O.length>E?x.set(O,$):(i._normalizeValue(O,se.target,0),Jw({target:x,source:se.target,start:$,count:U}));$+=U*E}else i._normalizeValue(O,x,$),$+=E}}catch(qe){V.e(qe)}finally{V.f()}}}},{key:"_validateAttributeUpdaters",value:function(){var i=this.settings,a=i.noAlloc||typeof i.update=="function";if(!a)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function(){var i=this.value,a=Math.min(4,this.size);if(i&&i.length>=a){var o=!0;switch(a){case 4:o=o&&Number.isFinite(i[3]);case 3:o=o&&Number.isFinite(i[2]);case 2:o=o&&Number.isFinite(i[1]);case 1:o=o&&Number.isFinite(i[0]);break;default:o=!1}if(!o)throw new Error("Illegal attribute generated for ".concat(this.id))}}}]),e}(bG);at();vt();et();at();vt();et();function OG(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function _ge(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?OG(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):OG(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function MG(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=bge(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function bge(t,r){if(t){if(typeof t=="string")return IG(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return IG(t,r)}}function IG(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var RG=function(){function t(r){var e=r.gl,n=r.attribute,i=r.timeline;ce(this,t),_(this,"gl",void 0),_(this,"type","interpolation"),_(this,"attributeInTransition",void 0),_(this,"settings",void 0),_(this,"attribute",void 0),_(this,"transition",void 0),_(this,"currentStartIndices",void 0),_(this,"currentLength",void 0),_(this,"transform",void 0),_(this,"buffers",void 0),this.gl=e,this.transition=new ph(i),this.attribute=n,this.attributeInTransition=new pA(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=wge(e,n);var a={byteLength:0,usage:35050};this.buffers=[new Jn(e,a),new Jn(e,a)]}return ve(t,[{key:"inProgress",get:function(){return this.transition.inProgress}},{key:"start",value:function(e,n){if(e.duration<=0){this.transition.cancel();return}this.settings=e;var i=this.gl,a=this.buffers,o=this.attribute;A2(a);var s={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter},u=MG(a),c;try{for(u.s();!(c=u.n()).done;){var h=c.value;y2(_ge({buffer:h},s))}}catch(p){u.e(p)}finally{u.f()}this.currentStartIndices=o.startIndices,this.currentLength=G_(o,n),this.attributeInTransition.setData({buffer:a[1],value:o.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:a[0],aTo:v2(i,o)},feedbackBuffers:{vCurrent:a[1]}})}},{key:"update",value:function(){var e=this.transition.update();if(e){var n=this.settings,i=n.duration,a=n.easing,o=this.transition.time,s=o/i;a&&(s=a(s)),this.transform.run({uniforms:{time:s}})}return e}},{key:"cancel",value:function(){this.transition.cancel(),this.transform.delete();var e=MG(this.buffers),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;i.delete()}}catch(a){e.e(a)}finally{e.f()}this.buffers.length=0}}]),t}();var xge=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function wge(t,r){var e=g2(r.size);return new Il(t,{vs:xge,defines:{ATTRIBUTE_TYPE:e},varyings:["vCurrent"]})}at();vt();et();function LG(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Tge(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Tge(t,r){if(t){if(typeof t=="string")return kG(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return kG(t,r)}}function kG(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function BG(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function V_(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?BG(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):BG(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var DG=function(){function t(r){var e=r.gl,n=r.attribute,i=r.timeline;ce(this,t),_(this,"gl",void 0),_(this,"type","spring"),_(this,"attributeInTransition",void 0),_(this,"settings",void 0),_(this,"attribute",void 0),_(this,"transition",void 0),_(this,"currentStartIndices",void 0),_(this,"currentLength",void 0),_(this,"texture",void 0),_(this,"framebuffer",void 0),_(this,"transform",void 0),_(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new ph(i),this.attribute=n,this.attributeInTransition=new pA(e,V_(V_({},n.settings),{},{normalized:!1})),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=Ege(e),this.framebuffer=Cge(e,this.texture),this.transform=Sge(e,n,this.framebuffer);var a={byteLength:0,usage:35050};this.buffers=[new Jn(e,a),new Jn(e,a),new Jn(e,a)]}return ve(t,[{key:"inProgress",get:function(){return this.transition.inProgress}},{key:"start",value:function(e,n){var i=this.gl,a=this.buffers,o=this.attribute,s={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter},u=LG(a),c;try{for(u.s();!(c=u.n()).done;){var h=c.value;y2(V_({buffer:h},s))}}catch(p){u.e(p)}finally{u.f()}this.settings=e,this.currentStartIndices=o.startIndices,this.currentLength=G_(o,n),this.attributeInTransition.setData({buffer:a[1],value:o.value}),this.transition.start(V_(V_({},e),{},{duration:1/0})),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:v2(i,o)}})}},{key:"update",value:function(){var e=this.buffers,n=this.transform,i=this.framebuffer,a=this.transition,o=a.update();if(!o)return!1;var s=this.settings;n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.stiffness,damping:s.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),A2(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value});var u=ep(i)[0]>0;return u||a.end(),!0}},{key:"cancel",value:function(){this.transition.cancel(),this.transform.delete();var e=LG(this.buffers),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;i.delete()}}catch(a){e.e(a)}finally{e.f()}this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}]),t}();function Sge(t,r,e){var n=g2(r.size);return new Il(t,{framebuffer:e,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:n},varyings:["vNext"]})}function Ege(t){return new la(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function Cge(t,r){return new Ea(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:_({},36064,r)})}var Pge={interpolation:RG,spring:DG},FG=function(){function t(r,e){var n=e.id,i=e.timeline;ce(this,t),_(this,"id",void 0),_(this,"isSupported",void 0),_(this,"gl",void 0),_(this,"timeline",void 0),_(this,"transitions",void 0),_(this,"needsRedraw",void 0),_(this,"numInstances",void 0),this.id=n,this.gl=r,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=Il.isSupported(r)}return ve(t,[{key:"finalize",value:function(){for(var e in this.transitions)this._removeTransition(e)}},{key:"update",value:function(e){var n=e.attributes,i=e.transitions,a=e.numInstances;this.numInstances=a||1;for(var o in n){var s=n[o],u=s.getTransitionSetting(i);u&&this._updateAttribute(o,s,u)}for(var c in this.transitions){var h=n[c];(!h||!h.getTransitionSetting(i))&&this._removeTransition(c)}}},{key:"hasAttribute",value:function(e){var n=this.transitions[e];return n&&n.inProgress}},{key:"getAttributes",value:function(){var e={};for(var n in this.transitions){var i=this.transitions[n];i.inProgress&&(e[n]=i.attributeInTransition)}return e}},{key:"run",value:function(){if(!this.isSupported||this.numInstances===0)return!1;for(var e in this.transitions){var n=this.transitions[e].update();n&&(this.needsRedraw=!0)}var i=this.needsRedraw;return this.needsRedraw=!1,i}},{key:"_removeTransition",value:function(e){this.transitions[e].cancel(),delete this.transitions[e]}},{key:"_updateAttribute",value:function(e,n,i){var a=this.transitions[e],o=!a||a.type!==i.type;if(o){if(!this.isSupported){xr.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}a&&this._removeTransition(e);var s=Pge[i.type];s?this.transitions[e]=new s({attribute:n,timeline:this.timeline,gl:this.gl}):(xr.error("unsupported transition type '".concat(i.type,"'"))(),o=!1)}(o||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}]),t}();function NG(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function VM(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?NG(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):NG(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Oge(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Mge(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Mge(t,r){if(t){if(typeof t=="string")return zG(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return zG(t,r)}}function zG(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var UG="attributeManager.invalidate",Ige="attributeManager.updateStart",Rge="attributeManager.updateEnd",Lge="attribute.updateStart",kge="attribute.allocate",Bge="attribute.updateEnd",yd=function(){function t(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.id,i=n===void 0?"attribute-manager":n,a=e.stats,o=e.timeline;ce(this,t),_(this,"id",void 0),_(this,"gl",void 0),_(this,"attributes",void 0),_(this,"updateTriggers",void 0),_(this,"needsRedraw",void 0),_(this,"userData",void 0),_(this,"stats",void 0),_(this,"attributeTransitionManager",void 0),_(this,"mergeBoundsMemoized",Uc(Mj)),this.id=i,this.gl=r,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=a,this.attributeTransitionManager=new FG(r,{id:"".concat(i,"-transitions"),timeline:o}),Object.seal(this)}return ve(t,[{key:"finalize",value:function(){for(var e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{clearRedrawFlags:!1},n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}},{key:"setNeedsRedraw",value:function(){this.needsRedraw=!0}},{key:"add",value:function(e){this._add(e)}},{key:"addInstanced",value:function(e){this._add(e,{instanced:1})}},{key:"remove",value:function(e){var n=Oge(e),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;this.attributes[a]!==void 0&&(this.attributes[a].delete(),delete this.attributes[a])}}catch(o){n.e(o)}finally{n.f()}}},{key:"invalidate",value:function(e,n){var i=this._invalidateTrigger(e,n);_s(UG,this,e,i)}},{key:"invalidateAll",value:function(e){for(var n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);_s(UG,this,"all")}},{key:"update",value:function(e){var n=e.data,i=e.numInstances,a=e.startIndices,o=a===void 0?null:a,s=e.transitions,u=e.props,c=u===void 0?{}:u,h=e.buffers,p=h===void 0?{}:h,v=e.context,x=v===void 0?{}:v,E=!1;_s(Ige,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(var R in this.attributes){var D=this.attributes[R],H=D.settings.accessor;D.startIndices=o,D.numInstances=i,c[R]&&xr.removed("props.".concat(R),"data.attributes.".concat(R))(),D.setExternalBuffer(p[R])||D.setBinaryValue(typeof H=="string"?p[H]:void 0,n.startIndices)||typeof H=="string"&&!p[H]&&D.setConstantValue(c[H])||D.needsUpdate()&&(E=!0,this._updateAttribute({attribute:D,numInstances:i,data:n,props:c,context:x})),this.needsRedraw=this.needsRedraw||D.needsRedraw()}E&&_s(Rge,this,i),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:i,transitions:s})}},{key:"updateTransition",value:function(){var e=this.attributeTransitionManager,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getBounds",value:function(e){var n=this,i=e.map(function(a){var o;return(o=n.attributes[a])===null||o===void 0?void 0:o.getBounds()});return this.mergeBoundsMemoized(i)}},{key:"getChangedAttributes",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{clearChangedFlags:!1},n=this.attributes,i=this.attributeTransitionManager,a=VM({},i.getAttributes());for(var o in n){var s=n[o];s.needsRedraw(e)&&!i.hasAttribute(o)&&(a[o]=s)}return a}},{key:"getShaderAttributes",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e||(e=this.getAttributes());var i={};for(var a in e)n[a]||Object.assign(i,e[a].getShaderAttributes());return i}},{key:"_add",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var i in e){var a=e[i];this.attributes[i]=this._createAttribute(i,a,n)}this._mapUpdateTriggersToAttributes()}},{key:"_createAttribute",value:function(e,n,i){var a=VM(VM({},n),{},{id:e,size:n.isIndexed&&1||n.size||1,divisor:i.instanced?1:n.divisor||0});return new pA(this.gl,a)}},{key:"_mapUpdateTriggersToAttributes",value:function(){var e=this,n={},i=function(s){var u=e.attributes[s];u.getUpdateTriggers().forEach(function(c){n[c]||(n[c]=[]),n[c].push(s)})};for(var a in this.attributes)i(a);this.updateTriggers=n}},{key:"_invalidateTrigger",value:function(e,n){var i=this.attributes,a=this.updateTriggers,o=a[e];return o&&o.forEach(function(s){var u=i[s];u&&u.setNeedsUpdate(u.id,n)}),o}},{key:"_updateAttribute",value:function(e){var n=e.attribute,i=e.numInstances;if(_s(Lge,n),n.constant){n.setConstantValue(n.value);return}n.allocate(i)&&_s(kge,n,i);var a=n.updateBuffer(e);a&&(this.needsRedraw=!0,_s(Bge,n,i))}}]),t}();Mn();at();vt();et();Mn();et();at();vt();at();vt();function Dge(t){var r=Fge();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Fge(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var jG=function(t){Ke(e,t);var r=Dge(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"value",get:function(){return this._value}},{key:"_onUpdate",value:function(){var i=this.time,a=this.settings,o=a.fromValue,s=a.toValue,u=a.duration,c=a.easing,h=c(i/u);this._value=hu(o,s,h)}}]),e}(ph);at();vt();function Nge(t){var r=zge();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function zge(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var GG=1e-5;function VG(t,r,e,n,i){var a=r-t,o=e-r,s=o*i,u=-a*n;return s+u+a+r}function Uge(t,r,e,n,i){if(Array.isArray(e)){for(var a=[],o=0;o<e.length;o++)a[o]=VG(t[o],r[o],e[o],n,i);return a}return VG(t,r,e,n,i)}function HG(t,r){if(Array.isArray(t)){for(var e=0,n=0;n<t.length;n++){var i=t[n]-r[n];e+=i*i}return Math.sqrt(e)}return Math.abs(t-r)}var WG=function(t){Ke(e,t);var r=Nge(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"value",get:function(){return this._currValue}},{key:"_onUpdate",value:function(){var i=this.settings,a=i.fromValue,o=i.toValue,s=i.damping,u=i.stiffness,c=this._prevValue,h=c===void 0?a:c,p=this._currValue,v=p===void 0?a:p,x=Uge(h,v,o,s,u),E=HG(x,o),R=HG(x,v);E<GG&&R<GG&&(x=o,this.end()),this._prevValue=v,this._currValue=x}}]),e}(ph);function qG(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=jge(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function jge(t,r){if(t){if(typeof t=="string")return XG(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return XG(t,r)}}function XG(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function YG(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function KG(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?YG(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):YG(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var Gge={interpolation:jG,spring:WG},ZG=function(){function t(r){ce(this,t),this.transitions=new Map,this.timeline=r}return ve(t,[{key:"active",get:function(){return this.transitions.size>0}},{key:"add",value:function(e,n,i,a){var o=this.transitions;if(o.has(e)){var s=o.get(e),u=s.value,c=u===void 0?s.settings.fromValue:u;n=c,this.remove(e)}if(a=m2(a),!!a){var h=Gge[a.type];if(!h){xr.error("unsupported transition type '".concat(a.type,"'"))();return}var p=new h(this.timeline);p.start(KG(KG({},a),{},{fromValue:n,toValue:i})),o.set(e,p)}}},{key:"remove",value:function(e){var n=this.transitions;n.has(e)&&(n.get(e).cancel(),n.delete(e))}},{key:"update",value:function(){var e={},n=qG(this.transitions),i;try{for(n.s();!(i=n.n()).done;){var a=Ot(i.value,2),o=a[0],s=a[1];s.update(),e[o]=s.value,s.inProgress||this.remove(o)}}catch(u){n.e(u)}finally{n.f()}return e}},{key:"clear",value:function(){var e=qG(this.transitions.keys()),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;this.remove(i)}}catch(a){e.e(a)}finally{e.f()}}}]),t}();Ii();function JG(t){var r=t[Hc];for(var e in r){var n=r[e],i=n.validate;if(i&&!i(t[e],n))throw new Error("Invalid prop ".concat(e,": ").concat(t[e]))}}function QG(t,r){var e=dA({newProps:t,oldProps:r,propTypes:t[Hc],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),n=Hge(t,r),i=!1;return n||(i=Wge(t,r)),{dataChanged:n,propsChanged:e,updateTriggersChanged:i,extensionsChanged:qge(t,r),transitionsChanged:Vge(t,r)}}function Vge(t,r){if(!t.transitions)return!1;var e={},n=t[Hc],i=!1;for(var a in t.transitions){var o=n[a],s=o&&o.type,u=s==="number"||s==="color"||s==="array";u&&HM(t[a],r[a],o)&&(e[a]=!0,i=!0)}return i?e:!1}function dA(t){var r=t.newProps,e=t.oldProps,n=t.ignoreProps,i=n===void 0?{}:n,a=t.propTypes,o=a===void 0?{}:a,s=t.triggerName,u=s===void 0?"props":s;if(e===r)return!1;if(vr(r)!=="object"||r===null||vr(e)!=="object"||e===null)return"".concat(u," changed shallowly");for(var c=0,h=Object.keys(r);c<h.length;c++){var p=h[c];if(!(p in i)){if(!(p in e))return"".concat(u,".").concat(p," added");var v=HM(r[p],e[p],o[p]);if(v)return"".concat(u,".").concat(p," ").concat(v)}}for(var x=0,E=Object.keys(e);x<E.length;x++){var R=E[x];if(!(R in i)){if(!(R in r))return"".concat(u,".").concat(R," dropped");if(!Object.hasOwnProperty.call(r,R)){var D=HM(r[R],e[R],o[R]);if(D)return"".concat(u,".").concat(R," ").concat(D)}}}return!1}function HM(t,r,e){var n=e&&e.equal;return n&&!n(t,r,e)||!n&&(n=t&&r&&t.equals,n&&!n.call(t,r))?"changed deeply":!n&&r!==t?"changed shallowly":null}function Hge(t,r){if(r===null)return"oldProps is null, initial diff";var e=!1,n=t.dataComparator,i=t._dataDiff;return n?n(t.data,r.data)||(e="Data comparator detected a change"):t.data!==r.data&&(e="A new data container was supplied"),e&&i&&(e=i(t.data,r.data)||e),e}function Wge(t,r){if(r===null)return{all:!0};if("all"in t.updateTriggers){var e=$G(t,r,"all");if(e)return{all:!0}}var n={},i=!1;for(var a in t.updateTriggers)if(a!=="all"){var o=$G(t,r,a);o&&(n[a]=!0,i=!0)}return i?n:!1}function qge(t,r){if(r===null)return!0;var e=r.extensions,n=t.extensions;if(n===e)return!1;if(!e||!n||n.length!==e.length)return!0;for(var i=0;i<n.length;i++)if(!n[i].equals(e[i]))return!0;return!1}function $G(t,r,e){var n=t.updateTriggers[e];n=n??{};var i=r.updateTriggers[e];i=i??{};var a=dA({oldProps:i,newProps:n,triggerName:e});return a}Ii();var Xge="count(): argument not an object",Yge="count(): argument not a container";function b2(t){if(!Zge(t))throw new Error(Xge);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(Kge(t))return Object.keys(t).length;throw new Error(Yge)}function Kge(t){return t!==null&&vr(t)==="object"&&t.constructor===Object}function Zge(t){return t!==null&&vr(t)==="object"}et();function eV(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function H_(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?eV(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):eV(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function mA(t,r){if(!r)return t;var e=H_(H_({},t),r);if("defines"in r&&(e.defines=H_(H_({},t.defines),r.defines)),"modules"in r&&(e.modules=(t.modules||[]).concat(r.modules),r.modules.some(function(o){return o.name==="project64"}))){var n=e.modules.findIndex(function(o){return o.name==="project32"});n>=0&&e.modules.splice(n,1)}if("inject"in r)if(!t.inject)e.inject=r.inject;else{var i=H_({},t.inject);for(var a in r.inject)i[a]=(i[a]||"")+r.inject[a];e.inject=i}return e}at();vt();et();Ii();Mn();et();et();var vA;function tV(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function W_(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?tV(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):tV(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var $ge=(vA={},_(vA,10241,9987),_(vA,10240,9729),_(vA,10242,33071),_(vA,10243,33071),vA),WM={};function rV(t,r,e,n){if(e instanceof la)return e;e.constructor&&e.constructor.name!=="Object"&&(e={data:e});var i=null;e.compressed&&(i=_({},10241,e.data.length>1?9985:9729));var a=new la(r,W_(W_({},e),{},{parameters:W_(W_(W_({},$ge),i),n)}));return WM[a.id]=t,a}function nV(t,r){!r||!(r instanceof la)||WM[r.id]===t&&(r.delete(),delete WM[r.id])}function iV(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function X_(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?iV(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):iV(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var Jge={boolean:{validate:function(r,e){return!0},equal:function(r,e,n){return Boolean(r)===Boolean(e)}},number:{validate:function(r,e){return Number.isFinite(r)&&(!("max"in e)||r<=e.max)&&(!("min"in e)||r>=e.min)}},color:{validate:function(r,e){return e.optional&&!r||qM(r)&&(r.length===3||r.length===4)},equal:function(r,e,n){return Us(r,e,1)}},accessor:{validate:function(r,e){var n=x2(r);return n==="function"||n===x2(e.value)},equal:function(r,e,n){return typeof e=="function"?!0:Us(r,e,1)}},array:{validate:function(r,e){return e.optional&&!r||qM(r)},equal:function(r,e,n){var i=n.compare,a=Number.isInteger(i)?i:i?1:0;return i?Us(r,e,a):r===e}},object:{equal:function(r,e,n){if(n.ignore)return!0;var i=n.compare,a=Number.isInteger(i)?i:i?1:0;return i?Us(r,e,a):r===e}},function:{validate:function(r,e){return e.optional&&!r||typeof r=="function"},equal:function(r,e,n){var i=!n.compare&&n.ignore!==!1;return i||r===e}},data:{transform:function(r,e,n){var i=n.props.dataTransform;return i&&r?i(r):r}},image:{transform:function(r,e,n){var i=n.context;return!i||!i.gl?null:rV(n.id,i.gl,r,X_(X_({},e.parameters),n.props.textureParameters))},release:function(r,e,n){nV(n.id,r)}}};function aV(t){for(var r={},e={},n={},i=0,a=Object.entries(t);i<a.length;i++){var o=Ot(a[i],2),s=o[0],u=o[1],c=u?.deprecatedFor;if(c)n[s]=Array.isArray(c)?c:[c];else{var h=Qge(s,u);r[s]=h,e[s]=h.value}}return{propTypes:r,defaultProps:e,deprecatedProps:n}}function Qge(t,r){switch(x2(r)){case"object":return q_(t,r);case"array":return q_(t,{type:"array",value:r,compare:!1});case"boolean":return q_(t,{type:"boolean",value:r});case"number":return q_(t,{type:"number",value:r});case"function":return q_(t,{type:"function",value:r,compare:!0});default:return{name:t,type:"unknown",value:r}}}function q_(t,r){return"type"in r?X_(X_({name:t},Jge[r.type]),r):"value"in r?X_({name:t,type:x2(r.value)},r):{name:t,type:"object",value:r}}function qM(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function x2(t){return qM(t)?"array":t===null?"null":vr(t)}function YM(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=eAe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function eAe(t,r){if(t){if(typeof t=="string")return oV(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return oV(t,r)}}function oV(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function sV(t,r){for(var e,n=r.length-1;n>=0;n--){var i=r[n];"extensions"in i&&(e=i.extensions)}var a=XM(t.constructor,e),o=Object.create(a);o[sA]=t,o[fh]={},o[xf]={};for(var s=0;s<r.length;++s){var u=r[s];for(var c in u)o[c]=u[c]}return Object.freeze(o),o}var tAe="_mergedDefaultProps";function XM(t,r){var e=tAe;if(r){var n=YM(r),i;try{for(n.s();!(i=n.n()).done;){var a=i.value,o=a.constructor;o&&(e+=":".concat(o.extensionName||o.name))}}catch(u){n.e(u)}finally{n.f()}}var s=uV(t,e);return s||(t[e]=rAe(t,r||[]))}function rAe(t,r){var e=t.prototype;if(!e)return null;var n=Object.getPrototypeOf(t),i=XM(n),a=uV(t,"defaultProps")||{},o=aV(a),s=Object.assign(Object.create(null),i,o.defaultProps),u=Object.assign(Object.create(null),i?.[Hc],o.propTypes),c=Object.assign(Object.create(null),i?.[$w],o.deprecatedProps),h=YM(r),p;try{for(h.s();!(p=h.n()).done;){var v=p.value,x=XM(v.constructor);x&&(Object.assign(s,x),Object.assign(u,x[Hc]),Object.assign(c,x[$w]))}}catch(E){h.e(E)}finally{h.f()}return nAe(s,t),aAe(s,u),iAe(s,c),s[Hc]=u,s[$w]=c,r.length===0&&!KM(t,"_propTypes")&&(t._propTypes=u),s}function nAe(t,r){var e=sAe(r);Object.defineProperties(t,{id:{writable:!0,value:e}})}function iAe(t,r){var e=function(a){Object.defineProperty(t,a,{enumerable:!1,set:function(s){var u="".concat(this.id,": ").concat(a),c=YM(r[a]),h;try{for(c.s();!(h=c.n()).done;){var p=h.value;KM(this,p)||(this[p]=s)}}catch(v){c.e(v)}finally{c.f()}xr.deprecated(u,r[a].join("/"))()}})};for(var n in r)e(n)}function aAe(t,r){var e={},n={};for(var i in r){var a=r[i],o=a.name,s=a.value;a.async&&(e[o]=s,n[o]=oAe(o))}t[sp]=e,t[fh]={},Object.defineProperties(t,n)}function oAe(t){return{enumerable:!0,set:function(e){typeof e=="string"||e instanceof Promise||h2(e)?this[fh][t]=e:this[xf][t]=e},get:function(){if(this[xf]){if(t in this[xf]){var e=this[xf][t];return e||this[sp][t]}if(t in this[fh]){var n=this[sA]&&this[sA].internalState;if(n&&n.hasAsyncProp(t))return n.getAsyncProp(t)||this[sp][t]}}return this[sp][t]}}}function KM(t,r){return Object.prototype.hasOwnProperty.call(t,r)}function uV(t,r){return KM(t,r)&&t[r]}function sAe(t){var r=t.componentName;return r||xr.warn("".concat(t.name,".componentName not specified"))(),r||t.name}function lV(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function ZM(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?lV(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):lV(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var uAe=0,w2=function(){function t(){ce(this,t),_(this,"id",void 0),_(this,"props",void 0),_(this,"count",void 0);for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];this.props=sV(this,e),this.id=this.props.id,this.count=uAe++}return ve(t,[{key:"clone",value:function(e){var n=this.props,i={};for(var a in n[sp])a in n[xf]?i[a]=n[xf][a]:a in n[fh]&&(i[a]=n[fh][a]);return new this.constructor(ZM(ZM(ZM({},n),i),e))}}]),t}();_(w2,"componentName","Component");_(w2,"defaultProps",{});at();vt();et();at();vt();et();var $M=en(On());var lAe=Object.freeze({}),cV=function(){function t(r){ce(this,t),_(this,"component",void 0),_(this,"onAsyncPropUpdated",void 0),_(this,"asyncProps",void 0),_(this,"oldProps",void 0),_(this,"oldAsyncProps",void 0),this.component=r,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=null,this.oldAsyncProps=null}return ve(t,[{key:"finalize",value:function(){for(var e in this.asyncProps){var n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}},{key:"getOldProps",value:function(){return this.oldAsyncProps||this.oldProps||lAe}},{key:"resetOldProps",value:function(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}},{key:"hasAsyncProp",value:function(e){return e in this.asyncProps}},{key:"getAsyncProp",value:function(e){var n=this.asyncProps[e];return n&&n.resolvedValue}},{key:"isAsyncPropLoading",value:function(e){if(e){var n=this.asyncProps[e];return Boolean(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(var i in this.asyncProps)if(this.isAsyncPropLoading(i))return!0;return!1}},{key:"reloadAsyncProp",value:function(e,n){this._watchPromise(e,Promise.resolve(n))}},{key:"setAsyncProps",value:function(e){this.component=e[sA]||this.component;var n=e[xf]||{},i=e[fh]||e,a=e[sp]||{};for(var o in n){var s=n[o];this._createAsyncPropData(o,a[o]),this._updateAsyncProp(o,s),n[o]=this.getAsyncProp(o)}for(var u in i){var c=i[u];this._createAsyncPropData(u,a[u]),this._updateAsyncProp(u,c)}}},{key:"_fetch",value:function(e,n){return null}},{key:"_onResolve",value:function(e,n){}},{key:"_onError",value:function(e,n){}},{key:"_updateAsyncProp",value:function(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(h2(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}},{key:"_freezeAsyncOldProps",value:function(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(var e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}},{key:"_didAsyncInputValueChange",value:function(e,n){var i=this.asyncProps[e];return n===i.resolvedValue||n===i.lastValue?!1:(i.lastValue=n,!0)}},{key:"_setPropValue",value:function(e,n){this._freezeAsyncOldProps();var i=this.asyncProps[e];i&&(n=this._postProcessValue(i,n),i.resolvedValue=n,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}},{key:"_setAsyncPropValue",value:function(e,n,i){var a=this.asyncProps[e];a&&i>=a.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),a.resolvedValue=n,a.resolvedLoadCount=i,this.onAsyncPropUpdated(e,n))}},{key:"_watchPromise",value:function(e,n){var i=this,a=this.asyncProps[e];if(a){a.pendingLoadCount++;var o=a.pendingLoadCount;n.then(function(s){i.component&&(s=i._postProcessValue(a,s),i._setAsyncPropValue(e,s,o),i._onResolve(e,s))}).catch(function(s){i._onError(e,s)})}}},{key:"_resolveAsyncIterable",value:function(){var r=zt($M.default.mark(function n(i,a){var o,s,u,c,h,p,v,x,E,R,D;return $M.default.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(i==="data"){W.next=3;break}return this._setPropValue(i,a),W.abrupt("return");case 3:if(o=this.asyncProps[i],o){W.next=6;break}return W.abrupt("return");case 6:o.pendingLoadCount++,s=o.pendingLoadCount,u=[],c=0,h=!1,p=!1,W.prev=12,x=Yh(a);case 14:return W.next=16,x.next();case 16:if(!(h=!(E=W.sent).done)){W.next=28;break}if(R=E.value,this.component){W.next=20;break}return W.abrupt("return");case 20:D=this.component.props.dataTransform,D?u=D(R,u):u=u.concat(R),Object.defineProperty(u,"__diff",{enumerable:!1,value:[{startRow:c,endRow:u.length}]}),c=u.length,this._setAsyncPropValue(i,u,s);case 25:h=!1,W.next=14;break;case 28:W.next=34;break;case 30:W.prev=30,W.t0=W.catch(12),p=!0,v=W.t0;case 34:if(W.prev=34,W.prev=35,!(h&&x.return!=null)){W.next=39;break}return W.next=39,x.return();case 39:if(W.prev=39,!p){W.next=42;break}throw v;case 42:return W.finish(39);case 43:return W.finish(34);case 44:this._onResolve(i,u);case 45:case"end":return W.stop()}},n,this,[[12,30,34,44],[35,,39,43]])}));function e(n,i){return r.apply(this,arguments)}return e}()},{key:"_postProcessValue",value:function(e,n){var i=e.type;return i&&this.component&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(n,i,this.component):n}},{key:"_createAsyncPropData",value:function(e,n){var i=this.asyncProps[e];if(!i){var a=this.component&&this.component.props[Hc];this.asyncProps[e]={type:a&&a[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}]),t}();function cAe(t){var r=fAe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function fAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var fV=function(t){Ke(e,t);var r=cAe(e);function e(n){var i,a=n.attributeManager,o=n.layer;return ce(this,e),i=r.call(this,o),_(jt(i),"attributeManager",void 0),_(jt(i),"needsRedraw",void 0),_(jt(i),"needsUpdate",void 0),_(jt(i),"subLayers",void 0),_(jt(i),"usesPickingColorCache",void 0),_(jt(i),"hasPickingBuffer",void 0),_(jt(i),"changeFlags",void 0),_(jt(i),"viewport",void 0),_(jt(i),"uniformTransitions",void 0),_(jt(i),"propsInTransition",void 0),i.attributeManager=a,i.needsRedraw=!0,i.needsUpdate=!0,i.subLayers=null,i.usesPickingColorCache=!1,i}return ve(e,[{key:"layer",get:function(){return this.component}},{key:"_fetch",value:function(i,a){var o=this.layer,s=o?.props.fetch;return s?s(a,{propName:i,layer:o}):Yt(me(e.prototype),"_fetch",this).call(this,i,a)}},{key:"_onResolve",value:function(i,a){var o=this.layer;if(o){var s=o.props.onDataLoad;i==="data"&&s&&s(a,{propName:i,layer:o})}}},{key:"_onError",value:function(i,a){var o=this.layer;o&&o.raiseError(a,"loading ".concat(i," of ").concat(this.layer))}}]),e}(cV);function Tf(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=hAe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function hAe(t,r){if(t){if(typeof t=="string")return hV(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return hV(t,r)}}function hV(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function pAe(t){var r=dAe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function dAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function pV(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Y_(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?pV(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):pV(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var mAe="layer.changeFlag",vAe="layer.initialize",gAe="layer.update",AAe="layer.finalize",yAe="layer.matched",dV=Math.pow(2,24)-1,_Ae=Object.freeze([]),bAe=Uc(function(t){var r=t.oldViewport,e=t.viewport;return r.equals(e)}),vh=new Uint8ClampedArray(0),xAe={data:{type:"data",value:_Ae,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:function(r){return r&&r.__diff},optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:function(r,e){var n=e.propName,i=e.layer,a=e.loaders,o=e.loadOptions,s=e.signal,u=i.context.resourceManager;if(o=o||i.getLoadOptions(),a=a||i.props.loaders,s){var c;o=Y_(Y_({},o),{},{fetch:Y_(Y_({},(c=o)===null||c===void 0?void 0:c.fetch),{},{signal:s})})}var h=u.contains(r);return!h&&!o&&(u.add({resourceId:r,data:Ks(r,a),persistent:!1}),h=!0),h?u.subscribe({resourceId:r,onChange:function(v){var x;return(x=i.internalState)===null||x===void 0?void 0:x.reloadAsyncProp(n,v)},consumerId:i.id,requestId:n}):Ks(r,a,o)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:yn.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:function(r){var e=r.layerIndex;return[0,-e*100]}},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}},aa=function(t){Ke(e,t);var r=pAe(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"internalState",null),_(jt(n),"lifecycle",md.NO_STATE),_(jt(n),"context",void 0),_(jt(n),"state",void 0),_(jt(n),"parent",null),n}return ve(e,[{key:"root",get:function(){for(var i=this;i.parent;)i=i.parent;return i}},{key:"toString",value:function(){var i=this.constructor.layerName||this.constructor.name;return"".concat(i,"({id: '").concat(this.props.id,"'})")}},{key:"project",value:function(i){yo(this.internalState);var a=this.internalState.viewport||this.context.viewport,o=CM(i,{viewport:a,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),s=Fm(o,a.pixelProjectionMatrix),u=Ot(s,3),c=u[0],h=u[1],p=u[2];return i.length===2?[c,h]:[c,h,p]}},{key:"unproject",value:function(i){yo(this.internalState);var a=this.internalState.viewport||this.context.viewport;return a.unproject(i)}},{key:"projectPosition",value:function(i,a){yo(this.internalState);var o=this.internalState.viewport||this.context.viewport;return Xw(i,Y_({viewport:o,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem},a))}},{key:"isComposite",get:function(){return!1}},{key:"setState",value:function(i){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,i),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){this.internalState&&(this.internalState.needsRedraw=!0)}},{key:"setNeedsUpdate",value:function(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}},{key:"isLoaded",get:function(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}},{key:"wrapLongitude",get:function(){return this.props.wrapLongitude}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}},{key:"setModuleParameters",value:function(i){var a=Tf(this.getModels()),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;s.updateModuleSettings(i)}}catch(u){a.e(u)}finally{a.f()}}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getLoadOptions",value:function(){return this.props.loadOptions}},{key:"use64bitPositions",value:function(){var i=this.props.coordinateSystem;return i===yn.DEFAULT||i===yn.LNGLAT||i===yn.CARTESIAN}},{key:"onHover",value:function(i,a){return this.props.onHover&&this.props.onHover(i,a)||!1}},{key:"onClick",value:function(i,a){return this.props.onClick&&this.props.onClick(i,a)||!1}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return a[0]=i+1&255,a[1]=i+1>>8&255,a[2]=i+1>>8>>8&255,a}},{key:"decodePickingColor",value:function(i){yo(i instanceof Uint8Array);var a=Ot(i,3),o=a[0],s=a[1],u=a[2],c=o+s*256+u*65536-1;return c}},{key:"getNumInstances",value:function(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:b2(this.props.data)}},{key:"getStartIndices",value:function(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}},{key:"getBounds",value:function(){var i;return(i=this.getAttributeManager())===null||i===void 0?void 0:i.getBounds(["positions","instancePositions"])}},{key:"getShaders",value:function(i){var a=Tf(this.props.extensions),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;i=mA(i,s.getShaders.call(this,s))}}catch(u){a.e(u)}finally{a.f()}return i}},{key:"shouldUpdateState",value:function(i){return i.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(i){var a=this,o=this.getAttributeManager(),s=i.changeFlags.dataChanged;if(s&&o)if(Array.isArray(s)){var u=Tf(s),c;try{for(u.s();!(c=u.n()).done;){var h=c.value;o.invalidateAll(h)}}catch(W){u.e(W)}finally{u.f()}}else o.invalidateAll();if(o){var p=i.props,v=this.internalState.hasPickingBuffer,x=Number.isInteger(p.highlightedObjectIndex)||p.pickable||p.extensions.some(function(W){return W.getNeedsPickingBuffer.call(a,W)});if(v!==x){this.internalState.hasPickingBuffer=x;var E=o.attributes,R=E.pickingColors,D=E.instancePickingColors,H=R||D;H&&(x&&H.constant&&(H.constant=!1,o.invalidate(H.id)),!H.value&&!x&&(H.constant=!0,H.value=[0,0,0]))}}}},{key:"finalizeState",value:function(i){var a=Tf(this.getModels()),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;s.delete()}}catch(c){a.e(c)}finally{a.f()}var u=this.getAttributeManager();u&&u.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}},{key:"draw",value:function(i){var a=Tf(this.getModels()),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;s.draw(i)}}catch(u){a.e(u)}finally{a.f()}}},{key:"getPickingInfo",value:function(i){var a=i.info,o=i.mode,s=i.sourceLayer,u=a.index;return u>=0&&Array.isArray(this.props.data)&&(a.object=this.props.data[u]),a}},{key:"raiseError",value:function(i,a){var o,s;if(a&&(i=new Error("".concat(a,": ").concat(i.message),{cause:i})),!((o=(s=this.props).onError)!==null&&o!==void 0&&o.call(s,i))){var u,c;(u=this.context)===null||u===void 0||(c=u.onError)===null||c===void 0||c.call(u,i,this)}}},{key:"getNeedsRedraw",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(i)}},{key:"needsUpdate",value:function(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}},{key:"hasUniformTransition",value:function(){var i;return((i=this.internalState)===null||i===void 0?void 0:i.uniformTransitions.active)||!1}},{key:"activateViewport",value:function(i){if(this.internalState){var a=this.internalState.viewport;this.internalState.viewport=i,(!a||!bAe({oldViewport:a,viewport:i}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}}},{key:"invalidateAttribute",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"all",a=this.getAttributeManager();a&&(i==="all"?a.invalidateAll():a.invalidate(i))}},{key:"updateAttributes",value:function(i){var a=Tf(this.getModels()),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;this._setModelAttributes(s,i)}}catch(u){a.e(u)}finally{a.f()}}},{key:"_updateAttributes",value:function(){var i=this.getAttributeManager();if(i){var a=this.props,o=this.getNumInstances(),s=this.getStartIndices();i.update({data:a.data,numInstances:o,startIndices:s,props:a,transitions:a.transitions,buffers:a.data.attributes,context:this});var u=i.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(u)}}},{key:"_updateAttributeTransition",value:function(){var i=this.getAttributeManager();i&&i.updateTransition()}},{key:"_updateUniformTransition",value:function(){var i=this.internalState.uniformTransitions;if(i.active){var a=i.update(),o=Object.create(this.props);for(var s in a)Object.defineProperty(o,s,{value:a[s]});return o}return this.props}},{key:"calculateInstancePickingColors",value:function(i,a){var o=a.numInstances;if(!i.constant){var s=Math.floor(vh.length/3);if(this.internalState.usesPickingColorCache=!0,s<o){o>dV&&xr.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),vh=bf.allocate(vh,o,{size:3,copy:!0,maxCount:Math.max(o,dV)});for(var u=Math.floor(vh.length/3),c=[],h=s;h<u;h++)this.encodePickingColor(h,c),vh[h*3+0]=c[0],vh[h*3+1]=c[1],vh[h*3+2]=c[2]}i.value=vh.subarray(0,o*3)}}},{key:"_setModelAttributes",value:function(i,a){var o=this.getAttributeManager(),s=i.userData.excludeAttributes||{},u=o.getShaderAttributes(a,s);i.setAttributes(u)}},{key:"disablePickingIndex",value:function(i){var a=this.props.data;if(!("attributes"in a)){this._disablePickingIndex(i);return}var o=this.getAttributeManager().attributes,s=o.pickingColors,u=o.instancePickingColors,c=s||u,h=c&&a.attributes&&a.attributes[c.id];if(h&&h.value)for(var p=h.value,v=this.encodePickingColor(i),x=0;x<a.length;x++){var E=c.getVertexOffset(x);p[E]===v[0]&&p[E+1]===v[1]&&p[E+2]===v[2]&&this._disablePickingIndex(x)}else this._disablePickingIndex(i)}},{key:"_disablePickingIndex",value:function(i){var a=this.getAttributeManager().attributes,o=a.pickingColors,s=a.instancePickingColors,u=o||s;if(u){var c=u.getVertexOffset(i),h=u.getVertexOffset(i+1);u.buffer.subData({data:new Uint8Array(h-c),offset:c})}}},{key:"restorePickingColors",value:function(){var i=this.getAttributeManager().attributes,a=i.pickingColors,o=i.instancePickingColors,s=a||o;s&&(this.internalState.usesPickingColorCache&&s.value.buffer!==vh.buffer&&(s.value=vh.subarray(0,s.value.length)),s.updateSubBuffer({startOffset:0}))}},{key:"_initialize",value:function(){yo(!this.internalState),yo(Number.isFinite(this.props.coordinateSystem)),_s(vAe,this);var i=this._getAttributeManager();i&&i.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new fV({attributeManager:i,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:function(){return xr.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),i}}),this.internalState.uniformTransitions=new ZG(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);var a=Tf(this.props.extensions),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;s.initializeState.call(this,this.context,s)}}catch(u){a.e(u)}finally{a.f()}this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}},{key:"_transferState",value:function(i){_s(yAe,this,this===i);var a=i.state,o=i.internalState;this!==i&&(this.internalState=o,this.state=a,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}},{key:"_update",value:function(){var i=this.needsUpdate();if(_s(gAe,this,i),!!i){var a=this.props,o=this.context,s=this.internalState,u=o.viewport,c=this._updateUniformTransition();s.propsInTransition=c,o.viewport=s.viewport||u,this.props=c;try{var h=this._getUpdateParams(),p=this.getModels();if(o.gl)this.updateState(h);else try{this.updateState(h)}catch{}var v=Tf(this.props.extensions),x;try{for(v.s();!(x=v.n()).done;){var E=x.value;E.updateState.call(this,h,E)}}catch(D){v.e(D)}finally{v.f()}var R=this.getModels()[0]!==p[0];this._postUpdate(h,R)}finally{o.viewport=u,this.props=a,this._clearChangeFlags(),s.needsUpdate=!1,s.resetOldProps()}}}},{key:"_finalize",value:function(){_s(AAe,this),this.finalizeState(this.context);var i=Tf(this.props.extensions),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;o.finalizeState.call(this,this.context,o)}}catch(s){i.e(s)}finally{i.f()}}},{key:"_drawLayer",value:function(i){var a=this,o=i.moduleParameters,s=o===void 0?null:o,u=i.uniforms,c=u===void 0?{}:u,h=i.parameters,p=h===void 0?{}:h;this._updateAttributeTransition();var v=this.props,x=this.context;this.props=this.internalState.propsInTransition||v;var E=this.props.opacity;c.opacity=Math.pow(E,1/2.2);try{s&&this.setModuleParameters(s);var R=this.props.getPolygonOffset,D=R&&R(c)||[0,0];Ns(x.gl,{polygonOffset:D}),Aa(x.gl,p,function(){var H={moduleParameters:s,uniforms:c,parameters:p,context:x},W=Tf(a.props.extensions),$;try{for(W.s();!($=W.n()).done;){var J=$.value;J.draw.call(a,H,J)}}catch(B){W.e(B)}finally{W.f()}a.draw(H)})}finally{this.props=v}}},{key:"getChangeFlags",value:function(){var i;return(i=this.internalState)===null||i===void 0?void 0:i.changeFlags}},{key:"setChangeFlags",value:function(i){if(this.internalState){var a=this.internalState.changeFlags;for(var o in i)if(i[o]){var s=!1;switch(o){case"dataChanged":var u=i[o],c=a[o];u&&Array.isArray(c)&&(a.dataChanged=Array.isArray(u)?c.concat(u):u,s=!0);default:a[o]||(a[o]=i[o],s=!0)}s&&_s(mAe,this,o,i)}var h=Boolean(a.dataChanged||a.updateTriggersChanged||a.propsChanged||a.extensionsChanged);a.propsOrDataChanged=h,a.somethingChanged=h||a.viewportChanged||a.stateChanged}}},{key:"_clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"_diffProps",value:function(i,a){var o=QG(i,a);if(o.updateTriggersChanged)for(var s in o.updateTriggersChanged)o.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(o.transitionsChanged)for(var u in o.transitionsChanged){var c;this.internalState.uniformTransitions.add(u,a[u],i[u],(c=i.transitions)===null||c===void 0?void 0:c[u])}return this.setChangeFlags(o)}},{key:"validateProps",value:function(){JG(this.props)}},{key:"updateAutoHighlight",value:function(i){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(i)}},{key:"_updateAutoHighlight",value:function(i){var a={pickingSelectedColor:i.picked?i.color:null},o=this.props.highlightColor;i.picked&&typeof o=="function"&&(a.pickingHighlightColor=o(i)),this.setModuleParameters(a),this.setNeedsRedraw()}},{key:"_getAttributeManager",value:function(){var i=this.context;return new yd(i.gl,{id:this.props.id,stats:i.stats,timeline:i.timeline})}},{key:"_postUpdate",value:function(i,a){var o=i.props,s=i.oldProps;this.setNeedsRedraw(),this._updateAttributes();var u=this.state.model;u?.setInstanceCount(this.getNumInstances());var c=o.autoHighlight,h=o.highlightedObjectIndex,p=o.highlightColor;if(a||s.autoHighlight!==c||s.highlightedObjectIndex!==h||s.highlightColor!==p){var v={};c||(v.pickingSelectedColor=null),Array.isArray(p)&&(v.pickingHighlightColor=p),(a||h!==s.highlightedObjectIndex)&&(v.pickingSelectedColor=Number.isFinite(h)&&h>=0?this.encodePickingColor(h):null),this.setModuleParameters(v)}}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(i){if(!this.internalState)return!1;var a=!1;a=a||this.internalState.needsRedraw&&this.id;var o=this.getAttributeManager(),s=o?o.getNeedsRedraw(i):!1;if(a=a||s,a){var u=Tf(this.props.extensions),c;try{for(u.s();!(c=u.n()).done;){var h=c.value;h.onNeedsRedraw.call(this,h)}}catch(p){u.e(p)}finally{u.f()}}return this.internalState.needsRedraw=this.internalState.needsRedraw&&!i.clearRedrawFlags,a}},{key:"_onAsyncPropUpdated",value:function(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}],[{key:"componentName",get:function(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}}]),e}(w2);_(aa,"defaultProps",xAe);_(aa,"layerName","Layer");at();vt();et();function JM(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=wAe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function wAe(t,r){if(t){if(typeof t=="string")return mV(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return mV(t,r)}}function mV(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function vV(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function gV(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?vV(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):vV(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function TAe(t){var r=SAe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function SAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var EAe="compositeLayer.renderLayers",Go=function(t){Ke(e,t);var r=TAe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"isComposite",get:function(){return!0}},{key:"isLoaded",get:function(){return Yt(me(e.prototype),"isLoaded",this)&&this.getSubLayers().every(function(i){return i.isLoaded})}},{key:"getSubLayers",value:function(){return this.internalState&&this.internalState.subLayers||[]}},{key:"initializeState",value:function(i){}},{key:"setState",value:function(i){Yt(me(e.prototype),"setState",this).call(this,i),this.setNeedsUpdate()}},{key:"getPickingInfo",value:function(i){var a=i.info,o=a.object,s=o&&o.__source&&o.__source.parent&&o.__source.parent.id===this.id;return s&&(a.object=o.__source.object,a.index=o.__source.index),a}},{key:"filterSubLayer",value:function(i){return!0}},{key:"shouldRenderSubLayer",value:function(i,a){return a&&a.length}},{key:"getSubLayerClass",value:function(i,a){var o=this.props._subLayerProps;return o&&o[i]&&o[i].type||a}},{key:"getSubLayerRow",value:function(i,a,o){return i.__source={parent:this,object:a,index:o},i}},{key:"getSubLayerAccessor",value:function(i){if(typeof i=="function"){var a={index:-1,data:this.props.data,target:[]};return function(o,s){return o&&o.__source?(a.index=o.__source.index,i(o.__source.object,a)):i(o,s)}}return i}},{key:"getSubLayerProps",value:function(){var i,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=this.props,s=o.opacity,u=o.pickable,c=o.visible,h=o.parameters,p=o.getPolygonOffset,v=o.highlightedObjectIndex,x=o.autoHighlight,E=o.highlightColor,R=o.coordinateSystem,D=o.coordinateOrigin,H=o.wrapLongitude,W=o.positionFormat,$=o.modelMatrix,J=o.extensions,B=o.fetch,se=o.operation,V=o._subLayerProps,X={id:"",updateTriggers:{},opacity:s,pickable:u,visible:c,parameters:h,getPolygonOffset:p,highlightedObjectIndex:v,autoHighlight:x,highlightColor:E,coordinateSystem:R,coordinateOrigin:D,wrapLongitude:H,positionFormat:W,modelMatrix:$,extensions:J,fetch:B,operation:se},I=V&&a.id&&V[a.id],O=I&&I.updateTriggers,U=a.id||"sublayer";if(I){var re=this.props[Hc],ee=a.type?a.type._propTypes:{};for(var pe in I){var je=ee[pe]||re[pe];je&&je.type==="accessor"&&(I[pe]=this.getSubLayerAccessor(I[pe]))}}Object.assign(X,a,I),X.id="".concat(this.props.id,"-").concat(U),X.updateTriggers=gV(gV({all:(i=this.props.updateTriggers)===null||i===void 0?void 0:i.all},a.updateTriggers),O);var qe=JM(J),We;try{for(qe.s();!(We=qe.n()).done;){var ot=We.value,gt=ot.getSubLayerProps.call(this,ot);gt&&Object.assign(X,gt,{updateTriggers:Object.assign(X.updateTriggers,gt.updateTriggers)})}}catch(Pt){qe.e(Pt)}finally{qe.f()}return X}},{key:"_updateAutoHighlight",value:function(i){var a=JM(this.getSubLayers()),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;s.updateAutoHighlight(i)}}catch(u){a.e(u)}finally{a.f()}}},{key:"_getAttributeManager",value:function(){return null}},{key:"_postUpdate",value:function(i,a){var o=this.internalState.subLayers,s=!o||this.needsUpdate();if(s){var u=this.renderLayers();o=hh(u,Boolean),this.internalState.subLayers=o}_s(EAe,this,s,o);var c=JM(o),h;try{for(c.s();!(h=c.n()).done;){var p=h.value;p.parent=this}}catch(v){c.e(v)}finally{c.f()}}}]),e}(aa);_(Go,"layerName","CompositeLayer");Mn();at();vt();et();function AV(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function yV(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?AV(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):AV(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function CAe(t){var r=PAe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function PAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var T2=Math.PI/180,_V=180/Math.PI,S2=6370972,gA=256;function OAe(){var t=gA/S2,r=Math.PI/180*gA;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[1/t,1/t,1/t],unitsPerDegree:[r,r,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/r,1/r,1/t]}}var AA=function(t){Ke(e,t);var r=CAe(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ce(this,e);var a=i.latitude,o=a===void 0?0:a,s=i.longitude,u=s===void 0?0:s,c=i.zoom,h=c===void 0?0:c,p=i.nearZMultiplier,v=p===void 0?.1:p,x=i.farZMultiplier,E=x===void 0?2:x,R=i.resolution,D=R===void 0?10:R,H=i.height,W=i.altitude,$=W===void 0?1.5:W;H=H||1,$=Math.max(.75,$);var J=new gn().lookAt({eye:[0,-$,0],up:[0,0,1]}),B=Math.pow(2,h);J.rotateX(o*T2),J.rotateZ(-u*T2),J.scale(B/H);var se=Math.atan(.5/$),V=gA*2*B/H;return n=r.call(this,yV(yV({},i),{},{height:H,viewMatrix:J,longitude:u,latitude:o,zoom:h,distanceScales:OAe(),fovyRadians:se*2,focalDistance:$,near:v,far:Math.min(2,1/V+1)*$*E})),_(jt(n),"longitude",void 0),_(jt(n),"latitude",void 0),_(jt(n),"resolution",void 0),n.latitude=o,n.longitude=u,n.resolution=D,n}return ve(e,[{key:"projectionMode",get:function(){return ol.GLOBE}},{key:"getDistanceScales",value:function(){return this.distanceScales}},{key:"getBounds",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a={targetZ:i.z||0},o=this.unproject([0,this.height/2],a),s=this.unproject([this.width/2,0],a),u=this.unproject([this.width,this.height/2],a),c=this.unproject([this.width/2,this.height],a);return u[0]<this.longitude&&(u[0]+=360),o[0]>this.longitude&&(o[0]-=360),[Math.min(o[0],u[0],s[0],c[0]),Math.min(o[1],u[1],s[1],c[1]),Math.max(o[0],u[0],s[0],c[0]),Math.max(o[1],u[1],s[1],c[1])]}},{key:"unproject",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.topLeft,s=o===void 0?!0:o,u=a.targetZ,c=Ot(i,3),h=c[0],p=c[1],v=c[2],x=s?p:this.height-p,E=this.pixelUnprojectionMatrix,R;if(Number.isFinite(v))R=QM(E,[h,x,v,1]);else{var D=QM(E,[h,x,-1,1]),H=QM(E,[h,x,1,1]),W=((u||0)/S2+1)*gA,$=qw(Ww([],D,H)),J=qw(D),B=qw(H),se=(4*J*B-Math.pow($-J-B,2))/16,V=4*se/$,X=Math.sqrt(J-V),I=Math.sqrt(Math.max(0,W*W-V)),O=(X-I)/Math.sqrt($);R=kj([],D,H,O)}var U=this.unprojectPosition(R),re=Ot(U,3),ee=re[0],pe=re[1],je=re[2];return Number.isFinite(v)?[ee,pe,je]:Number.isFinite(u)?[ee,pe,u]:[ee,pe]}},{key:"projectPosition",value:function(i){var a=Ot(i,3),o=a[0],s=a[1],u=a[2],c=u===void 0?0:u,h=o*T2,p=s*T2,v=Math.cos(p),x=(c/S2+1)*gA;return[Math.sin(h)*v*x,-Math.cos(h)*v*x,Math.sin(p)*x]}},{key:"unprojectPosition",value:function(i){var a=Ot(i,3),o=a[0],s=a[1],u=a[2],c=Bj(i),h=Math.asin(u/c),p=Math.atan2(o,-s),v=p*_V,x=h*_V,E=(c/gA-1)*S2;return[v,x,E]}},{key:"projectFlat",value:function(i){return i}},{key:"unprojectFlat",value:function(i){return i}},{key:"panByPosition",value:function(i,a){var o=this.unproject(a);return{longitude:i[0]-o[0]+this.longitude,latitude:i[1]-o[1]+this.latitude}}}]),e}(Ju);function QM(t,r){var e=Bm([],r,t);return oj(e,e,1/e[3]),e}Mn();at();vt();et();function bV(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function xV(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?bV(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):bV(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function MAe(t){var r=IAe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function IAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var eI=Math.PI/180;function RAe(t){var r=t.height,e=t.focalDistance,n=t.orbitAxis,i=t.rotationX,a=t.rotationOrbit,o=t.zoom,s=n==="Z"?[0,0,1]:[0,1,0],u=n==="Z"?[0,-e,0]:[0,0,e],c=new gn().lookAt({eye:u,up:s});c.rotateX(i*eI),n==="Z"?c.rotateZ(a*eI):c.rotateY(a*eI);var h=Math.pow(2,o)/r;return c.scale(h),c}var E2=function(t){Ke(e,t);var r=MAe(e);function e(n){var i;ce(this,e);var a=n.height,o=n.projectionMatrix,s=n.fovy,u=s===void 0?50:s,c=n.orbitAxis,h=c===void 0?"Z":c,p=n.target,v=p===void 0?[0,0,0]:p,x=n.rotationX,E=x===void 0?0:x,R=n.rotationOrbit,D=R===void 0?0:R,H=n.zoom,W=H===void 0?0:H,$=o?o[5]/2:pd(u);return i=r.call(this,xV(xV({},n),{},{longitude:void 0,viewMatrix:RAe({height:a||1,focalDistance:$,orbitAxis:h,rotationX:E,rotationOrbit:D,zoom:W}),fovy:u,focalDistance:$,position:v,zoom:W})),_(jt(i),"projectedCenter",void 0),i.projectedCenter=i.project(i.center),i}return ve(e,[{key:"unproject",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.topLeft,s=o===void 0?!0:o,u=Ot(i,3),c=u[0],h=u[1],p=u[2],v=p===void 0?this.projectedCenter[2]:p,x=s?h:this.height-h,E=Hl([c,x,v],this.pixelUnprojectionMatrix),R=Ot(E,3),D=R[0],H=R[1],W=R[2];return[D,H,W]}},{key:"panByPosition",value:function(i,a){var o=this.project(i),s=[this.width/2+o[0]-a[0],this.height/2+o[1]-a[1],this.projectedCenter[2]];return{target:this.unproject(s)}}}]),e}(Ju);Mn();et();at();vt();function wV(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function TV(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?wV(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):wV(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function LAe(t){var r=kAe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function kAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var BAe=new gn().lookAt({eye:[0,0,1]});function DAe(t){var r=t.width,e=t.height,n=t.near,i=t.far,a=t.padding,o=-r/2,s=r/2,u=-e/2,c=e/2;if(a){var h=a.left,p=h===void 0?0:h,v=a.right,x=v===void 0?0:v,E=a.top,R=E===void 0?0:E,D=a.bottom,H=D===void 0?0:D,W=ya((p+r-x)/2,0,r)-r/2,$=ya((R+e-H)/2,0,e)-e/2;o-=W,s-=W,u+=$,c+=$}return new gn().ortho({left:o,right:s,bottom:u,top:c,near:n,far:i})}var C2=function(t){Ke(e,t);var r=LAe(e);function e(n){ce(this,e);var i=n.width,a=n.height,o=n.near,s=o===void 0?.1:o,u=n.far,c=u===void 0?1e3:u,h=n.zoom,p=h===void 0?0:h,v=n.target,x=v===void 0?[0,0,0]:v,E=n.padding,R=E===void 0?null:E,D=n.flipY,H=D===void 0?!0:D,W=Array.isArray(p)?p[0]:p,$=Array.isArray(p)?p[1]:p,J=Math.min(W,$),B=Math.pow(2,J),se;if(W!==$){var V=Math.pow(2,W),X=Math.pow(2,$);se={unitsPerMeter:[V/B,X/B,1],metersPerUnit:[B/V,B/X,1]}}return r.call(this,TV(TV({},n),{},{longitude:void 0,position:x,viewMatrix:BAe.clone().scale([B,B*(H?-1:1),B]),projectionMatrix:DAe({width:i||1,height:a||1,padding:R,near:s,far:c}),zoom:J,distanceScales:se}))}return ve(e,[{key:"projectFlat",value:function(i){var a=Ot(i,2),o=a[0],s=a[1],u=this.distanceScales.unitsPerMeter;return[o*u[0],s*u[1]]}},{key:"unprojectFlat",value:function(i){var a=Ot(i,2),o=a[0],s=a[1],u=this.distanceScales.metersPerUnit;return[o*u[0],s*u[1]]}},{key:"panByPosition",value:function(i,a){var o=Hl(a,this.pixelUnprojectionMatrix),s=this.projectFlat(i),u=iA([],s,Hw([],o)),c=iA([],this.center,u);return{target:this.unprojectFlat(c)}}}]),e}(Ju);at();et();function SV(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function EV(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?SV(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):SV(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function FAe(t){var r=NAe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function NAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var P2=function(t){Ke(e,t);var r=FAe(e);function e(n){var i;ce(this,e);var a=n.longitude,o=n.latitude,s=n.modelMatrix,u=n.bearing,c=u===void 0?0:u,h=n.pitch,p=h===void 0?0:h,v=n.up,x=v===void 0?[0,0,1]:v,E=new E_({bearing:c,pitch:p===-90?1e-4:90+p}),R=E.toVector3().normalize(),D=s?new gn(s).transformAsVector(R):R,H=Number.isFinite(o)?M_({latitude:o}):0,W=Math.pow(2,H),$=new gn().lookAt({eye:[0,0,0],center:D,up:x}).scale(W);return i=r.call(this,EV(EV({},n),{},{zoom:H,viewMatrix:$})),_(jt(i),"longitude",void 0),_(jt(i),"latitude",void 0),i.latitude=o,i.longitude=a,i}return e}(Ju);at();vt();et();et();at();vt();function CV(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function O2(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?CV(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):CV(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function PV(t){var r=zAe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function zAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var K_=20,UAe=function(t){Ke(e,t);var r=PV(e);function e(n){ce(this,e);var i=n.width,a=n.height,o=n.position,s=o===void 0?[0,0,0]:o,u=n.bearing,c=u===void 0?0:u,h=n.pitch,p=h===void 0?0:h,v=n.longitude,x=v===void 0?null:v,E=n.latitude,R=E===void 0?null:E,D=n.maxPitch,H=D===void 0?90:D,W=n.minPitch,$=W===void 0?-90:W,J=n.startRotatePos,B=n.startBearing,se=n.startPitch,V=n.startZoomPosition;return r.call(this,{width:i,height:a,position:s,bearing:c,pitch:p,longitude:x,latitude:R,maxPitch:H,minPitch:$},{startRotatePos:J,startBearing:B,startPitch:se,startZoomPosition:V})}return ve(e,[{key:"panStart",value:function(){return this}},{key:"pan",value:function(){return this}},{key:"panEnd",value:function(){return this}},{key:"rotateStart",value:function(i){var a=i.pos;return this._getUpdatedState({startRotatePos:a,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}},{key:"rotate",value:function(i){var a=i.pos,o=i.deltaAngleX,s=o===void 0?0:o,u=i.deltaAngleY,c=u===void 0?0:u,h=this.getState(),p=h.startRotatePos,v=h.startBearing,x=h.startPitch,E=this.getViewportProps(),R=E.width,D=E.height;if(!p||v===void 0||x===void 0)return this;var H;if(a){var W=(a[0]-p[0])/R,$=(a[1]-p[1])/D;H={bearing:v-W*180,pitch:x-$*90}}else H={bearing:v-s,pitch:x-c};return this._getUpdatedState(H)}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotatePos:null,startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(){return this._getUpdatedState({startZoomPosition:this.getViewportProps().position})}},{key:"zoom",value:function(i){var a=i.scale,o=this.getState(),s=o.startZoomPosition;s||(s=this.getViewportProps().position);var u=this.getDirection();return this._move(u,Math.log2(a)*K_,s)}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null})}},{key:"moveLeft",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:K_,a=this.getDirection(!0);return this._move(a.rotateZ({radians:Math.PI/2}),i)}},{key:"moveRight",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:K_,a=this.getDirection(!0);return this._move(a.rotateZ({radians:-Math.PI/2}),i)}},{key:"moveUp",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:K_,a=this.getDirection(!0);return this._move(a,i)}},{key:"moveDown",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:K_,a=this.getDirection(!0);return this._move(a.negate(),i)}},{key:"rotateLeft",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing-i})}},{key:"rotateRight",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:15;return this._getUpdatedState({bearing:this.getViewportProps().bearing+i})}},{key:"rotateUp",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch+i})}},{key:"rotateDown",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;return this._getUpdatedState({pitch:this.getViewportProps().pitch-i})}},{key:"zoomIn",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2;return this.zoom({scale:i})}},{key:"zoomOut",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2;return this.zoom({scale:1/i})}},{key:"shortestPathFrom",value:function(i){var a=i.getViewportProps(),o=O2({},this.getViewportProps()),s=o.bearing,u=o.longitude;return Math.abs(s-a.bearing)>180&&(o.bearing=s<0?s+360:s-360),u!==null&&a.longitude!==null&&Math.abs(u-a.longitude)>180&&(o.longitude=u<0?u+360:u-360),o}},{key:"_move",value:function(i,a){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getViewportProps().position,s=i.scale(a);return this._getUpdatedState({position:new _t(o).add(s)})}},{key:"getDirection",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,a=new E_({bearing:this.getViewportProps().bearing,pitch:i?90:90+this.getViewportProps().pitch}),o=a.toVector3().normalize();return o}},{key:"_getUpdatedState",value:function(i){return new e(O2(O2(O2({},this.getViewportProps()),this.getState()),i))}},{key:"applyConstraints",value:function(i){var a=i.pitch,o=i.maxPitch,s=i.minPitch,u=i.longitude,c=i.bearing;return i.pitch=ya(a,s,o),u!==null&&(u<-180||u>180)&&(i.longitude=zm(u+180,360)-180),(c<-180||c>180)&&(i.bearing=zm(c+180,360)-180),i}}]),e}(cA),M2=function(t){Ke(e,t);var r=PV(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"ControllerState",UAe),_(jt(n),"transition",{transitionDuration:300,transitionInterpolator:new Wl(["position","pitch","bearing"])}),n}return e}(qc);function jAe(t){var r=GAe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function GAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var tI=function(t){Ke(e,t);var r=jAe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"ViewportType",get:function(){return P2}},{key:"ControllerType",get:function(){return M2}}]),e}(Wc);_(tI,"displayName","FirstPersonView");at();vt();et();at();vt();et();function OV(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Wm(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?OV(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):OV(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function MV(t){var r=VAe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function VAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var rI=function(t){Ke(e,t);var r=MV(e);function e(n){var i;ce(this,e);var a=n.width,o=n.height,s=n.rotationX,u=s===void 0?0:s,c=n.rotationOrbit,h=c===void 0?0:c,p=n.target,v=p===void 0?[0,0,0]:p,x=n.zoom,E=x===void 0?0:x,R=n.minRotationX,D=R===void 0?-90:R,H=n.maxRotationX,W=H===void 0?90:H,$=n.minZoom,J=$===void 0?-1/0:$,B=n.maxZoom,se=B===void 0?1/0:B,V=n.startPanPosition,X=n.startRotatePos,I=n.startRotationX,O=n.startRotationOrbit,U=n.startZoomPosition,re=n.startZoom;return i=r.call(this,{width:a,height:o,rotationX:u,rotationOrbit:h,target:v,zoom:E,minRotationX:D,maxRotationX:W,minZoom:J,maxZoom:se},{startPanPosition:V,startRotatePos:X,startRotationX:I,startRotationOrbit:O,startZoomPosition:U,startZoom:re}),_(jt(i),"makeViewport",void 0),i.makeViewport=n.makeViewport,i}return ve(e,[{key:"panStart",value:function(i){var a=i.pos;return this._getUpdatedState({startPanPosition:this._unproject(a)})}},{key:"pan",value:function(i){var a=i.pos,o=i.startPosition,s=this.getState().startPanPosition||o;if(!s)return this;var u=this.makeViewport(this.getViewportProps()),c=u.panByPosition(s,a);return this._getUpdatedState(c)}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null})}},{key:"rotateStart",value:function(i){var a=i.pos;return this._getUpdatedState({startRotatePos:a,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}},{key:"rotate",value:function(i){var a=i.pos,o=i.deltaAngleX,s=o===void 0?0:o,u=i.deltaAngleY,c=u===void 0?0:u,h=this.getState(),p=h.startRotatePos,v=h.startRotationX,x=h.startRotationOrbit,E=this.getViewportProps(),R=E.width,D=E.height;if(!p||v===void 0||x===void 0)return this;var H;if(a){var W=(a[0]-p[0])/R,$=(a[1]-p[1])/D;(v<-90||v>90)&&(W*=-1),H={rotationX:v+$*180,rotationOrbit:x+W*180}}else H={rotationX:v+c,rotationOrbit:x+s};return this._getUpdatedState(H)}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}},{key:"shortestPathFrom",value:function(i){var a=i.getViewportProps(),o=Wm({},this.getViewportProps()),s=o.rotationOrbit;return Math.abs(s-a.rotationOrbit)>180&&(o.rotationOrbit=s<0?s+360:s-360),o}},{key:"zoomStart",value:function(i){var a=i.pos;return this._getUpdatedState({startZoomPosition:this._unproject(a),startZoom:this.getViewportProps().zoom})}},{key:"zoom",value:function(i){var a=i.pos,o=i.startPos,s=i.scale,u=this.getState(),c=u.startZoom,h=u.startZoomPosition;if(h||(c=this.getViewportProps().zoom,h=this._unproject(o)||this._unproject(a)),!h)return this;var p=this._calculateNewZoom({scale:s,startZoom:c}),v=this.makeViewport(Wm(Wm({},this.getViewportProps()),{},{zoom:p}));return this._getUpdatedState(Wm({zoom:p},v.panByPosition(h,a)))}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}},{key:"zoomIn",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:i})})}},{key:"zoomOut",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2;return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/i})})}},{key:"moveLeft",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50;return this._panFromCenter([-i,0])}},{key:"moveRight",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50;return this._panFromCenter([i,0])}},{key:"moveUp",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50;return this._panFromCenter([0,-i])}},{key:"moveDown",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50;return this._panFromCenter([0,i])}},{key:"rotateLeft",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-i})}},{key:"rotateRight",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:15;return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+i})}},{key:"rotateUp",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-i})}},{key:"rotateDown",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10;return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+i})}},{key:"_unproject",value:function(i){var a=this.makeViewport(this.getViewportProps());return i&&a.unproject(i)}},{key:"_calculateNewZoom",value:function(i){var a=i.scale,o=i.startZoom,s=this.getViewportProps(),u=s.maxZoom,c=s.minZoom;o===void 0&&(o=this.getViewportProps().zoom);var h=o+Math.log2(a);return ya(h,c,u)}},{key:"_panFromCenter",value:function(i){var a=this.getViewportProps(),o=a.width,s=a.height,u=a.target;return this.pan({startPosition:u,pos:[o/2+i[0],s/2+i[1]]})}},{key:"_getUpdatedState",value:function(i){return new this.constructor(Wm(Wm(Wm({makeViewport:this.makeViewport},this.getViewportProps()),this.getState()),i))}},{key:"applyConstraints",value:function(i){var a=i.maxZoom,o=i.minZoom,s=i.zoom,u=i.maxRotationX,c=i.minRotationX,h=i.rotationOrbit;return i.zoom=Array.isArray(s)?[ya(s[0],o,a),ya(s[1],o,a)]:ya(s,o,a),i.rotationX=ya(i.rotationX,c,u),(h<-180||h>180)&&(i.rotationOrbit=zm(h+180,360)-180),i}}]),e}(cA),I2=function(t){Ke(e,t);var r=MV(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"ControllerState",rI),_(jt(n),"transition",{transitionDuration:300,transitionInterpolator:new Wl({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})}),n}return e}(qc);function HAe(t){var r=WAe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function WAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var nI=function(t){Ke(e,t);var r=HAe(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ce(this,e),n=r.call(this,i),n.props.orbitAxis=i.orbitAxis||"Z",n}return ve(e,[{key:"ViewportType",get:function(){return E2}},{key:"ControllerType",get:function(){return I2}}]),e}(Wc);_(nI,"displayName","OrbitView");at();vt();et();Mn();at();vt();et();function IV(t){var r=qAe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function qAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var XAe=function(t){Ke(e,t);var r=IV(e);function e(n){var i;return ce(this,e),i=r.call(this,n),_(jt(i),"zoomAxis",void 0),i.zoomAxis=n.zoomAxis||"all",i}return ve(e,[{key:"_calculateNewZoom",value:function(i){var a=i.scale,o=i.startZoom,s=this.getViewportProps(),u=s.maxZoom,c=s.minZoom;o===void 0&&(o=this.getViewportProps().zoom);var h=Math.log2(a);if(Array.isArray(o)){var p=o,v=Ot(p,2),x=v[0],E=v[1];switch(this.zoomAxis){case"X":x=ya(x+h,c,u);break;case"Y":E=ya(E+h,c,u);break;default:var R=Math.min(x+h,E+h);R<c&&(h+=c-R),R=Math.max(x+h,E+h),R>u&&(h+=u-R),x+=h,E+=h}return[x,E]}return ya(o+h,c,u)}}]),e}(rI),R2=function(t){Ke(e,t);var r=IV(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"ControllerState",XAe),_(jt(n),"transition",{transitionDuration:300,transitionInterpolator:new Wl(["target","zoom"])}),_(jt(n),"dragMode","pan"),n}return ve(e,[{key:"_onPanRotate",value:function(){return!1}}]),e}(qc);function YAe(t){var r=KAe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function KAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var iI=function(t){Ke(e,t);var r=YAe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"ViewportType",get:function(){return C2}},{key:"ControllerType",get:function(){return R2}}]),e}(Wc);_(iI,"displayName","OrthographicView");at();vt();et();et();at();vt();function RV(t){var r=ZAe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function ZAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $Ae=function(t){Ke(e,t);var r=RV(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"applyConstraints",value:function(i){var a=i.maxZoom,o=i.minZoom,s=i.zoom;i.zoom=ya(s,o,a);var u=i.longitude,c=i.latitude;return(u<-180||u>180)&&(i.longitude=zm(u+180,360)-180),i.latitude=ya(c,-89,89),i}}]),e}(MM),L2=function(t){Ke(e,t);var r=RV(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"ControllerState",$Ae),_(jt(n),"transition",{transitionDuration:300,transitionInterpolator:new Wl(["longitude","latitude","zoom"])}),_(jt(n),"dragMode","pan"),n}return ve(e,[{key:"setProps",value:function(i){Yt(me(e.prototype),"setProps",this).call(this,i),this.dragRotate=!1,this.touchRotate=!1}}]),e}(qc);function JAe(t){var r=QAe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function QAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var aI=function(t){Ke(e,t);var r=JAe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"ViewportType",get:function(){return AA}},{key:"ControllerType",get:function(){return L2}}]),e}(Wc);_(aI,"displayName","GlobeView");at();vt();et();var yA=function(){function t(r){ce(this,t),_(this,"opts",void 0),r&&(this.opts=r)}return ve(t,[{key:"equals",value:function(e){return this===e?!0:this.constructor===e.constructor&&Us(this.opts,e.opts,1)}},{key:"getShaders",value:function(e){return null}},{key:"getSubLayerProps",value:function(e){var n=e.constructor,i=n.defaultProps,a={updateTriggers:{}};for(var o in i)if(o in this.props){var s=i[o],u=this.props[o];a[o]=u,s&&s.type==="accessor"&&(a.updateTriggers[o]=this.props.updateTriggers[o],typeof u=="function"&&(a[o]=this.getSubLayerAccessor(u)))}return a}},{key:"initializeState",value:function(e,n){}},{key:"updateState",value:function(e,n){}},{key:"onNeedsRedraw",value:function(e){}},{key:"getNeedsPickingBuffer",value:function(e){return!1}},{key:"draw",value:function(e,n){}},{key:"finalizeState",value:function(e,n){}}],[{key:"componentName",get:function(){return Object.prototype.hasOwnProperty.call(this,"extensionName")?this.extensionName:""}}]),t}();_(yA,"defaultProps",{});_(yA,"extensionName","LayerExtension");at();vt();et();function LV(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function kV(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?LV(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):LV(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function e0e(t){var r=t0e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function t0e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var oI={bearing:0,pitch:0,position:[0,0,0]},r0e={speed:1.2,curve:1.414},BV=function(t){Ke(e,t);var r=e0e(e);function e(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ce(this,e),n=r.call(this,{compare:["longitude","latitude","zoom","bearing","pitch","position"],extract:["width","height","longitude","latitude","zoom","bearing","pitch","position"],required:["width","height","latitude","longitude","zoom"]}),_(jt(n),"opts",void 0),n.opts=kV(kV({},r0e),i),n}return ve(e,[{key:"interpolateProps",value:function(i,a,o){var s=Gw(i,a,o,this.opts);for(var u in oI)s[u]=hu(i[u]||oI[u],a[u]||oI[u],o);return s}},{key:"getDuration",value:function(i,a){var o=a.transitionDuration;return o==="auto"&&(o=SM(i,a,this.opts)),o}}]),e}(uA);at();vt();et();function DV(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=n0e(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function n0e(t,r){if(t){if(typeof t=="string")return FV(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return FV(t,r)}}function FV(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var _A=function(){function t(r){ce(this,t),_(this,"opts",void 0),_(this,"typedArrayManager",void 0),_(this,"indexStarts",[0]),_(this,"vertexStarts",[0]),_(this,"vertexCount",0),_(this,"instanceCount",0),_(this,"attributes",void 0),_(this,"_attributeDefs",void 0),_(this,"data",void 0),_(this,"getGeometry",void 0),_(this,"geometryBuffer",void 0),_(this,"buffers",void 0),_(this,"positionSize",void 0),_(this,"normalize",void 0);var e=r.attributes,n=e===void 0?{}:e;this.typedArrayManager=bf,this.attributes={},this._attributeDefs=n,this.opts=r,this.updateGeometry(r)}return ve(t,[{key:"updateGeometry",value:function(e){Object.assign(this.opts,e);var n=this.opts,i=n.data,a=n.buffers,o=a===void 0?{}:a,s=n.getGeometry,u=n.geometryBuffer,c=n.positionFormat,h=n.dataChanged,p=n.normalize,v=p===void 0?!0:p;if(this.data=i,this.getGeometry=s,this.positionSize=u&&u.size||(c==="XY"?2:3),this.buffers=o,this.normalize=v,u&&(yo(i.startIndices),this.getGeometry=this.getGeometryFromBuffer(u),v||(o.positions=u)),this.geometryBuffer=o.positions,Array.isArray(h)){var x=DV(h),E;try{for(x.s();!(E=x.n()).done;){var R=E.value;this._rebuildGeometry(R)}}catch(D){x.e(D)}finally{x.f()}}else this._rebuildGeometry()}},{key:"updatePartialGeometry",value:function(e){var n=e.startRow,i=e.endRow;this._rebuildGeometry({startRow:n,endRow:i})}},{key:"getGeometryFromBuffer",value:function(e){var n=e.value||e;return ArrayBuffer.isView(n)?p2(n,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}},{key:"_allocate",value:function(e,n){var i=this.attributes,a=this.buffers,o=this._attributeDefs,s=this.typedArrayManager;for(var u in o)if(u in a)s.release(i[u]),i[u]=null;else{var c=o[u];c.copy=n,i[u]=s.allocate(i[u],e,c)}}},{key:"_forEachGeometry",value:function(e,n,i){var a=this.data,o=this.getGeometry,s=xs(a,n,i),u=s.iterable,c=s.objectInfo,h=DV(u),p;try{for(h.s();!(p=h.n()).done;){var v=p.value;c.index++;var x=o?o(v,c):null;e(x,c.index)}}catch(E){h.e(E)}finally{h.f()}}},{key:"_rebuildGeometry",value:function(e){var n=this;if(this.data){var i=this.indexStarts,a=this.vertexStarts,o=this.instanceCount,s=this.data,u=this.geometryBuffer,c=e||{},h=c.startRow,p=h===void 0?0:h,v=c.endRow,x=v===void 0?1/0:v,E={};if(e||(i=[0],a=[0]),this.normalize||!u)this._forEachGeometry(function(J,B){var se=J&&n.normalizeGeometry(J);E[B]=se,a[B+1]=a[B]+(se?n.getGeometrySize(se):0)},p,x),o=a[a.length-1];else if(a=s.startIndices,o=a[s.length]||0,ArrayBuffer.isView(u))o=o||u.length/this.positionSize;else if(u instanceof Jn){var R=u.accessor.stride||this.positionSize*4;o=o||u.byteLength/R}else if(u.buffer){var D=u.stride||this.positionSize*4;o=o||u.buffer.byteLength/D}else if(u.value){var H=u.value,W=u.stride/H.BYTES_PER_ELEMENT||this.positionSize;o=o||H.length/W}this._allocate(o,Boolean(e)),this.indexStarts=i,this.vertexStarts=a,this.instanceCount=o;var $={};this._forEachGeometry(function(J,B){var se=E[B]||J;$.vertexStart=a[B],$.indexStart=i[B];var V=B<a.length-1?a[B+1]:o;$.geometrySize=V-a[B],$.geometryIndex=B,n.updateGeometryAttributes(se,$)},p,x),this.vertexCount=i[i.length-1]}}}]),t}();function sI(t,r){if(t==null)return{};var e={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(r.indexOf(i)>=0)&&(e[i]=t[i]);return e}function qm(t,r){if(t==null)return{};var e=sI(t,r),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(e[n]=t[n])}return e}at();vt();et();et();function NV(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function zV(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?NV(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):NV(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var uI=85.05113;function cI(t,r,e,n){if(e){if(e.userData._googleMap===t)return e;k2(e)}var i={click:null,rightclick:null,dblclick:null,mousemove:null,mouseout:null},a=new Ad(zV(zV({},n),{},{useDevicePixels:n.interleaved?!0:n.useDevicePixels,style:n.interleaved?null:{pointerEvents:"none"},parent:i0e(r,n.style),initialViewState:{longitude:0,latitude:0,zoom:1},controller:!1})),o=function(c){i[c]=t.addListener(c,function(h){return o0e(a,c,h)})};for(var s in i)o(s);return a.userData._googleMap=t,a.userData._eventListeners=i,a}function i0e(t,r){var e=document.createElement("div");if(e.style.position="absolute",Object.assign(e.style,r),"getPanes"in t){var n;(n=t.getPanes())===null||n===void 0||n.overlayLayer.appendChild(e)}else{var i;(i=t.getMap())===null||i===void 0||i.getDiv().appendChild(e)}return e}function k2(t){var r=t.userData._eventListeners;for(var e in r)r[e]&&r[e].remove();t.finalize()}function UV(t,r){var e=jV(t),n=e.width,i=e.height,a=r.getProjection(),o=t.getBounds();if(!o)return{width:n,height:i,left:0,top:0};var s=o.getNorthEast(),u=o.getSouthWest(),c=a.fromLatLngToDivPixel(s),h=a.fromLatLngToDivPixel(u),p=lI(a,n/2,i/2),v=new google.maps.LatLng(0,p[0]),x=a.fromLatLngToContainerPixel(v),E=a.fromLatLngToDivPixel(v);if(!c||!h||!E||!x)return{width:n,height:i,left:0,top:0};var R=Math.round(E.x-x.x),D=E.y-x.y,H=lI(a,n/2,0),W=lI(a,n/2,i),$=p[1],J=p[0];if(Math.abs($)>uI){$=$>0?uI:-uI;var B=new google.maps.LatLng($,J),se=a.fromLatLngToContainerPixel(B);D+=se.y-i/2}D=Math.round(D);var V=new yf(H).sub(W),X=180*V.verticalAngle()/Math.PI;X<0&&(X+=360);var I=t.getHeading()||0,O=t.getZoom()-1,U;if(X===0)U=i?(h.y-c.y)/i:1;else if(X===I){var re=new yf([c.x,c.y]).sub([h.x,h.y]).len(),ee=new yf([n,-i]).len();U=ee?re/ee:1}return O+=Math.log2(U||1),{width:n,height:i,left:R,top:D,zoom:O,bearing:X,pitch:t.getTilt(),latitude:$,longitude:J}}function fI(t,r){var e=jV(t),n=e.width,i=e.height,a=r.getCameraParams(),o=a.center,s=a.heading,u=a.tilt,c=a.zoom,h=25,p=i?n/i:1,v=.75,x=3e14,E=new gn().perspective({fovy:h*Math.PI/180,aspect:p,near:v,far:x}),R=.5*E[5];return{width:n,height:i,viewState:{altitude:R,bearing:s,latitude:o.lat(),longitude:o.lng(),pitch:u,projectionMatrix:E,repeat:!0,zoom:c-1}}}function jV(t){var r=t.getDiv().firstChild;return{width:r.offsetWidth,height:r.offsetHeight}}function lI(t,r,e){var n=new google.maps.Point(r,e),i=t.fromContainerPixelToLatLng(n);return[i.lng(),i.lat()]}function a0e(t,r){if(t.pixel)return t.pixel;var e=r.getViewports()[0].project([t.latLng.lng(),t.latLng.lat()]);return{x:e[0],y:e[1]}}function o0e(t,r,e){if(t.isInitialized){var n={type:r,offsetCenter:a0e(e,t),srcEvent:e};switch(r){case"click":case"rightclick":n.type="click",n.tapCount=1,t._onPointerDown(n),t._onEvent(n);break;case"dblclick":n.type="click",n.tapCount=2,t._onEvent(n);break;case"mousemove":n.type="pointermove",t._onPointerMove(n);break;case"mouseout":n.type="pointerleave",t._onPointerMove(n);break;default:return}}}var s0e=["width","height","left","top"];function GV(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Xm(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?GV(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):GV(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var u0e=function(){return!1},l0e={depthMask:!0,depthTest:!0,blend:!0,blendFunc:[770,771,1,771],blendEquation:32774};function VV(){}var c0e={interleaved:!0},B2=function(){function t(r){ce(this,t),_(this,"props",{}),_(this,"_map",null),_(this,"_deck",null),_(this,"_overlay",null),this.setProps(Xm(Xm({},c0e),r))}return ve(t,[{key:"setMap",value:function(e){var n=this;if(e!==this._map){var i=google.maps.RenderingType,a=i.VECTOR,o=i.UNINITIALIZED;if(this._map){var s;!e&&this._map.getRenderingType()===a&&this.props.interleaved&&this._overlay.requestRedraw(),(s=this._overlay)===null||s===void 0||s.setMap(null),this._map=null}if(e){this._map=e;var u=e.getRenderingType();u!==o?this._createOverlay(e):e.addListener("renderingtype_changed",function(){n._createOverlay(e)})}}}},{key:"setProps",value:function(e){if(Object.assign(this.props,e),this._deck){var n=this._deck.getCanvas();if(e.style&&n!==null&&n!==void 0&&n.parentElement){var i=n.parentElement.style;Object.assign(i,e.style),e.style=null}this._deck.setProps(e)}}},{key:"pickObject",value:function(e){return this._deck&&this._deck.pickObject(e)}},{key:"pickMultipleObjects",value:function(e){return this._deck&&this._deck.pickMultipleObjects(e)}},{key:"pickObjects",value:function(e){return this._deck&&this._deck.pickObjects(e)}},{key:"finalize",value:function(){this.setMap(null),this._deck&&(k2(this._deck),this._deck=null)}},{key:"_createOverlay",value:function(e){var n=this.props.interleaved,i=google.maps.RenderingType,a=i.VECTOR,o=i.UNINITIALIZED,s=e.getRenderingType();if(s!==o){var u=s===a&&google.maps.WebGLOverlayView,c=u?google.maps.WebGLOverlayView:google.maps.OverlayView,h=new c;h instanceof google.maps.WebGLOverlayView?(n?(h.onAdd=VV,h.onContextRestored=this._onContextRestored.bind(this),h.onDraw=this._onDrawVectorInterleaved.bind(this)):(h.onAdd=this._onAdd.bind(this),h.onContextRestored=VV,h.onDraw=this._onDrawVectorOverlay.bind(this)),h.onContextLost=this._onContextLost.bind(this)):(h.onAdd=this._onAdd.bind(this),h.draw=this._onDrawRaster.bind(this)),h.onRemove=this._onRemove.bind(this),this._overlay=h,this._overlay.setMap(e)}}},{key:"_onAdd",value:function(){this._deck=cI(this._map,this._overlay,this._deck,this.props)}},{key:"_onContextRestored",value:function(e){var n=this,i=e.gl;if(!(!this._map||!this._overlay)){var a=function(){n._overlay&&n._overlay.requestRedraw()},o=cI(this._map,this._overlay,this._deck,Xm({gl:i,_customRender:a},this.props));this._deck=o;var s=o.animationLoop;s._renderFrame=function(){var u=i.getParameter(34964);Aa(i,{},function(){s.onRender()}),i.bindBuffer(34962,u)}}}},{key:"_onContextLost",value:function(){this._deck&&(k2(this._deck),this._deck=null)}},{key:"_onRemove",value:function(){var e;(e=this._deck)===null||e===void 0||e.setProps({layerFilter:u0e})}},{key:"_onDrawRaster",value:function(){if(!(!this._deck||!this._map)){var e=this._deck,n=UV(this._map,this._overlay),i=n.width,a=n.height,o=n.left,s=n.top,u=qm(n,s0e),c=e.getCanvas();if(c!=null&&c.parentElement){var h=c.parentElement.style;h.left="".concat(o,"px"),h.top="".concat(s,"px")}var p=1e4;e.setProps({width:i,height:a,viewState:Xm({altitude:p,repeat:!0},u)}),e.redraw()}}},{key:"_onDrawVectorInterleaved",value:function(e){var n=e.gl,i=e.transformer;if(!(!this._deck||!this._map)){var a=this._deck;if(a.setProps(Xm(Xm({},fI(this._map,i)),{},{width:null,height:null})),a.isInitialized){var o=ih(n,36006);a.setProps({_framebuffer:o}),a.needsRedraw({clearRedrawFlags:!0}),Ns(n,{viewport:[0,0,n.canvas.width,n.canvas.height],scissor:[0,0,n.canvas.width,n.canvas.height],stencilFunc:[519,0,255,519,0,255]}),Aa(n,l0e,function(){a._drawLayers("google-vector",{clearCanvas:!1})})}}}},{key:"_onDrawVectorOverlay",value:function(e){var n=e.transformer;if(!(!this._deck||!this._map)){var i=this._deck;i.setProps(Xm({},fI(this._map,n))),i.redraw()}}}]),t}();function HV(t){var r=t.container,e=t.onClick,n=t.onComplete,i=t.getTooltip,a=t.googleMapsKey,o=t.layers,s=t.mapStyle,u=s===void 0?"satellite":s,c=t.initialViewState,h=c===void 0?{latitude:0,longitude:0,zoom:1}:c;if(!a)return xr.warn("No Google Maps API key set")(),null;var p=new B2({layers:o}),v={center:{lat:h.latitude,lng:h.longitude},mapTypeId:u,zoom:h.zoom},x=new window.google.maps.Map(r,v);return p.setMap(x),p}at();vt();var WV={position:"absolute",top:"0px",left:"0px",width:344,padding:"12px 24px",margin:24,overflowX:"hidden",overflowY:"overlay",outline:"none",maxHeight:"94%",boxSizing:"border-box",backgroundColor:"rgb(255, 255, 255)",fontFamily:'"Fira Sans", sans-serif',zIndex:1};var f0e=function(){function t(r){var e=r.container,n=r.props;ce(this,t);var i=n.description,a=document.createElement("div");a.className="deck-json-description-box",Object.assign(a.style,WV),this.el=a;var o=document.createElement("div");o.innerHTML=i,a.appendChild(o),e.append(a)}return ve(t,[{key:"remove",value:function(){this.el.remove(),this.description=null}}],[{key:"stringName",get:function(){return"description"}}]),t}(),qV=f0e;function hI(t,r){var e=document.createElement("div");e.className="deckgl-ui-elements-overlay",e.style.zIndex=1,t.insertAdjacentElement("beforebegin",e);for(var n=[],i=0,a=Object.keys(r);i<a.length;i++){var o=a[i];switch(o){case"description":var s=new qV({container:e,props:r});n.push(s);break;default:break}}return n}var $1={};Tl($1,{AGGREGATION_OPERATION:()=>Po,AmbientLight:()=>Bw,ArcLayer:()=>bA,AttributeManager:()=>yd,BitmapLayer:()=>xA,COORDINATE_SYSTEM:()=>yn,CPUGridLayer:()=>$m,ColumnLayer:()=>gh,CompositeLayer:()=>Go,ContourLayer:()=>AT,Controller:()=>qc,Deck:()=>Ad,DeckRenderer:()=>i2,DirectionalLight:()=>Lm,FirstPersonController:()=>M2,FirstPersonView:()=>tI,FirstPersonViewport:()=>P2,FlyToInterpolator:()=>BV,GPUGridLayer:()=>Qm,GeoJsonLayer:()=>pp,GeohashLayer:()=>ZS,GoogleMapsOverlay:()=>B2,GreatCircleLayer:()=>MT,GridCellLayer:()=>OA,GridLayer:()=>_T,H3ClusterLayer:()=>XT,H3HexagonLayer:()=>sv,HeatmapLayer:()=>xT,HexagonLayer:()=>pT,IconLayer:()=>_d,JSONConfiguration:()=>O0,JSONConverter:()=>eE,Layer:()=>aa,LayerExtension:()=>yA,LayerManager:()=>Qw,LightingEffect:()=>k_,LineLayer:()=>TA,LinearInterpolator:()=>Wl,MVTLayer:()=>KS,MapController:()=>r2,MapView:()=>z_,OPERATION:()=>Pz,OrbitController:()=>I2,OrbitView:()=>nI,OrbitViewport:()=>E2,OrthographicController:()=>R2,OrthographicView:()=>iI,OrthographicViewport:()=>C2,PathLayer:()=>Ah,PointCloudLayer:()=>SA,PointLight:()=>Yw,PolygonLayer:()=>_h,PostProcessEffect:()=>Hj,QuadkeyLayer:()=>LT,S2Layer:()=>RT,ScatterplotLayer:()=>EA,ScenegraphLayer:()=>f0,ScreenGridLayer:()=>hT,SimpleMeshLayer:()=>_p,SolidPolygonLayer:()=>yh,TRANSITION_EVENTS:()=>N_,TerrainLayer:()=>US,Tesselator:()=>_A,TextLayer:()=>BA,Tile3DLayer:()=>RS,TileLayer:()=>yp,TransitionInterpolator:()=>uA,Transport:()=>Pv,TripsLayer:()=>VT,UNIT:()=>Uo,VERSION:()=>Tx,View:()=>Wc,Viewport:()=>Ju,WebMercatorViewport:()=>Vc,_AggregationLayer:()=>Sf,_BinSorter:()=>jA,_CPUAggregator:()=>VA,_CameraLight:()=>zj,_GPUGridAggregator:()=>ll,_GeoCellLayer:()=>Kc,_GlobeController:()=>L2,_GlobeView:()=>aI,_GlobeViewport:()=>AA,_LayersPass:()=>cd,_MultiIconLayer:()=>LA,_PickLayersPass:()=>oA,_SunLight:()=>jj,_TextBackgroundLayer:()=>kA,_Tile2DHeader:()=>x1,_Tileset2D:()=>C1,_WMSLayer:()=>OT,_compareProps:()=>dA,_convertFunctions:()=>M0,_count:()=>b2,_deepEqual:()=>Us,_fillArray:()=>Jw,_flatten:()=>hh,_getURLFromTemplate:()=>Th,_memoize:()=>Uc,_mergeShaders:()=>mA,_parseExpressionString:()=>Cv,_shallowEqualObjects:()=>kQ,assert:()=>yo,createIterable:()=>xs,fp64LowPart:()=>dd,gouraudLighting:()=>dc,log:()=>xr,phongLighting:()=>ip,picking:()=>Wa,project:()=>fd,project32:()=>La,shadow:()=>Nm});at();vt();et();var XV=`#define SHADER_NAME arc-layer-vertex-shader

attribute vec3 positions;
attribute vec4 instanceSourceColors;
attribute vec4 instanceTargetColors;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceTargetPositions64Low;
attribute vec3 instancePickingColors;
attribute float instanceWidths;
attribute float instanceHeights;
attribute float instanceTilts;

uniform bool greatCircle;
uniform bool useShortestPath;
uniform float numSegments;
uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;
varying float isValid;

float paraboloid(float distance, float sourceZ, float targetZ, float ratio) {

  float deltaZ = targetZ - sourceZ;
  float dh = distance * instanceHeights;
  if (dh == 0.0) {
    return sourceZ + deltaZ * ratio;
  }
  float unitZ = deltaZ / dh;
  float p2 = unitZ * unitZ + 1.0;
  float dir = step(deltaZ, 0.0);
  float z0 = mix(sourceZ, targetZ, dir);
  float r = mix(ratio, 1.0 - ratio, dir);
  return sqrt(r * (p2 - r)) * dh + z0;
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (numSegments - 1.0));
}

vec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {
  float distance = length(source.xy - target.xy);
  float z = paraboloid(distance, source.z, target.z, segmentRatio);

  float tiltAngle = radians(instanceTilts);
  vec2 tiltDirection = normalize(target.xy - source.xy);
  vec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);

  return vec3(
    mix(source.xy, target.xy, segmentRatio) + tilt,
    z * cos(tiltAngle)
  );
}
float getAngularDist (vec2 source, vec2 target) {
  vec2 sourceRadians = radians(source);
  vec2 targetRadians = radians(target);
  vec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);
  vec2 shd_sq = sin_half_delta * sin_half_delta;

  float a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;
  return 2.0 * asin(sqrt(a));
}

vec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {
  vec2 lngLat;
  if(abs(angularDist - PI) < 0.001) {
    lngLat = (1.0 - t) * source.xy + t * target.xy;
  } else {
    float a = sin((1.0 - t) * angularDist);
    float b = sin(t * angularDist);
    vec3 p = source3D.yxz * a + target3D.yxz * b;
    lngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));
  }

  float z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);

  return vec3(lngLat, z);
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  float segmentIndex = positions.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));
  float nextSegmentRatio = getSegmentRatio(min(numSegments - 1.0, segmentIndex + 1.0));
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  isValid = 1.0;

  uv = vec2(segmentRatio, positions.y);
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;

  vec4 curr;
  vec4 next;
  vec3 source;
  vec3 target;

  if ((greatCircle || project_uProjectionMode == PROJECTION_MODE_GLOBE) && project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    source = project_globe_(vec3(instanceSourcePositions.xy, 0.0));
    target = project_globe_(vec3(instanceTargetPositions.xy, 0.0));
    float angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);

    vec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);
    vec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);
    vec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);

    if (abs(currPos.x - prevPos.x) > 180.0) {
      indexDir = -1.0;
      isValid = 0.0;
    } else if (abs(currPos.x - nextPos.x) > 180.0) {
      indexDir = 1.0;
      isValid = 0.0;
    }
    nextPos = indexDir < 0.0 ? prevPos : nextPos;
    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;

    if (isValid == 0.0) {
      nextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;
      float t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);
      currPos = mix(currPos, nextPos, t);
      segmentRatio = mix(segmentRatio, nextSegmentRatio, t);
    }

    vec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);
    vec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);
  
    curr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);
    next = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));
  
  } else {
    vec3 source_world = instanceSourcePositions;
    vec3 target_world = instanceTargetPositions;
    if (useShortestPath) {
      source_world.x = mod(source_world.x + 180., 360.0) - 180.;
      target_world.x = mod(target_world.x + 180., 360.0) - 180.;

      float deltaLng = target_world.x - source_world.x;
      if (deltaLng > 180.) target_world.x -= 360.;
      if (deltaLng < -180.) source_world.x -= 360.;
    }
    source = project_position(source_world, instanceSourcePositions64Low);
    target = project_position(target_world, instanceTargetPositions64Low);
    float antiMeridianX = 0.0;

    if (useShortestPath) {
      if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
        antiMeridianX = -(project_uCoordinateOrigin.x + 180.) / 360. * TILE_SIZE;
      }
      float thresholdRatio = (antiMeridianX - source.x) / (target.x - source.x);

      if (prevSegmentRatio <= thresholdRatio && nextSegmentRatio > thresholdRatio) {
        isValid = 0.0;
        indexDir = sign(segmentRatio - thresholdRatio);
        segmentRatio = thresholdRatio;
      }
    }

    nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;
    vec3 currPos = interpolateFlat(source, target, segmentRatio);
    vec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);

    if (useShortestPath) {
      if (nextPos.x < antiMeridianX) {
        currPos.x += TILE_SIZE;
        nextPos.x += TILE_SIZE;
      }
    }

    curr = project_common_position_to_clipspace(vec4(currPos, 1.0));
    next = project_common_position_to_clipspace(vec4(nextPos, 1.0));
    geometry.position = vec4(currPos, 1.0);
  }
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );
  vec3 offset = vec3(
    getExtrusionOffset((next.xy - curr.xy) * indexDir, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  DECKGL_FILTER_GL_POSITION(curr, geometry);
  gl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);

  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);
  vColor = vec4(color.rgb, color.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var YV=`#define SHADER_NAME arc-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;
varying float isValid;

void main(void) {
  if (isValid == 0.0) {
    discard;
  }

  gl_FragColor = vColor;
  geometry.uv = uv;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;function KV(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function ZV(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?KV(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):KV(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function h0e(t){var r=p0e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function p0e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var D2=[0,0,0,255],d0e={getSourcePosition:{type:"accessor",value:function(r){return r.sourcePosition}},getTargetPosition:{type:"accessor",value:function(r){return r.targetPosition}},getSourceColor:{type:"accessor",value:D2},getTargetColor:{type:"accessor",value:D2},getWidth:{type:"accessor",value:1},getHeight:{type:"accessor",value:1},getTilt:{type:"accessor",value:0},greatCircle:!1,numSegments:{type:"number",value:50,min:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}},bA=function(t){Ke(e,t);var r=h0e(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"getBounds",value:function(){var i;return(i=this.getAttributeManager())===null||i===void 0?void 0:i.getBounds(["instanceSourcePositions","instanceTargetPositions"])}},{key:"getShaders",value:function(){return Yt(me(e.prototype),"getShaders",this).call(this,{vs:XV,fs:YV,modules:[La,Wa]})}},{key:"wrapLongitude",get:function(){return!1}},{key:"initializeState",value:function(){var i=this.getAttributeManager();i.addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceSourceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getSourceColor",defaultValue:D2},instanceTargetColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getTargetColor",defaultValue:D2},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1},instanceHeights:{size:1,transition:!0,accessor:"getHeight",defaultValue:1},instanceTilts:{size:1,transition:!0,accessor:"getTilt",defaultValue:0}})}},{key:"updateState",value:function(i){Yt(me(e.prototype),"updateState",this).call(this,i);var a=i.props,o=i.oldProps,s=i.changeFlags;if(s.extensionsChanged||s.propsChanged&&a.numSegments!==o.numSegments){var u,c=this.context.gl;(u=this.state.model)===null||u===void 0||u.delete(),this.state.model=this._getModel(c),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(i){var a=i.uniforms,o=this.props,s=o.widthUnits,u=o.widthScale,c=o.widthMinPixels,h=o.widthMaxPixels,p=o.greatCircle,v=o.wrapLongitude;this.state.model.setUniforms(a).setUniforms({greatCircle:p,widthUnits:Uo[s],widthScale:u,widthMinPixels:c,widthMaxPixels:h,useShortestPath:v}).draw()}},{key:"_getModel",value:function(i){for(var a=this.props,o=a.id,s=a.numSegments,u=[],c=0;c<s;c++)u=u.concat([c,1,0,c,-1,0]);var h=new Ni(i,ZV(ZV({},this.getShaders()),{},{id:o,geometry:new Bi({drawMode:5,attributes:{positions:new Float32Array(u)}}),isInstanced:!0}));return h.setUniforms({numSegments:s}),h}}]),e}(aa);_(bA,"layerName","ArcLayer");_(bA,"defaultProps",d0e);Mn();at();vt();et();var m0e=new Uint16Array([0,2,1,0,3,2]),v0e=new Float32Array([0,1,0,0,1,0,1,1]);function pI(t,r){if(!r)return g0e(t);for(var e=Math.max(Math.abs(t[0][0]-t[3][0]),Math.abs(t[1][0]-t[2][0])),n=Math.max(Math.abs(t[1][1]-t[0][1]),Math.abs(t[2][1]-t[3][1])),i=Math.ceil(e/r)+1,a=Math.ceil(n/r)+1,o=(i-1)*(a-1)*6,s=new Uint32Array(o),u=new Float32Array(i*a*2),c=new Float64Array(i*a*3),h=0,p=0,v=0;v<i;v++)for(var x=v/(i-1),E=0;E<a;E++){var R=E/(a-1),D=A0e(t,x,R);c[h*3+0]=D[0],c[h*3+1]=D[1],c[h*3+2]=D[2]||0,u[h*2+0]=x,u[h*2+1]=1-R,v>0&&E>0&&(s[p++]=h-a,s[p++]=h-a-1,s[p++]=h-1,s[p++]=h-a,s[p++]=h-1,s[p++]=h),h++}return{vertexCount:o,positions:c,indices:s,texCoords:u}}function g0e(t){for(var r=new Float64Array(12),e=0;e<t.length;e++)r[e*3+0]=t[e][0],r[e*3+1]=t[e][1],r[e*3+2]=t[e][2]||0;return{vertexCount:6,positions:r,indices:m0e,texCoords:v0e}}function A0e(t,r,e){return hu(hu(t[0],t[1],e),hu(t[3],t[2],e),r)}var $V=`
#define SHADER_NAME bitmap-layer-vertex-shader

attribute vec2 texCoords;
attribute vec3 positions;
attribute vec3 positions64Low;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float coordinateConversion;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;
  } else if (coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`;var y0e=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,JV=`
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float desaturate;
uniform vec4 transparentColor;
uniform vec3 tintColor;
uniform float opacity;

uniform float coordinateConversion;
uniform vec4 bounds;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  if (transparentColor.a == 0.0) {
    return vec4(color, alpha);
  }
  float blendedAlpha = alpha + transparentColor.a * (1.0 - alpha);
  float highLightRatio = alpha / blendedAlpha;
  vec3 blendedRGB = mix(transparentColor.rgb, color, highLightRatio);
  return vec4(blendedRGB, blendedAlpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),
    (pos.y - bounds[3]) / (bounds[1] - bounds[3])
  );
}

`.concat(y0e,`

void main(void) {
  vec2 uv = vTexCoord;
  if (coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture2D(bitmapTexture, uv);

  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);

  if (picking_uActive && !picking_uAttribute) {
    // Since instance information is not used, we can use picking color for pixel index
    gl_FragColor.rgb = packUVsIntoRGB(uv);
  }
}
`);function QV(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Z_(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?QV(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):QV(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function _0e(t){var r=b0e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function b0e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var x0e={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:yn.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]},textureParameters:{type:"object",ignore:!0}},xA=function(t){Ke(e,t);var r=_0e(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"getShaders",value:function(){return Yt(me(e.prototype),"getShaders",this).call(this,{vs:$V,fs:JV,modules:[La,Wa]})}},{key:"initializeState",value:function(){var i=this,a=this.getAttributeManager();a.remove(["instancePickingColors"]);var o=!0;a.add({indices:{size:1,isIndexed:!0,update:function(u){return u.value=i.state.mesh.indices},noAlloc:o},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:function(u){return u.value=i.state.mesh.positions},noAlloc:o},texCoords:{size:2,update:function(u){return u.value=i.state.mesh.texCoords},noAlloc:o}})}},{key:"updateState",value:function(i){var a=i.props,o=i.oldProps,s=i.changeFlags,u=this.getAttributeManager();if(s.extensionsChanged){var c,h=this.context.gl;(c=this.state.model)===null||c===void 0||c.delete(),this.state.model=this._getModel(h),u.invalidateAll()}if(a.bounds!==o.bounds){var p=this.state.mesh,v=this._createMesh();this.state.model.setVertexCount(v.vertexCount);for(var x in v)p&&p[x]!==v[x]&&u.invalidate(x);this.setState(Z_({mesh:v},this._getCoordinateUniforms()))}else a._imageCoordinateSystem!==o._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}},{key:"getPickingInfo",value:function(i){var a=this.props.image,o=i.info;if(!o.color||!a)return o.bitmap=null,o;var s=a,u=s.width,c=s.height;o.index=0;var h=w0e(o.color),p=[Math.floor(h[0]*u),Math.floor(h[1]*c)];return o.bitmap={size:{width:u,height:c},uv:h,pixel:p},o}},{key:"disablePickingIndex",value:function(){this.setState({disablePicking:!0})}},{key:"restorePickingColors",value:function(){this.setState({disablePicking:!1})}},{key:"_updateAutoHighlight",value:function(i){Yt(me(e.prototype),"_updateAutoHighlight",this).call(this,Z_(Z_({},i),{},{color:this.encodePickingColor(0)}))}},{key:"_createMesh",value:function(){var i=this.props.bounds,a=i;return e9(i)&&(a=[[i[0],i[1]],[i[0],i[3]],[i[2],i[3]],[i[2],i[1]]]),pI(a,this.context.viewport.resolution)}},{key:"_getModel",value:function(i){return i?new Ni(i,Z_(Z_({},this.getShaders()),{},{id:this.props.id,geometry:new Bi({drawMode:4,vertexCount:6}),isInstanced:!1})):null}},{key:"draw",value:function(i){var a=i.uniforms,o=i.moduleParameters,s=this.state,u=s.model,c=s.coordinateConversion,h=s.bounds,p=s.disablePicking,v=this.props,x=v.image,E=v.desaturate,R=v.transparentColor,D=v.tintColor;o.pickingActive&&p||x&&u&&u.setUniforms(a).setUniforms({bitmapTexture:x,desaturate:E,transparentColor:R.map(function(H){return H/255}),tintColor:D.slice(0,3).map(function(H){return H/255}),coordinateConversion:c,bounds:h}).draw()}},{key:"_getCoordinateUniforms",value:function(){var i=yn.LNGLAT,a=yn.CARTESIAN,o=yn.DEFAULT,s=this.props._imageCoordinateSystem;if(s!==o){var u=this.props.bounds;if(!e9(u))throw new Error("_imageCoordinateSystem only supports rectangular bounds");var c=this.context.viewport.resolution?i:a;if(s=s===i?i:a,s===i&&c===a)return{coordinateConversion:-1,bounds:u};if(s===a&&c===i){var h=ss([u[0],u[1]]),p=ss([u[2],u[3]]);return{coordinateConversion:1,bounds:[h[0],h[1],p[0],p[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}]),e}(aa);_(xA,"layerName","BitmapLayer");_(xA,"defaultProps",x0e);function w0e(t){var r=Ot(t,3),e=r[0],n=r[1],i=r[2],a=(i&240)/256,o=(i&15)/16;return[(e+o)/256,(n+a)/256]}function e9(t){return Number.isFinite(t[0])}at();vt();et();var t9=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`;var r9=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;at();vt();et();var wA;function u9(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=T0e(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function T0e(t,r){if(t){if(typeof t=="string")return n9(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return n9(t,r)}}function n9(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function i9(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function F2(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?i9(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i9(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var S0e=1024,E0e=4,a9=function(){},o9=(wA={},_(wA,10241,9987),_(wA,10240,9729),_(wA,10242,33071),_(wA,10243,33071),wA);function C0e(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function P0e(t,r,e,n){var i=Math.min(e/r.width,n/r.height),a=Math.floor(r.width*i),o=Math.floor(r.height*i);return i===1?{data:r,width:a,height:o}:(t.canvas.height=o,t.canvas.width=a,t.clearRect(0,0,a,o),t.drawImage(r,0,0,r.width,r.height,0,0,a,o),{data:t.canvas,width:a,height:o})}function $_(t){return t&&(t.id||t.url)}function O0e(t,r,e,n){var i=t.width,a=t.height,o=new la(t.gl,{width:r,height:e,parameters:n});return Bg(t,o,{targetY:0,width:i,height:a}),t.delete(),o}function s9(t,r,e){for(var n=0;n<r.length;n++){var i=r[n],a=i.icon,o=i.xOffset,s=$_(a);t[s]=F2(F2({},a),{},{x:o,y:e})}}function M0e(t){for(var r=t.icons,e=t.buffer,n=t.mapping,i=n===void 0?{}:n,a=t.xOffset,o=a===void 0?0:a,s=t.yOffset,u=s===void 0?0:s,c=t.rowHeight,h=c===void 0?0:c,p=t.canvasWidth,v=[],x=0;x<r.length;x++){var E=r[x],R=$_(E);if(!i[R]){var D=E.height,H=E.width;o+H+e>p&&(s9(i,v,u),o=0,u=h+u+e,h=0,v=[]),v.push({icon:E,xOffset:o}),o=o+H+e,h=Math.max(h,D)}}return v.length>0&&s9(i,v,u),{mapping:i,rowHeight:h,xOffset:o,yOffset:u,canvasWidth:p,canvasHeight:C0e(h+u+e)}}function I0e(t,r,e){if(!t||!r)return null;e=e||{};var n={},i=xs(t),a=i.iterable,o=i.objectInfo,s=u9(a),u;try{for(s.s();!(u=s.n()).done;){var c=u.value;o.index++;var h=r(c,o),p=$_(h);if(!h)throw new Error("Icon is missing.");if(!h.url)throw new Error("Icon url is missing.");!n[p]&&(!e[p]||h.url!==e[p].url)&&(n[p]=F2(F2({},h),{},{source:c,sourceIndex:o.index}))}}catch(v){s.e(v)}finally{s.f()}return n}var l9=function(){function t(r,e){var n=e.onUpdate,i=n===void 0?a9:n,a=e.onError,o=a===void 0?a9:a;ce(this,t),_(this,"gl",void 0),_(this,"onUpdate",void 0),_(this,"onError",void 0),_(this,"_loadOptions",null),_(this,"_texture",null),_(this,"_externalTexture",null),_(this,"_mapping",{}),_(this,"_textureParameters",null),_(this,"_pendingCount",0),_(this,"_autoPacking",!1),_(this,"_xOffset",0),_(this,"_yOffset",0),_(this,"_rowHeight",0),_(this,"_buffer",E0e),_(this,"_canvasWidth",S0e),_(this,"_canvasHeight",0),_(this,"_canvas",null),this.gl=r,this.onUpdate=i,this.onError=o}return ve(t,[{key:"finalize",value:function(){var e;(e=this._texture)===null||e===void 0||e.delete()}},{key:"getTexture",value:function(){return this._texture||this._externalTexture}},{key:"getIconMapping",value:function(e){var n=this._autoPacking?$_(e):e;return this._mapping[n]||{}}},{key:"setProps",value:function(e){var n=e.loadOptions,i=e.autoPacking,a=e.iconAtlas,o=e.iconMapping,s=e.textureParameters;if(n&&(this._loadOptions=n),i!==void 0&&(this._autoPacking=i),o&&(this._mapping=o),a){var u;(u=this._texture)===null||u===void 0||u.delete(),this._texture=null,this._externalTexture=a}s&&(this._textureParameters=s)}},{key:"isLoaded",get:function(){return this._pendingCount===0}},{key:"packIcons",value:function(e,n){if(!(!this._autoPacking||typeof document>"u")){var i=Object.values(I0e(e,n,this._mapping)||{});if(i.length>0){var a=M0e({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset}),o=a.mapping,s=a.xOffset,u=a.yOffset,c=a.rowHeight,h=a.canvasHeight;this._rowHeight=c,this._mapping=o,this._xOffset=s,this._yOffset=u,this._canvasHeight=h,this._texture||(this._texture=new la(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||o9})),this._texture.height!==this._canvasHeight&&(this._texture=O0e(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||o9)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}}},{key:"_loadIcons",value:function(e){var n=this,i=this._canvas.getContext("2d",{willReadFrequently:!0}),a=u9(e),o;try{var s=function(){var c=o.value;n._pendingCount++,Ks(c.url,n._loadOptions).then(function(h){var p=$_(c),v=n._mapping[p],x=v.x,E=v.y,R=v.width,D=v.height,H=P0e(i,h,R,D),W=H.data,$=H.width,J=H.height;n._texture.setSubImageData({data:W,x:x+(R-$)/2,y:E+(D-J)/2,width:$,height:J}),v.width=$,v.height=J,n._texture.generateMipmap(),n.onUpdate()}).catch(function(h){n.onError({url:c.url,source:c.source,sourceIndex:c.sourceIndex,loadOptions:n._loadOptions,error:h})}).finally(function(){n._pendingCount--})};for(a.s();!(o=a.n()).done;)s()}catch(u){a.e(u)}finally{a.f()}}}]),t}();function c9(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function f9(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?c9(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):c9(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function R0e(t){var r=L0e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function L0e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var h9=[0,0,0,255],k0e={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:function(r){return r.position}},getIcon:{type:"accessor",value:function(r){return r.icon}},getColor:{type:"accessor",value:h9},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}},_d=function(t){Ke(e,t);var r=R0e(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"getShaders",value:function(){return Yt(me(e.prototype),"getShaders",this).call(this,{vs:t9,fs:r9,modules:[La,Wa]})}},{key:"initializeState",value:function(){this.state={iconManager:new l9(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})};var i=this.getAttributeManager();i.addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:h9},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}},{key:"updateState",value:function(i){Yt(me(e.prototype),"updateState",this).call(this,i);var a=i.props,o=i.oldProps,s=i.changeFlags,u=this.getAttributeManager(),c=a.iconAtlas,h=a.iconMapping,p=a.data,v=a.getIcon,x=a.textureParameters,E=this.state.iconManager,R=c||this.internalState.isAsyncPropLoading("iconAtlas");if(E.setProps({loadOptions:a.loadOptions,autoPacking:!R,iconAtlas:c,iconMapping:R?h:null,textureParameters:x}),R?o.iconMapping!==a.iconMapping&&u.invalidate("getIcon"):(s.dataChanged||s.updateTriggersChanged&&(s.updateTriggersChanged.all||s.updateTriggersChanged.getIcon))&&E.packIcons(p,v),s.extensionsChanged){var D,H=this.context.gl;(D=this.state.model)===null||D===void 0||D.delete(),this.state.model=this._getModel(H),u.invalidateAll()}}},{key:"isLoaded",get:function(){return Yt(me(e.prototype),"isLoaded",this)&&this.state.iconManager.isLoaded}},{key:"finalizeState",value:function(i){Yt(me(e.prototype),"finalizeState",this).call(this,i),this.state.iconManager.finalize()}},{key:"draw",value:function(i){var a=i.uniforms,o=this.props,s=o.sizeScale,u=o.sizeMinPixels,c=o.sizeMaxPixels,h=o.sizeUnits,p=o.billboard,v=o.alphaCutoff,x=this.state.iconManager,E=x.getTexture();E&&this.state.model.setUniforms(a).setUniforms({iconsTexture:E,iconsTextureDim:[E.width,E.height],sizeUnits:Uo[h],sizeScale:s,sizeMinPixels:u,sizeMaxPixels:c,billboard:p,alphaCutoff:v}).draw()}},{key:"_getModel",value:function(i){var a=[-1,-1,-1,1,1,1,1,-1];return new Ni(i,f9(f9({},this.getShaders()),{},{id:this.props.id,geometry:new Bi({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(a)}}}),isInstanced:!0}))}},{key:"_onUpdate",value:function(){this.setNeedsRedraw()}},{key:"_onError",value:function(i){var a,o=(a=this.getCurrentLayer())===null||a===void 0?void 0:a.props.onIconError;o?o(i):xr.error(i.error.message)()}},{key:"getInstanceOffset",value:function(i){var a=this.state.iconManager.getIconMapping(i),o=a.width,s=a.height,u=a.anchorX,c=u===void 0?o/2:u,h=a.anchorY,p=h===void 0?s/2:h;return[o/2-c,s/2-p]}},{key:"getInstanceColorMode",value:function(i){var a=this.state.iconManager.getIconMapping(i);return a.mask?1:0}},{key:"getInstanceIconFrame",value:function(i){var a=this.state.iconManager.getIconMapping(i),o=a.x,s=a.y,u=a.width,c=a.height;return[o,s,u,c]}}]),e}(aa);_(_d,"defaultProps",k0e);_(_d,"layerName","IconLayer");at();vt();et();var p9=`#define SHADER_NAME line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;

uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

vec3 splitLine(vec3 a, vec3 b, float x) {
  float t = (x - a.x) / (b.x - a.x);
  return vec3(x, mix(a.yz, b.yz, t));
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  vec3 source_world = instanceSourcePositions;
  vec3 target_world = instanceTargetPositions;
  vec3 source_world_64low = instanceSourcePositions64Low;
  vec3 target_world_64low = instanceTargetPositions64Low;

  if (useShortestPath > 0.5 || useShortestPath < -0.5) {
    source_world.x = mod(source_world.x + 180., 360.0) - 180.;
    target_world.x = mod(target_world.x + 180., 360.0) - 180.;
    float deltaLng = target_world.x - source_world.x;

    if (deltaLng * useShortestPath > 180.) {
      source_world.x += 360. * useShortestPath;
      source_world = splitLine(source_world, target_world, 180. * useShortestPath);
      source_world_64low = vec3(0.0);
    } else if (deltaLng * useShortestPath < -180.) {
      target_world.x += 360. * useShortestPath;
      target_world = splitLine(source_world, target_world, 180. * useShortestPath);
      target_world_64low = vec3(0.0);
    } else if (useShortestPath < 0.) {
      gl_Position = vec4(0.);
      return;
    }
  }
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  DECKGL_FILTER_GL_POSITION(p, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var d9=`#define SHADER_NAME line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;function m9(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function v9(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?m9(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):m9(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function B0e(t){var r=D0e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function D0e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var F0e=[0,0,0,255],N0e={getSourcePosition:{type:"accessor",value:function(r){return r.sourcePosition}},getTargetPosition:{type:"accessor",value:function(r){return r.targetPosition}},getColor:{type:"accessor",value:F0e},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}},TA=function(t){Ke(e,t);var r=B0e(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"getBounds",value:function(){var i;return(i=this.getAttributeManager())===null||i===void 0?void 0:i.getBounds(["instanceSourcePositions","instanceTargetPositions"])}},{key:"getShaders",value:function(){return Yt(me(e.prototype),"getShaders",this).call(this,{vs:p9,fs:d9,modules:[La,Wa]})}},{key:"wrapLongitude",get:function(){return!1}},{key:"initializeState",value:function(){var i=this.getAttributeManager();i.addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}},{key:"updateState",value:function(i){if(Yt(me(e.prototype),"updateState",this).call(this,i),i.changeFlags.extensionsChanged){var a,o=this.context.gl;(a=this.state.model)===null||a===void 0||a.delete(),this.state.model=this._getModel(o),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(i){var a=i.uniforms,o=this.props,s=o.widthUnits,u=o.widthScale,c=o.widthMinPixels,h=o.widthMaxPixels,p=o.wrapLongitude;this.state.model.setUniforms(a).setUniforms({widthUnits:Uo[s],widthScale:u,widthMinPixels:c,widthMaxPixels:h,useShortestPath:p?1:0}).draw(),p&&this.state.model.setUniforms({useShortestPath:-1}).draw()}},{key:"_getModel",value:function(i){var a=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new Ni(i,v9(v9({},this.getShaders()),{},{id:this.props.id,geometry:new Bi({drawMode:5,attributes:{positions:new Float32Array(a)}}),isInstanced:!0}))}}]),e}(aa);_(TA,"layerName","LineLayer");_(TA,"defaultProps",N0e);at();vt();et();var g9=`#define SHADER_NAME point-cloud-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceNormals;
attribute vec4 instanceColors;
attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusPixels;
uniform int sizeUnits;

varying vec4 vColor;
varying vec2 unitPosition;

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.normal = project_normal(instanceNormals);
  unitPosition = positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;
  vec3 offset = vec3(positions.xy * project_size_to_pixel(radiusPixels, sizeUnits), 0.0);
  DECKGL_FILTER_SIZE(offset, geometry);

  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);
  vColor = vec4(lightColor, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var A9=`#define SHADER_NAME point-cloud-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 unitPosition;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition);

  if (distToCenter > 1.0) {
    discard;
  }

  gl_FragColor = vColor;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;function y9(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function _9(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?y9(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):y9(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function z0e(t){var r=U0e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function U0e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var b9=[0,0,0,255],x9=[0,0,1],j0e={sizeUnits:"pixels",pointSize:{type:"number",min:0,value:10},getPosition:{type:"accessor",value:function(r){return r.position}},getNormal:{type:"accessor",value:x9},getColor:{type:"accessor",value:b9},material:!0,radiusPixels:{deprecatedFor:"pointSize"}};function G0e(t){var r=t.header,e=t.attributes;!r||!e||(t.length=r.vertexCount,e.POSITION&&(e.instancePositions=e.POSITION),e.NORMAL&&(e.instanceNormals=e.NORMAL),e.COLOR_0&&(e.instanceColors=e.COLOR_0))}var SA=function(t){Ke(e,t);var r=z0e(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"getShaders",value:function(){return Yt(me(e.prototype),"getShaders",this).call(this,{vs:g9,fs:A9,modules:[La,dc,Wa]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:x9},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:b9}})}},{key:"updateState",value:function(i){var a=i.changeFlags,o=i.props;if(Yt(me(e.prototype),"updateState",this).call(this,i),a.extensionsChanged){var s,u=this.context.gl;(s=this.state.model)===null||s===void 0||s.delete(),this.state.model=this._getModel(u),this.getAttributeManager().invalidateAll()}a.dataChanged&&G0e(o.data)}},{key:"draw",value:function(i){var a=i.uniforms,o=this.props,s=o.pointSize,u=o.sizeUnits;this.state.model.setUniforms(a).setUniforms({sizeUnits:Uo[u],radiusPixels:s}).draw()}},{key:"_getModel",value:function(i){for(var a=[],o=0;o<3;o++){var s=o/3*Math.PI*2;a.push(Math.cos(s)*2,Math.sin(s)*2,0)}return new Ni(i,_9(_9({},this.getShaders()),{},{id:this.props.id,geometry:new Bi({drawMode:4,attributes:{positions:new Float32Array(a)}}),isInstanced:!0}))}}]),e}(aa);_(SA,"layerName","PointCloudLayer");_(SA,"defaultProps",j0e);at();vt();et();var w9=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`;var T9=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (!filled) {
    discard;
  } else {
    gl_FragColor = vFillColor;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;function S9(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function E9(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?S9(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):S9(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function V0e(t){var r=H0e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function H0e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var C9=[0,0,0,255],W0e={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:function(r){return r.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:C9},getLineColor:{type:"accessor",value:C9},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},EA=function(t){Ke(e,t);var r=V0e(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"getShaders",value:function(){return Yt(me(e.prototype),"getShaders",this).call(this,{vs:w9,fs:T9,modules:[La,Wa]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function(i){if(Yt(me(e.prototype),"updateState",this).call(this,i),i.changeFlags.extensionsChanged){var a,o=this.context.gl;(a=this.state.model)===null||a===void 0||a.delete(),this.state.model=this._getModel(o),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(i){var a=i.uniforms,o=this.props,s=o.radiusUnits,u=o.radiusScale,c=o.radiusMinPixels,h=o.radiusMaxPixels,p=o.stroked,v=o.filled,x=o.billboard,E=o.antialiasing,R=o.lineWidthUnits,D=o.lineWidthScale,H=o.lineWidthMinPixels,W=o.lineWidthMaxPixels;this.state.model.setUniforms(a).setUniforms({stroked:p?1:0,filled:v,billboard:x,antialiasing:E,radiusUnits:Uo[s],radiusScale:u,radiusMinPixels:c,radiusMaxPixels:h,lineWidthUnits:Uo[R],lineWidthScale:D,lineWidthMinPixels:H,lineWidthMaxPixels:W}).draw()}},{key:"_getModel",value:function(i){var a=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new Ni(i,E9(E9({},this.getShaders()),{},{id:this.props.id,geometry:new Bi({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(a)}}}),isInstanced:!0}))}}]),e}(aa);_(EA,"defaultProps",W0e);_(EA,"layerName","ScatterplotLayer");at();vt();et();et();at();at();vt();et();var CA={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function bd(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=P9(t,e);return n!==r?(q0e(t,e),!0):!1}function P9(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Math.sign(hp(t,r))}function hp(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r.start,n=e===void 0?0:e,i=r.end,a=i===void 0?t.length:i,o=r.size||2,s=0,u=n,c=a-o;u<a;u+=o)s+=(t[u]-t[c])*(t[u+1]+t[c+1]),c=u;return s/2}function dI(t,r){for(var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=e.start,i=n===void 0?0:n,a=e.end,o=a===void 0?t.length:a,s=e.size,u=s===void 0?2:s,c=e.isClosed,h=(o-i)/u,p=0;p<h-1;++p)r(t[i+p*u],t[i+p*u+1],t[i+(p+1)*u],t[i+(p+1)*u+1],p,p+1);var v=i+(h-1)*u,x=c||Ao(t[i],t[v])&&Ao(t[i+1],t[v+1]);x||r(t[v],t[v+1],t[i],t[i+1],h-1,0)}function q0e(t,r){for(var e=r.start,n=e===void 0?0:e,i=r.end,a=i===void 0?t.length:i,o=r.size,s=o===void 0?2:o,u=(a-n)/s,c=Math.floor(u/2),h=0;h<c;++h)for(var p=n+h*s,v=n+(u-1-h)*s,x=0;x<s;++x){var E=t[p+x];t[p+x]=t[v+x],t[v+x]=E}}function O9(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=X0e(t,e);return n!==r?(t.reverse(),!0):!1}function X0e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Math.sign(mI(t,r))}function mI(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r.start,n=e===void 0?0:e,i=r.end,a=i===void 0?t.length:i,o=0,s=n,u=a-1;s<a;++s)o+=(t[s][0]-t[u][0])*(t[s][1]+t[u][1]),u=s;return o/2}function M9(t,r){for(var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=e.start,i=n===void 0?0:n,a=e.end,o=a===void 0?t.length:a,s=e.isClosed,u=i;u<o-1;++u)r(t[u],t[u+1],u,u+1);var c=s||Ao(t[o-1],t[0]);c||r(t[o-1],t[0],o-1,0)}var I9=function(){function t(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ce(this,t),_(this,"points",void 0),_(this,"isFlatArray",void 0),_(this,"options",void 0),this.points=r,this.isFlatArray=!Ml(r[0]),this.options={start:e.start||0,end:e.end||r.length,size:e.size||2,isClosed:e.isClosed},Object.freeze(this)}return ve(t,[{key:"getSignedArea",value:function(){return this.isFlatArray?hp(this.points,this.options):mI(this.points,this.options)}},{key:"getArea",value:function(){return Math.abs(this.getSignedArea())}},{key:"getWindingDirection",value:function(){return Math.sign(this.getSignedArea())}},{key:"forEachSegment",value:function(e){this.isFlatArray?dI(this.points,function(n,i,a,o,s,u){e([n,i],[a,o],s,u)},this.options):M9(this.points,e,this.options)}},{key:"modifyWindingDirection",value:function(e){return this.isFlatArray?bd(this.points,e,this.options):O9(this.points,e,this.options)}}]),t}();function AI(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2,n=arguments.length>3?arguments[3]:void 0,i=r&&r.length,a=i?r[0]*e:t.length,o=L9(t,0,a,e,!0,n&&n[0]),s=[];if(!o||o.next===o.prev)return s;var u,c,h,p,v,x,E;if(i&&(o=J0e(t,r,o,e,n)),t.length>80*e){p=c=t[0],v=h=t[1];for(var R=e;R<a;R+=e)x=t[R],E=t[R+1],x<p&&(p=x),E<v&&(v=E),x>c&&(c=x),E>h&&(h=E);u=Math.max(c-p,h-v),u=u!==0?1/u:0}return J_(o,s,e,p,v,u),s}function L9(t,r,e,n,i,a){var o,s;if(a===void 0&&(a=hp(t,{start:r,end:e,size:n})),i===a<0)for(o=r;o<e;o+=n)s=R9(o,t[o],t[o+1],s);else for(o=e-n;o>=r;o-=n)s=R9(o,t[o],t[o+1],s);return s&&U2(s,s.next)&&(e1(s),s=s.next),s}function xd(t,r){if(!t)return t;r||(r=t);var e=t,n;do if(n=!1,!e.steiner&&(U2(e,e.next)||ls(e.prev,e,e.next)===0)){if(e1(e),e=r=e.prev,e===e.next)break;n=!0}else e=e.next;while(n||e!==r);return r}function J_(t,r,e,n,i,a,o){if(t){!o&&a&&nye(t,n,i,a);for(var s=t,u,c;t.prev!==t.next;){if(u=t.prev,c=t.next,a?K0e(t,n,i,a):Y0e(t)){r.push(u.i/e),r.push(t.i/e),r.push(c.i/e),e1(t),t=c.next,s=c.next;continue}if(t=c,t===s){o?o===1?(t=Z0e(xd(t),r,e),J_(t,r,e,n,i,a,2)):o===2&&$0e(t,r,e,n,i,a):J_(xd(t),r,e,n,i,a,1);break}}}}function Y0e(t){var r=t.prev,e=t,n=t.next;if(ls(r,e,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(PA(r.x,r.y,e.x,e.y,n.x,n.y,i.x,i.y)&&ls(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function K0e(t,r,e,n){var i=t.prev,a=t,o=t.next;if(ls(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,c=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,h=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,p=vI(s,u,r,e,n),v=vI(c,h,r,e,n),x=t.prevZ,E=t.nextZ;x&&x.z>=p&&E&&E.z<=v;){if(x!==t.prev&&x!==t.next&&PA(i.x,i.y,a.x,a.y,o.x,o.y,x.x,x.y)&&ls(x.prev,x,x.next)>=0||(x=x.prevZ,E!==t.prev&&E!==t.next&&PA(i.x,i.y,a.x,a.y,o.x,o.y,E.x,E.y)&&ls(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;x&&x.z>=p;){if(x!==t.prev&&x!==t.next&&PA(i.x,i.y,a.x,a.y,o.x,o.y,x.x,x.y)&&ls(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;E&&E.z<=v;){if(E!==t.prev&&E!==t.next&&PA(i.x,i.y,a.x,a.y,o.x,o.y,E.x,E.y)&&ls(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function Z0e(t,r,e){var n=t;do{var i=n.prev,a=n.next.next;!U2(i,a)&&k9(i,n,n.next,a)&&Q_(i,a)&&Q_(a,i)&&(r.push(i.i/e),r.push(n.i/e),r.push(a.i/e),e1(n),e1(n.next),n=t=a),n=n.next}while(n!==t);return xd(n)}function $0e(t,r,e,n,i,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&oye(o,s)){var u=B9(o,s);o=xd(o,o.next),u=xd(u,u.next),J_(o,r,e,n,i,a),J_(u,r,e,n,i,a);return}s=s.next}o=o.next}while(o!==t)}function J0e(t,r,e,n,i){var a=[],o,s,u,c,h;for(o=0,s=r.length;o<s;o++)u=r[o]*n,c=o<s-1?r[o+1]*n:t.length,h=L9(t,u,c,n,!1,i&&i[o+1]),h===h.next&&(h.steiner=!0),a.push(aye(h));for(a.sort(Q0e),o=0;o<a.length;o++)eye(a[o],e),e=xd(e,e.next);return e}function Q0e(t,r){return t.x-r.x}function eye(t,r){if(r=tye(t,r),r){var e=B9(r,t);xd(r,r.next),xd(e,e.next)}}function tye(t,r){var e=r,n=t.x,i=t.y,a=-1/0,o;do{if(i<=e.y&&i>=e.next.y&&e.next.y!==e.y){var s=e.x+(i-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(s<=n&&s>a){if(a=s,s===n){if(i===e.y)return e;if(i===e.next.y)return e.next}o=e.x<e.next.x?e:e.next}}e=e.next}while(e!==r);if(!o)return null;if(n===a)return o;var u=o,c=o.x,h=o.y,p=1/0,v;e=o;do n>=e.x&&e.x>=c&&n!==e.x&&PA(i<h?n:a,i,c,h,i<h?a:n,i,e.x,e.y)&&(v=Math.abs(i-e.y)/(n-e.x),Q_(e,t)&&(v<p||v===p&&(e.x>o.x||e.x===o.x&&rye(o,e)))&&(o=e,p=v)),e=e.next;while(e!==u);return o}function rye(t,r){return ls(t.prev,t,r.prev)<0&&ls(r.next,t,t.next)<0}function nye(t,r,e,n){var i=t;do i.z===null&&(i.z=vI(i.x,i.y,r,e,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,iye(i)}function iye(t){var r,e,n=1,i,a,o,s,u,c;do{for(a=t,t=null,c=null,i=0;a;){for(i++,s=a,o=0,e=0;e<n&&(o++,s=s.nextZ,!!s);e++);for(u=n;o>0||u>0&&s;)o!==0&&(u===0||!s||a.z<=s.z)?(r=a,a=a.nextZ,o--):(r=s,s=s.nextZ,u--),c?c.nextZ=r:t=r,r.prevZ=c,c=r;a=s}c.nextZ=null,n*=2}while(i>1);return t}function vI(t,r,e,n,i){return t=32767*(t-e)*i,r=32767*(r-n)*i,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t|r<<1}function aye(t){var r=t,e=t;do(r.x<e.x||r.x===e.x&&r.y<e.y)&&(e=r),r=r.next;while(r!==t);return e}function PA(t,r,e,n,i,a,o,s){return(i-o)*(r-s)-(t-o)*(a-s)>=0&&(t-o)*(n-s)-(e-o)*(r-s)>=0&&(e-o)*(a-s)-(i-o)*(n-s)>=0}function oye(t,r){return t.next.i!==r.i&&t.prev.i!==r.i&&!sye(t,r)&&(Q_(t,r)&&Q_(r,t)&&uye(t,r)&&(ls(t.prev,t,r.prev)||ls(t,r.prev,r))||U2(t,r)&&ls(t.prev,t,t.next)>0&&ls(r.prev,r,r.next)>0)}function ls(t,r,e){return(r.y-t.y)*(e.x-r.x)-(r.x-t.x)*(e.y-r.y)}function U2(t,r){return t.x===r.x&&t.y===r.y}function k9(t,r,e,n){var i=z2(ls(t,r,e)),a=z2(ls(t,r,n)),o=z2(ls(e,n,t)),s=z2(ls(e,n,r));return!!(i!==a&&o!==s||i===0&&N2(t,e,r)||a===0&&N2(t,n,r)||o===0&&N2(e,t,n)||s===0&&N2(e,r,n))}function N2(t,r,e){return r.x<=Math.max(t.x,e.x)&&r.x>=Math.min(t.x,e.x)&&r.y<=Math.max(t.y,e.y)&&r.y>=Math.min(t.y,e.y)}function z2(t){return t>0?1:t<0?-1:0}function sye(t,r){var e=t;do{if(e.i!==t.i&&e.next.i!==t.i&&e.i!==r.i&&e.next.i!==r.i&&k9(e,e.next,t,r))return!0;e=e.next}while(e!==t);return!1}function Q_(t,r){return ls(t.prev,t,t.next)<0?ls(t,r,t.next)>=0&&ls(t,t.prev,r)>=0:ls(t,r,t.prev)<0||ls(t,t.next,r)<0}function uye(t,r){var e=t,n=!1,i=(t.x+r.x)/2,a=(t.y+r.y)/2;do e.y>a!=e.next.y>a&&e.next.y!==e.y&&i<(e.next.x-e.x)*(a-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==t);return n}function B9(t,r){var e=new gI(t.i,t.x,t.y),n=new gI(r.i,r.x,r.y),i=t.next,a=r.prev;return t.next=r,r.prev=t,e.next=i,i.prev=e,n.next=e,e.prev=n,a.next=n,n.prev=a,n}function R9(t,r,e,n){var i=new gI(t,r,e);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function e1(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function gI(t,r,e){this.i=t,this.x=r,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ql(t,r){var e=r.length,n=t.length;if(n>0){for(var i=!0,a=0;a<e;a++)if(t[n-e+a]!==r[a]){i=!1;break}if(i)return!1}for(var o=0;o<e;o++)t[n+o]=r[o];return!0}function t1(t,r){for(var e=r.length,n=0;n<e;n++)t[n]=r[n]}function wd(t,r,e,n){for(var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],a=n+r*e,o=0;o<e;o++)i[o]=t[a+o];return i}function j2(t,r,e,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],a,o;if(e&8)a=(n[3]-t[1])/(r[1]-t[1]),o=3;else if(e&4)a=(n[1]-t[1])/(r[1]-t[1]),o=1;else if(e&2)a=(n[2]-t[0])/(r[0]-t[0]),o=2;else if(e&1)a=(n[0]-t[0])/(r[0]-t[0]),o=0;else return null;for(var s=0;s<t.length;s++)i[s]=(o&1)===s?n[o]:a*(r[s]-t[s])+t[s];return i}function r1(t,r){var e=0;return t[0]<r[0]?e|=1:t[0]>r[2]&&(e|=2),t[1]<r[1]?e|=4:t[1]>r[3]&&(e|=8),e}function n1(t,r){var e=r||{},n=e.size,i=n===void 0?2:n,a=e.broken,o=a===void 0?!1:a,s=e.gridResolution,u=s===void 0?10:s,c=e.gridOffset,h=c===void 0?[0,0]:c,p=e.startIndex,v=p===void 0?0:p,x=e.endIndex,E=x===void 0?t.length:x,R=(E-v)/i,D=[],H=[D],W=wd(t,0,i,v),$,J,B=N9(W,u,h,[]),se=[];ql(D,W);for(var V=1;V<R;V++){for($=wd(t,V,i,v,$),J=r1($,B);J;){j2(W,$,J,B,se);var X=r1(se,B);X&&(j2(W,se,X,B,se),J=X),ql(D,se),t1(W,se),cye(B,u,J),o&&D.length>i&&(D=[],H.push(D),ql(D,W)),J=r1($,B)}ql(D,$),t1(W,$)}return o?H:H[0]}var D9=0,lye=1;function G2(t,r){for(var e=0;e<r.length;e++)t.push(r[e]);return t}function i1(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,e=arguments.length>2?arguments[2]:void 0;if(!t.length)return[];for(var n=e||{},i=n.size,a=i===void 0?2:i,o=n.gridResolution,s=o===void 0?10:o,u=n.gridOffset,c=u===void 0?[0,0]:u,h=n.edgeTypes,p=h===void 0?!1:h,v=[],x=[{pos:t,types:p?new Array(t.length/a).fill(lye):null,holes:r||[]}],E=[[],[]],R=[];x.length;){var D=x.shift(),H=D.pos,W=D.types,$=D.holes;fye(H,a,$[0]||H.length,E),R=N9(E[0],s,c,R);var J=r1(E[1],R);if(J){var B=F9(H,W,a,0,$[0]||H.length,R,J),se={pos:B[0].pos,types:B[0].types,holes:[]},V={pos:B[1].pos,types:B[1].types,holes:[]};x.push(se,V);for(var X=0;X<$.length;X++)B=F9(H,W,a,$[X],$[X+1]||H.length,R,J),B[0]&&(se.holes.push(se.pos.length),se.pos=G2(se.pos,B[0].pos),p&&(se.types=G2(se.types,B[0].types))),B[1]&&(V.holes.push(V.pos.length),V.pos=G2(V.pos,B[1].pos),p&&(V.types=G2(V.types,B[1].types)))}else{var I={positions:H};p&&(I.edgeTypes=W),$.length&&(I.holeIndices=$),v.push(I)}}return v}function F9(t,r,e,n,i,a,o){for(var s=(i-n)/e,u=[],c=[],h=[],p=[],v=[],x,E,R,D=wd(t,s-1,e,n),H=Math.sign(o&8?D[1]-a[3]:D[0]-a[2]),W=r&&r[s-1],$=0,J=0,B=0;B<s;B++)x=wd(t,B,e,n,x),E=Math.sign(o&8?x[1]-a[3]:x[0]-a[2]),R=r&&r[n/e+B],E&&H&&H!==E&&(j2(D,x,o,a,v),ql(u,v)&&h.push(W),ql(c,v)&&p.push(W)),E<=0?(ql(u,x)&&h.push(R),$-=E):h.length&&(h[h.length-1]=D9),E>=0?(ql(c,x)&&p.push(R),J+=E):p.length&&(p[p.length-1]=D9),t1(D,x),H=E,W=R;return[$?{pos:u,types:r&&h}:null,J?{pos:c,types:r&&p}:null]}function N9(t,r,e,n){var i=Math.floor((t[0]-e[0])/r)*r+e[0],a=Math.floor((t[1]-e[1])/r)*r+e[1];return n[0]=i,n[1]=a,n[2]=i+r,n[3]=a+r,n}function cye(t,r,e){e&8?(t[1]+=r,t[3]+=r):e&4?(t[1]-=r,t[3]-=r):e&2?(t[0]+=r,t[2]+=r):e&1&&(t[0]-=r,t[2]-=r)}function fye(t,r,e,n){for(var i=1/0,a=-1/0,o=1/0,s=-1/0,u=0;u<e;u+=r){var c=t[u],h=t[u+1];i=c<i?c:i,a=c>a?c:a,o=h<o?h:o,s=h>s?h:s}return n[0][0]=i,n[0][1]=o,n[1][0]=a,n[1][1]=s,n}function U9(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=hye(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function hye(t,r){if(t){if(typeof t=="string")return z9(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return z9(t,r)}}function z9(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var pye=85.051129;function yI(t,r){var e=r||{},n=e.size,i=n===void 0?2:n,a=e.startIndex,o=a===void 0?0:a,s=e.endIndex,u=s===void 0?t.length:s,c=e.normalize,h=c===void 0?!0:c,p=t.slice(o,u);j9(p,i,0,u-o);var v=n1(p,{size:i,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(h){var x=U9(v),E;try{for(x.s();!(E=x.n()).done;){var R=E.value;G9(R,i)}}catch(D){x.e(D)}finally{x.f()}}return v}function _I(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,e=arguments.length>2?arguments[2]:void 0,n=e||{},i=n.size,a=i===void 0?2:i,o=n.normalize,s=o===void 0?!0:o,u=n.edgeTypes,c=u===void 0?!1:u;r=r||[];for(var h=[],p=[],v=0,x=0,E=0;E<=r.length;E++){for(var R=r[E]||t.length,D=x,H=dye(t,a,v,R),W=H;W<R;W++)h[x++]=t[W];for(var $=v;$<H;$++)h[x++]=t[$];j9(h,a,D,x),mye(h,a,D,x,e?.maxLatitude),v=R,p[E]=x}p.pop();var J=i1(h,p,{size:a,gridResolution:360,gridOffset:[-180,-180],edgeTypes:c});if(s){var B=U9(J),se;try{for(B.s();!(se=B.n()).done;){var V=se.value;G9(V.positions,a)}}catch(X){B.e(X)}finally{B.f()}}return J}function dye(t,r,e,n){for(var i=-1,a=-1,o=e+1;o<n;o+=r){var s=Math.abs(t[o]);s>i&&(i=s,a=o-1)}return a}function mye(t,r,e,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:pye,a=t[e],o=t[n-r];if(Math.abs(a-o)>180){var s=wd(t,0,r,e);s[0]+=Math.round((o-a)/360)*360,ql(t,s),s[1]=Math.sign(s[1])*i,ql(t,s),s[0]=a,ql(t,s)}}function j9(t,r,e,n){for(var i=t[0],a,o=e;o<n;o+=r){a=t[o];var s=a-i;(s>180||s<-180)&&(a-=Math.round(s/360)*360),t[o]=i=a}}function G9(t,r){for(var e,n=t.length/r,i=0;i<n&&(e=t[i*r],(e+180)%360===0);i++);var a=-Math.round(e/360)*360;if(a!==0)for(var o=0;o<n;o++)t[o*r]+=a}function V9(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function H9(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?V9(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):V9(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function vye(t){var r=gye();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function gye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var W9=function(t){Ke(e,t);var r=vye(e);function e(n){ce(this,e);var i=n.id,a=i===void 0?Sa("column-geometry"):i,o=Aye(n),s=o.indices,u=o.attributes;return r.call(this,H9(H9({},n),{},{id:a,indices:s,attributes:u}))}return e}(Bi);function Aye(t){var r=t.radius,e=t.height,n=e===void 0?1:e,i=t.nradial,a=i===void 0?10:i,o=t.vertices;o&&(xr.assert(o.length>=a),o=o.flatMap(function(ee){return[ee[0],ee[1]]}),bd(o,CA.COUNTER_CLOCKWISE));var s=n>0,u=a+1,c=s?u*3+1:a,h=Math.PI*2/a,p=new Uint16Array(s?a*3*2:0),v=new Float32Array(c*3),x=new Float32Array(c*3),E=0;if(s){for(var R=0;R<u;R++)for(var D=R*h,H=R%a,W=Math.sin(D),$=Math.cos(D),J=0;J<2;J++)v[E+0]=o?o[H*2]:$*r,v[E+1]=o?o[H*2+1]:W*r,v[E+2]=(1/2-J)*n,x[E+0]=o?o[H*2]:$,x[E+1]=o?o[H*2+1]:W,E+=3;v[E+0]=v[E-3],v[E+1]=v[E-2],v[E+2]=v[E-1],E+=3}for(var B=s?0:1;B<u;B++){var se=Math.floor(B/2)*Math.sign(.5-B%2),V=se*h,X=(se+a)%a,I=Math.sin(V),O=Math.cos(V);v[E+0]=o?o[X*2]:O*r,v[E+1]=o?o[X*2+1]:I*r,v[E+2]=n/2,x[E+2]=1,E+=3}if(s)for(var U=0,re=0;re<a;re++)p[U++]=re*2+0,p[U++]=re*2+2,p[U++]=re*2+0,p[U++]=re*2+1,p[U++]=re*2+1,p[U++]=re*2+3;return{indices:p,attributes:{POSITION:{size:3,value:v},NORMAL:{size:3,value:x}}}}var q9=`#version 300 es

#define SHADER_NAME column-layer-vertex-shader

in vec3 positions;
in vec3 normals;

in vec3 instancePositions;
in float instanceElevations;
in vec3 instancePositions64Low;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in float instanceStrokeWidths;

in vec3 instancePickingColors;
uniform float opacity;
uniform float radius;
uniform float angle;
uniform vec2 offset;
uniform bool extruded;
uniform bool stroked;
uniform bool isStroke;
uniform float coverage;
uniform float elevationScale;
uniform float edgeDistance;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform int radiusUnits;
uniform int widthUnits;
out vec4 vColor;
#ifdef FLAT_SHADING
out vec4 position_commonspace;
#endif

void main(void) {
  geometry.worldPosition = instancePositions;

  vec4 color = isStroke ? instanceLineColors : instanceFillColors;
  mat2 rotationMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  float elevation = 0.0;
  float strokeOffsetRatio = 1.0;

  if (extruded) {
    elevation = instanceElevations * (positions.z + 1.0) / 2.0 * elevationScale;
  } else if (stroked) {
    float widthPixels = clamp(
      project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
      widthMinPixels, widthMaxPixels) / 2.0;
    float halfOffset = project_pixel_size(widthPixels) / project_size(edgeDistance * coverage * radius);
    if (isStroke) {
      strokeOffsetRatio -= sign(positions.z) * halfOffset;
    } else {
      strokeOffsetRatio -= halfOffset;
    }
  }
  float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);
  float dotRadius = radius * coverage * shouldRender;

  geometry.pickingColor = instancePickingColors;
  vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);
  vec3 centroidPosition64Low = instancePositions64Low;
  vec2 offset = (rotationMatrix * positions.xy * strokeOffsetRatio + offset) * dotRadius;
  if (radiusUnits == UNIT_METERS) {
    offset = project_size(offset);
  }
  vec3 pos = vec3(offset, 0.);
  DECKGL_FILTER_SIZE(pos, geometry);

  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);
  geometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  if (extruded && !isStroke) {
#ifdef FLAT_SHADING
    position_commonspace = geometry.position;
    vColor = vec4(color.rgb, color.a * opacity);
#else
    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, geometry.normal);
    vColor = vec4(lightColor, color.a * opacity);
#endif
  } else {
    vColor = vec4(color.rgb, color.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var X9=`#version 300 es
#define SHADER_NAME column-layer-fragment-shader

precision highp float;

uniform vec3 project_uCameraPosition;
uniform bool extruded;
uniform bool isStroke;

out vec4 fragColor;

in vec4 vColor;
#ifdef FLAT_SHADING
in vec4 position_commonspace;
#endif

void main(void) {
  fragColor = vColor;
#ifdef FLAT_SHADING
  if (extruded && !isStroke && !picking_uActive) {
    vec3 normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));
    fragColor.rgb = lighting_getLightColor(vColor.rgb, project_uCameraPosition, position_commonspace.xyz, normal);
  }
#endif
  DECKGL_FILTER_COLOR(fragColor, geometry);
}
`;function Y9(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function K9(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Y9(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Y9(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function yye(t){var r=_ye();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function _ye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var V2=[0,0,0,255],bye={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},radiusUnits:"meters",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,wireframe:!1,filled:!0,stroked:!1,getPosition:{type:"accessor",value:function(r){return r.position}},getFillColor:{type:"accessor",value:V2},getLineColor:{type:"accessor",value:V2},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0,getColor:{deprecatedFor:["getFillColor","getLineColor"]}},gh=function(t){Ke(e,t);var r=yye(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"getShaders",value:function(){var i=this.context.gl,a=!En(i),o={},s=this.props.flatShading&&Af(i,ni.GLSL_DERIVATIVES);return s&&(o.FLAT_SHADING=1),Yt(me(e.prototype),"getShaders",this).call(this,{vs:q9,fs:X9,defines:o,transpileToGLSL100:a,modules:[La,s?ip:dc,Wa]})}},{key:"initializeState",value:function(){var i=this.getAttributeManager();i.addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instanceFillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getFillColor",defaultValue:V2},instanceLineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getLineColor",defaultValue:V2},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}},{key:"updateState",value:function(i){Yt(me(e.prototype),"updateState",this).call(this,i);var a=i.props,o=i.oldProps,s=i.changeFlags,u=s.extensionsChanged||a.flatShading!==o.flatShading;if(u){var c,h=this.context.gl;(c=this.state.model)===null||c===void 0||c.delete(),this.state.model=this._getModel(h),this.getAttributeManager().invalidateAll()}(u||a.diskResolution!==o.diskResolution||a.vertices!==o.vertices||(a.extruded||a.stroked)!==(o.extruded||o.stroked))&&this._updateGeometry(a)}},{key:"getGeometry",value:function(i,a,o){var s=new W9({radius:1,height:o?2:0,vertices:a,nradial:i}),u=0;if(a)for(var c=0;c<i;c++){var h=a[c],p=Math.sqrt(h[0]*h[0]+h[1]*h[1]);u+=p/i}else u=1;return this.setState({edgeDistance:Math.cos(Math.PI/i)*u}),s}},{key:"_getModel",value:function(i){return new Ni(i,K9(K9({},this.getShaders()),{},{id:this.props.id,isInstanced:!0}))}},{key:"_updateGeometry",value:function(i){var a=i.diskResolution,o=i.vertices,s=i.extruded,u=i.stroked,c=this.getGeometry(a,o,s||u);this.setState({fillVertexCount:c.attributes.POSITION.value.length/3,wireframeVertexCount:c.indices.value.length}),this.state.model.setProps({geometry:c})}},{key:"draw",value:function(i){var a=i.uniforms,o=this.props,s=o.lineWidthUnits,u=o.lineWidthScale,c=o.lineWidthMinPixels,h=o.lineWidthMaxPixels,p=o.radiusUnits,v=o.elevationScale,x=o.extruded,E=o.filled,R=o.stroked,D=o.wireframe,H=o.offset,W=o.coverage,$=o.radius,J=o.angle,B=this.state,se=B.model,V=B.fillVertexCount,X=B.wireframeVertexCount,I=B.edgeDistance;se.setUniforms(a).setUniforms({radius:$,angle:J/180*Math.PI,offset:H,extruded:x,stroked:R,coverage:W,elevationScale:v,edgeDistance:I,radiusUnits:Uo[p],widthUnits:Uo[s],widthScale:u,widthMinPixels:c,widthMaxPixels:h}),x&&D&&(se.setProps({isIndexed:!0}),se.setVertexCount(X).setDrawMode(1).setUniforms({isStroke:!0}).draw()),E&&(se.setProps({isIndexed:!1}),se.setVertexCount(V).setDrawMode(5).setUniforms({isStroke:!1}).draw()),!x&&R&&(se.setProps({isIndexed:!1}),se.setVertexCount(V*2/3).setDrawMode(5).setUniforms({isStroke:!0}).draw())}}]),e}(aa);_(gh,"layerName","ColumnLayer");_(gh,"defaultProps",bye);at();vt();et();function xye(t){var r=wye();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function wye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Tye={cellSize:{type:"number",min:0,value:1e3},offset:{type:"array",value:[1,1]}},OA=function(t){Ke(e,t);var r=xye(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"getGeometry",value:function(i){return new ud}},{key:"draw",value:function(i){var a=i.uniforms,o=this.props,s=o.elevationScale,u=o.extruded,c=o.offset,h=o.coverage,p=o.cellSize,v=o.angle,x=o.radiusUnits;this.state.model.setUniforms(a).setUniforms({radius:p/2,radiusUnits:Uo[x],angle:v,offset:c,extruded:u,coverage:h,elevationScale:s,edgeDistance:1,isWireframe:!1}).draw()}}]),e}(gh);_(OA,"layerName","GridCellLayer");_(OA,"defaultProps",Tye);at();vt();et();et();at();vt();function Z9(t,r,e,n){var i;if(Array.isArray(t[0])){var a=t.length*r;i=new Array(a);for(var o=0;o<t.length;o++)for(var s=0;s<r;s++)i[o*r+s]=t[o][s]||0}else i=t;return e?n1(i,{size:r,gridResolution:e}):n?yI(i,{size:r}):i}function $9(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Sye(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Sye(t,r){if(t){if(typeof t=="string")return J9(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return J9(t,r)}}function J9(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function Q9(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function eH(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Q9(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Q9(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Eye(t){var r=Cye();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Cye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Pye=1,Oye=2,bI=4,rH=function(t){Ke(e,t);var r=Eye(e);function e(n){return ce(this,e),r.call(this,eH(eH({},n),{},{attributes:{positions:{size:3,padding:18,initialize:!0,type:n.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}}))}return ve(e,[{key:"get",value:function(i){return this.attributes[i]}},{key:"getGeometryFromBuffer",value:function(i){return this.normalize?Yt(me(e.prototype),"getGeometryFromBuffer",this).call(this,i):null}},{key:"normalizeGeometry",value:function(i){return this.normalize?Z9(i,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):i}},{key:"getGeometrySize",value:function(i){if(tH(i)){var a=0,o=$9(i),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;a+=this.getGeometrySize(u)}}catch(h){o.e(h)}finally{o.f()}return a}var c=this.getPathLength(i);return c<2?0:this.isClosed(i)?c<3?0:c+2:c}},{key:"updateGeometryAttributes",value:function(i,a){if(a.geometrySize!==0)if(i&&tH(i)){var o=$9(i),s;try{for(o.s();!(s=o.n()).done;){var u=s.value,c=this.getGeometrySize(u);a.geometrySize=c,this.updateGeometryAttributes(u,a),a.vertexStart+=c}}catch(h){o.e(h)}finally{o.f()}}else this._updateSegmentTypes(i,a),this._updatePositions(i,a)}},{key:"_updateSegmentTypes",value:function(i,a){var o=this.attributes.segmentTypes,s=i?this.isClosed(i):!1,u=a.vertexStart,c=a.geometrySize;o.fill(0,u,u+c),s?(o[u]=bI,o[u+c-2]=bI):(o[u]+=Pye,o[u+c-2]+=Oye),o[u+c-1]=bI}},{key:"_updatePositions",value:function(i,a){var o=this.attributes.positions;if(!(!o||!i))for(var s=a.vertexStart,u=a.geometrySize,c=new Array(3),h=s,p=0;p<u;h++,p++)this.getPointOnPath(i,p,c),o[h*3]=c[0],o[h*3+1]=c[1],o[h*3+2]=c[2]}},{key:"getPathLength",value:function(i){return i.length/this.positionSize}},{key:"getPointOnPath",value:function(i,a){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=this.positionSize;a*s>=i.length&&(a+=1-i.length/s);var u=a*s;return o[0]=i[u],o[1]=i[u+1],o[2]=s===3&&i[u+2]||0,o}},{key:"isClosed",value:function(i){if(!this.normalize)return Boolean(this.opts.loop);var a=this.positionSize,o=i.length-a;return i[0]===i[o]&&i[1]===i[o+1]&&(a===2||i[2]===i[o+2])}}]),e}(_A);function tH(t){return Array.isArray(t[0])}var nH=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}
vec3 getLineJoinOffset(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  vec2 dir = isEnd ? dirA : dirB;
  vec2 perp = isEnd ? perpA : perpB;
  float L = isEnd ? lenA : lenB;
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);
    gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);
  } else {
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);
    geometry.position = vec4(currPosition + offset, 1.0);
    gl_Position = project_common_position_to_clipspace(geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var iH=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;function aH(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function oH(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?aH(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):aH(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Mye(t){var r=Iye();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Iye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var sH=[0,0,0,255],Rye={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:function(r){return r.path}},getColor:{type:"accessor",value:sH},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},xI={enter:function(r,e){return e.length?e.subarray(e.length-r.length):r}},Ah=function(t){Ke(e,t);var r=Mye(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"getShaders",value:function(){return Yt(me(e.prototype),"getShaders",this).call(this,{vs:nH,fs:iH,modules:[La,Wa]})}},{key:"wrapLongitude",get:function(){return!1}},{key:"initializeState",value:function(){var i=this,a=!0,o=this.getAttributeManager();o.addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:xI,accessor:"getPath",update:this.calculatePositions,noAlloc:a,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:a},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:xI,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:xI,defaultValue:sH},instancePickingColors:{size:3,type:5121,accessor:function(u,c){var h=c.index,p=c.target;return i.encodePickingColor(u&&u.__source?u.__source.index:h,p)}}}),this.setState({pathTesselator:new rH({fp64:this.use64bitPositions()})})}},{key:"updateState",value:function(i){Yt(me(e.prototype),"updateState",this).call(this,i);var a=i.props,o=i.changeFlags,s=this.getAttributeManager(),u=o.dataChanged||o.updateTriggersChanged&&(o.updateTriggersChanged.all||o.updateTriggersChanged.getPath);if(u){var c=this.state.pathTesselator,h=a.data.attributes||{};c.updateGeometry({data:a.data,geometryBuffer:h.getPath,buffers:h,normalize:!a._pathType,loop:a._pathType==="loop",getGeometry:a.getPath,positionFormat:a.positionFormat,wrapLongitude:a.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:o.dataChanged}),this.setState({numInstances:c.instanceCount,startIndices:c.vertexStarts}),o.dataChanged||s.invalidateAll()}if(o.extensionsChanged){var p,v=this.context.gl;(p=this.state.model)===null||p===void 0||p.delete(),this.state.model=this._getModel(v),s.invalidateAll()}}},{key:"getPickingInfo",value:function(i){var a=Yt(me(e.prototype),"getPickingInfo",this).call(this,i),o=a.index,s=this.props.data;return s[0]&&s[0].__source&&(a.object=s.find(function(u){return u.__source.index===o})),a}},{key:"disablePickingIndex",value:function(i){var a=this.props.data;if(a[0]&&a[0].__source)for(var o=0;o<a.length;o++)a[o].__source.index===i&&this._disablePickingIndex(o);else Yt(me(e.prototype),"disablePickingIndex",this).call(this,i)}},{key:"draw",value:function(i){var a=i.uniforms,o=this.props,s=o.jointRounded,u=o.capRounded,c=o.billboard,h=o.miterLimit,p=o.widthUnits,v=o.widthScale,x=o.widthMinPixels,E=o.widthMaxPixels;this.state.model.setUniforms(a).setUniforms({jointType:Number(s),capType:Number(u),billboard:c,widthUnits:Uo[p],widthScale:v,miterLimit:h,widthMinPixels:x,widthMaxPixels:E}).draw()}},{key:"_getModel",value:function(i){var a=[0,1,2,1,4,2,1,3,4,3,5,4],o=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new Ni(i,oH(oH({},this.getShaders()),{},{id:this.props.id,geometry:new Bi({drawMode:4,attributes:{indices:new Uint16Array(a),positions:{value:new Float32Array(o),size:2}}}),isInstanced:!0}))}},{key:"calculatePositions",value:function(i){var a=this.state.pathTesselator;i.startIndices=a.vertexStarts,i.value=a.get("positions")}},{key:"calculateSegmentTypes",value:function(i){var a=this.state.pathTesselator;i.startIndices=a.vertexStarts,i.value=a.get("segmentTypes")}}]),e}(aa);_(Ah,"defaultProps",Rye);_(Ah,"layerName","PathLayer");at();vt();et();at();vt();et();et();at();vt();Mn();var AH=en(hH());function Yye(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Kye(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Kye(t,r){if(t){if(typeof t=="string")return pH(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return pH(t,r)}}function pH(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Y2=CA.CLOCKWISE,dH=CA.COUNTER_CLOCKWISE,Td={isClosed:!0};function Zye(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}function IA(t){return"positions"in t?t.positions:t}function u1(t){return"holeIndices"in t?t.holeIndices:null}function $ye(t){return Array.isArray(t[0])}function Jye(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function Qye(t){var r=t[0],e=t[t.length-1];return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]}function e_e(t,r,e,n){for(var i=0;i<r;i++)if(t[e+i]!==t[n-r+i])return!1;return!0}function mH(t,r,e,n,i){for(var a=r,o=e.length,s=0;s<o;s++)for(var u=0;u<n;u++)t[a++]=e[s][u]||0;if(!Qye(e))for(var c=0;c<n;c++)t[a++]=e[0][c]||0;return Td.start=r,Td.end=a,Td.size=n,bd(t,i,Td),a}function vH(t,r,e,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;a=a||e.length;var s=a-i;if(s<=0)return r;for(var u=r,c=0;c<s;c++)t[u++]=e[i+c];if(!e_e(e,n,i,a))for(var h=0;h<n;h++)t[u++]=e[i+h];return Td.start=r,Td.end=u,Td.size=n,bd(t,o,Td),u}function K2(t,r){Zye(t);var e=[],n=[];if("positions"in t){var i=t,a=i.positions,o=i.holeIndices;if(o){for(var s=0,u=0;u<=o.length;u++)s=vH(e,s,a,r,o[u-1],o[u],u===0?Y2:dH),n.push(s);return n.pop(),{positions:e,holeIndices:n}}t=a}if(!$ye(t))return vH(e,0,t,r,0,e.length,Y2),e;if(!Jye(t)){var c=0,h=Yye(t.entries()),p;try{for(h.s();!(p=h.n()).done;){var v=Ot(p.value,2),x=v[0],E=v[1];c=mH(e,c,E,r,x===0?Y2:dH),n.push(c)}}catch(R){h.e(R)}finally{h.f()}return n.pop(),{positions:e,holeIndices:n}}return mH(e,0,t,r,Y2),e}function CI(t,r,e){for(var n=t.length/3,i=0,a=0;a<n;a++){var o=(a+1)%n;i+=t[a*3+r]*t[o*3+e],i-=t[o*3+r]*t[a*3+e]}return Math.abs(i/2)}function gH(t,r,e,n){for(var i=t.length/3,a=0;a<i;a++){var o=a*3,s=t[o+0],u=t[o+1],c=t[o+2];t[o+r]=s,t[o+e]=u,t[o+n]=c}}function yH(t,r,e,n){var i=u1(t);i&&(i=i.map(function(E){return E/r}));var a=IA(t),o=n&&r===3;if(e){var s=a.length;a=a.slice();for(var u=[],c=0;c<s;c+=r){u[0]=a[c],u[1]=a[c+1],o&&(u[2]=a[c+2]);var h=e(u);a[c]=h[0],a[c+1]=h[1],o&&(a[c+2]=h[2])}}if(o){var p=CI(a,0,1),v=CI(a,0,2),x=CI(a,1,2);if(!p&&!v&&!x)return[];p>v&&p>x||(v>x?(e||(a=a.slice()),gH(a,0,2,1)):(e||(a=a.slice()),gH(a,2,0,1)))}return(0,AH.default)(a,i,r)}function bH(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=t_e(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function t_e(t,r){if(t){if(typeof t=="string")return xH(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return xH(t,r)}}function xH(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function wH(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function TH(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?wH(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):wH(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function r_e(t){var r=n_e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function n_e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var EH=function(t){Ke(e,t);var r=r_e(e);function e(n){ce(this,e);var i=n.fp64,a=n.IndexType,o=a===void 0?Uint32Array:a;return r.call(this,TH(TH({},n),{},{attributes:{positions:{size:3,type:i?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:o,size:1}}}))}return ve(e,[{key:"get",value:function(i){var a=this.attributes;return i==="indices"?a.indices&&a.indices.subarray(0,this.vertexCount):a[i]}},{key:"updateGeometry",value:function(i){Yt(me(e.prototype),"updateGeometry",this).call(this,i);var a=this.buffers.indices;if(a)this.vertexCount=(a.value||a).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}},{key:"normalizeGeometry",value:function(i){if(this.normalize){var a=K2(i,this.positionSize);return this.opts.resolution?i1(IA(a),u1(a),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?_I(IA(a),u1(a),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):a}return i}},{key:"getGeometrySize",value:function(i){if(SH(i)){var a=0,o=bH(i),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;a+=this.getGeometrySize(u)}}catch(c){o.e(c)}finally{o.f()}return a}return IA(i).length/this.positionSize}},{key:"getGeometryFromBuffer",value:function(i){return this.normalize||!this.buffers.indices?Yt(me(e.prototype),"getGeometryFromBuffer",this).call(this,i):null}},{key:"updateGeometryAttributes",value:function(i,a){if(i&&SH(i)){var o=bH(i),s;try{for(o.s();!(s=o.n()).done;){var u=s.value,c=this.getGeometrySize(u);a.geometrySize=c,this.updateGeometryAttributes(u,a),a.vertexStart+=c,a.indexStart=this.indexStarts[a.geometryIndex+1]}}catch(h){o.e(h)}finally{o.f()}}else this._updateIndices(i,a),this._updatePositions(i,a),this._updateVertexValid(i,a)}},{key:"_updateIndices",value:function(i,a){var o=a.geometryIndex,s=a.vertexStart,u=a.indexStart,c=this.attributes,h=this.indexStarts,p=this.typedArrayManager,v=c.indices;if(!(!v||!i)){var x=u,E=yH(i,this.positionSize,this.opts.preproject,this.opts.full3d);v=p.allocate(v,u+E.length,{copy:!0});for(var R=0;R<E.length;R++)v[x++]=E[R]+s;h[o+1]=u+E.length,c.indices=v}}},{key:"_updatePositions",value:function(i,a){var o=a.vertexStart,s=a.geometrySize,u=this.attributes.positions,c=this.positionSize;if(!(!u||!i))for(var h=IA(i),p=o,v=0;v<s;p++,v++){var x=h[v*c],E=h[v*c+1],R=c>2?h[v*c+2]:0;u[p*3]=x,u[p*3+1]=E,u[p*3+2]=R}}},{key:"_updateVertexValid",value:function(i,a){var o=a.vertexStart,s=a.geometrySize,u=this.positionSize,c=this.attributes.vertexValid,h=i&&u1(i);if(i&&i.edgeTypes?c.set(i.edgeTypes,o):c.fill(1,o,o+s),h)for(var p=0;p<h.length;p++)c[o+h[p]/u-1]=0;c[o+s-1]=0}}]),e}(_A);function SH(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}var Z2=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var CH=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(Z2,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`);var PH=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(Z2,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`);var OH=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;function MH(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function RA(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?MH(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):MH(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function i_e(t){var r=a_e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function a_e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var J2=[0,0,0,255],o_e={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:function(r){return r.polygon}},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:J2},getLineColor:{type:"accessor",value:J2},material:!0},$2={enter:function(r,e){return e.length?e.subarray(e.length-r.length):r}},yh=function(t){Ke(e,t);var r=i_e(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"getShaders",value:function(i){return Yt(me(e.prototype),"getShaders",this).call(this,{vs:i==="top"?CH:PH,fs:OH,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[La,dc,Wa]})}},{key:"wrapLongitude",get:function(){return!1}},{key:"initializeState",value:function(){var i=this,a=this.context,o=a.gl,s=a.viewport,u=this.props.coordinateSystem,c=this.props._full3d;s.isGeospatial&&u===yn.DEFAULT&&(u=yn.LNGLAT);var h;u===yn.LNGLAT&&(c?h=s.projectPosition.bind(s):h=s.projectFlat.bind(s)),this.setState({numInstances:0,polygonTesselator:new EH({preproject:h,fp64:this.use64bitPositions(),IndexType:!o||Mu(o,ni.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});var p=this.getAttributeManager(),v=!0;p.remove(["instancePickingColors"]),p.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:v},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:$2,accessor:"getPolygon",update:this.calculatePositions,noAlloc:v,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:v},elevations:{size:1,transition:$2,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:$2,accessor:"getFillColor",defaultValue:J2,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:$2,accessor:"getLineColor",defaultValue:J2,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:function(E,R){var D=R.index,H=R.target;return i.encodePickingColor(E&&E.__source?E.__source.index:D,H)},shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}},{key:"getPickingInfo",value:function(i){var a=Yt(me(e.prototype),"getPickingInfo",this).call(this,i),o=a.index,s=this.props.data;return s[0]&&s[0].__source&&(a.object=s.find(function(u){return u.__source.index===o})),a}},{key:"disablePickingIndex",value:function(i){var a=this.props.data;if(a[0]&&a[0].__source)for(var o=0;o<a.length;o++)a[o].__source.index===i&&this._disablePickingIndex(o);else Yt(me(e.prototype),"disablePickingIndex",this).call(this,i)}},{key:"draw",value:function(i){var a=i.uniforms,o=this.props,s=o.extruded,u=o.filled,c=o.wireframe,h=o.elevationScale,p=this.state,v=p.topModel,x=p.sideModel,E=p.polygonTesselator,R=RA(RA({},a),{},{extruded:Boolean(s),elevationScale:h});x&&(x.setInstanceCount(E.instanceCount-1),x.setUniforms(R),c&&(x.setDrawMode(3),x.setUniforms({isWireframe:!0}).draw()),u&&(x.setDrawMode(6),x.setUniforms({isWireframe:!1}).draw())),v&&(v.setVertexCount(E.vertexCount),v.setUniforms(R).draw())}},{key:"updateState",value:function(i){Yt(me(e.prototype),"updateState",this).call(this,i),this.updateGeometry(i);var a=i.props,o=i.oldProps,s=i.changeFlags,u=this.getAttributeManager(),c=s.extensionsChanged||a.filled!==o.filled||a.extruded!==o.extruded;if(c){var h;(h=this.state.models)===null||h===void 0||h.forEach(function(p){return p.delete()}),this.setState(this._getModels(this.context.gl)),u.invalidateAll()}}},{key:"updateGeometry",value:function(i){var a=i.props,o=i.oldProps,s=i.changeFlags,u=s.dataChanged||s.updateTriggersChanged&&(s.updateTriggersChanged.all||s.updateTriggersChanged.getPolygon);if(u){var c=this.state.polygonTesselator,h=a.data.attributes||{};c.updateGeometry({data:a.data,normalize:a._normalize,geometryBuffer:h.getPolygon,buffers:h,getGeometry:a.getPolygon,positionFormat:a.positionFormat,wrapLongitude:a.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:s.dataChanged,full3d:a._full3d}),this.setState({numInstances:c.instanceCount,startIndices:c.vertexStarts}),s.dataChanged||this.getAttributeManager().invalidateAll()}}},{key:"_getModels",value:function(i){var a=this.props,o=a.id,s=a.filled,u=a.extruded,c,h;if(s){var p=this.getShaders("top");p.defines.NON_INSTANCED_MODEL=1,c=new Ni(i,RA(RA({},p),{},{id:"".concat(o,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0}))}return u&&(h=new Ni(i,RA(RA({},this.getShaders("side")),{},{id:"".concat(o,"-side"),geometry:new Bi({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1})),h.userData.excludeAttributes={indices:!0}),{models:[h,c].filter(Boolean),topModel:c,sideModel:h}}},{key:"calculateIndices",value:function(i){var a=this.state.polygonTesselator;i.startIndices=a.indexStarts,i.value=a.get("indices")}},{key:"calculatePositions",value:function(i){var a=this.state.polygonTesselator;i.startIndices=a.vertexStarts,i.value=a.get("positions")}},{key:"calculateVertexValid",value:function(i){i.value=this.state.polygonTesselator.get("vertexValid")}}]),e}(aa);_(yh,"defaultProps",o_e);_(yh,"layerName","SolidPolygonLayer");function Q2(t){for(var r=t.data,e=t.getIndex,n=t.dataRange,i=t.replace,a=n.startRow,o=a===void 0?0:a,s=n.endRow,u=s===void 0?1/0:s,c=r.length,h=c,p=c,v=0;v<c;v++){var x=e(r[v]);if(h>v&&x>=o&&(h=v),x>=u){p=v;break}}for(var E=h,R=p-h!==i.length,D=R?r.slice(p):void 0,H=0;H<i.length;H++)r[E++]=i[H];if(D){for(var W=0;W<D.length;W++)r[E++]=D[W];r.length=E}return{startRow:h,endRow:h+i.length}}function s_e(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=u_e(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function u_e(t,r){if(t){if(typeof t=="string")return IH(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return IH(t,r)}}function IH(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function l_e(t){var r=c_e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function c_e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var RH=[0,0,0,255],f_e=[0,0,0,255],h_e={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:function(r){return r.polygon}},getFillColor:{type:"accessor",value:f_e},getLineColor:{type:"accessor",value:RH},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0},_h=function(t){Ke(e,t);var r=l_e(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"initializeState",value:function(){this.state={paths:[]},this.props.getLineDashArray&&xr.removed("getLineDashArray","PathStyleExtension")()}},{key:"updateState",value:function(i){var a=this,o=i.changeFlags,s=o.dataChanged||o.updateTriggersChanged&&(o.updateTriggersChanged.all||o.updateTriggersChanged.getPolygon);if(s&&Array.isArray(o.dataChanged)){var u=this.state.paths.slice(),c=o.dataChanged.map(function(h){return Q2({data:u,getIndex:function(v){return v.__source.index},dataRange:h,replace:a._getPaths(h)})});this.setState({paths:u,pathsDiff:c})}else s&&this.setState({paths:this._getPaths(),pathsDiff:null})}},{key:"_getPaths",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.props,o=a.data,s=a.getPolygon,u=a.positionFormat,c=a._normalize,h=[],p=u==="XY"?2:3,v=i.startRow,x=i.endRow,E=xs(o,v,x),R=E.iterable,D=E.objectInfo,H=s_e(R),W;try{for(H.s();!(W=H.n()).done;){var $=W.value;D.index++;var J=s($,D);c&&(J=K2(J,p));var B=J,se=B.holeIndices,V=J.positions||J;if(se)for(var X=0;X<=se.length;X++){var I=V.slice(se[X-1]||0,se[X]||V.length);h.push(this.getSubLayerRow({path:I},$,D.index))}else h.push(this.getSubLayerRow({path:V},$,D.index))}}catch(O){H.e(O)}finally{H.f()}return h}},{key:"renderLayers",value:function(){var i=this.props,a=i.data,o=i._dataDiff,s=i.stroked,u=i.filled,c=i.extruded,h=i.wireframe,p=i._normalize,v=i._windingOrder,x=i.elevationScale,E=i.transitions,R=i.positionFormat,D=this.props,H=D.lineWidthUnits,W=D.lineWidthScale,$=D.lineWidthMinPixels,J=D.lineWidthMaxPixels,B=D.lineJointRounded,se=D.lineMiterLimit,V=D.lineDashJustified,X=this.props,I=X.getFillColor,O=X.getLineColor,U=X.getLineWidth,re=X.getLineDashArray,ee=X.getElevation,pe=X.getPolygon,je=X.updateTriggers,qe=X.material,We=this.state,ot=We.paths,gt=We.pathsDiff,Pt=this.getSubLayerClass("fill",yh),Dt=this.getSubLayerClass("stroke",Ah),nr=this.shouldRenderSubLayer("fill",ot)&&new Pt({_dataDiff:o,extruded:c,elevationScale:x,filled:u,wireframe:h,_normalize:p,_windingOrder:v,getElevation:ee,getFillColor:I,getLineColor:c&&h?O:RH,material:qe,transitions:E},this.getSubLayerProps({id:"fill",updateTriggers:je&&{getPolygon:je.getPolygon,getElevation:je.getElevation,getFillColor:je.getFillColor,lineColors:c&&h,getLineColor:je.getLineColor}}),{data:a,positionFormat:R,getPolygon:pe}),Nt=!c&&s&&this.shouldRenderSubLayer("stroke",ot)&&new Dt({_dataDiff:gt&&function(){return gt},widthUnits:H,widthScale:W,widthMinPixels:$,widthMaxPixels:J,jointRounded:B,miterLimit:se,dashJustified:V,_pathType:"loop",transitions:E&&{getWidth:E.getLineWidth,getColor:E.getLineColor,getPath:E.getPolygon},getColor:this.getSubLayerAccessor(O),getWidth:this.getSubLayerAccessor(U),getDashArray:this.getSubLayerAccessor(re)},this.getSubLayerProps({id:"stroke",updateTriggers:je&&{getWidth:je.getLineWidth,getColor:je.getLineColor,getDashArray:je.getLineDashArray}}),{data:ot,positionFormat:R,getPath:function(Or){return Or.path}});return[!c&&nr,Nt,c&&nr]}}]),e}(Go);_(_h,"layerName","PolygonLayer");_(_h,"defaultProps",h_e);at();vt();et();et();function LH(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function p_e(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?LH(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):LH(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function kH(t,r){if(!t)return null;var e="startIndices"in t?t.startIndices[r]:r,n=t.featureIds.value[e];return e!==-1?d_e(t,n,e):null}function d_e(t,r,e){var n={properties:p_e({},t.properties[r])};for(var i in t.numericProps)n.properties[i]=t.numericProps[i].value[e];return n}function BH(t,r){var e={points:null,lines:null,polygons:null};for(var n in e){var i=t[n].globalFeatureIds.value;e[n]=new Uint8ClampedArray(i.length*3);for(var a=[],o=0;o<i.length;o++)r(i[o],a),e[n][o*3+0]=a[0],e[n][o*3+1]=a[1],e[n][o*3+2]=a[2]}return e}Mn();at();vt();et();at();vt();et();var DH=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float sdfBuffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;function FH(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function eT(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?FH(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):FH(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function m_e(t){var r=v_e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function v_e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var PI=192/256,NH=[],g_e={getIconOffsets:{type:"accessor",value:function(r){return r.offsets}},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}},LA=function(t){Ke(e,t);var r=m_e(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"getShaders",value:function(){return eT(eT({},Yt(me(e.prototype),"getShaders",this).call(this)),{},{fs:DH})}},{key:"initializeState",value:function(){var i=this;Yt(me(e.prototype),"initializeState",this).call(this);var a=this.getAttributeManager();a.addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:function(s,u){var c=u.index,h=u.target;return i.encodePickingColor(c,h)}}})}},{key:"updateState",value:function(i){Yt(me(e.prototype),"updateState",this).call(this,i);var a=i.props,o=i.oldProps,s=a.outlineColor;s!==o.outlineColor&&(s=s.map(function(u){return u/255}),s[3]=Number.isFinite(s[3])?s[3]:1,this.setState({outlineColor:s})),!a.sdf&&a.outlineWidth&&xr.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}},{key:"draw",value:function(i){var a=this.props,o=a.sdf,s=a.smoothing,u=a.outlineWidth,c=this.state.outlineColor,h=u?Math.max(s,PI*(1-u)):-1;if(i.uniforms=eT(eT({},i.uniforms),{},{sdfBuffer:PI,outlineBuffer:h,gamma:s,sdf:Boolean(o),outlineColor:c}),Yt(me(e.prototype),"draw",this).call(this,i),o&&u){var p=this.state.iconManager,v=p.getTexture();v&&this.state.model.draw({uniforms:{outlineBuffer:PI}})}}},{key:"getInstanceOffset",value:function(i){var a=this;return i?Array.from(i).flatMap(function(o){return Yt(me(e.prototype),"getInstanceOffset",a).call(a,o)}):NH}},{key:"getInstanceColorMode",value:function(i){return 1}},{key:"getInstanceIconFrame",value:function(i){var a=this;return i?Array.from(i).flatMap(function(o){return Yt(me(e.prototype),"getInstanceIconFrame",a).call(a,o)}):NH}}]),e}(_d);_(LA,"defaultProps",g_e);_(LA,"layerName","MultiIconLayer");at();vt();et();var l1=class{constructor({fontSize:r=24,buffer:e=3,radius:n=8,cutoff:i=.25,fontFamily:a="sans-serif",fontWeight:o="normal",fontStyle:s="normal"}={}){this.buffer=e,this.cutoff=i,this.radius=n;let u=this.size=r+e*4,c=this._createCanvas(u),h=this.ctx=c.getContext("2d",{willReadFrequently:!0});h.font=`${s} ${o} ${r}px ${a}`,h.textBaseline="alphabetic",h.textAlign="left",h.fillStyle="black",this.gridOuter=new Float64Array(u*u),this.gridInner=new Float64Array(u*u),this.f=new Float64Array(u),this.z=new Float64Array(u+1),this.v=new Uint16Array(u)}_createCanvas(r){let e=document.createElement("canvas");return e.width=e.height=r,e}draw(r){let{width:e,actualBoundingBoxAscent:n,actualBoundingBoxDescent:i,actualBoundingBoxLeft:a,actualBoundingBoxRight:o}=this.ctx.measureText(r),s=Math.ceil(n),u=0,c=Math.min(this.size-this.buffer,Math.ceil(o-a)),h=Math.min(this.size-this.buffer,s+Math.ceil(i)),p=c+2*this.buffer,v=h+2*this.buffer,x=Math.max(p*v,0),E=new Uint8ClampedArray(x),R={data:E,width:p,height:v,glyphWidth:c,glyphHeight:h,glyphTop:s,glyphLeft:u,glyphAdvance:e};if(c===0||h===0)return R;let{ctx:D,buffer:H,gridInner:W,gridOuter:$}=this;D.clearRect(H,H,c,h),D.fillText(r,H,H+s);let J=D.getImageData(H,H,c,h);$.fill(1e20,0,x),W.fill(0,0,x);for(let B=0;B<h;B++)for(let se=0;se<c;se++){let V=J.data[4*(B*c+se)+3]/255;if(V===0)continue;let X=(B+H)*p+se+H;if(V===1)$[X]=0,W[X]=1e20;else{let I=.5-V;$[X]=I>0?I*I:0,W[X]=I<0?I*I:0}}zH($,0,0,p,v,p,this.f,this.v,this.z),zH(W,H,H,c,h,p,this.f,this.v,this.z);for(let B=0;B<x;B++){let se=Math.sqrt($[B])-Math.sqrt(W[B]);E[B]=Math.round(255-255*(se/this.radius+this.cutoff))}return R}};function zH(t,r,e,n,i,a,o,s,u){for(let c=r;c<r+n;c++)UH(t,e*a+c,a,i,o,s,u);for(let c=e;c<e+i;c++)UH(t,c*a+r,1,n,o,s,u)}function UH(t,r,e,n,i,a,o){a[0]=0,o[0]=-1e20,o[1]=1e20,i[0]=t[r];for(let s=1,u=0,c=0;s<n;s++){i[s]=t[r+s*e];let h=s*s;do{let p=a[u];c=(i[s]-i[p]+h-p*p)/(s-p)/2}while(c<=o[u]&&--u>-1);u++,a[u]=s,o[u]=c,o[u+1]=1e20}for(let s=0,u=0;s<n;s++){for(;o[u+1]<s;)u++;let c=a[u],h=s-c;t[r+s*e]=i[c]+h*h}}function GH(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=A_e(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function A_e(t,r){if(t){if(typeof t=="string")return jH(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return jH(t,r)}}function jH(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var y_e=32,__e=[];function b_e(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function VH(t){var r=t.characterSet,e=t.getFontWidth,n=t.fontHeight,i=t.buffer,a=t.maxCanvasWidth,o=t.mapping,s=o===void 0?{}:o,u=t.xOffset,c=u===void 0?0:u,h=t.yOffset,p=h===void 0?0:h,v=0,x=c,E=n+i*2,R=GH(r),D;try{for(R.s();!(D=R.n()).done;){var H=D.value;if(!s[H]){var W=e(H);x+W+i*2>a&&(x=0,v++),s[H]={x:x+i,y:p+v*E+i,width:W,height:E,layoutWidth:W,layoutHeight:n},x+=W+i*2}}}catch($){R.e($)}finally{R.f()}return{mapping:s,xOffset:x,yOffset:p+v*E,canvasHeight:b_e(p+(v+1)*E)}}function HH(t,r,e,n){for(var i=0,a=r;a<e;a++){var o,s=t[a];i+=((o=n[s])===null||o===void 0?void 0:o.layoutWidth)||0}return i}function WH(t,r,e,n,i,a){for(var o=r,s=0,u=r;u<e;u++){var c=HH(t,u,u+1,i);s+c>n&&(o<u&&a.push(u),o=u,s=0),s+=c}return s}function x_e(t,r,e,n,i,a){for(var o=r,s=r,u=r,c=0,h=r;h<e;h++)if((t[h]===" "||t[h+1]===" "||h+1===e)&&(u=h+1),u>s){var p=HH(t,s,u,i);c+p>n&&(o<s&&(a.push(s),o=s,c=0),p>n&&(p=WH(t,s,u,n,i,a),o=a[a.length-1])),s=u,c+=p}return c}function w_e(t,r,e,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0;a===void 0&&(a=t.length);var o=[];return r==="break-all"?WH(t,i,a,e,n,o):x_e(t,i,a,e,n,o),o}function T_e(t,r,e,n,i,a){for(var o=0,s=0,u=r;u<e;u++){var c=t[u],h=n[c];h?(s||(s=h.layoutHeight),i[u]=o+h.layoutWidth/2,o+=h.layoutWidth):(xr.warn("Missing character: ".concat(c," (").concat(c.codePointAt(0),")"))(),i[u]=o,o+=y_e)}a[0]=o,a[1]=s}function qH(t,r,e,n,i){for(var a=Array.from(t),o=a.length,s=new Array(o),u=new Array(o),c=new Array(o),h=(e==="break-word"||e==="break-all")&&isFinite(n)&&n>0,p=[0,0],v=[0,0],x=0,E=0,R=0,D=0;D<=o;D++){var H=a[D];if((H===`
`||D===o)&&(R=D),R>E){for(var W=h?w_e(a,e,n,i,E,R):__e,$=0;$<=W.length;$++){var J=$===0?E:W[$-1],B=$<W.length?W[$]:R;T_e(a,J,B,i,s,v);for(var se=J;se<B;se++){var V,X=a[se],I=((V=i[X])===null||V===void 0?void 0:V.layoutOffsetY)||0;u[se]=x+v[1]/2+I,c[se]=v[0]}x=x+v[1]*r,p[0]=Math.max(p[0],v[0])}E=R}H===`
`&&(s[E]=0,u[E]=0,c[E]=0,E++)}return p[1]=x,{x:s,y:u,rowWidth:c,size:p}}function XH(t){var r=t.value,e=t.length,n=t.stride,i=t.offset,a=t.startIndices,o=t.characterSet,s=r.BYTES_PER_ELEMENT,u=n?n/s:1,c=i?i/s:0,h=a[e]||Math.ceil((r.length-c)/u),p=o&&new Set,v=new Array(e),x=r;if(u>1||c>0){var E=r.constructor;x=new E(h);for(var R=0;R<h;R++)x[R]=r[R*u+c]}for(var D=0;D<e;D++){var H=a[D],W=a[D+1]||h,$=x.subarray(H,W);v[D]=String.fromCodePoint.apply(null,$),p&&$.forEach(p.add,p)}if(p){var J=GH(p),B;try{for(J.s();!(B=J.n()).done;){var se=B.value;o.add(String.fromCodePoint(se))}}catch(V){J.e(V)}finally{J.f()}}return{texts:v,characterCount:h}}at();vt();et();var OI=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5;ce(this,t),_(this,"limit",void 0),_(this,"_cache",{}),_(this,"_order",[]),this.limit=r}return ve(t,[{key:"get",value:function(e){var n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}},{key:"set",value:function(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}},{key:"delete",value:function(e){var n=this._cache[e];n&&(delete this._cache[e],this._deleteOrder(e))}},{key:"_deleteOrder",value:function(e){var n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}},{key:"_appendOrder",value:function(e){this._order.push(e)}}]),t}();function YH(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=S_e(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function S_e(t,r){if(t){if(typeof t=="string")return KH(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return KH(t,r)}}function KH(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function ZH(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function $H(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?ZH(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ZH(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function E_e(){for(var t=[],r=32;r<128;r++)t.push(String.fromCharCode(r));return t}var Km={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:E_e(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},JH=1024,QH=.9,eW=1.2,rW=3,tT=new OI(rW);function C_e(t,r){var e;typeof r=="string"?e=new Set(Array.from(r)):e=new Set(r);var n=tT.get(t);if(!n)return e;for(var i in n.mapping)e.has(i)&&e.delete(i);return e}function P_e(t,r){for(var e=0;e<t.length;e++)r.data[4*e+3]=t[e]}function tW(t,r,e,n){t.font="".concat(n," ").concat(e,"px ").concat(r),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}function nW(t){xr.assert(Number.isFinite(t)&&t>=rW,"Invalid cache limit"),tT=new OI(t)}var iW=function(){function t(){ce(this,t),_(this,"props",$H({},Km)),_(this,"_key",void 0),_(this,"_atlas",void 0)}return ve(t,[{key:"texture",get:function(){return this._atlas}},{key:"mapping",get:function(){return this._atlas&&this._atlas.mapping}},{key:"scale",get:function(){var e=this.props,n=e.fontSize,i=e.buffer;return(n*eW+i*2)/n}},{key:"setProps",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this.props,e),this._key=this._getKey();var n=C_e(this._key,this.props.characterSet),i=tT.get(this._key);if(i&&n.size===0){this._atlas!==i&&(this._atlas=i);return}var a=this._generateFontAtlas(n,i);this._atlas=a,tT.set(this._key,a)}},{key:"_generateFontAtlas",value:function(e,n){var i=this.props,a=i.fontFamily,o=i.fontWeight,s=i.fontSize,u=i.buffer,c=i.sdf,h=i.radius,p=i.cutoff,v=n&&n.data;v||(v=document.createElement("canvas"),v.width=JH);var x=v.getContext("2d",{willReadFrequently:!0});tW(x,a,s,o);var E=VH($H({getFontWidth:function(ot){return x.measureText(ot).width},fontHeight:s*eW,buffer:u,characterSet:e,maxCanvasWidth:JH},n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset})),R=E.mapping,D=E.canvasHeight,H=E.xOffset,W=E.yOffset;if(v.height!==D){var $=x.getImageData(0,0,v.width,v.height);v.height=D,x.putImageData($,0,0)}if(tW(x,a,s,o),c){var J=new l1({fontSize:s,buffer:u,radius:h,cutoff:p,fontFamily:a,fontWeight:"".concat(o)}),B=YH(e),se;try{for(B.s();!(se=B.n()).done;){var V=se.value,X=J.draw(V),I=X.data,O=X.width,U=X.height,re=X.glyphTop;R[V].width=O,R[V].layoutOffsetY=s*QH-re;var ee=x.createImageData(O,U);P_e(I,ee),x.putImageData(ee,R[V].x,R[V].y)}}catch(We){B.e(We)}finally{B.f()}}else{var pe=YH(e),je;try{for(pe.s();!(je=pe.n()).done;){var qe=je.value;x.fillText(qe,R[qe].x,R[qe].y+u+s*QH)}}catch(We){pe.e(We)}finally{pe.f()}}return{xOffset:H,yOffset:W,mapping:R,data:v,width:v.width,height:v.height}}},{key:"_getKey",value:function(){var e=this.props,n=e.fontFamily,i=e.fontWeight,a=e.fontSize,o=e.buffer,s=e.sdf,u=e.radius,c=e.cutoff;return s?"".concat(n," ").concat(i," ").concat(a," ").concat(o," ").concat(u," ").concat(c):"".concat(n," ").concat(i," ").concat(a," ").concat(o)}}]),t}();at();vt();et();var aW=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`;var oW=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;function sW(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function uW(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?sW(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):sW(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function O_e(t){var r=M_e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function M_e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var I_e={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:function(r){return r.position}},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}},kA=function(t){Ke(e,t);var r=O_e(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"getShaders",value:function(){return Yt(me(e.prototype),"getShaders",this).call(this,{vs:aW,fs:oW,modules:[La,Wa]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function(i){Yt(me(e.prototype),"updateState",this).call(this,i);var a=i.changeFlags;if(a.extensionsChanged){var o,s=this.context.gl;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(s),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(i){var a=i.uniforms,o=this.props,s=o.billboard,u=o.sizeScale,c=o.sizeUnits,h=o.sizeMinPixels,p=o.sizeMaxPixels,v=o.getLineWidth,x=this.props.padding;x.length<4&&(x=[x[0],x[1],x[0],x[1]]),this.state.model.setUniforms(a).setUniforms({billboard:s,stroked:Boolean(v),padding:x,sizeUnits:Uo[c],sizeScale:u,sizeMinPixels:h,sizeMaxPixels:p}).draw()}},{key:"_getModel",value:function(i){var a=[0,0,1,0,1,1,0,1];return new Ni(i,uW(uW({},this.getShaders()),{},{id:this.props.id,geometry:new Bi({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(a)}}}),isInstanced:!0}))}}]),e}(aa);_(kA,"defaultProps",I_e);_(kA,"layerName","TextBackgroundLayer");function R_e(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=L_e(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function L_e(t,r){if(t){if(typeof t=="string")return lW(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return lW(t,r)}}function lW(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function cW(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function rT(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?cW(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):cW(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function k_e(t){var r=B_e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function B_e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var fW={start:1,middle:0,end:-1},hW={top:1,center:0,bottom:-1},MI=[0,0,0,255],D_e=1,F_e={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:MI},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Km.characterSet},fontFamily:Km.fontFamily,fontWeight:Km.fontWeight,lineHeight:D_e,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:MI},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:function(r){return r.text}},getPosition:{type:"accessor",value:function(r){return r.position}},getColor:{type:"accessor",value:MI},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}},BA=function(t){Ke(e,t);var r=k_e(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),_(jt(n),"getBoundingRect",function(s,u){var c=n.transformParagraph(s,u),h=Ot(c.size,2),p=h[0],v=h[1],x=n.state.fontAtlasManager.props.fontSize;p/=x,v/=x;var E=n.props,R=E.getTextAnchor,D=E.getAlignmentBaseline,H=fW[typeof R=="function"?R(s,u):R],W=hW[typeof D=="function"?D(s,u):D];return[(H-1)*p/2,(W-1)*v/2,p,v]}),_(jt(n),"getIconOffsets",function(s,u){for(var c=n.props,h=c.getTextAnchor,p=c.getAlignmentBaseline,v=n.transformParagraph(s,u),x=v.x,E=v.y,R=v.rowWidth,D=Ot(v.size,2),H=D[0],W=D[1],$=fW[typeof h=="function"?h(s,u):h],J=hW[typeof p=="function"?p(s,u):p],B=x.length,se=new Array(B*2),V=0,X=0;X<B;X++){var I=(1-$)*(H-R[X])/2;se[V++]=($-1)*H/2+I+x[X],se[V++]=(J-1)*W/2+E[X]}return se}),n}return ve(e,[{key:"initializeState",value:function(){this.state={styleVersion:0,fontAtlasManager:new iW},this.props.maxWidth>0&&xr.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}},{key:"updateState",value:function(i){var a=i.props,o=i.oldProps,s=i.changeFlags,u=s.dataChanged||s.updateTriggersChanged&&(s.updateTriggersChanged.all||s.updateTriggersChanged.getText);u&&this._updateText();var c=this._updateFontAtlas(),h=c||a.lineHeight!==o.lineHeight||a.wordBreak!==o.wordBreak||a.maxWidth!==o.maxWidth;h&&this.setState({styleVersion:this.state.styleVersion+1})}},{key:"getPickingInfo",value:function(i){var a=i.info;return a.object=a.index>=0?this.props.data[a.index]:null,a}},{key:"_updateFontAtlas",value:function(){var i=this.props,a=i.fontSettings,o=i.fontFamily,s=i.fontWeight,u=this.state,c=u.fontAtlasManager,h=u.characterSet,p=rT(rT({},a),{},{characterSet:h,fontFamily:o,fontWeight:s});if(!c.mapping)return c.setProps(p),!0;for(var v in p)if(p[v]!==c.props[v])return c.setProps(p),!0;return!1}},{key:"_updateText",value:function(){var i,a=this.props,o=a.data,s=a.characterSet,u=(i=o.attributes)===null||i===void 0?void 0:i.getText,c=this.props.getText,h=o.startIndices,p,v=s==="auto"&&new Set;if(u&&h){var x=XH(rT(rT({},ArrayBuffer.isView(u)?{value:u}:u),{},{length:o.length,startIndices:h,characterSet:v})),E=x.texts,R=x.characterCount;p=R,c=function(X,I){var O=I.index;return E[O]}}else{var D=xs(o),H=D.iterable,W=D.objectInfo;h=[0],p=0;var $=R_e(H),J;try{for($.s();!(J=$.n()).done;){var B=J.value;W.index++;var se=Array.from(c(B,W)||"");v&&se.forEach(v.add,v),p+=se.length,h.push(p)}}catch(V){$.e(V)}finally{$.f()}}this.setState({getText:c,startIndices:h,numInstances:p,characterSet:v||s})}},{key:"transformParagraph",value:function(i,a){var o=this.state.fontAtlasManager,s=o.mapping,u=this.state.getText,c=this.props,h=c.wordBreak,p=c.lineHeight,v=c.maxWidth,x=u(i,a)||"";return qH(x,p,h,v*o.props.fontSize,s)}},{key:"renderLayers",value:function(){var i=this.state,a=i.startIndices,o=i.numInstances,s=i.getText,u=i.fontAtlasManager,c=u.scale,h=u.texture,p=u.mapping,v=i.styleVersion,x=this.props,E=x.data,R=x._dataDiff,D=x.getPosition,H=x.getColor,W=x.getSize,$=x.getAngle,J=x.getPixelOffset,B=x.getBackgroundColor,se=x.getBorderColor,V=x.getBorderWidth,X=x.backgroundPadding,I=x.background,O=x.billboard,U=x.fontSettings,re=x.outlineWidth,ee=x.outlineColor,pe=x.sizeScale,je=x.sizeUnits,qe=x.sizeMinPixels,We=x.sizeMaxPixels,ot=x.transitions,gt=x.updateTriggers,Pt=this.getSubLayerClass("characters",LA),Dt=this.getSubLayerClass("background",kA);return[I&&new Dt({getFillColor:B,getLineColor:se,getLineWidth:V,padding:X,getPosition:D,getSize:W,getAngle:$,getPixelOffset:J,billboard:O,sizeScale:pe,sizeUnits:je,sizeMinPixels:qe,sizeMaxPixels:We,transitions:ot&&{getPosition:ot.getPosition,getAngle:ot.getAngle,getSize:ot.getSize,getFillColor:ot.getBackgroundColor,getLineColor:ot.getBorderColor,getLineWidth:ot.getBorderWidth,getPixelOffset:ot.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:gt.getPosition,getAngle:gt.getAngle,getSize:gt.getSize,getFillColor:gt.getBackgroundColor,getLineColor:gt.getBorderColor,getLineWidth:gt.getBorderWidth,getPixelOffset:gt.getPixelOffset,getBoundingRect:{getText:gt.getText,getTextAnchor:gt.getTextAnchor,getAlignmentBaseline:gt.getAlignmentBaseline,styleVersion:v}}}),{data:E.attributes&&E.attributes.background?{length:E.length,attributes:E.attributes.background}:E,_dataDiff:R,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new Pt({sdf:U.sdf,smoothing:Number.isFinite(U.smoothing)?U.smoothing:Km.smoothing,outlineWidth:re/(U.radius||Km.radius),outlineColor:ee,iconAtlas:h,iconMapping:p,getPosition:D,getColor:H,getSize:W,getAngle:$,getPixelOffset:J,billboard:O,sizeScale:pe*c,sizeUnits:je,sizeMinPixels:qe*c,sizeMaxPixels:We*c,transitions:ot&&{getPosition:ot.getPosition,getAngle:ot.getAngle,getColor:ot.getColor,getSize:ot.getSize,getPixelOffset:ot.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:gt.getText,getPosition:gt.getPosition,getAngle:gt.getAngle,getColor:gt.getColor,getSize:gt.getSize,getPixelOffset:gt.getPixelOffset,getIconOffsets:{getTextAnchor:gt.getTextAnchor,getAlignmentBaseline:gt.getAlignmentBaseline,styleVersion:v}}}),{data:E,_dataDiff:R,startIndices:a,numInstances:o,getIconOffsets:this.getIconOffsets,getIcon:s})]}}],[{key:"fontAtlasCacheLimit",set:function(i){nW(i)}}]),e}(Go);_(BA,"defaultProps",F_e);_(BA,"layerName","TextLayer");var c1={circle:{type:EA,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:_d,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:BA,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},f1={type:Ah,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},nT={type:yh,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function DA(t){var r=t.type,e=t.props,n={};for(var i in e)n[i]=r.defaultProps[e[i]];return n}function iT(t,r){var e=t.props,n=e.transitions,i=e.updateTriggers,a={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(var o in r){var s=r[o],u=t.props[o];o.startsWith("get")&&(u=t.getSubLayerAccessor(u),a.updateTriggers[s]=i[o],n&&(a.transitions[s]=n[o])),a[s]=u}return a}function dW(t){if(Array.isArray(t))return t;switch(xr.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return xr.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}function II(t,r){for(var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},i=e.startRow,a=i===void 0?0:i,o=e.endRow,s=o===void 0?t.length:o,u=a;u<s;u++){var c=t[u],h=c.geometry;if(h)if(h.type==="GeometryCollection"){xr.assert(Array.isArray(h.geometries),"GeoJSON does not have geometries array");for(var p=h.geometries,v=0;v<p.length;v++){var x=p[v];pW(x,n,r,c,u)}}else pW(h,n,r,c,u)}return n}function pW(t,r,e,n,i){var a=t.type,o=t.coordinates,s=r.pointFeatures,u=r.lineFeatures,c=r.polygonFeatures,h=r.polygonOutlineFeatures;if(!z_e(a,o)){xr.warn("".concat(a," coordinates are malformed"))();return}switch(a){case"Point":s.push(e({geometry:t},n,i));break;case"MultiPoint":o.forEach(function(p){s.push(e({geometry:{type:"Point",coordinates:p}},n,i))});break;case"LineString":u.push(e({geometry:t},n,i));break;case"MultiLineString":o.forEach(function(p){u.push(e({geometry:{type:"LineString",coordinates:p}},n,i))});break;case"Polygon":c.push(e({geometry:t},n,i)),o.forEach(function(p){h.push(e({geometry:{type:"LineString",coordinates:p}},n,i))});break;case"MultiPolygon":o.forEach(function(p){c.push(e({geometry:{type:"Polygon",coordinates:p}},n,i)),p.forEach(function(v){h.push(e({geometry:{type:"LineString",coordinates:v}},n,i))})});break;default:}}var N_e={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function z_e(t,r){var e=N_e[t];for(xr.assert(e,"Unknown GeoJSON type ".concat(t));r&&--e>0;)r=r[0];return r&&Number.isFinite(r[0])}et();function mW(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Sd(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?mW(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):mW(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function vW(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function aT(t){return t.geometry.coordinates}function gW(t,r){var e=vW(),n=t.pointFeatures,i=t.lineFeatures,a=t.polygonFeatures,o=t.polygonOutlineFeatures;return e.points.data=n,e.points._dataDiff=r.pointFeatures&&function(){return r.pointFeatures},e.points.getPosition=aT,e.lines.data=i,e.lines._dataDiff=r.lineFeatures&&function(){return r.lineFeatures},e.lines.getPath=aT,e.polygons.data=a,e.polygons._dataDiff=r.polygonFeatures&&function(){return r.polygonFeatures},e.polygons.getPolygon=aT,e.polygonsOutline.data=o,e.polygonsOutline._dataDiff=r.polygonOutlineFeatures&&function(){return r.polygonOutlineFeatures},e.polygonsOutline.getPath=aT,e}function AW(t,r){var e=vW(),n=t.points,i=t.lines,a=t.polygons,o=BH(t,r);return e.points.data={length:n.positions.value.length/n.positions.size,attributes:Sd(Sd({},n.attributes),{},{getPosition:n.positions,instancePickingColors:{size:3,value:o.points}}),properties:n.properties,numericProps:n.numericProps,featureIds:n.featureIds},e.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:Sd(Sd({},i.attributes),{},{getPath:i.positions,instancePickingColors:{size:3,value:o.lines}}),properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},e.lines._pathType="open",e.polygons.data={length:a.polygonIndices.value.length-1,startIndices:a.polygonIndices.value,attributes:Sd(Sd({},a.attributes),{},{getPolygon:a.positions,pickingColors:{size:3,value:o.polygons}}),properties:a.properties,numericProps:a.numericProps,featureIds:a.featureIds},e.polygons._normalize=!1,a.triangles&&(e.polygons.data.attributes.indices=a.triangles.value),e.polygonsOutline.data={length:a.primitivePolygonIndices.value.length-1,startIndices:a.primitivePolygonIndices.value,attributes:Sd(Sd({},a.attributes),{},{getPath:a.positions,instancePickingColors:{size:3,value:o.polygons}}),properties:a.properties,numericProps:a.numericProps,featureIds:a.featureIds},e.polygonsOutline._pathType="open",e}var U_e=["instancePickingColors"];function RI(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=j_e(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function j_e(t,r){if(t){if(typeof t=="string")return yW(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return yW(t,r)}}function yW(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function G_e(t){var r=V_e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function V_e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _W(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function bh(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?_W(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):_W(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var H_e=["points","linestrings","polygons"],W_e=bh(bh(bh(bh(bh(bh({},DA(c1.circle)),DA(c1.icon)),DA(c1.text)),DA(f1)),DA(nT)),{},{stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:function(r){return r.properties.icon}},getText:{type:"accessor",value:function(r){return r.properties.text}},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}}),pp=function(t){Ke(e,t);var r=G_e(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"initializeState",value:function(){this.state={layerProps:{},features:{}}}},{key:"updateState",value:function(i){var a=i.props,o=i.changeFlags;if(o.dataChanged){var s=this.props.data,u=s&&"points"in s&&"polygons"in s&&"lines"in s;this.setState({binary:u}),u?this._updateStateBinary({props:a,changeFlags:o}):this._updateStateJSON({props:a,changeFlags:o})}}},{key:"_updateStateBinary",value:function(i){var a=i.props,o=i.changeFlags,s=AW(a.data,this.encodePickingColor);this.setState({layerProps:s})}},{key:"_updateStateJSON",value:function(i){var a=i.props,o=i.changeFlags,s=dW(a.data),u=this.getSubLayerRow.bind(this),c={},h={};if(Array.isArray(o.dataChanged)){var p=this.state.features;for(var v in p)c[v]=p[v].slice(),h[v]=[];var x=RI(o.dataChanged),E;try{for(x.s();!(E=x.n()).done;){var R=E.value,D=II(s,u,R);for(var H in p)h[H].push(Q2({data:c[H],getIndex:function(J){return J.__source.index},dataRange:R,replace:D[H]}))}}catch($){x.e($)}finally{x.f()}}else c=II(s,u);var W=gW(c,h);this.setState({features:c,featuresDiff:h,layerProps:W})}},{key:"getPickingInfo",value:function(i){var a=this,o=Yt(me(e.prototype),"getPickingInfo",this).call(this,i),s=o.index,u=o.sourceLayer;return o.featureType=H_e.find(function(c){return u.id.startsWith("".concat(a.id,"-").concat(c,"-"))}),s>=0&&u.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(o.index=this.props.data.points.globalFeatureIds.value[s]),o}},{key:"_updateAutoHighlight",value:function(i){var a="".concat(this.id,"-points-"),o=i.featureType==="points",s=RI(this.getSubLayers()),u;try{for(s.s();!(u=s.n()).done;){var c=u.value;c.id.startsWith(a)===o&&c.updateAutoHighlight(i)}}catch(h){s.e(h)}finally{s.f()}}},{key:"_renderPolygonLayer",value:function(){var i=this.props,a=i.extruded,o=i.wireframe,s=this.state.layerProps,u="polygons-fill",c=this.shouldRenderSubLayer(u,s.polygons.data)&&this.getSubLayerClass(u,nT.type);if(c){var h=iT(this,nT.props),p=a&&o;return p||delete h.getLineColor,h.updateTriggers.lineColors=p,new c(h,this.getSubLayerProps({id:u,updateTriggers:h.updateTriggers}),s.polygons)}return null}},{key:"_renderLineLayers",value:function(){var i=this.props,a=i.extruded,o=i.stroked,s=this.state.layerProps,u="polygons-stroke",c="linestrings",h=!a&&o&&this.shouldRenderSubLayer(u,s.polygonsOutline.data)&&this.getSubLayerClass(u,f1.type),p=this.shouldRenderSubLayer(c,s.lines.data)&&this.getSubLayerClass(c,f1.type);if(h||p){var v=iT(this,f1.props);return[h&&new h(v,this.getSubLayerProps({id:u,updateTriggers:v.updateTriggers}),s.polygonsOutline),p&&new p(v,this.getSubLayerProps({id:c,updateTriggers:v.updateTriggers}),s.lines)]}return null}},{key:"_renderPointLayers",value:function(){var i=this.props.pointType,a=this.state,o=a.layerProps,s=a.binary,u=this.props.highlightedObjectIndex;!s&&Number.isFinite(u)&&(u=o.points.data.findIndex(function(se){return se.__source.index===u}));var c=new Set(i.split("+")),h=[],p=RI(c),v;try{for(p.s();!(v=p.n()).done;){var x=v.value,E="points-".concat(x),R=c1[x],D=R&&this.shouldRenderSubLayer(E,o.points.data)&&this.getSubLayerClass(E,R.type);if(D){var H=iT(this,R.props),W=o.points;if(x==="text"&&s){var $=W.data.attributes,J=$.instancePickingColors,B=qm($,U_e);W=bh(bh({},W),{},{data:bh(bh({},W.data),{},{attributes:B})})}h.push(new D(H,this.getSubLayerProps({id:E,updateTriggers:H.updateTriggers,highlightedObjectIndex:u}),W))}}}catch(se){p.e(se)}finally{p.f()}return h}},{key:"renderLayers",value:function(){var i=this.props.extruded,a=this._renderPolygonLayer(),o=this._renderLineLayers(),s=this._renderPointLayers();return[!i&&a,o,s,i&&a]}},{key:"getSubLayerAccessor",value:function(i){var a=this.state.binary;return!a||typeof i!="function"?Yt(me(e.prototype),"getSubLayerAccessor",this).call(this,i):function(o,s){var u=s.data,c=s.index,h=kH(u,c);return i(h,s)}}}]),e}(Go);_(pp,"layerName","GeoJsonLayer");_(pp,"defaultProps",W_e);at();vt();et();et();at();vt();et();var Po={SUM:1,MEAN:2,MIN:3,MAX:4};function bW(t,r){return t+r}function q_e(t,r){return r>t?r:t}function X_e(t,r){return r<t?r:t}function Y_e(t,r){if(Number.isFinite(r))return t.length?r:null;var e=t.map(r).filter(Number.isFinite);return e.length?e.reduce(bW,0)/e.length:null}function K_e(t,r){if(Number.isFinite(r))return t.length?t.length*r:null;var e=t.map(r).filter(Number.isFinite);return e.length?e.reduce(bW,0):null}function Z_e(t,r){if(Number.isFinite(r))return t.length?r:null;var e=t.map(r).filter(Number.isFinite);return e.length?e.reduce(q_e,-1/0):null}function $_e(t,r){if(Number.isFinite(r))return t.length?r:null;var e=t.map(r).filter(Number.isFinite);return e.length?e.reduce(X_e,1/0):null}function FA(t,r,e){var n=Po[t]||Po.SUM;switch(r=J_e(r,e),n){case Po.MIN:return function(i){return $_e(i,r)};case Po.SUM:return function(i){return K_e(i,r)};case Po.MEAN:return function(i){return Y_e(i,r)};case Po.MAX:return function(i){return Z_e(i,r)};default:return null}}function J_e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Number.isFinite(t)?t:function(e){return r.index=e.index,t(e.source,r)}}function xW(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(e){return r.indices=e.map(function(n){return n.index}),t(e.map(function(n){return n.source}),r)}}var NA,oT,wW={projectPoints:!1,viewport:null,createBufferObjects:!0,moduleSettings:{}},Ed=3402823466e29,LI=[32775,32774],kI=[32776,32774],TW=[32776,32775],BI=(NA={},_(NA,Po.SUM,32774),_(NA,Po.MEAN,32774),_(NA,Po.MIN,LI),_(NA,Po.MAX,kI),NA);var SW={size:1,operation:Po.SUM,needMin:!1,needMax:!1,combineMaxMin:!1},EW=4;var rbt={format:34836,type:5126,border:0,mipmaps:!1,parameters:(oT={},_(oT,10240,9728),_(oT,10241,9728),oT),dataFormat:6408,width:1,height:1};var CW=`#define SHADER_NAME gpu-aggregation-to-grid-vs

attribute vec3 positions;
attribute vec3 positions64Low;
attribute vec3 weights;
uniform vec2 cellSize;
uniform vec2 gridSize;
uniform bool projectPoints;
uniform vec2 translation;
uniform vec3 scaling;

varying vec3 vWeights;

vec2 project_to_pixel(vec4 pos) {
  vec4 result;
  pos.xy = pos.xy/pos.w;
  result = pos + vec4(translation, 0., 0.);
  result.xy = scaling.z > 0. ? result.xy * scaling.xy : result.xy;
  return result.xy;
}

void main(void) {

  vWeights = weights;

  vec4 windowPos = vec4(positions, 1.);
  if (projectPoints) {
    windowPos = project_position_to_clipspace(positions, positions64Low, vec3(0));
  }

  vec2 pos = project_to_pixel(windowPos);

  vec2 pixelXY64[2];
  pixelXY64[0] = vec2(pos.x, 0.);
  pixelXY64[1] = vec2(pos.y, 0.);
  vec2 gridXY64[2];
  gridXY64[0] = div_fp64(pixelXY64[0], vec2(cellSize.x, 0));
  gridXY64[1] = div_fp64(pixelXY64[1], vec2(cellSize.y, 0));
  float x = floor(gridXY64[0].x);
  float y = floor(gridXY64[1].x);
  pos = vec2(x, y);
  pos = (pos * (2., 2.) / (gridSize)) - (1., 1.);
  vec2 offset = 1.0 / gridSize;
  pos = pos + offset;

  gl_Position = vec4(pos, 0.0, 1.0);
  gl_PointSize = 1.0;
}
`;var PW=`#define SHADER_NAME gpu-aggregation-to-grid-fs

precision highp float;

varying vec3 vWeights;

void main(void) {
  gl_FragColor = vec4(vWeights, 1.0);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;var OW=`#version 300 es
#define SHADER_NAME gpu-aggregation-all-vs-64

in vec2 position;
uniform ivec2 gridSize;
out vec2 vTextureCoord;

void main(void) {
  vec2 pos = vec2(-1.0, -1.0);
  vec2 offset = 1.0 / vec2(gridSize);
  pos = pos + offset;

  gl_Position = vec4(pos, 0.0, 1.0);

  int yIndex = gl_InstanceID / gridSize[0];
  int xIndex = gl_InstanceID - (yIndex * gridSize[0]);

  vec2 yIndexFP64 = vec2(float(yIndex), 0.);
  vec2 xIndexFP64 = vec2(float(xIndex), 0.);
  vec2 gridSizeYFP64 = vec2(gridSize[1], 0.);
  vec2 gridSizeXFP64 = vec2(gridSize[0], 0.);

  vec2 texCoordXFP64 = div_fp64(yIndexFP64, gridSizeYFP64);
  vec2 texCoordYFP64 = div_fp64(xIndexFP64, gridSizeXFP64);

  vTextureCoord = vec2(texCoordYFP64.x, texCoordXFP64.x);
  gl_PointSize = 1.0;
}
`;var MW=`#version 300 es
#define SHADER_NAME gpu-aggregation-all-fs

precision highp float;

in vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform bool combineMaxMin;
out vec4 fragColor;
void main(void) {
  vec4 textureColor = texture(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
  if (textureColor.a == 0.) {
    discard;
  }
  fragColor.rgb = textureColor.rgb;
  fragColor.a = combineMaxMin ? textureColor.r : textureColor.a;
}
`;var IW=`#define SHADER_NAME gpu-aggregation-transform-mean-vs
attribute vec4 aggregationValues;
varying vec4 meanValues;

void main()
{
  bool isCellValid = bool(aggregationValues.w > 0.);
  meanValues.xyz = isCellValid ? aggregationValues.xyz/aggregationValues.w : vec3(0, 0, 0);
  meanValues.w = aggregationValues.w;
  gl_PointSize = 1.0;
}
`;et();var sT,Q_e=(sT={},_(sT,10240,9728),_(sT,10241,9728),sT);function zA(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r.width,n=e===void 0?1:e,i=r.height,a=i===void 0?1:i,o=r.data,s=o===void 0?null:o,u=r.unpackFlipY,c=u===void 0?!0:u,h=r.parameters,p=h===void 0?Q_e:h,v=new la(t,{data:s,format:En(t)?34836:6408,type:5126,border:0,mipmaps:!1,parameters:p,dataFormat:6408,width:n,height:a,unpackFlipY:c});return v}function h1(t,r){var e=r.id,n=r.width,i=n===void 0?1:n,a=r.height,o=a===void 0?1:a,s=r.texture,u=new Ea(t,{id:e,width:i,height:o,attachments:_({},36064,s)});return u}function e1e(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=t1e(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function t1e(t,r){if(t){if(typeof t=="string")return RW(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return RW(t,r)}}function RW(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function LW(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function ul(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?LW(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):LW(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var r1e=["aggregationBuffer","maxMinBuffer","minBuffer","maxBuffer"],kW={maxData:"maxBuffer",minData:"minBuffer",maxMinData:"maxMinBuffer"},n1e=[ni.WEBGL2,ni.COLOR_ATTACHMENT_RGBA32F,ni.BLEND_EQUATION_MINMAX,ni.FLOAT_BLEND,ni.TEXTURE_FLOAT],ll=function(){function t(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ce(this,t),this.id=e.id||"gpu-grid-aggregator",this.gl=r,this.state={weightAttributes:{},textures:{},meanTextures:{},buffers:{},framebuffers:{},maxMinFramebuffers:{},minFramebuffers:{},maxFramebuffers:{},equations:{},resources:{},results:{}},this._hasGPUSupport=En(r)&&Mu(this.gl,ni.BLEND_EQUATION_MINMAX,ni.COLOR_ATTACHMENT_RGBA32F,ni.TEXTURE_FLOAT),this._hasGPUSupport&&this._setupModels()}return ve(t,[{key:"delete",value:function(){var e=this.gridAggregationModel,n=this.allAggregationModel,i=this.meanTransform,a=this.state,o=a.textures,s=a.framebuffers,u=a.maxMinFramebuffers,c=a.minFramebuffers,h=a.maxFramebuffers,p=a.meanTextures,v=a.resources;e?.delete(),n?.delete(),i?.delete(),a1e([s,o,u,c,h,p,v])}},{key:"run",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.setState({results:{}});var n=this._normalizeAggregationParams(e);return this._hasGPUSupport||xr.log(1,"GPUGridAggregator: not supported")(),this._runAggregation(n)}},{key:"getData",value:function(e){var n={},i=this.state.results;i[e].aggregationData||(i[e].aggregationData=i[e].aggregationBuffer.getData()),n.aggregationData=i[e].aggregationData;for(var a in kW){var o=kW[a];(i[e][a]||i[e][o])&&(i[e][a]=i[e][a]||i[e][o].getData(),n[a]=i[e][a])}return n}},{key:"updateShaders",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.setState({shaderOptions:e,modelDirty:!0})}},{key:"_normalizeAggregationParams",value:function(e){var n=ul(ul({},wW),e),i=n.weights;return i&&(n.weights=i1e(i)),n}},{key:"setState",value:function(e){Object.assign(this.state,e)}},{key:"_getAggregateData",value:function(e){var n={},i=this.state,a=i.textures,o=i.framebuffers,s=i.maxMinFramebuffers,u=i.minFramebuffers,c=i.maxFramebuffers,h=i.resources,p=e.weights;for(var v in p){n[v]={};var x=p[v],E=x.needMin,R=x.needMax,D=x.combineMaxMin;n[v].aggregationTexture=a[v],n[v].aggregationBuffer=tp(o[v],{target:p[v].aggregationBuffer,sourceType:5126}),E&&R&&D?(n[v].maxMinBuffer=tp(s[v],{target:p[v].maxMinBuffer,sourceType:5126}),n[v].maxMinTexture=h["".concat(v,"-maxMinTexture")]):(E&&(n[v].minBuffer=tp(u[v],{target:p[v].minBuffer,sourceType:5126}),n[v].minTexture=h["".concat(v,"-minTexture")]),R&&(n[v].maxBuffer=tp(c[v],{target:p[v].maxBuffer,sourceType:5126}),n[v].maxTexture=h["".concat(v,"-maxTexture")]))}return this._trackGPUResultBuffers(n,p),n}},{key:"_renderAggregateData",value:function(e){var n=e.cellSize,i=e.projectPoints,a=e.attributes,o=e.moduleSettings,s=e.numCol,u=e.numRow,c=e.weights,h=e.translation,p=e.scaling,v=this.state,x=v.maxMinFramebuffers,E=v.minFramebuffers,R=v.maxFramebuffers,D=[s,u],H={blend:!0,depthTest:!1,blendFunc:[1,1]},W={cellSize:n,gridSize:D,projectPoints:i,translation:h,scaling:p};for(var $ in c){var J=c[$],B=J.needMin,se=J.needMax,V=B&&se&&c[$].combineMaxMin;this._renderToWeightsTexture({id:$,parameters:H,moduleSettings:o,uniforms:W,gridSize:D,attributes:a,weights:c}),V?this._renderToMaxMinTexture({id:$,parameters:ul(ul({},H),{},{blendEquation:TW}),gridSize:D,minOrMaxFb:x[$],clearParams:{clearColor:[0,0,0,Ed]},combineMaxMin:V}):(B&&this._renderToMaxMinTexture({id:$,parameters:ul(ul({},H),{},{blendEquation:LI}),gridSize:D,minOrMaxFb:E[$],clearParams:{clearColor:[Ed,Ed,Ed,0]},combineMaxMin:V}),se&&this._renderToMaxMinTexture({id:$,parameters:ul(ul({},H),{},{blendEquation:kI}),gridSize:D,minOrMaxFb:R[$],clearParams:{clearColor:[0,0,0,0]},combineMaxMin:V}))}}},{key:"_renderToMaxMinTexture",value:function(e){var n=e.id,i=e.parameters,a=e.gridSize,o=e.minOrMaxFb,s=e.combineMaxMin,u=e.clearParams,c=u===void 0?{}:u,h=this.state.framebuffers,p=this.gl,v=this.allAggregationModel;Aa(p,ul(ul({},c),{},{framebuffer:o,viewport:[0,0,a[0],a[1]]}),function(){p.clear(16384),v.draw({parameters:i,uniforms:{uSampler:h[n].texture,gridSize:a,combineMaxMin:s}})})}},{key:"_renderToWeightsTexture",value:function(e){var n=e.id,i=e.parameters,a=e.moduleSettings,o=e.uniforms,s=e.gridSize,u=e.weights,c=this.state,h=c.framebuffers,p=c.equations,v=c.weightAttributes,x=this.gl,E=this.gridAggregationModel,R=u[n].operation,D=R===Po.MIN?[Ed,Ed,Ed,0]:[0,0,0,0];if(Aa(x,{framebuffer:h[n],viewport:[0,0,s[0],s[1]],clearColor:D},function(){x.clear(16384);var B={weights:v[n]};E.draw({parameters:ul(ul({},i),{},{blendEquation:p[n]}),moduleSettings:a,uniforms:o,attributes:B})}),R===Po.MEAN){var H=this.state,W=H.meanTextures,$=H.textures,J={_sourceTextures:{aggregationValues:W[n]},_targetTexture:$[n],elementCount:$[n].width*$[n].height};this.meanTransform?this.meanTransform.update(J):this.meanTransform=u1e(x,J),this.meanTransform.run({parameters:{blend:!1,depthTest:!1}}),h[n].attach(_({},36064,$[n]))}}},{key:"_runAggregation",value:function(e){this._updateModels(e),this._setupFramebuffers(e),this._renderAggregateData(e);var n=this._getAggregateData(e);return this.setState({results:n}),n}},{key:"_setupFramebuffers",value:function(e){var n=this.state,i=n.textures,a=n.framebuffers,o=n.maxMinFramebuffers,s=n.minFramebuffers,u=n.maxFramebuffers,c=n.meanTextures,h=n.equations,p=e.weights,v=e.numCol,x=e.numRow,E={width:v,height:x};for(var R in p){var D=p[R],H=D.needMin,W=D.needMax,$=D.combineMaxMin,J=D.operation;i[R]=p[R].aggregationTexture||i[R]||zA(this.gl,{id:"".concat(R,"-texture"),width:v,height:x}),i[R].resize(E);var B=i[R];J===Po.MEAN&&(c[R]=c[R]||zA(this.gl,{id:"".concat(R,"-mean-texture"),width:v,height:x}),c[R].resize(E),B=c[R]),a[R]?a[R].attach(_({},36064,B)):a[R]=h1(this.gl,{id:"".concat(R,"-fb"),width:v,height:x,texture:B}),a[R].resize(E),h[R]=BI[J]||BI.SUM,(H||W)&&(H&&W&&$?o[R]||(B=p[R].maxMinTexture||this._getMinMaxTexture("".concat(R,"-maxMinTexture")),o[R]=h1(this.gl,{id:"".concat(R,"-maxMinFb"),texture:B})):(H&&(s[R]||(B=p[R].minTexture||this._getMinMaxTexture("".concat(R,"-minTexture")),s[R]=h1(this.gl,{id:"".concat(R,"-minFb"),texture:B}))),W&&(u[R]||(B=p[R].maxTexture||this._getMinMaxTexture("".concat(R,"-maxTexture")),u[R]=h1(this.gl,{id:"".concat(R,"-maxFb"),texture:B})))))}}},{key:"_getMinMaxTexture",value:function(e){var n=this.state.resources;return n[e]||(n[e]=zA(this.gl,{id:"resourceName"})),n[e]}},{key:"_setupModels",value:function(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.numCol,a=i===void 0?0:i,o=n.numRow,s=o===void 0?0:o,u=this.gl,c=this.state.shaderOptions;if((e=this.gridAggregationModel)===null||e===void 0||e.delete(),this.gridAggregationModel=o1e(u,c),!this.allAggregationModel){var h=a*s;this.allAggregationModel=s1e(u,h)}}},{key:"_setupWeightAttributes",value:function(e){var n=this.state.weightAttributes,i=e.weights;for(var a in i)n[a]=e.attributes[a]}},{key:"_trackGPUResultBuffers",value:function(e,n){var i=this.state.resources;for(var a in e)if(e[a]){var o=e1e(r1e),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;if(e[a][u]&&n[a][u]!==e[a][u]){var c="gpu-result-".concat(a,"-").concat(u);i[c]&&i[c].delete(),i[c]=e[a][u]}}}catch(h){o.e(h)}finally{o.f()}}}},{key:"_updateModels",value:function(e){var n=e.vertexCount,i=e.attributes,a=e.numCol,o=e.numRow,s=this.state.modelDirty;s&&(this._setupModels(e),this.setState({modelDirty:!1})),this._setupWeightAttributes(e),this.gridAggregationModel.setVertexCount(n),this.gridAggregationModel.setAttributes(i),this.allAggregationModel.setInstanceCount(a*o)}}],[{key:"getAggregationData",value:function(e){var n=e.aggregationData,i=e.maxData,a=e.minData,o=e.maxMinData,s=e.pixelIndex,u=s*EW,c={};return n&&(c.cellCount=n[u+3],c.cellWeight=n[u]),o?(c.maxCellWieght=o[0],c.minCellWeight=o[3]):(i&&(c.maxCellWieght=i[0],c.totalCount=i[3]),a&&(c.minCellWeight=a[0],c.totalCount=i[3])),c}},{key:"getCellData",value:function(e){for(var n=e.countsData,i=e.size,a=i===void 0?1:i,o=n.length/4,s=new Float32Array(o*a),u=new Uint32Array(o),c=0;c<o;c++){for(var h=0;h<a;h++)s[c*a+h]=n[c*4+h];u[c]=n[c*4+3]}return{cellCounts:u,cellWeights:s}}},{key:"isSupported",value:function(e){return Mu(e,n1e)}}]),t}();function i1e(t){var r={};for(var e in t)r[e]=ul(ul({},SW),t[e]);return r}function a1e(t){t=Array.isArray(t)?t:[t],t.forEach(function(r){for(var e in r)r[e].delete()})}function o1e(t,r){var e=mA({vs:CW,fs:PW,modules:[Ug,La]},r);return new Ni(t,ul({id:"Gird-Aggregation-Model",vertexCount:1,drawMode:0},e))}function s1e(t,r){return new Ni(t,{id:"All-Aggregation-Model",vs:OW,fs:MW,modules:[Ug],vertexCount:1,drawMode:0,isInstanced:!0,instanceCount:r,attributes:{position:[0,0]}})}function u1e(t,r){return new Il(t,ul({vs:IW,_targetTextureVarying:"meanValues"},r))}at();vt();et();var Xc=[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]];function Cd(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float32Array,n;if(Number.isFinite(t[0]))n=new e(t);else{n=new e(t.length*4);for(var i=0,a=0;a<t.length;a++){var o=t[a];n[i++]=o[0],n[i++]=o[1],n[i++]=o[2],n[i++]=Number.isFinite(o[3])?o[3]:255}}if(r)for(var s=0;s<n.length;s++)n[s]/=255;return n}var BW=`#define SHADER_NAME screen-grid-layer-vertex-shader
#define RANGE_COUNT 6

attribute vec3 positions;
attribute vec3 instancePositions;
attribute vec4 instanceCounts;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform vec3 cellScale;
uniform vec4 minColor;
uniform vec4 maxColor;
uniform vec4 colorRange[RANGE_COUNT];
uniform vec2 colorDomain;
uniform bool shouldUseMinMax;
uniform sampler2D maxTexture;

varying vec4 vColor;
varying float vSampleCount;

vec4 quantizeScale(vec2 domain, vec4 range[RANGE_COUNT], float value) {
  vec4 outColor = vec4(0., 0., 0., 0.);
  if (value >= domain.x && value <= domain.y) {
    float domainRange = domain.y - domain.x;
    if (domainRange <= 0.) {
      outColor = colorRange[0];
    } else {
      float rangeCount = float(RANGE_COUNT);
      float rangeStep = domainRange / rangeCount;
      float idx = floor((value - domain.x) / rangeStep);
      idx = clamp(idx, 0., rangeCount - 1.);
      int intIdx = int(idx);
      outColor = colorRange[intIdx];
    }
  }
  outColor = outColor / 255.;
  return outColor;
}

void main(void) {
  vSampleCount = instanceCounts.a;

  float weight = instanceCounts.r;
  float maxWeight = texture2D(maxTexture, vec2(0.5)).r;

  float step = weight / maxWeight;
  vec4 minMaxColor = mix(minColor, maxColor, step) / 255.;

  vec2 domain = colorDomain;
  float domainMaxValid = float(colorDomain.y != 0.);
  domain.y = mix(maxWeight, colorDomain.y, domainMaxValid);
  vec4 rangeColor = quantizeScale(domain, colorRange, weight);

  float rangeMinMax = float(shouldUseMinMax);
  vec4 color = mix(rangeColor, minMaxColor, rangeMinMax);
  vColor = vec4(color.rgb, color.a * opacity);
  picking_setPickingColor(instancePickingColors);

  gl_Position = vec4(instancePositions + positions * cellScale, 1.);
}
`;var DW=`#define SHADER_NAME screen-grid-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying float vSampleCount;

void main(void) {
  if (vSampleCount <= 0.0) {
    discard;
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;function FW(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function DI(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?FW(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):FW(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function l1e(t){var r=c1e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function c1e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var f1e=[0,0,0,0],h1e=[0,255,0,255],p1e=["minColor","maxColor","colorRange","colorDomain"],d1e={cellSizePixels:{value:100,min:1},cellMarginPixels:{value:2,min:0,max:5},colorDomain:null,colorRange:Xc},UA=function(t){Ke(e,t);var r=l1e(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"getShaders",value:function(){return{vs:BW,fs:DW,modules:[Wa]}}},{key:"initializeState",value:function(){var i=this.context.gl,a=this.getAttributeManager();a.addInstanced({instancePositions:{size:3,update:this.calculateInstancePositions},instanceCounts:{size:4,noAlloc:!0}}),this.setState({model:this._getModel(i)})}},{key:"shouldUpdateState",value:function(i){var a=i.changeFlags;return a.somethingChanged}},{key:"updateState",value:function(i){Yt(me(e.prototype),"updateState",this).call(this,i);var a=i.oldProps,o=i.props,s=i.changeFlags,u=this.getAttributeManager();o.numInstances!==a.numInstances?u.invalidateAll():a.cellSizePixels!==o.cellSizePixels&&u.invalidate("instancePositions"),this._updateUniforms(a,o,s)}},{key:"draw",value:function(i){var a=i.uniforms,o=this.props,s=o.parameters,u=o.maxTexture,c=this.props.minColor||f1e,h=this.props.maxColor||h1e,p=this.props.colorDomain||[1,0],v=this.state.model;v.setUniforms(a).setUniforms({minColor:c,maxColor:h,maxTexture:u,colorDomain:p}).draw({parameters:DI({depthTest:!1,depthMask:!1},s)})}},{key:"calculateInstancePositions",value:function(i,a){for(var o=a.numInstances,s=this.context.viewport,u=s.width,c=s.height,h=this.props.cellSizePixels,p=Math.ceil(u/h),v=i.value,x=i.size,E=0;E<o;E++){var R=E%p,D=Math.floor(E/p);v[E*x+0]=R*h/u*2-1,v[E*x+1]=1-D*h/c*2,v[E*x+2]=0}}},{key:"_getModel",value:function(i){return new Ni(i,DI(DI({},this.getShaders()),{},{id:this.props.id,geometry:new Bi({drawMode:6,attributes:{positions:new Float32Array([0,0,0,1,0,0,1,1,0,0,1,0])}}),isInstanced:!0}))}},{key:"_shouldUseMinMax",value:function(){var i=this.props,a=i.minColor,o=i.maxColor,s=i.colorDomain,u=i.colorRange;return a||o?(xr.deprecated("ScreenGridLayer props: minColor and maxColor","colorRange, colorDomain")(),!0):!(s||u)}},{key:"_updateUniforms",value:function(i,a,o){var s=this.state.model;if(p1e.some(function(D){return i[D]!==a[D]})&&s.setUniforms({shouldUseMinMax:this._shouldUseMinMax()}),i.colorRange!==a.colorRange&&s.setUniforms({colorRange:Cd(a.colorRange)}),i.cellMarginPixels!==a.cellMarginPixels||i.cellSizePixels!==a.cellSizePixels||o.viewportChanged){var u=this.context.viewport,c=u.width,h=u.height,p=this.props,v=p.cellSizePixels,x=p.cellMarginPixels,E=v>x?x:0,R=new Float32Array([(v-E)/c*2,-(v-E)/h*2,1]);s.setUniforms({cellScale:R})}}}],[{key:"isSupported",value:function(i){return Mu(i,[ni.TEXTURE_FLOAT])}}]),e}(aa);_(UA,"layerName","ScreenGridCellLayer");_(UA,"defaultProps",d1e);at();vt();et();at();vt();et();function NW(t,r){var e={};for(var n in t)r.includes(n)||(e[n]=t[n]);return e}function zW(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=m1e(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function m1e(t,r){if(t){if(typeof t=="string")return UW(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return UW(t,r)}}function UW(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function v1e(t){var r=g1e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function g1e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Sf=function(t){Ke(e,t);var r=v1e(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"initializeAggregationLayer",value:function(i){Yt(me(e.prototype),"initializeState",this).call(this,this.context),this.setState({ignoreProps:NW(this.constructor._propTypes,i.data.props),dimensions:i})}},{key:"updateState",value:function(i){Yt(me(e.prototype),"updateState",this).call(this,i);var a=i.changeFlags;if(a.extensionsChanged){var o=this.getShaders({});o&&o.defines&&(o.defines.NON_INSTANCED_MODEL=1),this.updateShaders(o)}this._updateAttributes()}},{key:"updateAttributes",value:function(i){this.setState({changedAttributes:i})}},{key:"getAttributes",value:function(){return this.getAttributeManager().getShaderAttributes()}},{key:"getModuleSettings",value:function(){var i=this.context,a=i.viewport,o=i.mousePosition,s=i.gl,u=Object.assign(Object.create(this.props),{viewport:a,mousePosition:o,pickingActive:0,devicePixelRatio:Cl(s)});return u}},{key:"updateShaders",value:function(i){}},{key:"isAggregationDirty",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.props,s=i.oldProps,u=i.changeFlags,c=a.compareAll,h=c===void 0?!1:c,p=a.dimension,v=this.state.ignoreProps,x=p.props,E=p.accessors,R=E===void 0?[]:E,D=u.updateTriggersChanged;if(u.dataChanged)return!0;if(D){if(D.all)return!0;var H=zW(R),W;try{for(H.s();!(W=H.n()).done;){var $=W.value;if(D[$])return!0}}catch(V){H.e(V)}finally{H.f()}}if(h)return u.extensionsChanged?!0:dA({oldProps:s,newProps:o,ignoreProps:v,propTypes:this.constructor._propTypes});var J=zW(x),B;try{for(J.s();!(B=J.n()).done;){var se=B.value;if(o[se]!==s[se])return!0}}catch(V){J.e(V)}finally{J.f()}return!1}},{key:"isAttributeChanged",value:function(i){var a=this.state.changedAttributes;return i?a&&a[i]!==void 0:!A1e(a)}},{key:"_getAttributeManager",value:function(){return new yd(this.context.gl,{id:this.props.id,stats:this.context.stats})}}]),e}(Go);_(Sf,"layerName","AggregationLayer");function A1e(t){var r=!0;for(var e in t){r=!1;break}return r}Mn();at();vt();et();function y1e(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=_1e(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function _1e(t,r){if(t){if(typeof t=="string")return jW(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return jW(t,r)}}function jW(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function uT(t,r,e){var n=e;return n.domain=function(){return t},n.range=function(){return r},n}function GW(t,r){var e=function(i){return P1e(t,r,i)};return uT(t,r,e)}function b1e(t,r){var e=function(i){return O1e(t,r,i)};return uT(t,r,e)}function x1e(t,r){for(var e=t.sort(VW),n=0,i=Math.max(1,r.length),a=new Array(i-1);++n<i;)a[n-1]=w1e(e,n/i);var o=function(u){return S1e(a,r,u)};return o.thresholds=function(){return a},uT(t,r,o)}function VW(t,r){return t-r}function w1e(t,r){var e=t.length;if(r<=0||e<2)return t[0];if(r>=1)return t[e-1];var n=(e-1)*r,i=Math.floor(n),a=t[i],o=t[i+1];return a+(o-a)*(n-i)}function T1e(t,r){for(var e=0,n=t.length;e<n;){var i=e+n>>>1;VW(t[i],r)>0?n=i:e=i+1}return e}function S1e(t,r,e){return r[T1e(t,e)]}function E1e(t,r,e,n){var i="".concat(n),a=r.get(i);return a===void 0&&(a=t.push(n),r.set(i,a)),e[(a-1)%e.length]}function C1e(t,r){var e=new Map,n=[],i=y1e(t),a;try{for(i.s();!(a=i.n()).done;){var o=a.value,s="".concat(o);e.has(s)||e.set(s,n.push(o))}}catch(c){i.e(c)}finally{i.f()}var u=function(h){return E1e(n,e,r,h)};return uT(t,r,u)}function P1e(t,r,e){var n=t[1]-t[0];if(n<=0)return xr.warn("quantizeScale: invalid domain, returning range[0]")(),r[0];var i=n/r.length,a=Math.floor((e-t[0])/i),o=Math.max(Math.min(a,r.length-1),0);return r[o]}function O1e(t,r,e){return(e-t[0])/(t[1]-t[0])*(r[1]-r[0])+r[0]}function HW(t){return t!=null}function M1e(t){var r=[];return t.forEach(function(e){!r.includes(e)&&HW(e)&&r.push(e)}),r}function WW(t,r){var e=typeof r=="function"?t.map(r):t;return e.filter(HW)}function qW(t,r){return WW(t,r)}function XW(t,r){return M1e(WW(t,r))}function YW(t,r,e){return Math.max(r,Math.min(e,t))}function KW(t){switch(t){case"quantize":return GW;case"linear":return b1e;case"quantile":return x1e;case"ordinal":return C1e;default:return GW}}function ZW(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=I1e(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function I1e(t,r){if(t){if(typeof t=="string")return $W(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return $W(t,r)}}function $W(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var QW=function(r){return r.length},R1e=3402823466e29,e7=function(r){return r.points},t7=function(r){return r.index},JW=function(r,e){return r<e?-1:r>e?1:r>=e?0:NaN},L1e={getValue:QW,getPoints:e7,getIndex:t7,filterData:null},jA=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:L1e;ce(this,t),_(this,"maxCount",void 0),_(this,"maxValue",void 0),_(this,"minValue",void 0),_(this,"totalCount",void 0),_(this,"aggregatedBins",void 0),_(this,"sortedBins",void 0),_(this,"binMap",void 0),this.aggregatedBins=this.getAggregatedBins(r,e),this._updateMinMaxValues(),this.binMap=this.getBinMap()}return ve(t,[{key:"getAggregatedBins",value:function(e,n){for(var i=n.getValue,a=i===void 0?QW:i,o=n.getPoints,s=o===void 0?e7:o,u=n.getIndex,c=u===void 0?t7:u,h=n.filterData,p=typeof h=="function",v=e.length,x=[],E=0,R=0;R<v;R++){var D=e[R],H=s(D),W=c(D),$=p?H.filter(h):H;D.filteredPoints=p?$:null;var J=$.length?a($):null;J!=null&&(x[E]={i:Number.isFinite(W)?W:R,value:J,counts:$.length},E++)}return x}},{key:"_percentileToIndex",value:function(e){var n=this.sortedBins.length;if(n<2)return[0,0];var i=e.map(function(h){return YW(h,0,100)}),a=Ot(i,2),o=a[0],s=a[1],u=Math.ceil(o/100*(n-1)),c=Math.floor(s/100*(n-1));return[u,c]}},{key:"getBinMap",value:function(){var e={},n=ZW(this.aggregatedBins),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;e[a.i]=a}}catch(o){n.e(o)}finally{n.f()}return e}},{key:"_updateMinMaxValues",value:function(){var e=0,n=0,i=R1e,a=0,o=ZW(this.aggregatedBins),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;e=e>u.counts?e:u.counts,n=n>u.value?n:u.value,i=i<u.value?i:u.value,a+=u.counts}}catch(c){o.e(c)}finally{o.f()}this.maxCount=e,this.maxValue=n,this.minValue=i,this.totalCount=a}},{key:"getValueRange",value:function(e){if(this.sortedBins||(this.sortedBins=this.aggregatedBins.sort(function(o,s){return JW(o.value,s.value)})),!this.sortedBins.length)return[];var n=0,i=this.sortedBins.length-1;if(Array.isArray(e)){var a=this._percentileToIndex(e);n=a[0],i=a[1]}return[this.sortedBins[n].value,this.sortedBins[i].value]}},{key:"getValueDomainByScale",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=Ot(n,2),a=i[0],o=a===void 0?0:a,s=i[1],u=s===void 0?100:s;if(this.sortedBins||(this.sortedBins=this.aggregatedBins.sort(function(h,p){return JW(h.value,p.value)})),!this.sortedBins.length)return[];var c=this._percentileToIndex([o,u]);return this._getScaleDomain(e,c)}},{key:"_getScaleDomain",value:function(e,n){var i=Ot(n,2),a=i[0],o=i[1],s=this.sortedBins;switch(e){case"quantize":case"linear":return[s[a].value,s[o].value];case"quantile":return qW(s.slice(a,o+1),function(u){return u.value});case"ordinal":return XW(s,function(u){return u.value});default:return[s[a].value,s[o].value]}}}]),t}();et();Mn();var n7=6378e3;function lT(t){return Number.isFinite(t)?t:0}function cT(t,r){for(var e=t.positions.value,n=1/0,i=-1/0,a=1/0,o=-1/0,s,u,c=0;c<r;c++)u=e[c*3],s=e[c*3+1],n=s<n?s:n,i=s>i?s:i,a=u<a?u:a,o=u>o?u:o;var h={xMin:lT(a),xMax:lT(o),yMin:lT(n),yMax:lT(i)};return h}function k1e(t,r,e,n){var i=n.width,a=n.height,o=e===yn.CARTESIAN?[-i/2,-a/2]:[-180,-90];xr.assert(e===yn.CARTESIAN||e===yn.LNGLAT||e===yn.DEFAULT);var s=t.xMin,u=t.yMin;return[-1*(r7(s-o[0],r.xOffset)+o[0]),-1*(r7(u-o[1],r.yOffset)+o[1])]}function r7(t,r){var e=t<0?-1:1,n=e<0?Math.abs(t)+r:Math.abs(t);return n=Math.floor(n/r)*r,n*e}function FI(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e)return{xOffset:r,yOffset:r};var n=t.yMin,i=t.yMax,a=(n+i)/2;return B1e(r,a)}function fT(t,r,e,n){var i=FI(t,r,n!==yn.CARTESIAN),a=k1e(t,i,n,e),o=t.xMin,s=t.yMin,u=t.xMax,c=t.yMax,h=u-o+i.xOffset,p=c-s+i.yOffset,v=Math.ceil(h/i.xOffset),x=Math.ceil(p/i.yOffset);return{gridOffset:i,translation:a,width:h,height:p,numCol:v,numRow:x}}function B1e(t,r){var e=D1e(t),n=F1e(r,t);return{yOffset:e,xOffset:n}}function D1e(t){return t/n7*(180/Math.PI)}function F1e(t,r){return r/n7*(180/Math.PI)/Math.cos(t*Math.PI/180)}function i7(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function N1e(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?i7(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i7(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function z1e(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=U1e(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function U1e(t,r){if(t){if(typeof t=="string")return a7(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return a7(t,r)}}function a7(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function GA(t,r){var e=j1e(t,r),n=G1e(e);return{gridHash:e.gridHash,gridOffset:e.gridOffset,data:n}}function j1e(t,r){var e=t.data,n=e===void 0?[]:e,i=t.cellSize,a=r.attributes,o=r.viewport,s=r.projectPoints,u=r.numInstances,c=a.positions.value,h=a.positions.getAccessor(),p=h.size,v=r.boundingBox||V1e(a.positions,u),x=r.posOffset||[180,90],E=r.gridOffset||FI(v,i);if(E.xOffset<=0||E.yOffset<=0)return{gridHash:{},gridOffset:E};var R=o.width,D=o.height,H=Math.ceil(R/E.xOffset),W=Math.ceil(D/E.yOffset),$={},J=xs(n),B=J.iterable,se=J.objectInfo,V=new Array(3),X=z1e(B),I;try{for(X.s();!(I=X.n()).done;){var O=I.value;se.index++,V[0]=c[se.index*p],V[1]=c[se.index*p+1],V[2]=p>=3?c[se.index*p+2]:0;var U=s?o.project(V):V,re=Ot(U,2),ee=re[0],pe=re[1];if(Number.isFinite(ee)&&Number.isFinite(pe)){var je=Math.floor((pe+x[1])/E.yOffset),qe=Math.floor((ee+x[0])/E.xOffset);if(!s||qe>=0&&qe<H&&je>=0&&je<W){var We="".concat(je,"-").concat(qe);$[We]=$[We]||{count:0,points:[],lonIdx:qe,latIdx:je},$[We].count+=1,$[We].points.push({source:O,index:se.index})}}}}catch(ot){X.e(ot)}finally{X.f()}return{gridHash:$,gridOffset:E,offsets:[x[0]*-1,x[1]*-1]}}function G1e(t){var r=t.gridHash,e=t.gridOffset,n=t.offsets,i=new Array(Object.keys(r).length),a=0;for(var o in r){var s=o.split("-"),u=parseInt(s[0],10),c=parseInt(s[1],10),h=a++;i[h]=N1e({index:h,position:[n[0]+e.xOffset*c,n[1]+e.yOffset*u]},r[o])}return i}function V1e(t,r){for(var e=t.value,n=t.getAccessor(),i=n.size,a=1/0,o=-1/0,s=1/0,u=-1/0,c,h,p=0;p<r;p++)h=e[p*i],c=e[p*i+1],Number.isFinite(h)&&Number.isFinite(c)&&(a=c<a?c:a,o=c>o?c:o,s=h<s?h:s,u=h>u?h:u);return{xMin:s,xMax:u,yMin:a,yMax:o}}function H1e(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=W1e(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function W1e(t,r){if(t){if(typeof t=="string")return o7(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return o7(t,r)}}function o7(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function q1e(t){var r=X1e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function X1e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Zm=function(t){Ke(e,t);var r=q1e(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"initializeAggregationLayer",value:function(i){var a=i.dimensions,o=this.context.gl;Yt(me(e.prototype),"initializeAggregationLayer",this).call(this,a),this.setState({layerData:{},gpuGridAggregator:new ll(o,{id:"".concat(this.id,"-gpu-aggregator")}),cpuGridAggregator:GA})}},{key:"updateState",value:function(i){Yt(me(e.prototype),"updateState",this).call(this,i),this.updateAggregationState(i);var a=this.state,o=a.aggregationDataDirty,s=a.aggregationWeightsDirty,u=a.gpuAggregation;if(!(this.getNumInstances()<=0)){var c=!1;(o||u&&s)&&(this._updateAggregation(i),c=!0),!u&&(o||s)&&(this._updateWeightBins(),this._uploadAggregationResults(),c=!0),this.setState({aggregationDirty:c})}}},{key:"finalizeState",value:function(i){var a,o=this.state.weights.count;o&&o.aggregationBuffer&&o.aggregationBuffer.delete(),(a=this.state.gpuGridAggregator)===null||a===void 0||a.delete(),Yt(me(e.prototype),"finalizeState",this).call(this,i)}},{key:"updateShaders",value:function(i){this.state.gpuAggregation&&this.state.gpuGridAggregator.updateShaders(i)}},{key:"updateAggregationState",value:function(i){xr.assert(!1)}},{key:"allocateResources",value:function(i,a){if(this.state.numRow!==i||this.state.numCol!==a){var o=a*i*4*4,s=this.context.gl,u=this.state.weights;for(var c in u){var h=u[c];h.aggregationBuffer&&h.aggregationBuffer.delete(),h.aggregationBuffer=new Jn(s,{byteLength:o,accessor:{size:4,type:5126,divisor:1}})}}}},{key:"updateResults",value:function(i){var a=i.aggregationData,o=i.maxMinData,s=i.maxData,u=i.minData,c=this.state.weights.count;c&&(c.aggregationData=a,c.maxMinData=o,c.maxData=s,c.minData=u)}},{key:"_updateAggregation",value:function(i){var a=this.state,o=a.cpuGridAggregator,s=a.gpuGridAggregator,u=a.gridOffset,c=a.posOffset,h=a.translation,p=h===void 0?[0,0]:h,v=a.scaling,x=v===void 0?[0,0,0]:v,E=a.boundingBox,R=a.projectPoints,D=a.gpuAggregation,H=a.numCol,W=a.numRow,$=i.props,J=this.context.viewport,B=this.getAttributes(),se=this.getNumInstances();if(D){var X=this.state.weights;s.run({weights:X,cellSize:[u.xOffset,u.yOffset],numCol:H,numRow:W,translation:p,scaling:x,vertexCount:se,projectPoints:R,attributes:B,moduleSettings:this.getModuleSettings()})}else{var V=o($,{gridOffset:u,projectPoints:R,attributes:B,viewport:J,posOffset:c,boundingBox:E});this.setState({layerData:V})}}},{key:"_updateWeightBins",value:function(){var i=this.state.getValue,a=new jA(this.state.layerData.data||[],{getValue:i});this.setState({sortedBins:a})}},{key:"_uploadAggregationResults",value:function(){var i=this.state,a=i.numCol,o=i.numRow,s=this.state.layerData.data,u=this.state.sortedBins,c=u.aggregatedBins,h=u.minValue,p=u.maxValue,v=u.totalCount,x=4,E=a*o*x,R=new Float32Array(E).fill(0),D=H1e(c),H;try{for(D.s();!(H=D.n()).done;){var W=H.value,$=s[W.i],J=$.lonIdx,B=$.latIdx,se=W.value,V=W.counts,X=(J+B*a)*x;R[X]=se,R[X+x-1]=V}}catch(re){D.e(re)}finally{D.f()}var I=new Float32Array([p,0,0,h]),O=new Float32Array([p,0,0,v]),U=new Float32Array([h,0,0,v]);this.updateResults({aggregationData:R,maxMinData:I,maxData:O,minData:U})}}]),e}(Sf);_(Zm,"layerName","GridAggregationLayer");function Y1e(t){var r=K1e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function K1e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function s7(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function NI(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?s7(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):s7(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var Z1e=NI(NI({},UA.defaultProps),{},{getPosition:{type:"accessor",value:function(r){return r.position}},getWeight:{type:"accessor",value:1},gpuAggregation:!0,aggregation:"SUM"}),u7="positions",$1e={data:{props:["cellSizePixels"]},weights:{props:["aggregation"],accessors:["getWeight"]}},hT=function(t){Ke(e,t);var r=Y1e(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"initializeState",value:function(){var i,a=this.context.gl;if(!UA.isSupported(a)){this.setState({supported:!1}),xr.error("ScreenGridLayer: ".concat(this.id," is not supported on this browser"))();return}Yt(me(e.prototype),"initializeAggregationLayer",this).call(this,{dimensions:$1e,getCellSize:function(c){return c.cellSizePixels}});var o={count:{size:1,operation:Po.SUM,needMax:!0,maxTexture:zA(a,{id:"".concat(this.id,"-max-texture")})}};this.setState({supported:!0,projectPoints:!0,weights:o,subLayerData:{attributes:{}},maxTexture:o.count.maxTexture,positionAttributeName:"positions",posOffset:[0,0],translation:[1,-1]});var s=this.getAttributeManager();s.add((i={},_(i,u7,{size:3,accessor:"getPosition",type:5130,fp64:this.use64bitPositions()}),_(i,"count",{size:3,accessor:"getWeight"}),i))}},{key:"shouldUpdateState",value:function(i){var a=i.changeFlags;return this.state.supported&&a.somethingChanged}},{key:"updateState",value:function(i){Yt(me(e.prototype),"updateState",this).call(this,i)}},{key:"renderLayers",value:function(){if(!this.state.supported)return[];var i=this.state,a=i.maxTexture,o=i.numRow,s=i.numCol,u=i.weights,c=this.props.updateTriggers,h=u.count.aggregationBuffer,p=this.getSubLayerClass("cells",UA);return new p(this.props,this.getSubLayerProps({id:"cell-layer",updateTriggers:c}),{data:{attributes:{instanceCounts:h}},maxTexture:a,numInstances:o*s})}},{key:"finalizeState",value:function(i){Yt(me(e.prototype),"finalizeState",this).call(this,i);var a=this.state,o=a.aggregationBuffer,s=a.maxBuffer,u=a.maxTexture;o?.delete(),s?.delete(),u?.delete()}},{key:"getPickingInfo",value:function(i){var a=i.info,o=a.index;if(o>=0){var s=this.state,u=s.gpuGridAggregator,c=s.gpuAggregation,h=s.weights,p=c?u.getData("count"):h.count;a.object=ll.getAggregationData(NI({pixelIndex:o},p))}return a}},{key:"updateResults",value:function(i){var a=i.aggregationData,o=i.maxData,s=this.state.weights.count;s.aggregationData=a,s.aggregationBuffer.setData({data:a}),s.maxData=o,s.maxTexture.setImageData({data:o})}},{key:"updateAggregationState",value:function(i){var a=i.props.cellSizePixels,o=i.oldProps.cellSizePixels!==a,s=i.changeFlags.viewportChanged,u=i.props.gpuAggregation;this.state.gpuAggregation!==i.props.gpuAggregation&&u&&!ll.isSupported(this.context.gl)&&(xr.warn("GPU Grid Aggregation not supported, falling back to CPU")(),u=!1);var c=u!==this.state.gpuAggregation;this.setState({gpuAggregation:u});var h=this.isAttributeChanged(u7),p=this.state.dimensions,v=p.data,x=p.weights,E=h||c||s||this.isAggregationDirty(i,{compareAll:u,dimension:v}),R=this.isAggregationDirty(i,{dimension:x});this.setState({aggregationDataDirty:E,aggregationWeightsDirty:R});var D=this.context.viewport;if(s||o){var H=D.width,W=D.height,$=Math.ceil(H/a),J=Math.ceil(W/a);this.allocateResources(J,$),this.setState({scaling:[H/2,-W/2,1],gridOffset:{xOffset:a,yOffset:a},width:H,height:W,numCol:$,numRow:J})}R&&this._updateAccessors(i),(E||R)&&this._resetResults()}},{key:"_updateAccessors",value:function(i){var a=i.props,o=a.getWeight,s=a.aggregation,u=a.data,c=this.state.weights.count;c&&(c.getWeight=o,c.operation=Po[s]),this.setState({getValue:FA(s,o,{data:u})})}},{key:"_resetResults",value:function(){var i=this.state.weights.count;i&&(i.aggregationData=null)}}]),e}(Zm);_(hT,"layerName","ScreenGridLayer");_(hT,"defaultProps",Z1e);at();vt();et();Ii();et();at();vt();function l7(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Ef(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?l7(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l7(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function c7(){}var f7=["getBins","getDomain","getScaleFunc"],h7=[{key:"fillColor",accessor:"getFillColor",pickingInfo:"colorValue",getBins:{triggers:{value:{prop:"getColorValue",updateTrigger:"getColorValue"},weight:{prop:"getColorWeight",updateTrigger:"getColorWeight"},aggregation:{prop:"colorAggregation"},filterData:{prop:"_filterData",updateTrigger:"_filterData"}}},getDomain:{triggers:{lowerPercentile:{prop:"lowerPercentile"},upperPercentile:{prop:"upperPercentile"},scaleType:{prop:"colorScaleType"}}},getScaleFunc:{triggers:{domain:{prop:"colorDomain"},range:{prop:"colorRange"}},onSet:{props:"onSetColorDomain"}},nullValue:[0,0,0,0]},{key:"elevation",accessor:"getElevation",pickingInfo:"elevationValue",getBins:{triggers:{value:{prop:"getElevationValue",updateTrigger:"getElevationValue"},weight:{prop:"getElevationWeight",updateTrigger:"getElevationWeight"},aggregation:{prop:"elevationAggregation"},filterData:{prop:"_filterData",updateTrigger:"_filterData"}}},getDomain:{triggers:{lowerPercentile:{prop:"elevationLowerPercentile"},upperPercentile:{prop:"elevationUpperPercentile"},scaleType:{prop:"elevationScaleType"}}},getScaleFunc:{triggers:{domain:{prop:"elevationDomain"},range:{prop:"elevationRange"}},onSet:{props:"onSetElevationDomain"}},nullValue:-1}],J1e=function(r){return r.cellSize},VA=function(){function t(r){ce(this,t),this.state={layerData:{},dimensions:{}},this.changeFlags={},this.dimensionUpdaters={},this._getCellSize=r.getCellSize||J1e,this._getAggregator=r.getAggregator,this._addDimension(r.dimensions||h7)}return ve(t,[{key:"updateState",value:function(e,n){var i=e.oldProps,a=e.props,o=e.changeFlags;this.updateGetValueFuncs(i,a,o);var s=this.needsReProjectPoints(i,a,o),u=!1;if(o.dataChanged||s)this.getAggregatedData(a,n),u=!0;else{var c=this.getDimensionChanges(i,a,o)||[];c.forEach(function(h){return typeof h=="function"&&h()}),u=!0}return this.setState({aggregationDirty:u}),this.state}},{key:"setState",value:function(e){this.state=Ef(Ef({},this.state),e)}},{key:"setDimensionState",value:function(e,n){this.setState({dimensions:Ef(Ef({},this.state.dimensions),{},_({},e,Ef(Ef({},this.state.dimensions[e]),n)))})}},{key:"normalizeResult",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.hexagons?Ef({data:e.hexagons},e):e.layerData?Ef({data:e.layerData},e):e}},{key:"getAggregatedData",value:function(e,n){var i=this._getAggregator(e),a=i(e,n);this.setState({layerData:this.normalizeResult(a)}),this.changeFlags={layerData:!0},this.getSortedBins(e)}},{key:"updateGetValueFuncs",value:function(e,n,i){for(var a in this.dimensionUpdaters){var o=this.dimensionUpdaters[a].getBins.triggers,s=o.value,u=o.weight,c=o.aggregation,h=n[s.prop],p=this.needUpdateDimensionStep(this.dimensionUpdaters[a].getBins,e,n,i);p&&(h?h=xW(h,{data:n.data}):h=FA(n[c.prop],n[u.prop],{data:n.data})),h&&this.setDimensionState(a,{getValue:h})}}},{key:"needsReProjectPoints",value:function(e,n,i){return this._getCellSize(e)!==this._getCellSize(n)||this._getAggregator(e)!==this._getAggregator(n)||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPosition)}},{key:"addDimension",value:function(e){this._addDimension(e)}},{key:"_addDimension",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];n.forEach(function(i){var a=i.key;e.dimensionUpdaters[a]=e.getDimensionUpdaters(i),e.state.dimensions[a]={getValue:null,domain:null,sortedBins:null,scaleFunc:c7}})}},{key:"getDimensionUpdaters",value:function(e){var n=e.key,i=e.accessor,a=e.pickingInfo,o=e.getBins,s=e.getDomain,u=e.getScaleFunc,c=e.nullValue;return{key:n,accessor:i,pickingInfo:a,getBins:Ef({updater:this.getDimensionSortedBins},o),getDomain:Ef({updater:this.getDimensionValueDomain},s),getScaleFunc:Ef({updater:this.getDimensionScale},u),attributeAccessor:this.getSubLayerDimensionAttribute(n,c)}}},{key:"needUpdateDimensionStep",value:function(e,n,i,a){return Object.values(e.triggers).some(function(o){return o.updateTrigger?a.dataChanged||a.updateTriggersChanged&&(a.updateTriggersChanged.all||a.updateTriggersChanged[o.updateTrigger]):n[o.prop]!==i[o.prop]})}},{key:"getDimensionChanges",value:function(e,n,i){var a=this,o=[],s=function(h){var p=f7.find(function(v){return a.needUpdateDimensionStep(a.dimensionUpdaters[h][v],e,n,i)});p&&o.push(a.dimensionUpdaters[h][p].updater.bind(a,n,a.dimensionUpdaters[h]))};for(var u in this.dimensionUpdaters)s(u);return o.length?o:null}},{key:"getUpdateTriggers",value:function(e){var n=this,i=e.updateTriggers||{},a={},o=function(c){var h=n.dimensionUpdaters[c].accessor;a[h]={},f7.forEach(function(p){Object.values(n.dimensionUpdaters[c][p].triggers).forEach(function(v){var x=v.prop,E=v.updateTrigger;if(E){var R=i[E];vr(R)==="object"&&!Array.isArray(R)?Object.assign(a[h],R):R!==void 0&&(a[h][x]=R)}else a[h][x]=e[x]})})};for(var s in this.dimensionUpdaters)o(s);return a}},{key:"getSortedBins",value:function(e){for(var n in this.dimensionUpdaters)this.getDimensionSortedBins(e,this.dimensionUpdaters[n])}},{key:"getDimensionSortedBins",value:function(e,n){var i=n.key,a=this.state.dimensions[i].getValue,o=new jA(this.state.layerData.data||[],{getValue:a,filterData:e._filterData});this.setDimensionState(i,{sortedBins:o}),this.getDimensionValueDomain(e,n)}},{key:"getDimensionValueDomain",value:function(e,n){var i=n.getDomain,a=n.key,o=i.triggers,s=o.lowerPercentile,u=o.upperPercentile,c=o.scaleType,h=this.state.dimensions[a].sortedBins.getValueDomainByScale(e[c.prop],[e[s.prop],e[u.prop]]);this.setDimensionState(a,{valueDomain:h}),this.getDimensionScale(e,n)}},{key:"getDimensionScale",value:function(e,n){var i=n.key,a=n.getScaleFunc,o=n.getDomain,s=a.triggers,u=s.domain,c=s.range,h=o.triggers.scaleType,p=a.onSet,v=e[c.prop],x=e[u.prop]||this.state.dimensions[i].valueDomain,E=KW(h&&e[h.prop]),R=E(x,v);vr(p)==="object"&&typeof e[p.props]=="function"&&e[p.props](R.domain()),this.setDimensionState(i,{scaleFunc:R})}},{key:"getSubLayerDimensionAttribute",value:function(e,n){var i=this;return function(a){var o=i.state.dimensions[e],s=o.sortedBins,u=o.scaleFunc,c=s.binMap[a.index];if(c&&c.counts===0)return n;var h=c&&c.value,p=u.domain(),v=h>=p[0]&&h<=p[p.length-1];return v?u(h):n}}},{key:"getSubLayerAccessors",value:function(e){var n={};for(var i in this.dimensionUpdaters){var a=this.dimensionUpdaters[i].accessor;n[a]=this.getSubLayerDimensionAttribute(e,i)}return n}},{key:"getPickingInfo",value:function(e){var n=e.info,i=n.picked&&n.index>-1,a=null;if(i){var o=this.state.layerData.data[n.index],s={};for(var u in this.dimensionUpdaters){var c=this.dimensionUpdaters[u].pickingInfo,h=this.state.dimensions[u].sortedBins,p=h.binMap[o.index]&&h.binMap[o.index].value;s[c]=p}a=Object.assign(s,o,{points:o.filteredPoints||o.points})}return n.picked=Boolean(a),n.object=a,n}},{key:"getAccessor",value:function(e){return this.dimensionUpdaters.hasOwnProperty(e)?this.dimensionUpdaters[e].attributeAccessor:c7}}],[{key:"defaultDimensions",value:function(){return h7}}]),t}();function Q1e(t){var r=ebe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function ebe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function p7(){}var tbe={colorDomain:null,colorRange:Xc,getColorValue:{type:"accessor",value:null},getColorWeight:{type:"accessor",value:1},colorAggregation:"SUM",lowerPercentile:{type:"number",min:0,max:100,value:0},upperPercentile:{type:"number",min:0,max:100,value:100},colorScaleType:"quantize",onSetColorDomain:p7,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:{type:"accessor",value:null},getElevationWeight:{type:"accessor",value:1},elevationAggregation:"SUM",elevationLowerPercentile:{type:"number",min:0,max:100,value:0},elevationUpperPercentile:{type:"number",min:0,max:100,value:100},elevationScale:{type:"number",min:0,value:1},elevationScaleType:"linear",onSetElevationDomain:p7,gridAggregator:GA,cellSize:{type:"number",min:0,max:1e3,value:1e3},coverage:{type:"number",min:0,max:1,value:1},getPosition:{type:"accessor",value:function(r){return r.position}},extruded:!1,material:!0,_filterData:{type:"function",value:null,optional:!0}},$m=function(t){Ke(e,t);var r=Q1e(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"initializeState",value:function(){var i=new VA({getAggregator:function(s){return s.gridAggregator},getCellSize:function(s){return s.cellSize}});this.state={cpuAggregator:i,aggregatorState:i.state};var a=this.getAttributeManager();a.add({positions:{size:3,type:5130,accessor:"getPosition"}})}},{key:"updateState",value:function(i){Yt(me(e.prototype),"updateState",this).call(this,i),this.setState({aggregatorState:this.state.cpuAggregator.updateState(i,{viewport:this.context.viewport,attributes:this.getAttributes(),numInstances:this.getNumInstances()})})}},{key:"getPickingInfo",value:function(i){var a=i.info;return this.state.cpuAggregator.getPickingInfo({info:a})}},{key:"_onGetSublayerColor",value:function(i){return this.state.cpuAggregator.getAccessor("fillColor")(i)}},{key:"_onGetSublayerElevation",value:function(i){return this.state.cpuAggregator.getAccessor("elevation")(i)}},{key:"_getSublayerUpdateTriggers",value:function(){return this.state.cpuAggregator.getUpdateTriggers(this.props)}},{key:"renderLayers",value:function(){var i=this.props,a=i.elevationScale,o=i.extruded,s=i.cellSize,u=i.coverage,c=i.material,h=i.transitions,p=this.state.cpuAggregator,v=this.getSubLayerClass("grid-cell",OA),x=this._getSublayerUpdateTriggers();return new v({cellSize:s,coverage:u,material:c,elevationScale:a,extruded:o,getFillColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),transitions:h&&{getFillColor:h.getColorValue||h.getColorWeight,getElevation:h.getElevationValue||h.getElevationWeight}},this.getSubLayerProps({id:"grid-cell",updateTriggers:x}),{data:p.state.layerData.data})}}]),e}(Sf);_($m,"layerName","CPUGridLayer");_($m,"defaultProps",tbe);at();vt();et();var HA=Math.PI/3,rbe=[0,HA,2*HA,3*HA,4*HA,5*HA];function nbe(t){return t[0]}function ibe(t){return t[1]}function zI(){var t=0,r=0,e=1,n=1,i=nbe,a=ibe,o,s,u;function c(p){var v={},x=[],E,R=p.length;for(E=0;E<R;++E)if(!(isNaN(H=+i.call(null,D=p[E],E,p))||isNaN(W=+a.call(null,D,E,p)))){var D,H,W,$=Math.round(W=W/u),J=Math.round(H=H/s-($&1)/2),B=W-$;if(Math.abs(B)*3>1){var se=H-J,V=J+(H<J?-1:1)/2,X=$+(W<$?-1:1),I=H-V,O=W-X;se*se+B*B>I*I+O*O&&(J=V+($&1?1:-1)/2,$=X)}var U=J+"-"+$,re=v[U];re?re.push(D):(x.push(re=v[U]=[D]),re.x=(J+($&1)/2)*s,re.y=$*u)}return x}function h(p){var v=0,x=0;return rbe.map(function(E){var R=Math.sin(E)*p,D=-Math.cos(E)*p,H=R-v,W=D-x;return v=R,x=D,[H,W]})}return c.hexagon=function(p){return"m"+h(p==null?o:+p).join("l")+"z"},c.centers=function(){for(var p=[],v=Math.round(r/u),x=Math.round(t/s),E=v*u;E<n+o;E+=u,++v)for(var R=x*s+(v&1)*s/2;R<e+s/2;R+=s)p.push([R,E]);return p},c.mesh=function(){var p=h(o).slice(0,4).join("l");return c.centers().map(function(v){return"M"+v+"m"+p}).join("")},c.x=function(p){return arguments.length?(i=p,c):i},c.y=function(p){return arguments.length?(a=p,c):a},c.radius=function(p){return arguments.length?(o=+p,s=o*2*Math.sin(HA),u=o*1.5,c):o},c.size=function(p){return arguments.length?(t=r=0,e=+p[0],n=+p[1],c):[e-t,n-r]},c.extent=function(p){return arguments.length?(t=+p[0][0],r=+p[0][1],e=+p[1][0],n=+p[1][1],c):[[t,r],[e,n]]},c.radius(1)}function abe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=obe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function obe(t,r){if(t){if(typeof t=="string")return d7(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return d7(t,r)}}function d7(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function m7(t,r){var e=t.data,n=t.radius,i=r.viewport,a=r.attributes,o=e.length?sbe(e,r):null,s=ube(n,i,o),u=[],c=xs(e),h=c.iterable,p=c.objectInfo,v=a.positions.value,x=a.positions.getAccessor(),E=x.size,R=abe(h),D;try{for(R.s();!(D=R.n()).done;){var H=D.value;p.index++;var W=p.index*E,$=[v[W],v[W+1]],J=Number.isFinite($[0])&&Number.isFinite($[1]);J?u.push({screenCoord:i.projectFlat($),source:H,index:p.index}):xr.warn("HexagonLayer: invalid position")()}}catch(V){R.e(V)}finally{R.f()}var B=zI().radius(s).x(function(V){return V.screenCoord[0]}).y(function(V){return V.screenCoord[1]}),se=B(u);return{hexagons:se.map(function(V,X){return{position:i.unprojectFlat([V.x,V.y]),points:V,index:X}}),radiusCommon:s}}function sbe(t,r){var e=r.attributes,n=e.positions.value,i=e.positions.getAccessor(),a=i.size,o=1/0,s=1/0,u=-1/0,c=-1/0,h;for(h=0;h<a*t.length;h+=a){var p=n[h],v=n[h+1],x=Number.isFinite(p)&&Number.isFinite(v);x&&(o=Math.min(p,o),u=Math.max(p,u),s=Math.min(v,s),c=Math.max(v,c))}return[o,s,u,c].every(Number.isFinite)?[(o+u)/2,(s+c)/2]:null}function ube(t,r,e){var n=r.getDistanceScales(e),i=n.unitsPerMeter;return t*i[0]}function v7(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function g7(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?v7(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):v7(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function lbe(t){var r=cbe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function cbe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A7(){}var fbe={colorDomain:null,colorRange:Xc,getColorValue:{type:"accessor",value:null},getColorWeight:{type:"accessor",value:1},colorAggregation:"SUM",lowerPercentile:{type:"number",value:0,min:0,max:100},upperPercentile:{type:"number",value:100,min:0,max:100},colorScaleType:"quantize",onSetColorDomain:A7,elevationDomain:null,elevationRange:[0,1e3],getElevationValue:{type:"accessor",value:null},getElevationWeight:{type:"accessor",value:1},elevationAggregation:"SUM",elevationLowerPercentile:{type:"number",value:0,min:0,max:100},elevationUpperPercentile:{type:"number",value:100,min:0,max:100},elevationScale:{type:"number",min:0,value:1},elevationScaleType:"linear",onSetElevationDomain:A7,radius:{type:"number",value:1e3,min:1},coverage:{type:"number",min:0,max:1,value:1},extruded:!1,hexagonAggregator:m7,getPosition:{type:"accessor",value:function(r){return r.position}},material:!0,_filterData:{type:"function",value:null,optional:!0}},pT=function(t){Ke(e,t);var r=lbe(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"initializeState",value:function(){var i=new VA({getAggregator:function(s){return s.hexagonAggregator},getCellSize:function(s){return s.radius}});this.state={cpuAggregator:i,aggregatorState:i.state,vertices:null};var a=this.getAttributeManager();a.add({positions:{size:3,type:5130,accessor:"getPosition"}})}},{key:"updateState",value:function(i){if(Yt(me(e.prototype),"updateState",this).call(this,i),i.changeFlags.propsOrDataChanged){var a=this.state.cpuAggregator.updateState(i,{viewport:this.context.viewport,attributes:this.getAttributes()});if(this.state.aggregatorState.layerData!==a.layerData){var o=a.layerData||{},s=o.hexagonVertices;this.setState({vertices:s&&this.convertLatLngToMeterOffset(s)})}this.setState({aggregatorState:a})}}},{key:"convertLatLngToMeterOffset",value:function(i){var a=this.context.viewport;if(Array.isArray(i)&&i.length===6){var o=i[0],s=i[3],u=[(o[0]+s[0])/2,(o[1]+s[1])/2],c=a.projectFlat(u),h=a.getDistanceScales(u),p=h.metersPerUnit,v=i.map(function(x){var E=a.projectFlat(x);return[(E[0]-c[0])*p[0],(E[1]-c[1])*p[1]]});return v}return xr.error("HexagonLayer: hexagonVertices needs to be an array of 6 points")(),null}},{key:"getPickingInfo",value:function(i){var a=i.info;return this.state.cpuAggregator.getPickingInfo({info:a})}},{key:"_onGetSublayerColor",value:function(i){return this.state.cpuAggregator.getAccessor("fillColor")(i)}},{key:"_onGetSublayerElevation",value:function(i){return this.state.cpuAggregator.getAccessor("elevation")(i)}},{key:"_getSublayerUpdateTriggers",value:function(){return this.state.cpuAggregator.getUpdateTriggers(this.props)}},{key:"renderLayers",value:function(){var i=this.props,a=i.elevationScale,o=i.extruded,s=i.coverage,u=i.material,c=i.transitions,h=this.state,p=h.aggregatorState,v=h.vertices,x=this.getSubLayerClass("hexagon-cell",gh),E=this._getSublayerUpdateTriggers(),R=v?{vertices:v,radius:1}:{radius:p.layerData.radiusCommon||1,radiusUnits:"common",angle:90};return new x(g7(g7({},R),{},{diskResolution:6,elevationScale:a,extruded:o,coverage:s,material:u,getFillColor:this._onGetSublayerColor.bind(this),getElevation:this._onGetSublayerElevation.bind(this),transitions:c&&{getFillColor:c.getColorValue||c.getColorWeight,getElevation:c.getElevationValue||c.getElevationWeight}}),this.getSubLayerProps({id:"hexagon-cell",updateTriggers:E}),{data:p.layerData.data})}}]),e}(Sf);_(pT,"layerName","HexagonLayer");_(pT,"defaultProps",fbe);at();vt();et();et();et();var nn,rn=.5,Cn=1/6,Qt={N:[0,rn],E:[rn,0],S:[0,-rn],W:[-rn,0],NE:[rn,rn],NW:[-rn,rn],SE:[rn,-rn],SW:[-rn,-rn]},WA=[Qt.W,Qt.SW,Qt.S],qA=[Qt.S,Qt.SE,Qt.E],XA=[Qt.E,Qt.NE,Qt.N],YA=[Qt.NW,Qt.W,Qt.N],KA=[[-rn,Cn],[-rn,-Cn],[-Cn,-rn],[Cn,-rn]],ZA=[[-Cn,-rn],[Cn,-rn],[rn,-Cn],[rn,Cn]],$A=[[rn,-Cn],[rn,Cn],[Cn,rn],[-Cn,rn]],JA=[[-rn,Cn],[-rn,-Cn],[Cn,rn],[-Cn,rn]],y7=[Qt.W,Qt.SW,Qt.SE,Qt.E],_7=[Qt.S,Qt.SE,Qt.NE,Qt.N],b7=[Qt.NW,Qt.W,Qt.E,Qt.NE],x7=[Qt.NW,Qt.SW,Qt.S,Qt.N],w7=[[-rn,Cn],[-rn,-Cn],[rn,-Cn],[rn,Cn]],T7=[[-Cn,-rn],[Cn,-rn],[Cn,rn],[-Cn,rn]],hbe=[Qt.NW,Qt.SW,Qt.SE,Qt.NE],S7=[Qt.NW,Qt.SW,Qt.SE,Qt.E,Qt.N],E7=[Qt.W,Qt.SW,Qt.SE,Qt.NE,Qt.N],C7=[Qt.NW,Qt.W,Qt.S,Qt.SE,Qt.NE],P7=[Qt.NW,Qt.SW,Qt.S,Qt.E,Qt.NE],O7=[Qt.NW,Qt.W,[rn,-Cn],[rn,Cn],Qt.N],M7=[[-Cn,-rn],[Cn,-rn],Qt.E,Qt.NE,Qt.N],I7=[[-rn,Cn],[-rn,-Cn],Qt.S,Qt.SE,Qt.E],R7=[Qt.W,Qt.SW,Qt.S,[Cn,rn],[-Cn,rn]],L7=[Qt.NW,Qt.W,[-Cn,-rn],[Cn,-rn],Qt.N],k7=[[-rn,Cn],[-rn,-Cn],Qt.E,Qt.NE,Qt.N],B7=[Qt.S,Qt.SE,Qt.E,[Cn,rn],[-Cn,rn]],D7=[Qt.W,Qt.SW,Qt.S,[rn,-Cn],[rn,Cn]],F7=[Qt.W,Qt.SW,Qt.SE,Qt.E,[Cn,rn],[-Cn,rn]],N7=[[-rn,Cn],[-rn,-Cn],Qt.S,Qt.SE,Qt.NE,Qt.N],z7=[Qt.NW,Qt.W,[-Cn,-rn],[Cn,-rn],Qt.E,Qt.NE],U7=[Qt.NW,Qt.SW,Qt.S,[rn,-Cn],[rn,Cn],Qt.N],QA=[Qt.W,Qt.SW,Qt.S,Qt.E,Qt.NE,Qt.N],e0=[Qt.NW,Qt.W,Qt.S,Qt.SE,Qt.E,Qt.N],dT=[[-rn,Cn],[-rn,-Cn],[-Cn,-rn],[Cn,-rn],Qt.E,Qt.NE,Qt.N],mT=[Qt.W,Qt.SW,Qt.S,[rn,-Cn],[rn,Cn],[Cn,rn],[-Cn,rn]],vT=[Qt.NW,Qt.W,[-Cn,-rn],[Cn,-rn],[rn,-Cn],[rn,Cn],Qt.N],gT=[[-rn,Cn],[-rn,-Cn],Qt.S,Qt.SE,Qt.E,[Cn,rn],[-Cn,rn]],j7=[[-rn,Cn],[-rn,-Cn],[-Cn,-rn],[Cn,-rn],[rn,-Cn],[rn,Cn],[Cn,rn],[-Cn,rn]],G7={0:[],1:[[Qt.W,Qt.S]],2:[[Qt.S,Qt.E]],3:[[Qt.W,Qt.E]],4:[[Qt.N,Qt.E]],5:{0:[[Qt.W,Qt.S],[Qt.N,Qt.E]],1:[[Qt.W,Qt.N],[Qt.S,Qt.E]]},6:[[Qt.N,Qt.S]],7:[[Qt.W,Qt.N]],8:[[Qt.W,Qt.N]],9:[[Qt.N,Qt.S]],10:{0:[[Qt.W,Qt.N],[Qt.S,Qt.E]],1:[[Qt.W,Qt.S],[Qt.N,Qt.E]]},11:[[Qt.N,Qt.E]],12:[[Qt.W,Qt.E]],13:[[Qt.S,Qt.E]],14:[[Qt.W,Qt.S]],15:[]};function un(t){return parseInt(t,4)}var V7=(nn={},_(nn,un("0000"),[]),_(nn,un("2222"),[]),_(nn,un("2221"),[WA]),_(nn,un("2212"),[qA]),_(nn,un("2122"),[XA]),_(nn,un("1222"),[YA]),_(nn,un("0001"),[WA]),_(nn,un("0010"),[qA]),_(nn,un("0100"),[XA]),_(nn,un("1000"),[YA]),_(nn,un("2220"),[KA]),_(nn,un("2202"),[ZA]),_(nn,un("2022"),[$A]),_(nn,un("0222"),[JA]),_(nn,un("0002"),[KA]),_(nn,un("0020"),[ZA]),_(nn,un("0200"),[$A]),_(nn,un("2000"),[JA]),_(nn,un("0011"),[y7]),_(nn,un("0110"),[_7]),_(nn,un("1100"),[b7]),_(nn,un("1001"),[x7]),_(nn,un("2211"),[y7]),_(nn,un("2112"),[_7]),_(nn,un("1122"),[b7]),_(nn,un("1221"),[x7]),_(nn,un("2200"),[w7]),_(nn,un("2002"),[T7]),_(nn,un("0022"),[w7]),_(nn,un("0220"),[T7]),_(nn,un("1111"),[hbe]),_(nn,un("1211"),[S7]),_(nn,un("2111"),[E7]),_(nn,un("1112"),[C7]),_(nn,un("1121"),[P7]),_(nn,un("1011"),[S7]),_(nn,un("0111"),[E7]),_(nn,un("1110"),[C7]),_(nn,un("1101"),[P7]),_(nn,un("1200"),[O7]),_(nn,un("0120"),[M7]),_(nn,un("0012"),[I7]),_(nn,un("2001"),[R7]),_(nn,un("1022"),[O7]),_(nn,un("2102"),[M7]),_(nn,un("2210"),[I7]),_(nn,un("0221"),[R7]),_(nn,un("1002"),[L7]),_(nn,un("2100"),[k7]),_(nn,un("0210"),[B7]),_(nn,un("0021"),[D7]),_(nn,un("1220"),[L7]),_(nn,un("0122"),[k7]),_(nn,un("2012"),[B7]),_(nn,un("2201"),[D7]),_(nn,un("0211"),[F7]),_(nn,un("2110"),[N7]),_(nn,un("1102"),[z7]),_(nn,un("1021"),[U7]),_(nn,un("2011"),[F7]),_(nn,un("0112"),[N7]),_(nn,un("1120"),[z7]),_(nn,un("1201"),[U7]),_(nn,un("2101"),[QA]),_(nn,un("0121"),[QA]),_(nn,un("1012"),[e0]),_(nn,un("1210"),[e0]),_(nn,un("0101"),{0:[WA,XA],1:[QA],2:[QA]}),_(nn,un("1010"),{0:[YA,qA],1:[e0],2:[e0]}),_(nn,un("2121"),{0:[QA],1:[QA],2:[WA,XA]}),_(nn,un("1212"),{0:[e0],1:[e0],2:[YA,qA]}),_(nn,un("2120"),{0:[dT],1:[dT],2:[KA,XA]}),_(nn,un("2021"),{0:[mT],1:[mT],2:[WA,$A]}),_(nn,un("1202"),{0:[vT],1:[vT],2:[YA,ZA]}),_(nn,un("0212"),{0:[gT],1:[gT],2:[qA,JA]}),_(nn,un("0102"),{0:[KA,XA],1:[dT],2:[dT]}),_(nn,un("0201"),{0:[WA,$A],1:[mT],2:[mT]}),_(nn,un("1020"),{0:[YA,ZA],1:[vT],2:[vT]}),_(nn,un("2010"),{0:[qA,JA],1:[gT],2:[gT]}),_(nn,un("2020"),{0:[JA,ZA],1:[j7],2:[KA,$A]}),_(nn,un("0202"),{0:[$A,KA],1:[j7],2:[JA,ZA]}),nn);function H7(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function W7(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?H7(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):H7(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var Jm={ISO_LINES:1,ISO_BANDS:2},pbe={zIndex:0,zOffset:.005};function p1(t,r){return Array.isArray(r)?t<r[0]?0:t<r[1]?1:2:t>=r?1:0}function q7(t){var r=t.cellWeights,e=t.x,n=t.y,i=t.width,a=t.height,o=t.threshold;t.thresholdValue&&(xr.deprecated("thresholdValue","threshold")(),o=t.thresholdValue);var s=e<0,u=e>=i-1,c=n<0,h=n>=a-1,p=s||u||c||h,v={},x={};s||h?x.top=0:(v.top=r[(n+1)*i+e],x.top=p1(v.top,o)),u||h?x.topRight=0:(v.topRight=r[(n+1)*i+e+1],x.topRight=p1(v.topRight,o)),u||c?x.right=0:(v.right=r[n*i+e+1],x.right=p1(v.right,o)),s||c?x.current=0:(v.current=r[n*i+e],x.current=p1(v.current,o));var E=x.top,R=x.topRight,D=x.right,H=x.current,W=-1;Number.isFinite(o)&&(W=E<<3|R<<2|D<<1|H),Array.isArray(o)&&(W=E<<6|R<<4|D<<2|H);var $=0;return p||($=p1((v.top+v.topRight+v.right+v.current)/4,o)),{code:W,meanCode:$}}function UI(t){var r=t.gridOrigin,e=t.cellSize,n=t.x,i=t.y,a=t.code,o=t.meanCode,s=t.type,u=s===void 0?Jm.ISO_LINES:s,c=W7(W7({},pbe),t.thresholdData),h=u===Jm.ISO_BANDS?V7[a]:G7[a];Array.isArray(h)||(h=h[o]);var p=c.zIndex*c.zOffset,v=(n+1)*e[0],x=(i+1)*e[1],E=r[0]+v,R=r[1]+x;if(u===Jm.ISO_BANDS){var D=[];return h.forEach(function(W){var $=[];W.forEach(function(J){var B=E+J[0]*e[0],se=R+J[1]*e[1];$.push([B,se,p])}),D.push($)}),D}var H=[];return h.forEach(function(W){W.forEach(function($){var J=E+$[0]*e[0],B=R+$[1]*e[1];H.push([J,B,p])})}),H}function X7(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=dbe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function dbe(t,r){if(t){if(typeof t=="string")return Y7(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Y7(t,r)}}function Y7(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function K7(t){var r=t.thresholdData,e=t.cellWeights,n=t.gridSize,i=t.gridOrigin,a=t.cellSize,o=[],s=[],u=n[0],c=n[1],h=0,p=0,v=X7(r),x;try{for(v.s();!(x=v.n()).done;)for(var E=x.value,R=E.contour,D=R.threshold,H=-1;H<u;H++)for(var W=-1;W<c;W++){var $=q7({cellWeights:e,threshold:D,x:H,y:W,width:u,height:c}),J=$.code,B=$.meanCode,se={type:Jm.ISO_BANDS,gridOrigin:i,cellSize:a,x:H,y:W,width:u,height:c,code:J,meanCode:B,thresholdData:E};if(Array.isArray(D)){se.type=Jm.ISO_BANDS;var V=UI(se),X=X7(V),I;try{for(X.s();!(I=X.n()).done;){var O=I.value;s[p++]={vertices:O,contour:R}}}catch(ee){X.e(ee)}finally{X.f()}}else{se.type=Jm.ISO_LINES;for(var U=UI(se),re=0;re<U.length;re+=2)o[h++]={start:U[re],end:U[re+1],contour:R}}}}catch(ee){v.e(ee)}finally{v.f()}return{contourSegments:o,contourPolygons:s}}function mbe(t){var r=vbe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function vbe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Z7=[255,255,255,255],gbe=1,Abe=1,ybe={cellSize:{type:"number",min:1,max:1e3,value:1e3},getPosition:{type:"accessor",value:function(r){return r.position}},getWeight:{type:"accessor",value:1},gpuAggregation:!0,aggregation:"SUM",contours:{type:"object",value:[{threshold:Abe}],optional:!0,compare:3},zOffset:.005},$7="positions",_be={data:{props:["cellSize"]},weights:{props:["aggregation"],accessors:["getWeight"]}},AT=function(t){Ke(e,t);var r=mbe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"initializeState",value:function(){var i;Yt(me(e.prototype),"initializeAggregationLayer",this).call(this,{dimensions:_be}),this.setState({contourData:{},projectPoints:!1,weights:{count:{size:1,operation:Po.SUM}}});var a=this.getAttributeManager();a.add((i={},_(i,$7,{size:3,accessor:"getPosition",type:5130,fp64:this.use64bitPositions()}),_(i,"count",{size:3,accessor:"getWeight"}),i))}},{key:"updateState",value:function(i){Yt(me(e.prototype),"updateState",this).call(this,i);var a=!1,o=i.oldProps,s=i.props,u=this.state.aggregationDirty;(o.contours!==s.contours||o.zOffset!==s.zOffset)&&(a=!0,this._updateThresholdData(i.props)),this.getNumInstances()>0&&(u||a)&&this._generateContours()}},{key:"renderLayers",value:function(){var i=this.state.contourData,a=i.contourSegments,o=i.contourPolygons,s=this.getSubLayerClass("lines",TA),u=this.getSubLayerClass("bands",yh),c=a&&a.length>0&&new s(this.getSubLayerProps({id:"lines"}),{data:this.state.contourData.contourSegments,getSourcePosition:function(v){return v.start},getTargetPosition:function(v){return v.end},getColor:function(v){return v.contour.color||Z7},getWidth:function(v){return v.contour.strokeWidth||gbe}}),h=o&&o.length>0&&new u(this.getSubLayerProps({id:"bands"}),{data:this.state.contourData.contourPolygons,getPolygon:function(v){return v.vertices},getFillColor:function(v){return v.contour.color||Z7}});return[c,h]}},{key:"updateAggregationState",value:function(i){var a=i.props,o=i.oldProps,s=a.cellSize,u=a.coordinateSystem,c=this.context.viewport,h=o.cellSize!==s,p=a.gpuAggregation;this.state.gpuAggregation!==a.gpuAggregation&&p&&!ll.isSupported(this.context.gl)&&(xr.warn("GPU Grid Aggregation not supported, falling back to CPU")(),p=!1);var v=p!==this.state.gpuAggregation;this.setState({gpuAggregation:p});var x=this.state.dimensions,E=this.isAttributeChanged($7),R=x.data,D=x.weights,H=this.state.boundingBox;if(E&&(H=cT(this.getAttributes(),this.getNumInstances()),this.setState({boundingBox:H})),E||h){var W=fT(H,s,c,u),$=W.gridOffset,J=W.translation,B=W.width,se=W.height,V=W.numCol,X=W.numRow;this.allocateResources(X,V),this.setState({gridOffset:$,boundingBox:H,translation:J,posOffset:J.slice(),gridOrigin:[-1*J[0],-1*J[1]],width:B,height:se,numCol:V,numRow:X})}var I=E||v||this.isAggregationDirty(i,{dimension:R,compareAll:p}),O=this.isAggregationDirty(i,{dimension:D});O&&this._updateAccessors(i),(I||O)&&this._resetResults(),this.setState({aggregationDataDirty:I,aggregationWeightsDirty:O})}},{key:"_updateAccessors",value:function(i){var a=i.props,o=a.getWeight,s=a.aggregation,u=a.data,c=this.state.weights.count;c&&(c.getWeight=o,c.operation=Po[s]),this.setState({getValue:FA(s,o,{data:u})})}},{key:"_resetResults",value:function(){var i=this.state.weights.count;i&&(i.aggregationData=null)}},{key:"_generateContours",value:function(){var i=this.state,a=i.numCol,o=i.numRow,s=i.gridOrigin,u=i.gridOffset,c=i.thresholdData,h=this.state.weights.count,p=h.aggregationData;p||(p=h.aggregationBuffer.getData(),h.aggregationData=p);var v=ll.getCellData({countsData:p}),x=v.cellWeights,E=K7({thresholdData:c,cellWeights:x,gridSize:[a,o],gridOrigin:s,cellSize:[u.xOffset,u.yOffset]});this.setState({contourData:E})}},{key:"_updateThresholdData",value:function(i){for(var a=i.contours,o=i.zOffset,s=a.length,u=new Array(s),c=0;c<s;c++){var h=a[c];u[c]={contour:h,zIndex:h.zIndex||c,zOffset:o}}this.setState({thresholdData:u})}}]),e}(Zm);_(AT,"layerName","ContourLayer");_(AT,"defaultProps",ybe);at();vt();et();at();vt();et();at();vt();et();var J7=`#version 300 es
#define SHADER_NAME gpu-grid-cell-layer-vertex-shader
#define RANGE_COUNT 6

in vec3 positions;
in vec3 normals;

in vec4 colors;
in vec4 elevations;
in vec3 instancePickingColors;
uniform vec2 offset;
uniform bool extruded;
uniform float cellSize;
uniform float coverage;
uniform float opacity;
uniform float elevationScale;

uniform ivec2 gridSize;
uniform vec2 gridOrigin;
uniform vec2 gridOriginLow;
uniform vec2 gridOffset;
uniform vec2 gridOffsetLow;
uniform vec4 colorRange[RANGE_COUNT];
uniform vec2 elevationRange;
uniform vec2 colorDomain;
uniform bool colorDomainValid;
uniform vec2 elevationDomain;
uniform bool elevationDomainValid;

layout(std140) uniform;
uniform ColorData
{
  vec4 maxMinCount;
} colorData;
uniform ElevationData
{
  vec4 maxMinCount;
} elevationData;

#define EPSILON 0.00001
out vec4 vColor;

vec4 quantizeScale(vec2 domain, vec4 range[RANGE_COUNT], float value) {
  vec4 outColor = vec4(0., 0., 0., 0.);
  if (value >= (domain.x - EPSILON) && value <= (domain.y + EPSILON)) {
    float domainRange = domain.y - domain.x;
    if (domainRange <= 0.) {
      outColor = colorRange[0];
    } else {
      float rangeCount = float(RANGE_COUNT);
      float rangeStep = domainRange / rangeCount;
      float idx = floor((value - domain.x) / rangeStep);
      idx = clamp(idx, 0., rangeCount - 1.);
      int intIdx = int(idx);
      outColor = colorRange[intIdx];
    }
  }
  return outColor;
}

float linearScale(vec2 domain, vec2 range, float value) {
  if (value >= (domain.x - EPSILON) && value <= (domain.y + EPSILON)) {
    return ((value - domain.x) / (domain.y - domain.x)) * (range.y - range.x) + range.x;
  }
  return -1.;
}

void main(void) {
  vec2 clrDomain = colorDomainValid ? colorDomain : vec2(colorData.maxMinCount.a, colorData.maxMinCount.r);
  vec4 color = quantizeScale(clrDomain, colorRange, colors.r);

  float elevation = 0.0;

  if (extruded) {
    vec2 elvDomain = elevationDomainValid ? elevationDomain : vec2(elevationData.maxMinCount.a, elevationData.maxMinCount.r);
    elevation = linearScale(elvDomain, elevationRange, elevations.r);
    elevation = elevation  * (positions.z + 1.0) / 2.0 * elevationScale;
  }
  float shouldRender = float(color.r > 0.0 && elevations.r >= 0.0);
  float dotRadius = cellSize / 2. * coverage * shouldRender;

  int yIndex = (gl_InstanceID / gridSize[0]);
  int xIndex = gl_InstanceID - (yIndex * gridSize[0]);

  vec2 instancePositionXFP64 = mul_fp64(vec2(gridOffset[0], gridOffsetLow[0]), vec2(float(xIndex), 0.));
  instancePositionXFP64 = sum_fp64(instancePositionXFP64, vec2(gridOrigin[0], gridOriginLow[0]));
  vec2 instancePositionYFP64 = mul_fp64(vec2(gridOffset[1], gridOffsetLow[1]), vec2(float(yIndex), 0.));
  instancePositionYFP64 = sum_fp64(instancePositionYFP64, vec2(gridOrigin[1], gridOriginLow[1]));

  vec3 centroidPosition = vec3(instancePositionXFP64[0], instancePositionYFP64[0], elevation);
  vec3 centroidPosition64Low = vec3(instancePositionXFP64[1], instancePositionYFP64[1], 0.0);
  geometry.worldPosition = centroidPosition;
  vec3 pos = vec3(project_size(positions.xy + offset) * dotRadius, 0.);
  picking_setPickingColor(instancePickingColors);

  gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);

  vec3 normals_commonspace = project_normal(normals);

   if (extruded) {
    vec3 lightColor = lighting_getLightColor(color.rgb, project_uCameraPosition, geometry.position.xyz, normals_commonspace);
    vColor = vec4(lightColor, color.a * opacity) / 255.;
  } else {
    vColor = vec4(color.rgb, color.a * opacity) / 255.;
  }
}
`;var Q7=`#version 300 es
#define SHADER_NAME gpu-grid-cell-layer-fragment-shader

precision highp float;

in vec4 vColor;

out vec4 fragColor;

void main(void) {
  fragColor = vColor;
  fragColor = picking_filterColor(fragColor);
}
`;function eq(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function tq(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?eq(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):eq(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function bbe(t){var r=xbe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function xbe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var jI=0,GI=1,wbe={colorDomain:null,colorRange:Xc,elevationDomain:null,elevationRange:[0,1e3],elevationScale:{type:"number",min:0,value:1},gridSize:{type:"array",value:[1,1]},gridOrigin:{type:"array",value:[0,0]},gridOffset:{type:"array",value:[0,0]},cellSize:{type:"number",min:0,max:1e3,value:1e3},offset:{type:"array",value:[1,1]},coverage:{type:"number",min:0,max:1,value:1},extruded:!0,material:!0},yT=function(t){Ke(e,t);var r=bbe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"getShaders",value:function(){return Yt(me(e.prototype),"getShaders",this).call(this,{vs:J7,fs:Q7,modules:[La,dc,Wa,Ug]})}},{key:"initializeState",value:function(i){var a=i.gl,o=this.getAttributeManager();o.addInstanced({colors:{size:4,noAlloc:!0},elevations:{size:4,noAlloc:!0}});var s=this._getModel(a);this._setupUniformBuffer(s),this.setState({model:s})}},{key:"_getModel",value:function(i){return new Ni(i,tq(tq({},this.getShaders()),{},{id:this.props.id,geometry:new ud,isInstanced:!0}))}},{key:"draw",value:function(i){var a=i.uniforms,o=this.props,s=o.cellSize,u=o.offset,c=o.extruded,h=o.elevationScale,p=o.coverage,v=o.gridSize,x=o.gridOrigin,E=o.gridOffset,R=o.elevationRange,D=o.colorMaxMinBuffer,H=o.elevationMaxMinBuffer,W=[dd(x[0]),dd(x[1])],$=[dd(E[0]),dd(E[1])],J=this.getDomainUniforms(),B=Cd(this.props.colorRange);this.bindUniformBuffers(D,H),this.state.model.setUniforms(a).setUniforms(J).setUniforms({cellSize:s,offset:u,extruded:c,elevationScale:h,coverage:p,gridSize:v,gridOrigin:x,gridOriginLow:W,gridOffset:E,gridOffsetLow:$,colorRange:B,elevationRange:R}).draw(),this.unbindUniformBuffers(D,H)}},{key:"bindUniformBuffers",value:function(i,a){i.bind({target:35345,index:jI}),a.bind({target:35345,index:GI})}},{key:"unbindUniformBuffers",value:function(i,a){i.unbind({target:35345,index:jI}),a.unbind({target:35345,index:GI})}},{key:"getDomainUniforms",value:function(){var i=this.props,a=i.colorDomain,o=i.elevationDomain,s={};return a!==null?(s.colorDomainValid=!0,s.colorDomain=a):s.colorDomainValid=!1,o!==null?(s.elevationDomainValid=!0,s.elevationDomain=o):s.elevationDomainValid=!1,s}},{key:"_setupUniformBuffer",value:function(i){var a=this.context.gl,o=i.program.handle,s=a.getUniformBlockIndex(o,"ColorData"),u=a.getUniformBlockIndex(o,"ElevationData");a.uniformBlockBinding(o,s,jI),a.uniformBlockBinding(o,u,GI)}}]),e}(aa);_(yT,"layerName","GPUGridCellLayer");_(yT,"defaultProps",wbe);function rq(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function nq(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?rq(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):rq(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Tbe(t){var r=Sbe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Sbe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ebe={colorDomain:null,colorRange:Xc,getColorWeight:{type:"accessor",value:1},colorAggregation:"SUM",elevationDomain:null,elevationRange:[0,1e3],getElevationWeight:{type:"accessor",value:1},elevationAggregation:"SUM",elevationScale:{type:"number",min:0,value:1},cellSize:{type:"number",min:1,max:1e3,value:1e3},coverage:{type:"number",min:0,max:1,value:1},getPosition:{type:"accessor",value:function(r){return r.position}},extruded:!1,material:!0},Cbe={data:{props:["cellSize","colorAggregation","elevationAggregation"]}},iq="positions",Qm=function(t){Ke(e,t);var r=Tbe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"initializeState",value:function(i){var a,o=i.gl,s=ll.isSupported(o);s||xr.error("GPUGridLayer is not supported on this browser, use GridLayer instead")(),Yt(me(e.prototype),"initializeAggregationLayer",this).call(this,{dimensions:Cbe}),this.setState({gpuAggregation:!0,projectPoints:!1,isSupported:s,weights:{color:{needMin:!0,needMax:!0,combineMaxMin:!0,maxMinBuffer:new Jn(o,{byteLength:4*4,accessor:{size:4,type:5126,divisor:1}})},elevation:{needMin:!0,needMax:!0,combineMaxMin:!0,maxMinBuffer:new Jn(o,{byteLength:4*4,accessor:{size:4,type:5126,divisor:1}})}},positionAttributeName:"positions"});var u=this.getAttributeManager();u.add((a={},_(a,iq,{size:3,accessor:"getPosition",type:5130,fp64:this.use64bitPositions()}),_(a,"color",{size:3,accessor:"getColorWeight"}),_(a,"elevation",{size:3,accessor:"getElevationWeight"}),a))}},{key:"updateState",value:function(i){if(this.state.isSupported!==!1){Yt(me(e.prototype),"updateState",this).call(this,i);var a=this.state.aggregationDirty;a&&this.setState({gridHash:null})}}},{key:"getHashKeyForIndex",value:function(i){var a=this.state,o=a.numRow,s=a.numCol,u=a.boundingBox,c=a.gridOffset,h=[s,o],p=[u.xMin,u.yMin],v=[c.xOffset,c.yOffset],x=Math.floor(i/h[0]),E=i-x*h[0],R=Math.floor((x*v[1]+p[1]+90+v[1]/2)/v[1]),D=Math.floor((E*v[0]+p[0]+180+v[0]/2)/v[0]);return"".concat(R,"-").concat(D)}},{key:"getPositionForIndex",value:function(i){var a=this.state,o=a.numRow,s=a.numCol,u=a.boundingBox,c=a.gridOffset,h=[s,o],p=[u.xMin,u.yMin],v=[c.xOffset,c.yOffset],x=Math.floor(i/h[0]),E=i-x*h[0],R=x*v[1]+p[1],D=E*v[0]+p[0];return[D,R]}},{key:"getPickingInfo",value:function(i){var a=i.info,o=i.mode,s=a.index,u=null;if(s>=0){var c=this.state.gpuGridAggregator,h=this.getPositionForIndex(s),p=ll.getAggregationData(nq({pixelIndex:s},c.getData("color"))),v=ll.getAggregationData(nq({pixelIndex:s},c.getData("elevation")));if(u={colorValue:p.cellWeight,elevationValue:v.cellWeight,count:p.cellCount||v.cellCount,position:h,totalCount:p.totalCount||v.totalCount},o!=="hover"){var x=this.props,E=this.state.gridHash;if(!E){var R=this.state,D=R.gridOffset,H=R.translation,W=R.boundingBox,$=this.context.viewport,J=this.getAttributes(),B=GA(x,{gridOffset:D,attributes:J,viewport:$,translation:H,boundingBox:W});E=B.gridHash,this.setState({gridHash:E})}var se=this.getHashKeyForIndex(s),V=E[se];Object.assign(u,V)}}return a.picked=Boolean(u),a.object=u,a}},{key:"renderLayers",value:function(){if(!this.state.isSupported)return null;var i=this.props,a=i.elevationScale,o=i.extruded,s=i.cellSize,u=i.coverage,c=i.material,h=i.elevationRange,p=i.colorDomain,v=i.elevationDomain,x=this.state,E=x.weights,R=x.numRow,D=x.numCol,H=x.gridOrigin,W=x.gridOffset,$=E.color,J=E.elevation,B=Cd(this.props.colorRange),se=this.getSubLayerClass("gpu-grid-cell",yT);return new se({gridSize:[D,R],gridOrigin:H,gridOffset:[W.xOffset,W.yOffset],colorRange:B,elevationRange:h,colorDomain:p,elevationDomain:v,cellSize:s,coverage:u,material:c,elevationScale:a,extruded:o},this.getSubLayerProps({id:"gpu-grid-cell"}),{data:{attributes:{colors:$.aggregationBuffer,elevations:J.aggregationBuffer}},colorMaxMinBuffer:$.maxMinBuffer,elevationMaxMinBuffer:J.maxMinBuffer,numInstances:D*R})}},{key:"finalizeState",value:function(i){var a=this.state.weights,o=a.color,s=a.elevation;[o,s].forEach(function(u){var c=u.aggregationBuffer,h=u.maxMinBuffer;h.delete(),c?.delete()}),Yt(me(e.prototype),"finalizeState",this).call(this,i)}},{key:"updateAggregationState",value:function(i){var a=i.props,o=i.oldProps,s=a.cellSize,u=a.coordinateSystem,c=this.context.viewport,h=o.cellSize!==s,p=this.state.dimensions,v=this.isAttributeChanged(iq),x=v||this.isAttributeChanged(),E=this.state.boundingBox;if(v&&(E=cT(this.getAttributes(),this.getNumInstances()),this.setState({boundingBox:E})),v||h){var R=fT(E,s,c,u),D=R.gridOffset,H=R.translation,W=R.width,$=R.height,J=R.numCol,B=R.numRow;this.allocateResources(B,J),this.setState({gridOffset:D,translation:H,gridOrigin:[-1*H[0],-1*H[1]],width:W,height:$,numCol:J,numRow:B})}var se=x||this.isAggregationDirty(i,{dimension:p.data,compareAll:!0});se&&this._updateAccessors(i),this.setState({aggregationDataDirty:se})}},{key:"_updateAccessors",value:function(i){var a=i.props,o=a.colorAggregation,s=a.elevationAggregation,u=this.state.weights,c=u.color,h=u.elevation;c.operation=Po[o],h.operation=Po[s]}}]),e}(Zm);_(Qm,"layerName","GPUGridLayer");_(Qm,"defaultProps",Ebe);function Pbe(t){var r=Obe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Obe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function aq(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function VI(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?aq(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):aq(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var Mbe=VI(VI(VI({},Qm.defaultProps),$m.defaultProps),{},{gpuAggregation:!1}),_T=function(t){Ke(e,t);var r=Pbe(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"initializeState",value:function(){this.state={useGPUAggregation:!0}}},{key:"updateState",value:function(i){var a=i.props;this.setState({useGPUAggregation:this.canUseGPUAggregation(a)})}},{key:"renderLayers",value:function(){var i=this.props,a=i.data,o=i.updateTriggers,s=this.state.useGPUAggregation?"GPU":"CPU",u=this.state.useGPUAggregation?this.getSubLayerClass("GPU",Qm):this.getSubLayerClass("CPU",$m);return new u(this.props,this.getSubLayerProps({id:s,updateTriggers:o}),{data:a})}},{key:"canUseGPUAggregation",value:function(i){var a=i.gpuAggregation,o=i.lowerPercentile,s=i.upperPercentile,u=i.getColorValue,c=i.getElevationValue,h=i.colorScaleType;return!(!a||!ll.isSupported(this.context.gl)||o!==0||s!==100||u!==null||c!==null||h==="quantile"||h==="ordinal")}}]),e}(Go);_(_T,"layerName","GridLayer");_(_T,"defaultProps",Mbe);Mn();at();vt();et();Mn();function Ibe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Rbe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Rbe(t,r){if(t){if(typeof t=="string")return oq(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return oq(t,r)}}function oq(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function uq(t){var r=t.map(function(s){return s[0]}),e=t.map(function(s){return s[1]}),n=Math.min.apply(null,r),i=Math.max.apply(null,r),a=Math.min.apply(null,e),o=Math.max.apply(null,e);return[n,a,i,o]}function lq(t,r){return r[0]>=t[0]&&r[2]<=t[2]&&r[1]>=t[1]&&r[3]<=t[3]}var sq=new Float32Array(12);function HI(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,e=0,n=Ibe(t),i;try{for(n.s();!(i=n.n()).done;)for(var a=i.value,o=0;o<r;o++)sq[e++]=a[o]||0}catch(s){n.e(s)}finally{n.f()}return sq}function cq(t,r,e){var n=Ot(t,4),i=n[0],a=n[1],o=n[2],s=n[3],u=o-i,c=s-a,h=u,p=c;u/c<r/e?h=r/e*c:p=e/r*u,h<r&&(h=r,p=e);var v=(o+i)/2,x=(s+a)/2;return[v-h/2,x-p/2,v+h/2,x+p/2]}function fq(t,r){var e=Ot(r,4),n=e[0],i=e[1],a=e[2],o=e[3];return[(t[0]-n)/(a-n),(t[1]-i)/(o-i)]}function hq(t){var r=t.gl,e=t.floatTargetSupport;return e?{format:En(r)?34836:6408,type:5126}:{format:6408,type:5121}}at();vt();et();var pq=`#define SHADER_NAME heatp-map-layer-vertex-shader

uniform sampler2D maxTexture;
uniform float intensity;
uniform vec2 colorDomain;
uniform float threshold;
uniform float aggregationMode;

attribute vec3 positions;
attribute vec2 texCoords;

varying vec2 vTexCoords;
varying float vIntensityMin;
varying float vIntensityMax;

void main(void) {
  gl_Position = project_position_to_clipspace(positions, vec3(0.0), vec3(0.0));
  vTexCoords = texCoords;
  vec4 maxTexture = texture2D(maxTexture, vec2(0.5));
  float maxValue = aggregationMode < 0.5 ? maxTexture.r : maxTexture.g;
  float minValue = maxValue * threshold;
  if (colorDomain[1] > 0.) {
    maxValue = colorDomain[1];
    minValue = colorDomain[0];
  }
  vIntensityMax = intensity / maxValue;
  vIntensityMin = intensity / minValue;
}
`;var dq=`#define SHADER_NAME triangle-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D texture;
uniform sampler2D colorTexture;
uniform float aggregationMode;

varying vec2 vTexCoords;
varying float vIntensityMin;
varying float vIntensityMax;

vec4 getLinearColor(float value) {
  float factor = clamp(value * vIntensityMax, 0., 1.);
  vec4 color = texture2D(colorTexture, vec2(factor, 0.5));
  color.a *= min(value * vIntensityMin, 1.0);
  return color;
}

void main(void) {
  vec4 weights = texture2D(texture, vTexCoords);
  float weight = weights.r;

  if (aggregationMode > 0.5) {
    weight /= max(1.0, weights.a);
  }
  if (weight <= 0.) {
     discard;
  }

  vec4 linearColor = getLinearColor(weight);
  linearColor.a *= opacity;
  gl_FragColor =linearColor;
}
`;function mq(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function bT(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?mq(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):mq(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Lbe(t){var r=kbe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function kbe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var WI=function(t){Ke(e,t);var r=Lbe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"getShaders",value:function(){return{vs:pq,fs:dq,modules:[La]}}},{key:"initializeState",value:function(i){var a=i.gl,o=this.getAttributeManager();o.add({positions:{size:3,noAlloc:!0},texCoords:{size:2,noAlloc:!0}}),this.setState({model:this._getModel(a)})}},{key:"_getModel",value:function(i){var a=this.props.vertexCount;return new Ni(i,bT(bT({},this.getShaders()),{},{id:this.props.id,geometry:new Bi({drawMode:6,vertexCount:a})}))}},{key:"draw",value:function(i){var a=i.uniforms,o=this.state.model,s=this.props,u=s.texture,c=s.maxTexture,h=s.colorTexture,p=s.intensity,v=s.threshold,x=s.aggregationMode,E=s.colorDomain;o.setUniforms(bT(bT({},a),{},{texture:u,maxTexture:c,colorTexture:h,intensity:p,threshold:v,aggregationMode:x,colorDomain:E})).draw()}}]),e}(aa);_(WI,"layerName","TriangleLayer");var vq=`attribute vec3 positions;
attribute vec3 positions64Low;
attribute float weights;
varying vec4 weightsTexture;
uniform float radiusPixels;
uniform float textureWidth;
uniform vec4 commonBounds;
uniform float weightsScale;
void main()
{
  weightsTexture = vec4(weights * weightsScale, 0., 0., 1.);

  float radiusTexels  = project_pixel_size(radiusPixels) * textureWidth / (commonBounds.z - commonBounds.x);
  gl_PointSize = radiusTexels * 2.;

  vec3 commonPosition = project_position(positions, positions64Low);
  gl_Position.xy = (commonPosition.xy - commonBounds.xy) / (commonBounds.zw - commonBounds.xy) ;
  gl_Position.xy = (gl_Position.xy * 2.) - (1.);
}
`;var gq=`varying vec4 weightsTexture;
float gaussianKDE(float u){
  return pow(2.71828, -u*u/0.05555)/(1.77245385*0.166666);
}
void main()
{
  float dist = length(gl_PointCoord - vec2(0.5, 0.5));
  if (dist > 0.5) {
    discard;
  }
  gl_FragColor = weightsTexture * gaussianKDE(2. * dist);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;var Aq=`attribute vec4 inTexture;
varying vec4 outTexture;

void main()
{
outTexture = inTexture;
gl_Position = vec4(0, 0, 0, 1.);
gl_PointSize = 1.0;
}
`;var yq=`varying vec4 outTexture;
void main() {
  gl_FragColor = outTexture;
  gl_FragColor.g = outTexture.r / max(1.0, outTexture.a);
}
`;var t0;function _q(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function r0(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?_q(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):_q(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Bbe(t){var r=Dbe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Dbe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Fbe=2,qI={mipmaps:!1,parameters:(t0={},_(t0,10240,9729),_(t0,10241,9729),_(t0,10242,33071),_(t0,10243,33071),t0),dataFormat:6408},bq=[0,0],Nbe={SUM:0,MEAN:1},zbe={getPosition:{type:"accessor",value:function(r){return r.position}},getWeight:{type:"accessor",value:1},intensity:{type:"number",min:0,value:1},radiusPixels:{type:"number",min:1,max:100,value:50},colorRange:Xc,threshold:{type:"number",min:0,max:1,value:.05},colorDomain:{type:"array",value:null,optional:!0},aggregation:"SUM",weightsTextureSize:{type:"number",min:128,max:2048,value:2048},debounceTimeout:{type:"number",min:0,max:1e3,value:500}},Ube=[ni.BLEND_EQUATION_MINMAX,ni.TEXTURE_FLOAT],jbe=[ni.COLOR_ATTACHMENT_RGBA32F,ni.FLOAT_BLEND],Gbe={data:{props:["radiusPixels"]}},xT=function(t){Ke(e,t);var r=Bbe(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"initializeState",value:function(){var i=this.context.gl;if(!Mu(i,Ube)){this.setState({supported:!1}),xr.error("HeatmapLayer: ".concat(this.id," is not supported on this browser"))();return}Yt(me(e.prototype),"initializeAggregationLayer",this).call(this,Gbe),this.setState({supported:!0,colorDomain:bq}),this._setupTextureParams(),this._setupAttributes(),this._setupResources()}},{key:"shouldUpdateState",value:function(i){var a=i.changeFlags;return a.somethingChanged}},{key:"updateState",value:function(i){this.state.supported&&(Yt(me(e.prototype),"updateState",this).call(this,i),this._updateHeatmapState(i))}},{key:"_updateHeatmapState",value:function(i){var a=i.props,o=i.oldProps,s=this._getChangeFlags(i);(s.dataChanged||s.viewportChanged)&&(s.boundsChanged=this._updateBounds(s.dataChanged),this._updateTextureRenderingBounds()),s.dataChanged||s.boundsChanged?(clearTimeout(this.state.updateTimer),this.setState({isWeightMapDirty:!0})):s.viewportZoomChanged&&this._debouncedUpdateWeightmap(),a.colorRange!==o.colorRange&&this._updateColorTexture(i),this.state.isWeightMapDirty&&this._updateWeightmap(),this.setState({zoom:i.context.viewport.zoom})}},{key:"renderLayers",value:function(){if(!this.state.supported)return[];var i=this.state,a=i.weightsTexture,o=i.triPositionBuffer,s=i.triTexCoordBuffer,u=i.maxWeightsTexture,c=i.colorTexture,h=i.colorDomain,p=this.props,v=p.updateTriggers,x=p.intensity,E=p.threshold,R=p.aggregation,D=this.getSubLayerClass("triangle",WI);return new D(this.getSubLayerProps({id:"triangle-layer",updateTriggers:v}),{coordinateSystem:yn.DEFAULT,data:{attributes:{positions:o,texCoords:s}},vertexCount:4,maxTexture:u,colorTexture:c,aggregationMode:Nbe[R]||0,texture:a,intensity:x,threshold:E,colorDomain:h})}},{key:"finalizeState",value:function(i){Yt(me(e.prototype),"finalizeState",this).call(this,i);var a=this.state,o=a.weightsTransform,s=a.weightsTexture,u=a.maxWeightTransform,c=a.maxWeightsTexture,h=a.triPositionBuffer,p=a.triTexCoordBuffer,v=a.colorTexture,x=a.updateTimer;o?.delete(),s?.delete(),u?.delete(),c?.delete(),h?.delete(),p?.delete(),v?.delete(),x&&clearTimeout(x)}},{key:"_getAttributeManager",value:function(){return new yd(this.context.gl,{id:this.props.id,stats:this.context.stats})}},{key:"_getChangeFlags",value:function(i){var a={},o=this.state.dimensions;a.dataChanged=this.isAttributeChanged()||this.isAggregationDirty(i,{compareAll:!0,dimension:o.data}),a.viewportChanged=i.changeFlags.viewportChanged;var s=this.state.zoom;return(!i.context.viewport||i.context.viewport.zoom!==s)&&(a.viewportZoomChanged=!0),a}},{key:"_createTextures",value:function(){var i=this.context.gl,a=this.state,o=a.textureSize,s=a.format,u=a.type;this.setState({weightsTexture:new la(i,r0({width:o,height:o,format:s,type:u},qI)),maxWeightsTexture:new la(i,r0({format:s,type:u},qI))})}},{key:"_setupAttributes",value:function(){var i=this.getAttributeManager();i.add({positions:{size:3,type:5130,accessor:"getPosition"},weights:{size:1,accessor:"getWeight"}}),this.setState({positionAttributeName:"positions"})}},{key:"_setupTextureParams",value:function(){var i=this.context.gl,a=this.props.weightsTextureSize,o=Math.min(a,ih(i,3379)),s=Mu(i,jbe),u=hq({gl:i,floatTargetSupport:s}),c=u.format,h=u.type,p=s?1:1/255;this.setState({textureSize:o,format:c,type:h,weightsScale:p}),s||xr.warn("HeatmapLayer: ".concat(this.id," rendering to float texture not supported, fallingback to low precession format"))()}},{key:"getShaders",value:function(i){return Yt(me(e.prototype),"getShaders",this).call(this,i==="max-weights-transform"?{vs:Aq,_fs:yq}:{vs:vq,_fs:gq})}},{key:"_createWeightsTransform",value:function(){var i,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=this.context.gl,s=this.state.weightsTransform,u=this.state.weightsTexture;(i=s)===null||i===void 0||i.delete(),s=new Il(o,r0({id:"".concat(this.id,"-weights-transform"),elementCount:1,_targetTexture:u,_targetTextureVarying:"weightsTexture"},a)),this.setState({weightsTransform:s})}},{key:"_setupResources",value:function(){var i=this.context.gl;this._createTextures();var a=this.state,o=a.textureSize,s=a.weightsTexture,u=a.maxWeightsTexture,c=this.getShaders("weights-transform");this._createWeightsTransform(c);var h=this.getShaders("max-weights-transform"),p=new Il(i,r0(r0({id:"".concat(this.id,"-max-weights-transform"),_sourceTextures:{inTexture:s},_targetTexture:u,_targetTextureVarying:"outTexture"},h),{},{elementCount:o*o}));this.setState({weightsTexture:s,maxWeightsTexture:u,maxWeightTransform:p,zoom:null,triPositionBuffer:new Jn(i,{byteLength:48,accessor:{size:3}}),triTexCoordBuffer:new Jn(i,{byteLength:48,accessor:{size:2}})})}},{key:"updateShaders",value:function(i){this._createWeightsTransform(i)}},{key:"_updateMaxWeightValue",value:function(){var i=this.state.maxWeightTransform;i.run({parameters:{blend:!0,depthTest:!1,blendFunc:[1,1],blendEquation:32776}})}},{key:"_updateBounds",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,a=this.context.viewport,o=[a.unproject([0,0]),a.unproject([a.width,0]),a.unproject([a.width,a.height]),a.unproject([0,a.height])].map(function(x){return x.map(Math.fround)}),s=uq(o),u={visibleWorldBounds:s,viewportCorners:o},c=!1;if(i||!this.state.worldBounds||!lq(this.state.worldBounds,s)){var h=this._worldToCommonBounds(s),p=this._commonToWorldBounds(h);this.props.coordinateSystem===yn.LNGLAT&&(p[1]=Math.max(p[1],-85.051129),p[3]=Math.min(p[3],85.051129),p[0]=Math.max(p[0],-360),p[2]=Math.min(p[2],360));var v=this._worldToCommonBounds(p);u.worldBounds=p,u.normalizedCommonBounds=v,c=!0}return this.setState(u),c}},{key:"_updateTextureRenderingBounds",value:function(){var i=this.state,a=i.triPositionBuffer,o=i.triTexCoordBuffer,s=i.normalizedCommonBounds,u=i.viewportCorners,c=this.context.viewport;a.subData(HI(u,3));var h=u.map(function(p){return fq(c.projectPosition(p),s)});o.subData(HI(h,2))}},{key:"_updateColorTexture",value:function(i){var a=i.props.colorRange,o=this.state.colorTexture,s=Cd(a,!1,Uint8Array);o?o.setImageData({data:s,width:a.length}):o=new la(this.context.gl,r0({data:s,width:a.length,height:1},qI)),this.setState({colorTexture:o})}},{key:"_updateWeightmap",value:function(){var i=this,a,o=this.props,s=o.radiusPixels,u=o.colorDomain,c=o.aggregation,h=this.state,p=h.weightsTransform,v=h.worldBounds,x=h.textureSize,E=h.weightsTexture,R=h.weightsScale;this.state.isWeightMapDirty=!1;var D=this._worldToCommonBounds(v,{useLayerCoordinateSystem:!0});if(u&&c==="SUM"){var H=this.context.viewport,W=H.distanceScales.metersPerUnit[2]*(D[2]-D[0])/x;this.state.colorDomain=u.map(function(J){return J*W*R})}else this.state.colorDomain=u||bq;var $={radiusPixels:s,commonBounds:D,textureWidth:x,weightsScale:R};p.update({elementCount:this.getNumInstances()}),Aa(this.context.gl,{clearColor:[0,0,0,0]},function(){p.run({uniforms:$,parameters:{blend:!0,depthTest:!1,blendFunc:[1,1],blendEquation:32774},clearRenderTarget:!0,attributes:i.getAttributes(),moduleSettings:i.getModuleSettings()})}),this._updateMaxWeightValue(),E.setParameters((a={},_(a,10240,9729),_(a,10241,9729),a))}},{key:"_debouncedUpdateWeightmap",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,a=this.state.updateTimer,o=this.props.debounceTimeout;i?(a=null,this._updateBounds(!0),this._updateTextureRenderingBounds(),this.setState({isWeightMapDirty:!0})):(this.setState({isWeightMapDirty:!1}),clearTimeout(a),a=setTimeout(this._debouncedUpdateWeightmap.bind(this,!0),o)),this.setState({updateTimer:a})}},{key:"_worldToCommonBounds",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.useLayerCoordinateSystem,s=o===void 0?!1:o,u=Ot(i,4),c=u[0],h=u[1],p=u[2],v=u[3],x=this.context.viewport,E=this.state.textureSize,R=this.props.coordinateSystem,D=s&&(R===yn.LNGLAT_OFFSETS||R===yn.METER_OFFSETS),H=D?x.projectPosition(this.props.coordinateOrigin):[0,0],W=E*Fbe/x.scale,$,J;return s&&!D?($=this.projectPosition([c,h,0]),J=this.projectPosition([p,v,0])):($=x.projectPosition([c,h,0]),J=x.projectPosition([p,v,0])),cq([$[0]-H[0],$[1]-H[1],J[0]-H[0],J[1]-H[1]],W,W)}},{key:"_commonToWorldBounds",value:function(i){var a=Ot(i,4),o=a[0],s=a[1],u=a[2],c=a[3],h=this.context.viewport,p=h.unprojectPosition([o,s]),v=h.unprojectPosition([u,c]);return p.slice(0,2).concat(v.slice(0,2))}}]),e}(Sf);_(xT,"layerName","HeatmapLayer");_(xT,"defaultProps",zbe);Mn();at();vt();et();var iv=en(On());et();var eR=en(On());et();var eX=en(Jq());function Qq(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function rwe(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Qq(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Qq(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function tX(t,r){var e=new eX.XMLParser(rwe({ignoreAttributes:!1,attributeNamePrefix:""},r)),n=e.parse(t);return n}Mn();Ii();function nwe(t){return typeof t=="string"?t.charAt(0).toLowerCase()+t.slice(1):t}function TT(t){if(Array.isArray(t))return t.map(function(s){return TT(s)});if(t&&vr(t)==="object"){for(var r={},e=0,n=Object.entries(t);e<n.length;e++){var i=Ot(n[e],2),a=i[0],o=i[1];r[nwe(a)]=TT(o)}return r}return t}function rX(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function QI(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?rX(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):rX(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var iwe="3.4.13",Yc={name:"XML",id:"xml",module:"xml",version:iwe,worker:!1,extensions:["xml"],mimeTypes:["application/xml","text/xml"],testText:awe,options:{xml:{parser:"fast-xml-parser",uncapitalizeKeys:!1,removeNSPrefix:!1,textNodeName:"value",arrayPaths:[]}},parse:function(){var t=zt(eR.default.mark(function e(n,i){return eR.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",nX(new TextDecoder().decode(n),i));case 1:case"end":return o.stop()}},e)}));function r(e,n){return t.apply(this,arguments)}return r}(),parseTextSync:function(r,e){return nX(r,e)}};function awe(t){return t.startsWith("<?xml")}function nX(t,r){var e,n=QI(QI({},Yc.options.xml),r?.xml);switch(n.parser){case"fast-xml-parser":var i=QI({allowBooleanAttributes:!0,ignoreDeclaration:!0,removeNSPrefix:n.removeNSPrefix,textNodeName:n.textNodeName,isArray:function(s,u,c,h){var p,v=Boolean(n==null||(p=n.arrayPaths)===null||p===void 0?void 0:p.some(function(x){return u===x}));return v}},r?._fastXML),a=tX(t,i);return n.uncapitalizeKeys?TT(a):a;default:throw new Error(r==null||(e=r.xml)===null||e===void 0?void 0:e.parser)}}et();var rR=en(On());function iX(t,r){var e,n,i,a=(e=Yc.parseTextSync)===null||e===void 0?void 0:e.call(Yc,t,r),o=(a==null||(n=a.ServiceExceptionReport)===null||n===void 0?void 0:n.ServiceException)||(a==null||(i=a["ogc:ServiceExceptionReport"])===null||i===void 0?void 0:i["ogc:ServiceException"]),s=typeof o=="string"?o:o.value||o.code||"Unknown error";return s}function aX(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function oX(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?aX(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):aX(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var owe="3.4.13",n0={id:"wms-error",name:"WMS Error",module:"wms",version:owe,worker:!1,extensions:["xml"],mimeTypes:["application/vnd.ogc.se_xml","application/xml","text/xml"],testText:swe,options:{wms:{throwOnError:!1}},parse:function(){var t=zt(rR.default.mark(function e(n,i){return rR.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",tR(new TextDecoder().decode(n),i));case 1:case"end":return o.stop()}},e)}));function r(e,n){return t.apply(this,arguments)}return r}(),parseSync:function(r,e){return tR(new TextDecoder().decode(r),e)},parseTextSync:function(r,e){return tR(r,e)}};function swe(t){return t.startsWith("<?xml")}function tR(t,r){var e=oX(oX({},n0.options.wms),r?.wms),n=iX(t,e),i=e.minimalErrors?n:"WMS Service error: ".concat(n);if(e.throwOnError)throw new Error(i);return i}var iR=en(On());Mn();Ii();function tv(t){return Array.isArray(t)?t:t?[t]:[]}function v1(t){var r=tv(t);return r.length>0&&r.every(function(e){return typeof e=="string"})?r:[]}function g1(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;switch(vr(t)){case"number":return t;case"string":return parseFloat(t);default:return}}function ST(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;switch(vr(t)){case"number":return t;case"string":return parseInt(t,10);default:return}}function rv(t){switch(t){case"true":return!0;case"false":return!1;case"1":return!0;case"0":return!1;default:return!1}}function ET(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=uwe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function uwe(t,r){if(t){if(typeof t=="string")return sX(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return sX(t,r)}}function sX(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function nR(t,r){var e=Yc.parseTextSync(t,r),n=e.WMT_MS_Capabilities||e.WMS_Capabilities||e,i=lwe(n);if(r!=null&&r.inheritedLayerProps){var a=ET(i.layers),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;lX(s,null)}}catch(u){a.e(u)}finally{a.f()}}return(r!=null&&r.includeRawData||r!=null&&r.raw)&&(i.raw=n),r!=null&&r.includeXMLText&&(i.xml=t),i}function lwe(t){var r,e,n,i,a,o,s,u,c,h,p,v,x,E,R,D,H={version:String(t.version||""),name:String(((r=t.Service)===null||r===void 0?void 0:r.Name)||"unnamed"),title:(e=t.Service)!==null&&e!==void 0&&e.Title?String((n=t.Service)===null||n===void 0?void 0:n.Title):void 0,abstract:(i=t.Service)!==null&&i!==void 0&&i.Abstract?String((a=t.Service)===null||a===void 0?void 0:a.Abstract):void 0,keywords:v1((o=t.Service)===null||o===void 0||(s=o.KeywordList)===null||s===void 0?void 0:s.Keyword),fees:(u=t.Service)!==null&&u!==void 0&&u.Fees?JSON.stringify((c=t.Service)===null||c===void 0?void 0:c.Fees):void 0,accessConstraints:(h=t.Service)!==null&&h!==void 0&&h.AccessConstraints?JSON.stringify((p=t.Service)===null||p===void 0?void 0:p.AccessConstraints):void 0,layerLimit:ST((v=t.Service)===null||v===void 0?void 0:v.LayerLimit),maxWidth:ST((x=t.Service)===null||x===void 0?void 0:x.maxWidth),maxHeight:ST((E=t.Service)===null||E===void 0?void 0:E.maxHeight),layers:[],requests:cwe((R=t.Capability)===null||R===void 0?void 0:R.Request),exceptions:fwe(t.Exception)},W=tv((D=t.Capability)===null||D===void 0?void 0:D.Layer),$=ET(W),J;try{for($.s();!(J=$.n()).done;){var B=J.value;H.layers.push(uX(B))}}catch(U){$.e(U)}finally{$.f()}for(var se=0,V=Object.entries(H);se<V.length;se++){var X=Ot(V[se],2),I=X[0],O=X[1];O===void 0&&delete H[I]}return H}function cwe(t){for(var r={},e=0,n=Object.entries(t||{});e<n.length;e++){var i=Ot(n[e],2),a=i[0],o=i[1],s=v1(o?.Format);r[a]={mimeTypes:s}}return r}function fwe(t){var r=tv(t?.Format);if(r.length>0)return{mimeTypes:v1(t)}}function uX(t){var r,e={title:String(t?.Title||""),name:t?.Name&&String(t?.Name),abstract:t?.Name&&String(t?.Abstract),keywords:v1((r=t.KeywordList)===null||r===void 0?void 0:r.Keyword)},n=t?.CRS||t?.SRS;n&&Array.isArray(n)&&n.every(function(W){return typeof W=="string"})&&(e.crs=n);var i=t?.EX_GeographicBoundingBox&&hwe(t?.EX_GeographicBoundingBox);i&&(e.geographicBoundingBox=i),i=t?.LatLonBoundingBox&&pwe(t?.LatLonBoundingBox),i&&(e.geographicBoundingBox=i);var a=t?.BoundingBox&&dwe(t?.BoundingBox);a&&a.length>0&&(e.boundingBoxes=a);var o=tv(t?.Dimension),s=o.map(function(W){return vwe(W)});s.length&&(e.dimensions=s),t!=null&&t.opaque&&(e.opaque=rv(t?.opaque)),t!=null&&t.cascaded&&(e.cascaded=rv(t?.cascaded)),t!=null&&t.queryable&&(e.queryable=rv(t?.queryable));var u=tv(t?.Layer),c=[],h=ET(u),p;try{for(h.s();!(p=h.n()).done;){var v=p.value;c.push(uX(v))}}catch(W){h.e(W)}finally{h.f()}c.length>0&&(e.layers=c);for(var x=0,E=Object.entries(e);x<E.length;x++){var R=Ot(E[x],2),D=R[0],H=R[1];H===void 0&&delete e[D]}return e}function hwe(t){var r=t.westBoundLongitude,e=t.northBoundLatitude,n=t.eastBoundLongitude,i=t.southBoundLatitude;return[[r,i],[n,e]]}function pwe(t){var r=t.minx,e=t.miny,n=t.maxx,i=t.maxy;return[[r,e],[n,i]]}function dwe(t){var r=tv(t);return r.map(function(e){return mwe(e)})}function mwe(t){var r=t.CRS,e=t.SRS,n=t.minx,i=t.miny,a=t.maxx,o=t.maxy,s=t.resx,u=t.resy,c={crs:r||e,boundingBox:[[g1(n),g1(i)],[g1(a),g1(o)]]};return s&&(c.xResolution=s),u&&(c.yResolution=u),c}function vwe(t){var r=t.name,e=t.units,n=t.value,i={name:r,units:e,extent:n};return t.unitSymbol&&(i.unitSymbol=t.unitSymbol),t.default&&(i.defaultValue=t.default),t.multipleValues&&(i.multipleValues=rv(t.multipleValues)),t.nearestValue&&(i.nearestValue=rv(t.nearestValue)),t.current&&(i.current=rv(t.current)),i}function lX(t,r){r!=null&&r.geographicBoundingBox&&!t.geographicBoundingBox&&(t.geographicBoundingBox=Pr(r.geographicBoundingBox)),r!=null&&r.crs&&!t.crs&&(t.crs=Pr(r.crs)),r!=null&&r.boundingBoxes&&!t.boundingBoxes&&(t.boundingBoxes=Pr(r.boundingBoxes)),r!=null&&r.dimensions&&!t.dimensions&&(t.dimensions=Pr(r.dimensions));var e=ET(t.layers||[]),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;lX(i,t)}}catch(a){e.e(a)}finally{e.f()}}var gwe="3.4.13",nv={id:"wms-capabilities",name:"WMS Capabilities",module:"wms",version:gwe,worker:!1,extensions:["xml"],mimeTypes:["application/vnd.ogc.wms_xml","application/xml","text/xml"],testText:Awe,options:{wms:{}},parse:function(){var t=zt(iR.default.mark(function e(n,i){return iR.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",nR(new TextDecoder().decode(n),i?.wms));case 1:case"end":return o.stop()}},e)}));function r(e,n){return t.apply(this,arguments)}return r}(),parseTextSync:function(r,e){return nR(r,e?.wms)}};function Awe(t){return t.startsWith("<?xml")}et();var oR=en(On());function aR(t,r){var e,n=Yc.parseTextSync(t,r),i=((e=n.FeatureInfoResponse)===null||e===void 0?void 0:e.FIELDS)||[],a=Array.isArray(i)?i:[i];return{features:a.map(function(o){return ywe(o)})}}function ywe(t){var r=t||{};return{attributes:r,type:"",bounds:{bottom:0,top:0,left:0,right:0}}}function cX(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function fX(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?cX(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):cX(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var sR=fX(fX({},nv),{},{id:"wms-feature-info",name:"WMS FeatureInfo",parse:function(){var t=zt(oR.default.mark(function e(n,i){return oR.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",aR(new TextDecoder().decode(n),i));case 1:case"end":return o.stop()}},e)}));function r(e,n){return t.apply(this,arguments)}return r}(),parseTextSync:function(r,e){return aR(r,e)}});et();var lR=en(On());function uR(t,r){var e,n=(e=Yc.parseTextSync)===null||e===void 0?void 0:e.call(Yc,t,r);return n}function hX(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function pX(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?hX(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):hX(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var cR=pX(pX({},nv),{},{id:"wms-layer-description",name:"WMS DescribeLayer",parse:function(){var t=zt(lR.default.mark(function e(n,i){return lR.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",uR(new TextDecoder().decode(n),i));case 1:case"end":return o.stop()}},e)}));function r(e,n){return t.apply(this,arguments)}return r}(),parseTextSync:function(r,e){return uR(r,e)}});at();et();at();vt();et();function dX(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function mX(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?dX(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):dX(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var vX=function(){function t(r){ce(this,t),_(this,"fetch",void 0),_(this,"loadOptions",void 0),_(this,"_needsRefresh",!0),_(this,"props",void 0),this.props=mX({},r),this.loadOptions=mX({},r.loadOptions),this.fetch=_we(this.loadOptions)}return ve(t,[{key:"setProps",value:function(e){this.props=Object.assign(this.props,e),this.setNeedsRefresh()}},{key:"setNeedsRefresh",value:function(){this._needsRefresh=!0}},{key:"getNeedsRefresh",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=this._needsRefresh;return e&&(this._needsRefresh=!1),n}}]),t}();function _we(t){var r=t?.fetch;if(r&&typeof r=="function")return function(n,i){return r(n,i)};var e=t?.fetch;return e&&typeof e!="function"?function(n){return fetch(n,e)}:function(n){return fetch(n)}}function bwe(t){var r=xwe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function xwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var mp=function(t){Ke(e,t);var r=bwe(e);function e(){return ce(this,e),r.apply(this,arguments)}return e}(vX);et();Mn();at();vt();var A1=en(On());et();function gX(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function AX(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?gX(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):gX(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function wwe(t){var r=Twe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Twe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var y1=function(t){Ke(e,t);var r=wwe(e);function e(n){return ce(this,e),r.call(this,n)}return ve(e,[{key:"getMetadata",value:function(){var n=zt(A1.default.mark(function a(){return A1.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:throw new Error("ImageSource.getMetadata not implemented");case 1:case"end":return s.stop()}},a)}));function i(){return n.apply(this,arguments)}return i}()},{key:"getImage",value:function(){var n=zt(A1.default.mark(function a(o){var s,u,c,h;return A1.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return s=this.getGranularParameters(o),u=this.getURLFromTemplate(s),v.next=4,this.fetch(u);case 4:return c=v.sent,v.next=7,c.arrayBuffer();case 7:return h=v.sent,v.next=10,vf.parse(h);case 10:return v.abrupt("return",v.sent);case 11:case"end":return v.stop()}},a,this)}));function i(a){return n.apply(this,arguments)}return i}()},{key:"getGranularParameters",value:function(i){var a=Ot(i.bbox,4),o=a[0],s=a[1],u=a[2],c=a[3];return AX(AX({},i),{},{east:o,north:s,south:c,west:u})}},{key:"getURLFromTemplate",value:function(i){for(var a=this.props.url,o=0,s=Object.entries(i);o<s.length;o++){var u=Ot(s[o],2),c=u[0],h=u[1];a=a.replace("${".concat(c,"}"),String(h)),a=a.replace("{".concat(c,"}"),String(h))}return a}}]),e}(mp);_(y1,"type","template");_(y1,"testURL",function(t){return t.toLowerCase().includes("{")});Mn();et();at();vt();var pu=en(On());et();function Swe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Ewe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Ewe(t,r){if(t){if(typeof t=="string")return yX(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return yX(t,r)}}function yX(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function _X(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function xh(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?_X(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):_X(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Cwe(t){var r=Pwe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Pwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var _1=function(t){Ke(e,t);var r=Cwe(e);function e(n){var i;ce(this,e);var a;return i=r.call(this,n),_(jt(i),"url",void 0),_(jt(i),"substituteCRS84",void 0),_(jt(i),"flipCRS",void 0),_(jt(i),"wmsParameters",void 0),_(jt(i),"vendorParameters",void 0),_(jt(i),"capabilities",null),_(jt(i),"loaders",[vf,n0,nv,sR,cR]),i.url=n.url,i.substituteCRS84=(a=n.substituteCRS84)!==null&&a!==void 0?a:!1,i.flipCRS=["EPSG:4326"],i.wmsParameters=xh({layers:void 0,query_layers:void 0,styles:void 0,version:"1.3.0",crs:"EPSG:4326",format:"image/png",info_format:"text/plain",transparent:void 0,time:void 0,elevation:void 0},n.wmsParameters),i.vendorParameters=n.vendorParameters||{},i}return ve(e,[{key:"getMetadata",value:function(){var n=zt(pu.default.mark(function a(){var o;return pu.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.getCapabilities();case 2:return o=u.sent,u.abrupt("return",this.normalizeMetadata(o));case 4:case"end":return u.stop()}},a,this)}));function i(){return n.apply(this,arguments)}return i}()},{key:"getImage",value:function(){var n=zt(pu.default.mark(function a(o){return pu.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.getMap(o);case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},a,this)}));function i(a){return n.apply(this,arguments)}return i}()},{key:"normalizeMetadata",value:function(i){return i}},{key:"getCapabilities",value:function(){var n=zt(pu.default.mark(function a(o,s){var u,c,h,p;return pu.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return u=this.getCapabilitiesURL(o,s),x.next=3,this.fetch(u);case 3:return c=x.sent,x.next=6,c.arrayBuffer();case 6:return h=x.sent,this._checkResponse(c,h),x.next=10,nv.parse(h,this.loadOptions);case 10:return p=x.sent,this.capabilities=p,x.abrupt("return",p);case 13:case"end":return x.stop()}},a,this)}));function i(a,o){return n.apply(this,arguments)}return i}()},{key:"getMap",value:function(){var n=zt(pu.default.mark(function a(o,s){var u,c,h;return pu.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return u=this.getMapURL(o,s),v.next=3,this.fetch(u);case 3:return c=v.sent,v.next=6,c.arrayBuffer();case 6:return h=v.sent,this._checkResponse(c,h),v.prev=8,v.next=11,vf.parse(h,this.loadOptions);case 11:return v.abrupt("return",v.sent);case 14:throw v.prev=14,v.t0=v.catch(8),this._parseError(h);case 17:case"end":return v.stop()}},a,this,[[8,14]])}));function i(a,o){return n.apply(this,arguments)}return i}()},{key:"getFeatureInfo",value:function(){var n=zt(pu.default.mark(function a(o,s){var u,c,h;return pu.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return u=this.getFeatureInfoURL(o,s),v.next=3,this.fetch(u);case 3:return c=v.sent,v.next=6,c.arrayBuffer();case 6:return h=v.sent,this._checkResponse(c,h),v.next=10,sR.parse(h,this.loadOptions);case 10:return v.abrupt("return",v.sent);case 11:case"end":return v.stop()}},a,this)}));function i(a,o){return n.apply(this,arguments)}return i}()},{key:"getFeatureInfoText",value:function(){var n=zt(pu.default.mark(function a(o,s){var u,c,h;return pu.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return u=this.getFeatureInfoURL(o,s),v.next=3,this.fetch(u);case 3:return c=v.sent,v.next=6,c.arrayBuffer();case 6:return h=v.sent,this._checkResponse(c,h),v.abrupt("return",new TextDecoder().decode(h));case 9:case"end":return v.stop()}},a,this)}));function i(a,o){return n.apply(this,arguments)}return i}()},{key:"describeLayer",value:function(){var n=zt(pu.default.mark(function a(o,s){var u,c,h;return pu.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return u=this.describeLayerURL(o,s),v.next=3,this.fetch(u);case 3:return c=v.sent,v.next=6,c.arrayBuffer();case 6:return h=v.sent,this._checkResponse(c,h),v.next=10,cR.parse(h,this.loadOptions);case 10:return v.abrupt("return",v.sent);case 11:case"end":return v.stop()}},a,this)}));function i(a,o){return n.apply(this,arguments)}return i}()},{key:"getLegendGraphic",value:function(){var n=zt(pu.default.mark(function a(o,s){var u,c,h;return pu.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return u=this.getLegendGraphicURL(o,s),v.next=3,this.fetch(u);case 3:return c=v.sent,v.next=6,c.arrayBuffer();case 6:return h=v.sent,this._checkResponse(c,h),v.prev=8,v.next=11,vf.parse(h,this.loadOptions);case 11:return v.abrupt("return",v.sent);case 14:throw v.prev=14,v.t0=v.catch(8),this._parseError(h);case 17:case"end":return v.stop()}},a,this,[[8,14]])}));function i(a,o){return n.apply(this,arguments)}return i}()},{key:"getCapabilitiesURL",value:function(i,a){var o=xh({version:this.wmsParameters.version},i);return this._getWMSUrl("GetCapabilities",o,a)}},{key:"getMapURL",value:function(i,a){i=this._getWMS130Parameters(i);var o=xh({version:this.wmsParameters.version,format:this.wmsParameters.format,transparent:this.wmsParameters.transparent,time:this.wmsParameters.time,elevation:this.wmsParameters.elevation,layers:this.wmsParameters.layers,styles:this.wmsParameters.styles,crs:this.wmsParameters.crs},i);return this._getWMSUrl("GetMap",o,a)}},{key:"getFeatureInfoURL",value:function(i,a){var o=xh({version:this.wmsParameters.version,info_format:this.wmsParameters.info_format,layers:this.wmsParameters.layers,query_layers:this.wmsParameters.query_layers,styles:this.wmsParameters.styles,crs:this.wmsParameters.crs},i);return this._getWMSUrl("GetFeatureInfo",o,a)}},{key:"describeLayerURL",value:function(i,a){var o=xh({version:this.wmsParameters.version},i);return this._getWMSUrl("DescribeLayer",o,a)}},{key:"getLegendGraphicURL",value:function(i,a){var o=xh({version:this.wmsParameters.version},i);return this._getWMSUrl("GetLegendGraphic",o,a)}},{key:"_parseWMSUrl",value:function(i){var a=i.split("?"),o=Ot(a,2),s=o[0],u=o[1],c=u.split("&"),h={},p=Swe(c),v;try{for(p.s();!(v=p.n()).done;){var x=v.value,E=x.split("="),R=Ot(E,2),D=R[0],H=R[1];h[D]=H}}catch(W){p.e(W)}finally{p.f()}return{url:s,parameters:h}}},{key:"_getWMSUrl",value:function(i,a,o){for(var s=this.url,u=!0,c=xh(xh(xh({service:"WMS",version:a.version,request:i},a),this.vendorParameters),o),h=["transparent","time","elevation"],p=0,v=Object.entries(c);p<v.length;p++){var x=Ot(v[p],2),E=x[0],R=x[1];(!h.includes(E)||R)&&(s+=u?"?":"&",u=!1,s+=this._getURLParameter(E,R,a))}return encodeURI(s)}},{key:"_getWMS130Parameters",value:function(i){var a=xh({},i);return a.srs&&(a.crs=a.crs||a.srs,delete a.srs),a}},{key:"_getURLParameter",value:function(i,a,o){switch(i){case"crs":o.version!=="1.3.0"?i="srs":this.substituteCRS84&&a==="EPSG:4326"&&(a="CRS:84");break;case"srs":o.version==="1.3.0"&&(i="crs");break;case"bbox":var s=this._flipBoundingBox(a,o);s&&(a=s);break;default:}return i=i.toUpperCase(),Array.isArray(a)?"".concat(i,"=").concat(a.join(",")):"".concat(i,"=").concat(a?String(a):"")}},{key:"_flipBoundingBox",value:function(i,a){if(!Array.isArray(i)||i.length!==4)return null;var o=a.version==="1.3.0"&&this.flipCRS.includes(a.crs||"")&&!(this.substituteCRS84&&a.crs==="EPSG:4326"),s=i;return o?[s[1],s[0],s[3],s[2]]:s}},{key:"_fetchArrayBuffer",value:function(){var n=zt(pu.default.mark(function a(o){var s,u;return pu.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this.fetch(o);case 2:return s=h.sent,h.next=5,s.arrayBuffer();case 5:return u=h.sent,this._checkResponse(s,u),h.abrupt("return",u);case 8:case"end":return h.stop()}},a,this)}));function i(a){return n.apply(this,arguments)}return i}()},{key:"_checkResponse",value:function(i,a){var o=i.headers["content-type"];if(!i.ok||n0.mimeTypes.includes(o)){var s=OC(this.loadOptions,{wms:{throwOnError:!0}}),u=n0.parseSync(a,s);throw new Error(u)}}},{key:"_parseError",value:function(i){var a=n0.parseSync(i,this.loadOptions);return new Error(a)}}]),e}(mp);_(_1,"type","wms");_(_1,"testURL",function(t){return t.toLowerCase().includes("wms")});Mn();et();at();vt();var vp=en(On());et();function bX(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function xX(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?bX(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):bX(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Owe(t){var r=Mwe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Mwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var CT=function(t){Ke(e,t);var r=Owe(e);function e(n){return ce(this,e),r.call(this,n)}return ve(e,[{key:"getMetadata",value:function(){var n=zt(vp.default.mark(function a(){return vp.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.metadata();case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},a,this)}));function i(){return n.apply(this,arguments)}return i}()},{key:"getImage",value:function(){var n=zt(vp.default.mark(function a(o){return vp.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:throw new Error("not implemented");case 1:case"end":return u.stop()}},a)}));function i(a){return n.apply(this,arguments)}return i}()},{key:"metadata",value:function(){var n=zt(vp.default.mark(function a(){return vp.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:throw new Error("not implemented");case 1:case"end":return s.stop()}},a)}));function i(){return n.apply(this,arguments)}return i}()},{key:"exportImage",value:function(i){throw new Error("not implemented")}},{key:"metadataURL",value:function(i){return"".concat(this.props.url,"?f=pjson")}},{key:"exportImageURL",value:function(i){var a="bbox=".concat(i.bbox[0],",").concat(i.bbox[1],",").concat(i.bbox[2],",").concat(i.bbox[3]),o="size=".concat(i.width,",").concat(i.height),s=xX(xX({},i),{},{bbox:a,size:o});return delete s.width,delete s.height,this.getUrl("exportImage",s)}},{key:"getUrl",value:function(i,a,o){for(var s="".concat(this.props.url,"/").concat(i),u=!0,c=0,h=Object.entries(a);c<h.length;c++){var p=Ot(h[c],2),v=p[0],x=p[1];s+=u?"?":"&",u=!1,Array.isArray(x)?s+="".concat(v.toUpperCase(),"=").concat(x.join(",")):s+="".concat(v.toUpperCase(),"=").concat(x?String(x):"")}return s}},{key:"checkResponse",value:function(){var n=zt(vp.default.mark(function a(o){return vp.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(o.ok){u.next=2;break}throw new Error("error");case 2:case"end":return u.stop()}},a)}));function i(a){return n.apply(this,arguments)}return i}()}]),e}(mp);_(CT,"type","arcgis-image-server");_(CT,"testURL",function(t){return t.toLowerCase().includes("ImageServer")});function Iwe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Rwe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Rwe(t,r){if(t){if(typeof t=="string")return wX(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return wX(t,r)}}function wX(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Lwe=[_1,CT,y1];function fR(t){var r=t.type,e=r===void 0?"auto":r,n=e==="auto"?kwe(t.url):e;switch(n){case"template":return new y1(t);case"wms":return new _1(t);default:throw new Error("Not a valid image source type")}}function kwe(t){var r=Iwe(Lwe),e;try{for(r.s();!(e=r.n()).done;){var n=e.value;if(n.testURL&&n.testURL(t))return n.type}}catch(i){r.e(i)}finally{r.f()}return"wms"}var TX=6378137*Math.PI;function hR(t){var r=ss(t);return r[0]=(r[0]/256-1)*TX,r[1]=(r[1]/256-1)*TX,r}function SX(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function PT(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?SX(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):SX(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Bwe(t){var r=Dwe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Dwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Fwe={id:"imagery-layer",data:"",serviceType:"auto",srs:"auto",layers:{type:"array",compare:!0,value:[]},onMetadataLoad:{type:"function",value:function(){}},onMetadataLoadError:{type:"function",value:console.error},onImageLoadStart:{type:"function",value:function(){}},onImageLoad:{type:"function",value:function(){}},onImageLoadError:{type:"function",compare:!1,value:function(r,e){return console.error(e,r)}}},OT=function(t){Ke(e,t);var r=Bwe(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"isLoaded",get:function(){var i;return((i=this.state)===null||i===void 0?void 0:i.loadCounter)===0&&Yt(me(e.prototype),"isLoaded",this)}},{key:"shouldUpdateState",value:function(){return!0}},{key:"initializeState",value:function(){this.state._nextRequestId=0,this.state.lastRequestId=-1,this.state.loadCounter=0}},{key:"updateState",value:function(i){var a=this,o=i.changeFlags,s=i.props,u=i.oldProps,c=this.context.viewport;o.dataChanged||s.serviceType!==u.serviceType?(this.state.imageSource=this._createImageSource(s),this._loadMetadata(),this.debounce(function(){return a.loadImage(c,"image source changed")},0)):Us(s.layers,u.layers,1)?o.viewportChanged&&this.debounce(function(){return a.loadImage(c,"viewport changed")}):this.debounce(function(){return a.loadImage(c,"layers changed")},0)}},{key:"finalizeState",value:function(){}},{key:"renderLayers",value:function(){var i=this.state,a=i.bounds,o=i.image,s=i.lastRequestParameters;return o&&new xA(PT(PT({},this.getSubLayerProps({id:"bitmap"})),{},{_imageCoordinateSystem:s.srs==="EPSG:4326"?yn.LNGLAT:yn.CARTESIAN,bounds:a,image:o}))}},{key:"getFeatureInfoText",value:function(){var n=zt(iv.default.mark(function a(o,s){var u,c,h,p;return iv.default.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(u=this.state.lastRequestParameters,!u){x.next=6;break}return x.next=4,(c=(h=this.state.imageSource).getFeatureInfoText)===null||c===void 0?void 0:c.call(h,PT(PT({},u),{},{query_layers:u.layers,x:o,y:s,info_format:"application/vnd.ogc.gml"}));case 4:return p=x.sent,x.abrupt("return",p);case 6:return x.abrupt("return","");case 7:case"end":return x.stop()}},a,this)}));function i(a,o){return n.apply(this,arguments)}return i}()},{key:"_createImageSource",value:function(i){if(i.data instanceof mp)return i.data;if(typeof i.data=="string")return fR({url:i.data,loadOptions:i.loadOptions,type:i.serviceType});throw new Error("invalid image source in props.data")}},{key:"_loadMetadata",value:function(){var n=zt(iv.default.mark(function a(){var o,s,u,c;return iv.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return o=this.state.imageSource,p.prev=1,this.state.loadCounter++,p.next=5,o.getMetadata();case 5:s=p.sent,this.state.imageSource===o&&((u=this.getCurrentLayer())===null||u===void 0||u.props.onMetadataLoad(s)),p.next=12;break;case 9:p.prev=9,p.t0=p.catch(1),(c=this.getCurrentLayer())===null||c===void 0||c.props.onMetadataLoadError(p.t0);case 12:return p.prev=12,this.state.loadCounter--,p.finish(12);case 15:case"end":return p.stop()}},a,this,[[1,9,12,15]])}));function i(){return n.apply(this,arguments)}return i}()},{key:"loadImage",value:function(){var n=zt(iv.default.mark(function a(o,s){var u,c,h,p,v,x,E,R,D,H,W,$,J,B,se,V,X,I,O,U;return iv.default.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(u=this.props,c=u.layers,h=u.serviceType,!(h==="wms"&&c.length===0)){ee.next=3;break}return ee.abrupt("return");case 3:return p=o.getBounds(),v=o.width,x=o.height,E=this.getRequestId(),R=this.props.srs,R==="auto"&&(R=o.resolution?"EPSG:4326":"EPSG:3857"),D={width:v,height:x,bbox:p,layers:c,srs:R},R==="EPSG:3857"&&(H=hR([p[0],p[1]]),W=Ot(H,2),$=W[0],J=W[1],B=hR([p[2],p[3]]),se=Ot(B,2),V=se[0],X=se[1],D.bbox=[$,J,V,X]),ee.prev=10,this.state.loadCounter++,this.props.onImageLoadStart(E),ee.next=15,this.state.imageSource.getImage(D);case 15:I=ee.sent,this.state.lastRequestId<E&&((O=this.getCurrentLayer())===null||O===void 0||O.props.onImageLoad(E),this.setState({image:I,bounds:p,lastRequestParameters:D,lastRequestId:E})),ee.next=23;break;case 19:ee.prev=19,ee.t0=ee.catch(10),this.raiseError(ee.t0,"Load image"),(U=this.getCurrentLayer())===null||U===void 0||U.props.onImageLoadError(E,ee.t0);case 23:return ee.prev=23,this.state.loadCounter--,ee.finish(23);case 26:case"end":return ee.stop()}},a,this,[[10,19,23,26]])}));function i(a,o){return n.apply(this,arguments)}return i}()},{key:"getRequestId",value:function(){return this.state._nextRequestId++}},{key:"debounce",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:500;clearTimeout(this.state._timeoutId),this.state._timeoutId=setTimeout(function(){return i()},a)}}]),e}(Go);_(OT,"layerName","WMSLayer");_(OT,"defaultProps",Fwe);at();et();function Nwe(t){var r=zwe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function zwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Uwe={getHeight:{type:"accessor",value:0},greatCircle:!0},MT=function(t){Ke(e,t);var r=Nwe(e);function e(){return ce(this,e),r.apply(this,arguments)}return e}(bA);_(MT,"layerName","GreatCircleLayer");_(MT,"defaultProps",Uwe);at();vt();et();at();vt();et();var jwe=["updateTriggers"];function Gwe(t){var r=Vwe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function Vwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function EX(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function pR(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?EX(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):EX(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var Hwe=pR({},_h.defaultProps),Kc=function(t){Ke(e,t);var r=Gwe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"indexToBounds",value:function(){return null}},{key:"renderLayers",value:function(){var i=this.props,a=i.elevationScale,o=i.extruded,s=i.wireframe,u=i.filled,c=i.stroked,h=i.lineWidthUnits,p=i.lineWidthScale,v=i.lineWidthMinPixels,x=i.lineWidthMaxPixels,E=i.lineJointRounded,R=i.lineMiterLimit,D=i.lineDashJustified,H=i.getElevation,W=i.getFillColor,$=i.getLineColor,J=i.getLineWidth,B=this.props,se=B.updateTriggers,V=B.material,X=B.transitions,I=this.getSubLayerClass("cell",_h),O=this.indexToBounds()||{},U=O.updateTriggers,re=qm(O,jwe);return new I({filled:u,wireframe:s,extruded:o,elevationScale:a,stroked:c,lineWidthUnits:h,lineWidthScale:p,lineWidthMinPixels:v,lineWidthMaxPixels:x,lineJointRounded:E,lineMiterLimit:R,lineDashJustified:D,material:V,transitions:X,getElevation:H,getFillColor:W,getLineColor:$,getLineWidth:J},this.getSubLayerProps({id:"cell",updateTriggers:se&&pR(pR({},U),{},{getElevation:se.getElevation,getFillColor:se.getFillColor,getLineColor:se.getLineColor,getLineWidth:se.getLineWidth})}),re)}}]),e}(Go);_(Kc,"layerName","GeoCellLayer");_(Kc,"defaultProps",Hwe);Mn();var IT=en(dR()),Wwe=3,qwe=30,Xwe=2*qwe+1,PX=180/Math.PI;function MX(t,r,e){var n=1<<r;return[(t[0]+e[0])/n,(t[1]+e[1])/n]}function OX(t){return t>=.5?1/3*(4*t*t-1):1/3*(1-4*(1-t)*(1-t))}function IX(t){return[OX(t[0]),OX(t[1])]}function RX(t,r){var e=Ot(r,2),n=e[0],i=e[1];switch(t){case 0:return[1,n,i];case 1:return[-n,1,i];case 2:return[-n,-i,1];case 3:return[-1,-i,-n];case 4:return[i,-1,-n];case 5:return[i,n,-1];default:throw new Error("Invalid face")}}function LX(t){var r=Ot(t,3),e=r[0],n=r[1],i=r[2],a=Math.atan2(i,Math.sqrt(e*e+n*n)),o=Math.atan2(n,e);return[o*PX,a*PX]}function kX(t){for(var r=IT.default.fromString(t,!0,10).toString(2);r.length<Wwe+Xwe;)r="0"+r;for(var e=r.lastIndexOf("1"),n=r.substring(0,3),i=r.substring(3,e),a=i.length/2,o=IT.default.fromString(n,!0,2).toString(10),s=IT.default.fromString(i,!0,2).toString(4);s.length<a;)s="0"+s;return"".concat(o,"/").concat(s)}function Ywe(t,r,e,n){if(n===0){e===1&&(r[0]=t-1-r[0],r[1]=t-1-r[1]);var i=r[0];r[0]=r[1],r[1]=i}}function BX(t){for(var r=t.split("/"),e=parseInt(r[0],10),n=r[1],i=n.length,a=[0,0],o,s=i-1;s>=0;s--){o=i-s;var u=n[s],c=0,h=0;u==="1"?h=1:u==="2"?(c=1,h=1):u==="3"&&(c=1);var p=Math.pow(2,o-1);Ywe(p,a,c,h),a[0]+=p*c,a[1]+=p*h}if(e%2===1){var v=a[0];a[0]=a[1],a[1]=v}return{face:e,ij:a,level:o}}var DX=en(dR());function Kwe(t){var r=t.padEnd(16,"0");return DX.default.fromString(r,16)}var Zwe=100;function $we(t){for(var r=t.face,e=t.ij,n=t.level,i=[[0,0],[0,1],[1,1],[1,0],[0,0]],a=Math.max(1,Math.ceil(Zwe*Math.pow(2,-n))),o=new Float64Array(4*a*2+2),s=0,u=0,c=0;c<4;c++)for(var h=i[c].slice(0),p=i[c+1],v=(p[0]-h[0])/a,x=(p[1]-h[1])/a,E=0;E<a;E++){h[0]+=v,h[1]+=x;var R=MX(e,n,h),D=IX(R),H=RX(r,D),W=LX(H);Math.abs(W[1])>89.999&&(W[0]=u);var $=W[0]-u;W[0]+=$>180?-360:$<-180?360:0,o[s++]=W[0],o[s++]=W[1],u=W[0]}return o[s++]=o[0],o[s++]=o[1],o}function Jwe(t){if(typeof t=="string"){if(t.indexOf("/")>0)return t;t=Kwe(t)}return kX(t.toString())}function FX(t){var r=Jwe(t),e=BX(r);return $we(e)}function Qwe(t){var r=e2e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function e2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var t2e={getS2Token:{type:"accessor",value:function(r){return r.token}}},RT=function(t){Ke(e,t);var r=Qwe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"indexToBounds",value:function(){var i=this.props,a=i.data,o=i.getS2Token;return{data:a,_normalize:!1,positionFormat:"XY",getPolygon:function(u,c){return FX(o(u,c))}}}}]),e}(Kc);_(RT,"layerName","S2Layer");_(RT,"defaultProps",t2e);at();vt();et();Mn();var mR=512;function r2e(t,r){for(var e=0,n=0,i=1<<t.length,a=i/mR,o=0;o<t.length;o++){i>>=1;var s=parseInt(t[o]);s%2&&(e|=i),s>1&&(n|=i)}return[[e/a,mR-n/a],[(e+r)/a,mR-(n+r)/a]]}function NX(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,e=r2e(t,r),n=Ot(e,2),i=n[0],a=n[1],o=Zs(i),s=Ot(o,2),u=s[0],c=s[1],h=Zs(a),p=Ot(h,2),v=p[0],x=p[1];return[v,c,v,x,u,x,u,c,v,c]}function n2e(t){var r=i2e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function i2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var a2e={getQuadkey:{type:"accessor",value:function(r){return r.quadkey}}},LT=function(t){Ke(e,t);var r=n2e(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"indexToBounds",value:function(){var i=this.props,a=i.data,o=i.extruded,s=i.getQuadkey,u=o?.99:1;return{data:a,_normalize:!1,positionFormat:"XY",getPolygon:function(h,p){return NX(s(h,p),u)},updateTriggers:{getPolygon:u}}}}]),e}(Kc);_(LT,"layerName","QuadkeyLayer");_(LT,"defaultProps",a2e);at();vt();et();Mn();at();vt();et();at();vt();et();var vR=en(On()),x1=function(){function t(r){ce(this,t),_(this,"index",void 0),_(this,"isVisible",void 0),_(this,"isSelected",void 0),_(this,"parent",void 0),_(this,"children",void 0),_(this,"content",void 0),_(this,"state",void 0),_(this,"layers",void 0),_(this,"id",void 0),_(this,"zoom",void 0),_(this,"userData",void 0),_(this,"boundingBox",void 0),_(this,"_abortController",void 0),_(this,"_loader",void 0),_(this,"_loaderId",void 0),_(this,"_isLoaded",void 0),_(this,"_isCancelled",void 0),_(this,"_needsReload",void 0),_(this,"_bbox",void 0),this.index=r,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}return ve(t,[{key:"bbox",get:function(){return this._bbox},set:function(e){this._bbox||(this._bbox=e,"west"in e?this.boundingBox=[[e.west,e.south],[e.east,e.north]]:this.boundingBox=[[e.left,e.top],[e.right,e.bottom]])}},{key:"data",get:function(){var e=this;return this.isLoading&&this._loader?this._loader.then(function(){return e.data}):this.content}},{key:"isLoaded",get:function(){return this._isLoaded&&!this._needsReload}},{key:"isLoading",get:function(){return Boolean(this._loader)&&!this._isCancelled}},{key:"needsReload",get:function(){return this._needsReload||this._isCancelled}},{key:"byteLength",get:function(){var e=this.content?this.content.byteLength:0;return Number.isFinite(e)||console.error("byteLength not defined in tile data"),e}},{key:"_loadData",value:function(){var r=zt(vR.default.mark(function n(i){var a,o,s,u,c,h,p,v,x,E,R,D,H,W;return vR.default.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return a=i.getData,o=i.requestScheduler,s=i.onLoad,u=i.onError,c=this.index,h=this.id,p=this.bbox,v=this.userData,x=this.zoom,E=this._loaderId,this._abortController=new AbortController,R=this._abortController.signal,J.next=7,o.scheduleRequest(this,function(B){return B.isSelected?1:-1});case 7:if(D=J.sent,D){J.next=11;break}return this._isCancelled=!0,J.abrupt("return");case 11:if(!this._isCancelled){J.next=14;break}return D.done(),J.abrupt("return");case 14:return H=null,J.prev=15,J.next=18,a({index:c,id:h,bbox:p,userData:v,zoom:x,signal:R});case 18:H=J.sent,J.next=24;break;case 21:J.prev=21,J.t0=J.catch(15),W=J.t0||!0;case 24:return J.prev=24,D.done(),J.finish(24);case 27:if(E===this._loaderId){J.next=29;break}return J.abrupt("return");case 29:if(this._loader=void 0,this.content=H,!(this._isCancelled&&!H)){J.next=34;break}return this._isLoaded=!1,J.abrupt("return");case 34:this._isLoaded=!0,this._isCancelled=!1,W?u(W,this):s(this);case 37:case"end":return J.stop()}},n,this,[[15,21,24,27]])}));function e(n){return r.apply(this,arguments)}return e}()},{key:"loadData",value:function(e){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(e),this._loader}},{key:"setNeedsReload",value:function(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}},{key:"abort",value:function(){var e;this.isLoaded||(this._isCancelled=!0,(e=this._abortController)===null||e===void 0||e.abort())}}]),t}();Mn();Mn();at();vt();et();var js={OUTSIDE:-1,INTERSECTING:0,INSIDE:1};at();vt();et();var zX=new _t,o2e=new _t,kT=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],n=arguments.length>2?arguments[2]:void 0;ce(this,t),_(this,"center",void 0),_(this,"halfDiagonal",void 0),_(this,"minimum",void 0),_(this,"maximum",void 0),n=n||zX.copy(r).add(e).scale(.5),this.center=new _t(n),this.halfDiagonal=new _t(e).subtract(this.center),this.minimum=new _t(r),this.maximum=new _t(e)}return ve(t,[{key:"clone",value:function(){return new t(this.minimum,this.maximum,this.center)}},{key:"equals",value:function(e){return this===e||Boolean(e)&&this.minimum.equals(e.minimum)&&this.maximum.equals(e.maximum)}},{key:"transform",value:function(e){return this.center.transformAsPoint(e),this.halfDiagonal.transform(e),this.minimum.transform(e),this.maximum.transform(e),this}},{key:"intersectPlane",value:function(e){var n=this.halfDiagonal,i=o2e.from(e.normal),a=n.x*Math.abs(i.x)+n.y*Math.abs(i.y)+n.z*Math.abs(i.z),o=this.center.dot(i)+e.distance;return o-a>0?js.INSIDE:o+a<0?js.OUTSIDE:js.INTERSECTING}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceSquaredTo(e))}},{key:"distanceSquaredTo",value:function(e){var n=zX.from(e).subtract(this.center),i=this.halfDiagonal,a=0,o;return o=Math.abs(n.x)-i.x,o>0&&(a+=o*o),o=Math.abs(n.y)-i.y,o>0&&(a+=o*o),o=Math.abs(n.z)-i.z,o>0&&(a+=o*o),a}}]),t}();at();vt();et();var w1=new _t,UX=new _t,Od=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ce(this,t),_(this,"center",void 0),_(this,"radius",void 0),this.radius=-0,this.center=new _t,this.fromCenterRadius(r,e)}return ve(t,[{key:"fromCenterRadius",value:function(e,n){return this.center.from(e),this.radius=n,this}},{key:"fromCornerPoints",value:function(e,n){return n=w1.from(n),this.center=new _t().from(e).add(n).scale(.5),this.radius=this.center.distance(n),this}},{key:"equals",value:function(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.radius===e.radius}},{key:"clone",value:function(){return new t(this.center,this.radius)}},{key:"union",value:function(e){var n=this.center,i=this.radius,a=e.center,o=e.radius,s=w1.copy(a).subtract(n),u=s.magnitude();if(i>=u+o)return this.clone();if(o>=u+i)return e.clone();var c=(i+u+o)*.5;return UX.copy(s).scale((-i+c)/u).add(n),this.center.copy(UX),this.radius=c,this}},{key:"expand",value:function(e){var n=w1.from(e),i=n.subtract(this.center).magnitude();return i>this.radius&&(this.radius=i),this}},{key:"transform",value:function(e){this.center.transform(e);var n=zU(w1,e);return this.radius=Math.max(n[0],Math.max(n[1],n[2]))*this.radius,this}},{key:"distanceSquaredTo",value:function(e){var n=this.distanceTo(e);return n*n}},{key:"distanceTo",value:function(e){var n=w1.from(e),i=n.subtract(this.center);return Math.max(0,i.len()-this.radius)}},{key:"intersectPlane",value:function(e){var n=this.center,i=this.radius,a=e.normal,o=a.dot(n)+e.distance;return o<-i?js.OUTSIDE:o<i?js.INTERSECTING:js.INSIDE}}]),t}();at();vt();et();var s2e=new _t,u2e=new _t,BT=new _t,DT=new _t,FT=new _t,l2e=new _t,c2e=new _t,gp={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8},av=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0,0,0,0,0,0,0];ce(this,t),_(this,"center",void 0),_(this,"halfAxes",void 0),this.center=new _t().from(r),this.halfAxes=new lo(e)}return ve(t,[{key:"halfSize",get:function(){var e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new _t(e).len(),new _t(n).len(),new _t(i).len()]}},{key:"quaternion",get:function(){var e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),a=new _t(e).normalize(),o=new _t(n).normalize(),s=new _t(i).normalize();return new uh().fromMatrix3(new lo([].concat(Pr(a),Pr(o),Pr(s))))}},{key:"fromCenterHalfSizeQuaternion",value:function(e,n,i){var a=new uh(i),o=new lo().fromQuaternion(a);return o[0]=o[0]*n[0],o[1]=o[1]*n[0],o[2]=o[2]*n[0],o[3]=o[3]*n[1],o[4]=o[4]*n[1],o[5]=o[5]*n[1],o[6]=o[6]*n[2],o[7]=o[7]*n[2],o[8]=o[8]*n[2],this.center=new _t().from(e),this.halfAxes=o,this}},{key:"clone",value:function(){return new t(this.center,this.halfAxes)}},{key:"equals",value:function(e){return this===e||Boolean(e)&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}},{key:"getBoundingSphere",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Od,n=this.halfAxes,i=n.getColumn(0,BT),a=n.getColumn(1,DT),o=n.getColumn(2,FT),s=s2e.copy(i).add(a).add(o);return e.center.copy(this.center),e.radius=s.magnitude(),e}},{key:"intersectPlane",value:function(e){var n=this.center,i=e.normal,a=this.halfAxes,o=i.x,s=i.y,u=i.z,c=Math.abs(o*a[gp.COLUMN0ROW0]+s*a[gp.COLUMN0ROW1]+u*a[gp.COLUMN0ROW2])+Math.abs(o*a[gp.COLUMN1ROW0]+s*a[gp.COLUMN1ROW1]+u*a[gp.COLUMN1ROW2])+Math.abs(o*a[gp.COLUMN2ROW0]+s*a[gp.COLUMN2ROW1]+u*a[gp.COLUMN2ROW2]),h=i.dot(n)+e.distance;return h<=-c?js.OUTSIDE:h>=c?js.INSIDE:js.INTERSECTING}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceSquaredTo(e))}},{key:"distanceSquaredTo",value:function(e){var n=u2e.from(e).subtract(this.center),i=this.halfAxes,a=i.getColumn(0,BT),o=i.getColumn(1,DT),s=i.getColumn(2,FT),u=a.magnitude(),c=o.magnitude(),h=s.magnitude();a.normalize(),o.normalize(),s.normalize();var p=0,v;return v=Math.abs(n.dot(a))-u,v>0&&(p+=v*v),v=Math.abs(n.dot(o))-c,v>0&&(p+=v*v),v=Math.abs(n.dot(s))-h,v>0&&(p+=v*v),p}},{key:"computePlaneDistances",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[-0,-0],a=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=this.center,u=this.halfAxes,c=u.getColumn(0,BT),h=u.getColumn(1,DT),p=u.getColumn(2,FT),v=l2e.copy(c).add(h).add(p).add(s),x=c2e.copy(v).subtract(e),E=n.dot(x);return a=Math.min(E,a),o=Math.max(E,o),v.copy(s).add(c).add(h).subtract(p),x.copy(v).subtract(e),E=n.dot(x),a=Math.min(E,a),o=Math.max(E,o),v.copy(s).add(c).subtract(h).add(p),x.copy(v).subtract(e),E=n.dot(x),a=Math.min(E,a),o=Math.max(E,o),v.copy(s).add(c).subtract(h).subtract(p),x.copy(v).subtract(e),E=n.dot(x),a=Math.min(E,a),o=Math.max(E,o),s.copy(v).subtract(c).add(h).add(p),x.copy(v).subtract(e),E=n.dot(x),a=Math.min(E,a),o=Math.max(E,o),s.copy(v).subtract(c).add(h).subtract(p),x.copy(v).subtract(e),E=n.dot(x),a=Math.min(E,a),o=Math.max(E,o),s.copy(v).subtract(c).subtract(h).add(p),x.copy(v).subtract(e),E=n.dot(x),a=Math.min(E,a),o=Math.max(E,o),s.copy(v).subtract(c).subtract(h).subtract(p),x.copy(v).subtract(e),E=n.dot(x),a=Math.min(E,a),o=Math.max(E,o),i[0]=a,i[1]=o,i}},{key:"transform",value:function(e){this.center.transformAsPoint(e);var n=this.halfAxes.getColumn(0,BT);n.transformAsPoint(e);var i=this.halfAxes.getColumn(1,DT);i.transformAsPoint(e);var a=this.halfAxes.getColumn(2,FT);return a.transformAsPoint(e),this.halfAxes=new lo([].concat(Pr(n),Pr(i),Pr(a))),this}},{key:"getTransform",value:function(){throw new Error("not implemented")}}]),t}();at();vt();et();at();vt();et();var jX=new _t,GX=new _t,Gs=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,1],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ce(this,t),_(this,"normal",void 0),_(this,"distance",void 0),this.normal=new _t,this.distance=-0,this.fromNormalDistance(r,e)}return ve(t,[{key:"fromNormalDistance",value:function(e,n){return Ca(Number.isFinite(n)),this.normal.from(e).normalize(),this.distance=n,this}},{key:"fromPointNormal",value:function(e,n){e=jX.from(e),this.normal.from(n).normalize();var i=-this.normal.dot(e);return this.distance=i,this}},{key:"fromCoefficients",value:function(e,n,i,a){return this.normal.set(e,n,i),Ca(Ao(this.normal.len(),1)),this.distance=a,this}},{key:"clone",value:function(){return new t(this.normal,this.distance)}},{key:"equals",value:function(e){return Ao(this.distance,e.distance)&&Ao(this.normal,e.normal)}},{key:"getPointDistance",value:function(e){return this.normal.dot(e)+this.distance}},{key:"transform",value:function(e){var n=GX.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,n)}},{key:"projectPointOntoPlane",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];e=jX.from(e);var i=this.getPointDistance(e),a=GX.copy(this.normal).scale(i);return e.subtract(a).to(n)}}]),t}();function VX(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=f2e(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function f2e(t,r){if(t){if(typeof t=="string")return HX(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return HX(t,r)}}function HX(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var WX=[new _t([1,0,0]),new _t([0,1,0]),new _t([0,0,1])],qX=new _t,h2e=new _t,tOt=new Gs(new _t(1,0,0),0),Yl=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];ce(this,t),_(this,"planes",void 0),this.planes=r}return ve(t,[{key:"fromBoundingSphere",value:function(e){this.planes.length=2*WX.length;var n=e.center,i=e.radius,a=0,o=VX(WX),s;try{for(o.s();!(s=o.n()).done;){var u=s.value,c=this.planes[a],h=this.planes[a+1];c||(c=this.planes[a]=new Gs),h||(h=this.planes[a+1]=new Gs);var p=qX.copy(u).scale(-i).add(n),v=-u.dot(p);c.fromPointNormal(p,u);var x=qX.copy(u).scale(i).add(n),E=h2e.copy(u).negate(),R=-E.dot(x);h.fromPointNormal(x,E),a+=2}}catch(D){o.e(D)}finally{o.f()}return this}},{key:"computeVisibility",value:function(e){var n=js.INSIDE,i=VX(this.planes),a;try{for(i.s();!(a=i.n()).done;){var o=a.value,s=e.intersectPlane(o);switch(s){case js.OUTSIDE:return js.OUTSIDE;case js.INTERSECTING:n=js.INTERSECTING;break;default:}}}catch(u){i.e(u)}finally{i.f()}return n}},{key:"computeVisibilityWithPlaneMask",value:function(e,n){if(Ca(Number.isFinite(n),"parentPlaneMask is required."),n===t.MASK_OUTSIDE||n===t.MASK_INSIDE)return n;for(var i=t.MASK_INSIDE,a=this.planes,o=0;o<this.planes.length;++o){var s=o<31?1<<o:0;if(!(o<31&&!(n&s))){var u=a[o],c=e.intersectPlane(u);if(c===js.OUTSIDE)return t.MASK_OUTSIDE;c===js.INTERSECTING&&(i|=s)}}return i}}]),t}();_(Yl,"MASK_OUTSIDE",4294967295);_(Yl,"MASK_INSIDE",0);_(Yl,"MASK_INDETERMINATE",2147483647);at();vt();et();var p2e=new _t,d2e=new _t,m2e=new _t,v2e=new _t,g2e=new _t,gR=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ce(this,t),_(this,"left",void 0),_(this,"_left",void 0),_(this,"right",void 0),_(this,"_right",void 0),_(this,"top",void 0),_(this,"_top",void 0),_(this,"bottom",void 0),_(this,"_bottom",void 0),_(this,"near",void 0),_(this,"_near",void 0),_(this,"far",void 0),_(this,"_far",void 0),_(this,"_cullingVolume",new Yl([new Gs,new Gs,new Gs,new Gs,new Gs,new Gs])),_(this,"_perspectiveMatrix",new gn),_(this,"_infinitePerspective",new gn);var e=r.near,n=e===void 0?1:e,i=r.far,a=i===void 0?5e8:i;this.left=r.left,this._left=void 0,this.right=r.right,this._right=void 0,this.top=r.top,this._top=void 0,this.bottom=r.bottom,this._bottom=void 0,this.near=n,this._near=n,this.far=a,this._far=a}return ve(t,[{key:"clone",value:function(){return new t({right:this.right,left:this.left,top:this.top,bottom:this.bottom,near:this.near,far:this.far})}},{key:"equals",value:function(e){return e&&e instanceof t&&this.right===e.right&&this.left===e.left&&this.top===e.top&&this.bottom===e.bottom&&this.near===e.near&&this.far===e.far}},{key:"projectionMatrix",get:function(){return this._update(),this._perspectiveMatrix}},{key:"infiniteProjectionMatrix",get:function(){return this._update(),this._infinitePerspective}},{key:"computeCullingVolume",value:function(e,n,i){Ca(e,"position is required."),Ca(n,"direction is required."),Ca(i,"up is required.");var a=this._cullingVolume.planes;i=p2e.copy(i).normalize();var o=d2e.copy(n).cross(i).normalize(),s=m2e.copy(n).multiplyByScalar(this.near).add(e),u=v2e.copy(n).multiplyByScalar(this.far).add(e),c=g2e;return c.copy(o).multiplyByScalar(this.left).add(s).subtract(e).cross(i),a[0].fromPointNormal(e,c),c.copy(o).multiplyByScalar(this.right).add(s).subtract(e).cross(i).negate(),a[1].fromPointNormal(e,c),c.copy(i).multiplyByScalar(this.bottom).add(s).subtract(e).cross(o).negate(),a[2].fromPointNormal(e,c),c.copy(i).multiplyByScalar(this.top).add(s).subtract(e).cross(o),a[3].fromPointNormal(e,c),c=new _t().copy(n),a[4].fromPointNormal(s,c),c.negate(),a[5].fromPointNormal(u,c),this._cullingVolume}},{key:"getPixelDimensions",value:function(e,n,i,a){this._update(),Ca(Number.isFinite(e)&&Number.isFinite(n)),Ca(e>0),Ca(n>0),Ca(i>0),Ca(a);var o=1/this.near,s=this.top*o,u=2*i*s/n;s=this.right*o;var c=2*i*s/e;return a.x=c,a.y=u,a}},{key:"_update",value:function(){Ca(Number.isFinite(this.right)&&Number.isFinite(this.left)&&Number.isFinite(this.top)&&Number.isFinite(this.bottom)&&Number.isFinite(this.near)&&Number.isFinite(this.far));var e=this.top,n=this.bottom,i=this.right,a=this.left,o=this.near,s=this.far;(e!==this._top||n!==this._bottom||a!==this._left||i!==this._right||o!==this._near||s!==this._far)&&(Ca(this.near>0&&this.near<this.far,"near must be greater than zero and less than far."),this._left=a,this._right=i,this._top=e,this._bottom=n,this._near=o,this._far=s,this._perspectiveMatrix=new gn().frustum({left:a,right:i,bottom:n,top:e,near:o,far:s}),this._infinitePerspective=new gn().frustum({left:a,right:i,bottom:n,top:e,near:o,far:1/0}))}}]),t}();at();vt();et();var A2e=function(r){return r!==null&&typeof r<"u"},y2e=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ce(this,t),_(this,"_offCenterFrustum",new gR),_(this,"fov",void 0),_(this,"_fov",void 0),_(this,"_fovy",void 0),_(this,"_sseDenominator",void 0),_(this,"aspectRatio",void 0),_(this,"_aspectRatio",void 0),_(this,"near",void 0),_(this,"_near",void 0),_(this,"far",void 0),_(this,"_far",void 0),_(this,"xOffset",void 0),_(this,"_xOffset",void 0),_(this,"yOffset",void 0),_(this,"_yOffset",void 0);var e=r.fov,n=r.aspectRatio,i=r.near,a=i===void 0?1:i,o=r.far,s=o===void 0?5e8:o,u=r.xOffset,c=u===void 0?0:u,h=r.yOffset,p=h===void 0?0:h;this.fov=e,this.aspectRatio=n,this.near=a,this.far=s,this.xOffset=c,this.yOffset=p}return ve(t,[{key:"clone",value:function(){return new t({aspectRatio:this.aspectRatio,fov:this.fov,near:this.near,far:this.far})}},{key:"equals",value:function(e){return!A2e(e)||!(e instanceof t)?!1:(this._update(),e._update(),this.fov===e.fov&&this.aspectRatio===e.aspectRatio&&this.near===e.near&&this.far===e.far&&this._offCenterFrustum.equals(e._offCenterFrustum))}},{key:"projectionMatrix",get:function(){return this._update(),this._offCenterFrustum.projectionMatrix}},{key:"infiniteProjectionMatrix",get:function(){return this._update(),this._offCenterFrustum.infiniteProjectionMatrix}},{key:"fovy",get:function(){return this._update(),this._fovy}},{key:"sseDenominator",get:function(){return this._update(),this._sseDenominator}},{key:"computeCullingVolume",value:function(e,n,i){return this._update(),this._offCenterFrustum.computeCullingVolume(e,n,i)}},{key:"getPixelDimensions",value:function(e,n,i,a){return this._update(),this._offCenterFrustum.getPixelDimensions(e,n,i,a||new yf)}},{key:"_update",value:function(){Ca(Number.isFinite(this.fov)&&Number.isFinite(this.aspectRatio)&&Number.isFinite(this.near)&&Number.isFinite(this.far));var e=this._offCenterFrustum;(this.fov!==this._fov||this.aspectRatio!==this._aspectRatio||this.near!==this._near||this.far!==this._far||this.xOffset!==this._xOffset||this.yOffset!==this._yOffset)&&(Ca(this.fov>=0&&this.fov<Math.PI),Ca(this.aspectRatio>0),Ca(this.near>=0&&this.near<this.far),this._aspectRatio=this.aspectRatio,this._fov=this.fov,this._fovy=this.aspectRatio<=1?this.fov:Math.atan(Math.tan(this.fov*.5)/this.aspectRatio)*2,this._near=this.near,this._far=this.far,this._sseDenominator=2*Math.tan(.5*this._fovy),this._xOffset=this.xOffset,this._yOffset=this.yOffset,e.top=this.near*Math.tan(.5*this._fovy),e.bottom=-e.top,e.right=this.aspectRatio*e.top,e.left=-e.right,e.near=this.near,e.far=this.far,e.right+=this.xOffset,e.left+=this.xOffset,e.top+=this.yOffset,e.bottom+=this.yOffset)}}]),t}();var AOt=new _t,yOt=new _t,_Ot=new _t,bOt=new _t,xOt=new _t,wOt=new _t,TOt=new _t,SOt=new _t,EOt=new _t,COt=new _t,POt=new _t,OOt=new _t,MOt=4/3*Math.PI;var wh=new lo,_2e=new lo,b2e=new lo,NT=new lo,XX=new lo;function zT(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=lh.EPSILON20,n=10,i=0,a=0,o=_2e,s=b2e;o.identity(),s.copy(t);for(var u=e*x2e(s);a<n&&w2e(s)>u;)T2e(s,NT),XX.copy(NT).transpose(),s.multiplyRight(NT),s.multiplyLeft(XX),o.multiplyRight(NT),++i>2&&(++a,i=0);return r.unitary=o.toTarget(r.unitary),r.diagonal=s.toTarget(r.diagonal),r}function x2e(t){for(var r=0,e=0;e<9;++e){var n=t[e];r+=n*n}return Math.sqrt(r)}var AR=[1,0,0],yR=[2,2,1];function w2e(t){for(var r=0,e=0;e<3;++e){var n=t[wh.getElementIndex(yR[e],AR[e])];r+=2*n*n}return Math.sqrt(r)}function T2e(t,r){for(var e=lh.EPSILON15,n=0,i=1,a=0;a<3;++a){var o=Math.abs(t[wh.getElementIndex(yR[a],AR[a])]);o>n&&(i=a,n=o)}var s=AR[i],u=yR[i],c=1,h=0;if(Math.abs(t[wh.getElementIndex(u,s)])>e){var p=t[wh.getElementIndex(u,u)],v=t[wh.getElementIndex(s,s)],x=t[wh.getElementIndex(u,s)],E=(p-v)/2/x,R;E<0?R=-1/(-E+Math.sqrt(1+E*E)):R=1/(E+Math.sqrt(1+E*E)),c=1/Math.sqrt(1+R*R),h=R*c}return lo.IDENTITY.to(r),r[wh.getElementIndex(s,s)]=r[wh.getElementIndex(u,u)]=c,r[wh.getElementIndex(u,s)]=h,r[wh.getElementIndex(s,u)]=-h,r}function _R(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=S2e(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function S2e(t,r){if(t){if(typeof t=="string")return YX(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return YX(t,r)}}function YX(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Md=new _t,E2e=new _t,C2e=new _t,P2e=new _t,O2e=new _t,M2e=new lo,I2e={diagonal:new lo,unitary:new lo};function T1(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new av;if(!t||t.length===0)return r.halfAxes=new lo([0,0,0,0,0,0,0,0,0]),r.center=new _t,r;var e=t.length,n=new _t(0,0,0),i=_R(t),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;n.add(o)}}catch(Pt){i.e(Pt)}finally{i.f()}var s=1/e;n.multiplyByScalar(s);var u=0,c=0,h=0,p=0,v=0,x=0,E=_R(t),R;try{for(E.s();!(R=E.n()).done;){var D=R.value,H=Md.copy(D).subtract(n);u+=H.x*H.x,c+=H.x*H.y,h+=H.x*H.z,p+=H.y*H.y,v+=H.y*H.z,x+=H.z*H.z}}catch(Pt){E.e(Pt)}finally{E.f()}u*=s,c*=s,h*=s,p*=s,v*=s,x*=s;var W=M2e;W[0]=u,W[1]=c,W[2]=h,W[3]=c,W[4]=p,W[5]=v,W[6]=h,W[7]=v,W[8]=x;var $=zT(W,I2e),J=$.unitary,B=r.halfAxes.copy(J),se=B.getColumn(0,C2e),V=B.getColumn(1,P2e),X=B.getColumn(2,O2e),I=-Number.MAX_VALUE,O=-Number.MAX_VALUE,U=-Number.MAX_VALUE,re=Number.MAX_VALUE,ee=Number.MAX_VALUE,pe=Number.MAX_VALUE,je=_R(t),qe;try{for(je.s();!(qe=je.n()).done;){var We=qe.value;Md.copy(We),I=Math.max(Md.dot(se),I),O=Math.max(Md.dot(V),O),U=Math.max(Md.dot(X),U),re=Math.min(Md.dot(se),re),ee=Math.min(Md.dot(V),ee),pe=Math.min(Md.dot(X),pe)}}catch(Pt){je.e(Pt)}finally{je.f()}se=se.multiplyByScalar(.5*(re+I)),V=V.multiplyByScalar(.5*(ee+O)),X=X.multiplyByScalar(.5*(pe+U)),r.center.copy(se).add(V).add(X);var ot=E2e.set(I-re,O-ee,U-pe).multiplyByScalar(.5),gt=new lo([ot[0],0,0,0,ot[1],0,0,0,ot[2]]);return r.halfAxes.multiplyRight(gt),r}function bR(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=R2e(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function R2e(t,r){if(t){if(typeof t=="string")return KX(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return KX(t,r)}}function KX(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var i0=512,ZX=3,$X=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],JX=$X.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),L2e=JX.concat([[.25,.5],[.75,.5]]),k2e=function(){function t(r,e,n){ce(this,t),_(this,"x",void 0),_(this,"y",void 0),_(this,"z",void 0),_(this,"childVisible",void 0),_(this,"selected",void 0),_(this,"_children",void 0),this.x=r,this.y=e,this.z=n}return ve(t,[{key:"children",get:function(){if(!this._children){var e=this.x*2,n=this.y*2,i=this.z+1;this._children=[new t(e,n,i),new t(e,n+1,i),new t(e+1,n,i),new t(e+1,n+1,i)]}return this._children}},{key:"update",value:function(e){var n=e.viewport,i=e.cullingVolume,a=e.elevationBounds,o=e.minZ,s=e.maxZ,u=e.bounds,c=e.offset,h=e.project,p=this.getBoundingVolume(a,c,h);if(u&&!this.insideBounds(u))return!1;var v=i.computeVisibility(p);if(v<0)return!1;if(!this.childVisible){var x=this.z;if(x<s&&x>=o){var E=p.distanceTo(n.cameraPosition)*n.scale/n.height;x+=Math.floor(Math.log2(E))}if(x>=s)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;var R=bR(this.children),D;try{for(R.s();!(D=R.n()).done;){var H=D.value;H.update(e)}}catch(W){R.e(W)}finally{R.f()}return!0}},{key:"getSelected",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(this.selected&&e.push(this),this._children){var n=bR(this._children),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;a.getSelected(e)}}catch(o){n.e(o)}finally{n.f()}}return e}},{key:"insideBounds",value:function(e){var n=Ot(e,4),i=n[0],a=n[1],o=n[2],s=n[3],u=Math.pow(2,this.z),c=i0/u;return this.x*c<o&&this.y*c<s&&(this.x+1)*c>i&&(this.y+1)*c>a}},{key:"getBoundingVolume",value:function(e,n,i){if(i){var a=this.z<1?L2e:this.z<2?JX:$X,o=[],s=bR(a),u;try{for(s.s();!(u=s.n()).done;){var c=u.value,h=UT(this.x+c[0],this.y+c[1],this.z);h[2]=e[0],o.push(i(h)),e[0]!==e[1]&&(h[2]=e[1],o.push(i(h)))}}catch(R){s.e(R)}finally{s.f()}return T1(o)}var p=Math.pow(2,this.z),v=i0/p,x=this.x*v+n*i0,E=i0-(this.y+1)*v;return new kT([x,E,e[0]],[x+v,E+v,e[1]])}}]),t}();function QX(t,r,e,n){var i=t instanceof AA&&t.resolution?t.projectPosition:null,a=Object.values(t.getFrustumPlanes()).map(function(B){var se=B.normal,V=B.distance;return new Gs(se.clone().negate(),V)}),o=new Yl(a),s=t.distanceScales.unitsPerMeter[2],u=e&&e[0]*s||0,c=e&&e[1]*s||0,h=t instanceof Vc&&t.pitch<=60?r:0;if(n){var p=n,v=Ot(p,4),x=v[0],E=v[1],R=v[2],D=v[3],H=ss([x,D]),W=ss([R,E]);n=[H[0],i0-H[1],W[0],i0-W[1]]}var $=new k2e(0,0,0),J={viewport:t,project:i,cullingVolume:o,elevationBounds:[u,c],minZ:h,maxZ:r,bounds:n,offset:0};if($.update(J),t instanceof Vc&&t.subViewports&&t.subViewports.length>1){for(J.offset=-1;$.update(J)&&!(--J.offset<-ZX););for(J.offset=1;$.update(J)&&!(++J.offset>ZX););}return $.getSelected()}var Ap=512,B2e=[-1/0,-1/0,1/0,1/0],Id={type:"object",value:null,validate:function(r,e){return e.optional&&r===null||typeof r=="string"||Array.isArray(r)&&r.every(function(n){return typeof n=="string"})},equal:function(r,e){if(r===e)return!0;if(!Array.isArray(r)||!Array.isArray(e))return!1;var n=r.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(r[i]!==e[i])return!1;return!0}};function tY(t,r){var e=[r.transformAsPoint([t[0],t[1]]),r.transformAsPoint([t[2],t[1]]),r.transformAsPoint([t[0],t[3]]),r.transformAsPoint([t[2],t[3]])],n=[Math.min.apply(Math,Pr(e.map(function(i){return i[0]}))),Math.min.apply(Math,Pr(e.map(function(i){return i[1]}))),Math.max.apply(Math,Pr(e.map(function(i){return i[0]}))),Math.max.apply(Math,Pr(e.map(function(i){return i[1]})))];return n}function D2e(t){return Math.abs(t.split("").reduce(function(r,e){return(r<<5)-r+e.charCodeAt(0)|0},0))}function Th(t,r){if(!t||!t.length)return null;var e=r.index,n=r.id;if(Array.isArray(t)){var i=D2e(n)%t.length;t=t[i]}for(var a=t,o=0,s=Object.keys(e);o<s.length;o++){var u=s[o],c=new RegExp("{".concat(u,"}"),"g");a=a.replace(c,String(e[u]))}return Number.isInteger(e.y)&&Number.isInteger(e.z)&&(a=a.replace(/\{-y\}/g,String(Math.pow(2,e.z)-e.y-1))),a}function F2e(t,r,e){var n;if(r&&r.length===2){var i=Ot(r,2),a=i[0],o=i[1],s=t.getBounds({z:a}),u=t.getBounds({z:o});n=[Math.min(s[0],u[0]),Math.min(s[1],u[1]),Math.max(s[2],u[2]),Math.max(s[3],u[3])]}else n=t.getBounds();return t.isGeospatial?[Math.max(n[0],e[0]),Math.max(n[1],e[1]),Math.min(n[2],e[2]),Math.min(n[3],e[3])]:[Math.max(Math.min(n[0],e[2]),e[0]),Math.max(Math.min(n[1],e[3]),e[1]),Math.min(Math.max(n[2],e[0]),e[2]),Math.min(Math.max(n[3],e[1]),e[3])]}function rY(t){var r=t.viewport,e=t.z,n=e===void 0?0:e,i=t.cullRect,a=r.subViewports||[r];return a.map(function(o){return xR(o,n||0,i)})}function xR(t,r,e){if(!Array.isArray(r)){var n=e.x-t.x,i=e.y-t.y,a=e.width,o=e.height,s={targetZ:r},u=t.unproject([n,i],s),c=t.unproject([n+a,i],s),h=t.unproject([n,i+o],s),p=t.unproject([n+a,i+o],s);return[Math.min(u[0],c[0],h[0],p[0]),Math.min(u[1],c[1],h[1],p[1]),Math.max(u[0],c[0],h[0],p[0]),Math.max(u[1],c[1],h[1],p[1])]}var v=xR(t,r[0],e),x=xR(t,r[1],e);return[Math.min(v[0],x[0]),Math.min(v[1],x[1]),Math.max(v[2],x[2]),Math.max(v[3],x[3])]}function N2e(t,r,e){if(e){var n=tY(t,e).map(function(i){return i*r/Ap});return n}return t.map(function(i){return i*r/Ap})}function wR(t,r){return Math.pow(2,t)*Ap/r}function UT(t,r,e){var n=wR(e,Ap),i=t/n*360-180,a=Math.PI-2*Math.PI*r/n,o=180/Math.PI*Math.atan(.5*(Math.exp(a)-Math.exp(-a)));return[i,o]}function eY(t,r,e,n){var i=wR(e,n);return[t/i*Ap,r/i*Ap]}function TR(t,r,e,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:Ap;if(t.isGeospatial){var a=UT(r,e,n),o=Ot(a,2),s=o[0],u=o[1],c=UT(r+1,e+1,n),h=Ot(c,2),p=h[0],v=h[1];return{west:s,north:u,east:p,south:v}}var x=eY(r,e,n,i),E=Ot(x,2),R=E[0],D=E[1],H=eY(r+1,e+1,n,i),W=Ot(H,2),$=W[0],J=W[1];return{left:R,top:D,right:$,bottom:J}}function z2e(t,r,e,n,i){for(var a=F2e(t,null,n),o=wR(r,e),s=N2e(a,o,i),u=Ot(s,4),c=u[0],h=u[1],p=u[2],v=u[3],x=[],E=Math.floor(c);E<p;E++)for(var R=Math.floor(h);R<v;R++)x.push({x:E,y:R,z:r});return x}function SR(t){var r=t.viewport,e=t.maxZoom,n=t.minZoom,i=t.zRange,a=t.extent,o=t.tileSize,s=o===void 0?Ap:o,u=t.modelMatrix,c=t.modelMatrixInverse,h=t.zoomOffset,p=h===void 0?0:h,v=r.isGeospatial?Math.round(r.zoom+Math.log2(Ap/s))+p:Math.ceil(r.zoom)+p;if(typeof n=="number"&&Number.isFinite(n)&&v<n){if(!a)return[];v=n}typeof e=="number"&&Number.isFinite(e)&&v>e&&(v=e);var x=a;return u&&c&&a&&!r.isGeospatial&&(x=tY(a,u)),r.isGeospatial?QX(r,v,i,a):z2e(r,v,s,x||B2e,c)}function ER(t){return/(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(t)}function CR(t){return Number.isFinite(t.west)&&Number.isFinite(t.north)&&Number.isFinite(t.east)&&Number.isFinite(t.south)}function nY(t){var r={},e;return function(n){for(var i in n)if(!U2e(n[i],r[i])){e=t(n),r=n;break}return e}}function U2e(t,r){if(t===r)return!0;if(Array.isArray(t)){var e=t.length;if(!r||r.length!==e)return!1;for(var n=0;n<e;n++)if(t[n]!==r[n])return!1;return!0}return!1}var S1;function Ru(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=j2e(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function j2e(t,r){if(t){if(typeof t=="string")return iY(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return iY(t,r)}}function iY(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function aY(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function oY(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?aY(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):aY(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var sY=1,jT=2,G2e="never",V2e="no-overlap",E1="best-available",H2e=5,W2e=(S1={},_(S1,E1,X2e),_(S1,V2e,Y2e),_(S1,G2e,function(){}),S1),q2e={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:6,zoomOffset:0,onTileLoad:function(){},onTileUnload:function(){},onTileError:function(){}},C1=function(){function t(r){var e=this;ce(this,t),_(this,"opts",void 0),_(this,"_requestScheduler",void 0),_(this,"_cache",void 0),_(this,"_dirty",void 0),_(this,"_tiles",void 0),_(this,"_cacheByteSize",void 0),_(this,"_viewport",void 0),_(this,"_zRange",void 0),_(this,"_selectedTiles",void 0),_(this,"_frameNumber",void 0),_(this,"_modelMatrix",void 0),_(this,"_modelMatrixInverse",void 0),_(this,"_maxZoom",void 0),_(this,"_minZoom",void 0),_(this,"onTileLoad",void 0),_(this,"_getCullBounds",nY(rY)),this.opts=oY(oY({},q2e),r),this.onTileLoad=function(n){var i,a;(i=(a=e.opts).onTileLoad)===null||i===void 0||i.call(a,n),e.opts.maxCacheByteSize&&(e._cacheByteSize+=n.byteLength,e._resizeCache())},this._requestScheduler=new Hy({maxRequests:r.maxRequests,throttleRequests:Boolean(r.maxRequests&&r.maxRequests>0)}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._zRange=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new gn,this._modelMatrixInverse=new gn,this.setOptions(r)}return ve(t,[{key:"tiles",get:function(){return this._tiles}},{key:"selectedTiles",get:function(){return this._selectedTiles}},{key:"isLoaded",get:function(){return this._selectedTiles!==null&&this._selectedTiles.every(function(e){return e.isLoaded})}},{key:"needsReload",get:function(){return this._selectedTiles!==null&&this._selectedTiles.some(function(e){return e.needsReload})}},{key:"setOptions",value:function(e){Object.assign(this.opts,e),Number.isFinite(e.maxZoom)&&(this._maxZoom=Math.floor(e.maxZoom)),Number.isFinite(e.minZoom)&&(this._minZoom=Math.ceil(e.minZoom))}},{key:"finalize",value:function(){var e=Ru(this._cache.values()),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;i.isLoading&&i.abort()}}catch(a){e.e(a)}finally{e.f()}this._cache.clear(),this._tiles=[],this._selectedTiles=null}},{key:"reloadAll",value:function(){var e=Ru(this._cache.keys()),n;try{for(e.s();!(n=e.n()).done;){var i=n.value,a=this._cache.get(i);!this._selectedTiles||!this._selectedTiles.includes(a)?this._cache.delete(i):a.setNeedsReload()}}catch(o){e.e(o)}finally{e.f()}}},{key:"update",value:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{zRange:null,modelMatrix:null},a=i.zRange,o=i.modelMatrix,s=o?new gn(o):new gn,u=!s.equals(this._modelMatrix);if(!this._viewport||!e.equals(this._viewport)||!Ao(this._zRange,a)||u){u&&(this._modelMatrixInverse=s.clone().invert(),this._modelMatrix=s),this._viewport=e,this._zRange=a;var c=this.getTileIndices({viewport:e,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:a,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=c.map(function(p){return n._getTile(p,!0)}),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(function(p){return n._getTile(p.index,!0)}));var h=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),h&&this._frameNumber++,this._frameNumber}},{key:"isTileVisible",value:function(e,n){if(!e.isVisible)return!1;if(n&&this._viewport){var i=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:n}),a=e.bbox,o=Ru(i),s;try{for(o.s();!(s=o.n()).done;){var u=Ot(s.value,4),c=u[0],h=u[1],p=u[2],v=u[3],x=void 0;if("west"in a)x=a.west<p&&a.east>c&&a.south<v&&a.north>h;else{var E=Math.min(a.top,a.bottom),R=Math.max(a.top,a.bottom);x=a.left<p&&a.right>c&&E<v&&R>h}if(x)return!0}}catch(D){o.e(D)}finally{o.f()}return!1}return!0}},{key:"getTileIndices",value:function(e){var n=e.viewport,i=e.maxZoom,a=e.minZoom,o=e.zRange,s=e.modelMatrix,u=e.modelMatrixInverse,c=this.opts,h=c.tileSize,p=c.extent,v=c.zoomOffset;return SR({viewport:n,maxZoom:i,minZoom:a,zRange:o,tileSize:h,extent:p,modelMatrix:s,modelMatrixInverse:u,zoomOffset:v})}},{key:"getTileId",value:function(e){return"".concat(e.x,"-").concat(e.y,"-").concat(e.z)}},{key:"getTileZoom",value:function(e){return e.z}},{key:"getTileMetadata",value:function(e){var n=this.opts.tileSize;return{bbox:TR(this._viewport,e.x,e.y,e.z,n)}}},{key:"getParentIndex",value:function(e){var n=Math.floor(e.x/2),i=Math.floor(e.y/2),a=e.z-1;return{x:n,y:i,z:a}}},{key:"updateTileStates",value:function(){var e=this.opts.refinementStrategy||E1,n=new Array(this._cache.size),i=0,a=Ru(this._cache.values()),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;n[i++]=s.isVisible,s.isSelected=!1,s.isVisible=!1}}catch(E){a.e(E)}finally{a.f()}var u=Ru(this._selectedTiles),c;try{for(u.s();!(c=u.n()).done;){var h=c.value;h.isSelected=!0,h.isVisible=!0}}catch(E){u.e(E)}finally{u.f()}(typeof e=="function"?e:W2e[e])(Array.from(this._cache.values())),i=0;var p=Ru(this._cache.values()),v;try{for(p.s();!(v=p.n()).done;){var x=v.value;if(n[i++]!==x.isVisible)return!0}}catch(E){p.e(E)}finally{p.f()}return!1}},{key:"_pruneRequests",value:function(){var e=this.opts.maxRequests,n=e===void 0?0:e,i=[],a=0,o=Ru(this._cache.values()),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;u.isLoading&&(a++,!u.isSelected&&!u.isVisible&&i.push(u))}}catch(h){o.e(h)}finally{o.f()}for(;n>0&&a>n&&i.length>0;){var c=i.shift();c.abort(),a--}}},{key:"_rebuildTree",value:function(){var e=this._cache,n=Ru(e.values()),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;a.parent=null,a.children&&(a.children.length=0)}}catch(h){n.e(h)}finally{n.f()}var o=Ru(e.values()),s;try{for(o.s();!(s=o.n()).done;){var u=s.value,c=this._getNearestAncestor(u);u.parent=c,c!=null&&c.children&&c.children.push(u)}}catch(h){o.e(h)}finally{o.f()}}},{key:"_resizeCache",value:function(){var e=this._cache,n=this.opts,i=n.maxCacheSize||(n.maxCacheByteSize?1/0:H2e*this.selectedTiles.length),a=n.maxCacheByteSize||1/0,o=e.size>i||this._cacheByteSize>a;if(o){var s=Ru(e),u;try{for(s.s();!(u=s.n()).done;){var c=Ot(u.value,2),h=c[0],p=c[1];if(!p.isVisible&&!p.isSelected){var v,x;this._cacheByteSize-=n.maxCacheByteSize?p.byteLength:0,e.delete(h),(v=(x=this.opts).onTileUnload)===null||v===void 0||v.call(x,p)}if(e.size<=i&&this._cacheByteSize<=a)break}}catch(E){s.e(E)}finally{s.f()}this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort(function(E,R){return E.zoom-R.zoom}),this._dirty=!1)}},{key:"_getTile",value:function(e,n){var i=this.getTileId(e),a=this._cache.get(i),o=!1;return!a&&n?(a=new x1(e),Object.assign(a,this.getTileMetadata(a.index)),Object.assign(a,{id:i,zoom:this.getTileZoom(a.index)}),o=!0,this._cache.set(i,a),this._dirty=!0):a&&a.needsReload&&(o=!0),a&&o&&a.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),a}},{key:"_getNearestAncestor",value:function(e){for(var n=this._minZoom,i=n===void 0?0:n,a=e.index;this.getTileZoom(a)>i;){a=this.getParentIndex(a);var o=this._getTile(a);if(o)return o}return null}}]),t}();function X2e(t){var r=Ru(t),e;try{for(r.s();!(e=r.n()).done;){var n=e.value;n.state=0}}catch(h){r.e(h)}finally{r.f()}var i=Ru(t),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;o.isSelected&&!uY(o)&&PR(o)}}catch(h){i.e(h)}finally{i.f()}var s=Ru(t),u;try{for(s.s();!(u=s.n()).done;){var c=u.value;c.isVisible=Boolean(c.state&jT)}}catch(h){s.e(h)}finally{s.f()}}function Y2e(t){var r=Ru(t),e;try{for(r.s();!(e=r.n()).done;){var n=e.value;n.state=0}}catch(E){r.e(E)}finally{r.f()}var i=Ru(t),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;o.isSelected&&uY(o)}}catch(E){i.e(E)}finally{i.f()}var s=Array.from(t).sort(function(E,R){return E.zoom-R.zoom}),u=Ru(s),c;try{for(u.s();!(c=u.n()).done;){var h=c.value;if(h.isVisible=Boolean(h.state&jT),h.children&&(h.isVisible||h.state&sY)){var p=Ru(h.children),v;try{for(p.s();!(v=p.n()).done;){var x=v.value;x.state=sY}}catch(E){p.e(E)}finally{p.f()}}else h.isSelected&&PR(h)}}catch(E){u.e(E)}finally{u.f()}}function uY(t){for(var r=t;r;){if(r.isLoaded||r.content)return r.state|=jT,!0;r=r.parent}return!1}function PR(t){var r=Ru(t.children),e;try{for(r.s();!(e=r.n()).done;){var n=e.value;n.isLoaded||n.content?n.state|=jT:PR(n)}}catch(i){r.e(i)}finally{r.f()}}function lY(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function GT(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?lY(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):lY(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function K2e(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=Z2e(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function Z2e(t,r){if(t){if(typeof t=="string")return cY(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return cY(t,r)}}function cY(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function $2e(t){var r=J2e();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function J2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Q2e={TilesetClass:C1,data:{type:"data",value:[]},dataComparator:Id.equal,renderSubLayers:{type:"function",value:function(r){return new pp(r)}},getTileData:{type:"function",optional:!0,value:null},onViewportLoad:{type:"function",optional:!0,value:null},onTileLoad:{type:"function",value:function(r){}},onTileUnload:{type:"function",value:function(r){}},onTileError:{type:"function",value:function(r){return console.error(r)}},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:E1,zRange:null,maxRequests:6,zoomOffset:0},yp=function(t){Ke(e,t);var r=$2e(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"initializeState",value:function(){this.state={tileset:null,isLoaded:!1}}},{key:"finalizeState",value:function(){var i,a;(i=this.state)===null||i===void 0||(a=i.tileset)===null||a===void 0||a.finalize()}},{key:"isLoaded",get:function(){var i,a,o;return Boolean((i=this.state)===null||i===void 0||(a=i.tileset)===null||a===void 0||(o=a.selectedTiles)===null||o===void 0?void 0:o.every(function(s){return s.isLoaded&&s.layers&&s.layers.every(function(u){return u.isLoaded})}))}},{key:"shouldUpdateState",value:function(i){var a=i.changeFlags;return a.somethingChanged}},{key:"updateState",value:function(i){var a=i.changeFlags,o=this.state.tileset,s=a.propsOrDataChanged||a.updateTriggersChanged,u=a.dataChanged||a.updateTriggersChanged&&(a.updateTriggersChanged.all||a.updateTriggersChanged.getTileData);o?s&&(o.setOptions(this._getTilesetOptions()),u?o.reloadAll():o.tiles.forEach(function(c){c.layers=null})):(o=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:o})),this._updateTileset()}},{key:"_getTilesetOptions",value:function(){var i=this.props,a=i.tileSize,o=i.maxCacheSize,s=i.maxCacheByteSize,u=i.refinementStrategy,c=i.extent,h=i.maxZoom,p=i.minZoom,v=i.maxRequests,x=i.zoomOffset;return{maxCacheSize:o,maxCacheByteSize:s,maxZoom:h,minZoom:p,tileSize:a,refinementStrategy:u,extent:c,maxRequests:v,zoomOffset:x,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}},{key:"_updateTileset",value:function(){var i=this.state.tileset,a=this.props,o=a.zRange,s=a.modelMatrix,u=i.update(this.context.viewport,{zRange:o,modelMatrix:s}),c=i.isLoaded,h=this.state.isLoaded!==c,p=this.state.frameNumber!==u;c&&(h||p)&&this._onViewportLoad(),p&&this.setState({frameNumber:u}),this.state.isLoaded=c}},{key:"_onViewportLoad",value:function(){var i=this.state.tileset,a=this.props.onViewportLoad;a&&a(i.selectedTiles)}},{key:"_onTileLoad",value:function(i){this.props.onTileLoad(i),i.layers=null,this.setNeedsUpdate()}},{key:"_onTileError",value:function(i,a){this.props.onTileError(i),a.layers=null,this.setNeedsUpdate()}},{key:"_onTileUnload",value:function(i){this.props.onTileUnload(i)}},{key:"getTileData",value:function(i){var a=this.props,o=a.data,s=a.getTileData,u=a.fetch,c=i.signal;return i.url=typeof o=="string"||Array.isArray(o)?Th(o,i):null,s?s(i):u&&i.url?u(i.url,{propName:"data",layer:this,signal:c}):null}},{key:"renderSubLayers",value:function(i){return this.props.renderSubLayers(i)}},{key:"getSubLayerPropsByTile",value:function(i){return null}},{key:"getPickingInfo",value:function(i){var a=i.info,o=i.sourceLayer,s=o.props.tile;return a.picked&&(a.tile=s),a.sourceTile=s,a}},{key:"_updateAutoHighlight",value:function(i){var a=i.sourceTile;if(a&&a.layers){var o=K2e(a.layers),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;u.updateAutoHighlight(i)}}catch(c){o.e(c)}finally{o.f()}}}},{key:"renderLayers",value:function(){var i=this;return this.state.tileset.tiles.map(function(a){var o=i.getSubLayerPropsByTile(a);if(!(!a.isLoaded&&!a.content))if(a.layers)o&&a.layers[0]&&Object.keys(o).some(function(u){return a.layers[0].props[u]!==o[u]})&&(a.layers=a.layers.map(function(u){return u.clone(o)}));else{var s=i.renderSubLayers(GT(GT(GT({},i.props),i.getSubLayerProps({id:a.id,updateTriggers:i.props.updateTriggers})),{},{data:a.content,_offset:0,tile:a}));a.layers=hh(s,Boolean).map(function(u){return u.clone(GT({tile:a},o))})}return a.layers})}},{key:"filterSubLayer",value:function(i){var a=i.layer,o=i.cullRect,s=a.props.tile;return this.state.tileset.isTileVisible(s,o)}}]),e}(Go);_(yp,"defaultProps",Q2e);_(yp,"layerName","TileLayer");at();vt();et();function fY(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function hY(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?fY(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):fY(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function eTe(t){var r=tTe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function tTe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var rTe={fadeTrail:!0,trailLength:{type:"number",value:120,min:0},currentTime:{type:"number",value:0,min:0},getTimestamps:{type:"accessor",value:function(r){return r.timestamps}}},VT=function(t){Ke(e,t);var r=eTe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"getShaders",value:function(){var i=Yt(me(e.prototype),"getShaders",this).call(this);return i.inject={"vs:#decl":`uniform float trailLength;
attribute float instanceTimestamps;
attribute float instanceNextTimestamps;
varying float vTime;
`,"vs:#main-end":`vTime = instanceTimestamps + (instanceNextTimestamps - instanceTimestamps) * vPathPosition.y / vPathLength;
`,"fs:#decl":`uniform bool fadeTrail;
uniform float trailLength;
uniform float currentTime;
varying float vTime;
`,"fs:#main-start":`if(vTime > currentTime || (fadeTrail && (vTime < currentTime - trailLength))) {
  discard;
}
`,"fs:DECKGL_FILTER_COLOR":`if(fadeTrail) {
  color.a *= 1.0 - (currentTime - vTime) / trailLength;
}
`},i}},{key:"initializeState",value:function(){Yt(me(e.prototype),"initializeState",this).call(this);var i=this.getAttributeManager();i.addInstanced({timestamps:{size:1,accessor:"getTimestamps",shaderAttributes:{instanceTimestamps:{vertexOffset:0},instanceNextTimestamps:{vertexOffset:1}}}})}},{key:"draw",value:function(i){var a=this.props,o=a.fadeTrail,s=a.trailLength,u=a.currentTime;i.uniforms=hY(hY({},i.uniforms),{},{fadeTrail:o,trailLength:s,currentTime:u}),Yt(me(e.prototype),"draw",this).call(this,i)}}]),e}(Ah);_(VT,"layerName","TripsLayer");_(VT,"defaultProps",rTe);at();vt();et();var Zo=function(t){t=t||{};var r=typeof t<"u"?t:{},e={},n;for(n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);var i=[],a="";function o(Ee){return r.locateFile?r.locateFile(Ee,a):a+Ee}var s;document.currentScript&&(a=document.currentScript.src),a.indexOf("blob:")!==0?a=a.substr(0,a.lastIndexOf("/")+1):a="",s=function(Be,tt,wt){var b=new XMLHttpRequest;b.open("GET",Be,!0),b.responseType="arraybuffer",b.onload=function(){if(b.status==200||b.status==0&&b.response){tt(b.response);return}var Vt=Te(Be);if(Vt){tt(Vt.buffer);return}wt()},b.onerror=wt,b.send(null)};var u=r.print||console.log.bind(console),c=r.printErr||console.warn.bind(console);for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);e=null,r.arguments&&(i=r.arguments);var h=0,p=function(Ee){h=Ee},v=function(){return h},x=8;function E(Ee,Be,tt,wt){switch(tt=tt||"i8",tt.charAt(tt.length-1)==="*"&&(tt="i32"),tt){case"i1":pe[Ee>>0]=Be;break;case"i8":pe[Ee>>0]=Be;break;case"i16":qe[Ee>>1]=Be;break;case"i32":ot[Ee>>2]=Be;break;case"i64":Ua=[Be>>>0,(Li=Be,+pi(Li)>=1?Li>0?(si(+ka(Li/4294967296),4294967295)|0)>>>0:~~+Ti((Li-+(~~Li>>>0))/4294967296)>>>0:0)],ot[Ee>>2]=Ua[0],ot[Ee+4>>2]=Ua[1];break;case"float":Pt[Ee>>2]=Be;break;case"double":Dt[Ee>>3]=Be;break;default:Le("invalid type for setValue: "+tt)}}function R(Ee,Be,tt){switch(Be=Be||"i8",Be.charAt(Be.length-1)==="*"&&(Be="i32"),Be){case"i1":return pe[Ee>>0];case"i8":return pe[Ee>>0];case"i16":return qe[Ee>>1];case"i32":return ot[Ee>>2];case"i64":return ot[Ee>>2];case"float":return Pt[Ee>>2];case"double":return Dt[Ee>>3];default:Le("invalid type for getValue: "+Be)}return null}var D=!1;function H(Ee,Be){Ee||Le("Assertion failed: "+Be)}function W(Ee){var Be=r["_"+Ee];return H(Be,"Cannot call unknown function "+Ee+", make sure it is exported"),Be}function $(Ee,Be,tt,wt,b){var Mt={string:function(vn){var Gr=0;if(vn!=null&&vn!==0){var $a=(vn.length<<2)+1;Gr=nc($a),I(vn,Gr,$a)}return Gr},array:function(vn){var Gr=nc(vn.length);return U(vn,Gr),Gr}};function Vt(vn){return Be==="string"?V(vn):Be==="boolean"?Boolean(vn):vn}var He=W(Ee),Bn=[],fn=0;if(wt)for(var Fr=0;Fr<wt.length;Fr++){var yi=Mt[tt[Fr]];yi?(fn===0&&(fn=_u()),Bn[Fr]=yi(wt[Fr])):Bn[Fr]=wt[Fr]}var Oa=He.apply(null,Bn);return Oa=Vt(Oa),fn!==0&&Sc(fn),Oa}function J(Ee,Be,tt,wt){tt=tt||[];var b=tt.every(function(Vt){return Vt==="number"}),Mt=Be!=="string";return Mt&&b&&!wt?W(Ee):function(){return $(Ee,Be,tt,arguments,wt)}}var B=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function se(Ee,Be,tt){for(var wt=Be+tt,b=Be;Ee[b]&&!(b>=wt);)++b;if(b-Be>16&&Ee.subarray&&B)return B.decode(Ee.subarray(Be,b));for(var Mt="";Be<b;){var Vt=Ee[Be++];if(!(Vt&128)){Mt+=String.fromCharCode(Vt);continue}var He=Ee[Be++]&63;if((Vt&224)==192){Mt+=String.fromCharCode((Vt&31)<<6|He);continue}var Bn=Ee[Be++]&63;if((Vt&240)==224?Vt=(Vt&15)<<12|He<<6|Bn:Vt=(Vt&7)<<18|He<<12|Bn<<6|Ee[Be++]&63,Vt<65536)Mt+=String.fromCharCode(Vt);else{var fn=Vt-65536;Mt+=String.fromCharCode(55296|fn>>10,56320|fn&1023)}}return Mt}function V(Ee,Be){return Ee?se(je,Ee,Be):""}function X(Ee,Be,tt,wt){if(!(wt>0))return 0;for(var b=tt,Mt=tt+wt-1,Vt=0;Vt<Ee.length;++Vt){var He=Ee.charCodeAt(Vt);if(He>=55296&&He<=57343){var Bn=Ee.charCodeAt(++Vt);He=65536+((He&1023)<<10)|Bn&1023}if(He<=127){if(tt>=Mt)break;Be[tt++]=He}else if(He<=2047){if(tt+1>=Mt)break;Be[tt++]=192|He>>6,Be[tt++]=128|He&63}else if(He<=65535){if(tt+2>=Mt)break;Be[tt++]=224|He>>12,Be[tt++]=128|He>>6&63,Be[tt++]=128|He&63}else{if(tt+3>=Mt)break;Be[tt++]=240|He>>18,Be[tt++]=128|He>>12&63,Be[tt++]=128|He>>6&63,Be[tt++]=128|He&63}}return Be[tt]=0,tt-b}function I(Ee,Be,tt){return X(Ee,je,Be,tt)}var O=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function U(Ee,Be){pe.set(Ee,Be)}function re(Ee,Be){return Ee%Be>0&&(Ee+=Be-Ee%Be),Ee}var ee,pe,je,qe,We,ot,gt,Pt,Dt;function nr(Ee){ee=Ee,r.HEAP8=pe=new Int8Array(Ee),r.HEAP16=qe=new Int16Array(Ee),r.HEAP32=ot=new Int32Array(Ee),r.HEAPU8=je=new Uint8Array(Ee),r.HEAPU16=We=new Uint16Array(Ee),r.HEAPU32=gt=new Uint32Array(Ee),r.HEAPF32=Pt=new Float32Array(Ee),r.HEAPF64=Dt=new Float64Array(Ee)}var Nt=5266928,Ut=24016,Or=r.TOTAL_MEMORY||33554432;r.buffer?ee=r.buffer:ee=new ArrayBuffer(Or),Or=ee.byteLength,nr(ee),ot[Ut>>2]=Nt;function he(Ee){for(;Ee.length>0;){var Be=Ee.shift();if(typeof Be=="function"){Be();continue}var tt=Be.func;typeof tt=="number"?Be.arg===void 0?r.dynCall_v(tt):r.dynCall_vi(tt,Be.arg):tt(Be.arg===void 0?null:Be.arg)}}var xe=[],Ge=[],bt=[],Kt=[];function Gt(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)wr(r.preRun.shift());he(xe)}function tn(){he(Ge)}function an(){he(bt)}function Fn(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)Nn(r.postRun.shift());he(Kt)}function wr(Ee){xe.unshift(Ee)}function Nn(Ee){Kt.unshift(Ee)}var pi=Math.abs,Ti=Math.ceil,ka=Math.floor,si=Math.min,Hn=0,Di=null,Yi=null;function di(Ee){Hn++,r.monitorRunDependencies&&r.monitorRunDependencies(Hn)}function jr(Ee){if(Hn--,r.monitorRunDependencies&&r.monitorRunDependencies(Hn),Hn==0&&(Di!==null&&(clearInterval(Di),Di=null),Yi)){var Be=Yi;Yi=null,Be()}}r.preloadedImages={},r.preloadedAudios={};var Jr=null,Br="data:application/octet-stream;base64,";function Gi(Ee){return String.prototype.startsWith?Ee.startsWith(Br):Ee.indexOf(Br)===0}var Li,Ua;Jr="data:application/octet-stream;base64,AAAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAABAAAAAMAAAAGAAAABQAAAAIAAAAAAAAAAgAAAAMAAAABAAAABAAAAAYAAAAAAAAABQAAAAMAAAAGAAAABAAAAAUAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAABAAAABQAAAAIAAAAAAAAAAQAAAAMAAAAGAAAABAAAAAYAAAAAAAAABQAAAAIAAAABAAAABAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABgAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAABgAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAACAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAwAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAQAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAFAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABgAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAAAAAAABgAAAAAAAAADAAAAAgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAUAAAAEAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAEAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAUAAAACAAAABAAAAAMAAAAIAAAAAQAAAAcAAAAGAAAACQAAAAAAAAADAAAAAgAAAAIAAAAGAAAACgAAAAsAAAAAAAAAAQAAAAUAAAADAAAADQAAAAEAAAAHAAAABAAAAAwAAAAAAAAABAAAAH8AAAAPAAAACAAAAAMAAAAAAAAADAAAAAUAAAACAAAAEgAAAAoAAAAIAAAAAAAAABAAAAAGAAAADgAAAAsAAAARAAAAAQAAAAkAAAACAAAABwAAABUAAAAJAAAAEwAAAAMAAAANAAAAAQAAAAgAAAAFAAAAFgAAABAAAAAEAAAAAAAAAA8AAAAJAAAAEwAAAA4AAAAUAAAAAQAAAAcAAAAGAAAACgAAAAsAAAAYAAAAFwAAAAUAAAACAAAAEgAAAAsAAAARAAAAFwAAABkAAAACAAAABgAAAAoAAAAMAAAAHAAAAA0AAAAaAAAABAAAAA8AAAADAAAADQAAABoAAAAVAAAAHQAAAAMAAAAMAAAABwAAAA4AAAB/AAAAEQAAABsAAAAJAAAAFAAAAAYAAAAPAAAAFgAAABwAAAAfAAAABAAAAAgAAAAMAAAAEAAAABIAAAAhAAAAHgAAAAgAAAAFAAAAFgAAABEAAAALAAAADgAAAAYAAAAjAAAAGQAAABsAAAASAAAAGAAAAB4AAAAgAAAABQAAAAoAAAAQAAAAEwAAACIAAAAUAAAAJAAAAAcAAAAVAAAACQAAABQAAAAOAAAAEwAAAAkAAAAoAAAAGwAAACQAAAAVAAAAJgAAABMAAAAiAAAADQAAAB0AAAAHAAAAFgAAABAAAAApAAAAIQAAAA8AAAAIAAAAHwAAABcAAAAYAAAACwAAAAoAAAAnAAAAJQAAABkAAAAYAAAAfwAAACAAAAAlAAAACgAAABcAAAASAAAAGQAAABcAAAARAAAACwAAAC0AAAAnAAAAIwAAABoAAAAqAAAAHQAAACsAAAAMAAAAHAAAAA0AAAAbAAAAKAAAACMAAAAuAAAADgAAABQAAAARAAAAHAAAAB8AAAAqAAAALAAAAAwAAAAPAAAAGgAAAB0AAAArAAAAJgAAAC8AAAANAAAAGgAAABUAAAAeAAAAIAAAADAAAAAyAAAAEAAAABIAAAAhAAAAHwAAACkAAAAsAAAANQAAAA8AAAAWAAAAHAAAACAAAAAeAAAAGAAAABIAAAA0AAAAMgAAACUAAAAhAAAAHgAAADEAAAAwAAAAFgAAABAAAAApAAAAIgAAABMAAAAmAAAAFQAAADYAAAAkAAAAMwAAACMAAAAuAAAALQAAADgAAAARAAAAGwAAABkAAAAkAAAAFAAAACIAAAATAAAANwAAACgAAAA2AAAAJQAAACcAAAA0AAAAOQAAABgAAAAXAAAAIAAAACYAAAB/AAAAIgAAADMAAAAdAAAALwAAABUAAAAnAAAAJQAAABkAAAAXAAAAOwAAADkAAAAtAAAAKAAAABsAAAAkAAAAFAAAADwAAAAuAAAANwAAACkAAAAxAAAANQAAAD0AAAAWAAAAIQAAAB8AAAAqAAAAOgAAACsAAAA+AAAAHAAAACwAAAAaAAAAKwAAAD4AAAAvAAAAQAAAABoAAAAqAAAAHQAAACwAAAA1AAAAOgAAAEEAAAAcAAAAHwAAACoAAAAtAAAAJwAAACMAAAAZAAAAPwAAADsAAAA4AAAALgAAADwAAAA4AAAARAAAABsAAAAoAAAAIwAAAC8AAAAmAAAAKwAAAB0AAABFAAAAMwAAAEAAAAAwAAAAMQAAAB4AAAAhAAAAQwAAAEIAAAAyAAAAMQAAAH8AAAA9AAAAQgAAACEAAAAwAAAAKQAAADIAAAAwAAAAIAAAAB4AAABGAAAAQwAAADQAAAAzAAAARQAAADYAAABHAAAAJgAAAC8AAAAiAAAANAAAADkAAABGAAAASgAAACAAAAAlAAAAMgAAADUAAAA9AAAAQQAAAEsAAAAfAAAAKQAAACwAAAA2AAAARwAAADcAAABJAAAAIgAAADMAAAAkAAAANwAAACgAAAA2AAAAJAAAAEgAAAA8AAAASQAAADgAAABEAAAAPwAAAE0AAAAjAAAALgAAAC0AAAA5AAAAOwAAAEoAAABOAAAAJQAAACcAAAA0AAAAOgAAAH8AAAA+AAAATAAAACwAAABBAAAAKgAAADsAAAA/AAAATgAAAE8AAAAnAAAALQAAADkAAAA8AAAASAAAAEQAAABQAAAAKAAAADcAAAAuAAAAPQAAADUAAAAxAAAAKQAAAFEAAABLAAAAQgAAAD4AAAArAAAAOgAAACoAAABSAAAAQAAAAEwAAAA/AAAAfwAAADgAAAAtAAAATwAAADsAAABNAAAAQAAAAC8AAAA+AAAAKwAAAFQAAABFAAAAUgAAAEEAAAA6AAAANQAAACwAAABWAAAATAAAAEsAAABCAAAAQwAAAFEAAABVAAAAMQAAADAAAAA9AAAAQwAAAEIAAAAyAAAAMAAAAFcAAABVAAAARgAAAEQAAAA4AAAAPAAAAC4AAABaAAAATQAAAFAAAABFAAAAMwAAAEAAAAAvAAAAWQAAAEcAAABUAAAARgAAAEMAAAA0AAAAMgAAAFMAAABXAAAASgAAAEcAAABZAAAASQAAAFsAAAAzAAAARQAAADYAAABIAAAAfwAAAEkAAAA3AAAAUAAAADwAAABYAAAASQAAAFsAAABIAAAAWAAAADYAAABHAAAANwAAAEoAAABOAAAAUwAAAFwAAAA0AAAAOQAAAEYAAABLAAAAQQAAAD0AAAA1AAAAXgAAAFYAAABRAAAATAAAAFYAAABSAAAAYAAAADoAAABBAAAAPgAAAE0AAAA/AAAARAAAADgAAABdAAAATwAAAFoAAABOAAAASgAAADsAAAA5AAAAXwAAAFwAAABPAAAATwAAAE4AAAA/AAAAOwAAAF0AAABfAAAATQAAAFAAAABEAAAASAAAADwAAABjAAAAWgAAAFgAAABRAAAAVQAAAF4AAABlAAAAPQAAAEIAAABLAAAAUgAAAGAAAABUAAAAYgAAAD4AAABMAAAAQAAAAFMAAAB/AAAASgAAAEYAAABkAAAAVwAAAFwAAABUAAAARQAAAFIAAABAAAAAYQAAAFkAAABiAAAAVQAAAFcAAABlAAAAZgAAAEIAAABDAAAAUQAAAFYAAABMAAAASwAAAEEAAABoAAAAYAAAAF4AAABXAAAAUwAAAGYAAABkAAAAQwAAAEYAAABVAAAAWAAAAEgAAABbAAAASQAAAGMAAABQAAAAaQAAAFkAAABhAAAAWwAAAGcAAABFAAAAVAAAAEcAAABaAAAATQAAAFAAAABEAAAAagAAAF0AAABjAAAAWwAAAEkAAABZAAAARwAAAGkAAABYAAAAZwAAAFwAAABTAAAATgAAAEoAAABsAAAAZAAAAF8AAABdAAAATwAAAFoAAABNAAAAbQAAAF8AAABqAAAAXgAAAFYAAABRAAAASwAAAGsAAABoAAAAZQAAAF8AAABcAAAATwAAAE4AAABtAAAAbAAAAF0AAABgAAAAaAAAAGIAAABuAAAATAAAAFYAAABSAAAAYQAAAH8AAABiAAAAVAAAAGcAAABZAAAAbwAAAGIAAABuAAAAYQAAAG8AAABSAAAAYAAAAFQAAABjAAAAUAAAAGkAAABYAAAAagAAAFoAAABxAAAAZAAAAGYAAABTAAAAVwAAAGwAAAByAAAAXAAAAGUAAABmAAAAawAAAHAAAABRAAAAVQAAAF4AAABmAAAAZQAAAFcAAABVAAAAcgAAAHAAAABkAAAAZwAAAFsAAABhAAAAWQAAAHQAAABpAAAAbwAAAGgAAABrAAAAbgAAAHMAAABWAAAAXgAAAGAAAABpAAAAWAAAAGcAAABbAAAAcQAAAGMAAAB0AAAAagAAAF0AAABjAAAAWgAAAHUAAABtAAAAcQAAAGsAAAB/AAAAZQAAAF4AAABzAAAAaAAAAHAAAABsAAAAZAAAAF8AAABcAAAAdgAAAHIAAABtAAAAbQAAAGwAAABdAAAAXwAAAHUAAAB2AAAAagAAAG4AAABiAAAAaAAAAGAAAAB3AAAAbwAAAHMAAABvAAAAYQAAAG4AAABiAAAAdAAAAGcAAAB3AAAAcAAAAGsAAABmAAAAZQAAAHgAAABzAAAAcgAAAHEAAABjAAAAdAAAAGkAAAB1AAAAagAAAHkAAAByAAAAcAAAAGQAAABmAAAAdgAAAHgAAABsAAAAcwAAAG4AAABrAAAAaAAAAHgAAAB3AAAAcAAAAHQAAABnAAAAdwAAAG8AAABxAAAAaQAAAHkAAAB1AAAAfwAAAG0AAAB2AAAAcQAAAHkAAABqAAAAdgAAAHgAAABsAAAAcgAAAHUAAAB5AAAAbQAAAHcAAABvAAAAcwAAAG4AAAB5AAAAdAAAAHgAAAB4AAAAcwAAAHIAAABwAAAAeQAAAHcAAAB2AAAAeQAAAHQAAAB4AAAAdwAAAHUAAABxAAAAdgAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAQAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAADAAAABQAAAAEAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAgAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAABQAAAAUAAAAAAAAAAAAAAP////8BAAAAAAAAAAMAAAAEAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAQAAAP//////////AQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAIAAAAAAAAAAAAAAAEAAAACAAAABgAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAoAAAACAAAAAAAAAAAAAAABAAAAAQAAAAUAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAAAAAAAAAAAAAEAAAADAAAABwAAAAYAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAJAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAAAAAAAAAAAAQAAAAQAAAAIAAAACgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAAAAAAAAAAABAAAACwAAAA8AAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAAAAAAAAAAABAAAADAAAABAAAAAMAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAEAAAAKAAAAEwAAAAgAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAJAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAgAAAAAAAAAAAAAAAQAAAA0AAAARAAAADQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAAAAAAAAAAAAAEAAAAOAAAAEgAAAA8AAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAAAAAABAAAA//////////8TAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABIAAAAAAAAAGAAAAAAAAAAhAAAAAAAAAB4AAAAAAAAAIAAAAAMAAAAxAAAAAQAAADAAAAADAAAAMgAAAAMAAAAIAAAAAAAAAAUAAAAFAAAACgAAAAUAAAAWAAAAAAAAABAAAAAAAAAAEgAAAAAAAAApAAAAAQAAACEAAAAAAAAAHgAAAAAAAAAEAAAAAAAAAAAAAAAFAAAAAgAAAAUAAAAPAAAAAQAAAAgAAAAAAAAABQAAAAUAAAAfAAAAAQAAABYAAAAAAAAAEAAAAAAAAAACAAAAAAAAAAYAAAAAAAAADgAAAAAAAAAKAAAAAAAAAAsAAAAAAAAAEQAAAAMAAAAYAAAAAQAAABcAAAADAAAAGQAAAAMAAAAAAAAAAAAAAAEAAAAFAAAACQAAAAUAAAAFAAAAAAAAAAIAAAAAAAAABgAAAAAAAAASAAAAAQAAAAoAAAAAAAAACwAAAAAAAAAEAAAAAQAAAAMAAAAFAAAABwAAAAUAAAAIAAAAAQAAAAAAAAAAAAAAAQAAAAUAAAAQAAAAAQAAAAUAAAAAAAAAAgAAAAAAAAAHAAAAAAAAABUAAAAAAAAAJgAAAAAAAAAJAAAAAAAAABMAAAAAAAAAIgAAAAMAAAAOAAAAAQAAABQAAAADAAAAJAAAAAMAAAADAAAAAAAAAA0AAAAFAAAAHQAAAAUAAAABAAAAAAAAAAcAAAAAAAAAFQAAAAAAAAAGAAAAAQAAAAkAAAAAAAAAEwAAAAAAAAAEAAAAAgAAAAwAAAAFAAAAGgAAAAUAAAAAAAAAAQAAAAMAAAAAAAAADQAAAAUAAAACAAAAAQAAAAEAAAAAAAAABwAAAAAAAAAaAAAAAAAAACoAAAAAAAAAOgAAAAAAAAAdAAAAAAAAACsAAAAAAAAAPgAAAAMAAAAmAAAAAQAAAC8AAAADAAAAQAAAAAMAAAAMAAAAAAAAABwAAAAFAAAALAAAAAUAAAANAAAAAAAAABoAAAAAAAAAKgAAAAAAAAAVAAAAAQAAAB0AAAAAAAAAKwAAAAAAAAAEAAAAAwAAAA8AAAAFAAAAHwAAAAUAAAADAAAAAQAAAAwAAAAAAAAAHAAAAAUAAAAHAAAAAQAAAA0AAAAAAAAAGgAAAAAAAAAfAAAAAAAAACkAAAAAAAAAMQAAAAAAAAAsAAAAAAAAADUAAAAAAAAAPQAAAAMAAAA6AAAAAQAAAEEAAAADAAAASwAAAAMAAAAPAAAAAAAAABYAAAAFAAAAIQAAAAUAAAAcAAAAAAAAAB8AAAAAAAAAKQAAAAAAAAAqAAAAAQAAACwAAAAAAAAANQAAAAAAAAAEAAAABAAAAAgAAAAFAAAAEAAAAAUAAAAMAAAAAQAAAA8AAAAAAAAAFgAAAAUAAAAaAAAAAQAAABwAAAAAAAAAHwAAAAAAAAAyAAAAAAAAADAAAAAAAAAAMQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAIQAAAAMAAAAYAAAAAwAAABIAAAADAAAAEAAAAAMAAABGAAAAAAAAAEMAAAAAAAAAQgAAAAMAAAA0AAAAAwAAADIAAAAAAAAAMAAAAAAAAAAlAAAAAwAAACAAAAAAAAAAHgAAAAMAAABTAAAAAAAAAFcAAAADAAAAVQAAAAMAAABKAAAAAwAAAEYAAAAAAAAAQwAAAAAAAAA5AAAAAQAAADQAAAADAAAAMgAAAAAAAAAZAAAAAAAAABcAAAAAAAAAGAAAAAMAAAARAAAAAAAAAAsAAAADAAAACgAAAAMAAAAOAAAAAwAAAAYAAAADAAAAAgAAAAMAAAAtAAAAAAAAACcAAAAAAAAAJQAAAAMAAAAjAAAAAwAAABkAAAAAAAAAFwAAAAAAAAAbAAAAAwAAABEAAAAAAAAACwAAAAMAAAA/AAAAAAAAADsAAAADAAAAOQAAAAMAAAA4AAAAAwAAAC0AAAAAAAAAJwAAAAAAAAAuAAAAAwAAACMAAAADAAAAGQAAAAAAAAAkAAAAAAAAABQAAAAAAAAADgAAAAMAAAAiAAAAAAAAABMAAAADAAAACQAAAAMAAAAmAAAAAwAAABUAAAADAAAABwAAAAMAAAA3AAAAAAAAACgAAAAAAAAAGwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAFAAAAAAAAAAzAAAAAwAAACIAAAAAAAAAEwAAAAMAAABIAAAAAAAAADwAAAADAAAALgAAAAMAAABJAAAAAwAAADcAAAAAAAAAKAAAAAAAAABHAAAAAwAAADYAAAADAAAAJAAAAAAAAABAAAAAAAAAAC8AAAAAAAAAJgAAAAMAAAA+AAAAAAAAACsAAAADAAAAHQAAAAMAAAA6AAAAAwAAACoAAAADAAAAGgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAMwAAAAMAAABSAAAAAwAAAEAAAAAAAAAALwAAAAAAAABMAAAAAwAAAD4AAAAAAAAAKwAAAAMAAABhAAAAAAAAAFkAAAADAAAARwAAAAMAAABiAAAAAwAAAFQAAAAAAAAARQAAAAAAAABgAAAAAwAAAFIAAAADAAAAQAAAAAAAAABLAAAAAAAAAEEAAAAAAAAAOgAAAAMAAAA9AAAAAAAAADUAAAADAAAALAAAAAMAAAAxAAAAAwAAACkAAAADAAAAHwAAAAMAAABeAAAAAAAAAFYAAAAAAAAATAAAAAMAAABRAAAAAwAAAEsAAAAAAAAAQQAAAAAAAABCAAAAAwAAAD0AAAAAAAAANQAAAAMAAABrAAAAAAAAAGgAAAADAAAAYAAAAAMAAABlAAAAAwAAAF4AAAAAAAAAVgAAAAAAAABVAAAAAwAAAFEAAAADAAAASwAAAAAAAAA5AAAAAAAAADsAAAAAAAAAPwAAAAMAAABKAAAAAAAAAE4AAAADAAAATwAAAAMAAABTAAAAAwAAAFwAAAADAAAAXwAAAAMAAAAlAAAAAAAAACcAAAADAAAALQAAAAMAAAA0AAAAAAAAADkAAAAAAAAAOwAAAAAAAABGAAAAAwAAAEoAAAAAAAAATgAAAAMAAAAYAAAAAAAAABcAAAADAAAAGQAAAAMAAAAgAAAAAwAAACUAAAAAAAAAJwAAAAMAAAAyAAAAAwAAADQAAAAAAAAAOQAAAAAAAAAuAAAAAAAAADwAAAAAAAAASAAAAAMAAAA4AAAAAAAAAEQAAAADAAAAUAAAAAMAAAA/AAAAAwAAAE0AAAADAAAAWgAAAAMAAAAbAAAAAAAAACgAAAADAAAANwAAAAMAAAAjAAAAAAAAAC4AAAAAAAAAPAAAAAAAAAAtAAAAAwAAADgAAAAAAAAARAAAAAMAAAAOAAAAAAAAABQAAAADAAAAJAAAAAMAAAARAAAAAwAAABsAAAAAAAAAKAAAAAMAAAAZAAAAAwAAACMAAAAAAAAALgAAAAAAAABHAAAAAAAAAFkAAAAAAAAAYQAAAAMAAABJAAAAAAAAAFsAAAADAAAAZwAAAAMAAABIAAAAAwAAAFgAAAADAAAAaQAAAAMAAAAzAAAAAAAAAEUAAAADAAAAVAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAWQAAAAAAAAA3AAAAAwAAAEkAAAAAAAAAWwAAAAMAAAAmAAAAAAAAAC8AAAADAAAAQAAAAAMAAAAiAAAAAwAAADMAAAAAAAAARQAAAAMAAAAkAAAAAwAAADYAAAAAAAAARwAAAAAAAABgAAAAAAAAAGgAAAAAAAAAawAAAAMAAABiAAAAAAAAAG4AAAADAAAAcwAAAAMAAABhAAAAAwAAAG8AAAADAAAAdwAAAAMAAABMAAAAAAAAAFYAAAADAAAAXgAAAAMAAABSAAAAAAAAAGAAAAAAAAAAaAAAAAAAAABUAAAAAwAAAGIAAAAAAAAAbgAAAAMAAAA6AAAAAAAAAEEAAAADAAAASwAAAAMAAAA+AAAAAwAAAEwAAAAAAAAAVgAAAAMAAABAAAAAAwAAAFIAAAAAAAAAYAAAAAAAAABVAAAAAAAAAFcAAAAAAAAAUwAAAAMAAABlAAAAAAAAAGYAAAADAAAAZAAAAAMAAABrAAAAAwAAAHAAAAADAAAAcgAAAAMAAABCAAAAAAAAAEMAAAADAAAARgAAAAMAAABRAAAAAAAAAFUAAAAAAAAAVwAAAAAAAABeAAAAAwAAAGUAAAAAAAAAZgAAAAMAAAAxAAAAAAAAADAAAAADAAAAMgAAAAMAAAA9AAAAAwAAAEIAAAAAAAAAQwAAAAMAAABLAAAAAwAAAFEAAAAAAAAAVQAAAAAAAABfAAAAAAAAAFwAAAAAAAAAUwAAAAAAAABPAAAAAAAAAE4AAAAAAAAASgAAAAMAAAA/AAAAAQAAADsAAAADAAAAOQAAAAMAAABtAAAAAAAAAGwAAAAAAAAAZAAAAAUAAABdAAAAAQAAAF8AAAAAAAAAXAAAAAAAAABNAAAAAQAAAE8AAAAAAAAATgAAAAAAAAB1AAAABAAAAHYAAAAFAAAAcgAAAAUAAABqAAAAAQAAAG0AAAAAAAAAbAAAAAAAAABaAAAAAQAAAF0AAAABAAAAXwAAAAAAAABaAAAAAAAAAE0AAAAAAAAAPwAAAAAAAABQAAAAAAAAAEQAAAAAAAAAOAAAAAMAAABIAAAAAQAAADwAAAADAAAALgAAAAMAAABqAAAAAAAAAF0AAAAAAAAATwAAAAUAAABjAAAAAQAAAFoAAAAAAAAATQAAAAAAAABYAAAAAQAAAFAAAAAAAAAARAAAAAAAAAB1AAAAAwAAAG0AAAAFAAAAXwAAAAUAAABxAAAAAQAAAGoAAAAAAAAAXQAAAAAAAABpAAAAAQAAAGMAAAABAAAAWgAAAAAAAABpAAAAAAAAAFgAAAAAAAAASAAAAAAAAABnAAAAAAAAAFsAAAAAAAAASQAAAAMAAABhAAAAAQAAAFkAAAADAAAARwAAAAMAAABxAAAAAAAAAGMAAAAAAAAAUAAAAAUAAAB0AAAAAQAAAGkAAAAAAAAAWAAAAAAAAABvAAAAAQAAAGcAAAAAAAAAWwAAAAAAAAB1AAAAAgAAAGoAAAAFAAAAWgAAAAUAAAB5AAAAAQAAAHEAAAAAAAAAYwAAAAAAAAB3AAAAAQAAAHQAAAABAAAAaQAAAAAAAAB3AAAAAAAAAG8AAAAAAAAAYQAAAAAAAABzAAAAAAAAAG4AAAAAAAAAYgAAAAMAAABrAAAAAQAAAGgAAAADAAAAYAAAAAMAAAB5AAAAAAAAAHQAAAAAAAAAZwAAAAUAAAB4AAAAAQAAAHcAAAAAAAAAbwAAAAAAAABwAAAAAQAAAHMAAAAAAAAAbgAAAAAAAAB1AAAAAQAAAHEAAAAFAAAAaQAAAAUAAAB2AAAAAQAAAHkAAAAAAAAAdAAAAAAAAAByAAAAAQAAAHgAAAABAAAAdwAAAAAAAAByAAAAAAAAAHAAAAAAAAAAawAAAAAAAABkAAAAAAAAAGYAAAAAAAAAZQAAAAMAAABTAAAAAQAAAFcAAAADAAAAVQAAAAMAAAB2AAAAAAAAAHgAAAAAAAAAcwAAAAUAAABsAAAAAQAAAHIAAAAAAAAAcAAAAAAAAABcAAAAAQAAAGQAAAAAAAAAZgAAAAAAAAB1AAAAAAAAAHkAAAAFAAAAdwAAAAUAAABtAAAAAQAAAHYAAAAAAAAAeAAAAAAAAABfAAAAAQAAAGwAAAABAAAAcgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAB+ogX28rbpPxqumpJv+fM/165tC4ns9D+XaEnTqUsEQFrOtNlC4PA/3U+0XG6P9b9TdUUBxTTjP4PUp8ex1ty/B1rD/EN43z+lcDi6LLrZP/a45NWEHMY/oJ5ijLDZ+j/xw3rjxWPjP2B8A46ioQdAotff3wla2z+FMSpA1jj+v6b5Y1mtPbS/cIu8K0F457/2esiyJpDNv98k5Ts2NeA/pvljWa09tD88ClUJ60MDQPZ6yLImkM0/4ONKxa0UBcD2uOTVhBzGv5G7JRxGave/8cN648Vj47+HCwtkjAXIv6LX398JWtu/qyheaCAL9D9TdUUBxTTjv4gyTxslhwVAB1rD/EN4378EH/28teoFwH6iBfbytum/F6ztFYdK/r/Xrm0Liez0vwcS6wNGWeO/Ws602ULg8L9TCtRLiLT8P8pi5RexJsw/BlIKPVwR5T95Wyu0/QjnP5PjoT7YYcu/mBhKZ6zrwj8wRYS7NebuP3qW6geh+Ls/SLrixebL3r+pcyymN9XrPwmkNHp7xec/GWNMZVAA17+82s+x2BLiPwn2ytbJ9ek/LgEH1sMS1j8yp/2LhTfeP+SnWwtQBbu/d38gkp5X7z8ytsuHaADGPzUYObdf1+m/7IauECWhwz+cjSACjzniP76Z+wUhN9K/1+GEKzup67+/GYr/04baPw6idWOvsuc/ZedTWsRa5b/EJQOuRzi0v/OncYhHPes/h49PixY53j+i8wWfC03Nvw2idWOvsue/ZedTWsRa5T/EJQOuRzi0P/KncYhHPeu/iY9PixY53r+i8wWfC03NP9anWwtQBbs/d38gkp5X778ytsuHaADGvzUYObdf1+k/74auECWhw7+cjSACjzniv8CZ+wUhN9I/1uGEKzup6z+/GYr/04bavwmkNHp7xee/F2NMZVAA1z+82s+x2BLivwr2ytbJ9em/KwEH1sMS1r8yp/2LhTfev81i5RexJsy/BlIKPVwR5b95Wyu0/Qjnv5DjoT7YYcs/nBhKZ6zrwr8wRYS7Nebuv3OW6geh+Lu/SLrixebL3j+pcyymN9Xrv8rHIFfWehZAMBwUdlo0DECTUc17EOb2PxpVB1SWChdAzjbhb9pTDUDQhmdvECX5P9FlMKCC9+g/IIAzjELgE0DajDngMv8GQFhWDmDPjNs/y1guLh96EkAxPi8k7DIEQJCc4URlhRhA3eLKKLwkEECqpNAyTBD/P6xpjXcDiwVAFtl//cQm4z+Ibt3XKiYTQM7mCLUb3QdAoM1t8yVv7D8aLZv2Nk8UQEAJPV5nQwxAtSsfTCoE9z9TPjXLXIIWQBVanC5W9AtAYM3d7Adm9j++5mQz1FoWQBUThyaVBghAwH5muQsV7T89Q1qv82MUQJoWGOfNuBdAzrkClkmwDkDQjKq77t37Py+g0dtitsE/ZwAMTwVPEUBojepluNwBQGYbtuW+t9w/HNWIJs6MEkDTNuQUSlgEQKxktPP5TcQ/ixbLB8JjEUCwuWjXMQYCQAS/R09FkRdAowpiZjhhDkB7LmlczD/7P01iQmhhsAVAnrtTwDy84z/Z6jfQ2TgTQChOCXMnWwpAhrW3daoz8z/HYJvVPI4VQLT3ik5FcA5Angi7LOZd+z+NNVzDy5gXQBXdvVTFUA1AYNMgOeYe+T8+qHXGCwkXQKQTOKwa5AJA8gFVoEMW0T+FwzJyttIRQAEAAAD/////BwAAAP////8xAAAA/////1cBAAD/////YQkAAP////+nQQAA/////5HLAQD/////95AMAP/////B9lcAAAAAAAAAAAAAAAAAAgAAAP////8OAAAA/////2IAAAD/////rgIAAP/////CEgAA/////06DAAD/////IpcDAP/////uIRkA/////4LtrwAAAAAAAAAAAAAAAAAAAAAAAgAAAP//////////AQAAAAMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////////////////////wEAAAAAAAAAAgAAAP///////////////wMAAAD//////////////////////////////////////////////////////////wIAAAD//////////wEAAAAAAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA/////////////////////wEAAAD///////////////8CAAAA////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAA////////////////AgAAAAEAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AQAAAAIAAAD///////////////8AAAAA/////////////////////wMAAAD///////////////////////////////8CAAAA////////////////AQAAAP////////////////////8AAAAA/////////////////////wMAAAD/////////////////////////////////////////////////////AwAAAP////////////////////8AAAAAAQAAAP//////////AgAAAP//////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAP///////////////wIAAAAAAAAAAQAAAP//////////////////////////////////////////////////////////////////////////AwAAAAEAAAD//////////wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAgAAAAAAAAACAAAAAQAAAAEAAAACAAAAAgAAAAAAAAAFAAAABQAAAAAAAAACAAAAAgAAAAMAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAIAAAABAAAAAgAAAAIAAAACAAAAAAAAAAUAAAAGAAAAAAAAAAIAAAACAAAAAwAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAAAAAAAAgAAAAEAAAADAAAAAgAAAAIAAAAAAAAABQAAAAcAAAAAAAAAAgAAAAIAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAAAAAAAACAAAAAQAAAAQAAAACAAAAAgAAAAAAAAAFAAAACAAAAAAAAAACAAAAAgAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAACAAAAAAAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAUAAAAJAAAAAAAAAAIAAAACAAAAAwAAAAUAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAIAAAACAAAAAAAAAAMAAAAOAAAAAgAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAgAAAAIAAAADAAAABgAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAgAAAAIAAAAAAAAAAwAAAAoAAAACAAAAAAAAAAIAAAADAAAAAQAAAAAAAAACAAAAAgAAAAMAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAgAAAAAAAAADAAAACwAAAAIAAAAAAAAAAgAAAAMAAAACAAAAAAAAAAIAAAACAAAAAwAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAACAAAAAAAAAAMAAAAMAAAAAgAAAAAAAAACAAAAAwAAAAMAAAAAAAAAAgAAAAIAAAADAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAgAAAAIAAAAAAAAAAwAAAA0AAAACAAAAAAAAAAIAAAADAAAABAAAAAAAAAACAAAAAgAAAAMAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAgAAAAAAAAADAAAABgAAAAIAAAAAAAAAAgAAAAMAAAAPAAAAAAAAAAIAAAACAAAAAwAAAAsAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAIAAAACAAAAAAAAAAMAAAAHAAAAAgAAAAAAAAACAAAAAwAAABAAAAAAAAAAAgAAAAIAAAADAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAIAAAAAAAAAAwAAAAgAAAACAAAAAAAAAAIAAAADAAAAEQAAAAAAAAACAAAAAgAAAAMAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAACAAAAAgAAAAAAAAADAAAACQAAAAIAAAAAAAAAAgAAAAMAAAASAAAAAAAAAAIAAAACAAAAAwAAAA4AAAAAAAAAAAAAAAAAAAAAAAAACQAAAAIAAAACAAAAAAAAAAMAAAAFAAAAAgAAAAAAAAACAAAAAwAAABMAAAAAAAAAAgAAAAIAAAADAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAgAAAAAAAAACAAAAAQAAABMAAAACAAAAAgAAAAAAAAAFAAAACgAAAAAAAAACAAAAAgAAAAMAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABEAAAACAAAAAAAAAAIAAAABAAAADwAAAAIAAAACAAAAAAAAAAUAAAALAAAAAAAAAAIAAAACAAAAAwAAABEAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAIAAAAAAAAAAgAAAAEAAAAQAAAAAgAAAAIAAAAAAAAABQAAAAwAAAAAAAAAAgAAAAIAAAADAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAACAAAAAQAAABEAAAACAAAAAgAAAAAAAAAFAAAADQAAAAAAAAACAAAAAgAAAAMAAAATAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAACAAAAAAAAAAIAAAABAAAAEgAAAAIAAAACAAAAAAAAAAUAAAAOAAAAAAAAAAIAAAACAAAAAwAAAAIAAAABAAAAAAAAAAEAAAACAAAAAAAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAEAAAAAAAAAAgAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAgAAAAAAAAABAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAAAAAAAAAAABQAAAAQAAAAAAAAAAQAAAAUAAAAEAAAAAAAAAAUAAAAFAAAAAAAAAAEAAAAAAAAAAAAAAMuhRbbsNlBBYqHW9OmHIkF9XBuqnS31QAK37uYhNMhAOSo3UUupm0DC+6pc6JxvQHV9eseEEEJAzURsCyqlFEB8BQ4NMJjnPyy3tBoS97o/xawXQznRjj89J2K2CZxhP6vX43RIIDQ/S8isgygEBz+LvFHQkmzaPjFFFO7wMq4+AADMLkTtjkIAAOgkJqxhQgAAU7B0MjRCAADwpBcVB0IAAACYP2HaQQAAAIn/Ja5BzczM4Eg6gUHNzMxMU7BTQTMzMzNfgCZBAAAAAEi3+UAAAAAAwGPNQDMzMzMzy6BAmpmZmZkxc0AzMzMzM/NFQDMzMzMzMxlAzczMzMzM7D+ygXSx2U6RQKimJOvQKnpA23hmONTHY0A/AGcxyudNQNb3K647mzZA+S56rrwWIUAm4kUQ+9UJQKre9hGzh/M/BLvoy9WG3T+LmqMf8VHGP2m3nYNV37A/gbFHcyeCmT+cBPWBckiDP61tZACjKW0/q2RbYVUYVj8uDypVyLNAP6jGS5cA5zBBwcqhBdCNGUEGEhQ/JVEDQT6WPnRbNO1AB/AWSJgT1kDfUWNCNLDAQNk+5C33OqlAchWL34QSk0DKvtDIrNV8QNF0G3kFzGVASSeWhBl6UED+/0mNGuk4QGjA/dm/1CJALPLPMql6DEDSHoDrwpP1P2jouzWST+A/egAAAAAAAABKAwAAAAAAAPoWAAAAAAAAyqAAAAAAAAB6ZQQAAAAAAErGHgAAAAAA+mvXAAAAAADK8+MFAAAAAHqqOykAAAAASqmhIAEAAAD6oGvkBwAAAMpm8T43AAAAes+ZuIIBAABKrDQMkwoAAPq1cFUFSgAAyvkUViUGAgAAAAAAAwAAAAYAAAACAAAABQAAAAEAAAAEAAAAAAAAAAAAAAAFAAAAAwAAAAEAAAAGAAAABAAAAAIAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAA/////wAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAP////8AAAAAAAAAAAEAAAABAAAAAAAAAAAAAAD/////AAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAABAAEAAAEBAAAAAAABAAAAAQAAAAEAAQAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAHAAAABwAAAAEAAAACAAAABAAAAAMAAAAAAAAAAAAAAAcAAAADAAAAAQAAAAIAAAAFAAAABAAAAAAAAAAAAAAAYWxnb3MuYwBfcG9seWZpbGxJbnRlcm5hbABhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0dlb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9HZW9Cb3VuZGFyeQBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGgzVG9Mb2NhbElqawBiYXNlQ2VsbCAhPSBvcmlnaW5CYXNlQ2VsbAAhKG9yaWdpbk9uUGVudCAmJiBpbmRleE9uUGVudCkAcGVudGFnb25Sb3RhdGlvbnMgPj0gMABkaXJlY3Rpb25Sb3RhdGlvbnMgPj0gMABiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvSDMAIV9pc0Jhc2VDZWxsUGVudGFnb24oYmFzZUNlbGwpAGJhc2VDZWxsUm90YXRpb25zID49IDAAd2l0aGluUGVudGFnb25Sb3RhdGlvbnMgPj0gMABncmFwaC0+YnVja2V0cyAhPSBOVUxMAHZlcnRleEdyYXBoLmMAaW5pdFZlcnRleEdyYXBoAG5vZGUgIT0gTlVMTABhZGRWZXJ0ZXhOb2Rl";var _a=24032;function Bo(Ee){return Ee}function Ka(Ee){var Be=/\b__Z[\w\d_]+/g;return Ee.replace(Be,function(tt){var wt=tt;return tt===wt?tt:wt+" ["+tt+"]"})}function Qs(){var Ee=new Error;if(!Ee.stack){try{throw new Error(0)}catch(Be){Ee=Be}if(!Ee.stack)return"(no stack trace available)"}return Ee.stack.toString()}function co(){var Ee=Qs();return r.extraStackTrace&&(Ee+=`
`+r.extraStackTrace()),Ka(Ee)}function fo(Ee,Be,tt,wt){Le("Assertion failed: "+V(Ee)+", at: "+[Be?V(Be):"unknown filename",tt,wt?V(wt):"unknown function"])}function fs(){return pe.length}function gu(Ee,Be,tt){je.set(je.subarray(Be,Be+tt),Ee)}function Hs(Ee){return r.___errno_location&&(ot[r.___errno_location()>>2]=Ee),Ee}function Ss(Ee){Le("OOM")}function Au(Ee){try{var Be=new ArrayBuffer(Ee);return Be.byteLength!=Ee?void 0:(new Int8Array(Be).set(pe),qt(Be),nr(Be),1)}catch{}}function yu(Ee){var Be=fs(),tt=16777216,wt=2147483648-tt;if(Ee>wt)return!1;for(var b=16777216,Mt=Math.max(Be,b);Mt<Ee;)Mt<=536870912?Mt=re(2*Mt,tt):Mt=Math.min(re((3*Mt+2147483648)/4,tt),wt);var Vt=Au(Mt);return!!Vt}var ra=typeof atob=="function"?atob:function(Ee){var Be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",tt="",wt,b,Mt,Vt,He,Bn,fn,Fr=0;Ee=Ee.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Vt=Be.indexOf(Ee.charAt(Fr++)),He=Be.indexOf(Ee.charAt(Fr++)),Bn=Be.indexOf(Ee.charAt(Fr++)),fn=Be.indexOf(Ee.charAt(Fr++)),wt=Vt<<2|He>>4,b=(He&15)<<4|Bn>>2,Mt=(Bn&3)<<6|fn,tt=tt+String.fromCharCode(wt),Bn!==64&&(tt=tt+String.fromCharCode(b)),fn!==64&&(tt=tt+String.fromCharCode(Mt));while(Fr<Ee.length);return tt};function ge(Ee){try{for(var Be=ra(Ee),tt=new Uint8Array(Be.length),wt=0;wt<Be.length;++wt)tt[wt]=Be.charCodeAt(wt);return tt}catch{throw new Error("Converting base64 string to bytes failed.")}}function Te(Ee){if(Gi(Ee))return ge(Ee.slice(Br.length))}var Oe={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},ze={a:Le,b:p,c:v,d:fo,e:Hs,f:fs,g:gu,h:yu,i:Ss,j:Bo,k:Ka,l:Au,m:Qs,n:co,o:_a,p:Ut},Ie=function(Ee,Be,tt){var wt=new Ee.Int8Array(tt),b=new Ee.Int32Array(tt),Mt=new Ee.Uint8Array(tt),Vt=new Ee.Float32Array(tt),He=new Ee.Float64Array(tt),Bn=Be.p|0,fn=Ee.Math.floor,Fr=Ee.Math.abs,yi=Ee.Math.sqrt,Oa=Ee.Math.pow,vn=Ee.Math.cos,Gr=Ee.Math.sin,$a=Ee.Math.tan,Vi=Ee.Math.acos,ua=Ee.Math.asin,Jo=Ee.Math.atan,to=Ee.Math.atan2,wo=Ee.Math.ceil,qo=Ee.Math.imul,ju=Ee.Math.min,fa=Ee.Math.clz32,Yn=Be.b,dt=Be.c,vi=Be.d,Ec=Be.e,Os=Be.f,Zi=Be.g,Wi=Be.h,Gu=Be.i,te=24048;function Ce(y){return wt=new Int8Array(y),Mt=new Uint8Array(y),b=new Int32Array(y),Vt=new Float32Array(y),He=new Float64Array(y),tt=y,!0}function rt(y){y=y|0;var w=0;return w=te,te=te+y|0,te=te+15&-16,w|0}function lt(){return te|0}function Rt(y){y=y|0,te=y}function Tt(y,w){y=y|0,w=w|0,te=y}function sr(y){return y=y|0,(qo(y*3|0,y+1|0)|0)+1|0}function Nr(y,w,C,M){y=y|0,w=w|0,C=C|0,M=M|0;var N=0,G=0;jn(y,w,C,M,0)|0&&(G=(qo(C*3|0,C+1|0)|0)+1|0,xa(M|0,0,G<<3|0)|0,N=io(G,4)|0,N&&(ha(y,w,C,M,N,G,0),ci(N)))}function ti(y,w,C,M,N){y=y|0,w=w|0,C=C|0,M=M|0,N=N|0;var G=0;if(jn(y,w,C,M,N)|0){if(G=(qo(C*3|0,C+1|0)|0)+1|0,xa(M|0,0,G<<3|0)|0,N|0){xa(N|0,0,G<<2|0)|0,ha(y,w,C,M,N,G,0);return}N=io(G,4)|0,N&&(ha(y,w,C,M,N,G,0),ci(N))}}function jn(y,w,C,M,N){y=y|0,w=w|0,C=C|0,M=M|0,N=N|0;var G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0,Ft=0;if(Ft=te,te=te+16|0,xt=Ft,G=M,b[G>>2]=y,b[G+4>>2]=w,G=(N|0)!=0,G&&(b[N>>2]=0),ei(y,w)|0)return xt=1,te=Ft,xt|0;b[xt>>2]=0;e:do if((C|0)>=1)if(G)for(we=0,Pe=1,ft=1,j=0,G=y;;){if(!(j|we)){if(G=Pi(G,w,4,xt)|0,w=dt()|0,(G|0)==0&(w|0)==0){G=2;break e}if(ei(G,w)|0){G=1;break e}}if(G=Pi(G,w,b[16+(we<<2)>>2]|0,xt)|0,w=dt()|0,(G|0)==0&(w|0)==0){G=2;break e}if(y=M+(ft<<3)|0,b[y>>2]=G,b[y+4>>2]=w,b[N+(ft<<2)>>2]=Pe,j=j+1|0,y=(j|0)==(Pe|0),Q=we+1|0,ue=(Q|0)==6,ei(G,w)|0){G=1;break e}if(Pe=Pe+(ue&y&1)|0,(Pe|0)>(C|0)){G=0;break}else we=y?ue?0:Q:we,ft=ft+1|0,j=y?0:j}else for(we=0,Pe=1,ft=1,j=0,G=y;;){if(!(j|we)){if(G=Pi(G,w,4,xt)|0,w=dt()|0,(G|0)==0&(w|0)==0){G=2;break e}if(ei(G,w)|0){G=1;break e}}if(G=Pi(G,w,b[16+(we<<2)>>2]|0,xt)|0,w=dt()|0,(G|0)==0&(w|0)==0){G=2;break e}if(y=M+(ft<<3)|0,b[y>>2]=G,b[y+4>>2]=w,j=j+1|0,y=(j|0)==(Pe|0),Q=we+1|0,ue=(Q|0)==6,ei(G,w)|0){G=1;break e}if(Pe=Pe+(ue&y&1)|0,(Pe|0)>(C|0)){G=0;break}else we=y?ue?0:Q:we,ft=ft+1|0,j=y?0:j}else G=0;while(0);return xt=G,te=Ft,xt|0}function ha(y,w,C,M,N,G,j){y=y|0,w=w|0,C=C|0,M=M|0,N=N|0,G=G|0,j=j|0;var Q=0,ue=0,we=0,Pe=0,ft=0,xt=0,Ft=0;if(ft=te,te=te+16|0,Pe=ft,(y|0)==0&(w|0)==0){te=ft;return}if(Q=ou(y|0,w|0,G|0,((G|0)<0)<<31>>31|0)|0,dt()|0,ue=M+(Q<<3)|0,xt=ue,Ft=b[xt>>2]|0,xt=b[xt+4>>2]|0,we=(Ft|0)==(y|0)&(xt|0)==(w|0),!((Ft|0)==0&(xt|0)==0|we))do Q=(Q+1|0)%(G|0)|0,ue=M+(Q<<3)|0,Ft=ue,xt=b[Ft>>2]|0,Ft=b[Ft+4>>2]|0,we=(xt|0)==(y|0)&(Ft|0)==(w|0);while(!((xt|0)==0&(Ft|0)==0|we));if(Q=N+(Q<<2)|0,we&&(b[Q>>2]|0)<=(j|0)){te=ft;return}if(Ft=ue,b[Ft>>2]=y,b[Ft+4>>2]=w,b[Q>>2]=j,(j|0)>=(C|0)){te=ft;return}Ft=j+1|0,b[Pe>>2]=0,xt=Pi(y,w,2,Pe)|0,ha(xt,dt()|0,C,M,N,G,Ft),b[Pe>>2]=0,xt=Pi(y,w,3,Pe)|0,ha(xt,dt()|0,C,M,N,G,Ft),b[Pe>>2]=0,xt=Pi(y,w,1,Pe)|0,ha(xt,dt()|0,C,M,N,G,Ft),b[Pe>>2]=0,xt=Pi(y,w,5,Pe)|0,ha(xt,dt()|0,C,M,N,G,Ft),b[Pe>>2]=0,xt=Pi(y,w,4,Pe)|0,ha(xt,dt()|0,C,M,N,G,Ft),b[Pe>>2]=0,xt=Pi(y,w,6,Pe)|0,ha(xt,dt()|0,C,M,N,G,Ft),te=ft}function Pi(y,w,C,M){y=y|0,w=w|0,C=C|0,M=M|0;var N=0,G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0,Ft=0;if((b[M>>2]|0)>0){N=0;do C=kr(C)|0,N=N+1|0;while((N|0)<(b[M>>2]|0))}Q=Mr(y|0,w|0,45)|0,dt()|0,ue=Q&127,G=Va(y,w)|0,N=Mr(y|0,w|0,52)|0,dt()|0,N=N&15;e:do if(!N)j=6;else for(;;){if(ft=(15-N|0)*3|0,xt=Mr(y|0,w|0,ft|0)|0,dt()|0,xt=xt&7,Ft=(xu(N)|0)==0,N=N+-1|0,Pe=on(7,0,ft|0)|0,w=w&~(dt()|0),ft=on(b[(Ft?464:48)+(xt*28|0)+(C<<2)>>2]|0,0,ft|0)|0,we=dt()|0,C=b[(Ft?672:256)+(xt*28|0)+(C<<2)>>2]|0,y=ft|y&~Pe,w=we|w,!C){C=0;break e}if(!N){j=6;break}}while(0);(j|0)==6&&(Ft=b[880+(ue*28|0)+(C<<2)>>2]|0,xt=on(Ft|0,0,45)|0,y=xt|y,w=dt()|0|w&-1040385,C=b[4304+(ue*28|0)+(C<<2)>>2]|0,(Ft&127|0)==127&&(Ft=on(b[880+(ue*28|0)+20>>2]|0,0,45)|0,w=dt()|0|w&-1040385,C=b[4304+(ue*28|0)+20>>2]|0,y=Is(Ft|y,w)|0,w=dt()|0,b[M>>2]=(b[M>>2]|0)+1)),j=Mr(y|0,w|0,45)|0,dt()|0,j=j&127;e:do if(Ma(j)|0){t:do if((Va(y,w)|0)==1){if((ue|0)!=(j|0))if(iu(j,b[7728+(ue*28|0)>>2]|0)|0){y=Mc(y,w)|0,G=1,w=dt()|0;break}else{y=Is(y,w)|0,G=1,w=dt()|0;break}switch(G|0){case 5:{y=Mc(y,w)|0,w=dt()|0,b[M>>2]=(b[M>>2]|0)+5,G=0;break t}case 3:{y=Is(y,w)|0,w=dt()|0,b[M>>2]=(b[M>>2]|0)+1,G=0;break t}default:return xt=0,Ft=0,Yn(xt|0),Ft|0}}else G=0;while(0);if((C|0)>0){N=0;do y=Oc(y,w)|0,w=dt()|0,N=N+1|0;while((N|0)!=(C|0))}if((ue|0)!=(j|0)){if(!(ic(j)|0)){if((G|0)!=0|(Va(y,w)|0)!=5)break;b[M>>2]=(b[M>>2]|0)+1;break}switch(Q&127){case 8:case 118:break e;default:}(Va(y,w)|0)!=3&&(b[M>>2]=(b[M>>2]|0)+1)}}else if((C|0)>0){N=0;do y=Is(y,w)|0,w=dt()|0,N=N+1|0;while((N|0)!=(C|0))}while(0);return b[M>>2]=((b[M>>2]|0)+C|0)%6|0,xt=w,Ft=y,Yn(xt|0),Ft|0}function Ws(y,w,C,M){y=y|0,w=w|0,C=C|0,M=M|0;var N=0,G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0;if(ft=te,te=te+16|0,Pe=ft,!C)return Pe=M,b[Pe>>2]=y,b[Pe+4>>2]=w,Pe=0,te=ft,Pe|0;b[Pe>>2]=0;e:do if(ei(y,w)|0)y=1;else{if(G=(C|0)>0,G){N=0,we=y;do{if(we=Pi(we,w,4,Pe)|0,w=dt()|0,(we|0)==0&(w|0)==0){y=2;break e}if(N=N+1|0,ei(we,w)|0){y=1;break e}}while((N|0)<(C|0));if(ue=M,b[ue>>2]=we,b[ue+4>>2]=w,ue=C+-1|0,G){G=0,j=1,N=we,y=w;do{if(N=Pi(N,y,2,Pe)|0,y=dt()|0,(N|0)==0&(y|0)==0){y=2;break e}if(Q=M+(j<<3)|0,b[Q>>2]=N,b[Q+4>>2]=y,j=j+1|0,ei(N,y)|0){y=1;break e}G=G+1|0}while((G|0)<(C|0));Q=0,G=j;do{if(N=Pi(N,y,3,Pe)|0,y=dt()|0,(N|0)==0&(y|0)==0){y=2;break e}if(j=M+(G<<3)|0,b[j>>2]=N,b[j+4>>2]=y,G=G+1|0,ei(N,y)|0){y=1;break e}Q=Q+1|0}while((Q|0)<(C|0));j=0;do{if(N=Pi(N,y,1,Pe)|0,y=dt()|0,(N|0)==0&(y|0)==0){y=2;break e}if(Q=M+(G<<3)|0,b[Q>>2]=N,b[Q+4>>2]=y,G=G+1|0,ei(N,y)|0){y=1;break e}j=j+1|0}while((j|0)<(C|0));j=0;do{if(N=Pi(N,y,5,Pe)|0,y=dt()|0,(N|0)==0&(y|0)==0){y=2;break e}if(Q=M+(G<<3)|0,b[Q>>2]=N,b[Q+4>>2]=y,G=G+1|0,ei(N,y)|0){y=1;break e}j=j+1|0}while((j|0)<(C|0));j=0;do{if(N=Pi(N,y,4,Pe)|0,y=dt()|0,(N|0)==0&(y|0)==0){y=2;break e}if(Q=M+(G<<3)|0,b[Q>>2]=N,b[Q+4>>2]=y,G=G+1|0,ei(N,y)|0){y=1;break e}j=j+1|0}while((j|0)<(C|0));for(j=0;;){if(N=Pi(N,y,6,Pe)|0,y=dt()|0,(N|0)==0&(y|0)==0){y=2;break e}if((j|0)!=(ue|0))if(Q=M+(G<<3)|0,b[Q>>2]=N,b[Q+4>>2]=y,!(ei(N,y)|0))G=G+1|0;else{y=1;break e}if(j=j+1|0,(j|0)>=(C|0)){j=we,G=w;break}}}else j=we,N=we,G=w,y=w}else j=M,b[j>>2]=y,b[j+4>>2]=w,j=y,N=y,G=w,y=w;y=((j|0)!=(N|0)|(G|0)!=(y|0))&1}while(0);return Pe=y,te=ft,Pe|0}function vl(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0,Q=0;if(G=te,te=te+48|0,N=G+8|0,M=G,Q=y,j=b[Q+4>>2]|0,C=M,b[C>>2]=b[Q>>2],b[C+4>>2]=j,Lt(M,N),N=Vu(N,w)|0,w=b[M>>2]|0,M=b[y+8>>2]|0,(M|0)<=0)return Q=w,j=(N|0)<(Q|0),Q=j?Q:N,Q=Q+12|0,te=G,Q|0;C=b[y+12>>2]|0,y=0;do w=(b[C+(y<<3)>>2]|0)+w|0,y=y+1|0;while((y|0)<(M|0));return Q=(N|0)<(w|0),Q=Q?w:N,Q=Q+12|0,te=G,Q|0}function Fp(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0,Q=0,ue=0;if(Q=te,te=te+48|0,M=Q+8|0,N=Q,!(Nf(y,w,C)|0)){te=Q;return}if(ue=y,G=b[ue+4>>2]|0,j=N,b[j>>2]=b[ue>>2],b[j+4>>2]=G,Lt(N,M),j=Vu(M,w)|0,w=b[N>>2]|0,G=b[y+8>>2]|0,(G|0)>0){N=b[y+12>>2]|0,M=0;do w=(b[N+(M<<3)>>2]|0)+w|0,M=M+1|0;while((M|0)!=(G|0))}if(w=(j|0)<(w|0)?w:j,(w|0)<=-12){te=Q;return}ue=w+11|0,xa(C|0,0,(((ue|0)>0?ue:0)<<3)+8|0)|0,te=Q}function Nf(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0,Ft=0,tr=0,hr=0,Vr=0,_n=0,rr=0,Ir=0,Ct=0,An=0,Sn=0,Qr=0,mn=0,fi=0,ma=0,wa=0,Ja=0,va=0,vo=0,go=0,wi=0;if(wi=te,te=te+112|0,Ja=wi+80|0,ue=wi+72|0,va=wi,vo=wi+56|0,we=y+8|0,go=no((b[we>>2]<<5)+32|0)|0,go||vi(22848,22448,800,22456),Jt(y,go),G=y,M=b[G+4>>2]|0,Q=ue,b[Q>>2]=b[G>>2],b[Q+4>>2]=M,Lt(ue,Ja),Q=Vu(Ja,w)|0,M=b[ue>>2]|0,G=b[we>>2]|0,(G|0)>0){j=b[y+12>>2]|0,N=0;do M=(b[j+(N<<3)>>2]|0)+M|0,N=N+1|0;while((N|0)!=(G|0))}if(Q=(Q|0)<(M|0)?M:Q,wa=Q+12|0,N=io(wa,8)|0,Pe=io(wa,8)|0,b[Ja>>2]=0,fi=y,ma=b[fi+4>>2]|0,M=ue,b[M>>2]=b[fi>>2],b[M+4>>2]=ma,M=vs(ue,wa,w,Ja,N,Pe)|0,M|0)return ci(N),ci(Pe),ci(go),go=M,te=wi,go|0;e:do if((b[we>>2]|0)>0){for(G=y+12|0,M=0;j=vs((b[G>>2]|0)+(M<<3)|0,wa,w,Ja,N,Pe)|0,M=M+1|0,!(j|0);)if((M|0)>=(b[we>>2]|0))break e;return ci(N),ci(Pe),ci(go),go=j,te=wi,go|0}while(0);(Q|0)>-12&&xa(Pe|0,0,((wa|0)>1?wa:1)<<3|0)|0;e:do if((b[Ja>>2]|0)>0){ma=((wa|0)<0)<<31>>31,Ct=N,An=Pe,Sn=N,Qr=N,mn=Pe,fi=N,M=N,Vr=N,_n=Pe,rr=Pe,Ir=Pe,N=Pe;t:for(;;){for(hr=b[Ja>>2]|0,Ft=0,tr=0,G=0;;){j=va,Q=j+56|0;do b[j>>2]=0,j=j+4|0;while((j|0)<(Q|0));if(w=Ct+(Ft<<3)|0,ue=b[w>>2]|0,w=b[w+4>>2]|0,jn(ue,w,1,va,0)|0){j=va,Q=j+56|0;do b[j>>2]=0,j=j+4|0;while((j|0)<(Q|0));j=io(7,4)|0,j|0&&(ha(ue,w,1,va,j,7,0),ci(j))}xt=0;do{ft=va+(xt<<3)|0,Pe=b[ft>>2]|0,ft=b[ft+4>>2]|0;r:do if(!((Pe|0)==0&(ft|0)==0)){if(ue=ou(Pe|0,ft|0,wa|0,ma|0)|0,dt()|0,j=C+(ue<<3)|0,Q=j,w=b[Q>>2]|0,Q=b[Q+4>>2]|0,!((w|0)==0&(Q|0)==0))for(we=0;;){if((we|0)>(wa|0))break t;if((w|0)==(Pe|0)&(Q|0)==(ft|0))break r;if(ue=(ue+1|0)%(wa|0)|0,j=C+(ue<<3)|0,Q=j,w=b[Q>>2]|0,Q=b[Q+4>>2]|0,(w|0)==0&(Q|0)==0)break;we=we+1|0}(Pe|0)==0&(ft|0)==0||(wu(Pe,ft,vo),Ht(y,go,vo)|0&&(we=j,b[we>>2]=Pe,b[we+4>>2]=ft,we=An+(G<<3)|0,b[we>>2]=Pe,b[we+4>>2]=ft,G=G+1|0))}while(0);xt=xt+1|0}while(xt>>>0<7);if(tr=tr+1|0,(tr|0)>=(hr|0))break;Ft=Ft+1|0}if((hr|0)>0&&xa(Sn|0,0,hr<<3|0)|0,b[Ja>>2]=G,(G|0)>0)Pe=N,ft=Ir,xt=fi,Ft=rr,tr=_n,hr=An,N=Vr,Ir=M,rr=Qr,_n=Sn,Vr=Pe,M=ft,fi=mn,mn=xt,Qr=Ft,Sn=tr,An=Ct,Ct=hr;else break e}return ci(Qr),ci(mn),ci(go),go=-1,te=wi,go|0}else M=Pe;while(0);return ci(go),ci(N),ci(M),go=0,te=wi,go|0}function vs(y,w,C,M,N,G){y=y|0,w=w|0,C=C|0,M=M|0,N=N|0,G=G|0;var j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0,Ft=0,tr=0,hr=0,Vr=0,_n=0,rr=0,Ir=0,Ct=0,An=0,Sn=0,Qr=0,mn=0,fi=0,ma=0,wa=0,Ja=0;if(ma=te,te=te+48|0,Sn=ma+32|0,Qr=ma+16|0,mn=ma,j=b[y>>2]|0,(j|0)<=0)return fi=0,te=ma,fi|0;_n=y+4|0,rr=Sn+8|0,Ir=Qr+8|0,Ct=mn+8|0,An=((w|0)<0)<<31>>31,Vr=0;e:for(;;){Q=b[_n>>2]|0,tr=Q+(Vr<<4)|0,b[Sn>>2]=b[tr>>2],b[Sn+4>>2]=b[tr+4>>2],b[Sn+8>>2]=b[tr+8>>2],b[Sn+12>>2]=b[tr+12>>2],(Vr|0)==(j+-1|0)?(b[Qr>>2]=b[Q>>2],b[Qr+4>>2]=b[Q+4>>2],b[Qr+8>>2]=b[Q+8>>2],b[Qr+12>>2]=b[Q+12>>2]):(tr=Q+(Vr+1<<4)|0,b[Qr>>2]=b[tr>>2],b[Qr+4>>2]=b[tr+4>>2],b[Qr+8>>2]=b[tr+8>>2],b[Qr+12>>2]=b[tr+12>>2]),tr=ba(Sn,Qr,C)|0;t:do if((tr|0)>0){hr=+(tr|0),Ft=0;r:for(;;){Ja=+(tr-Ft|0),wa=+(Ft|0),He[mn>>3]=+He[Sn>>3]*Ja/hr+ +He[Qr>>3]*wa/hr,He[Ct>>3]=+He[rr>>3]*Ja/hr+ +He[Ir>>3]*wa/hr,ft=lf(mn,C)|0,xt=dt()|0,Q=ou(ft|0,xt|0,w|0,An|0)|0,dt()|0,j=G+(Q<<3)|0,ue=j,we=b[ue>>2]|0,ue=b[ue+4>>2]|0;n:do if((we|0)==0&(ue|0)==0)fi=14;else for(Pe=0;;){if((Pe|0)>(w|0)){j=1;break n}if((we|0)==(ft|0)&(ue|0)==(xt|0)){j=7;break n}if(Q=(Q+1|0)%(w|0)|0,j=G+(Q<<3)|0,ue=j,we=b[ue>>2]|0,ue=b[ue+4>>2]|0,(we|0)==0&(ue|0)==0){fi=14;break}else Pe=Pe+1|0}while(0);switch((fi|0)==14&&(fi=0,(ft|0)==0&(xt|0)==0?j=7:(b[j>>2]=ft,b[j+4>>2]=xt,j=b[M>>2]|0,Pe=N+(j<<3)|0,b[Pe>>2]=ft,b[Pe+4>>2]=xt,b[M>>2]=j+1,j=0)),j&7){case 7:case 0:break;default:break r}if(Ft=Ft+1|0,(tr|0)<=(Ft|0)){fi=8;break t}}if(j|0){j=-1,fi=20;break e}}else fi=8;while(0);if((fi|0)==8&&(fi=0),Vr=Vr+1|0,j=b[y>>2]|0,(Vr|0)>=(j|0)){j=0,fi=20;break}}return(fi|0)==20?(te=ma,j|0):0}function nu(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0,Q=0,ue=0,we=0;if(we=te,te=te+176|0,ue=we,(w|0)<1){ri(C,0,0),te=we;return}j=y,j=Mr(b[j>>2]|0,b[j+4>>2]|0,52)|0,dt()|0,ri(C,(w|0)>6?w:6,j&15),j=0;do{if(M=y+(j<<3)|0,Tu(b[M>>2]|0,b[M+4>>2]|0,ue),M=b[ue>>2]|0,(M|0)>0){Q=0;do G=ue+8+(Q<<4)|0,Q=Q+1|0,M=ue+8+(((Q|0)%(M|0)|0)<<4)|0,N=Rs(C,M,G)|0,N?Do(C,N)|0:mo(C,G,M)|0,M=b[ue>>2]|0;while((Q|0)<(M|0))}j=j+1|0}while((j|0)!=(w|0));te=we}function nf(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0;if(G=te,te=te+32|0,M=G,N=G+16|0,nu(y,w,N),b[C>>2]=0,b[C+4>>2]=0,b[C+8>>2]=0,y=zn(N)|0,!y){fe(C)|0,Gn(N),te=G;return}do{w=q(C)|0;do K(w,y)|0,j=y+16|0,b[M>>2]=b[j>>2],b[M+4>>2]=b[j+4>>2],b[M+8>>2]=b[j+8>>2],b[M+12>>2]=b[j+12>>2],Do(N,y)|0,y=ns(N,M)|0;while(y|0);y=zn(N)|0}while(y|0);fe(C)|0,Gn(N),te=G}function Ma(y){return y=y|0,b[7728+(y*28|0)+16>>2]|0}function ic(y){return y=y|0,(y|0)==4|(y|0)==117|0}function Np(y){return y=y|0,b[11152+((b[y>>2]|0)*216|0)+((b[y+4>>2]|0)*72|0)+((b[y+8>>2]|0)*24|0)+(b[y+12>>2]<<3)>>2]|0}function pa(y){return y=y|0,b[11152+((b[y>>2]|0)*216|0)+((b[y+4>>2]|0)*72|0)+((b[y+8>>2]|0)*24|0)+(b[y+12>>2]<<3)+4>>2]|0}function Cc(y,w){y=y|0,w=w|0,y=7728+(y*28|0)|0,b[w>>2]=b[y>>2],b[w+4>>2]=b[y+4>>2],b[w+8>>2]=b[y+8>>2],b[w+12>>2]=b[y+12>>2]}function bu(y,w){y=y|0,w=w|0;var C=0,M=0;if(w>>>0>20)return w=-1,w|0;do if((b[11152+(w*216|0)>>2]|0)!=(y|0))if((b[11152+(w*216|0)+8>>2]|0)!=(y|0))if((b[11152+(w*216|0)+16>>2]|0)!=(y|0))if((b[11152+(w*216|0)+24>>2]|0)!=(y|0))if((b[11152+(w*216|0)+32>>2]|0)!=(y|0))if((b[11152+(w*216|0)+40>>2]|0)!=(y|0))if((b[11152+(w*216|0)+48>>2]|0)!=(y|0))if((b[11152+(w*216|0)+56>>2]|0)!=(y|0))if((b[11152+(w*216|0)+64>>2]|0)!=(y|0))if((b[11152+(w*216|0)+72>>2]|0)!=(y|0))if((b[11152+(w*216|0)+80>>2]|0)!=(y|0))if((b[11152+(w*216|0)+88>>2]|0)!=(y|0))if((b[11152+(w*216|0)+96>>2]|0)!=(y|0))if((b[11152+(w*216|0)+104>>2]|0)!=(y|0))if((b[11152+(w*216|0)+112>>2]|0)!=(y|0))if((b[11152+(w*216|0)+120>>2]|0)!=(y|0))if((b[11152+(w*216|0)+128>>2]|0)!=(y|0))if((b[11152+(w*216|0)+136>>2]|0)==(y|0))y=2,C=1,M=2;else{if((b[11152+(w*216|0)+144>>2]|0)==(y|0)){y=0,C=2,M=0;break}if((b[11152+(w*216|0)+152>>2]|0)==(y|0)){y=0,C=2,M=1;break}if((b[11152+(w*216|0)+160>>2]|0)==(y|0)){y=0,C=2,M=2;break}if((b[11152+(w*216|0)+168>>2]|0)==(y|0)){y=1,C=2,M=0;break}if((b[11152+(w*216|0)+176>>2]|0)==(y|0)){y=1,C=2,M=1;break}if((b[11152+(w*216|0)+184>>2]|0)==(y|0)){y=1,C=2,M=2;break}if((b[11152+(w*216|0)+192>>2]|0)==(y|0)){y=2,C=2,M=0;break}if((b[11152+(w*216|0)+200>>2]|0)==(y|0)){y=2,C=2,M=1;break}if((b[11152+(w*216|0)+208>>2]|0)==(y|0)){y=2,C=2,M=2;break}else y=-1;return y|0}else y=2,C=1,M=1;else y=2,C=1,M=0;else y=1,C=1,M=2;else y=1,C=1,M=1;else y=1,C=1,M=0;else y=0,C=1,M=2;else y=0,C=1,M=1;else y=0,C=1,M=0;else y=2,C=0,M=2;else y=2,C=0,M=1;else y=2,C=0,M=0;else y=1,C=0,M=2;else y=1,C=0,M=1;else y=1,C=0,M=0;else y=0,C=0,M=2;else y=0,C=0,M=1;else y=0,C=0,M=0;while(0);return w=b[11152+(w*216|0)+(C*72|0)+(y*24|0)+(M<<3)+4>>2]|0,w|0}function iu(y,w){return y=y|0,w=w|0,(b[7728+(y*28|0)+20>>2]|0)==(w|0)?(w=1,w|0):(w=(b[7728+(y*28|0)+24>>2]|0)==(w|0),w|0)}function kl(y,w){return y=y|0,w=w|0,b[880+(y*28|0)+(w<<2)>>2]|0}function Pc(y,w){return y=y|0,w=w|0,(b[880+(y*28|0)>>2]|0)==(w|0)?(w=0,w|0):(b[880+(y*28|0)+4>>2]|0)==(w|0)?(w=1,w|0):(b[880+(y*28|0)+8>>2]|0)==(w|0)?(w=2,w|0):(b[880+(y*28|0)+12>>2]|0)==(w|0)?(w=3,w|0):(b[880+(y*28|0)+16>>2]|0)==(w|0)?(w=4,w|0):(b[880+(y*28|0)+20>>2]|0)==(w|0)?(w=5,w|0):((b[880+(y*28|0)+24>>2]|0)==(w|0)?6:7)|0}function Lh(){return 122}function kh(y){y=y|0;var w=0,C=0,M=0;w=0;do on(w|0,0,45)|0,M=dt()|0|134225919,C=y+(w<<3)|0,b[C>>2]=-1,b[C+4>>2]=M,w=w+1|0;while((w|0)!=122)}function ac(y){return y=y|0,+He[y+16>>3]<+He[y+24>>3]|0}function gl(y,w){y=y|0,w=w|0;var C=0,M=0,N=0;return C=+He[w>>3],!(C>=+He[y+8>>3])||!(C<=+He[y>>3])?(w=0,w|0):(M=+He[y+16>>3],C=+He[y+24>>3],N=+He[w+8>>3],w=N>=C,y=N<=M&1,M<C?w&&(y=1):w||(y=0),w=(y|0)!=0,w|0)}function Vu(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0,Q=0,ue=0,we=0;j=te,te=te+288|0,C=j+264|0,M=j+96|0,N=j,G=N,Q=G+96|0;do b[G>>2]=0,G=G+4|0;while((G|0)<(Q|0));return zh(w,N),G=N,Q=b[G>>2]|0,G=b[G+4>>2]|0,wu(Q,G,C),Tu(Q,G,M),ue=+of(C,M+8|0),He[C>>3]=+He[y>>3],G=C+8|0,He[G>>3]=+He[y+16>>3],He[M>>3]=+He[y+8>>3],Q=M+8|0,He[Q>>3]=+He[y+24>>3],we=+of(C,M),Q=~~+wo(+(we*we/+xl(+ +Fr(+((+He[G>>3]-+He[Q>>3])/(+He[C>>3]-+He[M>>3]))),3)/(ue*(ue*2.59807621135)*.8))),te=j,(Q|0?Q:1)|0}function ba(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0,Q=0,ue=0,we=0;Q=te,te=te+288|0,M=Q+264|0,N=Q+96|0,G=Q,j=G,ue=j+96|0;do b[j>>2]=0,j=j+4|0;while((j|0)<(ue|0));return zh(C,G),ue=G,j=b[ue>>2]|0,ue=b[ue+4>>2]|0,wu(j,ue,M),Tu(j,ue,N),we=+of(M,N+8|0),ue=~~+wo(+(+of(y,w)/(we*2))),te=Q,(ue|0?ue:1)|0}function oc(y,w,C,M){y=y|0,w=w|0,C=C|0,M=M|0,b[y>>2]=w,b[y+4>>2]=C,b[y+8>>2]=M}function tl(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0;ft=w+8|0,b[ft>>2]=0,ue=+He[y>>3],j=+Fr(+ue),we=+He[y+8>>3],Q=+Fr(+we)/.8660254037844386,j=j+Q*.5,C=~~j,y=~~Q,j=j-+(C|0),Q=Q-+(y|0);do if(j<.5)if(j<.3333333333333333)if(b[w>>2]=C,Q<(j+1)*.5){b[w+4>>2]=y;break}else{y=y+1|0,b[w+4>>2]=y;break}else if(xt=1-j,y=(!(Q<xt)&1)+y|0,b[w+4>>2]=y,xt<=Q&Q<j*2){C=C+1|0,b[w>>2]=C;break}else{b[w>>2]=C;break}else{if(!(j<.6666666666666666))if(C=C+1|0,b[w>>2]=C,Q<j*.5){b[w+4>>2]=y;break}else{y=y+1|0,b[w+4>>2]=y;break}if(Q<1-j){if(b[w+4>>2]=y,j*2+-1<Q){b[w>>2]=C;break}}else y=y+1|0,b[w+4>>2]=y;C=C+1|0,b[w>>2]=C}while(0);do if(ue<0)if(y&1){Pe=(y+1|0)/2|0,Pe=Ys(C|0,((C|0)<0)<<31>>31|0,Pe|0,((Pe|0)<0)<<31>>31|0)|0,C=~~(+(C|0)-((+(Pe>>>0)+4294967296*+(dt()|0))*2+1)),b[w>>2]=C;break}else{Pe=(y|0)/2|0,Pe=Ys(C|0,((C|0)<0)<<31>>31|0,Pe|0,((Pe|0)<0)<<31>>31|0)|0,C=~~(+(C|0)-(+(Pe>>>0)+4294967296*+(dt()|0))*2),b[w>>2]=C;break}while(0);Pe=w+4|0,we<0&&(C=C-((y<<1|1|0)/2|0)|0,b[w>>2]=C,y=0-y|0,b[Pe>>2]=y),M=y-C|0,(C|0)<0?(N=0-C|0,b[Pe>>2]=M,b[ft>>2]=N,b[w>>2]=0,y=M,C=0):N=0,(y|0)<0&&(C=C-y|0,b[w>>2]=C,N=N-y|0,b[ft>>2]=N,b[Pe>>2]=0,y=0),G=C-N|0,M=y-N|0,(N|0)<0&&(b[w>>2]=G,b[Pe>>2]=M,b[ft>>2]=0,y=M,C=G,N=0),M=(y|0)<(C|0)?y:C,M=(N|0)<(M|0)?N:M,!((M|0)<=0)&&(b[w>>2]=C-M,b[Pe>>2]=y-M,b[ft>>2]=N-M)}function ja(y){y=y|0;var w=0,C=0,M=0,N=0,G=0,j=0;w=b[y>>2]|0,j=y+4|0,C=b[j>>2]|0,(w|0)<0&&(C=C-w|0,b[j>>2]=C,G=y+8|0,b[G>>2]=(b[G>>2]|0)-w,b[y>>2]=0,w=0),(C|0)<0?(w=w-C|0,b[y>>2]=w,G=y+8|0,N=(b[G>>2]|0)-C|0,b[G>>2]=N,b[j>>2]=0,C=0):(N=y+8|0,G=N,N=b[N>>2]|0),(N|0)<0&&(w=w-N|0,b[y>>2]=w,C=C-N|0,b[j>>2]=C,b[G>>2]=0,N=0),M=(C|0)<(w|0)?C:w,M=(N|0)<(M|0)?N:M,!((M|0)<=0)&&(b[y>>2]=w-M,b[j>>2]=C-M,b[G>>2]=N-M)}function ui(y,w){y=y|0,w=w|0;var C=0,M=0;M=b[y+8>>2]|0,C=+((b[y+4>>2]|0)-M|0),He[w>>3]=+((b[y>>2]|0)-M|0)-C*.5,He[w+8>>3]=C*.8660254037844386}function mi(y,w,C){y=y|0,w=w|0,C=C|0,b[C>>2]=(b[w>>2]|0)+(b[y>>2]|0),b[C+4>>2]=(b[w+4>>2]|0)+(b[y+4>>2]|0),b[C+8>>2]=(b[w+8>>2]|0)+(b[y+8>>2]|0)}function Qo(y,w,C){y=y|0,w=w|0,C=C|0,b[C>>2]=(b[y>>2]|0)-(b[w>>2]|0),b[C+4>>2]=(b[y+4>>2]|0)-(b[w+4>>2]|0),b[C+8>>2]=(b[y+8>>2]|0)-(b[w+8>>2]|0)}function Bl(y,w){y=y|0,w=w|0;var C=0,M=0;C=qo(b[y>>2]|0,w)|0,b[y>>2]=C,C=y+4|0,M=qo(b[C>>2]|0,w)|0,b[C>>2]=M,y=y+8|0,w=qo(b[y>>2]|0,w)|0,b[y>>2]=w}function Al(y){y=y|0;var w=0,C=0,M=0,N=0,G=0,j=0,Q=0;j=b[y>>2]|0,Q=(j|0)<0,M=(b[y+4>>2]|0)-(Q?j:0)|0,G=(M|0)<0,N=(G?0-M|0:0)+((b[y+8>>2]|0)-(Q?j:0))|0,C=(N|0)<0,y=C?0:N,w=(G?0:M)-(C?N:0)|0,N=(Q?0:j)-(G?M:0)-(C?N:0)|0,C=(w|0)<(N|0)?w:N,C=(y|0)<(C|0)?y:C,M=(C|0)>0,y=y-(M?C:0)|0,w=w-(M?C:0)|0;e:do switch(N-(M?C:0)|0){case 0:switch(w|0){case 0:return Q=y|0?(y|0)==1?1:7:0,Q|0;case 1:return Q=y|0?(y|0)==1?3:7:2,Q|0;default:break e}case 1:switch(w|0){case 0:return Q=y|0?(y|0)==1?5:7:4,Q|0;case 1:{if(!y)y=6;else break e;return y|0}default:break e}default:}while(0);return Q=7,Q|0}function Ue(y){y=y|0;var w=0,C=0,M=0,N=0,G=0,j=0,Q=0;j=y+8|0,C=b[j>>2]|0,w=(b[y>>2]|0)-C|0,Q=y+4|0,C=(b[Q>>2]|0)-C|0,M=Ls(+((w*3|0)-C|0)/7)|0,b[y>>2]=M,w=Ls(+((C<<1)+w|0)/7)|0,b[Q>>2]=w,b[j>>2]=0,C=w-M|0,(M|0)<0?(G=0-M|0,b[Q>>2]=C,b[j>>2]=G,b[y>>2]=0,w=C,M=0,C=G):C=0,(w|0)<0&&(M=M-w|0,b[y>>2]=M,C=C-w|0,b[j>>2]=C,b[Q>>2]=0,w=0),G=M-C|0,N=w-C|0,(C|0)<0?(b[y>>2]=G,b[Q>>2]=N,b[j>>2]=0,w=N,N=G,C=0):N=M,M=(w|0)<(N|0)?w:N,M=(C|0)<(M|0)?C:M,!((M|0)<=0)&&(b[y>>2]=N-M,b[Q>>2]=w-M,b[j>>2]=C-M)}function ht(y){y=y|0;var w=0,C=0,M=0,N=0,G=0,j=0,Q=0;j=y+8|0,C=b[j>>2]|0,w=(b[y>>2]|0)-C|0,Q=y+4|0,C=(b[Q>>2]|0)-C|0,M=Ls(+((w<<1)+C|0)/7)|0,b[y>>2]=M,w=Ls(+((C*3|0)-w|0)/7)|0,b[Q>>2]=w,b[j>>2]=0,C=w-M|0,(M|0)<0?(G=0-M|0,b[Q>>2]=C,b[j>>2]=G,b[y>>2]=0,w=C,M=0,C=G):C=0,(w|0)<0&&(M=M-w|0,b[y>>2]=M,C=C-w|0,b[j>>2]=C,b[Q>>2]=0,w=0),G=M-C|0,N=w-C|0,(C|0)<0?(b[y>>2]=G,b[Q>>2]=N,b[j>>2]=0,w=N,N=G,C=0):N=M,M=(w|0)<(N|0)?w:N,M=(C|0)<(M|0)?C:M,!((M|0)<=0)&&(b[y>>2]=N-M,b[Q>>2]=w-M,b[j>>2]=C-M)}function St(y){y=y|0;var w=0,C=0,M=0,N=0,G=0,j=0,Q=0;w=b[y>>2]|0,j=y+4|0,C=b[j>>2]|0,Q=y+8|0,M=b[Q>>2]|0,N=C+(w*3|0)|0,b[y>>2]=N,C=M+(C*3|0)|0,b[j>>2]=C,w=(M*3|0)+w|0,b[Q>>2]=w,M=C-N|0,(N|0)<0?(w=w-N|0,b[j>>2]=M,b[Q>>2]=w,b[y>>2]=0,C=M,M=0):M=N,(C|0)<0&&(M=M-C|0,b[y>>2]=M,w=w-C|0,b[Q>>2]=w,b[j>>2]=0,C=0),G=M-w|0,N=C-w|0,(w|0)<0?(b[y>>2]=G,b[j>>2]=N,b[Q>>2]=0,M=G,w=0):N=C,C=(N|0)<(M|0)?N:M,C=(w|0)<(C|0)?w:C,!((C|0)<=0)&&(b[y>>2]=M-C,b[j>>2]=N-C,b[Q>>2]=w-C)}function ar(y){y=y|0;var w=0,C=0,M=0,N=0,G=0,j=0,Q=0;N=b[y>>2]|0,j=y+4|0,w=b[j>>2]|0,Q=y+8|0,C=b[Q>>2]|0,M=(w*3|0)+N|0,N=C+(N*3|0)|0,b[y>>2]=N,b[j>>2]=M,w=(C*3|0)+w|0,b[Q>>2]=w,C=M-N|0,(N|0)<0?(w=w-N|0,b[j>>2]=C,b[Q>>2]=w,b[y>>2]=0,N=0):C=M,(C|0)<0&&(N=N-C|0,b[y>>2]=N,w=w-C|0,b[Q>>2]=w,b[j>>2]=0,C=0),G=N-w|0,M=C-w|0,(w|0)<0?(b[y>>2]=G,b[j>>2]=M,b[Q>>2]=0,N=G,w=0):M=C,C=(M|0)<(N|0)?M:N,C=(w|0)<(C|0)?w:C,!((C|0)<=0)&&(b[y>>2]=N-C,b[j>>2]=M-C,b[Q>>2]=w-C)}function kt(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0,Q=0;(w+-1|0)>>>0>=6||(N=(b[15472+(w*12|0)>>2]|0)+(b[y>>2]|0)|0,b[y>>2]=N,Q=y+4|0,M=(b[15472+(w*12|0)+4>>2]|0)+(b[Q>>2]|0)|0,b[Q>>2]=M,j=y+8|0,w=(b[15472+(w*12|0)+8>>2]|0)+(b[j>>2]|0)|0,b[j>>2]=w,C=M-N|0,(N|0)<0?(w=w-N|0,b[Q>>2]=C,b[j>>2]=w,b[y>>2]=0,M=0):(C=M,M=N),(C|0)<0&&(M=M-C|0,b[y>>2]=M,w=w-C|0,b[j>>2]=w,b[Q>>2]=0,C=0),G=M-w|0,N=C-w|0,(w|0)<0?(b[y>>2]=G,b[Q>>2]=N,b[j>>2]=0,M=G,w=0):N=C,C=(N|0)<(M|0)?N:M,C=(w|0)<(C|0)?w:C,!((C|0)<=0)&&(b[y>>2]=M-C,b[Q>>2]=N-C,b[j>>2]=w-C))}function fr(y){y=y|0;var w=0,C=0,M=0,N=0,G=0,j=0,Q=0;N=b[y>>2]|0,j=y+4|0,w=b[j>>2]|0,Q=y+8|0,C=b[Q>>2]|0,M=w+N|0,N=C+N|0,b[y>>2]=N,b[j>>2]=M,w=C+w|0,b[Q>>2]=w,C=M-N|0,(N|0)<0?(w=w-N|0,b[j>>2]=C,b[Q>>2]=w,b[y>>2]=0,M=0):(C=M,M=N),(C|0)<0&&(M=M-C|0,b[y>>2]=M,w=w-C|0,b[Q>>2]=w,b[j>>2]=0,C=0),G=M-w|0,N=C-w|0,(w|0)<0?(b[y>>2]=G,b[j>>2]=N,b[Q>>2]=0,M=G,w=0):N=C,C=(N|0)<(M|0)?N:M,C=(w|0)<(C|0)?w:C,!((C|0)<=0)&&(b[y>>2]=M-C,b[j>>2]=N-C,b[Q>>2]=w-C)}function ur(y){y=y|0;var w=0,C=0,M=0,N=0,G=0,j=0,Q=0;w=b[y>>2]|0,j=y+4|0,M=b[j>>2]|0,Q=y+8|0,C=b[Q>>2]|0,N=M+w|0,b[y>>2]=N,M=C+M|0,b[j>>2]=M,w=C+w|0,b[Q>>2]=w,C=M-N|0,(N|0)<0?(w=w-N|0,b[j>>2]=C,b[Q>>2]=w,b[y>>2]=0,M=0):(C=M,M=N),(C|0)<0&&(M=M-C|0,b[y>>2]=M,w=w-C|0,b[Q>>2]=w,b[j>>2]=0,C=0),G=M-w|0,N=C-w|0,(w|0)<0?(b[y>>2]=G,b[j>>2]=N,b[Q>>2]=0,M=G,w=0):N=C,C=(N|0)<(M|0)?N:M,C=(w|0)<(C|0)?w:C,!((C|0)<=0)&&(b[y>>2]=M-C,b[j>>2]=N-C,b[Q>>2]=w-C)}function kr(y){switch(y=y|0,y|0){case 1:{y=5;break}case 5:{y=4;break}case 4:{y=6;break}case 6:{y=2;break}case 2:{y=3;break}case 3:{y=1;break}default:}return y|0}function Zr(y){switch(y=y|0,y|0){case 1:{y=3;break}case 3:{y=2;break}case 2:{y=6;break}case 6:{y=4;break}case 4:{y=5;break}case 5:{y=1;break}default:}return y|0}function hn(y){y=y|0;var w=0,C=0,M=0,N=0,G=0,j=0,Q=0;w=b[y>>2]|0,j=y+4|0,C=b[j>>2]|0,Q=y+8|0,M=b[Q>>2]|0,N=C+(w<<1)|0,b[y>>2]=N,C=M+(C<<1)|0,b[j>>2]=C,w=(M<<1)+w|0,b[Q>>2]=w,M=C-N|0,(N|0)<0?(w=w-N|0,b[j>>2]=M,b[Q>>2]=w,b[y>>2]=0,C=M,M=0):M=N,(C|0)<0&&(M=M-C|0,b[y>>2]=M,w=w-C|0,b[Q>>2]=w,b[j>>2]=0,C=0),G=M-w|0,N=C-w|0,(w|0)<0?(b[y>>2]=G,b[j>>2]=N,b[Q>>2]=0,M=G,w=0):N=C,C=(N|0)<(M|0)?N:M,C=(w|0)<(C|0)?w:C,!((C|0)<=0)&&(b[y>>2]=M-C,b[j>>2]=N-C,b[Q>>2]=w-C)}function ir(y){y=y|0;var w=0,C=0,M=0,N=0,G=0,j=0,Q=0;N=b[y>>2]|0,j=y+4|0,w=b[j>>2]|0,Q=y+8|0,C=b[Q>>2]|0,M=(w<<1)+N|0,N=C+(N<<1)|0,b[y>>2]=N,b[j>>2]=M,w=(C<<1)+w|0,b[Q>>2]=w,C=M-N|0,(N|0)<0?(w=w-N|0,b[j>>2]=C,b[Q>>2]=w,b[y>>2]=0,N=0):C=M,(C|0)<0&&(N=N-C|0,b[y>>2]=N,w=w-C|0,b[Q>>2]=w,b[j>>2]=0,C=0),G=N-w|0,M=C-w|0,(w|0)<0?(b[y>>2]=G,b[j>>2]=M,b[Q>>2]=0,N=G,w=0):M=C,C=(M|0)<(N|0)?M:N,C=(w|0)<(C|0)?w:C,!((C|0)<=0)&&(b[y>>2]=N-C,b[j>>2]=M-C,b[Q>>2]=w-C)}function Pn(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0,Q=0;return j=(b[y>>2]|0)-(b[w>>2]|0)|0,Q=(j|0)<0,M=(b[y+4>>2]|0)-(b[w+4>>2]|0)-(Q?j:0)|0,G=(M|0)<0,N=(Q?0-j|0:0)+(b[y+8>>2]|0)-(b[w+8>>2]|0)+(G?0-M|0:0)|0,y=(N|0)<0,w=y?0:N,C=(G?0:M)-(y?N:0)|0,N=(Q?0:j)-(G?M:0)-(y?N:0)|0,y=(C|0)<(N|0)?C:N,y=(w|0)<(y|0)?w:y,M=(y|0)>0,w=w-(M?y:0)|0,C=C-(M?y:0)|0,y=N-(M?y:0)|0,y=(y|0)>-1?y:0-y|0,C=(C|0)>-1?C:0-C|0,w=(w|0)>-1?w:0-w|0,w=(C|0)>(w|0)?C:w,((y|0)>(w|0)?y:w)|0}function Oi(y,w){y=y|0,w=w|0;var C=0;C=b[y+8>>2]|0,b[w>>2]=(b[y>>2]|0)-C,b[w+4>>2]=(b[y+4>>2]|0)-C}function na(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0,Q=0;M=b[y>>2]|0,b[w>>2]=M,y=b[y+4>>2]|0,j=w+4|0,b[j>>2]=y,Q=w+8|0,b[Q>>2]=0,C=y-M|0,(M|0)<0?(y=0-M|0,b[j>>2]=C,b[Q>>2]=y,b[w>>2]=0,M=0):(C=y,y=0),(C|0)<0&&(M=M-C|0,b[w>>2]=M,y=y-C|0,b[Q>>2]=y,b[j>>2]=0,C=0),G=M-y|0,N=C-y|0,(y|0)<0?(b[w>>2]=G,b[j>>2]=N,b[Q>>2]=0,C=N,N=G,y=0):N=M,M=(C|0)<(N|0)?C:N,M=(y|0)<(M|0)?y:M,!((M|0)<=0)&&(b[w>>2]=N-M,b[j>>2]=C-M,b[Q>>2]=y-M)}function Dn(y){y=y|0;var w=0,C=0,M=0,N=0;w=y+8|0,N=b[w>>2]|0,C=N-(b[y>>2]|0)|0,b[y>>2]=C,M=y+4|0,y=(b[M>>2]|0)-N|0,b[M>>2]=y,b[w>>2]=0-(y+C)}function ia(y){y=y|0;var w=0,C=0,M=0,N=0,G=0,j=0,Q=0;C=b[y>>2]|0,w=0-C|0,b[y>>2]=w,j=y+8|0,b[j>>2]=0,Q=y+4|0,M=b[Q>>2]|0,N=M+C|0,(C|0)>0?(b[Q>>2]=N,b[j>>2]=C,b[y>>2]=0,w=0,M=N):C=0,(M|0)<0?(G=w-M|0,b[y>>2]=G,C=C-M|0,b[j>>2]=C,b[Q>>2]=0,N=G-C|0,w=0-C|0,(C|0)<0?(b[y>>2]=N,b[Q>>2]=w,b[j>>2]=0,M=w,C=0):(M=0,N=G)):N=w,w=(M|0)<(N|0)?M:N,w=(C|0)<(w|0)?C:w,!((w|0)<=0)&&(b[y>>2]=N-w,b[Q>>2]=M-w,b[j>>2]=C-w)}function Xo(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0;M=te,te=te+16|0,N=M,gr(y,w,C,N),tl(N,C+4|0),te=M}function gr(y,w,C,M){y=y|0,w=w|0,C=C|0,M=M|0;var N=0,G=0,j=0,Q=0,ue=0;if(ue=te,te=te+32|0,G=ue,li(y,G),b[C>>2]=0,N=+pn(15888,G),j=+pn(15912,G),j<N&&(b[C>>2]=1,N=j),j=+pn(15936,G),j<N&&(b[C>>2]=2,N=j),j=+pn(15960,G),j<N&&(b[C>>2]=3,N=j),j=+pn(15984,G),j<N&&(b[C>>2]=4,N=j),j=+pn(16008,G),j<N&&(b[C>>2]=5,N=j),j=+pn(16032,G),j<N&&(b[C>>2]=6,N=j),j=+pn(16056,G),j<N&&(b[C>>2]=7,N=j),j=+pn(16080,G),j<N&&(b[C>>2]=8,N=j),j=+pn(16104,G),j<N&&(b[C>>2]=9,N=j),j=+pn(16128,G),j<N&&(b[C>>2]=10,N=j),j=+pn(16152,G),j<N&&(b[C>>2]=11,N=j),j=+pn(16176,G),j<N&&(b[C>>2]=12,N=j),j=+pn(16200,G),j<N&&(b[C>>2]=13,N=j),j=+pn(16224,G),j<N&&(b[C>>2]=14,N=j),j=+pn(16248,G),j<N&&(b[C>>2]=15,N=j),j=+pn(16272,G),j<N&&(b[C>>2]=16,N=j),j=+pn(16296,G),j<N&&(b[C>>2]=17,N=j),j=+pn(16320,G),j<N&&(b[C>>2]=18,N=j),j=+pn(16344,G),j<N&&(b[C>>2]=19,N=j),j=+Vi(+(1-N*.5)),j<1e-16){b[M>>2]=0,b[M+4>>2]=0,b[M+8>>2]=0,b[M+12>>2]=0,te=ue;return}if(C=b[C>>2]|0,N=+He[16368+(C*24|0)>>3],N=+Hu(N-+Hu(+yl(15568+(C<<4)|0,y))),xu(w)|0?Q=+Hu(N+-.3334731722518321):Q=N,N=+$a(+j)/.381966011250105,(w|0)>0){G=0;do N=N*2.6457513110645907,G=G+1|0;while((G|0)!=(w|0))}j=+vn(+Q)*N,He[M>>3]=j,Q=+Gr(+Q)*N,He[M+8>>3]=Q,te=ue}function da(y,w,C,M,N){y=y|0,w=w|0,C=C|0,M=M|0,N=N|0;var G=0,j=0;if(G=+In(y),G<1e-16){w=15568+(w<<4)|0,b[N>>2]=b[w>>2],b[N+4>>2]=b[w+4>>2],b[N+8>>2]=b[w+8>>2],b[N+12>>2]=b[w+12>>2];return}if(j=+to(+ +He[y+8>>3],+ +He[y>>3]),(C|0)>0){y=0;do G=G/2.6457513110645907,y=y+1|0;while((y|0)!=(C|0))}M?(G=G/3,C=(xu(C)|0)==0,G=+Jo(+((C?G:G/2.6457513110645907)*.381966011250105))):(G=+Jo(+(G*.381966011250105)),xu(C)|0&&(j=+Hu(j+.3334731722518321))),Wu(15568+(w<<4)|0,+Hu(+He[16368+(w*24|0)>>3]-j),G,N)}function Dl(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0;M=te,te=te+16|0,N=M,ui(y+4|0,N),da(N,b[y>>2]|0,w,0,C),te=M}function Fl(y,w,C,M,N){y=y|0,w=w|0,C=C|0,M=M|0,N=N|0;var G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0,Ft=0,tr=0,hr=0,Vr=0,_n=0,rr=0,Ir=0,Ct=0,An=0,Sn=0,Qr=0,mn=0,fi=0,ma=0,wa=0,Ja=0,va=0,vo=0,go=0,wi=0;if(vo=te,te=te+272|0,G=vo+256|0,rr=vo+240|0,wa=vo,Ja=vo+224|0,va=vo+208|0,Ir=vo+176|0,Ct=vo+160|0,An=vo+192|0,Sn=vo+144|0,Qr=vo+128|0,mn=vo+112|0,fi=vo+96|0,ma=vo+80|0,b[G>>2]=w,b[rr>>2]=b[y>>2],b[rr+4>>2]=b[y+4>>2],b[rr+8>>2]=b[y+8>>2],b[rr+12>>2]=b[y+12>>2],Ga(rr,G,wa),b[N>>2]=0,rr=M+C+((M|0)==5&1)|0,(rr|0)<=(C|0)){te=vo;return}ue=b[G>>2]|0,we=Ja+4|0,Pe=Ir+4|0,ft=C+5|0,xt=16848+(ue<<2)|0,Ft=16928+(ue<<2)|0,tr=Qr+8|0,hr=mn+8|0,Vr=fi+8|0,_n=va+4|0,Q=C;e:for(;;){j=wa+(((Q|0)%5|0)<<4)|0,b[va>>2]=b[j>>2],b[va+4>>2]=b[j+4>>2],b[va+8>>2]=b[j+8>>2],b[va+12>>2]=b[j+12>>2];do;while((es(va,ue,0,1)|0)==2);if((Q|0)>(C|0)&(xu(w)|0)!=0){if(b[Ir>>2]=b[va>>2],b[Ir+4>>2]=b[va+4>>2],b[Ir+8>>2]=b[va+8>>2],b[Ir+12>>2]=b[va+12>>2],ui(we,Ct),M=b[Ir>>2]|0,G=b[17008+(M*80|0)+(b[Ja>>2]<<2)>>2]|0,b[Ir>>2]=b[18608+(M*80|0)+(G*20|0)>>2],j=b[18608+(M*80|0)+(G*20|0)+16>>2]|0,(j|0)>0){y=0;do fr(Pe),y=y+1|0;while((y|0)<(j|0))}switch(j=18608+(M*80|0)+(G*20|0)+4|0,b[An>>2]=b[j>>2],b[An+4>>2]=b[j+4>>2],b[An+8>>2]=b[j+8>>2],Bl(An,(b[xt>>2]|0)*3|0),mi(Pe,An,Pe),ja(Pe),ui(Pe,Sn),go=+(b[Ft>>2]|0),He[Qr>>3]=go*3,He[tr>>3]=0,wi=go*-1.5,He[mn>>3]=wi,He[hr>>3]=go*2.598076211353316,He[fi>>3]=wi,He[Vr>>3]=go*-2.598076211353316,b[17008+((b[Ir>>2]|0)*80|0)+(b[va>>2]<<2)>>2]|0){case 1:{y=mn,M=Qr;break}case 3:{y=fi,M=mn;break}case 2:{y=Qr,M=fi;break}default:{y=12;break e}}zi(Ct,Sn,M,y,ma),da(ma,b[Ir>>2]|0,ue,1,N+8+(b[N>>2]<<4)|0),b[N>>2]=(b[N>>2]|0)+1}if((Q|0)<(ft|0)&&(ui(_n,Ir),da(Ir,b[va>>2]|0,ue,1,N+8+(b[N>>2]<<4)|0),b[N>>2]=(b[N>>2]|0)+1),b[Ja>>2]=b[va>>2],b[Ja+4>>2]=b[va+4>>2],b[Ja+8>>2]=b[va+8>>2],b[Ja+12>>2]=b[va+12>>2],Q=Q+1|0,(Q|0)>=(rr|0)){y=3;break}}if((y|0)==3){te=vo;return}else(y|0)==12&&vi(22474,22521,581,22531)}function Ga(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0,Q=0,ue=0;ue=te,te=te+128|0,M=ue+64|0,N=ue,G=M,j=20208,Q=G+60|0;do b[G>>2]=b[j>>2],G=G+4|0,j=j+4|0;while((G|0)<(Q|0));G=N,j=20272,Q=G+60|0;do b[G>>2]=b[j>>2],G=G+4|0,j=j+4|0;while((G|0)<(Q|0));Q=(xu(b[w>>2]|0)|0)==0,M=Q?M:N,N=y+4|0,hn(N),ir(N),xu(b[w>>2]|0)|0&&(ar(N),b[w>>2]=(b[w>>2]|0)+1),b[C>>2]=b[y>>2],w=C+4|0,mi(N,M,w),ja(w),b[C+16>>2]=b[y>>2],w=C+20|0,mi(N,M+12|0,w),ja(w),b[C+32>>2]=b[y>>2],w=C+36|0,mi(N,M+24|0,w),ja(w),b[C+48>>2]=b[y>>2],w=C+52|0,mi(N,M+36|0,w),ja(w),b[C+64>>2]=b[y>>2],C=C+68|0,mi(N,M+48|0,C),ja(C),te=ue}function es(y,w,C,M){y=y|0,w=w|0,C=C|0,M=M|0;var N=0,G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0,Ft=0,tr=0;if(tr=te,te=te+32|0,xt=tr+12|0,Q=tr,Ft=y+4|0,ft=b[16928+(w<<2)>>2]|0,Pe=(M|0)!=0,ft=Pe?ft*3|0:ft,N=b[Ft>>2]|0,we=y+8|0,j=b[we>>2]|0,Pe){if(G=y+12|0,M=b[G>>2]|0,N=j+N+M|0,(N|0)==(ft|0))return Ft=1,te=tr,Ft|0;ue=G}else ue=y+12|0,M=b[ue>>2]|0,N=j+N+M|0;if((N|0)<=(ft|0))return Ft=0,te=tr,Ft|0;do if((M|0)>0){if(M=b[y>>2]|0,(j|0)>0){G=18608+(M*80|0)+60|0,M=y;break}M=18608+(M*80|0)+40|0,C?(oc(xt,ft,0,0),Qo(Ft,xt,Q),ur(Q),mi(Q,xt,Ft),G=M,M=y):(G=M,M=y)}else G=18608+((b[y>>2]|0)*80|0)+20|0,M=y;while(0);if(b[M>>2]=b[G>>2],N=G+16|0,(b[N>>2]|0)>0){M=0;do fr(Ft),M=M+1|0;while((M|0)<(b[N>>2]|0))}return y=G+4|0,b[xt>>2]=b[y>>2],b[xt+4>>2]=b[y+4>>2],b[xt+8>>2]=b[y+8>>2],w=b[16848+(w<<2)>>2]|0,Bl(xt,Pe?w*3|0:w),mi(Ft,xt,Ft),ja(Ft),Pe?M=((b[we>>2]|0)+(b[Ft>>2]|0)+(b[ue>>2]|0)|0)==(ft|0)?1:2:M=2,Ft=M,te=tr,Ft|0}function zp(y,w){y=y|0,w=w|0;var C=0;do C=es(y,w,0,1)|0;while((C|0)==2);return C|0}function Bh(y,w,C,M,N){y=y|0,w=w|0,C=C|0,M=M|0,N=N|0;var G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0,Ft=0,tr=0,hr=0,Vr=0,_n=0,rr=0,Ir=0,Ct=0,An=0,Sn=0,Qr=0,mn=0,fi=0,ma=0,wa=0;if(fi=te,te=te+240|0,G=fi+224|0,An=fi+208|0,Sn=fi,Qr=fi+192|0,mn=fi+176|0,Vr=fi+160|0,_n=fi+144|0,rr=fi+128|0,Ir=fi+112|0,Ct=fi+96|0,b[G>>2]=w,b[An>>2]=b[y>>2],b[An+4>>2]=b[y+4>>2],b[An+8>>2]=b[y+8>>2],b[An+12>>2]=b[y+12>>2],au(An,G,Sn),b[N>>2]=0,hr=M+C+((M|0)==6&1)|0,(hr|0)<=(C|0)){te=fi;return}ue=b[G>>2]|0,we=C+6|0,Pe=16928+(ue<<2)|0,ft=_n+8|0,xt=rr+8|0,Ft=Ir+8|0,tr=Qr+4|0,j=0,Q=C,M=-1;e:for(;;){if(G=(Q|0)%6|0,y=Sn+(G<<4)|0,b[Qr>>2]=b[y>>2],b[Qr+4>>2]=b[y+4>>2],b[Qr+8>>2]=b[y+8>>2],b[Qr+12>>2]=b[y+12>>2],y=j,j=es(Qr,ue,0,1)|0,(Q|0)>(C|0)&(xu(w)|0)!=0&&(y|0)!=1&&(b[Qr>>2]|0)!=(M|0)){switch(ui(Sn+(((G+5|0)%6|0)<<4)+4|0,mn),ui(Sn+(G<<4)+4|0,Vr),ma=+(b[Pe>>2]|0),He[_n>>3]=ma*3,He[ft>>3]=0,wa=ma*-1.5,He[rr>>3]=wa,He[xt>>3]=ma*2.598076211353316,He[Ir>>3]=wa,He[Ft>>3]=ma*-2.598076211353316,G=b[An>>2]|0,b[17008+(G*80|0)+(((M|0)==(G|0)?b[Qr>>2]|0:M)<<2)>>2]|0){case 1:{y=rr,M=_n;break}case 3:{y=Ir,M=rr;break}case 2:{y=_n,M=Ir;break}default:{y=8;break e}}zi(mn,Vr,M,y,Ct),!($r(mn,Ct)|0)&&!($r(Vr,Ct)|0)&&(da(Ct,b[An>>2]|0,ue,1,N+8+(b[N>>2]<<4)|0),b[N>>2]=(b[N>>2]|0)+1)}if((Q|0)<(we|0)&&(ui(tr,mn),da(mn,b[Qr>>2]|0,ue,1,N+8+(b[N>>2]<<4)|0),b[N>>2]=(b[N>>2]|0)+1),Q=Q+1|0,(Q|0)>=(hr|0)){y=3;break}else M=b[Qr>>2]|0}if((y|0)==3){te=fi;return}else(y|0)==8&&vi(22557,22521,746,22602)}function au(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0,Q=0,ue=0;ue=te,te=te+160|0,M=ue+80|0,N=ue,G=M,j=20336,Q=G+72|0;do b[G>>2]=b[j>>2],G=G+4|0,j=j+4|0;while((G|0)<(Q|0));G=N,j=20416,Q=G+72|0;do b[G>>2]=b[j>>2],G=G+4|0,j=j+4|0;while((G|0)<(Q|0));Q=(xu(b[w>>2]|0)|0)==0,M=Q?M:N,N=y+4|0,hn(N),ir(N),xu(b[w>>2]|0)|0&&(ar(N),b[w>>2]=(b[w>>2]|0)+1),b[C>>2]=b[y>>2],w=C+4|0,mi(N,M,w),ja(w),b[C+16>>2]=b[y>>2],w=C+20|0,mi(N,M+12|0,w),ja(w),b[C+32>>2]=b[y>>2],w=C+36|0,mi(N,M+24|0,w),ja(w),b[C+48>>2]=b[y>>2],w=C+52|0,mi(N,M+36|0,w),ja(w),b[C+64>>2]=b[y>>2],w=C+68|0,mi(N,M+48|0,w),ja(w),b[C+80>>2]=b[y>>2],C=C+84|0,mi(N,M+60|0,C),ja(C),te=ue}function Hu(y){y=+y;var w=0;return w=y<0?y+6.283185307179586:y,+(y>=6.283185307179586?w+-6.283185307179586:w)}function af(y,w){return y=y|0,w=w|0,+Fr(+(+He[y>>3]-+He[w>>3]))<17453292519943298e-27?(w=+Fr(+(+He[y+8>>3]-+He[w+8>>3]))<17453292519943298e-27,w|0):(w=0,w|0)}function Dh(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0;return N=+He[w>>3],M=+He[y>>3],G=+Gr(+((N-M)*.5)),C=+Gr(+((+He[w+8>>3]-+He[y+8>>3])*.5)),C=G*G+C*(+vn(+N)*+vn(+M)*C),+(+to(+ +yi(+C),+ +yi(+(1-C)))*2)}function of(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0;return N=+He[w>>3],M=+He[y>>3],G=+Gr(+((N-M)*.5)),C=+Gr(+((+He[w+8>>3]-+He[y+8>>3])*.5)),C=G*G+C*(+vn(+N)*+vn(+M)*C),+(+to(+ +yi(+C),+ +yi(+(1-C)))*2*6371.007180918475)}function Qd(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0;return N=+He[w>>3],M=+He[y>>3],G=+Gr(+((N-M)*.5)),C=+Gr(+((+He[w+8>>3]-+He[y+8>>3])*.5)),C=G*G+C*(+vn(+N)*+vn(+M)*C),+(+to(+ +yi(+C),+ +yi(+(1-C)))*2*6371.007180918475*1e3)}function yl(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0;return G=+He[w>>3],M=+vn(+G),N=+He[w+8>>3]-+He[y+8>>3],j=M*+Gr(+N),C=+He[y>>3],+ +to(+j,+(+Gr(+G)*+vn(+C)-+vn(+N)*(M*+Gr(+C))))}function Wu(y,w,C,M){y=y|0,w=+w,C=+C,M=M|0;var N=0,G=0,j=0,Q=0;if(C<1e-16){b[M>>2]=b[y>>2],b[M+4>>2]=b[y+4>>2],b[M+8>>2]=b[y+8>>2],b[M+12>>2]=b[y+12>>2];return}G=w<0?w+6.283185307179586:w,G=w>=6.283185307179586?G+-6.283185307179586:G;do if(G<1e-16)w=+He[y>>3]+C,He[M>>3]=w,N=M;else{if(N=+Fr(+(G+-3.141592653589793))<1e-16,w=+He[y>>3],N){w=w-C,He[M>>3]=w,N=M;break}if(j=+vn(+C),C=+Gr(+C),w=j*+Gr(+w)+ +vn(+G)*(C*+vn(+w)),w=w>1?1:w,w=+ua(+(w<-1?-1:w)),He[M>>3]=w,+Fr(+(w+-1.5707963267948966))<1e-16){He[M>>3]=1.5707963267948966,He[M+8>>3]=0;return}if(+Fr(+(w+1.5707963267948966))<1e-16){He[M>>3]=-1.5707963267948966,He[M+8>>3]=0;return}if(Q=+vn(+w),G=C*+Gr(+G)/Q,C=+He[y>>3],w=(j-+Gr(+w)*+Gr(+C))/+vn(+C)/Q,j=G>1?1:G,w=w>1?1:w,w=+He[y+8>>3]+ +to(+(j<-1?-1:j),+(w<-1?-1:w)),w>3.141592653589793)do w=w+-6.283185307179586;while(w>3.141592653589793);if(w<-3.141592653589793)do w=w+6.283185307179586;while(w<-3.141592653589793);He[M+8>>3]=w;return}while(0);if(+Fr(+(w+-1.5707963267948966))<1e-16){He[N>>3]=1.5707963267948966,He[M+8>>3]=0;return}if(+Fr(+(w+1.5707963267948966))<1e-16){He[N>>3]=-1.5707963267948966,He[M+8>>3]=0;return}if(w=+He[y+8>>3],w>3.141592653589793)do w=w+-6.283185307179586;while(w>3.141592653589793);if(w<-3.141592653589793)do w=w+6.283185307179586;while(w<-3.141592653589793);He[M+8>>3]=w}function Si(y){return y=y|0,+ +He[20496+(y<<3)>>3]}function Nl(y){return y=y|0,+ +He[20624+(y<<3)>>3]}function rl(y){return y=y|0,+ +He[20752+(y<<3)>>3]}function gs(y){return y=y|0,+ +He[20880+(y<<3)>>3]}function sf(y){y=y|0;var w=0;return w=21008+(y<<3)|0,y=b[w>>2]|0,Yn(b[w+4>>2]|0),y|0}function qu(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0;return xt=+He[w>>3],Pe=+He[y>>3],ue=+Gr(+((xt-Pe)*.5)),G=+He[w+8>>3],we=+He[y+8>>3],j=+Gr(+((G-we)*.5)),Q=+vn(+Pe),ft=+vn(+xt),j=ue*ue+j*(ft*Q*j),j=+to(+ +yi(+j),+ +yi(+(1-j)))*2,ue=+He[C>>3],xt=+Gr(+((ue-xt)*.5)),M=+He[C+8>>3],G=+Gr(+((M-G)*.5)),N=+vn(+ue),G=xt*xt+G*(ft*N*G),G=+to(+ +yi(+G),+ +yi(+(1-G)))*2,ue=+Gr(+((Pe-ue)*.5)),M=+Gr(+((we-M)*.5)),M=ue*ue+M*(Q*N*M),M=+to(+ +yi(+M),+ +yi(+(1-M)))*2,N=(j+G+M)*.5,+(+Jo(+ +yi(+(+$a(+(N*.5))*+$a(+((N-j)*.5))*+$a(+((N-G)*.5))*+$a(+((N-M)*.5)))))*4)}function _l(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0;if(G=te,te=te+192|0,M=G+168|0,N=G,wu(y,w,M),Tu(y,w,N),w=b[N>>2]|0,(w|0)<=0)return C=0,te=G,+C;if(C=+qu(N+8|0,N+8+(((w|0)!=1&1)<<4)|0,M)+0,(w|0)==1)return te=G,+C;y=1;do j=y,y=y+1|0,C=C+ +qu(N+8+(j<<4)|0,N+8+(((y|0)%(w|0)|0)<<4)|0,M);while((y|0)<(w|0));return te=G,+C}function qs(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0;if(G=te,te=te+192|0,M=G+168|0,N=G,wu(y,w,M),Tu(y,w,N),w=b[N>>2]|0,(w|0)>0){if(C=+qu(N+8|0,N+8+(((w|0)!=1&1)<<4)|0,M)+0,(w|0)!=1){y=1;do j=y,y=y+1|0,C=C+ +qu(N+8+(j<<4)|0,N+8+(((y|0)%(w|0)|0)<<4)|0,M);while((y|0)<(w|0))}}else C=0;return te=G,+(C*6371.007180918475*6371.007180918475)}function Fh(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0;if(G=te,te=te+192|0,M=G+168|0,N=G,wu(y,w,M),Tu(y,w,N),w=b[N>>2]|0,(w|0)>0){if(C=+qu(N+8|0,N+8+(((w|0)!=1&1)<<4)|0,M)+0,(w|0)!=1){y=1;do j=y,y=y+1|0,C=C+ +qu(N+8+(j<<4)|0,N+8+(((y|0)%(w|0)|0)<<4)|0,M);while((y|0)<(w|0))}}else C=0;return te=G,+(C*6371.007180918475*6371.007180918475*1e3*1e3)}function wn(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0,Q=0,ue=0,we=0;if(j=te,te=te+176|0,G=j,F(y,w,G),y=b[G>>2]|0,(y|0)<=1)return N=0,te=j,+N;w=y+-1|0,y=0,C=0,M=+He[G+8>>3],N=+He[G+16>>3];do y=y+1|0,ue=M,M=+He[G+8+(y<<4)>>3],we=+Gr(+((M-ue)*.5)),Q=N,N=+He[G+8+(y<<4)+8>>3],Q=+Gr(+((N-Q)*.5)),Q=we*we+Q*(+vn(+M)*+vn(+ue)*Q),C=C+ +to(+ +yi(+Q),+ +yi(+(1-Q)))*2;while((y|0)<(w|0));return te=j,+C}function sn(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0,Q=0,ue=0,we=0;if(j=te,te=te+176|0,G=j,F(y,w,G),y=b[G>>2]|0,(y|0)<=1)return N=0,te=j,+N;w=y+-1|0,y=0,C=0,M=+He[G+8>>3],N=+He[G+16>>3];do y=y+1|0,ue=M,M=+He[G+8+(y<<4)>>3],we=+Gr(+((M-ue)*.5)),Q=N,N=+He[G+8+(y<<4)+8>>3],Q=+Gr(+((N-Q)*.5)),Q=we*we+Q*(+vn(+ue)*+vn(+M)*Q),C=C+ +to(+ +yi(+Q),+ +yi(+(1-Q)))*2;while((y|0)!=(w|0));return we=C*6371.007180918475,te=j,+we}function Up(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0,Q=0,ue=0,we=0;if(j=te,te=te+176|0,G=j,F(y,w,G),y=b[G>>2]|0,(y|0)<=1)return N=0,te=j,+N;w=y+-1|0,y=0,C=0,M=+He[G+8>>3],N=+He[G+16>>3];do y=y+1|0,ue=M,M=+He[G+8+(y<<4)>>3],we=+Gr(+((M-ue)*.5)),Q=N,N=+He[G+8+(y<<4)+8>>3],Q=+Gr(+((N-Q)*.5)),Q=we*we+Q*(+vn(+ue)*+vn(+M)*Q),C=C+ +to(+ +yi(+Q),+ +yi(+(1-Q)))*2;while((y|0)!=(w|0));return we=C*6371.007180918475*1e3,te=j,+we}function Xs(y,w){return y=y|0,w=w|0,w=Mr(y|0,w|0,52)|0,dt()|0,w&15|0}function nl(y,w){return y=y|0,w=w|0,w=Mr(y|0,w|0,45)|0,dt()|0,w&127|0}function ts(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0,Q=0;if(!(!0&(w&-16777216|0)==134217728)||(j=Mr(y|0,w|0,45)|0,dt()|0,j=j&127,j>>>0>121))return w=0,w|0;C=Mr(y|0,w|0,52)|0,dt()|0,C=C&15;do if(C|0){for(N=1,M=0;;){if(G=Mr(y|0,w|0,(15-N|0)*3|0)|0,dt()|0,G=G&7,(G|0)!=0&(M^1))if((G|0)==1&(Ma(j)|0)!=0){Q=0,M=13;break}else M=1;if((G|0)==7){Q=0,M=13;break}if(N>>>0<C>>>0)N=N+1|0;else{M=9;break}}if((M|0)==9){if((C|0)==15)Q=1;else break;return Q|0}else if((M|0)==13)return Q|0}while(0);for(;;){if(Q=Mr(y|0,w|0,(14-C|0)*3|0)|0,dt()|0,!((Q&7|0)==7&!0)){Q=0,M=13;break}if(C>>>0<14)C=C+1|0;else{Q=1,M=13;break}}return(M|0)==13?Q|0:0}function il(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0;if(M=Mr(y|0,w|0,52)|0,dt()|0,M=M&15,(M|0)>=(C|0)){if((M|0)!=(C|0))if(C>>>0<=15){if(N=on(C|0,0,52)|0,y=N|y,w=dt()|0|w&-15728641,(M|0)>(C|0))do N=on(7,0,(14-C|0)*3|0)|0,C=C+1|0,y=N|y,w=dt()|0|w;while((C|0)<(M|0))}else w=0,y=0}else w=0,y=0;return Yn(w|0),y|0}function em(y,w,C){return y=y|0,w=w|0,C=C|0,y=Mr(y|0,w|0,52)|0,dt()|0,y=y&15,(C|0)<16&(y|0)<=(C|0)?(C=st(7,C-y|0)|0,C|0):(C=0,C|0)}function Ms(y,w,C,M){y=y|0,w=w|0,C=C|0,M=M|0;var N=0,G=0,j=0,Q=0,ue=0,we=0,Pe=0;if(j=Mr(y|0,w|0,52)|0,dt()|0,j=j&15,!!((C|0)<16&(j|0)<=(C|0))){if((j|0)==(C|0)){C=M,b[C>>2]=y,b[C+4>>2]=w;return}if(ue=st(7,C-j|0)|0,we=(ue|0)/7|0,Q=Mr(y|0,w|0,45)|0,dt()|0,!(Ma(Q&127)|0))G=0;else{e:do if(!j)N=0;else for(G=1;;){if(N=Mr(y|0,w|0,(15-G|0)*3|0)|0,dt()|0,N=N&7,N|0)break e;if(G>>>0<j>>>0)G=G+1|0;else{N=0;break}}while(0);G=(N|0)==0}if(Pe=on(j+1|0,0,52)|0,N=dt()|0|w&-15728641,Q=(14-j|0)*3|0,w=on(7,0,Q|0)|0,w=(Pe|y)&~w,j=N&~(dt()|0),Ms(w,j,C,M),N=M+(we<<3)|0,!G){Pe=on(1,0,Q|0)|0,Ms(Pe|w,dt()|0|j,C,N),Pe=N+(we<<3)|0,ue=on(2,0,Q|0)|0,Ms(ue|w,dt()|0|j,C,Pe),Pe=Pe+(we<<3)|0,ue=on(3,0,Q|0)|0,Ms(ue|w,dt()|0|j,C,Pe),Pe=Pe+(we<<3)|0,ue=on(4,0,Q|0)|0,Ms(ue|w,dt()|0|j,C,Pe),Pe=Pe+(we<<3)|0,ue=on(5,0,Q|0)|0,Ms(ue|w,dt()|0|j,C,Pe),ue=on(6,0,Q|0)|0,Ms(ue|w,dt()|0|j,C,Pe+(we<<3)|0);return}G=N+(we<<3)|0,(ue|0)>6&&(ue=N+8|0,Pe=(G>>>0>ue>>>0?G:ue)+-1+(0-N)|0,xa(N|0,0,Pe+8&-8|0)|0,N=ue+(Pe>>>3<<3)|0),Pe=on(2,0,Q|0)|0,Ms(Pe|w,dt()|0|j,C,N),Pe=N+(we<<3)|0,ue=on(3,0,Q|0)|0,Ms(ue|w,dt()|0|j,C,Pe),Pe=Pe+(we<<3)|0,ue=on(4,0,Q|0)|0,Ms(ue|w,dt()|0|j,C,Pe),Pe=Pe+(we<<3)|0,ue=on(5,0,Q|0)|0,Ms(ue|w,dt()|0|j,C,Pe),ue=on(6,0,Q|0)|0,Ms(ue|w,dt()|0|j,C,Pe+(we<<3)|0)}}function ei(y,w){y=y|0,w=w|0;var C=0,M=0,N=0;if(N=Mr(y|0,w|0,45)|0,dt()|0,!(Ma(N&127)|0))return N=0,N|0;N=Mr(y|0,w|0,52)|0,dt()|0,N=N&15;e:do if(!N)C=0;else for(M=1;;){if(C=Mr(y|0,w|0,(15-M|0)*3|0)|0,dt()|0,C=C&7,C|0)break e;if(M>>>0<N>>>0)M=M+1|0;else{C=0;break}}while(0);return N=(C|0)==0&1,N|0}function rs(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0;if(M=Mr(y|0,w|0,52)|0,dt()|0,M=M&15,(C|0)<16&(M|0)<=(C|0)){if((M|0)!=(C|0)&&(N=on(C|0,0,52)|0,y=N|y,w=dt()|0|w&-15728641,(M|0)<(C|0)))do N=on(7,0,(14-M|0)*3|0)|0,M=M+1|0,y=y&~N,w=w&~(dt()|0);while((M|0)<(C|0))}else w=0,y=0;return Yn(w|0),y|0}function Uv(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0,Ft=0,tr=0,hr=0,Vr=0,_n=0,rr=0,Ir=0,Ct=0,An=0,Sn=0,Qr=0,mn=0;if(!C)return Qr=0,Qr|0;if(N=y,M=b[N>>2]|0,N=b[N+4>>2]|0,!0&(N&15728640|0)==0){if((C|0)<=0||(Qr=w,b[Qr>>2]=M,b[Qr+4>>2]=N,(C|0)==1))return Qr=0,Qr|0;M=1;do An=y+(M<<3)|0,Sn=b[An+4>>2]|0,Qr=w+(M<<3)|0,b[Qr>>2]=b[An>>2],b[Qr+4>>2]=Sn,M=M+1|0;while((M|0)!=(C|0));return M=0,M|0}if(An=C<<3,Sn=no(An)|0,!Sn)return Qr=-3,Qr|0;if(Xu(Sn|0,y|0,An|0)|0,Ct=io(C,8)|0,!Ct)return ci(Sn),Qr=-3,Qr|0;M=C;e:for(;;){j=Sn,Pe=b[j>>2]|0,j=b[j+4>>2]|0,rr=Mr(Pe|0,j|0,52)|0,dt()|0,rr=rr&15,Ir=rr+-1|0,_n=(M|0)>0;t:do if(_n){if(Vr=((M|0)<0)<<31>>31,tr=on(Ir|0,0,52)|0,hr=dt()|0,Ir>>>0>15)for(N=0,y=Pe,C=j;;){if(!((y|0)==0&(C|0)==0)){if(G=Mr(y|0,C|0,52)|0,dt()|0,G=G&15,Q=(G|0)<(Ir|0),G=(G|0)==(Ir|0),we=Q?0:G?y:0,y=Q?0:G?C:0,C=ou(we|0,y|0,M|0,Vr|0)|0,dt()|0,G=Ct+(C<<3)|0,Q=G,ue=b[Q>>2]|0,Q=b[Q+4>>2]|0,(ue|0)==0&(Q|0)==0)C=we;else for(tr=0,Ft=C,xt=Q,C=we;;){if((tr|0)>(M|0)){Qr=41;break e}if((ue|0)==(C|0)&(xt&-117440513|0)==(y|0)){we=Mr(ue|0,xt|0,56)|0,dt()|0,we=we&7,ft=we+1|0,hr=Mr(ue|0,xt|0,45)|0,dt()|0;r:do if(!(Ma(hr&127)|0))Q=7;else{if(ue=Mr(ue|0,xt|0,52)|0,dt()|0,ue=ue&15,!ue){Q=6;break}for(Q=1;;){if(hr=on(7,0,(15-Q|0)*3|0)|0,!((hr&C|0)==0&((dt()|0)&y|0)==0)){Q=7;break r}if(Q>>>0<ue>>>0)Q=Q+1|0;else{Q=6;break}}}while(0);if((we+2|0)>>>0>Q>>>0){Qr=51;break e}hr=on(ft|0,0,56)|0,y=dt()|0|y&-117440513,Q=G,b[Q>>2]=0,b[Q+4>>2]=0,Q=Ft,C=hr|C}else Q=(Ft+1|0)%(M|0)|0;if(G=Ct+(Q<<3)|0,xt=G,ue=b[xt>>2]|0,xt=b[xt+4>>2]|0,(ue|0)==0&(xt|0)==0)break;tr=tr+1|0,Ft=Q}hr=G,b[hr>>2]=C,b[hr+4>>2]=y}if(N=N+1|0,(N|0)>=(M|0))break t;C=Sn+(N<<3)|0,y=b[C>>2]|0,C=b[C+4>>2]|0}for(N=0,y=Pe,C=j;;){if(!((y|0)==0&(C|0)==0)){if(Q=Mr(y|0,C|0,52)|0,dt()|0,Q=Q&15,(Q|0)>=(Ir|0)){if((Q|0)!=(Ir|0)&&(y=y|tr,C=C&-15728641|hr,Q>>>0>=rr>>>0)){G=Ir;do Ft=on(7,0,(14-G|0)*3|0)|0,G=G+1|0,y=Ft|y,C=dt()|0|C;while(G>>>0<Q>>>0)}}else y=0,C=0;if(Q=ou(y|0,C|0,M|0,Vr|0)|0,dt()|0,G=Ct+(Q<<3)|0,ue=G,we=b[ue>>2]|0,ue=b[ue+4>>2]|0,!((we|0)==0&(ue|0)==0))for(Ft=0;;){if((Ft|0)>(M|0)){Qr=41;break e}if((we|0)==(y|0)&(ue&-117440513|0)==(C|0)){ft=Mr(we|0,ue|0,56)|0,dt()|0,ft=ft&7,xt=ft+1|0,mn=Mr(we|0,ue|0,45)|0,dt()|0;r:do if(!(Ma(mn&127)|0))ue=7;else{if(we=Mr(we|0,ue|0,52)|0,dt()|0,we=we&15,!we){ue=6;break}for(ue=1;;){if(mn=on(7,0,(15-ue|0)*3|0)|0,!((mn&y|0)==0&((dt()|0)&C|0)==0)){ue=7;break r}if(ue>>>0<we>>>0)ue=ue+1|0;else{ue=6;break}}}while(0);if((ft+2|0)>>>0>ue>>>0){Qr=51;break e}mn=on(xt|0,0,56)|0,C=dt()|0|C&-117440513,xt=G,b[xt>>2]=0,b[xt+4>>2]=0,y=mn|y}else Q=(Q+1|0)%(M|0)|0;if(G=Ct+(Q<<3)|0,ue=G,we=b[ue>>2]|0,ue=b[ue+4>>2]|0,(we|0)==0&(ue|0)==0)break;Ft=Ft+1|0}mn=G,b[mn>>2]=y,b[mn+4>>2]=C}if(N=N+1|0,(N|0)>=(M|0))break t;C=Sn+(N<<3)|0,y=b[C>>2]|0,C=b[C+4>>2]|0}}while(0);if((M+5|0)>>>0<11){Qr=99;break}if(hr=io((M|0)/6|0,8)|0,!hr){Qr=58;break}t:do if(_n){Ft=0,xt=0;do{if(Q=Ct+(Ft<<3)|0,y=Q,N=b[y>>2]|0,y=b[y+4>>2]|0,!((N|0)==0&(y|0)==0)){ue=Mr(N|0,y|0,56)|0,dt()|0,ue=ue&7,C=ue+1|0,we=y&-117440513,mn=Mr(N|0,y|0,45)|0,dt()|0;r:do if(Ma(mn&127)|0){if(ft=Mr(N|0,y|0,52)|0,dt()|0,ft=ft&15,ft|0)for(G=1;;){if(mn=on(7,0,(15-G|0)*3|0)|0,!((N&mn|0)==0&(we&(dt()|0)|0)==0))break r;if(G>>>0<ft>>>0)G=G+1|0;else break}y=on(C|0,0,56)|0,N=y|N,y=dt()|0|we,C=Q,b[C>>2]=N,b[C+4>>2]=y,C=ue+2|0}while(0);(C|0)==7&&(mn=hr+(xt<<3)|0,b[mn>>2]=N,b[mn+4>>2]=y&-117440513,xt=xt+1|0)}Ft=Ft+1|0}while((Ft|0)!=(M|0));if(_n){if(tr=((M|0)<0)<<31>>31,ft=on(Ir|0,0,52)|0,Ft=dt()|0,Ir>>>0>15)for(y=0,N=0;;){do if(!((Pe|0)==0&(j|0)==0)){for(ue=Mr(Pe|0,j|0,52)|0,dt()|0,ue=ue&15,G=(ue|0)<(Ir|0),ue=(ue|0)==(Ir|0),Q=G?0:ue?Pe:0,ue=G?0:ue?j:0,G=ou(Q|0,ue|0,M|0,tr|0)|0,dt()|0,C=0;;){if((C|0)>(M|0)){Qr=98;break e}if(mn=Ct+(G<<3)|0,we=b[mn+4>>2]|0,(we&-117440513|0)==(ue|0)&&(b[mn>>2]|0)==(Q|0)){Qr=70;break}if(G=(G+1|0)%(M|0)|0,mn=Ct+(G<<3)|0,(b[mn>>2]|0)==(Q|0)&&(b[mn+4>>2]|0)==(ue|0))break;C=C+1|0}if((Qr|0)==70&&(Qr=0,!0&(we&117440512|0)==100663296))break;mn=w+(N<<3)|0,b[mn>>2]=Pe,b[mn+4>>2]=j,N=N+1|0}while(0);if(y=y+1|0,(y|0)>=(M|0)){M=xt;break t}j=Sn+(y<<3)|0,Pe=b[j>>2]|0,j=b[j+4>>2]|0}for(y=0,N=0;;){do if(!((Pe|0)==0&(j|0)==0)){if(ue=Mr(Pe|0,j|0,52)|0,dt()|0,ue=ue&15,(ue|0)>=(Ir|0))if((ue|0)!=(Ir|0))if(C=Pe|ft,G=j&-15728641|Ft,ue>>>0<rr>>>0)ue=G;else{Q=Ir;do mn=on(7,0,(14-Q|0)*3|0)|0,Q=Q+1|0,C=mn|C,G=dt()|0|G;while(Q>>>0<ue>>>0);ue=G}else C=Pe,ue=j;else C=0,ue=0;for(Q=ou(C|0,ue|0,M|0,tr|0)|0,dt()|0,G=0;;){if((G|0)>(M|0)){Qr=98;break e}if(mn=Ct+(Q<<3)|0,we=b[mn+4>>2]|0,(we&-117440513|0)==(ue|0)&&(b[mn>>2]|0)==(C|0)){Qr=93;break}if(Q=(Q+1|0)%(M|0)|0,mn=Ct+(Q<<3)|0,(b[mn>>2]|0)==(C|0)&&(b[mn+4>>2]|0)==(ue|0))break;G=G+1|0}if((Qr|0)==93&&(Qr=0,!0&(we&117440512|0)==100663296))break;mn=w+(N<<3)|0,b[mn>>2]=Pe,b[mn+4>>2]=j,N=N+1|0}while(0);if(y=y+1|0,(y|0)>=(M|0)){M=xt;break t}j=Sn+(y<<3)|0,Pe=b[j>>2]|0,j=b[j+4>>2]|0}}else N=0,M=xt}else N=0,M=0;while(0);if(xa(Ct|0,0,An|0)|0,Xu(Sn|0,hr|0,M<<3|0)|0,ci(hr),M)w=w+(N<<3)|0;else break}return(Qr|0)==41?(ci(Sn),ci(Ct),mn=-1,mn|0):(Qr|0)==51?(ci(Sn),ci(Ct),mn=-2,mn|0):(Qr|0)==58?(ci(Sn),ci(Ct),mn=-3,mn|0):(Qr|0)==98?(ci(hr),ci(Sn),ci(Ct),mn=-1,mn|0):((Qr|0)==99&&Xu(w|0,Sn|0,M<<3|0)|0,ci(Sn),ci(Ct),mn=0,mn|0)}function uf(y,w,C,M,N){y=y|0,w=w|0,C=C|0,M=M|0,N=N|0;var G=0,j=0,Q=0,ue=0,we=0,Pe=0;if((w|0)<=0)return N=0,N|0;if((N|0)>=16){for(G=0;;){if(Pe=y+(G<<3)|0,!((b[Pe>>2]|0)==0&(b[Pe+4>>2]|0)==0)){G=14;break}if(G=G+1|0,(G|0)>=(w|0)){j=0,G=16;break}}if((G|0)==14)return((M|0)>0?-2:-1)|0;if((G|0)==16)return j|0}G=0,Pe=0;e:for(;;){we=y+(Pe<<3)|0,Q=we,j=b[Q>>2]|0,Q=b[Q+4>>2]|0;do if(!((j|0)==0&(Q|0)==0)){if((G|0)>=(M|0)){j=-1,G=16;break e}if(ue=Mr(j|0,Q|0,52)|0,dt()|0,ue=ue&15,(ue|0)>(N|0)){j=-2,G=16;break e}if((ue|0)==(N|0)){we=C+(G<<3)|0,b[we>>2]=j,b[we+4>>2]=Q,G=G+1|0;break}if(j=(st(7,N-ue|0)|0)+G|0,(j|0)>(M|0)){j=-1,G=16;break e}Ms(b[we>>2]|0,b[we+4>>2]|0,N,C+(G<<3)|0),G=j}while(0);if(Pe=Pe+1|0,(Pe|0)>=(w|0)){j=0,G=16;break}}return(G|0)==16?j|0:0}function tm(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0;if((w|0)<=0)return C=0,C|0;if((C|0)>=16){for(M=0;;){if(j=y+(M<<3)|0,!((b[j>>2]|0)==0&(b[j+4>>2]|0)==0)){M=-1,N=13;break}if(M=M+1|0,(M|0)>=(w|0)){M=0,N=13;break}}if((N|0)==13)return M|0}M=0,j=0;e:for(;;){N=y+(j<<3)|0,G=b[N>>2]|0,N=b[N+4>>2]|0;do if(!((G|0)==0&(N|0)==0)){if(N=Mr(G|0,N|0,52)|0,dt()|0,N=N&15,(N|0)>(C|0)){M=-1,N=13;break e}if((N|0)==(C|0)){M=M+1|0;break}else{M=(st(7,C-N|0)|0)+M|0;break}}while(0);if(j=j+1|0,(j|0)>=(w|0)){N=13;break}}return(N|0)==13?M|0:0}function sc(y,w){return y=y|0,w=w|0,w=Mr(y|0,w|0,52)|0,dt()|0,w&1|0}function Va(y,w){y=y|0,w=w|0;var C=0,M=0,N=0;if(N=Mr(y|0,w|0,52)|0,dt()|0,N=N&15,!N)return N=0,N|0;for(M=1;;){if(C=Mr(y|0,w|0,(15-M|0)*3|0)|0,dt()|0,C=C&7,C|0){M=5;break}if(M>>>0<N>>>0)M=M+1|0;else{C=0,M=5;break}}return(M|0)==5?C|0:0}function Oc(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0,Q=0,ue=0;if(ue=Mr(y|0,w|0,52)|0,dt()|0,ue=ue&15,!ue)return Q=w,ue=y,Yn(Q|0),ue|0;for(Q=1,C=0;;){G=(15-Q|0)*3|0,M=on(7,0,G|0)|0,N=dt()|0,j=Mr(y|0,w|0,G|0)|0,dt()|0,G=on(kr(j&7)|0,0,G|0)|0,j=dt()|0,y=G|y&~M,w=j|w&~N;e:do if(!C)if((G&M|0)==0&(j&N|0)==0)C=0;else if(M=Mr(y|0,w|0,52)|0,dt()|0,M=M&15,!M)C=1;else{C=1;t:for(;;){switch(j=Mr(y|0,w|0,(15-C|0)*3|0)|0,dt()|0,j&7){case 1:break t;case 0:break;default:{C=1;break e}}if(C>>>0<M>>>0)C=C+1|0;else{C=1;break e}}for(C=1;;)if(j=(15-C|0)*3|0,N=Mr(y|0,w|0,j|0)|0,dt()|0,G=on(7,0,j|0)|0,w=w&~(dt()|0),j=on(kr(N&7)|0,0,j|0)|0,y=y&~G|j,w=w|(dt()|0),C>>>0<M>>>0)C=C+1|0;else{C=1;break}}while(0);if(Q>>>0<ue>>>0)Q=Q+1|0;else break}return Yn(w|0),y|0}function Is(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0;if(M=Mr(y|0,w|0,52)|0,dt()|0,M=M&15,!M)return C=w,M=y,Yn(C|0),M|0;for(C=1;G=(15-C|0)*3|0,j=Mr(y|0,w|0,G|0)|0,dt()|0,N=on(7,0,G|0)|0,w=w&~(dt()|0),G=on(kr(j&7)|0,0,G|0)|0,y=G|y&~N,w=dt()|0|w,C>>>0<M>>>0;)C=C+1|0;return Yn(w|0),y|0}function jp(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0,Q=0,ue=0;if(ue=Mr(y|0,w|0,52)|0,dt()|0,ue=ue&15,!ue)return Q=w,ue=y,Yn(Q|0),ue|0;for(Q=1,C=0;;){G=(15-Q|0)*3|0,M=on(7,0,G|0)|0,N=dt()|0,j=Mr(y|0,w|0,G|0)|0,dt()|0,G=on(Zr(j&7)|0,0,G|0)|0,j=dt()|0,y=G|y&~M,w=j|w&~N;e:do if(!C)if((G&M|0)==0&(j&N|0)==0)C=0;else if(M=Mr(y|0,w|0,52)|0,dt()|0,M=M&15,!M)C=1;else{C=1;t:for(;;){switch(j=Mr(y|0,w|0,(15-C|0)*3|0)|0,dt()|0,j&7){case 1:break t;case 0:break;default:{C=1;break e}}if(C>>>0<M>>>0)C=C+1|0;else{C=1;break e}}for(C=1;;)if(N=(15-C|0)*3|0,G=on(7,0,N|0)|0,j=w&~(dt()|0),w=Mr(y|0,w|0,N|0)|0,dt()|0,w=on(Zr(w&7)|0,0,N|0)|0,y=y&~G|w,w=j|(dt()|0),C>>>0<M>>>0)C=C+1|0;else{C=1;break}}while(0);if(Q>>>0<ue>>>0)Q=Q+1|0;else break}return Yn(w|0),y|0}function Mc(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0;if(M=Mr(y|0,w|0,52)|0,dt()|0,M=M&15,!M)return C=w,M=y,Yn(C|0),M|0;for(C=1;j=(15-C|0)*3|0,G=on(7,0,j|0)|0,N=w&~(dt()|0),w=Mr(y|0,w|0,j|0)|0,dt()|0,w=on(Zr(w&7)|0,0,j|0)|0,y=w|y&~G,w=dt()|0|N,C>>>0<M>>>0;)C=C+1|0;return Yn(w|0),y|0}function Nh(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0,Q=0,ue=0,we=0,Pe=0;if(ue=te,te=te+64|0,Q=ue+40|0,M=ue+24|0,N=ue+12|0,G=ue,on(w|0,0,52)|0,C=dt()|0|134225919,!w)return(b[y+4>>2]|0)>2||(b[y+8>>2]|0)>2||(b[y+12>>2]|0)>2?(j=0,Q=0,Yn(j|0),te=ue,Q|0):(on(Np(y)|0,0,45)|0,j=dt()|0|C,Q=-1,Yn(j|0),te=ue,Q|0);if(b[Q>>2]=b[y>>2],b[Q+4>>2]=b[y+4>>2],b[Q+8>>2]=b[y+8>>2],b[Q+12>>2]=b[y+12>>2],j=Q+4|0,(w|0)>0)for(y=-1;b[M>>2]=b[j>>2],b[M+4>>2]=b[j+4>>2],b[M+8>>2]=b[j+8>>2],w&1?(Ue(j),b[N>>2]=b[j>>2],b[N+4>>2]=b[j+4>>2],b[N+8>>2]=b[j+8>>2],St(N)):(ht(j),b[N>>2]=b[j>>2],b[N+4>>2]=b[j+4>>2],b[N+8>>2]=b[j+8>>2],ar(N)),Qo(M,N,G),ja(G),Pe=(15-w|0)*3|0,we=on(7,0,Pe|0)|0,C=C&~(dt()|0),Pe=on(Al(G)|0,0,Pe|0)|0,y=Pe|y&~we,C=dt()|0|C,(w|0)>1;)w=w+-1|0;else y=-1;e:do if((b[j>>2]|0)<=2&&(b[Q+8>>2]|0)<=2&&(b[Q+12>>2]|0)<=2){if(M=Np(Q)|0,w=on(M|0,0,45)|0,w=w|y,y=dt()|0|C&-1040385,G=pa(Q)|0,!(Ma(M)|0)){if((G|0)<=0)break;for(N=0;;){if(M=Mr(w|0,y|0,52)|0,dt()|0,M=M&15,M)for(C=1;Pe=(15-C|0)*3|0,Q=Mr(w|0,y|0,Pe|0)|0,dt()|0,we=on(7,0,Pe|0)|0,y=y&~(dt()|0),Pe=on(kr(Q&7)|0,0,Pe|0)|0,w=w&~we|Pe,y=y|(dt()|0),C>>>0<M>>>0;)C=C+1|0;if(N=N+1|0,(N|0)==(G|0))break e}}N=Mr(w|0,y|0,52)|0,dt()|0,N=N&15;t:do if(N){C=1;r:for(;;){switch(Pe=Mr(w|0,y|0,(15-C|0)*3|0)|0,dt()|0,Pe&7){case 1:break r;case 0:break;default:break t}if(C>>>0<N>>>0)C=C+1|0;else break t}if(iu(M,b[Q>>2]|0)|0)for(C=1;Q=(15-C|0)*3|0,we=on(7,0,Q|0)|0,Pe=y&~(dt()|0),y=Mr(w|0,y|0,Q|0)|0,dt()|0,y=on(Zr(y&7)|0,0,Q|0)|0,w=w&~we|y,y=Pe|(dt()|0),C>>>0<N>>>0;)C=C+1|0;else for(C=1;Pe=(15-C|0)*3|0,Q=Mr(w|0,y|0,Pe|0)|0,dt()|0,we=on(7,0,Pe|0)|0,y=y&~(dt()|0),Pe=on(kr(Q&7)|0,0,Pe|0)|0,w=w&~we|Pe,y=y|(dt()|0),C>>>0<N>>>0;)C=C+1|0}while(0);if((G|0)>0){C=0;do w=Oc(w,y)|0,y=dt()|0,C=C+1|0;while((C|0)!=(G|0))}}else w=0,y=0;while(0);return we=y,Pe=w,Yn(we|0),te=ue,Pe|0}function xu(y){return y=y|0,(y|0)%2|0|0}function lf(y,w){y=y|0,w=w|0;var C=0,M=0;return M=te,te=te+16|0,C=M,w>>>0<=15&&(b[y+4>>2]&2146435072|0)!=2146435072&&(b[y+8+4>>2]&2146435072|0)!=2146435072?(Xo(y,w,C),w=Nh(C,w)|0,y=dt()|0):(y=0,w=0),Yn(y|0),te=M,w|0}function uc(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0;if(N=C+4|0,G=Mr(y|0,w|0,52)|0,dt()|0,G=G&15,j=Mr(y|0,w|0,45)|0,dt()|0,M=(G|0)==0,Ma(j&127)|0){if(M)return j=1,j|0;M=1}else{if(M)return j=0,j|0;!(b[N>>2]|0)&&!(b[C+8>>2]|0)?M=(b[C+12>>2]|0)!=0&1:M=1}for(C=1;C&1?St(N):ar(N),j=Mr(y|0,w|0,(15-C|0)*3|0)|0,dt()|0,kt(N,j&7),C>>>0<G>>>0;)C=C+1|0;return M|0}function cf(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0,Q=0,ue=0,we=0,Pe=0;Pe=te,te=te+16|0,ue=Pe,we=Mr(y|0,w|0,45)|0,dt()|0,we=we&127;e:do if(Ma(we)|0&&(G=Mr(y|0,w|0,52)|0,dt()|0,G=G&15,(G|0)!=0)){M=1;t:for(;;){switch(Q=Mr(y|0,w|0,(15-M|0)*3|0)|0,dt()|0,Q&7){case 5:break t;case 0:break;default:{M=w;break e}}if(M>>>0<G>>>0)M=M+1|0;else{M=w;break e}}for(N=1,M=w;w=(15-N|0)*3|0,j=on(7,0,w|0)|0,Q=M&~(dt()|0),M=Mr(y|0,M|0,w|0)|0,dt()|0,M=on(Zr(M&7)|0,0,w|0)|0,y=y&~j|M,M=Q|(dt()|0),N>>>0<G>>>0;)N=N+1|0}else M=w;while(0);if(Q=7728+(we*28|0)|0,b[C>>2]=b[Q>>2],b[C+4>>2]=b[Q+4>>2],b[C+8>>2]=b[Q+8>>2],b[C+12>>2]=b[Q+12>>2],!(uc(y,M,C)|0)){te=Pe;return}if(j=C+4|0,b[ue>>2]=b[j>>2],b[ue+4>>2]=b[j+4>>2],b[ue+8>>2]=b[j+8>>2],G=Mr(y|0,M|0,52)|0,dt()|0,Q=G&15,G&1?(ar(j),G=Q+1|0):G=Q,!(Ma(we)|0))M=0;else{e:do if(!Q)M=0;else for(w=1;;){if(N=Mr(y|0,M|0,(15-w|0)*3|0)|0,dt()|0,N=N&7,N|0){M=N;break e}if(w>>>0<Q>>>0)w=w+1|0;else{M=0;break}}while(0);M=(M|0)==4&1}if(!(es(C,G,M,0)|0))(G|0)!=(Q|0)&&(b[j>>2]=b[ue>>2],b[j+4>>2]=b[ue+4>>2],b[j+8>>2]=b[ue+8>>2]);else{if(Ma(we)|0)do;while(es(C,G,0,0)|0);(G|0)!=(Q|0)&&ht(j)}te=Pe}function wu(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0;M=te,te=te+16|0,N=M,cf(y,w,N),w=Mr(y|0,w|0,52)|0,dt()|0,Dl(N,w&15,C),te=M}function Tu(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0,Q=0;j=te,te=te+16|0,G=j,cf(y,w,G),M=Mr(y|0,w|0,45)|0,dt()|0,M=(Ma(M&127)|0)==0,N=Mr(y|0,w|0,52)|0,dt()|0,N=N&15;e:do if(!M){if(N|0)for(M=1;;){if(Q=on(7,0,(15-M|0)*3|0)|0,!((Q&y|0)==0&((dt()|0)&w|0)==0))break e;if(M>>>0<N>>>0)M=M+1|0;else break}Fl(G,N,0,5,C),te=j;return}while(0);Bh(G,N,0,6,C),te=j}function Gp(y,w){y=y|0,w=w|0;var C=0,M=0,N=0;if(M=Mr(y|0,w|0,45)|0,dt()|0,!(Ma(M&127)|0))return M=2,M|0;if(M=Mr(y|0,w|0,52)|0,dt()|0,M=M&15,!M)return M=5,M|0;for(C=1;;){if(N=on(7,0,(15-C|0)*3|0)|0,!((N&y|0)==0&((dt()|0)&w|0)==0)){C=2,y=6;break}if(C>>>0<M>>>0)C=C+1|0;else{C=5,y=6;break}}return(y|0)==6?C|0:0}function lc(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0;ft=te,te=te+128|0,we=ft+112|0,G=ft+96|0,Pe=ft,N=Mr(y|0,w|0,52)|0,dt()|0,Q=N&15,b[we>>2]=Q,j=Mr(y|0,w|0,45)|0,dt()|0,j=j&127;e:do if(Ma(j)|0){if(Q|0)for(M=1;;){if(ue=on(7,0,(15-M|0)*3|0)|0,!((ue&y|0)==0&((dt()|0)&w|0)==0)){N=0;break e}if(M>>>0<Q>>>0)M=M+1|0;else break}if(N&1)N=1;else{ue=on(Q+1|0,0,52)|0,Pe=dt()|0|w&-15728641,we=on(7,0,(14-Q|0)*3|0)|0,lc((ue|y)&~we,Pe&~(dt()|0),C),te=ft;return}}else N=0;while(0);cf(y,w,G),N?(Ga(G,we,Pe),ue=5):(au(G,we,Pe),ue=6);e:do if(Ma(j)|0)if(!Q)M=20;else for(M=1;;){if(j=on(7,0,(15-M|0)*3|0)|0,!((j&y|0)==0&((dt()|0)&w|0)==0)){M=8;break e}if(M>>>0<Q>>>0)M=M+1|0;else{M=20;break}}else M=8;while(0);if(xa(C|0,-1,M|0)|0,N){N=0;do{for(G=Pe+(N<<4)|0,zp(G,b[we>>2]|0)|0,G=b[G>>2]|0,M=0;j=C+(M<<2)|0,Q=b[j>>2]|0,!((Q|0)==-1|(Q|0)==(G|0));)M=M+1|0;b[j>>2]=G,N=N+1|0}while((N|0)!=(ue|0))}else{N=0;do{for(G=Pe+(N<<4)|0,es(G,b[we>>2]|0,0,1)|0,G=b[G>>2]|0,M=0;j=C+(M<<2)|0,Q=b[j>>2]|0,!((Q|0)==-1|(Q|0)==(G|0));)M=M+1|0;b[j>>2]=G,N=N+1|0}while((N|0)!=(ue|0))}te=ft}function al(){return 12}function zh(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0,Q=0,ue=0;if(on(y|0,0,52)|0,Q=dt()|0|134225919,(y|0)<1){M=0,C=0;do Ma(M)|0&&(on(M|0,0,45)|0,j=Q|(dt()|0),y=w+(C<<3)|0,b[y>>2]=-1,b[y+4>>2]=j,C=C+1|0),M=M+1|0;while((M|0)!=122);return}j=0,C=0;do{if(Ma(j)|0){for(on(j|0,0,45)|0,M=1,N=-1,G=Q|(dt()|0);ue=on(7,0,(15-M|0)*3|0)|0,N=N&~ue,G=G&~(dt()|0),(M|0)!=(y|0);)M=M+1|0;ue=w+(C<<3)|0,b[ue>>2]=N,b[ue+4>>2]=G,C=C+1|0}j=j+1|0}while((j|0)!=122)}function zf(y,w,C,M){y=y|0,w=w|0,C=C|0,M=M|0;var N=0,G=0,j=0,Q=0,ue=0,we=0;if(Q=te,te=te+64|0,j=Q,(y|0)==(C|0)&(w|0)==(M|0)|(!1|(w&2013265920|0)!=134217728|(!1|(M&2013265920|0)!=134217728))||(N=Mr(y|0,w|0,52)|0,dt()|0,N=N&15,G=Mr(C|0,M|0,52)|0,dt()|0,(N|0)!=(G&15|0)))return j=0,te=Q,j|0;if(G=N+-1|0,N>>>0>1&&(we=il(y,w,G)|0,ue=dt()|0,G=il(C,M,G)|0,(we|0)==(G|0)&(ue|0)==(dt()|0))&&(G=(N^15)*3|0,N=Mr(y|0,w|0,G|0)|0,dt()|0,N=N&7,G=Mr(C|0,M|0,G|0)|0,dt()|0,G=G&7,(N|0)==0|(G|0)==0||(b[21136+(N<<2)>>2]|0)==(G|0)||(b[21168+(N<<2)>>2]|0)==(G|0)))return we=1,te=Q,we|0;N=j,G=N+56|0;do b[N>>2]=0,N=N+4|0;while((N|0)<(G|0));return Nr(y,w,1,j),we=j,!((b[we>>2]|0)==(C|0)&&(b[we+4>>2]|0)==(M|0))&&(we=j+8|0,!((b[we>>2]|0)==(C|0)&&(b[we+4>>2]|0)==(M|0)))&&(we=j+16|0,!((b[we>>2]|0)==(C|0)&&(b[we+4>>2]|0)==(M|0)))&&(we=j+24|0,!((b[we>>2]|0)==(C|0)&&(b[we+4>>2]|0)==(M|0)))&&(we=j+32|0,!((b[we>>2]|0)==(C|0)&&(b[we+4>>2]|0)==(M|0)))&&(we=j+40|0,!((b[we>>2]|0)==(C|0)&&(b[we+4>>2]|0)==(M|0)))?(N=j+48|0,N=((b[N>>2]|0)==(C|0)?(b[N+4>>2]|0)==(M|0):0)&1):N=1,we=N,te=Q,we|0}function rm(y,w,C,M){y=y|0,w=w|0,C=C|0,M=M|0;var N=0,G=0,j=0,Q=0,ue=0,we=0,Pe=0;if(we=te,te=te+16|0,j=we,!(zf(y,w,C,M)|0))return Q=0,ue=0,Yn(Q|0),te=we,ue|0;for(Q=w&-2130706433,N=(ei(y,w)|0)==0,N=N?1:2;b[j>>2]=0,Pe=Pi(y,w,N,j)|0,G=N+1|0,!((Pe|0)==(C|0)&(dt()|0)==(M|0));)if(G>>>0<7)N=G;else{N=0,y=0,ue=6;break}return(ue|0)==6?(Yn(N|0),te=we,y|0):(Pe=on(N|0,0,56)|0,ue=Q|(dt()|0)|268435456,Pe=y|Pe,Yn(ue|0),te=we,Pe|0)}function Vp(y,w){y=y|0,w=w|0;var C=0;return C=!0&(w&2013265920|0)==268435456,Yn((C?w&-2130706433|134217728:0)|0),(C?y:0)|0}function m(y,w){y=y|0,w=w|0;var C=0,M=0,N=0;return M=te,te=te+16|0,C=M,!0&(w&2013265920|0)==268435456?(N=Mr(y|0,w|0,56)|0,dt()|0,b[C>>2]=0,C=Pi(y,w&-2130706433|134217728,N&7,C)|0,w=dt()|0,Yn(w|0),te=M,C|0):(w=0,C=0,Yn(w|0),te=M,C|0)}function A(y,w){y=y|0,w=w|0;var C=0;if(!(!0&(w&2013265920|0)==268435456))return C=0,C|0;switch(C=Mr(y|0,w|0,56)|0,dt()|0,C&7){case 0:case 7:return C=0,C|0;default:}return C=w&-2130706433|134217728,!0&(w&117440512|0)==16777216&(ei(y,C)|0)!=0?(C=0,C|0):(C=ts(y,C)|0,C|0)}function g(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0,Q=0;G=te,te=te+16|0,M=G,j=!0&(w&2013265920|0)==268435456,N=w&-2130706433|134217728,Q=C,b[Q>>2]=j?y:0,b[Q+4>>2]=j?N:0,j?(w=Mr(y|0,w|0,56)|0,dt()|0,b[M>>2]=0,y=Pi(y,N,w&7,M)|0,w=dt()|0):(y=0,w=0),Q=C+8|0,b[Q>>2]=y,b[Q+4>>2]=w,te=G}function S(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0;N=(ei(y,w)|0)==0,w=w&-2130706433,M=C,b[M>>2]=N?y:0,b[M+4>>2]=N?w|285212672:0,M=C+8|0,b[M>>2]=y,b[M+4>>2]=w|301989888,M=C+16|0,b[M>>2]=y,b[M+4>>2]=w|318767104,M=C+24|0,b[M>>2]=y,b[M+4>>2]=w|335544320,M=C+32|0,b[M>>2]=y,b[M+4>>2]=w|352321536,C=C+40|0,b[C>>2]=y,b[C+4>>2]=w|369098752}function F(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0,Q=0;if(j=te,te=te+16|0,G=j,M=Mr(y|0,w|0,56)|0,dt()|0,Q=!0&(w&2013265920|0)==268435456,N=Q?y:0,y=Q?w&-2130706433|134217728:0,w=qn(N,y,M&7)|0,(w|0)==-1){b[C>>2]=0,te=j;return}cf(N,y,G),M=Mr(N|0,y|0,52)|0,dt()|0,M=M&15,ei(N,y)|0?Fl(G,M,w,2,C):Bh(G,M,w,2,C),te=j}function q(y){y=y|0;var w=0,C=0,M=0;return w=io(1,12)|0,w||vi(22691,22646,49,22704),C=y+4|0,M=b[C>>2]|0,M|0?(M=M+8|0,b[M>>2]=w,b[C>>2]=w,w|0):(b[y>>2]|0&&vi(22721,22646,61,22744),M=y,b[M>>2]=w,b[C>>2]=w,w|0)}function K(y,w){y=y|0,w=w|0;var C=0,M=0;return M=no(24)|0,M||vi(22758,22646,78,22772),b[M>>2]=b[w>>2],b[M+4>>2]=b[w+4>>2],b[M+8>>2]=b[w+8>>2],b[M+12>>2]=b[w+12>>2],b[M+16>>2]=0,w=y+4|0,C=b[w>>2]|0,C|0?(b[C+16>>2]=M,b[w>>2]=M,M|0):(b[y>>2]|0&&vi(22787,22646,82,22772),b[y>>2]=M,b[w>>2]=M,M|0)}function ie(y){y=y|0;var w=0,C=0,M=0,N=0;if(y)for(M=1;;){if(w=b[y>>2]|0,w|0)do{if(C=b[w>>2]|0,C|0)do N=C,C=b[C+16>>2]|0,ci(N);while(C|0);N=w,w=b[w+8>>2]|0,ci(N)}while(w|0);if(w=y,y=b[y+8>>2]|0,M||ci(w),y)M=0;else break}}function fe(y){y=y|0;var w=0,C=0,M=0,N=0,G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0,Ft=0,tr=0,hr=0,Vr=0,_n=0,rr=0,Ir=0,Ct=0,An=0,Sn=0,Qr=0,mn=0,fi=0,ma=0,wa=0,Ja=0,va=0,vo=0,go=0,wi=0;if(N=y+8|0,b[N>>2]|0)return wi=1,wi|0;if(M=b[y>>2]|0,!M)return wi=0,wi|0;w=M,C=0;do C=C+1|0,w=b[w+8>>2]|0;while(w|0);if(C>>>0<2)return wi=0,wi|0;vo=no(C<<2)|0,vo||vi(22807,22646,317,22826),va=no(C<<5)|0,va||vi(22848,22646,321,22826),b[y>>2]=0,Sn=y+4|0,b[Sn>>2]=0,b[N>>2]=0,C=0,Ja=0,An=0,ft=0;e:for(;;){if(Pe=b[M>>2]|0,Pe){G=0,j=Pe;do{if(ue=+He[j+8>>3],w=j,j=b[j+16>>2]|0,we=(j|0)==0,N=we?Pe:j,Q=+He[N+8>>3],+Fr(+(ue-Q))>3.141592653589793){wi=14;break}G=G+(Q-ue)*(+He[w>>3]+ +He[N>>3])}while(!we);if((wi|0)==14){wi=0,G=0,w=Pe;do Ct=+He[w+8>>3],wa=w+16|0,ma=b[wa>>2]|0,ma=ma|0?ma:Pe,Ir=+He[ma+8>>3],G=G+(+He[w>>3]+ +He[ma>>3])*((Ir<0?Ir+6.283185307179586:Ir)-(Ct<0?Ct+6.283185307179586:Ct)),w=b[(w|0?wa:M)>>2]|0;while(w|0)}G>0?(b[vo+(Ja<<2)>>2]=M,Ja=Ja+1|0,N=An,w=ft):wi=19}else wi=19;if((wi|0)==19){wi=0;do if(C){if(w=C+8|0,b[w>>2]|0){wi=21;break e}if(C=io(1,12)|0,!C){wi=23;break e}b[w>>2]=C,N=C+4|0,j=C,w=ft}else if(ft){N=Sn,j=ft+8|0,w=M,C=y;break}else if(b[y>>2]|0){wi=27;break e}else{N=Sn,j=y,w=M,C=y;break}while(0);if(b[j>>2]=M,b[N>>2]=M,j=va+(An<<5)|0,we=b[M>>2]|0,we){for(Pe=va+(An<<5)+8|0,He[Pe>>3]=17976931348623157e292,ft=va+(An<<5)+24|0,He[ft>>3]=17976931348623157e292,He[j>>3]=-17976931348623157e292,xt=va+(An<<5)+16|0,He[xt>>3]=-17976931348623157e292,_n=17976931348623157e292,rr=-17976931348623157e292,N=0,Ft=we,ue=17976931348623157e292,hr=17976931348623157e292,Vr=-17976931348623157e292,Q=-17976931348623157e292;G=+He[Ft>>3],Ct=+He[Ft+8>>3],Ft=b[Ft+16>>2]|0,tr=(Ft|0)==0,Ir=+He[(tr?we:Ft)+8>>3],G<ue&&(He[Pe>>3]=G,ue=G),Ct<hr&&(He[ft>>3]=Ct,hr=Ct),G>Vr?He[j>>3]=G:G=Vr,Ct>Q&&(He[xt>>3]=Ct,Q=Ct),_n=Ct>0&Ct<_n?Ct:_n,rr=Ct<0&Ct>rr?Ct:rr,N=N|+Fr(+(Ct-Ir))>3.141592653589793,!tr;)Vr=G;N&&(He[xt>>3]=rr,He[ft>>3]=_n)}else b[j>>2]=0,b[j+4>>2]=0,b[j+8>>2]=0,b[j+12>>2]=0,b[j+16>>2]=0,b[j+20>>2]=0,b[j+24>>2]=0,b[j+28>>2]=0;N=An+1|0}if(wa=M+8|0,M=b[wa>>2]|0,b[wa>>2]=0,M)An=N,ft=w;else{wi=45;break}}if((wi|0)==21)vi(22624,22646,35,22658);else if((wi|0)==23)vi(22678,22646,37,22658);else if((wi|0)==27)vi(22721,22646,61,22744);else if((wi|0)==45){e:do if((Ja|0)>0){for(wa=(N|0)==0,fi=N<<2,ma=(y|0)==0,mn=0,w=0;;){if(Qr=b[vo+(mn<<2)>>2]|0,wa)wi=73;else{if(An=no(fi)|0,!An){wi=50;break}if(Sn=no(fi)|0,!Sn){wi=52;break}t:do if(ma)C=0;else{for(N=0,C=0,j=y;M=va+(N<<5)|0,_e(b[j>>2]|0,M,b[Qr>>2]|0)|0?(b[An+(C<<2)>>2]=j,b[Sn+(C<<2)>>2]=M,tr=C+1|0):tr=C,j=b[j+8>>2]|0,j;)N=N+1|0,C=tr;if((tr|0)>0)if(M=b[An>>2]|0,(tr|0)==1)C=M;else for(xt=0,Ft=-1,C=M,ft=M;;){for(we=b[ft>>2]|0,M=0,j=0;N=b[b[An+(j<<2)>>2]>>2]|0,(N|0)==(we|0)?Pe=M:Pe=M+((_e(N,b[Sn+(j<<2)>>2]|0,b[we>>2]|0)|0)&1)|0,j=j+1|0,(j|0)!=(tr|0);)M=Pe;if(N=(Pe|0)>(Ft|0),C=N?ft:C,M=xt+1|0,(M|0)==(tr|0))break t;xt=M,Ft=N?Pe:Ft,ft=b[An+(M<<2)>>2]|0}else C=0}while(0);if(ci(An),ci(Sn),C){if(N=C+4|0,M=b[N>>2]|0,M)C=M+8|0;else if(b[C>>2]|0){wi=70;break}b[C>>2]=Qr,b[N>>2]=Qr}else wi=73}if((wi|0)==73){if(wi=0,w=b[Qr>>2]|0,w|0)do Sn=w,w=b[w+16>>2]|0,ci(Sn);while(w|0);ci(Qr),w=2}if(mn=mn+1|0,(mn|0)>=(Ja|0)){go=w;break e}}(wi|0)==50?vi(22863,22646,249,22882):(wi|0)==52?vi(22901,22646,252,22882):(wi|0)==70&&vi(22721,22646,61,22744)}else go=0;while(0);return ci(vo),ci(va),wi=go,wi|0}return 0}function _e(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0,Q=0,ue=0,we=0,Pe=0;if(!(gl(w,C)|0)||(w=ac(w)|0,we=+He[C>>3],M=+He[C+8>>3],M=w&M<0?M+6.283185307179586:M,y=b[y>>2]|0,!y))return y=0,y|0;if(w){w=0,C=y;e:for(;;){for(;j=+He[C>>3],ue=+He[C+8>>3],C=C+16|0,Pe=b[C>>2]|0,Pe=Pe|0?Pe:y,G=+He[Pe>>3],N=+He[Pe+8>>3],j>G?(Q=j,j=ue):(Q=G,G=j,j=N,N=ue),!!(we<G|we>Q);)if(C=b[C>>2]|0,!C){C=22;break e}if(ue=N<0?N+6.283185307179586:N,j=j<0?j+6.283185307179586:j,M=j==M|ue==M?M+-2220446049250313e-31:M,ue=ue+(we-G)/(Q-G)*(j-ue),(ue<0?ue+6.283185307179586:ue)>M&&(w=w^1),C=b[C>>2]|0,!C){C=22;break}}if((C|0)==22)return w|0}else{w=0,C=y;e:for(;;){for(;j=+He[C>>3],ue=+He[C+8>>3],C=C+16|0,Pe=b[C>>2]|0,Pe=Pe|0?Pe:y,G=+He[Pe>>3],N=+He[Pe+8>>3],j>G?(Q=j,j=ue):(Q=G,G=j,j=N,N=ue),!!(we<G|we>Q);)if(C=b[C>>2]|0,!C){C=22;break e}if(M=j==M|N==M?M+-2220446049250313e-31:M,N+(we-G)/(Q-G)*(j-N)>M&&(w=w^1),C=b[C>>2]|0,!C){C=22;break}}if((C|0)==22)return w|0}return 0}function Re(y,w,C,M,N){y=y|0,w=w|0,C=C|0,M=M|0,N=N|0;var G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0,Ft=0,tr=0,hr=0,Vr=0,_n=0,rr=0;if(rr=te,te=te+32|0,_n=rr+16|0,Vr=rr,G=Mr(y|0,w|0,52)|0,dt()|0,G=G&15,Ft=Mr(C|0,M|0,52)|0,dt()|0,(G|0)!=(Ft&15|0))return _n=1,te=rr,_n|0;if(we=Mr(y|0,w|0,45)|0,dt()|0,we=we&127,Pe=Mr(C|0,M|0,45)|0,dt()|0,Pe=Pe&127,Ft=(we|0)!=(Pe|0),Ft){if(Q=Pc(we,Pe)|0,(Q|0)==7)return _n=2,te=rr,_n|0;ue=Pc(Pe,we)|0,(ue|0)==7?vi(22925,22949,151,22959):(tr=Q,j=ue)}else tr=0,j=0;ft=Ma(we)|0,xt=Ma(Pe)|0,b[_n>>2]=0,b[_n+4>>2]=0,b[_n+8>>2]=0,b[_n+12>>2]=0;do if(tr){if(Pe=b[4304+(we*28|0)+(tr<<2)>>2]|0,Q=(Pe|0)>0,xt)if(Q){we=0,ue=C,Q=M;do ue=jp(ue,Q)|0,Q=dt()|0,j=Zr(j)|0,(j|0)==1&&(j=Zr(1)|0),we=we+1|0;while((we|0)!=(Pe|0));Pe=j,we=ue,ue=Q}else Pe=j,we=C,ue=M;else if(Q){we=0,ue=C,Q=M;do ue=Mc(ue,Q)|0,Q=dt()|0,j=Zr(j)|0,we=we+1|0;while((we|0)!=(Pe|0));Pe=j,we=ue,ue=Q}else Pe=j,we=C,ue=M;if(uc(we,ue,_n)|0,Ft||vi(22972,22949,181,22959),Q=(ft|0)!=0,j=(xt|0)!=0,Q&j&&vi(22999,22949,182,22959),Q){if(j=Va(y,w)|0,wt[22032+(j*7|0)+tr>>0]|0){G=3;break}ue=b[21200+(j*28|0)+(tr<<2)>>2]|0,we=ue,hr=26}else if(j){if(j=Va(we,ue)|0,wt[22032+(j*7|0)+Pe>>0]|0){G=4;break}we=0,ue=b[21200+(Pe*28|0)+(j<<2)>>2]|0,hr=26}else j=0;if((hr|0)==26)if((ue|0)<=-1&&vi(23030,22949,212,22959),(we|0)<=-1&&vi(23053,22949,213,22959),(ue|0)>0){Q=_n+4|0,j=0;do ur(Q),j=j+1|0;while((j|0)!=(ue|0));j=we}else j=we;if(b[Vr>>2]=0,b[Vr+4>>2]=0,b[Vr+8>>2]=0,kt(Vr,tr),G|0)for(;xu(G)|0?St(Vr):ar(Vr),(G|0)>1;)G=G+-1|0;if((j|0)>0){G=0;do ur(Vr),G=G+1|0;while((G|0)!=(j|0))}hr=_n+4|0,mi(hr,Vr,hr),ja(hr),hr=50}else if(uc(C,M,_n)|0,(ft|0)!=0&(xt|0)!=0)if((Pe|0)!=(we|0)&&vi(23077,22949,243,22959),j=Va(y,w)|0,G=Va(C,M)|0,wt[22032+(j*7|0)+G>>0]|0)G=5;else if(j=b[21200+(j*28|0)+(G<<2)>>2]|0,(j|0)>0){Q=_n+4|0,G=0;do ur(Q),G=G+1|0;while((G|0)!=(j|0));hr=50}else hr=50;else hr=50;while(0);return(hr|0)==50&&(G=_n+4|0,b[N>>2]=b[G>>2],b[N+4>>2]=b[G+4>>2],b[N+8>>2]=b[G+8>>2],G=0),_n=G,te=rr,_n|0}function Fe(y,w,C,M){y=y|0,w=w|0,C=C|0,M=M|0;var N=0,G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0,Ft=0,tr=0,hr=0,Vr=0,_n=0,rr=0;if(tr=te,te=te+48|0,j=tr+36|0,Q=tr+24|0,ue=tr+12|0,we=tr,G=Mr(y|0,w|0,52)|0,dt()|0,G=G&15,xt=Mr(y|0,w|0,45)|0,dt()|0,xt=xt&127,Pe=Ma(xt)|0,on(G|0,0,52)|0,Vr=dt()|0|134225919,hr=M,b[hr>>2]=-1,b[hr+4>>2]=Vr,!G)return(b[C>>2]|0)>1||(b[C+4>>2]|0)>1||(b[C+8>>2]|0)>1||(N=kl(xt,Al(C)|0)|0,(N|0)==127)?(Vr=1,te=tr,Vr|0):(Ft=on(N|0,0,45)|0,hr=dt()|0,xt=M,hr=b[xt+4>>2]&-1040385|hr,Vr=M,b[Vr>>2]=b[xt>>2]|Ft,b[Vr+4>>2]=hr,Vr=0,te=tr,Vr|0);for(b[j>>2]=b[C>>2],b[j+4>>2]=b[C+4>>2],b[j+8>>2]=b[C+8>>2];b[Q>>2]=b[j>>2],b[Q+4>>2]=b[j+4>>2],b[Q+8>>2]=b[j+8>>2],xu(G)|0?(Ue(j),b[ue>>2]=b[j>>2],b[ue+4>>2]=b[j+4>>2],b[ue+8>>2]=b[j+8>>2],St(ue)):(ht(j),b[ue>>2]=b[j>>2],b[ue+4>>2]=b[j+4>>2],b[ue+8>>2]=b[j+8>>2],ar(ue)),Qo(Q,ue,we),ja(we),hr=M,_n=b[hr>>2]|0,hr=b[hr+4>>2]|0,rr=(15-G|0)*3|0,C=on(7,0,rr|0)|0,hr=hr&~(dt()|0),rr=on(Al(we)|0,0,rr|0)|0,hr=dt()|0|hr,Vr=M,b[Vr>>2]=rr|_n&~C,b[Vr+4>>2]=hr,(G|0)>1;)G=G+-1|0;e:do if((b[j>>2]|0)<=1&&(b[j+4>>2]|0)<=1&&(b[j+8>>2]|0)<=1){G=Al(j)|0,Q=kl(xt,G)|0,(Q|0)==127?we=0:we=Ma(Q)|0;t:do if(G){if(Pe){if(j=21408+((Va(y,w)|0)*28|0)+(G<<2)|0,j=b[j>>2]|0,(j|0)>0){C=0;do G=kr(G)|0,C=C+1|0;while((C|0)!=(j|0))}if((G|0)==1){N=3;break e}C=kl(xt,G)|0,(C|0)==127&&vi(23104,22949,376,23134),Ma(C)|0?vi(23147,22949,377,23134):(Ft=j,ft=G,N=C)}else Ft=0,ft=G,N=Q;if(ue=b[4304+(xt*28|0)+(ft<<2)>>2]|0,(ue|0)<=-1&&vi(23178,22949,384,23134),!we){if((Ft|0)<=-1&&vi(23030,22949,417,23134),Ft|0){j=M,G=0,C=b[j>>2]|0,j=b[j+4>>2]|0;do C=Is(C,j)|0,j=dt()|0,rr=M,b[rr>>2]=C,b[rr+4>>2]=j,G=G+1|0;while((G|0)<(Ft|0))}if((ue|0)<=0){G=54;break}for(j=M,G=0,C=b[j>>2]|0,j=b[j+4>>2]|0;;)if(C=Is(C,j)|0,j=dt()|0,rr=M,b[rr>>2]=C,b[rr+4>>2]=j,G=G+1|0,(G|0)==(ue|0)){G=54;break t}}if(Q=Pc(N,xt)|0,(Q|0)==7&&vi(22925,22949,393,23134),G=M,C=b[G>>2]|0,G=b[G+4>>2]|0,(ue|0)>0){j=0;do C=Is(C,G)|0,G=dt()|0,rr=M,b[rr>>2]=C,b[rr+4>>2]=G,j=j+1|0;while((j|0)!=(ue|0))}if(C=Va(C,G)|0,rr=ic(N)|0,C=b[(rr?21824:21616)+(Q*28|0)+(C<<2)>>2]|0,(C|0)<=-1&&vi(23030,22949,412,23134),!C)G=54;else{Q=M,G=0,j=b[Q>>2]|0,Q=b[Q+4>>2]|0;do j=Oc(j,Q)|0,Q=dt()|0,rr=M,b[rr>>2]=j,b[rr+4>>2]=Q,G=G+1|0;while((G|0)<(C|0));G=54}}else if((Pe|0)!=0&(we|0)!=0)if(rr=Va(y,w)|0,G=M,G=21408+(rr*28|0)+((Va(b[G>>2]|0,b[G+4>>2]|0)|0)<<2)|0,G=b[G>>2]|0,(G|0)<=-1&&vi(23201,22949,433,23134),!G)N=Q,G=55;else{j=M,N=0,C=b[j>>2]|0,j=b[j+4>>2]|0;do C=Is(C,j)|0,j=dt()|0,rr=M,b[rr>>2]=C,b[rr+4>>2]=j,N=N+1|0;while((N|0)<(G|0));N=Q,G=54}else N=Q,G=54;while(0);if((G|0)==54&&we&&(G=55),(G|0)==55&&(rr=M,(Va(b[rr>>2]|0,b[rr+4>>2]|0)|0)==1)){N=4;break}rr=M,Vr=b[rr>>2]|0,rr=b[rr+4>>2]&-1040385,_n=on(N|0,0,45)|0,rr=rr|(dt()|0),N=M,b[N>>2]=Vr|_n,b[N+4>>2]=rr,N=0}else N=2;while(0);return rr=N,te=tr,rr|0}function Ne(y,w,C,M,N){y=y|0,w=w|0,C=C|0,M=M|0,N=N|0;var G=0,j=0;return j=te,te=te+16|0,G=j,y=Re(y,w,C,M,G)|0,y||(Oi(G,N),y=0),te=j,y|0}function Je(y,w,C,M){y=y|0,w=w|0,C=C|0,M=M|0;var N=0,G=0;return N=te,te=te+16|0,G=N,na(C,G),M=Fe(y,w,G,M)|0,te=N,M|0}function Ze(y,w,C,M){y=y|0,w=w|0,C=C|0,M=M|0;var N=0,G=0,j=0;return j=te,te=te+32|0,N=j+12|0,G=j,!(Re(y,w,y,w,N)|0)&&!(Re(y,w,C,M,G)|0)?y=Pn(N,G)|0:y=-1,te=j,y|0}function ct(y,w,C,M){y=y|0,w=w|0,C=C|0,M=M|0;var N=0,G=0,j=0;return j=te,te=te+32|0,N=j+12|0,G=j,!(Re(y,w,y,w,N)|0)&&!(Re(y,w,C,M,G)|0)?y=Pn(N,G)|0:y=-1,te=j,(y>>>31^1)+y|0}function Xe(y,w,C,M,N){y=y|0,w=w|0,C=C|0,M=M|0,N=N|0;var G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0,Ft=0,tr=0,hr=0,Vr=0,_n=0,rr=0,Ir=0,Ct=0,An=0,Sn=0;if(An=te,te=te+48|0,G=An+24|0,j=An+12|0,Ct=An,!(Re(y,w,y,w,G)|0)&&!(Re(y,w,C,M,j)|0)){if(Ir=Pn(G,j)|0,(Ir|0)<0)return Ct=Ir,te=An,Ct|0;for(b[G>>2]=0,b[G+4>>2]=0,b[G+8>>2]=0,b[j>>2]=0,b[j+4>>2]=0,b[j+8>>2]=0,Re(y,w,y,w,G)|0,Re(y,w,C,M,j)|0,Dn(G),Dn(j),Ir?(Pe=b[G>>2]|0,Ft=+(Ir|0),Vr=G+4|0,ft=b[Vr>>2]|0,_n=G+8|0,xt=b[_n>>2]|0,rr=G,C=Pe,M=ft,G=xt,tr=+((b[j>>2]|0)-Pe|0)/Ft,hr=+((b[j+4>>2]|0)-ft|0)/Ft,Ft=+((b[j+8>>2]|0)-xt|0)/Ft):(M=G+4|0,xt=G+8|0,Vr=M,_n=xt,rr=G,C=b[G>>2]|0,M=b[M>>2]|0,G=b[xt>>2]|0,tr=0,hr=0,Ft=0),b[Ct>>2]=C,xt=Ct+4|0,b[xt>>2]=M,ft=Ct+8|0,b[ft>>2]=G,Pe=0;;){ue=+(Pe|0),Sn=tr*ue+ +(C|0),Q=hr*ue+ +(b[Vr>>2]|0),ue=Ft*ue+ +(b[_n>>2]|0),M=~~+Ic(+Sn),j=~~+Ic(+Q),C=~~+Ic(+ue),Sn=+Fr(+(+(M|0)-Sn)),Q=+Fr(+(+(j|0)-Q)),ue=+Fr(+(+(C|0)-ue));do if(Sn>Q&Sn>ue)M=0-(j+C)|0,G=j;else if(we=0-M|0,Q>ue){G=we-C|0;break}else{G=j,C=we-j|0;break}while(0);if(b[Ct>>2]=M,b[xt>>2]=G,b[ft>>2]=C,ia(Ct),Fe(y,w,Ct,N+(Pe<<3)|0)|0,(Pe|0)==(Ir|0))break;Pe=Pe+1|0,C=b[rr>>2]|0}return Ct=0,te=An,Ct|0}return Ct=-1,te=An,Ct|0}function st(y,w){y=y|0,w=w|0;var C=0;if(!w)return C=1,C|0;C=y,y=1;do y=qo(w&1|0?C:1,y)|0,w=w>>1,C=qo(C,C)|0;while(w|0);return y|0}function yt(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0;if(!(gl(w,C)|0)||(w=ac(w)|0,xt=+He[C>>3],M=+He[C+8>>3],M=w&M<0?M+6.283185307179586:M,ft=b[y>>2]|0,(ft|0)<=0))return ft=0,ft|0;if(Pe=b[y+4>>2]|0,w){w=0,C=-1,y=0;e:for(;;){for(we=y;j=+He[Pe+(we<<4)>>3],ue=+He[Pe+(we<<4)+8>>3],y=(C+2|0)%(ft|0)|0,G=+He[Pe+(y<<4)>>3],N=+He[Pe+(y<<4)+8>>3],j>G?(Q=j,j=ue):(Q=G,G=j,j=N,N=ue),!!(xt<G|xt>Q);)if(C=we+1|0,(C|0)<(ft|0))y=we,we=C,C=y;else{C=22;break e}if(ue=N<0?N+6.283185307179586:N,j=j<0?j+6.283185307179586:j,M=j==M|ue==M?M+-2220446049250313e-31:M,ue=ue+(xt-G)/(Q-G)*(j-ue),(ue<0?ue+6.283185307179586:ue)>M&&(w=w^1),y=we+1|0,(y|0)>=(ft|0)){C=22;break}else C=we}if((C|0)==22)return w|0}else{w=0,C=-1,y=0;e:for(;;){for(we=y;j=+He[Pe+(we<<4)>>3],ue=+He[Pe+(we<<4)+8>>3],y=(C+2|0)%(ft|0)|0,G=+He[Pe+(y<<4)>>3],N=+He[Pe+(y<<4)+8>>3],j>G?(Q=j,j=ue):(Q=G,G=j,j=N,N=ue),!!(xt<G|xt>Q);)if(C=we+1|0,(C|0)<(ft|0))y=we,we=C,C=y;else{C=22;break e}if(M=j==M|N==M?M+-2220446049250313e-31:M,N+(xt-G)/(Q-G)*(j-N)>M&&(w=w^1),y=we+1|0,(y|0)>=(ft|0)){C=22;break}else C=we}if((C|0)==22)return w|0}return 0}function Lt(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0,Ft=0,tr=0,hr=0,Vr=0,_n=0,rr=0;if(tr=b[y>>2]|0,!tr){b[w>>2]=0,b[w+4>>2]=0,b[w+8>>2]=0,b[w+12>>2]=0,b[w+16>>2]=0,b[w+20>>2]=0,b[w+24>>2]=0,b[w+28>>2]=0;return}if(hr=w+8|0,He[hr>>3]=17976931348623157e292,Vr=w+24|0,He[Vr>>3]=17976931348623157e292,He[w>>3]=-17976931348623157e292,_n=w+16|0,He[_n>>3]=-17976931348623157e292,!((tr|0)<=0)){for(xt=b[y+4>>2]|0,we=17976931348623157e292,Pe=-17976931348623157e292,ft=0,y=-1,G=17976931348623157e292,j=17976931348623157e292,ue=-17976931348623157e292,M=-17976931348623157e292,Ft=0;C=+He[xt+(Ft<<4)>>3],Q=+He[xt+(Ft<<4)+8>>3],y=y+2|0,N=+He[xt+(((y|0)==(tr|0)?0:y)<<4)+8>>3],C<G&&(He[hr>>3]=C,G=C),Q<j&&(He[Vr>>3]=Q,j=Q),C>ue?He[w>>3]=C:C=ue,Q>M&&(He[_n>>3]=Q,M=Q),we=Q>0&Q<we?Q:we,Pe=Q<0&Q>Pe?Q:Pe,ft=ft|+Fr(+(Q-N))>3.141592653589793,y=Ft+1|0,(y|0)!=(tr|0);)rr=Ft,ue=C,Ft=y,y=rr;ft&&(He[_n>>3]=Pe,He[Vr>>3]=we)}}function Jt(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0,Ft=0,tr=0,hr=0,Vr=0,_n=0,rr=0,Ir=0,Ct=0,An=0,Sn=0,Qr=0;if(tr=b[y>>2]|0,tr){if(hr=w+8|0,He[hr>>3]=17976931348623157e292,Vr=w+24|0,He[Vr>>3]=17976931348623157e292,He[w>>3]=-17976931348623157e292,_n=w+16|0,He[_n>>3]=-17976931348623157e292,(tr|0)>0){for(N=b[y+4>>2]|0,xt=17976931348623157e292,Ft=-17976931348623157e292,M=0,C=-1,ue=17976931348623157e292,we=17976931348623157e292,ft=-17976931348623157e292,j=-17976931348623157e292,rr=0;G=+He[N+(rr<<4)>>3],Pe=+He[N+(rr<<4)+8>>3],Sn=C+2|0,Q=+He[N+(((Sn|0)==(tr|0)?0:Sn)<<4)+8>>3],G<ue&&(He[hr>>3]=G,ue=G),Pe<we&&(He[Vr>>3]=Pe,we=Pe),G>ft?He[w>>3]=G:G=ft,Pe>j&&(He[_n>>3]=Pe,j=Pe),xt=Pe>0&Pe<xt?Pe:xt,Ft=Pe<0&Pe>Ft?Pe:Ft,M=M|+Fr(+(Pe-Q))>3.141592653589793,C=rr+1|0,(C|0)!=(tr|0);)Sn=rr,ft=G,rr=C,C=Sn;M&&(He[_n>>3]=Ft,He[Vr>>3]=xt)}}else b[w>>2]=0,b[w+4>>2]=0,b[w+8>>2]=0,b[w+12>>2]=0,b[w+16>>2]=0,b[w+20>>2]=0,b[w+24>>2]=0,b[w+28>>2]=0;if(Sn=y+8|0,C=b[Sn>>2]|0,!((C|0)<=0)){An=y+12|0,Ct=0;do if(N=b[An>>2]|0,M=Ct,Ct=Ct+1|0,Vr=w+(Ct<<5)|0,_n=b[N+(M<<3)>>2]|0,_n){if(rr=w+(Ct<<5)+8|0,He[rr>>3]=17976931348623157e292,y=w+(Ct<<5)+24|0,He[y>>3]=17976931348623157e292,He[Vr>>3]=-17976931348623157e292,Ir=w+(Ct<<5)+16|0,He[Ir>>3]=-17976931348623157e292,(_n|0)>0){for(tr=b[N+(M<<3)+4>>2]|0,xt=17976931348623157e292,Ft=-17976931348623157e292,N=0,M=-1,hr=0,ue=17976931348623157e292,we=17976931348623157e292,Pe=-17976931348623157e292,j=-17976931348623157e292;G=+He[tr+(hr<<4)>>3],ft=+He[tr+(hr<<4)+8>>3],M=M+2|0,Q=+He[tr+(((M|0)==(_n|0)?0:M)<<4)+8>>3],G<ue&&(He[rr>>3]=G,ue=G),ft<we&&(He[y>>3]=ft,we=ft),G>Pe?He[Vr>>3]=G:G=Pe,ft>j&&(He[Ir>>3]=ft,j=ft),xt=ft>0&ft<xt?ft:xt,Ft=ft<0&ft>Ft?ft:Ft,N=N|+Fr(+(ft-Q))>3.141592653589793,M=hr+1|0,(M|0)!=(_n|0);)Qr=hr,hr=M,Pe=G,M=Qr;N&&(He[Ir>>3]=Ft,He[y>>3]=xt)}}else b[Vr>>2]=0,b[Vr+4>>2]=0,b[Vr+8>>2]=0,b[Vr+12>>2]=0,b[Vr+16>>2]=0,b[Vr+20>>2]=0,b[Vr+24>>2]=0,b[Vr+28>>2]=0,C=b[Sn>>2]|0;while((Ct|0)<(C|0))}}function Ht(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0;if(!(yt(y,w,C)|0))return N=0,N|0;if(N=y+8|0,(b[N>>2]|0)<=0)return N=1,N|0;for(M=y+12|0,y=0;;){if(G=y,y=y+1|0,yt((b[M>>2]|0)+(G<<3)|0,w+(y<<5)|0,C)|0){y=0,M=6;break}if((y|0)>=(b[N>>2]|0)){y=1,M=6;break}}return(M|0)==6?y|0:0}function er(){return 8}function pr(){return 16}function Sr(){return 168}function Tr(){return 8}function Xr(){return 16}function Tn(){return 12}function Ln(){return 8}function In(y){y=y|0;var w=0,C=0;return C=+He[y>>3],w=+He[y+8>>3],+ +yi(+(C*C+w*w))}function zi(y,w,C,M,N){y=y|0,w=w|0,C=C|0,M=M|0,N=N|0;var G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0;we=+He[y>>3],ue=+He[w>>3]-we,Q=+He[y+8>>3],j=+He[w+8>>3]-Q,ft=+He[C>>3],G=+He[M>>3]-ft,xt=+He[C+8>>3],Pe=+He[M+8>>3]-xt,G=(G*(Q-xt)-(we-ft)*Pe)/(ue*Pe-j*G),He[N>>3]=we+ue*G,He[N+8>>3]=Q+j*G}function $r(y,w){return y=y|0,w=w|0,+He[y>>3]!=+He[w>>3]?(w=0,w|0):(w=+He[y+8>>3]==+He[w+8>>3],w|0)}function pn(y,w){y=y|0,w=w|0;var C=0,M=0,N=0;return N=+He[y>>3]-+He[w>>3],M=+He[y+8>>3]-+He[w+8>>3],C=+He[y+16>>3]-+He[w+16>>3],+(N*N+M*M+C*C)}function li(y,w){y=y|0,w=w|0;var C=0,M=0,N=0;C=+He[y>>3],M=+vn(+C),C=+Gr(+C),He[w+16>>3]=C,C=+He[y+8>>3],N=M*+vn(+C),He[w>>3]=N,C=M*+Gr(+C),He[w+8>>3]=C}function Kn(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0,j=0,Q=0,ue=0,we=0;if(we=te,te=te+32|0,N=we+16|0,G=we,cf(y,w,N),j=nl(y,w)|0,ue=Va(y,w)|0,Cc(j,G),w=bu(j,b[N>>2]|0)|0,!(Ma(j)|0))return ue=w,te=we,ue|0;do switch(j|0){case 4:{y=0,C=14;break}case 14:{y=1,C=14;break}case 24:{y=2,C=14;break}case 38:{y=3,C=14;break}case 49:{y=4,C=14;break}case 58:{y=5,C=14;break}case 63:{y=6,C=14;break}case 72:{y=7,C=14;break}case 83:{y=8,C=14;break}case 97:{y=9,C=14;break}case 107:{y=10,C=14;break}case 117:{y=11,C=14;break}default:Q=0,M=0}while(0);return(C|0)==14&&(Q=b[22096+(y*24|0)+8>>2]|0,M=b[22096+(y*24|0)+16>>2]|0),y=b[N>>2]|0,(y|0)!=(b[G>>2]|0)&&(j=ic(j)|0,y=b[N>>2]|0,j|(y|0)==(M|0)&&(w=(w+1|0)%6|0)),(ue|0)==3&(y|0)==(M|0)?(ue=(w+5|0)%6|0,te=we,ue|0):(ue|0)==5&(y|0)==(Q|0)?(ue=(w+1|0)%6|0,te=we,ue|0):(ue=w,te=we,ue|0)}function qn(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0;return M=ei(y,w)|0,(C+-1|0)>>>0>5||(N=(M|0)!=0,(C|0)==1&N)?(C=-1,C|0):(M=Kn(y,w)|0,N?(C=(5-M+(b[22384+(C<<2)>>2]|0)|0)%5|0,C|0):(C=(6-M+(b[22416+(C<<2)>>2]|0)|0)%6|0,C|0))}function ri(y,w,C){y=y|0,w=w|0,C=C|0;var M=0;(w|0)>0?(M=io(w,4)|0,b[y>>2]=M,M||vi(23230,23253,40,23267)):b[y>>2]=0,b[y+4>>2]=w,b[y+8>>2]=0,b[y+12>>2]=C}function Gn(y){y=y|0;var w=0,C=0,M=0,N=0,G=0,j=0,Q=0;N=y+4|0,G=y+12|0,j=y+8|0;e:for(;;){for(C=b[N>>2]|0,w=0;;){if((w|0)>=(C|0))break e;if(M=b[y>>2]|0,Q=b[M+(w<<2)>>2]|0,!Q)w=w+1|0;else break}w=M+(~~(+Fr(+(+Oa(10,+ +(15-(b[G>>2]|0)|0))*(+He[Q>>3]+ +He[Q+8>>3])))%+(C|0))>>>0<<2)|0,C=b[w>>2]|0;t:do if(C|0){if(M=Q+32|0,(C|0)==(Q|0))b[w>>2]=b[M>>2];else{if(C=C+32|0,w=b[C>>2]|0,!w)break;for(;(w|0)!=(Q|0);)if(C=w+32|0,w=b[C>>2]|0,!w)break t;b[C>>2]=b[M>>2]}ci(Q),b[j>>2]=(b[j>>2]|0)+-1}while(0)}ci(b[y>>2]|0)}function zn(y){y=y|0;var w=0,C=0,M=0;for(M=b[y+4>>2]|0,C=0;;){if((C|0)>=(M|0)){w=0,C=4;break}if(w=b[(b[y>>2]|0)+(C<<2)>>2]|0,!w)C=C+1|0;else{C=4;break}}return(C|0)==4?w|0:0}function Do(y,w){y=y|0,w=w|0;var C=0,M=0,N=0,G=0;if(C=~~(+Fr(+(+Oa(10,+ +(15-(b[y+12>>2]|0)|0))*(+He[w>>3]+ +He[w+8>>3])))%+(b[y+4>>2]|0))>>>0,C=(b[y>>2]|0)+(C<<2)|0,M=b[C>>2]|0,!M)return G=1,G|0;G=w+32|0;do if((M|0)!=(w|0)){if(C=b[M+32>>2]|0,!C)return G=1,G|0;for(N=C;;){if((N|0)==(w|0)){N=8;break}if(C=b[N+32>>2]|0,C)M=N,N=C;else{C=1,N=10;break}}if((N|0)==8){b[M+32>>2]=b[G>>2];break}else if((N|0)==10)return C|0}else b[C>>2]=b[G>>2];while(0);return ci(w),G=y+8|0,b[G>>2]=(b[G>>2]|0)+-1,G=0,G|0}function mo(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0;G=no(40)|0,G||vi(23283,23253,98,23296),b[G>>2]=b[w>>2],b[G+4>>2]=b[w+4>>2],b[G+8>>2]=b[w+8>>2],b[G+12>>2]=b[w+12>>2],N=G+16|0,b[N>>2]=b[C>>2],b[N+4>>2]=b[C+4>>2],b[N+8>>2]=b[C+8>>2],b[N+12>>2]=b[C+12>>2],b[G+32>>2]=0,N=~~(+Fr(+(+Oa(10,+ +(15-(b[y+12>>2]|0)|0))*(+He[w>>3]+ +He[w+8>>3])))%+(b[y+4>>2]|0))>>>0,N=(b[y>>2]|0)+(N<<2)|0,M=b[N>>2]|0;do if(!M)b[N>>2]=G;else{for(;!(af(M,w)|0&&af(M+16|0,C)|0);)if(N=b[M+32>>2]|0,M=N|0?N:M,!(b[M+32>>2]|0)){j=10;break}if((j|0)==10){b[M+32>>2]=G;break}return ci(G),j=M,j|0}while(0);return j=y+8|0,b[j>>2]=(b[j>>2]|0)+1,j=G,j|0}function Rs(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0;if(N=~~(+Fr(+(+Oa(10,+ +(15-(b[y+12>>2]|0)|0))*(+He[w>>3]+ +He[w+8>>3])))%+(b[y+4>>2]|0))>>>0,N=b[(b[y>>2]|0)+(N<<2)>>2]|0,!N)return C=0,C|0;if(!C){for(y=N;;){if(af(y,w)|0){M=10;break}if(y=b[y+32>>2]|0,!y){y=0,M=10;break}}if((M|0)==10)return y|0}for(y=N;;){if(af(y,w)|0&&af(y+16|0,C)|0){M=10;break}if(y=b[y+32>>2]|0,!y){y=0,M=10;break}}return(M|0)==10?y|0:0}function ns(y,w){y=y|0,w=w|0;var C=0;if(C=~~(+Fr(+(+Oa(10,+ +(15-(b[y+12>>2]|0)|0))*(+He[w>>3]+ +He[w+8>>3])))%+(b[y+4>>2]|0))>>>0,y=b[(b[y>>2]|0)+(C<<2)>>2]|0,!y)return C=0,C|0;for(;;){if(af(y,w)|0){w=5;break}if(y=b[y+32>>2]|0,!y){y=0,w=5;break}}return(w|0)==5?y|0:0}function ro(){return 23312}function To(y){return y=+y,+ +zl(+y)}function Ls(y){return y=+y,~~+To(y)|0}function no(y){y=y|0;var w=0,C=0,M=0,N=0,G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0,Ft=0,tr=0,hr=0,Vr=0,_n=0,rr=0,Ir=0,Ct=0,An=0;An=te,te=te+16|0,xt=An;do if(y>>>0<245){if(we=y>>>0<11?16:y+11&-8,y=we>>>3,ft=b[5829]|0,C=ft>>>y,C&3|0)return w=(C&1^1)+y|0,y=23356+(w<<1<<2)|0,C=y+8|0,M=b[C>>2]|0,N=M+8|0,G=b[N>>2]|0,(G|0)==(y|0)?b[5829]=ft&~(1<<w):(b[G+12>>2]=y,b[C>>2]=G),Ct=w<<3,b[M+4>>2]=Ct|3,Ct=M+Ct+4|0,b[Ct>>2]=b[Ct>>2]|1,Ct=N,te=An,Ct|0;if(Pe=b[5831]|0,we>>>0>Pe>>>0){if(C|0)return w=2<<y,w=C<<y&(w|0-w),w=(w&0-w)+-1|0,Q=w>>>12&16,w=w>>>Q,C=w>>>5&8,w=w>>>C,G=w>>>2&4,w=w>>>G,y=w>>>1&2,w=w>>>y,M=w>>>1&1,M=(C|Q|G|y|M)+(w>>>M)|0,w=23356+(M<<1<<2)|0,y=w+8|0,G=b[y>>2]|0,Q=G+8|0,C=b[Q>>2]|0,(C|0)==(w|0)?(y=ft&~(1<<M),b[5829]=y):(b[C+12>>2]=w,b[y>>2]=C,y=ft),Ct=M<<3,j=Ct-we|0,b[G+4>>2]=we|3,N=G+we|0,b[N+4>>2]=j|1,b[G+Ct>>2]=j,Pe|0&&(M=b[5834]|0,w=Pe>>>3,C=23356+(w<<1<<2)|0,w=1<<w,y&w?(y=C+8|0,w=b[y>>2]|0):(b[5829]=y|w,w=C,y=C+8|0),b[y>>2]=M,b[w+12>>2]=M,b[M+8>>2]=w,b[M+12>>2]=C),b[5831]=j,b[5834]=N,Ct=Q,te=An,Ct|0;if(G=b[5830]|0,G){for(C=(G&0-G)+-1|0,N=C>>>12&16,C=C>>>N,M=C>>>5&8,C=C>>>M,j=C>>>2&4,C=C>>>j,Q=C>>>1&2,C=C>>>Q,ue=C>>>1&1,ue=b[23620+((M|N|j|Q|ue)+(C>>>ue)<<2)>>2]|0,C=ue,Q=ue,ue=(b[ue+4>>2]&-8)-we|0;y=b[C+16>>2]|0,!(!y&&(y=b[C+20>>2]|0,!y));)j=(b[y+4>>2]&-8)-we|0,N=j>>>0<ue>>>0,C=y,Q=N?y:Q,ue=N?j:ue;if(j=Q+we|0,j>>>0>Q>>>0){N=b[Q+24>>2]|0,w=b[Q+12>>2]|0;do if((w|0)==(Q|0)){if(y=Q+20|0,w=b[y>>2]|0,!w&&(y=Q+16|0,w=b[y>>2]|0,!w)){C=0;break}for(;;)if(M=w+20|0,C=b[M>>2]|0,C)w=C,y=M;else if(M=w+16|0,C=b[M>>2]|0,C)w=C,y=M;else break;b[y>>2]=0,C=w}else C=b[Q+8>>2]|0,b[C+12>>2]=w,b[w+8>>2]=C,C=w;while(0);do if(N|0){if(w=b[Q+28>>2]|0,y=23620+(w<<2)|0,(Q|0)==(b[y>>2]|0)){if(b[y>>2]=C,!C){b[5830]=G&~(1<<w);break}}else if(Ct=N+16|0,b[((b[Ct>>2]|0)==(Q|0)?Ct:N+20|0)>>2]=C,!C)break;b[C+24>>2]=N,w=b[Q+16>>2]|0,w|0&&(b[C+16>>2]=w,b[w+24>>2]=C),w=b[Q+20>>2]|0,w|0&&(b[C+20>>2]=w,b[w+24>>2]=C)}while(0);return ue>>>0<16?(Ct=ue+we|0,b[Q+4>>2]=Ct|3,Ct=Q+Ct+4|0,b[Ct>>2]=b[Ct>>2]|1):(b[Q+4>>2]=we|3,b[j+4>>2]=ue|1,b[j+ue>>2]=ue,Pe|0&&(M=b[5834]|0,w=Pe>>>3,C=23356+(w<<1<<2)|0,w=1<<w,w&ft?(y=C+8|0,w=b[y>>2]|0):(b[5829]=w|ft,w=C,y=C+8|0),b[y>>2]=M,b[w+12>>2]=M,b[M+8>>2]=w,b[M+12>>2]=C),b[5831]=ue,b[5834]=j),Ct=Q+8|0,te=An,Ct|0}else ft=we}else ft=we}else ft=we}else if(y>>>0<=4294967231)if(y=y+11|0,we=y&-8,M=b[5830]|0,M){N=0-we|0,y=y>>>8,y?we>>>0>16777215?ue=31:(ft=(y+1048320|0)>>>16&8,hr=y<<ft,Q=(hr+520192|0)>>>16&4,hr=hr<<Q,ue=(hr+245760|0)>>>16&2,ue=14-(Q|ft|ue)+(hr<<ue>>>15)|0,ue=we>>>(ue+7|0)&1|ue<<1):ue=0,C=b[23620+(ue<<2)>>2]|0;e:do if(!C)C=0,y=0,hr=61;else for(y=0,Q=we<<((ue|0)==31?0:25-(ue>>>1)|0),G=0;;){if(j=(b[C+4>>2]&-8)-we|0,j>>>0<N>>>0)if(j)y=C,N=j;else{y=C,N=0,hr=65;break e}if(hr=b[C+20>>2]|0,C=b[C+16+(Q>>>31<<2)>>2]|0,G=(hr|0)==0|(hr|0)==(C|0)?G:hr,C)Q=Q<<1;else{C=G,hr=61;break}}while(0);if((hr|0)==61){if((C|0)==0&(y|0)==0){if(y=2<<ue,y=(y|0-y)&M,!y){ft=we;break}ft=(y&0-y)+-1|0,j=ft>>>12&16,ft=ft>>>j,G=ft>>>5&8,ft=ft>>>G,Q=ft>>>2&4,ft=ft>>>Q,ue=ft>>>1&2,ft=ft>>>ue,C=ft>>>1&1,y=0,C=b[23620+((G|j|Q|ue|C)+(ft>>>C)<<2)>>2]|0}C?hr=65:(Q=y,j=N)}if((hr|0)==65)for(G=C;;)if(ft=(b[G+4>>2]&-8)-we|0,C=ft>>>0<N>>>0,N=C?ft:N,y=C?G:y,C=b[G+16>>2]|0,C||(C=b[G+20>>2]|0),C)G=C;else{Q=y,j=N;break}if(Q|0&&j>>>0<((b[5831]|0)-we|0)>>>0&&(Pe=Q+we|0,Pe>>>0>Q>>>0)){G=b[Q+24>>2]|0,w=b[Q+12>>2]|0;do if((w|0)==(Q|0)){if(y=Q+20|0,w=b[y>>2]|0,!w&&(y=Q+16|0,w=b[y>>2]|0,!w)){w=0;break}for(;;)if(N=w+20|0,C=b[N>>2]|0,C)w=C,y=N;else if(N=w+16|0,C=b[N>>2]|0,C)w=C,y=N;else break;b[y>>2]=0}else Ct=b[Q+8>>2]|0,b[Ct+12>>2]=w,b[w+8>>2]=Ct;while(0);do if(G){if(y=b[Q+28>>2]|0,C=23620+(y<<2)|0,(Q|0)==(b[C>>2]|0)){if(b[C>>2]=w,!w){M=M&~(1<<y),b[5830]=M;break}}else if(Ct=G+16|0,b[((b[Ct>>2]|0)==(Q|0)?Ct:G+20|0)>>2]=w,!w)break;b[w+24>>2]=G,y=b[Q+16>>2]|0,y|0&&(b[w+16>>2]=y,b[y+24>>2]=w),y=b[Q+20>>2]|0,y&&(b[w+20>>2]=y,b[y+24>>2]=w)}while(0);e:do if(j>>>0<16)Ct=j+we|0,b[Q+4>>2]=Ct|3,Ct=Q+Ct+4|0,b[Ct>>2]=b[Ct>>2]|1;else{if(b[Q+4>>2]=we|3,b[Pe+4>>2]=j|1,b[Pe+j>>2]=j,w=j>>>3,j>>>0<256){C=23356+(w<<1<<2)|0,y=b[5829]|0,w=1<<w,y&w?(y=C+8|0,w=b[y>>2]|0):(b[5829]=y|w,w=C,y=C+8|0),b[y>>2]=Pe,b[w+12>>2]=Pe,b[Pe+8>>2]=w,b[Pe+12>>2]=C;break}if(w=j>>>8,w?j>>>0>16777215?C=31:(Ir=(w+1048320|0)>>>16&8,Ct=w<<Ir,rr=(Ct+520192|0)>>>16&4,Ct=Ct<<rr,C=(Ct+245760|0)>>>16&2,C=14-(rr|Ir|C)+(Ct<<C>>>15)|0,C=j>>>(C+7|0)&1|C<<1):C=0,w=23620+(C<<2)|0,b[Pe+28>>2]=C,y=Pe+16|0,b[y+4>>2]=0,b[y>>2]=0,y=1<<C,!(M&y)){b[5830]=M|y,b[w>>2]=Pe,b[Pe+24>>2]=w,b[Pe+12>>2]=Pe,b[Pe+8>>2]=Pe;break}w=b[w>>2]|0;t:do if((b[w+4>>2]&-8|0)!=(j|0)){for(M=j<<((C|0)==31?0:25-(C>>>1)|0);C=w+16+(M>>>31<<2)|0,y=b[C>>2]|0,!!y;)if((b[y+4>>2]&-8|0)==(j|0)){w=y;break t}else M=M<<1,w=y;b[C>>2]=Pe,b[Pe+24>>2]=w,b[Pe+12>>2]=Pe,b[Pe+8>>2]=Pe;break e}while(0);Ir=w+8|0,Ct=b[Ir>>2]|0,b[Ct+12>>2]=Pe,b[Ir>>2]=Pe,b[Pe+8>>2]=Ct,b[Pe+12>>2]=w,b[Pe+24>>2]=0}while(0);return Ct=Q+8|0,te=An,Ct|0}else ft=we}else ft=we;else ft=-1;while(0);if(C=b[5831]|0,C>>>0>=ft>>>0)return w=C-ft|0,y=b[5834]|0,w>>>0>15?(Ct=y+ft|0,b[5834]=Ct,b[5831]=w,b[Ct+4>>2]=w|1,b[y+C>>2]=w,b[y+4>>2]=ft|3):(b[5831]=0,b[5834]=0,b[y+4>>2]=C|3,Ct=y+C+4|0,b[Ct>>2]=b[Ct>>2]|1),Ct=y+8|0,te=An,Ct|0;if(j=b[5832]|0,j>>>0>ft>>>0)return rr=j-ft|0,b[5832]=rr,Ct=b[5835]|0,Ir=Ct+ft|0,b[5835]=Ir,b[Ir+4>>2]=rr|1,b[Ct+4>>2]=ft|3,Ct=Ct+8|0,te=An,Ct|0;if(b[5947]|0?y=b[5949]|0:(b[5949]=4096,b[5948]=4096,b[5950]=-1,b[5951]=-1,b[5952]=0,b[5940]=0,b[5947]=xt&-16^1431655768,y=4096),Q=ft+48|0,ue=ft+47|0,G=y+ue|0,N=0-y|0,we=G&N,we>>>0<=ft>>>0||(y=b[5939]|0,y|0&&(Pe=b[5937]|0,xt=Pe+we|0,xt>>>0<=Pe>>>0|xt>>>0>y>>>0)))return Ct=0,te=An,Ct|0;e:do if(b[5940]&4)w=0,hr=143;else{C=b[5835]|0;t:do if(C){for(M=23764;xt=b[M>>2]|0,!(xt>>>0<=C>>>0&&(xt+(b[M+4>>2]|0)|0)>>>0>C>>>0);)if(y=b[M+8>>2]|0,y)M=y;else{hr=128;break t}if(w=G-j&N,w>>>0<2147483647)if(y=su(w|0)|0,(y|0)==((b[M>>2]|0)+(b[M+4>>2]|0)|0)){if((y|0)!=-1){j=w,G=y,hr=145;break e}}else M=y,hr=136;else w=0}else hr=128;while(0);do if((hr|0)==128)if(C=su(0)|0,(C|0)!=-1&&(w=C,Ft=b[5948]|0,tr=Ft+-1|0,w=(tr&w|0?(tr+w&0-Ft)-w|0:0)+we|0,Ft=b[5937]|0,tr=w+Ft|0,w>>>0>ft>>>0&w>>>0<2147483647)){if(xt=b[5939]|0,xt|0&&tr>>>0<=Ft>>>0|tr>>>0>xt>>>0){w=0;break}if(y=su(w|0)|0,(y|0)==(C|0)){j=w,G=C,hr=145;break e}else M=y,hr=136}else w=0;while(0);do if((hr|0)==136){if(C=0-w|0,!(Q>>>0>w>>>0&(w>>>0<2147483647&(M|0)!=-1)))if((M|0)==-1){w=0;break}else{j=w,G=M,hr=145;break e}if(y=b[5949]|0,y=ue-w+y&0-y,y>>>0>=2147483647){j=w,G=M,hr=145;break e}if((su(y|0)|0)==-1){su(C|0)|0,w=0;break}else{j=y+w|0,G=M,hr=145;break e}}while(0);b[5940]=b[5940]|4,hr=143}while(0);if((hr|0)==143&&we>>>0<2147483647&&(rr=su(we|0)|0,tr=su(0)|0,Vr=tr-rr|0,_n=Vr>>>0>(ft+40|0)>>>0,!((rr|0)==-1|_n^1|rr>>>0<tr>>>0&((rr|0)!=-1&(tr|0)!=-1)^1))&&(j=_n?Vr:w,G=rr,hr=145),(hr|0)==145){w=(b[5937]|0)+j|0,b[5937]=w,w>>>0>(b[5938]|0)>>>0&&(b[5938]=w),ue=b[5835]|0;e:do if(ue){for(w=23764;;){if(y=b[w>>2]|0,C=b[w+4>>2]|0,(G|0)==(y+C|0)){hr=154;break}if(M=b[w+8>>2]|0,M)w=M;else break}if((hr|0)==154&&(Ir=w+4|0,(b[w+12>>2]&8|0)==0)&&G>>>0>ue>>>0&y>>>0<=ue>>>0){b[Ir>>2]=C+j,Ct=(b[5832]|0)+j|0,rr=ue+8|0,rr=rr&7|0?0-rr&7:0,Ir=ue+rr|0,rr=Ct-rr|0,b[5835]=Ir,b[5832]=rr,b[Ir+4>>2]=rr|1,b[ue+Ct+4>>2]=40,b[5836]=b[5951];break}for(G>>>0<(b[5833]|0)>>>0&&(b[5833]=G),C=G+j|0,w=23764;;){if((b[w>>2]|0)==(C|0)){hr=162;break}if(y=b[w+8>>2]|0,y)w=y;else break}if((hr|0)==162&&!(b[w+12>>2]&8|0)){b[w>>2]=G,Pe=w+4|0,b[Pe>>2]=(b[Pe>>2]|0)+j,Pe=G+8|0,Pe=G+(Pe&7|0?0-Pe&7:0)|0,w=C+8|0,w=C+(w&7|0?0-w&7:0)|0,we=Pe+ft|0,Q=w-Pe-ft|0,b[Pe+4>>2]=ft|3;t:do if((ue|0)==(w|0))Ct=(b[5832]|0)+Q|0,b[5832]=Ct,b[5835]=we,b[we+4>>2]=Ct|1;else{if((b[5834]|0)==(w|0)){Ct=(b[5831]|0)+Q|0,b[5831]=Ct,b[5834]=we,b[we+4>>2]=Ct|1,b[we+Ct>>2]=Ct;break}if(y=b[w+4>>2]|0,(y&3|0)==1){j=y&-8,M=y>>>3;r:do if(y>>>0<256)if(y=b[w+8>>2]|0,C=b[w+12>>2]|0,(C|0)==(y|0)){b[5829]=b[5829]&~(1<<M);break}else{b[y+12>>2]=C,b[C+8>>2]=y;break}else{G=b[w+24>>2]|0,y=b[w+12>>2]|0;do if((y|0)==(w|0)){if(C=w+16|0,M=C+4|0,y=b[M>>2]|0,y)C=M;else if(y=b[C>>2]|0,!y){y=0;break}for(;;)if(N=y+20|0,M=b[N>>2]|0,M)y=M,C=N;else if(N=y+16|0,M=b[N>>2]|0,M)y=M,C=N;else break;b[C>>2]=0}else Ct=b[w+8>>2]|0,b[Ct+12>>2]=y,b[y+8>>2]=Ct;while(0);if(!G)break;C=b[w+28>>2]|0,M=23620+(C<<2)|0;do if((b[M>>2]|0)!=(w|0)){if(Ct=G+16|0,b[((b[Ct>>2]|0)==(w|0)?Ct:G+20|0)>>2]=y,!y)break r}else{if(b[M>>2]=y,y|0)break;b[5830]=b[5830]&~(1<<C);break r}while(0);if(b[y+24>>2]=G,C=w+16|0,M=b[C>>2]|0,M|0&&(b[y+16>>2]=M,b[M+24>>2]=y),C=b[C+4>>2]|0,!C)break;b[y+20>>2]=C,b[C+24>>2]=y}while(0);w=w+j|0,N=j+Q|0}else N=Q;if(w=w+4|0,b[w>>2]=b[w>>2]&-2,b[we+4>>2]=N|1,b[we+N>>2]=N,w=N>>>3,N>>>0<256){C=23356+(w<<1<<2)|0,y=b[5829]|0,w=1<<w,y&w?(y=C+8|0,w=b[y>>2]|0):(b[5829]=y|w,w=C,y=C+8|0),b[y>>2]=we,b[w+12>>2]=we,b[we+8>>2]=w,b[we+12>>2]=C;break}w=N>>>8;do if(!w)M=0;else{if(N>>>0>16777215){M=31;break}Ir=(w+1048320|0)>>>16&8,Ct=w<<Ir,rr=(Ct+520192|0)>>>16&4,Ct=Ct<<rr,M=(Ct+245760|0)>>>16&2,M=14-(rr|Ir|M)+(Ct<<M>>>15)|0,M=N>>>(M+7|0)&1|M<<1}while(0);if(w=23620+(M<<2)|0,b[we+28>>2]=M,y=we+16|0,b[y+4>>2]=0,b[y>>2]=0,y=b[5830]|0,C=1<<M,!(y&C)){b[5830]=y|C,b[w>>2]=we,b[we+24>>2]=w,b[we+12>>2]=we,b[we+8>>2]=we;break}w=b[w>>2]|0;r:do if((b[w+4>>2]&-8|0)!=(N|0)){for(M=N<<((M|0)==31?0:25-(M>>>1)|0);C=w+16+(M>>>31<<2)|0,y=b[C>>2]|0,!!y;)if((b[y+4>>2]&-8|0)==(N|0)){w=y;break r}else M=M<<1,w=y;b[C>>2]=we,b[we+24>>2]=w,b[we+12>>2]=we,b[we+8>>2]=we;break t}while(0);Ir=w+8|0,Ct=b[Ir>>2]|0,b[Ct+12>>2]=we,b[Ir>>2]=we,b[we+8>>2]=Ct,b[we+12>>2]=w,b[we+24>>2]=0}while(0);return Ct=Pe+8|0,te=An,Ct|0}for(w=23764;y=b[w>>2]|0,!(y>>>0<=ue>>>0&&(Ct=y+(b[w+4>>2]|0)|0,Ct>>>0>ue>>>0));)w=b[w+8>>2]|0;N=Ct+-47|0,y=N+8|0,y=N+(y&7|0?0-y&7:0)|0,N=ue+16|0,y=y>>>0<N>>>0?ue:y,w=y+8|0,C=j+-40|0,rr=G+8|0,rr=rr&7|0?0-rr&7:0,Ir=G+rr|0,rr=C-rr|0,b[5835]=Ir,b[5832]=rr,b[Ir+4>>2]=rr|1,b[G+C+4>>2]=40,b[5836]=b[5951],C=y+4|0,b[C>>2]=27,b[w>>2]=b[5941],b[w+4>>2]=b[5942],b[w+8>>2]=b[5943],b[w+12>>2]=b[5944],b[5941]=G,b[5942]=j,b[5944]=0,b[5943]=w,w=y+24|0;do Ir=w,w=w+4|0,b[w>>2]=7;while((Ir+8|0)>>>0<Ct>>>0);if((y|0)!=(ue|0)){if(G=y-ue|0,b[C>>2]=b[C>>2]&-2,b[ue+4>>2]=G|1,b[y>>2]=G,w=G>>>3,G>>>0<256){C=23356+(w<<1<<2)|0,y=b[5829]|0,w=1<<w,y&w?(y=C+8|0,w=b[y>>2]|0):(b[5829]=y|w,w=C,y=C+8|0),b[y>>2]=ue,b[w+12>>2]=ue,b[ue+8>>2]=w,b[ue+12>>2]=C;break}if(w=G>>>8,w?G>>>0>16777215?M=31:(Ir=(w+1048320|0)>>>16&8,Ct=w<<Ir,rr=(Ct+520192|0)>>>16&4,Ct=Ct<<rr,M=(Ct+245760|0)>>>16&2,M=14-(rr|Ir|M)+(Ct<<M>>>15)|0,M=G>>>(M+7|0)&1|M<<1):M=0,C=23620+(M<<2)|0,b[ue+28>>2]=M,b[ue+20>>2]=0,b[N>>2]=0,w=b[5830]|0,y=1<<M,!(w&y)){b[5830]=w|y,b[C>>2]=ue,b[ue+24>>2]=C,b[ue+12>>2]=ue,b[ue+8>>2]=ue;break}w=b[C>>2]|0;t:do if((b[w+4>>2]&-8|0)!=(G|0)){for(M=G<<((M|0)==31?0:25-(M>>>1)|0);C=w+16+(M>>>31<<2)|0,y=b[C>>2]|0,!!y;)if((b[y+4>>2]&-8|0)==(G|0)){w=y;break t}else M=M<<1,w=y;b[C>>2]=ue,b[ue+24>>2]=w,b[ue+12>>2]=ue,b[ue+8>>2]=ue;break e}while(0);Ir=w+8|0,Ct=b[Ir>>2]|0,b[Ct+12>>2]=ue,b[Ir>>2]=ue,b[ue+8>>2]=Ct,b[ue+12>>2]=w,b[ue+24>>2]=0}}else Ct=b[5833]|0,(Ct|0)==0|G>>>0<Ct>>>0&&(b[5833]=G),b[5941]=G,b[5942]=j,b[5944]=0,b[5838]=b[5947],b[5837]=-1,b[5842]=23356,b[5841]=23356,b[5844]=23364,b[5843]=23364,b[5846]=23372,b[5845]=23372,b[5848]=23380,b[5847]=23380,b[5850]=23388,b[5849]=23388,b[5852]=23396,b[5851]=23396,b[5854]=23404,b[5853]=23404,b[5856]=23412,b[5855]=23412,b[5858]=23420,b[5857]=23420,b[5860]=23428,b[5859]=23428,b[5862]=23436,b[5861]=23436,b[5864]=23444,b[5863]=23444,b[5866]=23452,b[5865]=23452,b[5868]=23460,b[5867]=23460,b[5870]=23468,b[5869]=23468,b[5872]=23476,b[5871]=23476,b[5874]=23484,b[5873]=23484,b[5876]=23492,b[5875]=23492,b[5878]=23500,b[5877]=23500,b[5880]=23508,b[5879]=23508,b[5882]=23516,b[5881]=23516,b[5884]=23524,b[5883]=23524,b[5886]=23532,b[5885]=23532,b[5888]=23540,b[5887]=23540,b[5890]=23548,b[5889]=23548,b[5892]=23556,b[5891]=23556,b[5894]=23564,b[5893]=23564,b[5896]=23572,b[5895]=23572,b[5898]=23580,b[5897]=23580,b[5900]=23588,b[5899]=23588,b[5902]=23596,b[5901]=23596,b[5904]=23604,b[5903]=23604,Ct=j+-40|0,rr=G+8|0,rr=rr&7|0?0-rr&7:0,Ir=G+rr|0,rr=Ct-rr|0,b[5835]=Ir,b[5832]=rr,b[Ir+4>>2]=rr|1,b[G+Ct+4>>2]=40,b[5836]=b[5951];while(0);if(w=b[5832]|0,w>>>0>ft>>>0)return rr=w-ft|0,b[5832]=rr,Ct=b[5835]|0,Ir=Ct+ft|0,b[5835]=Ir,b[Ir+4>>2]=rr|1,b[Ct+4>>2]=ft|3,Ct=Ct+8|0,te=An,Ct|0}return Ct=ro()|0,b[Ct>>2]=12,Ct=0,te=An,Ct|0}function ci(y){y=y|0;var w=0,C=0,M=0,N=0,G=0,j=0,Q=0,ue=0;if(!y)return;C=y+-8|0,N=b[5833]|0,y=b[y+-4>>2]|0,w=y&-8,ue=C+w|0;do if(y&1)Q=C,j=C;else{if(M=b[C>>2]|0,!(y&3)||(j=C+(0-M)|0,G=M+w|0,j>>>0<N>>>0))return;if((b[5834]|0)==(j|0)){if(y=ue+4|0,w=b[y>>2]|0,(w&3|0)!=3){Q=j,w=G;break}b[5831]=G,b[y>>2]=w&-2,b[j+4>>2]=G|1,b[j+G>>2]=G;return}if(C=M>>>3,M>>>0<256)if(y=b[j+8>>2]|0,w=b[j+12>>2]|0,(w|0)==(y|0)){b[5829]=b[5829]&~(1<<C),Q=j,w=G;break}else{b[y+12>>2]=w,b[w+8>>2]=y,Q=j,w=G;break}N=b[j+24>>2]|0,y=b[j+12>>2]|0;do if((y|0)==(j|0)){if(w=j+16|0,C=w+4|0,y=b[C>>2]|0,y)w=C;else if(y=b[w>>2]|0,!y){y=0;break}for(;;)if(M=y+20|0,C=b[M>>2]|0,C)y=C,w=M;else if(M=y+16|0,C=b[M>>2]|0,C)y=C,w=M;else break;b[w>>2]=0}else Q=b[j+8>>2]|0,b[Q+12>>2]=y,b[y+8>>2]=Q;while(0);if(N){if(w=b[j+28>>2]|0,C=23620+(w<<2)|0,(b[C>>2]|0)==(j|0)){if(b[C>>2]=y,!y){b[5830]=b[5830]&~(1<<w),Q=j,w=G;break}}else if(Q=N+16|0,b[((b[Q>>2]|0)==(j|0)?Q:N+20|0)>>2]=y,!y){Q=j,w=G;break}b[y+24>>2]=N,w=j+16|0,C=b[w>>2]|0,C|0&&(b[y+16>>2]=C,b[C+24>>2]=y),w=b[w+4>>2]|0,w?(b[y+20>>2]=w,b[w+24>>2]=y,Q=j,w=G):(Q=j,w=G)}else Q=j,w=G}while(0);if(j>>>0>=ue>>>0||(y=ue+4|0,M=b[y>>2]|0,!(M&1)))return;if(M&2)b[y>>2]=M&-2,b[Q+4>>2]=w|1,b[j+w>>2]=w,N=w;else{if((b[5835]|0)==(ue|0)){if(ue=(b[5832]|0)+w|0,b[5832]=ue,b[5835]=Q,b[Q+4>>2]=ue|1,(Q|0)!=(b[5834]|0))return;b[5834]=0,b[5831]=0;return}if((b[5834]|0)==(ue|0)){ue=(b[5831]|0)+w|0,b[5831]=ue,b[5834]=j,b[Q+4>>2]=ue|1,b[j+ue>>2]=ue;return}N=(M&-8)+w|0,C=M>>>3;do if(M>>>0<256)if(w=b[ue+8>>2]|0,y=b[ue+12>>2]|0,(y|0)==(w|0)){b[5829]=b[5829]&~(1<<C);break}else{b[w+12>>2]=y,b[y+8>>2]=w;break}else{G=b[ue+24>>2]|0,y=b[ue+12>>2]|0;do if((y|0)==(ue|0)){if(w=ue+16|0,C=w+4|0,y=b[C>>2]|0,y)w=C;else if(y=b[w>>2]|0,!y){C=0;break}for(;;)if(M=y+20|0,C=b[M>>2]|0,C)y=C,w=M;else if(M=y+16|0,C=b[M>>2]|0,C)y=C,w=M;else break;b[w>>2]=0,C=y}else C=b[ue+8>>2]|0,b[C+12>>2]=y,b[y+8>>2]=C,C=y;while(0);if(G|0){if(y=b[ue+28>>2]|0,w=23620+(y<<2)|0,(b[w>>2]|0)==(ue|0)){if(b[w>>2]=C,!C){b[5830]=b[5830]&~(1<<y);break}}else if(M=G+16|0,b[((b[M>>2]|0)==(ue|0)?M:G+20|0)>>2]=C,!C)break;b[C+24>>2]=G,y=ue+16|0,w=b[y>>2]|0,w|0&&(b[C+16>>2]=w,b[w+24>>2]=C),y=b[y+4>>2]|0,y|0&&(b[C+20>>2]=y,b[y+24>>2]=C)}}while(0);if(b[Q+4>>2]=N|1,b[j+N>>2]=N,(Q|0)==(b[5834]|0)){b[5831]=N;return}}if(y=N>>>3,N>>>0<256){C=23356+(y<<1<<2)|0,w=b[5829]|0,y=1<<y,w&y?(w=C+8|0,y=b[w>>2]|0):(b[5829]=w|y,y=C,w=C+8|0),b[w>>2]=Q,b[y+12>>2]=Q,b[Q+8>>2]=y,b[Q+12>>2]=C;return}y=N>>>8,y?N>>>0>16777215?M=31:(j=(y+1048320|0)>>>16&8,ue=y<<j,G=(ue+520192|0)>>>16&4,ue=ue<<G,M=(ue+245760|0)>>>16&2,M=14-(G|j|M)+(ue<<M>>>15)|0,M=N>>>(M+7|0)&1|M<<1):M=0,y=23620+(M<<2)|0,b[Q+28>>2]=M,b[Q+20>>2]=0,b[Q+16>>2]=0,w=b[5830]|0,C=1<<M;e:do if(!(w&C))b[5830]=w|C,b[y>>2]=Q,b[Q+24>>2]=y,b[Q+12>>2]=Q,b[Q+8>>2]=Q;else{y=b[y>>2]|0;t:do if((b[y+4>>2]&-8|0)!=(N|0)){for(M=N<<((M|0)==31?0:25-(M>>>1)|0);C=y+16+(M>>>31<<2)|0,w=b[C>>2]|0,!!w;)if((b[w+4>>2]&-8|0)==(N|0)){y=w;break t}else M=M<<1,y=w;b[C>>2]=Q,b[Q+24>>2]=y,b[Q+12>>2]=Q,b[Q+8>>2]=Q;break e}while(0);j=y+8|0,ue=b[j>>2]|0,b[ue+12>>2]=Q,b[j>>2]=Q,b[Q+8>>2]=ue,b[Q+12>>2]=y,b[Q+24>>2]=0}while(0);if(ue=(b[5837]|0)+-1|0,b[5837]=ue,!(ue|0)){for(y=23772;y=b[y>>2]|0,y;)y=y+8|0;b[5837]=-1}}function io(y,w){y=y|0,w=w|0;var C=0;return y?(C=qo(w,y)|0,(w|y)>>>0>65535&&(C=((C>>>0)/(y>>>0)|0|0)==(w|0)?C:-1)):C=0,y=no(C)|0,!y||!(b[y+-4>>2]&3)||xa(y|0,0,C|0)|0,y|0}function bl(y,w,C,M){return y=y|0,w=w|0,C=C|0,M=M|0,C=y+C>>>0,Yn(w+M+(C>>>0<y>>>0|0)>>>0|0),C|0|0}function Ys(y,w,C,M){return y=y|0,w=w|0,C=C|0,M=M|0,M=w-M-(C>>>0>y>>>0|0)>>>0,Yn(M|0),y-C>>>0|0|0}function Uf(y){return y=y|0,(y?31-(fa(y^y-1)|0)|0:32)|0}function jf(y,w,C,M,N){y=y|0,w=w|0,C=C|0,M=M|0,N=N|0;var G=0,j=0,Q=0,ue=0,we=0,Pe=0,ft=0,xt=0,Ft=0,tr=0;if(Pe=y,ue=w,we=ue,j=C,xt=M,Q=xt,!we)return G=(N|0)!=0,Q?G?(b[N>>2]=y|0,b[N+4>>2]=w&0,xt=0,N=0,Yn(xt|0),N|0):(xt=0,N=0,Yn(xt|0),N|0):(G&&(b[N>>2]=(Pe>>>0)%(j>>>0),b[N+4>>2]=0),xt=0,N=(Pe>>>0)/(j>>>0)>>>0,Yn(xt|0),N|0);G=(Q|0)==0;do if(j){if(!G){if(G=(fa(Q|0)|0)-(fa(we|0)|0)|0,G>>>0<=31){ft=G+1|0,Q=31-G|0,w=G-31>>31,j=ft,y=Pe>>>(ft>>>0)&w|we<<Q,w=we>>>(ft>>>0)&w,G=0,Q=Pe<<Q;break}return N?(b[N>>2]=y|0,b[N+4>>2]=ue|w&0,xt=0,N=0,Yn(xt|0),N|0):(xt=0,N=0,Yn(xt|0),N|0)}if(G=j-1|0,G&j|0){Q=(fa(j|0)|0)+33-(fa(we|0)|0)|0,tr=64-Q|0,ft=32-Q|0,ue=ft>>31,Ft=Q-32|0,w=Ft>>31,j=Q,y=ft-1>>31&we>>>(Ft>>>0)|(we<<ft|Pe>>>(Q>>>0))&w,w=w&we>>>(Q>>>0),G=Pe<<tr&ue,Q=(we<<tr|Pe>>>(Ft>>>0))&ue|Pe<<ft&Q-33>>31;break}return N|0&&(b[N>>2]=G&Pe,b[N+4>>2]=0),(j|0)==1?(Ft=ue|w&0,tr=y|0|0,Yn(Ft|0),tr|0):(tr=Uf(j|0)|0,Ft=we>>>(tr>>>0)|0,tr=we<<32-tr|Pe>>>(tr>>>0)|0,Yn(Ft|0),tr|0)}else{if(G)return N|0&&(b[N>>2]=(we>>>0)%(j>>>0),b[N+4>>2]=0),Ft=0,tr=(we>>>0)/(j>>>0)>>>0,Yn(Ft|0),tr|0;if(!Pe)return N|0&&(b[N>>2]=0,b[N+4>>2]=(we>>>0)%(Q>>>0)),Ft=0,tr=(we>>>0)/(Q>>>0)>>>0,Yn(Ft|0),tr|0;if(G=Q-1|0,!(G&Q))return N|0&&(b[N>>2]=y|0,b[N+4>>2]=G&we|w&0),Ft=0,tr=we>>>((Uf(Q|0)|0)>>>0),Yn(Ft|0),tr|0;if(G=(fa(Q|0)|0)-(fa(we|0)|0)|0,G>>>0<=30){w=G+1|0,Q=31-G|0,j=w,y=we<<Q|Pe>>>(w>>>0),w=we>>>(w>>>0),G=0,Q=Pe<<Q;break}return N?(b[N>>2]=y|0,b[N+4>>2]=ue|w&0,Ft=0,tr=0,Yn(Ft|0),tr|0):(Ft=0,tr=0,Yn(Ft|0),tr|0)}while(0);if(!j)we=Q,ue=0,Q=0;else{ft=C|0|0,Pe=xt|M&0,we=bl(ft|0,Pe|0,-1,-1)|0,C=dt()|0,ue=Q,Q=0;do M=ue,ue=G>>>31|ue<<1,G=Q|G<<1,M=y<<1|M>>>31|0,xt=y>>>31|w<<1|0,Ys(we|0,C|0,M|0,xt|0)|0,tr=dt()|0,Ft=tr>>31|((tr|0)<0?-1:0)<<1,Q=Ft&1,y=Ys(M|0,xt|0,Ft&ft|0,(((tr|0)<0?-1:0)>>31|((tr|0)<0?-1:0)<<1)&Pe|0)|0,w=dt()|0,j=j-1|0;while(j|0);we=ue,ue=0}return j=0,N|0&&(b[N>>2]=y,b[N+4>>2]=w),Ft=(G|0)>>>31|(we|j)<<1|(j<<1|G>>>31)&0|ue,tr=(G<<1|0>>>31)&-2|Q,Yn(Ft|0),tr|0}function ou(y,w,C,M){y=y|0,w=w|0,C=C|0,M=M|0;var N=0,G=0;return G=te,te=te+16|0,N=G|0,jf(y,w,C,M,N)|0,te=G,Yn(b[N+4>>2]|0),b[N>>2]|0|0}function Mr(y,w,C){return y=y|0,w=w|0,C=C|0,(C|0)<32?(Yn(w>>>C|0),y>>>C|(w&(1<<C)-1)<<32-C):(Yn(0),w>>>C-32|0)}function on(y,w,C){return y=y|0,w=w|0,C=C|0,(C|0)<32?(Yn(w<<C|(y&(1<<C)-1<<32-C)>>>32-C|0),y<<C):(Yn(y<<C-32|0),0)}function xl(y,w){return y=+y,w=+w,y!=y?+w:w!=w?+y:+ju(+y,+w)}function Ic(y){return y=+y,y>=0?+fn(y+.5):+wo(y-.5)}function Xu(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0;if((C|0)>=8192)return Zi(y|0,w|0,C|0)|0,y|0;if(G=y|0,N=y+C|0,(y&3)==(w&3)){for(;y&3;){if(!C)return G|0;wt[y>>0]=wt[w>>0]|0,y=y+1|0,w=w+1|0,C=C-1|0}for(C=N&-4|0,M=C-64|0;(y|0)<=(M|0);)b[y>>2]=b[w>>2],b[y+4>>2]=b[w+4>>2],b[y+8>>2]=b[w+8>>2],b[y+12>>2]=b[w+12>>2],b[y+16>>2]=b[w+16>>2],b[y+20>>2]=b[w+20>>2],b[y+24>>2]=b[w+24>>2],b[y+28>>2]=b[w+28>>2],b[y+32>>2]=b[w+32>>2],b[y+36>>2]=b[w+36>>2],b[y+40>>2]=b[w+40>>2],b[y+44>>2]=b[w+44>>2],b[y+48>>2]=b[w+48>>2],b[y+52>>2]=b[w+52>>2],b[y+56>>2]=b[w+56>>2],b[y+60>>2]=b[w+60>>2],y=y+64|0,w=w+64|0;for(;(y|0)<(C|0);)b[y>>2]=b[w>>2],y=y+4|0,w=w+4|0}else for(C=N-4|0;(y|0)<(C|0);)wt[y>>0]=wt[w>>0]|0,wt[y+1>>0]=wt[w+1>>0]|0,wt[y+2>>0]=wt[w+2>>0]|0,wt[y+3>>0]=wt[w+3>>0]|0,y=y+4|0,w=w+4|0;for(;(y|0)<(N|0);)wt[y>>0]=wt[w>>0]|0,y=y+1|0,w=w+1|0;return G|0}function xa(y,w,C){y=y|0,w=w|0,C=C|0;var M=0,N=0,G=0,j=0;if(G=y+C|0,w=w&255,(C|0)>=67){for(;y&3;)wt[y>>0]=w,y=y+1|0;for(M=G&-4|0,j=w|w<<8|w<<16|w<<24,N=M-64|0;(y|0)<=(N|0);)b[y>>2]=j,b[y+4>>2]=j,b[y+8>>2]=j,b[y+12>>2]=j,b[y+16>>2]=j,b[y+20>>2]=j,b[y+24>>2]=j,b[y+28>>2]=j,b[y+32>>2]=j,b[y+36>>2]=j,b[y+40>>2]=j,b[y+44>>2]=j,b[y+48>>2]=j,b[y+52>>2]=j,b[y+56>>2]=j,b[y+60>>2]=j,y=y+64|0;for(;(y|0)<(M|0);)b[y>>2]=j,y=y+4|0}for(;(y|0)<(G|0);)wt[y>>0]=w,y=y+1|0;return G-C|0}function zl(y){return y=+y,y>=0?+fn(y+.5):+wo(y-.5)}function su(y){y=y|0;var w=0,C=0,M=0;return M=Os()|0,C=b[Bn>>2]|0,w=C+y|0,(y|0)>0&(w|0)<(C|0)|(w|0)<0?(Gu(w|0)|0,Ec(12),-1):(w|0)>(M|0)&&!(Wi(w|0)|0)?(Ec(12),-1):(b[Bn>>2]=w,C|0)}return{___uremdi3:ou,_bitshift64Lshr:Mr,_bitshift64Shl:on,_calloc:io,_cellAreaKm2:qs,_cellAreaM2:Fh,_cellAreaRads2:_l,_compact:Uv,_destroyLinkedPolygon:ie,_edgeLengthKm:rl,_edgeLengthM:gs,_emscripten_replace_memory:Ce,_exactEdgeLengthKm:sn,_exactEdgeLengthM:Up,_exactEdgeLengthRads:wn,_experimentalH3ToLocalIj:Ne,_experimentalLocalIjToH3:Je,_free:ci,_geoToH3:lf,_getDestinationH3IndexFromUnidirectionalEdge:m,_getH3IndexesFromUnidirectionalEdge:g,_getH3UnidirectionalEdge:rm,_getH3UnidirectionalEdgeBoundary:F,_getH3UnidirectionalEdgesFromHexagon:S,_getOriginH3IndexFromUnidirectionalEdge:Vp,_getPentagonIndexes:zh,_getRes0Indexes:kh,_h3Distance:Ze,_h3GetBaseCell:nl,_h3GetFaces:lc,_h3GetResolution:Xs,_h3IndexesAreNeighbors:zf,_h3IsPentagon:ei,_h3IsResClassIII:sc,_h3IsValid:ts,_h3Line:Xe,_h3LineSize:ct,_h3SetToLinkedGeo:nf,_h3ToCenterChild:rs,_h3ToChildren:Ms,_h3ToGeo:wu,_h3ToGeoBoundary:Tu,_h3ToParent:il,_h3UnidirectionalEdgeIsValid:A,_hexAreaKm2:Si,_hexAreaM2:Nl,_hexRing:Ws,_i64Subtract:Ys,_kRing:Nr,_kRingDistances:ti,_llvm_minnum_f64:xl,_llvm_round_f64:Ic,_malloc:no,_maxFaceCount:Gp,_maxH3ToChildrenSize:em,_maxKringSize:sr,_maxPolyfillSize:vl,_maxUncompactSize:tm,_memcpy:Xu,_memset:xa,_numHexagons:sf,_pentagonIndexCount:al,_pointDistKm:of,_pointDistM:Qd,_pointDistRads:Dh,_polyfill:Fp,_res0IndexCount:Lh,_round:zl,_sbrk:su,_sizeOfCoordIJ:Ln,_sizeOfGeoBoundary:Sr,_sizeOfGeoCoord:pr,_sizeOfGeoPolygon:Xr,_sizeOfGeofence:Tr,_sizeOfH3Index:er,_sizeOfLinkedGeoPolygon:Tn,_uncompact:uf,establishStackSpace:Tt,stackAlloc:rt,stackRestore:Rt,stackSave:lt}}(Oe,ze,ee),pt=r.___uremdi3=Ie.___uremdi3,At=r._bitshift64Lshr=Ie._bitshift64Lshr,De=r._bitshift64Shl=Ie._bitshift64Shl,Qe=r._calloc=Ie._calloc,It=r._cellAreaKm2=Ie._cellAreaKm2,cr=r._cellAreaM2=Ie._cellAreaM2,dr=r._cellAreaRads2=Ie._cellAreaRads2,$t=r._compact=Ie._compact,lr=r._destroyLinkedPolygon=Ie._destroyLinkedPolygon,Kr=r._edgeLengthKm=Ie._edgeLengthKm,Dr=r._edgeLengthM=Ie._edgeLengthM,qt=r._emscripten_replace_memory=Ie._emscripten_replace_memory,Lr=r._exactEdgeLengthKm=Ie._exactEdgeLengthKm,Er=r._exactEdgeLengthM=Ie._exactEdgeLengthM,_r=r._exactEdgeLengthRads=Ie._exactEdgeLengthRads,Wn=r._experimentalH3ToLocalIj=Ie._experimentalH3ToLocalIj,Cr=r._experimentalLocalIjToH3=Ie._experimentalLocalIjToH3,Qn=r._free=Ie._free,Ci=r._geoToH3=Ie._geoToH3,ii=r._getDestinationH3IndexFromUnidirectionalEdge=Ie._getDestinationH3IndexFromUnidirectionalEdge,bi=r._getH3IndexesFromUnidirectionalEdge=Ie._getH3IndexesFromUnidirectionalEdge,Un=r._getH3UnidirectionalEdge=Ie._getH3UnidirectionalEdge,oa=r._getH3UnidirectionalEdgeBoundary=Ie._getH3UnidirectionalEdgeBoundary,xi=r._getH3UnidirectionalEdgesFromHexagon=Ie._getH3UnidirectionalEdgesFromHexagon,Ki=r._getOriginH3IndexFromUnidirectionalEdge=Ie._getOriginH3IndexFromUnidirectionalEdge,gi=r._getPentagonIndexes=Ie._getPentagonIndexes,Zn=r._getRes0Indexes=Ie._getRes0Indexes,$n=r._h3Distance=Ie._h3Distance,ki=r._h3GetBaseCell=Ie._h3GetBaseCell,Es=r._h3GetFaces=Ie._h3GetFaces,Ba=r._h3GetResolution=Ie._h3GetResolution,_o=r._h3IndexesAreNeighbors=Ie._h3IndexesAreNeighbors,hs=r._h3IsPentagon=Ie._h3IsPentagon,eu=r._h3IsResClassIII=Ie._h3IsResClassIII,sa=r._h3IsValid=Ie._h3IsValid,tu=r._h3Line=Ie._h3Line,ho=r._h3LineSize=Ie._h3LineSize,Za=r._h3SetToLinkedGeo=Ie._h3SetToLinkedGeo,Ho=r._h3ToCenterChild=Ie._h3ToCenterChild,ai=r._h3ToChildren=Ie._h3ToChildren,Cs=r._h3ToGeo=Ie._h3ToGeo,bo=r._h3ToGeoBoundary=Ie._h3ToGeoBoundary,ec=r._h3ToParent=Ie._h3ToParent,ps=r._h3UnidirectionalEdgeIsValid=Ie._h3UnidirectionalEdgeIsValid,Du=r._hexAreaKm2=Ie._hexAreaKm2,eo=r._hexAreaM2=Ie._hexAreaM2,Me=r._hexRing=Ie._hexRing,Ve=r._i64Subtract=Ie._i64Subtract,it=r._kRing=Ie._kRing,Xt=r._kRingDistances=Ie._kRingDistances,br=r._llvm_minnum_f64=Ie._llvm_minnum_f64,cn=r._llvm_round_f64=Ie._llvm_round_f64,Ai=r._malloc=Ie._malloc,xo=r._maxFaceCount=Ie._maxFaceCount,po=r._maxH3ToChildrenSize=Ie._maxH3ToChildrenSize,Wo=r._maxKringSize=Ie._maxKringSize,ds=r._maxPolyfillSize=Ie._maxPolyfillSize,tf=r._maxUncompactSize=Ie._maxUncompactSize,tc=r._memcpy=Ie._memcpy,rf=r._memset=Ie._memset,xc=r._numHexagons=Ie._numHexagons,Bf=r._pentagonIndexCount=Ie._pentagonIndexCount,wc=r._pointDistKm=Ie._pointDistKm,Ps=r._pointDistM=Ie._pointDistM,Qu=r._pointDistRads=Ie._pointDistRads,Fu=r._polyfill=Ie._polyfill,Nu=r._res0IndexCount=Ie._res0IndexCount,zu=r._round=Ie._round,Uu=r._sbrk=Ie._sbrk,Ll=r._sizeOfCoordIJ=Ie._sizeOfCoordIJ,ms=r._sizeOfGeoBoundary=Ie._sizeOfGeoBoundary,$i=r._sizeOfGeoCoord=Ie._sizeOfGeoCoord,ru=r._sizeOfGeoPolygon=Ie._sizeOfGeoPolygon,Df=r._sizeOfGeofence=Ie._sizeOfGeofence,Ff=r._sizeOfH3Index=Ie._sizeOfH3Index,rc=r._sizeOfLinkedGeoPolygon=Ie._sizeOfLinkedGeoPolygon,el=r._uncompact=Ie._uncompact,Tc=r.establishStackSpace=Ie.establishStackSpace,nc=r.stackAlloc=Ie.stackAlloc,Sc=r.stackRestore=Ie.stackRestore,_u=r.stackSave=Ie.stackSave;if(r.asm=Ie,r.cwrap=J,r.setValue=E,r.getValue=R,r.getTempRet0=v,Jr){Gi(Jr)||(Jr=o(Jr));{di("memory initializer");var k=function(Ee){Ee.byteLength&&(Ee=new Uint8Array(Ee)),je.set(Ee,x),r.memoryInitializerRequest&&delete r.memoryInitializerRequest.response,jr("memory initializer")},Y=function(){s(Jr,k,function(){throw"could not load memory initializer "+Jr})},ne=Te(Jr);if(ne)k(ne.buffer);else if(r.memoryInitializerRequest){var oe=function(){var Ee=r.memoryInitializerRequest,Be=Ee.response;if(Ee.status!==200&&Ee.status!==0){var tt=Te(r.memoryInitializerRequestURL);if(tt)Be=tt.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+Ee.status+", retrying "+Jr),Y();return}}k(Be)};r.memoryInitializerRequest.response?setTimeout(oe,0):r.memoryInitializerRequest.addEventListener("load",oe)}else Y()}}var ye;Yi=function Ee(){ye||be(),ye||(Yi=Ee)};function be(Ee){if(Ee=Ee||i,Hn>0||(Gt(),Hn>0))return;function Be(){ye||(ye=!0,!D&&(tn(),an(),r.onRuntimeInitialized&&r.onRuntimeInitialized(),Fn()))}r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),Be()},1)):Be()}r.run=be;function Le(Ee){throw r.onAbort&&r.onAbort(Ee),Ee+="",u(Ee),c(Ee),D=!0,"abort("+Ee+"). Build with -s ASSERTIONS=1 for more info."}if(r.abort=Le,r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return be(),t}(typeof Zo=="object"?Zo:{}),oi="number",P1=oi,Ri=oi,Xi=oi,Kl=oi,Pa=oi,nTe=[["sizeOfH3Index",oi],["sizeOfGeoCoord",oi],["sizeOfGeoBoundary",oi],["sizeOfGeoPolygon",oi],["sizeOfGeofence",oi],["sizeOfLinkedGeoPolygon",oi],["sizeOfCoordIJ",oi],["h3IsValid",P1,[Ri,Xi]],["geoToH3",Ri,[oi,oi,Kl]],["h3ToGeo",null,[Ri,Xi,Pa]],["h3ToGeoBoundary",null,[Ri,Xi,Pa]],["maxKringSize",oi,[oi]],["kRing",null,[Ri,Xi,oi,Pa]],["kRingDistances",null,[Ri,Xi,oi,Pa,Pa]],["hexRing",null,[Ri,Xi,oi,Pa]],["maxPolyfillSize",oi,[Pa,Kl]],["polyfill",null,[Pa,Kl,Pa]],["h3SetToLinkedGeo",null,[Pa,oi,Pa]],["destroyLinkedPolygon",null,[Pa]],["compact",oi,[Pa,Pa,oi]],["uncompact",oi,[Pa,oi,Pa,oi,Kl]],["maxUncompactSize",oi,[Pa,oi,Kl]],["h3IsPentagon",P1,[Ri,Xi]],["h3IsResClassIII",P1,[Ri,Xi]],["h3GetBaseCell",oi,[Ri,Xi]],["h3GetResolution",oi,[Ri,Xi]],["maxFaceCount",oi,[Ri,Xi]],["h3GetFaces",null,[Ri,Xi,Pa]],["h3ToParent",Ri,[Ri,Xi,Kl]],["h3ToChildren",null,[Ri,Xi,Kl,Pa]],["h3ToCenterChild",Ri,[Ri,Xi,Kl]],["maxH3ToChildrenSize",oi,[Ri,Xi,Kl]],["h3IndexesAreNeighbors",P1,[Ri,Xi,Ri,Xi]],["getH3UnidirectionalEdge",Ri,[Ri,Xi,Ri,Xi]],["getOriginH3IndexFromUnidirectionalEdge",Ri,[Ri,Xi]],["getDestinationH3IndexFromUnidirectionalEdge",Ri,[Ri,Xi]],["h3UnidirectionalEdgeIsValid",P1,[Ri,Xi]],["getH3IndexesFromUnidirectionalEdge",null,[Ri,Xi,Pa]],["getH3UnidirectionalEdgesFromHexagon",null,[Ri,Xi,Pa]],["getH3UnidirectionalEdgeBoundary",null,[Ri,Xi,Pa]],["h3Distance",oi,[Ri,Xi,Ri,Xi]],["h3Line",oi,[Ri,Xi,Ri,Xi,Pa]],["h3LineSize",oi,[Ri,Xi,Ri,Xi]],["experimentalH3ToLocalIj",oi,[Ri,Xi,Ri,Xi,Pa]],["experimentalLocalIjToH3",oi,[Ri,Xi,Pa,Pa]],["hexAreaM2",oi,[Kl]],["hexAreaKm2",oi,[Kl]],["edgeLengthM",oi,[Kl]],["edgeLengthKm",oi,[Kl]],["pointDistM",oi,[Pa,Pa]],["pointDistKm",oi,[Pa,Pa]],["pointDistRads",oi,[Pa,Pa]],["cellAreaM2",oi,[Ri,Xi]],["cellAreaKm2",oi,[Ri,Xi]],["cellAreaRads2",oi,[Ri,Xi]],["exactEdgeLengthM",oi,[Ri,Xi]],["exactEdgeLengthKm",oi,[Ri,Xi]],["exactEdgeLengthRads",oi,[Ri,Xi]],["numHexagons",oi,[Kl]],["getRes0Indexes",null,[Pa]],["res0IndexCount",oi],["getPentagonIndexes",null,[oi,Pa]],["pentagonIndexCount",oi]],du={};nTe.forEach(function(r){du[r[0]]=Zo.cwrap.apply(Zo,r)});var a0=16,iTe=4,pY=4,o0=8,aTe=du.sizeOfH3Index(),vY=du.sizeOfGeoCoord(),oTe=du.sizeOfGeoBoundary(),YMt=du.sizeOfGeoPolygon(),KMt=du.sizeOfGeofence(),sTe=du.sizeOfLinkedGeoPolygon(),ZMt=du.sizeOfCoordIJ(),dY={m:"m",m2:"m2",km:"km",km2:"km2",rads:"rads",rads2:"rads2"};function uTe(t){if(typeof t!="number"||t<0||t>15||Math.floor(t)!==t)throw new Error("Invalid resolution: "+t)}var lTe=/[^0-9a-fA-F]/;function ov(t){if(Array.isArray(t)&&t.length===2&&Number.isInteger(t[0])&&Number.isInteger(t[1]))return t;if(typeof t!="string"||lTe.test(t))return[0,0];var r=parseInt(t.substring(0,t.length-8),a0),e=parseInt(t.substring(t.length-8),a0);return[e,r]}function mY(t){if(t>=0)return t.toString(a0);t=t&2147483647;var r=gY(8,t.toString(a0)),e=(parseInt(r[0],a0)+8).toString(a0);return r=e+r.substring(1),r}function cTe(t,r){return mY(r)+gY(8,mY(t))}function gY(t,r){for(var e=t-r.length,n="",i=0;i<e;i++)n+="0";return n=n+r,n}function fTe(t){var r=Zo.getTempRet0();return[t,r]}function hTe(t){var r=fTe(t),e=r[0],n=r[1];return n?cTe(e,n):null}function pTe(t,r,e){Zo.HEAPU32.set(ov(t),r/iTe+2*e)}function dTe(t,r){for(var e=r.length,n=0;n<e;n++)pTe(r[n],t,n)}function HT(t){return ATe(Zo.getValue(t,"double"))}function OR(t){return[HT(t),HT(t+o0)]}function AY(t){return[HT(t+o0),HT(t)]}function mTe(t,r,e){for(var n=Zo.getValue(t,"i32"),i=t+o0,a=[],o=r?AY:OR,s=0;s<n*2;s+=2)a.push(o(i+o0*s));return e&&a.push(a[0]),a}function vTe(t,r){for(var e=[],n=r?AY:OR,i,a,o,s;t;){for(e.push(i=[]),a=Zo.getValue(t,"i8*");a;){for(i.push(o=[]),s=Zo.getValue(a,"i8*");s;)o.push(n(s)),s=Zo.getValue(s+o0*2,"i8*");r&&o.push(o[0]),a=Zo.getValue(a+pY*2,"i8*")}t=Zo.getValue(t+pY*2,"i8*")}return e}function yY(t){var r=ov(t),e=r[0],n=r[1];return Boolean(du.h3IsPentagon(e,n))}function _Y(t){var r=ov(t),e=r[0],n=r[1];return du.h3IsValid(e,n)?du.h3GetResolution(e,n):-1}function bY(t,r,e){var n=Zo._malloc(vY);Zo.HEAPF64.set([t,r].map(gTe),n/o0);var i=hTe(du.geoToH3(n,e));return Zo._free(n),i}function WT(t){var r=Zo._malloc(vY),e=ov(t),n=e[0],i=e[1];du.h3ToGeo(n,i,r);var a=OR(r);return Zo._free(r),a}function xY(t,r){var e=Zo._malloc(oTe),n=ov(t),i=n[0],a=n[1];du.h3ToGeoBoundary(i,a,e);var o=mTe(e,r,r);return Zo._free(e),o}function wY(t,r){if(!t||!t.length)return[];var e=t.length,n=Zo._calloc(e,aTe);dTe(n,t);var i=Zo._calloc(sTe),a=i;du.h3SetToLinkedGeo(n,e,i);var o=vTe(i,r);return du.destroyLinkedPolygon(a),Zo._free(a),Zo._free(n),o}function TY(t,r){var e=ov(t),n=e[0],i=e[1],a=ov(r),o=a[0],s=a[1];return du.h3Distance(n,i,o,s)}function SY(t,r){switch(uTe(t),r){case dY.m:return du.edgeLengthM(t);case dY.km:return du.edgeLengthKm(t);default:throw new Error("Unknown unit: "+r)}}function gTe(t){return t*Math.PI/180}function ATe(t){return t*180/Math.PI}at();vt();et();Ii();Mn();function yTe(t){var r=_Te();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function _Te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function EY(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function qT(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?EY(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):EY(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function MR(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=bTe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function bTe(t,r){if(t){if(typeof t=="string")return CY(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return CY(t,r)}}function CY(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var xTe=10;function OY(t,r){r=r===void 0?t[0][0]:r;var e=MR(t),n;try{for(e.s();!(n=e.n()).done;){var i=n.value,a=i[0]-r;a>180?i[0]-=360:a<-180&&(i[0]+=360)}}catch(o){e.e(o)}finally{e.f()}}function wTe(t,r,e){var n=WT(t),i=Ot(n,2),a=i[0],o=i[1],s=r.length;OY(r,o);for(var u=r[0]===r[s-1]?s-1:s,c=0;c<u;c++)r[c][0]=hu(o,r[c][0],e),r[c][1]=hu(a,r[c][1],e)}function TTe(t,r,e){var n=t(r,e),i=WT(n),a=Ot(i,2),o=a[0],s=a[1];return[s,o]}function PY(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,e=xY(t,!0);return r!==1?wTe(t,e,r):OY(e),e}function STe(t){var r=new Float64Array(t.length*2),e=0,n=MR(t),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;r[e++]=a[0],r[e++]=a[1]}}catch(o){n.e(o)}finally{n.f()}return r}function ETe(t,r){var e;return t==null?e=r:vr(t)==="object"?e=qT(qT({},t),{},{coverage:r}):e={getHexagon:t,coverage:r},e}var CTe=qT(qT({},_h.defaultProps),{},{highPrecision:"auto",coverage:{type:"number",min:0,max:1,value:1},centerHexagon:null,getHexagon:{type:"accessor",value:function(r){return r.hexagon}},extruded:!0}),sv=function(t){Ke(e,t);var r=yTe(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"initializeState",value:function(){e._checkH3Lib(),this.state={edgeLengthKM:0,resolution:-1}}},{key:"shouldUpdateState",value:function(i){var a=i.changeFlags;return this._shouldUseHighPrecision()?a.propsOrDataChanged:a.somethingChanged}},{key:"updateState",value:function(i){var a=i.props,o=i.changeFlags;if(a.highPrecision!==!0&&(o.dataChanged||o.updateTriggersChanged&&o.updateTriggersChanged.getHexagon)){var s=this._calculateH3DataProps();this.setState(s)}this._updateVertices(this.context.viewport)}},{key:"_calculateH3DataProps",value:function(){var i=-1,a=!1,o=!1,s=xs(this.props.data),u=s.iterable,c=s.objectInfo,h=MR(u),p;try{for(h.s();!(p=h.n()).done;){var v=p.value;c.index++;var x=this.props.getHexagon(v,c),E=_Y(x);if(i<0){if(i=E,!this.props.highPrecision)break}else if(i!==E){o=!0;break}if(yY(x)){a=!0;break}}}catch(R){h.e(R)}finally{h.f()}return{resolution:i,edgeLengthKM:i>=0?SY(i,"km"):0,hasMultipleRes:o,hasPentagon:a}}},{key:"_shouldUseHighPrecision",value:function(){if(this.props.highPrecision==="auto"){var i=this.state,a=i.resolution,o=i.hasPentagon,s=i.hasMultipleRes,u=this.context.viewport;return Boolean(u?.resolution)||s||o||a>=0&&a<=5}return this.props.highPrecision}},{key:"_updateVertices",value:function(i){if(!this._shouldUseHighPrecision()){var a=this.state,o=a.resolution,s=a.edgeLengthKM,u=a.centerHex;if(!(o<0)){var c=this.props.centerHexagon||bY(i.latitude,i.longitude,o);if(u!==c){if(u){var h=TY(u,c);if(h>=0&&h*s<xTe)return}var p=i.distanceScales.unitsPerMeter,v=PY(c),x=WT(c),E=Ot(x,2),R=E[0],D=E[1],H=i.projectFlat([D,R]),W=Ot(H,2),$=W[0],J=W[1];v=v.map(function(B){var se=i.projectFlat(B);return[(se[0]-$)/p[0],(se[1]-J)/p[1]]}),this.setState({centerHex:c,vertices:v})}}}}},{key:"renderLayers",value:function(){return this._shouldUseHighPrecision()?this._renderPolygonLayer():this._renderColumnLayer()}},{key:"_getForwardProps",value:function(){var i=this.props,a=i.elevationScale,o=i.material,s=i.coverage,u=i.extruded,c=i.wireframe,h=i.stroked,p=i.filled,v=i.lineWidthUnits,x=i.lineWidthScale,E=i.lineWidthMinPixels,R=i.lineWidthMaxPixels,D=i.getFillColor,H=i.getElevation,W=i.getLineColor,$=i.getLineWidth,J=i.transitions,B=i.updateTriggers;return{elevationScale:a,extruded:u,coverage:s,wireframe:c,stroked:h,filled:p,lineWidthUnits:v,lineWidthScale:x,lineWidthMinPixels:E,lineWidthMaxPixels:R,material:o,getElevation:H,getFillColor:D,getLineColor:W,getLineWidth:$,transitions:J,updateTriggers:{getFillColor:B.getFillColor,getElevation:B.getElevation,getLineColor:B.getLineColor,getLineWidth:B.getLineWidth}}}},{key:"_renderPolygonLayer",value:function(){var i=this.props,a=i.data,o=i.getHexagon,s=i.updateTriggers,u=i.coverage,c=this.getSubLayerClass("hexagon-cell-hifi",_h),h=this._getForwardProps();return h.updateTriggers.getPolygon=ETe(s.getHexagon,u),new c(h,this.getSubLayerProps({id:"hexagon-cell-hifi",updateTriggers:h.updateTriggers}),{data:a,_normalize:!1,_windingOrder:"CCW",positionFormat:"XY",getPolygon:function(v,x){var E=o(v,x);return STe(PY(E,u))}})}},{key:"_renderColumnLayer",value:function(){var i=this.props,a=i.data,o=i.getHexagon,s=i.updateTriggers,u=this.getSubLayerClass("hexagon-cell",gh),c=this._getForwardProps();return c.updateTriggers.getPosition=s.getHexagon,new u(c,this.getSubLayerProps({id:"hexagon-cell",flatShading:!0,updateTriggers:c.updateTriggers}),{data:a,diskResolution:6,radius:1,vertices:this.state.vertices,getPosition:TTe.bind(null,o)})}}]),e}(Go);_(sv,"defaultProps",CTe);_(sv,"layerName","H3HexagonLayer");_(sv,"_checkH3Lib",function(){});function MY(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=PTe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function PTe(t,r){if(t){if(typeof t=="string")return IY(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return IY(t,r)}}function IY(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function OTe(t){var r=MTe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function MTe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ITe={getHexagons:{type:"accessor",value:function(r){return r.hexagons}}},XT=function(t){Ke(e,t);var r=OTe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"initializeState",value:function(){sv._checkH3Lib()}},{key:"updateState",value:function(i){var a=i.props,o=i.changeFlags;if(o.dataChanged||o.updateTriggersChanged&&o.updateTriggersChanged.getHexagons){var s=a.data,u=a.getHexagons,c=[],h=xs(s),p=h.iterable,v=h.objectInfo,x=MY(p),E;try{for(x.s();!(E=x.n()).done;){var R=E.value;v.index++;var D=u(R,v),H=wY(D,!0),W=MY(H),$;try{for(W.s();!($=W.n()).done;){var J=$.value;c.push(this.getSubLayerRow({polygon:J},R,v.index))}}catch(B){W.e(B)}finally{W.f()}}}catch(B){x.e(B)}finally{x.f()}this.setState({polygons:c})}}},{key:"indexToBounds",value:function(){var i=this.props,a=i.getElevation,o=i.getFillColor,s=i.getLineColor,u=i.getLineWidth;return{data:this.state.polygons,getPolygon:function(h){return h.polygon},getElevation:this.getSubLayerAccessor(a),getFillColor:this.getSubLayerAccessor(o),getLineColor:this.getSubLayerAccessor(s),getLineWidth:this.getSubLayerAccessor(u)}}}]),e}(Kc);_(XT,"layerName","H3ClusterLayer");_(XT,"defaultProps",ITe);at();vt();et();var o3=en(On());at();vt();et();function RTe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=LTe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function LTe(t,r){if(t){if(typeof t=="string")return RY(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return RY(t,r)}}function RY(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var IR=Math.PI/180,YT=new Float32Array(16),LY=new Float32Array(12);function kY(t,r,e){var n=r[0]*IR,i=r[1]*IR,a=r[2]*IR,o=Math.sin(a),s=Math.sin(n),u=Math.sin(i),c=Math.cos(a),h=Math.cos(n),p=Math.cos(i),v=e[0],x=e[1],E=e[2];t[0]=v*p*h,t[1]=v*u*h,t[2]=v*-s,t[3]=x*(-u*c+p*s*o),t[4]=x*(p*c+u*s*o),t[5]=x*h*o,t[6]=E*(u*o+p*s*c),t[7]=E*(-p*o+u*s*c),t[8]=E*h*c}function BY(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}var KT={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update:function(r,e){var n=e.startRow,i=e.endRow,a=this.props,o=a.data,s=a.getOrientation,u=a.getScale,c=a.getTranslation,h=a.getTransformMatrix,p=Array.isArray(h),v=p&&h.length===16,x=Array.isArray(u),E=Array.isArray(s),R=Array.isArray(c),D=v||!p&&Boolean(h(o[0]));D?r.constant=v:r.constant=E&&x&&R;var H=r.value;if(r.constant){var W;if(D)YT.set(h),W=BY(YT);else{W=LY;var $=s,J=u;kY(W,$,J),W.set(c,9)}r.value=new Float32Array(W)}else{var B=n*r.size,se=xs(o,n,i),V=se.iterable,X=se.objectInfo,I=RTe(V),O;try{for(I.s();!(O=I.n()).done;){var U=O.value;X.index++;var re=void 0;if(D)YT.set(v?h:h(U,X)),re=BY(YT);else{re=LY;var ee=E?s:s(U,X),pe=x?u:u(U,X);kY(re,ee,pe),re.set(R?c:c(U,X),9)}H[B++]=re[0],H[B++]=re[1],H[B++]=re[2],H[B++]=re[3],H[B++]=re[4],H[B++]=re[5],H[B++]=re[6],H[B++]=re[7],H[B++]=re[8],H[B++]=re[9],H[B++]=re[10],H[B++]=re[11]}}catch(je){I.e(je)}finally{I.f()}}}};function ZT(t,r){return r===yn.CARTESIAN||r===yn.METER_OFFSETS||r===yn.DEFAULT&&!t.isGeospatial}var DY=`#version 300 es
#define SHADER_NAME simple-mesh-layer-vs
uniform float sizeScale;
uniform bool composeModelMatrix;
in vec3 positions;
in vec3 normals;
in vec3 colors;
in vec2 texCoords;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceColors;
in vec3 instancePickingColors;
in mat3 instanceModelMatrix;
in vec3 instanceTranslation;
out vec2 vTexCoord;
out vec3 cameraPosition;
out vec3 normals_commonspace;
out vec4 position_commonspace;
out vec4 vColor;

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = texCoords;
  geometry.pickingColor = instancePickingColors;

  vTexCoord = texCoords;
  cameraPosition = project_uCameraPosition;
  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);

  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;

  if (composeModelMatrix) {
    DECKGL_FILTER_SIZE(pos, geometry);
    normals_commonspace = project_normal(instanceModelMatrix * normals);
    geometry.worldPosition += pos;
    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);
    geometry.position = position_commonspace;
  }
  else {
    pos = project_size(pos);
    DECKGL_FILTER_SIZE(pos, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);
    geometry.position = position_commonspace;
    normals_commonspace = project_normal(instanceModelMatrix * normals);
  }

  geometry.normal = normals_commonspace;
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var FY=`#version 300 es
#define SHADER_NAME simple-mesh-layer-fs

precision highp float;

uniform bool hasTexture;
uniform sampler2D sampler;
uniform bool flatShading;
uniform float opacity;

in vec2 vTexCoord;
in vec3 cameraPosition;
in vec3 normals_commonspace;
in vec4 position_commonspace;
in vec4 vColor;

out vec4 fragColor;

void main(void) {
  geometry.uv = vTexCoord;

  vec3 normal;
  if (flatShading) {
#ifdef DERIVATIVES_AVAILABLE
    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));
#else
    normal = vec3(0.0, 0.0, 1.0);
#endif
  } else {
    normal = normals_commonspace;
  }

  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;
  DECKGL_FILTER_COLOR(color, geometry);

  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);
  fragColor = vec4(lightColor, color.a * opacity);
}
`;function NY(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function zY(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?NY(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):NY(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function kTe(t){var r=BTe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function BTe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function UY(t,r){var e=t.COLOR_0||t.colors,n=e&&r;n||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),xr.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function jY(t,r){if(t.attributes)return UY(t.attributes,r),t instanceof Bi?t:new Bi(t);if(t.positions||t.POSITION)return UY(t,r),new Bi({attributes:t});throw Error("Invalid mesh")}var DTe=[0,0,0,255],FTe={mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:function(r){return r.position}},getColor:{type:"accessor",value:DTe},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},textureParameters:{type:"object",ignore:!0}},_p=function(t){Ke(e,t);var r=kTe(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"getShaders",value:function(){var i=!En(this.context.gl),a={};return Af(this.context.gl,ni.GLSL_DERIVATIVES)&&(a.DERIVATIVES_AVAILABLE=1),Yt(me(e.prototype),"getShaders",this).call(this,{vs:DY,fs:FY,modules:[La,ip,Wa],transpileToGLSL100:i,defines:a})}},{key:"getBounds",value:function(){var i;if(this.props._instanced)return Yt(me(e.prototype),"getBounds",this).call(this);var a=this.state.positionBounds;if(a)return a;var o=this.props.mesh;if(!o)return null;if(a=(i=o.header)===null||i===void 0?void 0:i.boundingBox,!a){var s=jY(o,this.props._useMeshColors),u=s.attributes;u.POSITION=u.POSITION||u.positions,a=qh(u)}return this.state.positionBounds=a,a}},{key:"initializeState",value:function(){var i=this.getAttributeManager();i.addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:KT}),this.setState({emptyTexture:new la(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}},{key:"updateState",value:function(i){Yt(me(e.prototype),"updateState",this).call(this,i);var a=i.props,o=i.oldProps,s=i.changeFlags;if(a.mesh!==o.mesh||s.extensionsChanged){var u;if(this.state.positionBounds=null,(u=this.state.model)===null||u===void 0||u.delete(),a.mesh){this.state.model=this.getModel(a.mesh);var c=a.mesh.attributes||a.mesh;this.setState({hasNormals:Boolean(c.NORMAL||c.normals)})}this.getAttributeManager().invalidateAll()}a.texture!==o.texture&&this.setTexture(a.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}},{key:"finalizeState",value:function(i){Yt(me(e.prototype),"finalizeState",this).call(this,i),this.state.emptyTexture.delete()}},{key:"draw",value:function(i){var a=i.uniforms;if(this.state.model){var o=this.context.viewport,s=this.props,u=s.sizeScale,c=s.coordinateSystem,h=s._instanced;this.state.model.setUniforms(a).setUniforms({sizeScale:u,composeModelMatrix:!h||ZT(o,c),flatShading:!this.state.hasNormals}).draw()}}},{key:"isLoaded",get:function(){var i;return((i=this.state)===null||i===void 0?void 0:i.model)&&Yt(me(e.prototype),"isLoaded",this)}},{key:"getModel",value:function(i){var a=new Ni(this.context.gl,zY(zY({},this.getShaders()),{},{id:this.props.id,geometry:jY(i,this.props._useMeshColors),isInstanced:!0})),o=this.props.texture,s=this.state.emptyTexture;return a.setUniforms({sampler:o||s,hasTexture:Boolean(o)}),a}},{key:"setTexture",value:function(i){var a=this.state,o=a.emptyTexture,s=a.model;s&&s.setUniforms({sampler:i||o,hasTexture:Boolean(i)})}}]),e}(aa);_(_p,"defaultProps",FTe);_(_p,"layerName","SimpleMeshLayer");at();vt();et();Ii();at();vt();Mn();at();vt();at();vt();var Sh=function(){function t(){ce(this,t);var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=r.id;this.id=e||Sa(this.constructor.name),this.display=!0,this.position=new _t,this.rotation=new _t,this.scale=new _t(1,1,1),this.matrix=new gn,this.userData={},this.props={},this._setScenegraphNodeProps(r)}return ve(t,[{key:"delete",value:function(){}},{key:"setProps",value:function(e){return this._setScenegraphNodeProps(e),this}},{key:"toString",value:function(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}},{key:"getBounds",value:function(){return null}},{key:"setPosition",value:function(e){return yr(e.length===3,"setPosition requires vector argument"),this.position=e,this}},{key:"setRotation",value:function(e){return yr(e.length===3,"setRotation requires vector argument"),this.rotation=e,this}},{key:"setScale",value:function(e){return yr(e.length===3,"setScale requires vector argument"),this.scale=e,this}},{key:"setMatrix",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n?this.matrix.copy(e):this.matrix=e}},{key:"setMatrixComponents",value:function(e){var n=e.position,i=e.rotation,a=e.scale,o=e.update,s=o===void 0?!0:o;return n&&this.setPosition(n),i&&this.setRotation(i),a&&this.setScale(a),s&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var e=this.position,n=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(n),this.matrix.scale(i),this}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.position,i=e.rotation,a=e.scale;return n&&this.setPosition(n),i&&this.setRotation(i),a&&this.setScale(a),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(e,n){yr(e),n=n||this.matrix;var i=new gn(e).multiplyRight(n),a=i.invert(),o=a.transpose();return{viewMatrix:e,modelMatrix:n,objectMatrix:n,worldMatrix:i,worldInverseMatrix:a,worldInverseTransposeMatrix:o}}},{key:"_setScenegraphNodeProps",value:function(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}]),t}();function NTe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=zTe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function zTe(t,r){if(t){if(typeof t=="string")return GY(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return GY(t,r)}}function GY(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function UTe(t){var r=jTe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function jTe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $T=function(t){Ke(e,t);var r=UTe(e);function e(){var n;ce(this,e);var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};i=Array.isArray(i)?{children:i}:i;var a=i,o=a.children,s=o===void 0?[]:o;return Wr.assert(s.every(function(u){return u instanceof Sh}),"every child must an instance of ScenegraphNode"),n=r.call(this,i),n.children=s,n}return ve(e,[{key:"add",value:function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];for(var s=0,u=a;s<u.length;s++){var c=u[s];Array.isArray(c)?this.add.apply(this,Pr(c)):this.children.push(c)}return this}},{key:"remove",value:function(i){var a=this.children,o=a.indexOf(i);return o>-1&&a.splice(o,1),this}},{key:"removeAll",value:function(){return this.children=[],this}},{key:"delete",value:function(){this.children.forEach(function(i){return i.delete()}),this.removeAll(),Yt(me(e.prototype),"delete",this).call(this)}},{key:"getBounds",value:function(){var i=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse(function(a,o){var s=o.worldMatrix,u=a.getBounds();if(u){var c=Ot(u,2),h=c[0],p=c[1],v=new _t(h).add(p).divide([2,2,2]);s.transformAsPoint(v,v);var x=new _t(p).subtract(h).divide([2,2,2]);s.transformAsVector(x,x);for(var E=0;E<8;E++)for(var R=new _t(E&1?-1:1,E&2?-1:1,E&4?-1:1).multiply(x).add(v),D=0;D<3;D++)i[0][D]=Math.min(i[0][D],R[D]),i[1][D]=Math.max(i[1][D],R[D])}}),Number.isFinite(i[0][0])?i:null}},{key:"traverse",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.worldMatrix,s=o===void 0?new gn:o,u=new gn(s).multiplyRight(this.matrix),c=NTe(this.children),h;try{for(c.s();!(h=c.n()).done;){var p=h.value;p instanceof e?p.traverse(i,{worldMatrix:u}):i(p,{worldMatrix:u})}}catch(v){c.e(v)}finally{c.f()}}}]),e}(Sh);at();vt();var GTe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},VTe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function VY(t){if(!t._animation){var r=VTe[t.componentType],e=GTe[t.type],n=e*t.count,i=t.bufferView.data,a=i.buffer,o=i.byteOffset,s=new r(a,o+(t.byteOffset||0),n);if(e===1)t._animation=Array.from(s);else{for(var u=[],c=0;c<s.length;c+=e)u.push(Array.from(s.slice(c,c+e)));t._animation=u}}return t._animation}var HTe=new gn;function WTe(t,r){if(r.matrix.identity(),t.translation&&r.matrix.translate(t.translation),t.rotation){var e=HTe.fromQuaternion(t.rotation);r.matrix.multiplyRight(e)}t.scale&&r.matrix.scale(t.scale)}var RR=new uh;function qTe(t,r,e,n,i){if(r==="rotation"){RR.slerp({start:e,target:n,ratio:i});for(var a=0;a<RR.length;a++)t[r][a]=RR[a]}else for(var o=0;o<e.length;o++)t[r][o]=i*n[o]+(1-i)*e[o]}function XTe(t,r,e){for(var n=e.p0,i=e.outTangent0,a=e.inTangent1,o=e.p1,s=e.tDiff,u=e.ratio,c=0;c<t[r].length;c++){var h=i[c]*s,p=a[c]*s;t[r][c]=(2*Math.pow(u,3)-3*Math.pow(u,2)+1)*n[c]+(Math.pow(u,3)-2*Math.pow(u,2)+u)*h+(-2*Math.pow(u,3)+3*Math.pow(u,2))*o[c]+(Math.pow(u,3)-Math.pow(u,2))*p}}function YTe(t,r,e){for(var n=0;n<e.length;n++)t[r][n]=e[n]}function KTe(t,r,e,n){var i=r.input,a=r.interpolation,o=r.output,s=i[i.length-1],u=t%s,c=i.findIndex(function(J){return J>=u}),h=Math.max(0,c-1);if(!Array.isArray(e[n]))switch(n){case"translation":e[n]=[0,0,0];break;case"rotation":e[n]=[0,0,0,1];break;case"scale":e[n]=[1,1,1];break;default:Wr.warn("Bad animation path ".concat(n))()}yr(e[n].length===o[h].length);var p=i[h],v=i[c];switch(a){case"STEP":YTe(e,n,o[h]);break;case"LINEAR":if(v>p){var x=(u-p)/(v-p);qTe(e,n,o[h],o[c],x)}break;case"CUBICSPLINE":if(v>p){var E=(u-p)/(v-p),R=v-p,D=o[3*h+1],H=o[3*h+2],W=o[3*c+0],$=o[3*c+1];XTe(e,n,{p0:D,outTangent0:H,inTangent1:W,p1:$,tDiff:R,ratio:E})}break;default:Wr.warn("Interpolation ".concat(a," not supported"))();break}}var ZTe=function(){function t(r){ce(this,t),this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,r)}return ve(t,[{key:"animate",value:function(e){if(this.playing){var n=e/1e3,i=(n-this.startTime)*this.speed;this.channels.forEach(function(a){var o=a.sampler,s=a.target,u=a.path;KTe(i,o,s,u),WTe(s,s._node)})}}}]),t}(),HY=function(){function t(r){ce(this,t),this.animations=r.animations.map(function(e,n){var i=e.name||"Animation-".concat(n),a=e.samplers.map(function(s){var u=s.input,c=s.interpolation,h=c===void 0?"LINEAR":c,p=s.output;return{input:VY(r.accessors[u]),interpolation:h,output:VY(r.accessors[p])}}),o=e.channels.map(function(s){var u=s.sampler,c=s.target;return{sampler:a[u],target:r.nodes[c.node],path:c.path}});return new ZTe({name:i,channels:o})})}return ve(t,[{key:"animate",value:function(e){this.setTime(e)}},{key:"setTime",value:function(e){this.animations.forEach(function(n){return n.animate(e)})}},{key:"getAnimations",value:function(){return this.animations}}]),t}();et();at();vt();function $Te(t){var r=JTe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function JTe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var WY=function(t){Ke(e,t);var r=$Te(e);function e(n){var i;ce(this,e);var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i=r.call(this,a),i.onBeforeRender=null,i.AfterRender=null,n instanceof Ni?(i.model=n,i._setModelNodeProps(a)):i.model=new Ni(n,a),i.bounds=null,i.managedResources=a.managedResources||[],i}return ve(e,[{key:"setProps",value:function(i){return Yt(me(e.prototype),"setProps",this).call(this,i),this._setModelNodeProps(i),this}},{key:"getBounds",value:function(){return this.bounds}},{key:"delete",value:function(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(function(i){return i.delete()}),this.managedResources=[]}},{key:"draw",value:function(){var i;return(i=this.model).draw.apply(i,arguments)}},{key:"setUniforms",value:function(){var i;return(i=this.model).setUniforms.apply(i,arguments),this}},{key:"setAttributes",value:function(){var i;return(i=this.model).setAttributes.apply(i,arguments),this}},{key:"updateModuleSettings",value:function(){var i;return(i=this.model).updateModuleSettings.apply(i,arguments),this}},{key:"_setModelNodeProps",value:function(i){this.model.setProps(i)}}]),e}(Sh);et();at();vt();function qY(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function LR(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?qY(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):qY(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var O1=function(){function t(r,e){ce(this,t);var n=e.attributes,i=e.material,a=e.pbrDebug,o=e.imageBasedLightingEnvironment,s=e.lights,u=e.useTangents;this.gl=r,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},Af(r,ni.GLSL_TEXTURE_LOD)&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],o&&(this.uniforms.u_DiffuseEnvSampler=o.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=o.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=o.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),a&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(n.NORMAL,"HAS_NORMALS"),this.defineIfPresent(n.TANGENT&&u,"HAS_TANGENTS"),this.defineIfPresent(n.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(o,"USE_IBL"),this.defineIfPresent(s,"USE_LIGHTS"),this.defineIfPresent(a,"PBR_DEBUG"),i&&this.parseMaterial(i)}return ve(t,[{key:"defineIfPresent",value:function(e,n){e&&(this.defines[n]=1)}},{key:"parseTexture",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},o=e.texture.source.image,s,u={};o.compressed?(s=o,u=_({},this.gl.TEXTURE_MIN_FILTER,o.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR)):s={data:o};var c=new la(this.gl,LR({id:e.name||e.id,parameters:LR(LR({},a),u),pixelStore:_({},this.gl.UNPACK_FLIP_Y_WEBGL,!1)},s));this.uniforms[n]=c,this.defineIfPresent(i,i),this.generatedTextures.push(c)}},{key:"parsePbrMetallicRoughness",value:function(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");var n=e.metallicFactor,i=n===void 0?1:n,a=e.roughnessFactor,o=a===void 0?1:a;this.uniforms.u_MetallicRoughnessValues=[i,o]}},{key:"parseMaterial",value:function(e){if(this.uniforms.pbr_uUnlit=Boolean(e.unlit),e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");var n=e.normalTexture.scale,i=n===void 0?1:n;this.uniforms.u_NormalScale=i}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");var a=e.occlusionTexture.strength,o=a===void 0?1:a;this.uniforms.u_OcclusionStrength=o}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),e.alphaMode==="MASK"){var s=e.alphaCutoff,u=s===void 0?.5:s;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=u}else e.alphaMode==="BLEND"&&(Wr.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}},{key:"delete",value:function(){this.generatedTextures.forEach(function(e){return e.delete()})}}]),t}();function XY(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function JT(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?XY(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):XY(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var QTe=`
#if (__VERSION__ < 300)
  #define _attr attribute
#else
  #define _attr in
#endif

  _attr vec4 POSITION;

  #ifdef HAS_NORMALS
    _attr vec4 NORMAL;
  #endif

  #ifdef HAS_TANGENTS
    _attr vec4 TANGENT;
  #endif

  #ifdef HAS_UV
    _attr vec2 TEXCOORD_0;
  #endif

  void main(void) {
    vec4 _NORMAL = vec4(0.);
    vec4 _TANGENT = vec4(0.);
    vec2 _TEXCOORD_0 = vec2(0.);

    #ifdef HAS_NORMALS
      _NORMAL = NORMAL;
    #endif

    #ifdef HAS_TANGENTS
      _TANGENT = TANGENT;
    #endif

    #ifdef HAS_UV
      _TEXCOORD_0 = TEXCOORD_0;
    #endif

    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);
    gl_Position = u_MVPMatrix * POSITION;
  }
`,eSe=`
#if (__VERSION__ < 300)
  #define fragmentColor gl_FragColor
#else
  out vec4 fragmentColor;
#endif

  void main(void) {
    fragmentColor = pbr_filterColor(vec4(0));
  }
`;function YY(t,r){return En(t)?`#version 300 es
`.concat(r):r}function kR(t,r){var e=r.id,n=r.drawMode,i=r.vertexCount,a=r.attributes,o=r.modelOptions,s=new O1(t,r);Wr.info(4,"createGLTFModel defines: ",s.defines)();var u=[];u.push.apply(u,Pr(s.generatedTextures)),u.push.apply(u,Pr(Object.values(a).map(function(h){return h.buffer})));var c=new WY(t,JT(JT({id:e,drawMode:n,vertexCount:i,modules:[od],parameters:s.parameters,vs:YY(t,QTe),fs:YY(t,eSe),managedResources:u},o),{},{defines:JT(JT({},s.defines),o.defines)}));return c.setProps({attributes:a}),c.setUniforms(s.uniforms),c}var tSe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},rSe={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1},KY=function(){function t(r){ce(this,t);var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=r,this.options=Object.assign({},rSe,e)}return ve(t,[{key:"instantiate",value:function(e){var n=this;this.gltf=e;var i=(e.scenes||[]).map(function(a){return n.createScene(a)});return i}},{key:"createAnimator",value:function(){return Array.isArray(this.gltf.animations)?new HY(this.gltf):null}},{key:"createScene",value:function(e){var n=this,i=e.nodes||[],a=i.map(function(s){return n.createNode(s)}),o=new $T({id:e.name||e.id,children:a});return o}},{key:"createNode",value:function(e){var n=this;if(!e._node){var i=e.children||[],a=i.map(function(u){return n.createNode(u)});e.mesh&&a.push(this.createMesh(e.mesh));var o=new $T({id:e.name||e.id,children:a});if(e.matrix)o.setMatrix(e.matrix);else{if(o.matrix.identity(),e.translation&&o.matrix.translate(e.translation),e.rotation){var s=new gn().fromQuaternion(e.rotation);o.matrix.multiplyRight(s)}e.scale&&o.matrix.scale(e.scale)}e._node=o}return e._node}},{key:"createMesh",value:function(e){var n=this;if(!e._mesh){var i=e.primitives||[],a=i.map(function(s,u){return n.createPrimitive(s,u,e)}),o=new $T({id:e.name||e.id,children:a});e._mesh=o}return e._mesh}},{key:"getVertexCount",value:function(e){Wr.warn("getVertexCount() not found")()}},{key:"createPrimitive",value:function(e,n,i){var a=kR(this.gl,Object.assign({id:e.name||"".concat(i.name||i.id,"-primitive-").concat(n),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return a.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],a}},{key:"createAttributes",value:function(e,n){var i=this,a={};return Object.keys(e).forEach(function(o){a[o]=i.createAccessor(e[o],i.createBuffer(e[o],i.gl.ARRAY_BUFFER))}),n&&(a.indices=this.createAccessor(n,this.createBuffer(n,this.gl.ELEMENT_ARRAY_BUFFER))),Wr.info(4,"glTF Attributes",{attributes:e,indices:n,generated:a})(),a}},{key:"createBuffer",value:function(e,n){e.bufferView||(e.bufferView={});var i=e.bufferView;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[n]||(i.lumaBuffers[n]=new Jn(this.gl,{id:"from-".concat(i.id),data:i.data||e.value,target:n})),i.lumaBuffers[n]}},{key:"createAccessor",value:function(e,n){return new Pl({buffer:n,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:tSe[e.type]})}},{key:"createSampler",value:function(e){return e}},{key:"needsPOT",value:function(){return!1}}]),t}();function QT(t,r,e){var n=new KY(t,e),i=n.instantiate(r),a=n.createAnimator();return{scenes:i,animator:a}}et();var GL=en(On());var ZY="3.4.13";var wp=en(On());var $Y="3.4.13";et();Ii();var HR=en(On());Mn();var bp=en(On());var JY="3.4.13",nSe="https://unpkg.com/@loaders.gl/textures@".concat(JY,"/dist/libs/basis_encoder.wasm"),iSe="https://unpkg.com/@loaders.gl/textures@".concat(JY,"/dist/libs/basis_encoder.js"),BR;function jR(t){return FR.apply(this,arguments)}function FR(){return FR=zt(bp.default.mark(function t(r){var e;return bp.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e=r.modules||{},!e.basis){i.next=3;break}return i.abrupt("return",e.basis);case 3:return BR=BR||aSe(r),i.next=6,BR;case 6:return i.abrupt("return",i.sent);case 7:case"end":return i.stop()}},t)})),FR.apply(this,arguments)}function aSe(t){return NR.apply(this,arguments)}function NR(){return NR=zt(bp.default.mark(function t(r){var e,n,i,a;return bp.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e=null,n=null,s.t0=Promise,s.next=5,eh("basis_transcoder.js","textures",r);case 5:return s.t1=s.sent,s.next=8,eh("basis_transcoder.wasm","textures",r);case 8:return s.t2=s.sent,s.t3=[s.t1,s.t2],s.next=12,s.t0.all.call(s.t0,s.t3);case 12:return i=s.sent,a=Ot(i,2),e=a[0],n=a[1],e=e||globalThis.BASIS,s.next=19,oSe(e,n);case 19:return s.abrupt("return",s.sent);case 20:case"end":return s.stop()}},t)})),NR.apply(this,arguments)}function oSe(t,r){var e={};return r&&(e.wasmBinary=r),new Promise(function(n){t(e).then(function(i){var a=i.BasisFile,o=i.initializeBasis;o(),n({BasisFile:a})})})}var DR;function GR(t){return zR.apply(this,arguments)}function zR(){return zR=zt(bp.default.mark(function t(r){var e;return bp.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e=r.modules||{},!e.basisEncoder){i.next=3;break}return i.abrupt("return",e.basisEncoder);case 3:return DR=DR||sSe(r),i.next=6,DR;case 6:return i.abrupt("return",i.sent);case 7:case"end":return i.stop()}},t)})),zR.apply(this,arguments)}function sSe(t){return UR.apply(this,arguments)}function UR(){return UR=zt(bp.default.mark(function t(r){var e,n,i,a;return bp.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e=null,n=null,s.t0=Promise,s.next=5,eh(iSe,"textures",r);case 5:return s.t1=s.sent,s.next=8,eh(nSe,"textures",r);case 8:return s.t2=s.sent,s.t3=[s.t1,s.t2],s.next=12,s.t0.all.call(s.t0,s.t3);case 12:return i=s.sent,a=Ot(i,2),e=a[0],n=a[1],e=e||globalThis.BASIS,s.next=19,uSe(e,n);case 19:return s.abrupt("return",s.sent);case 20:case"end":return s.stop()}},t)})),UR.apply(this,arguments)}function uSe(t,r){var e={};return r&&(e.wasmBinary=r),new Promise(function(n){t(e).then(function(i){var a=i.BasisFile,o=i.KTX2File,s=i.initializeBasis,u=i.BasisEncoder;s(),n({BasisFile:a,KTX2File:o,BasisEncoder:u})})})}var uv={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919};function lSe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=cSe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function cSe(t,r){if(t){if(typeof t=="string")return QY(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return QY(t,r)}}function QY(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var fSe=["","WEBKIT_","MOZ_"],eK={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"},eS=null;function tK(t){if(!eS){t=t||hSe()||void 0,eS=new Set;var r=lSe(fSe),e;try{for(r.s();!(e=r.n()).done;){var n=e.value;for(var i in eK)if(t&&t.getExtension("".concat(n).concat(i))){var a=eK[i];eS.add(a)}}}catch(o){r.e(o)}finally{r.f()}}return eS}function hSe(){try{var t=document.createElement("canvas");return t.getContext("webgl")}catch{return null}}var tLt=new Uint8Array([0]);var rK,nK,iK,aK,oK,sK,uK,lK;(function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"})(rK||(rK={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(nK||(nK={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(iK||(iK={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(aK||(aK={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(oK||(oK={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(sK||(sK={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(uK||(uK={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(lK||(lK={}));var mc=[171,75,84,88,32,50,48,187,13,10,26,10];function cK(t){var r=new Uint8Array(t),e=r.byteLength<mc.length||r[0]!==mc[0]||r[1]!==mc[1]||r[2]!==mc[2]||r[3]!==mc[3]||r[4]!==mc[4]||r[5]!==mc[5]||r[6]!==mc[6]||r[7]!==mc[7]||r[8]!==mc[8]||r[9]!==mc[9]||r[10]!==mc[10]||r[11]!==mc[11];return!e}var pSe={etc1:{basisFormat:0,compressed:!0,format:uv.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:uv.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:uv.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:uv.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:uv.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},"astc-4x4":{basisFormat:10,compressed:!0,format:uv.COMPRESSED_RGBA_ASTC_4X4_KHR},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function qR(t,r){return WR.apply(this,arguments)}function WR(){return WR=zt(HR.default.mark(function t(r,e){var n,i,a,o,s,u;return HR.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(e.basis.containerFormat!=="auto"){h.next=11;break}if(!cK(r)){h.next=6;break}return h.next=4,GR(e);case 4:return n=h.sent,h.abrupt("return",fK(n.KTX2File,r,e));case 6:return h.next=8,jR(e);case 8:return i=h.sent,a=i.BasisFile,h.abrupt("return",VR(a,r,e));case 11:h.t0=e.basis.module,h.next=h.t0==="encoder"?14:(h.t0==="transcoder",22);break;case 14:return h.next=16,GR(e);case 16:o=h.sent,h.t1=e.basis.containerFormat,h.next=h.t1==="ktx2"?20:(h.t1==="basis",21);break;case 20:return h.abrupt("return",fK(o.KTX2File,r,e));case 21:return h.abrupt("return",VR(o.BasisFile,r,e));case 22:return h.next=24,jR(e);case 24:return s=h.sent,u=s.BasisFile,h.abrupt("return",VR(u,r,e));case 27:case"end":return h.stop()}},t)})),WR.apply(this,arguments)}function VR(t,r,e){var n=new t(new Uint8Array(r));try{if(!n.startTranscoding())throw new Error("Failed to start basis transcoding");for(var i=n.getNumImages(),a=[],o=0;o<i;o++){for(var s=n.getNumLevels(o),u=[],c=0;c<s;c++)u.push(dSe(n,o,c,e));a.push(u)}return a}finally{n.close(),n.delete()}}function dSe(t,r,e,n){var i=t.getImageWidth(r,e),a=t.getImageHeight(r,e),o=t.getHasAlpha(),s=hK(n,o),u=s.compressed,c=s.format,h=s.basisFormat,p=t.getImageTranscodedSizeInBytes(r,e,h),v=new Uint8Array(p);if(!t.transcodeImage(v,r,e,h,0,0))throw new Error("failed to start Basis transcoding");return{width:i,height:a,data:v,compressed:u,format:c,hasAlpha:o}}function fK(t,r,e){var n=new t(new Uint8Array(r));try{if(!n.startTranscoding())throw new Error("failed to start KTX2 transcoding");for(var i=n.getLevels(),a=[],o=0;o<i;o++){a.push(mSe(n,o,e));break}return[a]}finally{n.close(),n.delete()}}function mSe(t,r,e){var n=t.getImageLevelInfo(r,0,0),i=n.alphaFlag,a=n.height,o=n.width,s=hK(e,i),u=s.compressed,c=s.format,h=s.basisFormat,p=t.getImageTranscodedSizeInBytes(r,0,0,h),v=new Uint8Array(p);if(!t.transcodeImage(v,r,0,0,h,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:a,data:v,compressed:u,levelSize:p,hasAlpha:i,format:c}}function hK(t,r){var e=t&&t.basis&&t.basis.format;return e==="auto"&&(e=tS()),vr(e)==="object"&&(e=r?e.alpha:e.noAlpha),e=e.toLowerCase(),pSe[e]}function tS(){var t=tK();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}function pK(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function dK(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?pK(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):pK(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var mK={name:"Basis",id:El?"basis":"basis-nodejs",module:"textures",version:$Y,worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},XR=dK(dK({},mK),{},{parse:qR});function mu(t,r){if(!t)throw new Error(r||"assert failed: gltf")}function YR(t,r){var e=t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:");if(e)return t;var n=r.baseUri||r.uri;if(!n)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return n.substr(0,n.lastIndexOf("/")+1)+t}function vK(t,r,e){var n=t.bufferViews[e];mu(n);var i=n.buffer,a=r[i];mu(a);var o=(n.byteOffset||0)+a.byteOffset;return new Uint8Array(a.arrayBuffer,o,n.byteLength)}var IL=en(On());var rL={};Tl(rL,{decode:()=>FSe,name:()=>DSe});var I1=en(On());Ii();et();at();vt();et();var gK=["SCALAR","VEC2","VEC3","VEC4"],vSe=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],gSe=new Map(vSe),ASe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ySe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},_Se={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function rS(t){var r=gK[t-1];return r||gK[0]}function nS(t){var r=gSe.get(t.constructor);if(!r)throw new Error("Illegal typed array");return r}function s0(t,r){var e=_Se[t.componentType],n=ASe[t.type],i=ySe[t.componentType],a=t.count*n,o=t.count*n*i;return mu(o>=0&&o<=r.byteLength),{ArrayType:e,length:a,byteLength:o}}function M1(t){var r=t.images,e=t.bufferViews;r=r||[],e=e||[];var n=r.map(function(o){return o.bufferView});e=e.filter(function(o){return!n.includes(o)});var i=e.reduce(function(o,s){return o+s.byteLength},0),a=r.reduce(function(o,s){var u=s.image,c=u.width,h=u.height;return o+c*h},0);return i+Math.ceil(4*a*1.33)}function AK(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=bSe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function bSe(t,r){if(t){if(typeof t=="string")return yK(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return yK(t,r)}}function yK(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function _K(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function xSe(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?_K(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):_K(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var wSe={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]},$o=function(){function t(r){ce(this,t),_(this,"gltf",void 0),_(this,"sourceBuffers",void 0),_(this,"byteLength",void 0),this.gltf=r||{json:xSe({},wSe),buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}return ve(t,[{key:"json",get:function(){return this.gltf.json}},{key:"getApplicationData",value:function(e){var n=this.json[e];return n}},{key:"getExtraData",value:function(e){var n=this.json.extras||{};return n[e]}},{key:"getExtension",value:function(e){var n=this.getUsedExtensions().find(function(a){return a===e}),i=this.json.extensions||{};return n?i[e]||!0:null}},{key:"getRequiredExtension",value:function(e){var n=this.getRequiredExtensions().find(function(i){return i===e});return n?this.getExtension(e):null}},{key:"getRequiredExtensions",value:function(){return this.json.extensionsRequired||[]}},{key:"getUsedExtensions",value:function(){return this.json.extensionsUsed||[]}},{key:"getRemovedExtensions",value:function(){return this.json.extensionsRemoved||[]}},{key:"getObjectExtension",value:function(e,n){var i=e.extensions||{};return i[n]}},{key:"getScene",value:function(e){return this.getObject("scenes",e)}},{key:"getNode",value:function(e){return this.getObject("nodes",e)}},{key:"getSkin",value:function(e){return this.getObject("skins",e)}},{key:"getMesh",value:function(e){return this.getObject("meshes",e)}},{key:"getMaterial",value:function(e){return this.getObject("materials",e)}},{key:"getAccessor",value:function(e){return this.getObject("accessors",e)}},{key:"getTexture",value:function(e){return this.getObject("textures",e)}},{key:"getSampler",value:function(e){return this.getObject("samplers",e)}},{key:"getImage",value:function(e){return this.getObject("images",e)}},{key:"getBufferView",value:function(e){return this.getObject("bufferViews",e)}},{key:"getBuffer",value:function(e){return this.getObject("buffers",e)}},{key:"getObject",value:function(e,n){if(vr(n)==="object")return n;var i=this.json[e]&&this.json[e][n];if(!i)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(n,"]"));return i}},{key:"getTypedArrayForBufferView",value:function(e){e=this.getBufferView(e);var n=e.buffer,i=this.gltf.buffers[n];mu(i);var a=(e.byteOffset||0)+i.byteOffset;return new Uint8Array(i.arrayBuffer,a,e.byteLength)}},{key:"getTypedArrayForAccessor",value:function(e){e=this.getAccessor(e);var n=this.getBufferView(e.bufferView),i=this.getBuffer(n.buffer),a=i.data,o=s0(e,n),s=o.ArrayType,u=o.length,c=n.byteOffset+e.byteOffset;return new s(a,c,u)}},{key:"getTypedArrayForImageData",value:function(e){e=this.getAccessor(e);var n=this.getBufferView(e.bufferView),i=this.getBuffer(n.buffer),a=i.data,o=n.byteOffset||0;return new Uint8Array(a,o,n.byteLength)}},{key:"addApplicationData",value:function(e,n){return this.json[e]=n,this}},{key:"addExtraData",value:function(e,n){return this.json.extras=this.json.extras||{},this.json.extras[e]=n,this}},{key:"addObjectExtension",value:function(e,n,i){return e.extensions=e.extensions||{},e.extensions[n]=i,this.registerUsedExtension(n),this}},{key:"setObjectExtension",value:function(e,n,i){var a=e.extensions||{};a[n]=i}},{key:"removeObjectExtension",value:function(e,n){var i=e.extensions||{},a=i[n];return delete i[n],a}},{key:"addExtension",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mu(n),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=n,this.registerUsedExtension(e),n}},{key:"addRequiredExtension",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return mu(n),this.addExtension(e,n),this.registerRequiredExtension(e),n}},{key:"registerUsedExtension",value:function(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(function(n){return n===e})||this.json.extensionsUsed.push(e)}},{key:"registerRequiredExtension",value:function(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(function(n){return n===e})||this.json.extensionsRequired.push(e)}},{key:"removeExtension",value:function(e){if(this.getExtension(e)){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e],Array.isArray(this.json.extensionsRemoved)||(this.json.extensionsRemoved=[]);var n=this.json.extensionsRemoved;n.includes(e)||n.push(e)}}},{key:"setDefaultScene",value:function(e){this.json.scene=e}},{key:"addScene",value:function(e){var n=e.nodeIndices;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:n}),this.json.scenes.length-1}},{key:"addNode",value:function(e){var n=e.meshIndex,i=e.matrix;this.json.nodes=this.json.nodes||[];var a={mesh:n};return i&&(a.matrix=i),this.json.nodes.push(a),this.json.nodes.length-1}},{key:"addMesh",value:function(e){var n=e.attributes,i=e.indices,a=e.material,o=e.mode,s=o===void 0?4:o,u=this._addAttributes(n),c={primitives:[{attributes:u,mode:s}]};if(i){var h=this._addIndices(i);c.primitives[0].indices=h}return Number.isFinite(a)&&(c.primitives[0].material=a),this.json.meshes=this.json.meshes||[],this.json.meshes.push(c),this.json.meshes.length-1}},{key:"addPointCloud",value:function(e){var n=this._addAttributes(e),i={primitives:[{attributes:n,mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}},{key:"addImage",value:function(e,n){var i=_m(e),a=n||i?.mimeType,o=this.addBufferView(e),s={bufferView:o,mimeType:a};return this.json.images=this.json.images||[],this.json.images.push(s),this.json.images.length-1}},{key:"addBufferView",value:function(e){var n=e.byteLength;mu(Number.isFinite(n)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);var i={buffer:0,byteOffset:this.byteLength,byteLength:n};return this.byteLength+=Kp(n,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}},{key:"addAccessor",value:function(e,n){var i={bufferView:e,type:rS(n.size),componentType:n.componentType,count:n.count,max:n.max,min:n.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}},{key:"addBinaryBuffer",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{size:3},i=this.addBufferView(e),a={min:n.min,max:n.max};(!a.min||!a.max)&&(a=this._getAccessorMinMax(e,n.size));var o={size:n.size,componentType:nS(e),count:Math.round(e.length/n.size),min:a.min,max:a.max};return this.addAccessor(i,Object.assign(o,n))}},{key:"addTexture",value:function(e){var n=e.imageIndex,i={source:n};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}},{key:"addMaterial",value:function(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}},{key:"createBinaryChunk",value:function(){var e,n;this.gltf.buffers=[];var i=this.byteLength,a=new ArrayBuffer(i),o=new Uint8Array(a),s=0,u=AK(this.sourceBuffers||[]),c;try{for(u.s();!(c=u.n()).done;){var h=c.value;s=qC(h,o,s)}}catch(p){u.e(p)}finally{u.f()}(e=this.json)!==null&&e!==void 0&&(n=e.buffers)!==null&&n!==void 0&&n[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=a,this.sourceBuffers=[a]}},{key:"_removeStringFromArray",value:function(e,n){for(var i=!0;i;){var a=e.indexOf(n);a>-1?e.splice(a,1):i=!1}}},{key:"_addAttributes",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n={};for(var i in e){var a=e[i],o=this._getGltfAttributeName(i),s=this.addBinaryBuffer(a.value,a);n[o]=s}return n}},{key:"_addIndices",value:function(e){return this.addBinaryBuffer(e,{size:1})}},{key:"_getGltfAttributeName",value:function(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}},{key:"_getAccessorMinMax",value:function(e,n){var i={min:null,max:null};if(e.length<n)return i;i.min=[],i.max=[];var a=e.subarray(0,n),o=AK(a),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;i.min.push(u),i.max.push(u)}}catch(p){o.e(p)}finally{o.f()}for(var c=n;c<e.length;c+=n)for(var h=0;h<n;h++)i.min[0+h]=Math.min(i.min[0+h],e[c+h]),i.max[0+h]=Math.max(i.max[0+h],e[c+h]);return i}}]),t}();Ii();var lv=en(On()),zLt=(typeof WebAssembly>"u"?"undefined":vr(WebAssembly))!=="object",TSe="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",SSe="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",ESe=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),CSe=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),PSe={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},OSe={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function bK(t,r,e,n,i){return ZR.apply(this,arguments)}function ZR(){return ZR=zt(lv.default.mark(function t(r,e,n,i,a){var o,s,u=arguments;return lv.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return o=u.length>5&&u[5]!==void 0?u[5]:"NONE",h.next=3,MSe();case 3:s=h.sent,LSe(s,s.exports[OSe[a]],r,e,n,i,s.exports[PSe[o||"NONE"]]);case 5:case"end":return h.stop()}},t)})),ZR.apply(this,arguments)}var KR;function MSe(){return $R.apply(this,arguments)}function $R(){return $R=zt(lv.default.mark(function t(){return lv.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return KR||(KR=ISe()),e.abrupt("return",KR);case 2:case"end":return e.stop()}},t)})),$R.apply(this,arguments)}function ISe(){return JR.apply(this,arguments)}function JR(){return JR=zt(lv.default.mark(function t(){var r,e;return lv.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r=TSe,WebAssembly.validate(ESe)&&(r=SSe,console.log("Warning: meshopt_decoder is using experimental SIMD support")),i.next=4,WebAssembly.instantiate(RSe(r),{});case 4:return e=i.sent,i.next=7,e.instance.exports.__wasm_call_ctors();case 7:return i.abrupt("return",e.instance);case 8:case"end":return i.stop()}},t)})),JR.apply(this,arguments)}function RSe(t){for(var r=new Uint8Array(t.length),e=0;e<t.length;++e){var n=t.charCodeAt(e);r[e]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}for(var i=0,a=0;a<t.length;++a)r[i++]=r[a]<60?CSe[r[a]]:(r[a]-60)*64+r[++a];return r.buffer.slice(0,i)}function LSe(t,r,e,n,i,a,o){var s=t.exports.sbrk,u=n+3&-4,c=s(u*i),h=s(a.length),p=new Uint8Array(t.exports.memory.buffer);p.set(a,h);var v=r(c,n,i,h,a.length);if(v===0&&o&&o(c,u,i),e.set(p.subarray(c,c+n*i)),s(c-s(0)),v!==0)throw new Error("Malformed buffer data: ".concat(v))}function kSe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=BSe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function BSe(t,r){if(t){if(typeof t=="string")return xK(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return xK(t,r)}}function xK(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var tL="EXT_meshopt_compression",DSe=tL;function FSe(t,r){return QR.apply(this,arguments)}function QR(){return QR=zt(I1.default.mark(function t(r,e){var n,i,a,o,s,u;return I1.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(i=new $o(r),e!=null&&(n=e.gltf)!==null&&n!==void 0&&n.decompressMeshes){h.next=3;break}return h.abrupt("return");case 3:a=[],o=kSe(r.json.bufferViews||[]);try{for(o.s();!(s=o.n()).done;)u=s.value,a.push(NSe(i,u))}catch(p){o.e(p)}finally{o.f()}return h.next=8,Promise.all(a);case 8:i.removeExtension(tL);case 9:case"end":return h.stop()}},t)})),QR.apply(this,arguments)}function NSe(t,r){return eL.apply(this,arguments)}function eL(){return eL=zt(I1.default.mark(function t(r,e){var n,i,a,o,s,u,c,h,p,v,x,E,R,D;return I1.default.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(n=r.getObjectExtension(e,tL),!n){W.next=9;break}return i=n.byteOffset,a=i===void 0?0:i,o=n.byteLength,s=o===void 0?0:o,u=n.byteStride,c=n.count,h=n.mode,p=n.filter,v=p===void 0?"NONE":p,x=n.buffer,E=r.gltf.buffers[x],R=new Uint8Array(E.arrayBuffer,E.byteOffset+a,s),D=new Uint8Array(r.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength),W.next=8,bK(D,c,u,R,h,v);case 8:return W.abrupt("return",D);case 9:return W.abrupt("return",null);case 10:case"end":return W.stop()}},t)})),eL.apply(this,arguments)}var nL={};Tl(nL,{name:()=>jSe,preprocess:()=>GSe});function zSe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=USe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function USe(t,r){if(t){if(typeof t=="string")return wK(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return wK(t,r)}}function wK(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var u0="EXT_texture_webp",jSe=u0;function GSe(t,r){var e=new $o(t);if(!ZP("image/webp")){if(e.getRequiredExtensions().includes(u0))throw new Error("gltf: Required extension ".concat(u0," not supported by browser"));return}var n=e.json,i=zSe(n.textures||[]),a;try{for(i.s();!(a=i.n()).done;){var o=a.value,s=e.getObjectExtension(o,u0);s&&(o.source=s.source),e.removeObjectExtension(o,u0)}}catch(u){i.e(u)}finally{i.f()}e.removeExtension(u0)}var iL={};Tl(iL,{name:()=>WSe,preprocess:()=>qSe});function VSe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=HSe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function HSe(t,r){if(t){if(typeof t=="string")return TK(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return TK(t,r)}}function TK(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var iS="KHR_texture_basisu",WSe=iS;function qSe(t,r){var e=new $o(t),n=e.json,i=VSe(n.textures||[]),a;try{for(i.s();!(a=i.n()).done;){var o=a.value,s=e.getObjectExtension(o,iS);s&&(o.source=s.source),e.removeObjectExtension(o,iS)}}catch(u){i.e(u)}finally{i.f()}e.removeExtension(iS)}var dL={};Tl(dL,{decode:()=>gEe,encode:()=>AEe,name:()=>mEe,preprocess:()=>vEe});Mn();et();var cv=en(On());et();var uL=en(On());Ii();var SK="3.4.13";var XSe={draco:{decoderType:(typeof WebAssembly>"u"?"undefined":vr(WebAssembly))==="object"?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}},EK={name:"Draco",id:El?"draco":"draco-nodejs",module:"draco",shapes:["mesh"],version:SK,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:XSe};Mn();et();at();vt();et();function PK(t,r,e){var n=OK(r.metadata),i=[],a=YSe(r.attributes);for(var o in t){var s=t[o],u=CK(o,s,a[o]);i.push(u)}if(e){var c=CK("indices",e);i.push(c)}return new Oy(i,n)}function YSe(t){var r={};for(var e in t){var n=t[e];r[n.name||"undefined"]=n}return r}function CK(t,r,e){var n=e?OK(e.metadata):void 0,i=yC(t,r,n);return i}function OK(t){var r=new Map;for(var e in t)r.set("".concat(e,".string"),JSON.stringify(t[e]));return r}function KSe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=ZSe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function ZSe(t,r){if(t){if(typeof t=="string")return MK(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return MK(t,r)}}function MK(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function IK(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function RK(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?IK(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):IK(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var LK={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},$Se={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},JSe=4,kK=function(){function t(r){ce(this,t),_(this,"draco",void 0),_(this,"decoder",void 0),_(this,"metadataQuerier",void 0),this.draco=r,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}return ve(t,[{key:"destroy",value:function(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}},{key:"parseSync",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(n);var a=this.decoder.GetEncodedGeometryType(i),o=a===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{var s;switch(a){case this.draco.TRIANGULAR_MESH:s=this.decoder.DecodeBufferToMesh(i,o);break;case this.draco.POINT_CLOUD:s=this.decoder.DecodeBufferToPointCloud(i,o);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!s.ok()||!o.ptr){var u="DRACO decompression failed: ".concat(s.error_msg());throw new Error(u)}var c=this._getDracoLoaderData(o,a,n),h=this._getMeshData(o,c,n),p=qh(h.attributes),v=PK(h.attributes,c,h.indices),x=RK(RK({loader:"draco",loaderData:c,header:{vertexCount:o.num_points(),boundingBox:p}},h),{},{schema:v});return x}finally{this.draco.destroy(i),o&&this.draco.destroy(o)}}},{key:"_getDracoLoaderData",value:function(e,n,i){var a=this._getTopLevelMetadata(e),o=this._getDracoAttributes(e,i);return{geometry_type:n,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:a,attributes:o}}},{key:"_getDracoAttributes",value:function(e,n){for(var i={},a=0;a<e.num_attributes();a++){var o=this.decoder.GetAttribute(e,a),s=this._getAttributeMetadata(e,a);i[o.unique_id()]={unique_id:o.unique_id(),attribute_type:o.attribute_type(),data_type:o.data_type(),num_components:o.num_components(),byte_offset:o.byte_offset(),byte_stride:o.byte_stride(),normalized:o.normalized(),attribute_index:a,metadata:s};var u=this._getQuantizationTransform(o,n);u&&(i[o.unique_id()].quantization_transform=u);var c=this._getOctahedronTransform(o,n);c&&(i[o.unique_id()].octahedron_transform=c)}return i}},{key:"_getMeshData",value:function(e,n,i){var a=this._getMeshAttributes(n,e,i),o=a.POSITION;if(!o)throw new Error("DRACO: No position attribute found.");if(e instanceof this.draco.Mesh)switch(i.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:a,indices:{value:this._getTriangleStripIndices(e),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:a,indices:{value:this._getTriangleListIndices(e),size:1}}}return{topology:"point-list",mode:0,attributes:a}}},{key:"_getMeshAttributes",value:function(e,n,i){for(var a={},o=0,s=Object.values(e.attributes);o<s.length;o++){var u=s[o],c=this._deduceAttributeName(u,i);u.name=c;var h=this._getAttributeValues(n,u),p=h.value,v=h.size;a[c]={value:p,size:v,byteOffset:u.byte_offset,byteStride:u.byte_stride,normalized:u.normalized}}return a}},{key:"_getTriangleListIndices",value:function(e){var n=e.num_faces(),i=n*3,a=i*JSe,o=this.draco._malloc(a);try{return this.decoder.GetTrianglesUInt32Array(e,a,o),new Uint32Array(this.draco.HEAPF32.buffer,o,i).slice()}finally{this.draco._free(o)}}},{key:"_getTriangleStripIndices",value:function(e){var n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,n),tEe(n)}finally{this.draco.destroy(n)}}},{key:"_getAttributeValues",value:function(e,n){var i=$Se[n.data_type],a=n.num_components,o=e.num_points(),s=o*a,u=s*i.BYTES_PER_ELEMENT,c=QSe(this.draco,i),h,p=this.draco._malloc(u);try{var v=this.decoder.GetAttribute(e,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,v,c,u,p),h=new i(this.draco.HEAPF32.buffer,p,s).slice()}finally{this.draco._free(p)}return{value:h,size:a}}},{key:"_deduceAttributeName",value:function(e,n){for(var i=e.unique_id,a=0,o=Object.entries(n.extraAttributes||{});a<o.length;a++){var s=Ot(o[a],2),u=s[0],c=s[1];if(c===i)return u}var h=e.attribute_type;for(var p in LK){var v=this.draco[p];if(v===h)return LK[p]}var x=n.attributeNameEntry||"name";return e.metadata[x]?e.metadata[x].string:"CUSTOM_ATTRIBUTE_".concat(i)}},{key:"_getTopLevelMetadata",value:function(e){var n=this.decoder.GetMetadata(e);return this._getDracoMetadata(n)}},{key:"_getAttributeMetadata",value:function(e,n){var i=this.decoder.GetAttributeMetadata(e,n);return this._getDracoMetadata(i)}},{key:"_getDracoMetadata",value:function(e){if(!e||!e.ptr)return{};for(var n={},i=this.metadataQuerier.NumEntries(e),a=0;a<i;a++){var o=this.metadataQuerier.GetEntryName(e,a);n[o]=this._getDracoMetadataField(e,o)}return n}},{key:"_getDracoMetadataField",value:function(e,n){var i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,n,i);var a=eEe(i);return{int:this.metadataQuerier.GetIntEntry(e,n),string:this.metadataQuerier.GetStringEntry(e,n),double:this.metadataQuerier.GetDoubleEntry(e,n),intArray:a}}finally{this.draco.destroy(i)}}},{key:"_disableAttributeTransforms",value:function(e){var n=e.quantizedAttributes,i=n===void 0?[]:n,a=e.octahedronAttributes,o=a===void 0?[]:a,s=[].concat(Pr(i),Pr(o)),u=KSe(s),c;try{for(u.s();!(c=u.n()).done;){var h=c.value;this.decoder.SkipAttributeTransform(this.draco[h])}}catch(p){u.e(p)}finally{u.f()}}},{key:"_getQuantizationTransform",value:function(e,n){var i=this,a=n.quantizedAttributes,o=a===void 0?[]:a,s=e.attribute_type(),u=o.map(function(h){return i.decoder[h]}).includes(s);if(u){var c=new this.draco.AttributeQuantizationTransform;try{if(c.InitFromAttribute(e))return{quantization_bits:c.quantization_bits(),range:c.range(),min_values:new Float32Array([1,2,3]).map(function(h){return c.min_value(h)})}}finally{this.draco.destroy(c)}}return null}},{key:"_getOctahedronTransform",value:function(e,n){var i=this,a=n.octahedronAttributes,o=a===void 0?[]:a,s=e.attribute_type(),u=o.map(function(h){return i.decoder[h]}).includes(s);if(u){var c=new this.draco.AttributeQuantizationTransform;try{if(c.InitFromAttribute(e))return{quantization_bits:c.quantization_bits()}}finally{this.draco.destroy(c)}}return null}}]),t}();function QSe(t,r){switch(r){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}function eEe(t){for(var r=t.size(),e=new Int32Array(r),n=0;n<r;n++)e[n]=t.GetValue(n);return e}function tEe(t){for(var r=t.size(),e=new Int32Array(r),n=0;n<r;n++)e[n]=t.GetValue(n);return e}Mn();et();var L1=en(On());function BK(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function DK(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?BK(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):BK(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var rEe="1.5.5",nEe="1.4.1",sL="https://www.gstatic.com/draco/versioned/decoders/".concat(rEe),iEe="".concat(sL,"/draco_decoder.js"),aEe="".concat(sL,"/draco_wasm_wrapper.js"),oEe="".concat(sL,"/draco_decoder.wasm"),dkt="https://raw.githubusercontent.com/google/draco/".concat(nEe,"/javascript/draco_encoder.js"),R1;function FK(t){return aL.apply(this,arguments)}function aL(){return aL=zt(L1.default.mark(function t(r){var e;return L1.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e=r.modules||{},e.draco3d?R1=R1||e.draco3d.createDecoderModule({}).then(function(a){return{draco:a}}):R1=R1||sEe(r),i.next=4,R1;case 4:return i.abrupt("return",i.sent);case 5:case"end":return i.stop()}},t)})),aL.apply(this,arguments)}function sEe(t){return oL.apply(this,arguments)}function oL(){return oL=zt(L1.default.mark(function t(r){var e,n,i,a;return L1.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:s.t0=r.draco&&r.draco.decoderType,s.next=s.t0==="js"?3:(s.t0==="wasm",7);break;case 3:return s.next=5,eh(iEe,"draco",r);case 5:return e=s.sent,s.abrupt("break",21);case 7:return s.t1=Promise,s.next=10,eh(aEe,"draco",r);case 10:return s.t2=s.sent,s.next=13,eh(oEe,"draco",r);case 13:return s.t3=s.sent,s.t4=[s.t2,s.t3],s.next=17,s.t1.all.call(s.t1,s.t4);case 17:i=s.sent,a=Ot(i,2),e=a[0],n=a[1];case 21:return e=e||globalThis.DracoDecoderModule,s.next=24,uEe(e,n);case 24:return s.abrupt("return",s.sent);case 25:case"end":return s.stop()}},t)})),oL.apply(this,arguments)}function uEe(t,r){var e={};return r&&(e.wasmBinary=r),new Promise(function(n){t(DK(DK({},e),{},{onModuleLoaded:function(a){return n({draco:a})}}))})}function NK(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function zK(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?NK(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):NK(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var aS=zK(zK({},EK),{},{parse:lEe});function lEe(t,r){return lL.apply(this,arguments)}function lL(){return lL=zt(uL.default.mark(function t(r,e){var n,i,a;return uL.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,FK(e);case 2:return n=s.sent,i=n.draco,a=new kK(i),s.prev=5,s.abrupt("return",a.parseSync(r,e?.draco));case 7:return s.prev=7,a.destroy(),s.finish(7);case 10:case"end":return s.stop()}},t,null,[[5,,7,10]])})),lL.apply(this,arguments)}function UK(t){var r={};for(var e in t){var n=t[e];if(e!=="indices"){var i=cL(n);r[e]=i}}return r}function cL(t){var r=cEe(t),e=r.buffer,n=r.size,i=r.count,a={value:e,size:n,byteOffset:0,count:i,type:rS(n),componentType:nS(e)};return a}function cEe(t){var r=t,e=1,n=0;return t&&t.value&&(r=t.value,e=t.size||1),r&&(ArrayBuffer.isView(r)||(r=fEe(r,Float32Array)),n=r.length/e),{buffer:r,size:e,count:n}}function fEe(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t?Array.isArray(t)?new r(t):e&&!(t instanceof r)?new r(t):t:null}function jK(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function hEe(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?jK(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):jK(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var pEe=cv.default.mark(pL);function k1(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=dEe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function dEe(t,r){if(t){if(typeof t=="string")return GK(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return GK(t,r)}}function GK(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var fv="KHR_draco_mesh_compression",mEe=fv;function vEe(t,r,e){var n=new $o(t),i=k1(pL(n)),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;n.getObjectExtension(o,fv)}}catch(s){i.e(s)}finally{i.f()}}function gEe(t,r,e){return fL.apply(this,arguments)}function fL(){return fL=zt(cv.default.mark(function t(r,e,n){var i,a,o,s,u,c;return cv.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(e!=null&&(i=e.gltf)!==null&&i!==void 0&&i.decompressMeshes){p.next=2;break}return p.abrupt("return");case 2:a=new $o(r),o=[],s=k1(pL(a));try{for(s.s();!(u=s.n()).done;)c=u.value,a.getObjectExtension(c,fv)&&o.push(yEe(a,c,e,n))}catch(v){s.e(v)}finally{s.f()}return p.next=8,Promise.all(o);case 8:a.removeExtension(fv);case 9:case"end":return p.stop()}},t)})),fL.apply(this,arguments)}function AEe(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=new $o(t),n=k1(e.json.meshes||[]),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;_Ee(a,r),e.addRequiredExtension(fv)}}catch(o){n.e(o)}finally{n.f()}}function yEe(t,r,e,n){return hL.apply(this,arguments)}function hL(){return hL=zt(cv.default.mark(function t(r,e,n,i){var a,o,s,u,c,h,p,v,x,E,R,D,H,W;return cv.default.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(a=r.getObjectExtension(e,fv),a){J.next=3;break}return J.abrupt("return");case 3:return o=r.getTypedArrayForBufferView(a.bufferView),s=cm(o.buffer,o.byteOffset),u=i.parse,c=hEe({},n),delete c["3d-tiles"],J.next=10,u(s,aS,c,i);case 10:for(h=J.sent,p=UK(h.attributes),v=0,x=Object.entries(p);v<x.length;v++)E=Ot(x[v],2),R=E[0],D=E[1],R in e.attributes&&(H=e.attributes[R],W=r.getAccessor(H),W!=null&&W.min&&W!==null&&W!==void 0&&W.max&&(D.min=W.min,D.max=W.max));e.attributes=p,h.indices&&(e.indices=cL(h.indices)),bEe(e);case 16:case"end":return J.stop()}},t)})),hL.apply(this,arguments)}function _Ee(t,r){var e,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:4,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");var o=i.DracoWriter.encodeSync({attributes:t}),s=a==null||(e=a.parseSync)===null||e===void 0?void 0:e.call(a,{attributes:t}),u=i._addFauxAttributes(s.attributes),c=i.addBufferView(o),h={primitives:[{attributes:u,mode:n,extensions:_({},fv,{bufferView:c,attributes:u})}]};return h}function bEe(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function pL(t){var r,e,n,i,a,o;return cv.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:r=k1(t.json.meshes||[]),u.prev=1,r.s();case 3:if((e=r.n()).done){u.next=24;break}n=e.value,i=k1(n.primitives),u.prev=6,i.s();case 8:if((a=i.n()).done){u.next=14;break}return o=a.value,u.next=12,o;case 12:u.next=8;break;case 14:u.next=19;break;case 16:u.prev=16,u.t0=u.catch(6),i.e(u.t0);case 19:return u.prev=19,i.f(),u.finish(19);case 22:u.next=3;break;case 24:u.next=29;break;case 26:u.prev=26,u.t1=u.catch(1),r.e(u.t1);case 29:return u.prev=29,r.f(),u.finish(29);case 32:case"end":return u.stop()}},pEe,null,[[1,26,29,32],[6,16,19,22]])}var AL={};Tl(AL,{decode:()=>EEe,name:()=>wEe});Mn();var mL=en(On());var VK={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},HK={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4};function WK(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=xEe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function xEe(t,r){if(t){if(typeof t=="string")return qK(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return qK(t,r)}}function qK(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var gL="KHR_texture_transform",wEe=gL,oS=new _t,TEe=new lo,SEe=new lo;function EEe(t,r){return vL.apply(this,arguments)}function vL(){return vL=zt(mL.default.mark(function t(r,e){var n,i,a,o;return mL.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n=new $o(r),i=n.getExtension(gL),i){u.next=4;break}return u.abrupt("return");case 4:for(a=r.json.materials||[],o=0;o<a.length;o++)CEe(o,r);case 6:case"end":return u.stop()}},t)})),vL.apply(this,arguments)}function CEe(t,r){var e,n,i,a=[],o=(e=r.json.materials)===null||e===void 0?void 0:e[t],s=o==null||(n=o.pbrMetallicRoughness)===null||n===void 0?void 0:n.baseColorTexture;s&&B1(r,t,s,a);var u=o?.emissiveTexture;u&&B1(r,t,u,a);var c=o?.normalTexture;c&&B1(r,t,c,a);var h=o?.occlusionTexture;h&&B1(r,t,h,a);var p=o==null||(i=o.pbrMetallicRoughness)===null||i===void 0?void 0:i.metallicRoughnessTexture;p&&B1(r,t,p,a)}function B1(t,r,e,n){var i=PEe(e,n);if(i){var a=t.json.meshes||[],o=WK(a),s;try{for(o.s();!(s=o.n()).done;){var u=s.value,c=WK(u.primitives),h;try{for(c.s();!(h=c.n()).done;){var p=h.value,v=p.material;Number.isFinite(v)&&r===v&&OEe(t,p,i)}}catch(x){c.e(x)}finally{c.f()}}}catch(x){o.e(x)}finally{o.f()}}}function PEe(t,r){var e,n=(e=t.extensions)===null||e===void 0?void 0:e[gL],i=t.texCoord,a=i===void 0?0:i,o=n.texCoord,s=o===void 0?a:o,u=r.findIndex(function(h){var p=Ot(h,2),v=p[0],x=p[1];return v===a&&x===s})!==-1;if(!u){var c=REe(n);return a!==s&&(t.texCoord=s),r.push([a,s]),{originalTexCoord:a,texCoord:s,matrix:c}}return null}function OEe(t,r,e){var n=e.originalTexCoord,i=e.texCoord,a=e.matrix,o=r.attributes["TEXCOORD_".concat(n)];if(Number.isFinite(o)){var s,u=(s=t.json.accessors)===null||s===void 0?void 0:s[o];if(u&&u.bufferView){var c,h=(c=t.json.bufferViews)===null||c===void 0?void 0:c[u.bufferView];if(h){for(var p=t.buffers[h.buffer],v=p.arrayBuffer,x=p.byteOffset,E=(x||0)+(u.byteOffset||0)+(h.byteOffset||0),R=s0(u,h),D=R.ArrayType,H=R.length,W=HK[u.componentType],$=VK[u.type],J=h.byteStride||W*$,B=new Float32Array(H),se=0;se<u.count;se++){var V=new D(v,E+se*J,2);oS.set(V[0],V[1],1),oS.transformByMatrix3(a),B.set([oS[0],oS[1]],se*$)}n===i?MEe(u,h,t.buffers,B):IEe(i,u,r,t,B)}}}}function MEe(t,r,e,n){t.componentType=5126,e.push({arrayBuffer:n.buffer,byteOffset:0,byteLength:n.buffer.byteLength}),r.buffer=e.length-1,r.byteLength=n.buffer.byteLength,r.byteOffset=0,delete r.byteStride}function IEe(t,r,e,n,i){n.buffers.push({arrayBuffer:i.buffer,byteOffset:0,byteLength:i.buffer.byteLength});var a=n.json.bufferViews;if(a){a.push({buffer:n.buffers.length-1,byteLength:i.buffer.byteLength,byteOffset:0});var o=n.json.accessors;o&&(o.push({bufferView:a?.length-1,byteOffset:0,componentType:5126,count:r.count,type:"VEC2"}),e.attributes["TEXCOORD_".concat(t)]=o.length-1)}}function REe(t){var r=t.offset,e=r===void 0?[0,0]:r,n=t.rotation,i=n===void 0?0:n,a=t.scale,o=a===void 0?[1,1]:a,s=new lo().set(1,0,0,0,1,0,e[0],e[1],1),u=TEe.set(Math.cos(i),Math.sin(i),0,-Math.sin(i),Math.cos(i),0,0,0,1),c=SEe.set(o[0],0,0,0,o[1],0,0,0,1);return s.multiplyRight(u).multiplyRight(c)}var bL={};Tl(bL,{decode:()=>BEe,encode:()=>DEe,name:()=>kEe});var D1=en(On());function YK(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=LEe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function LEe(t,r){if(t){if(typeof t=="string")return XK(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return XK(t,r)}}function XK(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var hv="KHR_lights_punctual",kEe=hv;function BEe(t){return yL.apply(this,arguments)}function yL(){return yL=zt(D1.default.mark(function t(r){var e,n,i,a,o,s,u;return D1.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:e=new $o(r),n=e.json,i=e.getExtension(hv),i&&(e.json.lights=i.lights,e.removeExtension(hv)),a=YK(n.nodes||[]);try{for(a.s();!(o=a.n()).done;)s=o.value,u=e.getObjectExtension(s,hv),u&&(s.light=u.light),e.removeObjectExtension(s,hv)}catch(p){a.e(p)}finally{a.f()}case 6:case"end":return h.stop()}},t)})),yL.apply(this,arguments)}function DEe(t){return _L.apply(this,arguments)}function _L(){return _L=zt(D1.default.mark(function t(r){var e,n,i,a,o,s,u;return D1.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(e=new $o(r),n=e.json,n.lights&&(i=e.addExtension(hv),mu(!i.lights),i.lights=n.lights,delete n.lights),e.json.lights){a=YK(e.json.lights);try{for(a.s();!(o=a.n()).done;)s=o.value,u=s.node,e.addObjectExtension(u,hv,s)}catch(p){a.e(p)}finally{a.f()}delete e.json.lights}case 4:case"end":return h.stop()}},t)})),_L.apply(this,arguments)}var TL={};Tl(TL,{decode:()=>zEe,encode:()=>UEe,name:()=>NEe});var xL=en(On());function ZK(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=FEe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function FEe(t,r){if(t){if(typeof t=="string")return KK(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return KK(t,r)}}function KK(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var F1="KHR_materials_unlit",NEe=F1;function zEe(t){return wL.apply(this,arguments)}function wL(){return wL=zt(xL.default.mark(function t(r){var e,n,i,a,o,s;return xL.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:e=new $o(r),n=e.json,i=ZK(n.materials||[]);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.extensions&&o.extensions.KHR_materials_unlit,s&&(o.unlit=!0),e.removeObjectExtension(o,F1)}catch(h){i.e(h)}finally{i.f()}e.removeExtension(F1);case 5:case"end":return c.stop()}},t)})),wL.apply(this,arguments)}function UEe(t){var r=new $o(t),e=r.json;if(r.materials){var n=ZK(e.materials||[]),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;a.unlit&&(delete a.unlit,r.addObjectExtension(a,F1,{}),r.addExtension(F1))}}catch(o){n.e(o)}finally{n.f()}}}var CL={};Tl(CL,{decode:()=>HEe,encode:()=>WEe,name:()=>VEe});Ii();var z1=en(On());function jEe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=GEe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function GEe(t,r){if(t){if(typeof t=="string")return $K(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return $K(t,r)}}function $K(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var N1="KHR_techniques_webgl",VEe=N1;function HEe(t){return SL.apply(this,arguments)}function SL(){return SL=zt(z1.default.mark(function t(r){var e,n,i,a,o,s,u,c;return z1.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(e=new $o(r),n=e.json,i=e.getExtension(N1),i){a=qEe(i,e),o=jEe(n.materials||[]);try{for(o.s();!(s=o.n()).done;)u=s.value,c=e.getObjectExtension(u,N1),c&&(u.technique=Object.assign({},c,a[c.technique]),u.technique.values=XEe(u.technique,e)),e.removeObjectExtension(u,N1)}catch(v){o.e(v)}finally{o.f()}e.removeExtension(N1)}case 4:case"end":return p.stop()}},t)})),SL.apply(this,arguments)}function WEe(t,r){return EL.apply(this,arguments)}function EL(){return EL=zt(z1.default.mark(function t(r,e){return z1.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:case"end":return i.stop()}},t)})),EL.apply(this,arguments)}function qEe(t,r){var e=t.programs,n=e===void 0?[]:e,i=t.shaders,a=i===void 0?[]:i,o=t.techniques,s=o===void 0?[]:o,u=new TextDecoder;return a.forEach(function(c){if(Number.isFinite(c.bufferView))c.code=u.decode(r.getTypedArrayForBufferView(c.bufferView));else throw new Error("KHR_techniques_webgl: no shader code")}),n.forEach(function(c){c.fragmentShader=a[c.fragmentShader],c.vertexShader=a[c.vertexShader]}),s.forEach(function(c){c.program=n[c.program]}),s}function XEe(t,r){var e=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(function(n){t.uniforms[n].value&&!(n in e)&&(e[n]=t.uniforms[n].value)}),Object.keys(e).forEach(function(n){vr(e[n])==="object"&&e[n].index!==void 0&&(e[n].texture=r.getTexture(e[n].index))}),e}var ML={};Tl(ML,{decode:()=>KEe,name:()=>YEe});var PL=en(On());var JK="EXT_feature_metadata",YEe=JK;function KEe(t){return OL.apply(this,arguments)}function OL(){return OL=zt(PL.default.mark(function t(r){var e;return PL.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:e=new $o(r),ZEe(e);case 2:case"end":return i.stop()}},t)})),OL.apply(this,arguments)}function ZEe(t){var r,e=t.getExtension(JK),n=e==null||(r=e.schema)===null||r===void 0?void 0:r.classes,i=e?.featureTables,a=e?.featureTextures;if(a&&console.warn('featureTextures is not yet supported in the "EXT_feature_metadata" extension.'),n&&i)for(var o in n){var s=n[o],u=QEe(i,o);u&&$Ee(t,u,s)}}function $Ee(t,r,e){for(var n in e.properties){var i,a=e.properties[n],o=r==null||(i=r.properties)===null||i===void 0?void 0:i[n],s=r.count;if(o){var u=JEe(t,a,s,o);o.data=u}}}function JEe(t,r,e,n){var i=n.bufferView,a=t.getTypedArrayForBufferView(i);switch(r.type){case"STRING":{var o=n.stringOffsetBufferView,s=t.getTypedArrayForBufferView(o);a=eCe(a,s,e);break}default:}return a}function QEe(t,r){for(var e in t){var n=t[e];if(n.class===r)return n}return null}function eCe(t,r,e){for(var n=[],i=new TextDecoder("utf8"),a=0,o=4,s=0;s<e;s++){var u=r[(s+1)*o]-r[s*o],c=t.subarray(a,u+a),h=i.decode(c);n.push(h),a+=u}return n}function eZ(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=tCe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function tCe(t,r){if(t){if(typeof t=="string")return QK(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return QK(t,r)}}function QK(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var tZ=[rL,nL,iL,dL,bL,TL,CL,AL,ML];function rZ(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0,n=tZ.filter(function(u){return iZ(u.name,r)}),i=eZ(n),a;try{for(i.s();!(a=i.n()).done;){var o=a.value,s;(s=o.preprocess)===null||s===void 0||s.call(o,t,r,e)}}catch(u){i.e(u)}finally{i.f()}}function nZ(t){return RL.apply(this,arguments)}function RL(){return RL=zt(IL.default.mark(function t(r){var e,n,i,a,o,s,u,c=arguments;return IL.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:e=c.length>1&&c[1]!==void 0?c[1]:{},n=c.length>2?c[2]:void 0,i=tZ.filter(function(v){return iZ(v.name,e)}),a=eZ(i),p.prev=4,a.s();case 6:if((o=a.n()).done){p.next=12;break}return s=o.value,p.next=10,(u=s.decode)===null||u===void 0?void 0:u.call(s,r,e,n);case 10:p.next=6;break;case 12:p.next=17;break;case 14:p.prev=14,p.t0=p.catch(4),a.e(p.t0);case 17:return p.prev=17,a.f(),p.finish(17);case 20:case"end":return p.stop()}},t,null,[[4,14,17,20]])})),RL.apply(this,arguments)}function iZ(t,r){var e,n=(r==null||(e=r.gltf)===null||e===void 0?void 0:e.excludeExtensions)||{},i=t in n&&!n[t];return!i}at();vt();et();function rCe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=nCe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function nCe(t,r){if(t){if(typeof t=="string")return aZ(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return aZ(t,r)}}function aZ(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var LL="KHR_binary_glTF";function oZ(t){var r=new $o(t),e=r.json,n=rCe(e.images||[]),i;try{for(n.s();!(i=n.n()).done;){var a=i.value,o=r.getObjectExtension(a,LL);o&&Object.assign(a,o),r.removeObjectExtension(a,LL)}}catch(s){n.e(s)}finally{n.f()}e.buffers&&e.buffers[0]&&delete e.buffers[0].uri,r.removeExtension(LL)}function Rd(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=aCe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function aCe(t,r){if(t){if(typeof t=="string")return sZ(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return sZ(t,r)}}function sZ(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var uZ={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},oCe={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"},sCe=function(){function t(){ce(this,t),_(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),_(this,"json",void 0)}return ve(t,[{key:"normalize",value:function(e,n){this.json=e.json;var i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:console.warn("glTF: Unknown version ".concat(i.asset.version));return}if(!n.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),oZ(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}},{key:"_addAsset",value:function(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}},{key:"_convertTopLevelObjectsToArrays",value:function(e){for(var n in uZ)this._convertTopLevelObjectToArray(e,n)}},{key:"_convertTopLevelObjectToArray",value:function(e,n){var i=e[n];if(!(!i||Array.isArray(i))){e[n]=[];for(var a in i){var o=i[a];o.id=o.id||a;var s=e[n].length;e[n].push(o),this.idToIndexMap[n][a]=s}}}},{key:"_convertObjectIdsToArrayIndices",value:function(e){for(var n in uZ)this._convertIdsToIndices(e,n);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));var i=Rd(e.textures),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;this._convertTextureIds(o)}}catch(D){i.e(D)}finally{i.f()}var s=Rd(e.meshes),u;try{for(s.s();!(u=s.n()).done;){var c=u.value;this._convertMeshIds(c)}}catch(D){s.e(D)}finally{s.f()}var h=Rd(e.nodes),p;try{for(h.s();!(p=h.n()).done;){var v=p.value;this._convertNodeIds(v)}}catch(D){h.e(D)}finally{h.f()}var x=Rd(e.scenes),E;try{for(x.s();!(E=x.n()).done;){var R=E.value;this._convertSceneIds(R)}}catch(D){x.e(D)}finally{x.f()}}},{key:"_convertTextureIds",value:function(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}},{key:"_convertMeshIds",value:function(e){var n=Rd(e.primitives),i;try{for(n.s();!(i=n.n()).done;){var a=i.value,o=a.attributes,s=a.indices,u=a.material;for(var c in o)o[c]=this._convertIdToIndex(o[c],"accessor");s&&(a.indices=this._convertIdToIndex(s,"accessor")),u&&(a.material=this._convertIdToIndex(u,"material"))}}catch(h){n.e(h)}finally{n.f()}}},{key:"_convertNodeIds",value:function(e){var n=this;e.children&&(e.children=e.children.map(function(i){return n._convertIdToIndex(i,"node")})),e.meshes&&(e.meshes=e.meshes.map(function(i){return n._convertIdToIndex(i,"mesh")}))}},{key:"_convertSceneIds",value:function(e){var n=this;e.nodes&&(e.nodes=e.nodes.map(function(i){return n._convertIdToIndex(i,"node")}))}},{key:"_convertIdsToIndices",value:function(e,n){e[n]||(console.warn("gltf v1: json doesn't contain attribute ".concat(n)),e[n]=[]);var i=Rd(e[n]),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;for(var s in o){var u=o[s],c=this._convertIdToIndex(u,s);o[s]=c}}}catch(h){i.e(h)}finally{i.f()}}},{key:"_convertIdToIndex",value:function(e,n){var i=oCe[n];if(i in this.idToIndexMap){var a=this.idToIndexMap[i][e];if(!Number.isFinite(a))throw new Error("gltf v1: failed to resolve ".concat(n," with id ").concat(e));return a}return e}},{key:"_updateObjects",value:function(e){var n=Rd(this.json.buffers),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;delete a.type}}catch(o){n.e(o)}finally{n.f()}}},{key:"_updateMaterial",value:function(e){var n=Rd(e.materials),i;try{var a=function(){var h=i.value;h.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};var p=((o=h.values)===null||o===void 0?void 0:o.tex)||((s=h.values)===null||s===void 0?void 0:s.texture2d_0)||((u=h.values)===null||u===void 0?void 0:u.diffuseTex),v=e.textures.findIndex(function(x){return x.id===p});v!==-1&&(h.pbrMetallicRoughness.baseColorTexture={index:v})};for(n.s();!(i=n.n()).done;){var o,s,u;a()}}catch(c){n.e(c)}finally{n.f()}}}]),t}();function lZ(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new sCe().normalize(t,r)}Ii();at();vt();et();et();var l0;function cZ(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function xp(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?cZ(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):cZ(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var uCe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},lCe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Zc={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},cCe={magFilter:Zc.TEXTURE_MAG_FILTER,minFilter:Zc.TEXTURE_MIN_FILTER,wrapS:Zc.TEXTURE_WRAP_S,wrapT:Zc.TEXTURE_WRAP_T},fCe=(l0={},_(l0,Zc.TEXTURE_MAG_FILTER,Zc.LINEAR),_(l0,Zc.TEXTURE_MIN_FILTER,Zc.NEAREST_MIPMAP_LINEAR),_(l0,Zc.TEXTURE_WRAP_S,Zc.REPEAT),_(l0,Zc.TEXTURE_WRAP_T,Zc.REPEAT),l0);function hCe(t){return lCe[t]}function pCe(t){return uCe[t]}var dCe=function(){function t(){ce(this,t),_(this,"baseUri",""),_(this,"json",{}),_(this,"buffers",[]),_(this,"images",[])}return ve(t,[{key:"postProcess",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.json,a=e.buffers,o=a===void 0?[]:a,s=e.images,u=s===void 0?[]:s,c=e.baseUri,h=c===void 0?"":c;return mu(i),this.baseUri=h,this.json=i,this.buffers=o,this.images=u,this._resolveTree(this.json,n),this.json}},{key:"_resolveTree",value:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.bufferViews&&(e.bufferViews=e.bufferViews.map(function(a,o){return n._resolveBufferView(a,o)})),e.images&&(e.images=e.images.map(function(a,o){return n._resolveImage(a,o)})),e.samplers&&(e.samplers=e.samplers.map(function(a,o){return n._resolveSampler(a,o)})),e.textures&&(e.textures=e.textures.map(function(a,o){return n._resolveTexture(a,o)})),e.accessors&&(e.accessors=e.accessors.map(function(a,o){return n._resolveAccessor(a,o)})),e.materials&&(e.materials=e.materials.map(function(a,o){return n._resolveMaterial(a,o)})),e.meshes&&(e.meshes=e.meshes.map(function(a,o){return n._resolveMesh(a,o)})),e.nodes&&(e.nodes=e.nodes.map(function(a,o){return n._resolveNode(a,o)})),e.skins&&(e.skins=e.skins.map(function(a,o){return n._resolveSkin(a,o)})),e.scenes&&(e.scenes=e.scenes.map(function(a,o){return n._resolveScene(a,o)})),e.scene!==void 0&&(e.scene=e.scenes[this.json.scene])}},{key:"getScene",value:function(e){return this._get("scenes",e)}},{key:"getNode",value:function(e){return this._get("nodes",e)}},{key:"getSkin",value:function(e){return this._get("skins",e)}},{key:"getMesh",value:function(e){return this._get("meshes",e)}},{key:"getMaterial",value:function(e){return this._get("materials",e)}},{key:"getAccessor",value:function(e){return this._get("accessors",e)}},{key:"getCamera",value:function(e){return null}},{key:"getTexture",value:function(e){return this._get("textures",e)}},{key:"getSampler",value:function(e){return this._get("samplers",e)}},{key:"getImage",value:function(e){return this._get("images",e)}},{key:"getBufferView",value:function(e){return this._get("bufferViews",e)}},{key:"getBuffer",value:function(e){return this._get("buffers",e)}},{key:"_get",value:function(e,n){if(vr(n)==="object")return n;var i=this.json[e]&&this.json[e][n];return i||console.warn("glTF file error: Could not find ".concat(e,"[").concat(n,"]")),i}},{key:"_resolveScene",value:function(e,n){var i=this;return e.id=e.id||"scene-".concat(n),e.nodes=(e.nodes||[]).map(function(a){return i.getNode(a)}),e}},{key:"_resolveNode",value:function(e,n){var i=this;return e.id=e.id||"node-".concat(n),e.children&&(e.children=e.children.map(function(a){return i.getNode(a)})),e.mesh!==void 0?e.mesh=this.getMesh(e.mesh):e.meshes!==void 0&&e.meshes.length&&(e.mesh=e.meshes.reduce(function(a,o){var s=i.getMesh(o);return a.id=s.id,a.primitives=a.primitives.concat(s.primitives),a},{primitives:[]})),e.camera!==void 0&&(e.camera=this.getCamera(e.camera)),e.skin!==void 0&&(e.skin=this.getSkin(e.skin)),e}},{key:"_resolveSkin",value:function(e,n){return e.id=e.id||"skin-".concat(n),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}},{key:"_resolveMesh",value:function(e,n){var i=this;return e.id=e.id||"mesh-".concat(n),e.primitives&&(e.primitives=e.primitives.map(function(a){a=xp({},a);var o=a.attributes;a.attributes={};for(var s in o)a.attributes[s]=i.getAccessor(o[s]);return a.indices!==void 0&&(a.indices=i.getAccessor(a.indices)),a.material!==void 0&&(a.material=i.getMaterial(a.material)),a})),e}},{key:"_resolveMaterial",value:function(e,n){if(e.id=e.id||"material-".concat(n),e.normalTexture&&(e.normalTexture=xp({},e.normalTexture),e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture=xp({},e.occlustionTexture),e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture=xp({},e.emmisiveTexture),e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness=xp({},e.pbrMetallicRoughness);var i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture=xp({},i.baseColorTexture),i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture=xp({},i.metallicRoughnessTexture),i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}},{key:"_resolveAccessor",value:function(e,n){if(e.id=e.id||"accessor-".concat(n),e.bufferView!==void 0&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=hCe(e.componentType),e.components=pCe(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){var i=e.bufferView.buffer,a=s0(e,e.bufferView),o=a.ArrayType,s=a.byteLength,u=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset,c=i.arrayBuffer.slice(u,u+s);e.bufferView.byteStride&&(c=this._getValueFromInterleavedBuffer(i,u,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new o(c)}return e}},{key:"_getValueFromInterleavedBuffer",value:function(e,n,i,a,o){for(var s=new Uint8Array(o*a),u=0;u<o;u++){var c=n+u*i;s.set(new Uint8Array(e.arrayBuffer.slice(c,c+a)),u*a)}return s.buffer}},{key:"_resolveTexture",value:function(e,n){return e.id=e.id||"texture-".concat(n),e.sampler="sampler"in e?this.getSampler(e.sampler):fCe,e.source=this.getImage(e.source),e}},{key:"_resolveSampler",value:function(e,n){e.id=e.id||"sampler-".concat(n),e.parameters={};for(var i in e){var a=this._enumSamplerParameter(i);a!==void 0&&(e.parameters[a]=e[i])}return e}},{key:"_enumSamplerParameter",value:function(e){return cCe[e]}},{key:"_resolveImage",value:function(e,n){e.id=e.id||"image-".concat(n),e.bufferView!==void 0&&(e.bufferView=this.getBufferView(e.bufferView));var i=this.images[n];return i&&(e.image=i),e}},{key:"_resolveBufferView",value:function(e,n){var i=e.buffer,a=xp(xp({id:"bufferView-".concat(n)},e),{},{buffer:this.buffers[i]}),o=this.buffers[i].arrayBuffer,s=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(s+=e.byteOffset),a.data=new Uint8Array(o,s,e.byteLength),a}},{key:"_resolveCamera",value:function(e,n){return e.id=e.id||"camera-".concat(n),e.perspective,e.orthographic,e}}]),t}();function fZ(t,r){return new dCe().postProcess(t,r)}var hZ=1735152710,DL=12,sS=8,mCe=1313821514,vCe=5130562,gCe=0,ACe=1,yCe=0,c0=!0;function _Ce(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return"".concat(String.fromCharCode(t.getUint8(r+0))).concat(String.fromCharCode(t.getUint8(r+1))).concat(String.fromCharCode(t.getUint8(r+2))).concat(String.fromCharCode(t.getUint8(r+3)))}function pZ(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=new DataView(t),i=e.magic,a=i===void 0?hZ:i,o=n.getUint32(r,!1);return o===a||o===hZ}function FL(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=new DataView(r),a=_Ce(i,e+0),o=i.getUint32(e+4,c0),s=i.getUint32(e+8,c0);switch(Object.assign(t,{header:{byteOffset:e,byteLength:s,hasBinChunk:!1},type:a,version:o,json:{},binChunks:[]}),e+=DL,t.version){case 1:return bCe(t,i,e);case 2:return xCe(t,i,e,n={});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}function bCe(t,r,e){ea(t.header.byteLength>DL+sS);var n=r.getUint32(e+0,c0),i=r.getUint32(e+4,c0);return e+=sS,ea(i===yCe),kL(t,r,e,n),e+=n,e+=BL(t,r,e,t.header.byteLength),e}function xCe(t,r,e,n){return ea(t.header.byteLength>DL+sS),wCe(t,r,e,n),e+t.header.byteLength}function wCe(t,r,e,n){for(;e+8<=t.header.byteLength;){var i=r.getUint32(e+0,c0),a=r.getUint32(e+4,c0);switch(e+=sS,a){case mCe:kL(t,r,e,i);break;case vCe:BL(t,r,e,i);break;case gCe:n.strict||kL(t,r,e,i);break;case ACe:n.strict||BL(t,r,e,i);break;default:break}e+=Kp(i,4)}return e}function kL(t,r,e,n){var i=new Uint8Array(r.buffer,e,n),a=new TextDecoder("utf8"),o=a.decode(i);return t.json=JSON.parse(o),Kp(n,4)}function BL(t,r,e,n){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:e,byteLength:n,arrayBuffer:r.buffer}),Kp(n,4)}function mZ(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=TCe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function TCe(t,r){if(t){if(typeof t=="string")return dZ(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return dZ(t,r)}}function dZ(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function vZ(t,r){return NL.apply(this,arguments)}function NL(){return NL=zt(wp.default.mark(function t(r,e){var n,i,a,o,s,u,c,h,p,v,x=arguments;return wp.default.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(s=x.length>2&&x[2]!==void 0?x[2]:0,u=x.length>3?x[3]:void 0,c=x.length>4?x[4]:void 0,SCe(r,e,s,u),lZ(r,{normalize:u==null||(n=u.gltf)===null||n===void 0?void 0:n.normalize}),rZ(r,u,c),h=[],!(u!=null&&(i=u.gltf)!==null&&i!==void 0&&i.loadBuffers&&r.json.buffers)){R.next=10;break}return R.next=10,ECe(r,u,c);case 10:return u!=null&&(a=u.gltf)!==null&&a!==void 0&&a.loadImages&&(p=CCe(r,u,c),h.push(p)),v=nZ(r,u,c),h.push(v),R.next=15,Promise.all(h);case 15:return R.abrupt("return",u!=null&&(o=u.gltf)!==null&&o!==void 0&&o.postProcess?fZ(r,u):r);case 16:case"end":return R.stop()}},t)})),NL.apply(this,arguments)}function SCe(t,r,e,n){if(n.uri&&(t.baseUri=n.uri),r instanceof ArrayBuffer&&!pZ(r,e,n)){var i=new TextDecoder;r=i.decode(r)}if(typeof r=="string")t.json=VC(r);else if(r instanceof ArrayBuffer){var a={};e=FL(a,r,e,n.glb),mu(a.type==="glTF","Invalid GLB magic string ".concat(a.type)),t._glb=a,t.json=a.json}else mu(!1,"GLTF: must be ArrayBuffer or string");var o=t.json.buffers||[];if(t.buffers=new Array(o.length).fill(null),t._glb&&t._glb.header.hasBinChunk){var s=t._glb.binChunks;t.buffers[0]={arrayBuffer:s[0].arrayBuffer,byteOffset:s[0].byteOffset,byteLength:s[0].byteLength}}var u=t.json.images||[];t.images=new Array(u.length).fill({})}function ECe(t,r,e){return zL.apply(this,arguments)}function zL(){return zL=zt(wp.default.mark(function t(r,e,n){var i,a,o,s,u,c,h,p,v;return wp.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:i=r.json.buffers||[],a=0;case 2:if(!(a<i.length)){E.next=22;break}if(o=i[a],!o.uri){E.next=18;break}return c=n.fetch,mu(c),h=YR(o.uri,e),E.next=10,n==null||(s=n.fetch)===null||s===void 0?void 0:s.call(n,h);case 10:return p=E.sent,E.next=13,p==null||(u=p.arrayBuffer)===null||u===void 0?void 0:u.call(p);case 13:v=E.sent,r.buffers[a]={arrayBuffer:v,byteOffset:0,byteLength:v.byteLength},delete o.uri,E.next=19;break;case 18:r.buffers[a]===null&&(r.buffers[a]={arrayBuffer:new ArrayBuffer(o.byteLength),byteOffset:0,byteLength:o.byteLength});case 19:++a,E.next=2;break;case 22:case"end":return E.stop()}},t)})),zL.apply(this,arguments)}function CCe(t,r,e){return UL.apply(this,arguments)}function UL(){return UL=zt(wp.default.mark(function t(r,e,n){var i,a,o,s,u,c;return wp.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:i=PCe(r),a=r.json.images||[],o=[],s=mZ(i);try{for(s.s();!(u=s.n()).done;)c=u.value,o.push(OCe(r,a[c],c,e,n))}catch(v){s.e(v)}finally{s.f()}return p.next=7,Promise.all(o);case 7:return p.abrupt("return",p.sent);case 8:case"end":return p.stop()}},t)})),UL.apply(this,arguments)}function PCe(t){var r=new Set,e=t.json.textures||[],n=mZ(e),i;try{for(n.s();!(i=n.n()).done;){var a=i.value;a.source!==void 0&&r.add(a.source)}}catch(o){n.e(o)}finally{n.f()}return Array.from(r).sort()}function OCe(t,r,e,n,i){return jL.apply(this,arguments)}function jL(){return jL=zt(wp.default.mark(function t(r,e,n,i,a){var o,s,u,c,h,p,v;return wp.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(o=a.fetch,s=a.parse,!(e.uri&&!e.hasOwnProperty("bufferView"))){E.next=10;break}return c=YR(e.uri,i),E.next=5,o(c);case 5:return h=E.sent,E.next=8,h.arrayBuffer();case 8:u=E.sent,e.bufferView={data:u};case 10:return Number.isFinite(e.bufferView)&&(p=vK(r.json,r.buffers,e.bufferView),u=cm(p.buffer,p.byteOffset,p.byteLength)),mu(u,"glTF image has no data"),E.next=14,s(u,[vf,XR],{mimeType:e.mimeType,basis:i.basis||{format:tS()}},a);case 14:v=E.sent,v&&v[0]&&(v={compressed:!0,mipmaps:!1,width:v[0].width,height:v[0].height,data:v[0]}),r.images=r.images||[],r.images[n]=v;case 18:case"end":return E.stop()}},t)})),jL.apply(this,arguments)}function gZ(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function uS(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?gZ(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):gZ(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var Tp={name:"glTF",id:"gltf",module:"gltf",version:ZY,extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:MCe,options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function MCe(t){return VL.apply(this,arguments)}function VL(){return VL=zt(GL.default.mark(function t(r){var e,n,i,a,o,s,u=arguments;return GL.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return e=u.length>1&&u[1]!==void 0?u[1]:{},n=u.length>2?u[2]:void 0,e=uS(uS({},Tp.options),e),e.gltf=uS(uS({},Tp.options.gltf),e.gltf),i=e,a=i.byteOffset,o=a===void 0?0:a,s={},h.next=8,vZ(s,r,o,e,n);case 8:return h.abrupt("return",h.sent);case 9:case"end":return h.stop()}},t)})),VL.apply(this,arguments)}var U1=en(On());function AZ(t){return HL.apply(this,arguments)}function HL(){return HL=zt(U1.default.mark(function t(r){var e;return U1.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e=[],r.scenes.forEach(function(a){a.traverse(function(o){Object.values(o.model.getUniforms()).forEach(function(s){s.loaded===!1&&e.push(s)})})}),i.next=4,ICe(function(){return e.some(function(a){return!a.loaded})});case 4:return i.abrupt("return",i.sent);case 5:case"end":return i.stop()}},t)})),HL.apply(this,arguments)}function ICe(t){return WL.apply(this,arguments)}function WL(){return WL=zt(U1.default.mark(function t(r){return U1.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!r()){n.next=5;break}return n.next=3,new Promise(function(i){return requestAnimationFrame(i)});case 3:n.next=0;break;case 5:case"end":return n.stop()}},t)})),WL.apply(this,arguments)}var yZ=`#version 300 es
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceColors;
in vec3 instancePickingColors;
in mat3 instanceModelMatrix;
in vec3 instanceTranslation;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform mat4 sceneModelMatrix;
uniform bool composeModelMatrix;
in vec4 POSITION;

#ifdef HAS_UV
  in vec2 TEXCOORD_0;
#endif

#ifdef MODULE_PBR
  #ifdef HAS_NORMALS
    in vec4 NORMAL;
  #endif
#endif
out vec4 vColor;
#ifndef MODULE_PBR
  #ifdef HAS_UV
    out vec2 vTEXCOORD_0;
  #endif
#endif
void main(void) {
  #if defined(HAS_UV) && !defined(MODULE_PBR)
    vTEXCOORD_0 = TEXCOORD_0;
    geometry.uv = vTEXCOORD_0;
  #endif

  geometry.worldPosition = instancePositions;
  geometry.pickingColor = instancePickingColors;

  vec3 normal = vec3(0.0, 0.0, 1.0);
  #ifdef MODULE_PBR
    #ifdef HAS_NORMALS
      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;
    #endif
  #endif

  float originalSize = project_size_to_pixel(sizeScale);
  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);

  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;
  if(composeModelMatrix) {
    DECKGL_FILTER_SIZE(pos, geometry);
    geometry.normal = project_normal(normal);
    geometry.worldPosition += pos;
    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
  }
  else {
    pos = project_size(pos);
    DECKGL_FILTER_SIZE(pos, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);
    geometry.normal = project_normal(normal);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  #ifdef MODULE_PBR
    pbr_vPosition = geometry.position.xyz;
    #ifdef HAS_NORMALS
      pbr_vNormal = geometry.normal;
    #endif

    #ifdef HAS_UV
      pbr_vUV = TEXCOORD_0;
    #else
      pbr_vUV = vec2(0., 0.);
    #endif
    geometry.uv = pbr_vUV;
  #endif

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var _Z=`#version 300 es
uniform float opacity;
in vec4 vColor;

out vec4 fragmentColor;
#ifndef MODULE_PBR
  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)
    in vec2 vTEXCOORD_0;
    uniform sampler2D u_BaseColorSampler;
  #endif
#endif

void main(void) {
  #ifdef MODULE_PBR
    fragmentColor = vColor * pbr_filterColor(vec4(0));
    geometry.uv = pbr_vUV;
  #else
    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)
      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);
      geometry.uv = vTEXCOORD_0;
    #else
      fragmentColor = vColor;
    #endif
  #endif

  fragmentColor.a *= opacity;
  DECKGL_FILTER_COLOR(fragmentColor, geometry);
}
`;function bZ(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function xZ(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?bZ(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):bZ(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function RCe(t){var r=LCe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function LCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var wZ=[255,255,255,255],kCe={scenegraph:{type:"object",value:null,async:!0},getScene:function(r){return r&&r.scenes?vr(r.scene)==="object"?r.scene:r.scenes[r.scene||0]:r},getAnimator:function(r){return r&&r.animator},_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:function(r){return r.position}},getColor:{type:"accessor",value:wZ},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[Tp]},f0=function(t){Ke(e,t);var r=RCe(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"getShaders",value:function(){var i=[La,Wa];return this.props._lighting==="pbr"&&i.push(od),Yt(me(e.prototype),"getShaders",this).call(this,{vs:yZ,fs:_Z,modules:i})}},{key:"initializeState",value:function(){var i=this.getAttributeManager();i.addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:wZ,transition:!0},instanceModelMatrix:KT})}},{key:"updateState",value:function(i){Yt(me(e.prototype),"updateState",this).call(this,i);var a=i.props,o=i.oldProps;a.scenegraph!==o.scenegraph?this._updateScenegraph():a._animations!==o._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,a._animations)}},{key:"finalizeState",value:function(i){Yt(me(e.prototype),"finalizeState",this).call(this,i),this._deleteScenegraph()}},{key:"isLoaded",get:function(){var i;return((i=this.state)===null||i===void 0?void 0:i.scenegraph)&&Yt(me(e.prototype),"isLoaded",this)}},{key:"_updateScenegraph",value:function(){var i=this,a=this.props,o=this.context.gl,s=null;if(a.scenegraph instanceof Sh)s={scenes:[a.scenegraph]};else if(a.scenegraph&&!a.scenegraph.gltf){var u=a.scenegraph,c=QT(o,u,this._getModelOptions());s=xZ({gltf:u},c),AZ(c).then(function(){return i.setNeedsRedraw()})}else a.scenegraph&&(xr.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),s=a.scenegraph);var h={layer:this,gl:o},p=a.getScene(s,h),v=a.getAnimator(s,h);p instanceof Sh?(this._deleteScenegraph(),this._applyAllAttributes(p),this._applyAnimationsProp(p,v,a._animations),this.setState({scenegraph:p,animator:v})):p!==null&&xr.warn("invalid scenegraph:",p)()}},{key:"_applyAllAttributes",value:function(i){var a=this;if(this.state.attributesAvailable){var o=this.getAttributeManager().getAttributes();i.traverse(function(s){a._setModelAttributes(s.model,o)})}}},{key:"_applyAnimationsProp",value:function(i,a,o){if(!(!i||!a||!o)){var s=a.getAnimations();Object.keys(o).sort().forEach(function(u){var c=o[u];if(u==="*")s.forEach(function(v){Object.assign(v,c)});else if(Number.isFinite(Number(u))){var h=Number(u);h>=0&&h<s.length?Object.assign(s[h],c):xr.warn("animation ".concat(u," not found"))()}else{var p=s.find(function(v){var x=v.name;return x===u});p?Object.assign(p,c):xr.warn("animation ".concat(u," not found"))()}})}}},{key:"_deleteScenegraph",value:function(){var i=this.state.scenegraph;i instanceof Sh&&i.delete()}},{key:"_getModelOptions",value:function(){var i=this.props._imageBasedLightingEnvironment,a=null;return i&&(typeof i=="function"?a=i({gl:this.context.gl,layer:this}):a=i),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:a,modelOptions:xZ({isInstanced:!0,transpileToGLSL100:!En(this.context.gl)},this.getShaders()),useTangents:!1}}},{key:"updateAttributes",value:function(i){var a=this;this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(function(o){a._setModelAttributes(o.model,i)})}},{key:"draw",value:function(i){var a=i.moduleParameters,o=a===void 0?null:a,s=i.parameters,u=s===void 0?{}:s,c=i.context;if(this.state.scenegraph){this.props._animations&&this.state.animator&&(this.state.animator.animate(c.timeline.getTime()),this.setNeedsRedraw());var h=this.context.viewport,p=this.props,v=p.sizeScale,x=p.sizeMinPixels,E=p.sizeMaxPixels,R=p.opacity,D=p.coordinateSystem,H=this.getNumInstances();this.state.scenegraph.traverse(function(W,$){var J=$.worldMatrix;W.model.setInstanceCount(H),W.updateModuleSettings(o),W.draw({parameters:u,uniforms:{sizeScale:v,opacity:R,sizeMinPixels:x,sizeMaxPixels:E,composeModelMatrix:ZT(h,D),sceneModelMatrix:J,u_Camera:W.model.getUniforms().project_uCameraPosition}})})}}}]),e}(aa);_(f0,"defaultProps",kCe);_(f0,"layerName","ScenegraphLayer");at();vt();et();var TZ=`#version 300 es
#define SHADER_NAME simple-mesh-layer-vs
uniform float sizeScale;
uniform bool composeModelMatrix;
uniform bool pickFeatureIds;
in vec3 positions;
in vec3 normals;
in vec3 colors;
in vec2 texCoords;
in vec4 uvRegions;
in vec3 featureIdsPickingColors;
in vec4 instanceColors;
in vec3 instancePickingColors;
in mat3 instanceModelMatrix;
out vec2 vTexCoord;
out vec3 cameraPosition;
out vec3 normals_commonspace;
out vec4 position_commonspace;
out vec4 vColor;

vec2 applyUVRegion(vec2 uv) {
  #ifdef HAS_UV_REGIONS
    return fract(uv) * (uvRegions.zw - uvRegions.xy) + uvRegions.xy;
  #else
    return uv;
  #endif
}

void main(void) {
  vec2 uv = applyUVRegion(texCoords);
  geometry.uv = uv;

  if (pickFeatureIds) {
    geometry.pickingColor = featureIdsPickingColors;
  } else {
    geometry.pickingColor = instancePickingColors;
  }

  vTexCoord = uv;
  cameraPosition = project_uCameraPosition;
  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);

  vec3 pos = (instanceModelMatrix * positions) * sizeScale;
  vec3 projectedPosition = project_position(positions);
  position_commonspace = vec4(projectedPosition, 1.0);
  gl_Position = project_common_position_to_clipspace(position_commonspace);

  geometry.position = position_commonspace;
  normals_commonspace = project_normal(instanceModelMatrix * normals);
  geometry.normal = normals_commonspace;

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  #ifdef MODULE_PBR
    pbr_vPosition = geometry.position.xyz;
    #ifdef HAS_NORMALS
      pbr_vNormal = geometry.normal;
    #endif

    #ifdef HAS_UV
      pbr_vUV = uv;
    #else
      pbr_vUV = vec2(0., 0.);
    #endif
    geometry.uv = pbr_vUV;
  #endif

  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var SZ=`#version 300 es
#define SHADER_NAME simple-mesh-layer-fs

precision highp float;

uniform bool hasTexture;
uniform sampler2D sampler;
uniform bool flatShading;
uniform float opacity;

in vec2 vTexCoord;
in vec3 cameraPosition;
in vec3 normals_commonspace;
in vec4 position_commonspace;
in vec4 vColor;

out vec4 fragColor;

void main(void) {
  
#ifdef MODULE_PBR

  fragColor = vColor * pbr_filterColor(vec4(0));
  geometry.uv = pbr_vUV;
  fragColor.a *= opacity;

#else

  geometry.uv = vTexCoord;

  vec3 normal;
  if (flatShading) {
#ifdef DERIVATIVES_AVAILABLE
    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));
#else
    normal = vec3(0.0, 0.0, 1.0);
#endif
  } else {
    normal = normals_commonspace;
  }

  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;
  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);
  fragColor = vec4(lightColor, color.a * opacity);

#endif

  DECKGL_FILTER_COLOR(fragColor, geometry);
}
`;function EZ(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Ld(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?EZ(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):EZ(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function BCe(t){var r=DCe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function DCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function FCe(t){var r=t.COLOR_0||t.colors;r||(t.colors={constant:!0,value:new Float32Array([1,1,1])})}var NCe={pbrMaterial:{type:"object",value:null},featureIds:{type:"array",value:null,optional:!0}},lS=function(t){Ke(e,t);var r=BCe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"getShaders",value:function(){var i=Yt(me(e.prototype),"getShaders",this).call(this),a=i.modules;return a.push(od),Ld(Ld({},i),{},{vs:TZ,fs:SZ})}},{key:"initializeState",value:function(){var i=this.props.featureIds;Yt(me(e.prototype),"initializeState",this).call(this);var a=this.getAttributeManager();i&&a.add({featureIdsPickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateFeatureIdsPickingColors}})}},{key:"updateState",value:function(i){Yt(me(e.prototype),"updateState",this).call(this,i);var a=i.props,o=i.oldProps;a.pbrMaterial!==o.pbrMaterial&&this.updatePbrMaterialUniforms(a.pbrMaterial)}},{key:"draw",value:function(i){var a=this.props.featureIds;this.state.model&&(this.state.model.setUniforms({u_Camera:this.state.model.getUniforms().project_uCameraPosition,pickFeatureIds:Boolean(a)}),Yt(me(e.prototype),"draw",this).call(this,i))}},{key:"getModel",value:function(i){var a=this.props,o=a.id,s=a.pbrMaterial,u=this.parseMaterial(s,i);this.setState({materialParser:u});var c=this.getShaders();FCe(i.attributes);var h=new Ni(this.context.gl,Ld(Ld({},this.getShaders()),{},{id:o,geometry:i,defines:Ld(Ld(Ld({},c.defines),u?.defines),{},{HAS_UV_REGIONS:i.attributes.uvRegions}),parameters:u?.parameters,isInstanced:!0}));return h}},{key:"updatePbrMaterialUniforms",value:function(i){var a=this.state.model;if(a){var o=this.props.mesh,s=this.parseMaterial(i,o);this.setState({materialParser:s}),a.setUniforms(s.uniforms)}}},{key:"parseMaterial",value:function(i,a){var o,s=Boolean(i.pbrMetallicRoughness&&i.pbrMetallicRoughness.baseColorTexture);return(o=this.state.materialParser)===null||o===void 0||o.delete(),new O1(this.context.gl,{attributes:{NORMAL:a.attributes.normals,TEXCOORD_0:a.attributes.texCoords},material:Ld({unlit:s},i),pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1})}},{key:"calculateFeatureIdsPickingColors",value:function(i){for(var a=this.props.featureIds,o=new Uint8ClampedArray(a.length*i.size),s=[],u=0;u<a.length;u++)this.encodePickingColor(a[u],s),o[u*3]=s[0],o[u*3+1]=s[1],o[u*3+2]=s[2];i.value=o}},{key:"finalizeState",value:function(i){var a;Yt(me(e.prototype),"finalizeState",this).call(this,i),(a=this.state.materialParser)===null||a===void 0||a.delete(),this.setState({materialParser:null})}}]),e}(_p);_(lS,"layerName","MeshLayer");_(lS,"defaultProps",NCe);Mn();et();at();vt();var mv=en(On());et();Mn();at();vt();et();var Sp=6378137,Ep=6378137,Cp=6356752314245179e-9,zCe={radii:[Sp,Ep,Cp],radiiSquared:[Sp*Sp,Ep*Ep,Cp*Cp],oneOverRadii:[1/Sp,1/Ep,1/Cp],oneOverRadiiSquared:[1/(Sp*Sp),1/(Ep*Ep),1/(Cp*Cp)],maximumRadius:Math.max(Sp,Ep,Cp),centerToleranceSquared:.1};function cS(t){return t}var bBt=new _t;function UCe(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:cS;return"longitude"in t?(r[0]=e(t.longitude),r[1]=e(t.latitude),r[2]=t.height):"x"in t?(r[0]=e(t.x),r[1]=e(t.y),r[2]=t.z):(r[0]=e(t[0]),r[1]=e(t[1]),r[2]=t[2]),r}function CZ(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return UCe(t,r,uo._cartographicRadians?cS:XO)}function jCe(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:cS;return"longitude"in r?(r.longitude=e(t[0]),r.latitude=e(t[1]),r.height=t[2]):"x"in r?(r.x=e(t[0]),r.y=e(t[1]),r.z=t[2]):(r[0]=e(t[0]),r[1]=e(t[1]),r[2]=t[2]),r}function PZ(t,r){return jCe(t,r,uo._cartographicRadians?cS:YO)}var h0=new _t,GCe=new _t,VCe=new _t;function qL(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],n=r.oneOverRadii,i=r.oneOverRadiiSquared,a=r.centerToleranceSquared;h0.from(t);var o=h0.x,s=h0.y,u=h0.z,c=n.x,h=n.y,p=n.z,v=o*o*c*c,x=s*s*h*h,E=u*u*p*p,R=v+x+E,D=Math.sqrt(1/R);if(Number.isFinite(D)){var H=GCe;if(H.copy(t).scale(D),R<a)return H.to(e);var W=i.x,$=i.y,J=i.z,B=VCe;B.set(H.x*W*2,H.y*$*2,H.z*J*2);var se=(1-D)*h0.len()/(.5*B.len()),V=0,X,I,O,U;do{se-=V,X=1/(1+se*W),I=1/(1+se*$),O=1/(1+se*J);var re=X*X,ee=I*I,pe=O*O,je=re*X,qe=ee*I,We=pe*O;U=v*re+x*ee+E*pe-1;var ot=v*je*W+x*qe*$+E*We*J,gt=-2*ot;V=U/gt}while(Math.abs(U)>lh.EPSILON12);return h0.scale([X,I,O]).to(e)}}var OZ=1e-14,HCe=new _t,MZ={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},XL={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},Pp={east:new _t,north:new _t,up:new _t,west:new _t,south:new _t,down:new _t},WCe=new _t,qCe=new _t,XCe=new _t;function fS(t,r,e,n,i,a){var o=MZ[r]&&MZ[r][e];Ca(o&&(!n||n===o));var s,u,c,h=HCe.copy(i),p=Ao(h.x,0,OZ)&&Ao(h.y,0,OZ);if(p){var v=Math.sign(h.z);s=WCe.fromArray(XL[r]),r!=="east"&&r!=="west"&&s.scale(v),u=qCe.fromArray(XL[e]),e!=="east"&&e!=="west"&&u.scale(v),c=XCe.fromArray(XL[n]),n!=="east"&&n!=="west"&&c.scale(v)}else{var x=Pp.up,E=Pp.east,R=Pp.north;E.set(-h.y,h.x,0).normalize(),t.geodeticSurfaceNormal(h,x),R.copy(x).cross(E);var D=Pp.down,H=Pp.west,W=Pp.south;D.copy(x).scale(-1),H.copy(E).scale(-1),W.copy(R).scale(-1),s=Pp[r],u=Pp[e],c=Pp[n]}return a[0]=s.x,a[1]=s.y,a[2]=s.z,a[3]=0,a[4]=u.x,a[5]=u.y,a[6]=u.z,a[7]=0,a[8]=c.x,a[9]=c.y,a[10]=c.z,a[11]=0,a[12]=h.x,a[13]=h.y,a[14]=h.z,a[15]=1,a}var hS=new _t,IZ=new _t,YCe=new _t,Cf=new _t,KCe=new _t,pS=new _t;var Fa=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;ce(this,t),_(this,"radii",void 0),_(this,"radiiSquared",void 0),_(this,"radiiToTheFourth",void 0),_(this,"oneOverRadii",void 0),_(this,"oneOverRadiiSquared",void 0),_(this,"minimumRadius",void 0),_(this,"maximumRadius",void 0),_(this,"centerToleranceSquared",lh.EPSILON1),_(this,"squaredXOverSquaredZ",void 0),Ca(r>=0),Ca(e>=0),Ca(n>=0),this.radii=new _t(r,e,n),this.radiiSquared=new _t(r*r,e*e,n*n),this.radiiToTheFourth=new _t(r*r*r*r,e*e*e*e,n*n*n*n),this.oneOverRadii=new _t(r===0?0:1/r,e===0?0:1/e,n===0?0:1/n),this.oneOverRadiiSquared=new _t(r===0?0:1/(r*r),e===0?0:1/(e*e),n===0?0:1/(n*n)),this.minimumRadius=Math.min(r,e,n),this.maximumRadius=Math.max(r,e,n),this.radiiSquared.z!==0&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}return ve(t,[{key:"equals",value:function(e){return this===e||Boolean(e&&this.radii.equals(e.radii))}},{key:"toString",value:function(){return this.radii.toString()}},{key:"cartographicToCartesian",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],i=IZ,a=YCe,o=Ot(e,3),s=o[2];this.geodeticSurfaceNormalCartographic(e,i),a.copy(this.radiiSquared).scale(i);var u=Math.sqrt(i.dot(a));return a.scale(1/u),i.scale(s),a.add(i),a.to(n)}},{key:"cartesianToCartographic",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];pS.from(e);var i=this.scaleToGeodeticSurface(pS,Cf);if(i){var a=this.geodeticSurfaceNormal(i,IZ),o=KCe;o.copy(pS).subtract(i);var s=Math.atan2(a.y,a.x),u=Math.asin(a.z),c=Math.sign(T_(o,pS))*w_(o);return PZ([s,u,c],n)}}},{key:"eastNorthUpToFixedFrame",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new gn;return fS(this,"east","north","up",e,n)}},{key:"localFrameToFixedFrame",value:function(e,n,i,a){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:new gn;return fS(this,e,n,i,a,o)}},{key:"geocentricSurfaceNormal",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return hS.from(e).normalize().to(n)}},{key:"geodeticSurfaceNormalCartographic",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],i=CZ(e),a=i[0],o=i[1],s=Math.cos(o);return hS.set(s*Math.cos(a),s*Math.sin(a),Math.sin(o)).normalize(),hS.to(n)}},{key:"geodeticSurfaceNormal",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return hS.from(e).scale(this.oneOverRadiiSquared).normalize().to(n)}},{key:"scaleToGeodeticSurface",value:function(e,n){return qL(e,this,n)}},{key:"scaleToGeocentricSurface",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];Cf.from(e);var i=Cf.x,a=Cf.y,o=Cf.z,s=this.oneOverRadiiSquared,u=1/Math.sqrt(i*i*s.x+a*a*s.y+o*o*s.z);return Cf.multiplyScalar(u).to(n)}},{key:"transformPositionToScaledSpace",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return Cf.from(e).scale(this.oneOverRadii).to(n)}},{key:"transformPositionFromScaledSpace",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return Cf.from(e).scale(this.radii).to(n)}},{key:"getSurfaceNormalIntersectionWithZAxis",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,0];Ca(Ao(this.radii.x,this.radii.y,lh.EPSILON15)),Ca(this.radii.z>0),Cf.from(e);var a=Cf.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(a)>=this.radii.z-n))return Cf.set(0,0,a).to(i)}}]),t}();_(Fa,"WGS84",new Fa(Sp,Ep,Cp));et();et();function j1(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){let r=process.hrtime();t=r[0]*1e3+r[1]/1e6}else t=Date.now();return t}var pv=class{constructor(r,e){_(this,"name",void 0),_(this,"type",void 0),_(this,"sampleSize",1),_(this,"time",0),_(this,"count",0),_(this,"samples",0),_(this,"lastTiming",0),_(this,"lastSampleTime",0),_(this,"lastSampleCount",0),_(this,"_count",0),_(this,"_time",0),_(this,"_samples",0),_(this,"_startTime",0),_(this,"_timerPending",!1),this.name=r,this.type=e,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(r){return this.sampleSize=r,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(r){return this._count+=r,this._samples++,this._checkSampling(),this}subtractCount(r){return this._count-=r,this._samples++,this._checkSampling(),this}addTime(r){return this._time+=r,this.lastTiming=r,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=j1(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(j1()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}};var p0=class{constructor(r){_(this,"id",void 0),_(this,"stats",{}),this.id=r.id,this.stats={},this._initializeStats(r.stats),Object.seal(this)}get(r){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:r,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(let r of Object.values(this.stats))r.reset();return this}forEach(r){for(let e of Object.values(this.stats))r(e)}getTable(){let r={};return this.forEach(e=>{r[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}}),r}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(e=>this._getOrCreate(e))}_getOrCreate(r){let{name:e,type:n}=r,i=this.stats[e];return i||(r instanceof pv?i=r:i=new pv(e,n),this.stats[e]=i),i}};at();vt();et();at();vt();et();at();et();var RZ=function t(r,e,n){ce(this,t),_(this,"item",void 0),_(this,"previous",void 0),_(this,"next",void 0),this.item=r,this.previous=e,this.next=n};var LZ=function(){function t(){ce(this,t),_(this,"head",null),_(this,"tail",null),_(this,"_length",0)}return ve(t,[{key:"length",get:function(){return this._length}},{key:"add",value:function(e){var n=new RZ(e,this.tail,null);return this.tail?(this.tail.next=n,this.tail=n):(this.head=n,this.tail=n),++this._length,n}},{key:"remove",value:function(e){e&&(e.previous&&e.next?(e.previous.next=e.next,e.next.previous=e.previous):e.previous?(e.previous.next=null,this.tail=e.previous):e.next?(e.next.previous=null,this.head=e.next):(this.head=null,this.tail=null),e.next=null,e.previous=null,--this._length)}},{key:"splice",value:function(e,n){e!==n&&(this.remove(n),this._insert(e,n))}},{key:"_insert",value:function(e,n){var i=e.next;e.next=n,this.tail===e?this.tail=n:i.previous=n,n.next=i,n.previous=e,++this._length}}]),t}();var kZ=function(){function t(){ce(this,t),_(this,"_list",void 0),_(this,"_sentinel",void 0),_(this,"_trimTiles",void 0),this._list=new LZ,this._sentinel=this._list.add("sentinel"),this._trimTiles=!1}return ve(t,[{key:"reset",value:function(){this._list.splice(this._list.tail,this._sentinel)}},{key:"touch",value:function(e){var n=e._cacheNode;n&&this._list.splice(this._sentinel,n)}},{key:"add",value:function(e,n,i){n._cacheNode||(n._cacheNode=this._list.add(n),i&&i(e,n))}},{key:"unloadTile",value:function(e,n,i){var a=n._cacheNode;a&&(this._list.remove(a),n._cacheNode=null,i&&i(e,n))}},{key:"unloadTiles",value:function(e,n){var i=this._trimTiles;this._trimTiles=!1;for(var a=this._list,o=e.maximumMemoryUsage*1024*1024,s=this._sentinel,u=a.head;u!==s&&(e.gpuMemoryUsageInBytes>o||i);){var c=u.item;u=u.next,this.unloadTile(e,c,n)}}},{key:"trim",value:function(){this._trimTiles=!0}}]),t}();function BZ(t,r){ea(t),ea(r);var e=r.rtcCenter,n=r.gltfUpAxis,i=t.computedTransform,a=t.boundingVolume.center,o=new gn(i);switch(e&&o.translate(e),n){case"Z":break;case"Y":var s=new gn().rotateX(Math.PI/2);o=o.multiplyRight(s);break;case"X":var u=new gn().rotateY(-Math.PI/2);o=o.multiplyRight(u);break;default:break}r.isQuantized&&o.translate(r.quantizedVolumeOffset).scale(r.quantizedVolumeScale);var c=new _t(a);r.cartesianModelMatrix=o,r.cartesianOrigin=c;var h=Fa.WGS84.cartesianToCartographic(c,new _t),p=Fa.WGS84.eastNorthUpToFixedFrame(c),v=p.invert();r.cartographicModelMatrix=v.multiplyRight(o),r.cartographicOrigin=h,r.coordinateSystem||(r.modelMatrix=r.cartographicModelMatrix)}Mn();function ZCe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=$Ce(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function $Ce(t,r){if(t){if(typeof t=="string")return DZ(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return DZ(t,r)}}function DZ(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var FZ=new _t,YL=new _t,KL=new Yl([new Gs,new Gs,new Gs,new Gs,new Gs,new Gs]);function zZ(t,r){var e=t.cameraDirection,n=t.cameraUp,i=t.height,a=t.distanceScales.metersPerUnit,o=dS(t,t.center),s=Fa.WGS84.eastNorthUpToFixedFrame(o),u=t.unprojectPosition(t.cameraPosition),c=Fa.WGS84.cartographicToCartesian(u,new _t),h=new _t(s.transformAsVector(new _t(e).scale(a))).normalize(),p=new _t(s.transformAsVector(new _t(n).scale(a))).normalize();JCe(t);var v=t.constructor,x=t.longitude,E=t.latitude,R=t.width,D=t.bearing,H=t.zoom,W=new v({longitude:x,latitude:E,height:i,width:R,bearing:D,zoom:H,pitch:0});return{camera:{position:c,direction:h,up:p},viewport:t,topDownViewport:W,height:i,cullingVolume:KL,frameNumber:r,sseDenominator:1.15}}function UZ(t,r,e){if(e===0||t.length<=e)return[t,[]];var n=[],i=r.viewport,a=i.longitude,o=i.latitude,s=ZCe(t.entries()),u;try{for(s.s();!(u=s.n()).done;){var c=Ot(u.value,2),h=c[0],p=c[1],v=Ot(p.header.mbs,2),x=v[0],E=v[1],R=Math.abs(a-x),D=Math.abs(o-E),H=Math.sqrt(D*D+R*R);n.push([h,H])}}catch(V){s.e(V)}finally{s.f()}for(var W=n.sort(function(V,X){return V[1]-X[1]}),$=[],J=0;J<e;J++)$.push(t[W[J][0]]);for(var B=[],se=e;se<W.length;se++)B.push(t[W[se][0]]);return[$,B]}function JCe(t){var r=t.getFrustumPlanes(),e=NZ(r.near,t.cameraPosition),n=dS(t,e),i=dS(t,t.cameraPosition,YL),a=0;KL.planes[a++].fromPointNormal(n,FZ.copy(n).subtract(i));for(var o in r)if(o!=="near"){var s=r[o],u=NZ(s,e,YL),c=dS(t,u,YL);KL.planes[a++].fromPointNormal(c,FZ.copy(n).subtract(c))}}function NZ(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new _t,n=t.normal.dot(r);return e.copy(t.normal).scale(t.distance-n).add(r),e}function dS(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new _t,n=t.unprojectPosition(r);return Fa.WGS84.cartographicToCartesian(n,e)}Mn();var QCe=6378137,ePe=6378137,ZL=6356752314245179e-9,jZ=new _t;function GZ(t,r){if(t instanceof av){var e=t.halfAxes,n=tPe(e);return Math.log2(ZL/(n+r[2]))}else if(t instanceof Od){var i=t.radius;return Math.log2(ZL/(i+r[2]))}else if(t.width&&t.height){var a=t.width,o=t.height,s=Math.log2(QCe/a),u=Math.log2(ePe/o);return(s+u)/2}return 1}function $L(t,r,e){var n=Fa.WGS84.cartographicToCartesian([t.xmax,t.ymax,t.zmax],new _t),i=Math.sqrt(Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2)+Math.pow(n[2]-e[2],2));return Math.log2(ZL/(i+r[2]))}function VZ(t,r,e){var n=Ot(t,4),i=n[0],a=n[1],o=n[2],s=n[3];return $L({xmin:i,xmax:o,ymin:a,ymax:s,zmin:0,zmax:0},r,e)}function tPe(t){t.getColumn(0,jZ);var r=t.getColumn(1),e=t.getColumn(2),n=jZ.add(r).add(e),i=n.len();return i}et();at();vt();var rk=en(On());et();var Rl={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5},Zl={ADD:1,REPLACE:2},Op={EMPTY:"empty",SCENEGRAPH:"scenegraph",POINTCLOUD:"pointcloud",MESH:"mesh"},cl={I3S:"I3S",TILES3D:"TILES3D"},dv={GEOMETRIC_ERROR:"geometricError",MAX_SCREEN_THRESHOLD:"maxScreenThreshold"},HZ={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0};Mn();function qZ(t){return t!=null}var fl=new _t,mS=new _t,rPe=new _t,nPe=new _t;function vS(t,r,e){if(ea(t,"3D Tile: boundingVolume must be defined"),t.box)return iPe(t.box,r,e);if(t.region){var n=Ot(t.region,6),i=n[0],a=n[1],o=n[2],s=n[3],u=n[4],c=n[5],h=Fa.WGS84.cartographicToCartesian([Iu(i),Iu(s),u],rPe),p=Fa.WGS84.cartographicToCartesian([Iu(o),Iu(a),c],nPe),v=new _t().addVectors(h,p).multiplyScalar(.5),x=new _t().subVectors(h,p).len()/2;return WZ([v[0],v[1],v[2],x],new gn)}if(t.sphere)return WZ(t.sphere,r,e);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")}function XZ(t,r){if(t.box)return aPe(r);if(t.region){var e=Ot(t.region,6),n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5];return[[Iu(n),Iu(i),s],[Iu(a),Iu(o),u]]}if(t.sphere)return oPe(r);throw new Error("Unkown boundingVolume type")}function iPe(t,r,e){var n=new _t(t[0],t[1],t[2]);r.transform(n,n);var i=[];if(t.length===10){var a=t.slice(3,6),o=new uh;o.fromArray(t,6);var s=new _t([1,0,0]),u=new _t([0,1,0]),c=new _t([0,0,1]);s.transformByQuaternion(o),s.scale(a[0]),u.transformByQuaternion(o),u.scale(a[1]),c.transformByQuaternion(o),c.scale(a[2]),i=[].concat(Pr(s.toArray()),Pr(u.toArray()),Pr(c.toArray()))}else i=[].concat(Pr(t.slice(3,6)),Pr(t.slice(6,9)),Pr(t.slice(9,12)));var h=r.transformAsVector(i.slice(0,3)),p=r.transformAsVector(i.slice(3,6)),v=r.transformAsVector(i.slice(6,9)),x=new lo([h[0],h[1],h[2],p[0],p[1],p[2],v[0],v[1],v[2]]);return qZ(e)?(e.center=n,e.halfAxes=x,e):new av(n,x)}function WZ(t,r,e){var n=new _t(t[0],t[1],t[2]);r.transform(n,n);var i=r.getScale(mS),a=Math.max(Math.max(i[0],i[1]),i[2]),o=t[3]*a;return qZ(e)?(e.center=n,e.radius=o,e):new Od(n,o)}function aPe(t){for(var r=YZ(),e=t.halfAxes,n=new _t(e.getColumn(0)),i=new _t(e.getColumn(1)),a=new _t(e.getColumn(2)),o=0;o<2;o++){for(var s=0;s<2;s++){for(var u=0;u<2;u++)fl.copy(t.center),fl.add(n),fl.add(i),fl.add(a),KZ(r,fl),a.negate();i.negate()}n.negate()}return r}function oPe(t){var r=YZ(),e=t.center,n=t.radius,i=Fa.WGS84.scaleToGeodeticSurface(e,fl),a;i?a=Fa.WGS84.geodeticSurfaceNormal(i):a=new _t(0,0,1);var o=new _t(a[2],-a[1],0);o.len()>0?o.normalize():o=new _t(0,1,0);for(var s=o.clone().cross(a),u=0,c=[o,s,a];u<c.length;u++){var h=c[u];mS.copy(h).scale(n);for(var p=0;p<2;p++)fl.copy(e),fl.add(mS),KZ(r,fl),mS.negate()}return r}function YZ(){return[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]]}function KZ(t,r){Fa.WGS84.cartesianToCartographic(r,fl),t[0][0]=Math.min(t[0][0],fl[0]),t[0][1]=Math.min(t[0][1],fl[1]),t[0][2]=Math.min(t[0][2],fl[2]),t[1][0]=Math.max(t[1][0],fl[0]),t[1][1]=Math.max(t[1][1],fl[1]),t[1][2]=Math.max(t[1][2],fl[2])}var kDt=new _t,BDt=new _t,DDt=new gn,FDt=new _t,NDt=new _t,zDt=new _t;function sPe(t,r){var e=t*r;return 1-Math.exp(-(e*e))}function uPe(t,r){if(t.dynamicScreenSpaceError&&t.dynamicScreenSpaceErrorComputedDensity){var e=t.dynamicScreenSpaceErrorComputedDensity,n=t.dynamicScreenSpaceErrorFactor,i=sPe(r,e)*n;return i}return 0}function ZZ(t,r,e){var n=t.tileset,i=t.parent&&t.parent.lodMetricValue||t.lodMetricValue,a=e?i:t.lodMetricValue;if(a===0)return 0;var o=Math.max(t._distanceToCamera,1e-7),s=r.height,u=r.sseDenominator,c=n.options.viewDistanceScale,h=a*s*(c||1)/(o*u);return h-=uPe(n,o),h}var JL=new _t,$Z=new _t,kd=new _t,JZ=new _t,lPe=new _t,QL=new gn,QZ=new gn;function e$(t,r){if(t.lodMetricValue===0||isNaN(t.lodMetricValue))return"DIG";var e=2*ek(t,r);return e<2?"OUT":!t.header.children||e<=t.lodMetricValue?"DRAW":t.header.children?"DIG":"OUT"}function ek(t,r){var e=r.topDownViewport,n=t.header.mbs[1],i=t.header.mbs[0],a=t.header.mbs[2],o=t.header.mbs[3],s=Pr(t.boundingVolume.center),u=e.unprojectPosition(e.cameraPosition);Fa.WGS84.cartographicToCartesian(u,JL),$Z.copy(JL).subtract(s).normalize(),Fa.WGS84.eastNorthUpToFixedFrame(s,QL),QZ.copy(QL).invert(),kd.copy(JL).transform(QZ);var c=Math.sqrt(kd[0]*kd[0]+kd[1]*kd[1]),h=c*c/kd[2];JZ.copy([kd[0],kd[1],h]);var p=JZ.transform(QL),v=p.subtract(s).normalize(),x=$Z.cross(v).normalize().scale(o),E=x.add(s),R=Fa.WGS84.cartesianToCartographic(E),D=e.project([i,n,a]),H=e.project(R),W=lPe.copy(D).subtract(H).magnitude();return W}function t$(t){return{assetGltfUpAxis:t.asset&&t.asset.gltfUpAxis||"Y"}}et();at();vt();et();at();vt();et();var tk=function(){function t(){ce(this,t);var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;_(this,"_map",new Map),_(this,"_array",void 0),_(this,"_length",void 0),this._array=new Array(r),this._length=r}return ve(t,[{key:"length",get:function(){return this._length},set:function(e){this._length=e,e>this._array.length&&(this._array.length=e)}},{key:"values",get:function(){return this._array}},{key:"get",value:function(e){return ea(e<this._array.length),this._array[e]}},{key:"set",value:function(e,n){ea(e>=0),e>=this.length&&(this.length=e+1),this._map.has(this._array[e])&&this._map.delete(this._array[e]),this._array[e]=n,this._map.set(n,e)}},{key:"delete",value:function(e){var n=this._map.get(e);n>=0&&(this._array.splice(n,1),this._map.delete(e),this.length--)}},{key:"peek",value:function(){return this._array[this._length-1]}},{key:"push",value:function(e){if(!this._map.has(e)){var n=this.length++;this._array[n]=e,this._map.set(e,n)}}},{key:"pop",value:function(){var e=this._array[--this.length];return this._map.delete(e),e}},{key:"reserve",value:function(e){ea(e>=0),e>this._array.length&&(this._array.length=e)}},{key:"resize",value:function(e){ea(e>=0),this.length=e}},{key:"trim",value:function(e){e==null&&(e=this.length),this._array.length=e}},{key:"reset",value:function(){this._array=[],this._map=new Map,this._length=0}},{key:"find",value:function(e){return this._map.has(e)}}]),t}();function gS(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=cPe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function cPe(t,r){if(t){if(typeof t=="string")return r$(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return r$(t,r)}}function r$(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function n$(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function AS(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?n$(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):n$(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var fPe={loadSiblings:!1,skipLevelOfDetail:!1,maximumScreenSpaceError:2,updateTransforms:!0,onTraversalEnd:function(){},viewportTraversersMap:{},basePath:""},Bd=function(){function t(r){ce(this,t),_(this,"options",void 0),_(this,"root",null),_(this,"selectedTiles",{}),_(this,"requestedTiles",{}),_(this,"emptyTiles",{}),_(this,"lastUpdate",new Date().getTime()),_(this,"updateDebounceTime",1e3),_(this,"_traversalStack",new tk),_(this,"_emptyTraversalStack",new tk),_(this,"_frameNumber",null),this.options=AS(AS({},fPe),r)}return ve(t,[{key:"traversalFinished",value:function(e){return!0}},{key:"traverse",value:function(e,n,i){this.root=e,this.options=AS(AS({},this.options),i),this.reset(),this.updateTile(e,n),this._frameNumber=n.frameNumber,this.executeTraversal(e,n)}},{key:"reset",value:function(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()}},{key:"executeTraversal",value:function(e,n){var i=this._traversalStack;for(e._selectionDepth=1,i.push(e);i.length>0;){var a=i.pop(),o=!1;this.canTraverse(a,n)&&(this.updateChildTiles(a,n),o=this.updateAndPushChildren(a,n,i,a.hasRenderContent?a._selectionDepth+1:a._selectionDepth));var s=a.parent,u=Boolean(!s||s._shouldRefine),c=!o;a.hasRenderContent?a.refine===Zl.ADD?(this.loadTile(a,n),this.selectTile(a,n)):a.refine===Zl.REPLACE&&(this.loadTile(a,n),c&&this.selectTile(a,n)):(this.emptyTiles[a.id]=a,this.loadTile(a,n),c&&this.selectTile(a,n)),this.touchTile(a,n),a._shouldRefine=o&&u}var h=new Date().getTime();(this.traversalFinished(n)||h-this.lastUpdate>this.updateDebounceTime)&&(this.lastUpdate=h,this.options.onTraversalEnd(n))}},{key:"updateChildTiles",value:function(e,n){var i=e.children,a=gS(i),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;this.updateTile(s,n)}}catch(u){a.e(u)}finally{a.f()}}},{key:"updateAndPushChildren",value:function(e,n,i,a){var o=this.options,s=o.loadSiblings,u=o.skipLevelOfDetail,c=e.children;c.sort(this.compareDistanceToCamera.bind(this));var h=e.refine===Zl.REPLACE&&e.hasRenderContent&&!u,p=!1,v=!0,x=gS(c),E;try{for(x.s();!(E=x.n()).done;){var R=E.value;if(R._selectionDepth=a,R.isVisibleAndInRequestVolume?(i.find(R)&&i.delete(R),i.push(R),p=!0):(h||s)&&(this.loadTile(R,n),this.touchTile(R,n)),h){var D=void 0;if(R._inRequestVolume?R.hasRenderContent?D=R.contentAvailable:D=this.executeEmptyTraversal(R,n):D=!1,v=v&&D,!v)return!1}}}catch(H){x.e(H)}finally{x.f()}return p||(v=!1),v}},{key:"updateTile",value:function(e,n){this.updateTileVisibility(e,n)}},{key:"selectTile",value:function(e,n){this.shouldSelectTile(e)&&(e._selectedFrame=n.frameNumber,this.selectedTiles[e.id]=e)}},{key:"loadTile",value:function(e,n){this.shouldLoadTile(e)&&(e._requestedFrame=n.frameNumber,e._priority=e._getPriority(),this.requestedTiles[e.id]=e)}},{key:"touchTile",value:function(e,n){e.tileset._cache.touch(e),e._touchedFrame=n.frameNumber}},{key:"canTraverse",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return e.hasChildren?e.hasTilesetContent?!e.contentExpired:!a&&!e.isVisibleAndInRequestVolume?!1:this.shouldRefine(e,n,i):!1}},{key:"shouldLoadTile",value:function(e){return e.hasUnloadedContent||e.contentExpired}},{key:"shouldSelectTile",value:function(e){return e.contentAvailable&&!this.options.skipLevelOfDetail}},{key:"shouldRefine",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=e._screenSpaceError;return i&&(a=e.getScreenSpaceError(n,!0)),a>this.options.maximumScreenSpaceError}},{key:"updateTileVisibility",value:function(e,n){var i=[];if(this.options.viewportTraversersMap)for(var a in this.options.viewportTraversersMap){var o=this.options.viewportTraversersMap[a];o===n.viewport.id&&i.push(a)}else i.push(n.viewport.id);e.updateVisibility(n,i)}},{key:"compareDistanceToCamera",value:function(e,n){return e._distanceToCamera-n._distanceToCamera}},{key:"anyChildrenVisible",value:function(e,n){var i=!1,a=gS(e.children),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;s.updateVisibility(n),i=i||s.isVisibleAndInRequestVolume}}catch(u){a.e(u)}finally{a.f()}return i}},{key:"executeEmptyTraversal",value:function(e,n){var i=!0,a=this._emptyTraversalStack;for(a.push(e);a.length>0&&i;){var o=a.pop();this.updateTile(o,n),o.isVisibleAndInRequestVolume||this.loadTile(o,n),this.touchTile(o,n);var s=!o.hasRenderContent&&this.canTraverse(o,n,!1,!0);if(s){var u=o.children,c=gS(u),h;try{for(c.s();!(h=c.n()).done;){var p=h.value;a.find(p)&&a.delete(p),a.push(p)}}catch(v){c.e(v)}finally{c.f()}}else!o.contentAvailable&&!o.hasEmptyContent&&(i=!1)}return i}}]),t}();function i$(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function d0(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?i$(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i$(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var a$=new _t;function hPe(t){return t!=null}var G1=function(){function t(r,e,n){ce(this,t);var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"";_(this,"tileset",void 0),_(this,"header",void 0),_(this,"id",void 0),_(this,"url",void 0),_(this,"parent",void 0),_(this,"refine",void 0),_(this,"type",void 0),_(this,"contentUrl",void 0),_(this,"lodMetricType","geometricError"),_(this,"lodMetricValue",0),_(this,"boundingVolume",null),_(this,"content",null),_(this,"contentState",Rl.UNLOADED),_(this,"gpuMemoryUsageInBytes",0),_(this,"children",[]),_(this,"depth",0),_(this,"viewportIds",[]),_(this,"transform",new gn),_(this,"extensions",null),_(this,"implicitTiling",null),_(this,"userData",{}),_(this,"computedTransform",void 0),_(this,"hasEmptyContent",!1),_(this,"hasTilesetContent",!1),_(this,"traverser",new Bd({})),_(this,"_cacheNode",null),_(this,"_frameNumber",null),_(this,"_expireDate",null),_(this,"_expiredContent",null),_(this,"_boundingBox",void 0),_(this,"_distanceToCamera",0),_(this,"_screenSpaceError",0),_(this,"_visibilityPlaneMask",void 0),_(this,"_visible",void 0),_(this,"_contentBoundingVolume",void 0),_(this,"_viewerRequestVolume",void 0),_(this,"_initialTransform",new gn),_(this,"_priority",0),_(this,"_selectedFrame",0),_(this,"_requestedFrame",0),_(this,"_selectionDepth",0),_(this,"_touchedFrame",0),_(this,"_centerZDepth",0),_(this,"_shouldRefine",!1),_(this,"_stackLength",0),_(this,"_visitedFrame",0),_(this,"_inRequestVolume",!1),_(this,"_lodJudge",null),this.header=e,this.tileset=r,this.id=i||e.id,this.url=e.url,this.parent=n,this.refine=this._getRefine(e.refine),this.type=e.type,this.contentUrl=e.contentUrl,this._initializeLodMetric(e),this._initializeTransforms(e),this._initializeBoundingVolumes(e),this._initializeContent(e),this._initializeRenderingState(e),Object.seal(this)}return ve(t,[{key:"destroy",value:function(){this.header=null}},{key:"isDestroyed",value:function(){return this.header===null}},{key:"selected",get:function(){return this._selectedFrame===this.tileset._frameNumber}},{key:"isVisible",get:function(){return this._visible}},{key:"isVisibleAndInRequestVolume",get:function(){return this._visible&&this._inRequestVolume}},{key:"hasRenderContent",get:function(){return!this.hasEmptyContent&&!this.hasTilesetContent}},{key:"hasChildren",get:function(){return this.children.length>0||this.header.children&&this.header.children.length>0}},{key:"contentReady",get:function(){return this.contentState===Rl.READY||this.hasEmptyContent}},{key:"contentAvailable",get:function(){return Boolean(this.contentReady&&this.hasRenderContent||this._expiredContent&&!this.contentFailed)}},{key:"hasUnloadedContent",get:function(){return this.hasRenderContent&&this.contentUnloaded}},{key:"contentUnloaded",get:function(){return this.contentState===Rl.UNLOADED}},{key:"contentExpired",get:function(){return this.contentState===Rl.EXPIRED}},{key:"contentFailed",get:function(){return this.contentState===Rl.FAILED}},{key:"distanceToCamera",get:function(){return this._distanceToCamera}},{key:"screenSpaceError",get:function(){return this._screenSpaceError}},{key:"boundingBox",get:function(){return this._boundingBox||(this._boundingBox=XZ(this.header.boundingVolume,this.boundingVolume)),this._boundingBox}},{key:"getScreenSpaceError",value:function(e,n){switch(this.tileset.type){case cl.I3S:return ek(this,e);case cl.TILES3D:return ZZ(this,e,n);default:throw new Error("Unsupported tileset type")}}},{key:"unselect",value:function(){this._selectedFrame=0}},{key:"_getGpuMemoryUsageInBytes",value:function(){return this.content.gpuMemoryUsageInBytes||this.content.byteLength||0}},{key:"_getPriority",value:function(){var e=this.tileset._traverser,n=e.options.skipLevelOfDetail,i=this.refine===Zl.ADD||n;if(i&&!this.isVisible&&this._visible!==void 0||this.tileset._frameNumber-this._touchedFrame>=1||this.contentState===Rl.UNLOADED)return-1;var a=this.parent,o=a&&(!i||this._screenSpaceError===0||a.hasTilesetContent),s=o?a._screenSpaceError:this._screenSpaceError,u=e.root?e.root._screenSpaceError:0;return Math.max(u-s,0)}},{key:"loadContent",value:function(){var r=zt(rk.default.mark(function n(){var i,a,o,s,u;return rk.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!this.hasEmptyContent){h.next=2;break}return h.abrupt("return",!1);case 2:if(!this.content){h.next=4;break}return h.abrupt("return",!0);case 4:return i=this.contentExpired,i&&(this._expireDate=null),this.contentState=Rl.LOADING,h.next=9,this.tileset._requestScheduler.scheduleRequest(this.id,this._getPriority.bind(this));case 9:if(a=h.sent,a){h.next=13;break}return this.contentState=Rl.UNLOADED,h.abrupt("return",!1);case 13:return h.prev=13,o=this.tileset.getTileUrl(this.contentUrl),s=this.tileset.loader,u=d0(d0({},this.tileset.loadOptions),{},_({},s.id,d0(d0({},this.tileset.loadOptions[s.id]),{},{isTileset:this.type==="json"},this._getLoaderSpecificOptions(s.id)))),h.next=19,Ks(o,s,u);case 19:if(this.content=h.sent,!this.tileset.options.contentLoader){h.next=23;break}return h.next=23,this.tileset.options.contentLoader(this);case 23:return this._isTileset()&&this.tileset._initializeTileHeaders(this.content,this),this.contentState=Rl.READY,this._onContentLoaded(),h.abrupt("return",!0);case 29:throw h.prev=29,h.t0=h.catch(13),this.contentState=Rl.FAILED,h.t0;case 33:return h.prev=33,a.done(),h.finish(33);case 36:case"end":return h.stop()}},n,this,[[13,29,33,36]])}));function e(){return r.apply(this,arguments)}return e}()},{key:"unloadContent",value:function(){return this.content&&this.content.destroy&&this.content.destroy(),this.content=null,this.header.content&&this.header.content.destroy&&this.header.content.destroy(),this.header.content=null,this.contentState=Rl.UNLOADED,!0}},{key:"updateVisibility",value:function(e,n){if(this._frameNumber!==e.frameNumber){var i=this.parent,a=i?i._visibilityPlaneMask:Yl.MASK_INDETERMINATE;if(this.tileset._traverser.options.updateTransforms){var o=i?i.computedTransform:this.tileset.modelMatrix;this._updateTransform(o)}this._distanceToCamera=this.distanceToTile(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._visibilityPlaneMask=this.visibility(e,a),this._visible=this._visibilityPlaneMask!==Yl.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(e),this._frameNumber=e.frameNumber,this.viewportIds=n}}},{key:"visibility",value:function(e,n){var i=e.cullingVolume,a=this.boundingVolume;return i.computeVisibilityWithPlaneMask(a,n)}},{key:"contentVisibility",value:function(){return!0}},{key:"distanceToTile",value:function(e){var n=this.boundingVolume;return Math.sqrt(Math.max(n.distanceSquaredTo(e.camera.position),0))}},{key:"cameraSpaceZDepth",value:function(e){var n=e.camera,i=this.boundingVolume;return a$.subVectors(i.center,n.position),n.direction.dot(a$)}},{key:"insideViewerRequestVolume",value:function(e){var n=this._viewerRequestVolume;return!n||n.distanceSquaredTo(e.camera.position)<=0}},{key:"updateExpiration",value:function(){if(hPe(this._expireDate)&&this.contentReady&&!this.hasEmptyContent){var e=Date.now();Date.lessThan(this._expireDate,e)&&(this.contentState=Rl.EXPIRED,this._expiredContent=this.content)}}},{key:"extras",get:function(){return this.header.extras}},{key:"_initializeLodMetric",value:function(e){"lodMetricType"in e?this.lodMetricType=e.lodMetricType:(this.lodMetricType=this.parent&&this.parent.lodMetricType||this.tileset.lodMetricType,console.warn("3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType")),"lodMetricValue"in e?this.lodMetricValue=e.lodMetricValue:(this.lodMetricValue=this.parent&&this.parent.lodMetricValue||this.tileset.lodMetricValue,console.warn("3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue"))}},{key:"_initializeTransforms",value:function(e){this.transform=e.transform?new gn(e.transform):new gn;var n=this.parent,i=this.tileset,a=n&&n.computedTransform?n.computedTransform.clone():i.modelMatrix.clone();this.computedTransform=new gn(a).multiplyRight(this.transform);var o=n&&n._initialTransform?n._initialTransform.clone():new gn;this._initialTransform=new gn(o).multiplyRight(this.transform)}},{key:"_initializeBoundingVolumes",value:function(e){this._contentBoundingVolume=null,this._viewerRequestVolume=null,this._updateBoundingVolume(e)}},{key:"_initializeContent",value:function(e){this.content={_tileset:this.tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=Rl.UNLOADED,this.hasTilesetContent=!1,e.contentUrl&&(this.content=null,this.hasEmptyContent=!1)}},{key:"_initializeRenderingState",value:function(e){this.depth=e.level||(this.parent?this.parent.depth+1:0),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=Yl.MASK_INDETERMINATE,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._frameNumber=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._priority=0}},{key:"_getRefine",value:function(e){return e||this.parent&&this.parent.refine||Zl.REPLACE}},{key:"_isTileset",value:function(){return this.contentUrl.indexOf(".json")!==-1}},{key:"_onContentLoaded",value:function(){switch(this.content&&this.content.type){case"vctr":case"geom":this.tileset._traverser.disableSkipLevelOfDetail=!0;break;default:}this._isTileset()?this.hasTilesetContent=!0:this.gpuMemoryUsageInBytes=this._getGpuMemoryUsageInBytes()}},{key:"_updateBoundingVolume",value:function(e){this.boundingVolume=vS(e.boundingVolume,this.computedTransform,this.boundingVolume);var n=e.content;n&&(n.boundingVolume&&(this._contentBoundingVolume=vS(n.boundingVolume,this.computedTransform,this._contentBoundingVolume)),e.viewerRequestVolume&&(this._viewerRequestVolume=vS(e.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)))}},{key:"_updateTransform",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new gn,n=e.clone().multiplyRight(this.transform),i=!n.equals(this.computedTransform);i&&(this.computedTransform=n,this._updateBoundingVolume(this.header))}},{key:"_getLoaderSpecificOptions",value:function(e){switch(e){case"i3s":return d0(d0({},this.tileset.options.i3s),{},{_tileOptions:{attributeUrls:this.header.attributeUrls,textureUrl:this.header.textureUrl,textureFormat:this.header.textureFormat,textureLoaderOptions:this.header.textureLoaderOptions,materialDefinition:this.header.materialDefinition,isDracoGeometry:this.header.isDracoGeometry,mbs:this.header.mbs},_tilesetOptions:{store:this.tileset.tileset.store,attributeStorageInfo:this.tileset.tileset.attributeStorageInfo,fields:this.tileset.tileset.fields},isTileHeader:!1});case"3d-tiles":case"cesium-ion":default:return t$(this.tileset.tileset)}}}]),t}();at();vt();function pPe(t){var r=dPe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function dPe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var o$=function(t){Ke(e,t);var r=pPe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"compareDistanceToCamera",value:function(i,a){return a._distanceToCamera===0&&i._distanceToCamera===0?a._centerZDepth-i._centerZDepth:a._distanceToCamera-i._distanceToCamera}},{key:"updateTileVisibility",value:function(i,a){if(Yt(me(e.prototype),"updateTileVisibility",this).call(this,i,a),!!i.isVisibleAndInRequestVolume){var o=i.children.length>0;if(i.hasTilesetContent&&o){var s=i.children[0];this.updateTileVisibility(s,a),i._visible=s._visible;return}if(this.meetsScreenSpaceErrorEarly(i,a)){i._visible=!1;return}var u=i.refine===Zl.REPLACE,c=i._optimChildrenWithinParent===HZ.USE_OPTIMIZATION;if(u&&c&&o&&!this.anyChildrenVisible(i,a)){i._visible=!1;return}}}},{key:"meetsScreenSpaceErrorEarly",value:function(i,a){var o=i.parent;return!o||o.hasTilesetContent||o.refine!==Zl.ADD?!1:!this.shouldRefine(i,a,!0)}}]),e}(Bd);et();at();vt();var ik=en(On());et();at();vt();et();at();vt();et();var s$=function(){function t(){ce(this,t),_(this,"frameNumberMap",new Map)}return ve(t,[{key:"register",value:function(e,n){var i=this.frameNumberMap.get(e)||new Map,a=i.get(n)||0;i.set(n,a+1),this.frameNumberMap.set(e,i)}},{key:"deregister",value:function(e,n){var i=this.frameNumberMap.get(e);if(i){var a=i.get(n)||1;i.set(n,a-1)}}},{key:"isZero",value:function(e,n){var i,a=((i=this.frameNumberMap.get(e))===null||i===void 0?void 0:i.get(n))||0;return a===0}}]),t}();var nk={REQUESTED:"REQUESTED",COMPLETED:"COMPLETED",ERROR:"ERROR"},u$=function(){function t(){ce(this,t),_(this,"_statusMap",void 0),_(this,"pendingTilesRegister",new s$),this._statusMap={}}return ve(t,[{key:"add",value:function(e,n,i,a){var o=this;if(!this._statusMap[n]){var s=a.frameNumber,u=a.viewport.id;this._statusMap[n]={request:e,callback:i,key:n,frameState:a,status:nk.REQUESTED},this.pendingTilesRegister.register(u,s),e().then(function(c){o._statusMap[n].status=nk.COMPLETED;var h=o._statusMap[n].frameState,p=h.frameNumber,v=h.viewport.id;o.pendingTilesRegister.deregister(v,p),o._statusMap[n].callback(c,a)}).catch(function(c){o._statusMap[n].status=nk.ERROR;var h=o._statusMap[n].frameState,p=h.frameNumber,v=h.viewport.id;o.pendingTilesRegister.deregister(v,p),i(c)})}}},{key:"update",value:function(e,n){if(this._statusMap[e]){var i=this._statusMap[e].frameState,a=i.frameNumber,o=i.viewport.id;this.pendingTilesRegister.deregister(o,a);var s=n.frameNumber,u=n.viewport.id;this.pendingTilesRegister.register(u,s),this._statusMap[e].frameState=n}}},{key:"find",value:function(e){return this._statusMap[e]}},{key:"hasPendingTiles",value:function(e,n){return!this.pendingTilesRegister.isZero(e,n)}}]),t}();function l$(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function yS(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?l$(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l$(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function mPe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=vPe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function vPe(t,r){if(t){if(typeof t=="string")return c$(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return c$(t,r)}}function c$(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function gPe(t){var r=APe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function APe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var f$=function(t){Ke(e,t);var r=gPe(e);function e(n){var i;return ce(this,e),i=r.call(this,n),_(jt(i),"_tileManager",void 0),i._tileManager=new u$,i}return ve(e,[{key:"traversalFinished",value:function(i){return!this._tileManager.hasPendingTiles(i.viewport.id,this._frameNumber||0)}},{key:"shouldRefine",value:function(i,a){return i._lodJudge=e$(i,a),i._lodJudge==="DIG"}},{key:"updateChildTiles",value:function(i,a){var o=this,s=i.header.children||[],u=i.children,c=i.tileset,h=mPe(s),p;try{var v=function(){var E=p.value,R="".concat(E.id,"-").concat(a.viewport.id),D=u&&u.find(function($){return $.id===R});if(D)D&&o.updateTile(D,a);else{var H=function(){return o._loadTile(E.id,c)},W=o._tileManager.find(R);W?o._tileManager.update(R,a):(c.tileset.nodePages&&(H=function(){return c.tileset.nodePagesTile.formTileFromNodePages(E.id)}),o._tileManager.add(H,R,function($){return o._onTileLoad($,i,R)},a))}};for(h.s();!(p=h.n()).done;)v()}catch(x){h.e(x)}finally{h.f()}return!1}},{key:"_loadTile",value:function(){var n=zt(ik.default.mark(function a(o,s){var u,c,h;return ik.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return u=s.loader,c=s.getTileUrl("".concat(s.url,"/nodes/").concat(o)),h=yS(yS({},s.loadOptions),{},{i3s:yS(yS({},s.loadOptions.i3s),{},{isTileHeader:!0})}),v.next=5,Ks(c,u,h);case 5:return v.abrupt("return",v.sent);case 6:case"end":return v.stop()}},a)}));function i(a,o){return n.apply(this,arguments)}return i}()},{key:"_onTileLoad",value:function(i,a,o){var s=new G1(a.tileset,i,a,o);a.children.push(s);var u=this._tileManager.find(s.id).frameState;this.updateTile(s,u),this._frameNumber===u.frameNumber&&(this.traversalFinished(u)||new Date().getTime()-this.lastUpdate>this.updateDebounceTime)&&this.executeTraversal(s,u)}}]),e}(Bd);function Mp(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=yPe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function yPe(t,r){if(t){if(typeof t=="string")return h$(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return h$(t,r)}}function h$(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function p$(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Dd(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?p$(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):p$(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var _Pe={description:"",ellipsoid:Fa.WGS84,modelMatrix:new gn,throttleRequests:!0,maxRequests:64,maximumMemoryUsage:32,maximumTilesSelected:0,debounceTime:0,onTileLoad:function(){},onTileUnload:function(){},onTileError:function(){},onTraversalComplete:function(r){return r},contentLoader:void 0,viewDistanceScale:1,maximumScreenSpaceError:8,loadTiles:!0,updateTransforms:!0,viewportTraversersMap:null,loadOptions:{fetch:{}},attributions:[],basePath:"",i3s:{}},_S="Tiles In Tileset(s)",ak="Tiles In Memory",d$="Tiles In View",m$="Tiles To Render",v$="Tiles Loaded",ok="Tiles Loading",g$="Tiles Unloaded",A$="Failed Tile Loads",y$="Points/Vertices",sk="Tile Memory Use",uk=function(){function t(r,e){ce(this,t),_(this,"options",void 0),_(this,"loadOptions",void 0),_(this,"type",void 0),_(this,"tileset",void 0),_(this,"loader",void 0),_(this,"url",void 0),_(this,"basePath",void 0),_(this,"modelMatrix",void 0),_(this,"ellipsoid",void 0),_(this,"lodMetricType",void 0),_(this,"lodMetricValue",void 0),_(this,"refine",void 0),_(this,"root",null),_(this,"roots",{}),_(this,"asset",{}),_(this,"description",""),_(this,"properties",void 0),_(this,"extras",null),_(this,"attributions",{}),_(this,"credits",{}),_(this,"stats",void 0),_(this,"contentFormats",{draco:!1,meshopt:!1,dds:!1,ktx2:!1}),_(this,"cartographicCenter",null),_(this,"cartesianCenter",null),_(this,"zoom",1),_(this,"boundingVolume",null),_(this,"dynamicScreenSpaceErrorComputedDensity",0),_(this,"maximumMemoryUsage",32),_(this,"gpuMemoryUsageInBytes",0),_(this,"_frameNumber",0),_(this,"_queryParams",{}),_(this,"_extensionsUsed",[]),_(this,"_tiles",{}),_(this,"_pendingCount",0),_(this,"selectedTiles",[]),_(this,"traverseCounter",0),_(this,"geometricError",0),_(this,"lastUpdatedVieports",null),_(this,"_requestedTiles",[]),_(this,"_emptyTiles",[]),_(this,"frameStateData",{}),_(this,"_traverser",void 0),_(this,"_cache",new kZ),_(this,"_requestScheduler",void 0),_(this,"updatePromise",null),_(this,"tilesetInitializationPromise",void 0),this.options=Dd(Dd({},_Pe),e),this.tileset=r,this.loader=r.loader,this.type=r.type,this.url=r.url,this.basePath=r.basePath||df.dirname(this.url),this.modelMatrix=this.options.modelMatrix,this.ellipsoid=this.options.ellipsoid,this.lodMetricType=r.lodMetricType,this.lodMetricValue=r.lodMetricValue,this.refine=r.root.refine,this.loadOptions=this.options.loadOptions||{},this._traverser=this._initializeTraverser(),this._requestScheduler=new Hy({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this.stats=new p0({id:this.url}),this._initializeStats(),this.tilesetInitializationPromise=this._initializeTileSet(r)}return ve(t,[{key:"destroy",value:function(){this._destroy()}},{key:"isLoaded",value:function(){return this._pendingCount===0&&this._frameNumber!==0&&this._requestedTiles.length===0}},{key:"tiles",get:function(){return Object.values(this._tiles)}},{key:"frameNumber",get:function(){return this._frameNumber}},{key:"queryParams",get:function(){return new URLSearchParams(this._queryParams).toString()}},{key:"setProps",value:function(e){this.options=Dd(Dd({},this.options),e)}},{key:"setOptions",value:function(e){this.options=Dd(Dd({},this.options),e)}},{key:"getTileUrl",value:function(e){var n=e.startsWith("data:");return n?e:"".concat(e).concat(e.includes("?")?"&":"?").concat(this.queryParams)}},{key:"hasExtension",value:function(e){return Boolean(this._extensionsUsed.indexOf(e)>-1)}},{key:"update",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.tilesetInitializationPromise.then(function(){!n&&e.lastUpdatedVieports?n=e.lastUpdatedVieports:e.lastUpdatedVieports=n,n&&e.doUpdate(n)})}},{key:"selectTiles",value:function(){var r=zt(mv.default.mark(function n(){var i=this,a,o=arguments;return mv.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=o.length>0&&o[0]!==void 0?o[0]:null,u.next=3,this.tilesetInitializationPromise;case 3:return a&&(this.lastUpdatedVieports=a),this.updatePromise||(this.updatePromise=new Promise(function(c){setTimeout(function(){i.lastUpdatedVieports&&i.doUpdate(i.lastUpdatedVieports),c(i._frameNumber),i.updatePromise=null},i.options.debounceTime)})),u.abrupt("return",this.updatePromise);case 6:case"end":return u.stop()}},n,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"doUpdate",value:function(e){if(!("loadTiles"in this.options&&!this.options.loadTiles)&&!(this.traverseCounter>0)){var n=e instanceof Array?e:[e];this._cache.reset(),this._frameNumber++,this.traverseCounter=n.length;var i=[],a=Mp(n),o;try{for(a.s();!(o=a.n()).done;){var s=o.value,u=s.id;this._needTraverse(u)?i.push(u):this.traverseCounter--}}catch(E){a.e(E)}finally{a.f()}var c=Mp(n),h;try{for(c.s();!(h=c.n()).done;){var p=h.value,v=p.id;if(this.roots[v]||(this.roots[v]=this._initializeTileHeaders(this.tileset,null)),!!i.includes(v)){var x=zZ(p,this._frameNumber);this._traverser.traverse(this.roots[v],x,this.options)}}}catch(E){c.e(E)}finally{c.f()}}}},{key:"_needTraverse",value:function(e){var n=e;return this.options.viewportTraversersMap&&(n=this.options.viewportTraversersMap[e]),n===e}},{key:"_onTraversalEnd",value:function(e){var n=e.viewport.id;this.frameStateData[n]||(this.frameStateData[n]={selectedTiles:[],_requestedTiles:[],_emptyTiles:[]});var i=this.frameStateData[n],a=Object.values(this._traverser.selectedTiles),o=UZ(a,e,this.options.maximumTilesSelected),s=Ot(o,2),u=s[0],c=s[1];i.selectedTiles=u;var h=Mp(c),p;try{for(h.s();!(p=h.n()).done;){var v=p.value;v.unselect()}}catch(x){h.e(x)}finally{h.f()}i._requestedTiles=Object.values(this._traverser.requestedTiles),i._emptyTiles=Object.values(this._traverser.emptyTiles),this.traverseCounter--,!(this.traverseCounter>0)&&this._updateTiles()}},{key:"_updateTiles",value:function(){this.selectedTiles=[],this._requestedTiles=[],this._emptyTiles=[];for(var e in this.frameStateData){var n=this.frameStateData[e];this.selectedTiles=this.selectedTiles.concat(n.selectedTiles),this._requestedTiles=this._requestedTiles.concat(n._requestedTiles),this._emptyTiles=this._emptyTiles.concat(n._emptyTiles)}this.selectedTiles=this.options.onTraversalComplete(this.selectedTiles);var i=Mp(this.selectedTiles),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;this._tiles[o.id]=o}}catch(s){i.e(s)}finally{i.f()}this._loadTiles(),this._unloadTiles(),this._updateStats()}},{key:"_tilesChanged",value:function(e,n){if(e.length!==n.length)return!0;var i=new Set(e.map(function(s){return s.id})),a=new Set(n.map(function(s){return s.id})),o=e.filter(function(s){return!a.has(s.id)}).length>0;return o=o||n.filter(function(s){return!i.has(s.id)}).length>0,o}},{key:"_loadTiles",value:function(){var e=Mp(this._requestedTiles),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;i.contentUnloaded&&this._loadTile(i)}}catch(a){e.e(a)}finally{e.f()}}},{key:"_unloadTiles",value:function(){this._cache.unloadTiles(this,function(e,n){return e._unloadTile(n)})}},{key:"_updateStats",value:function(){var e=0,n=0,i=Mp(this.selectedTiles),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;o.contentAvailable&&o.content&&(e++,o.content.pointCount?n+=o.content.pointCount:n+=o.content.vertexCount)}}catch(s){i.e(s)}finally{i.f()}this.stats.get(d$).count=this.selectedTiles.length,this.stats.get(m$).count=e,this.stats.get(y$).count=n}},{key:"_initializeTileSet",value:function(){var r=zt(mv.default.mark(function n(i){return mv.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(this.type!==cl.I3S){o.next=5;break}return this.calculateViewPropsI3S(),o.next=4,i.root;case 4:i.root=o.sent;case 5:this.root=this._initializeTileHeaders(i,null),this.type===cl.TILES3D&&(this._initializeTiles3DTileset(i),this.calculateViewPropsTiles3D()),this.type===cl.I3S&&this._initializeI3STileset();case 8:case"end":return o.stop()}},n,this)}));function e(n){return r.apply(this,arguments)}return e}()},{key:"calculateViewPropsI3S",value:function(){var e,n=this.tileset.fullExtent;if(n){var i=n.xmin,a=n.xmax,o=n.ymin,s=n.ymax,u=n.zmin,c=n.zmax;this.cartographicCenter=new _t(i+(a-i)/2,o+(s-o)/2,u+(c-u)/2),this.cartesianCenter=Fa.WGS84.cartographicToCartesian(this.cartographicCenter,new _t),this.zoom=$L(n,this.cartographicCenter,this.cartesianCenter);return}var h=(e=this.tileset.store)===null||e===void 0?void 0:e.extent;if(h){var p=Ot(h,4),v=p[0],x=p[1],E=p[2],R=p[3];this.cartographicCenter=new _t(v+(E-v)/2,x+(R-x)/2,0),this.cartesianCenter=Fa.WGS84.cartographicToCartesian(this.cartographicCenter,new _t),this.zoom=VZ(h,this.cartographicCenter,this.cartesianCenter);return}console.warn("Extent is not defined in the tileset header"),this.cartographicCenter=new _t,this.zoom=1}},{key:"calculateViewPropsTiles3D",value:function(){var e=this.root,n=e.boundingVolume.center;if(!n){console.warn("center was not pre-calculated for the root tile"),this.cartographicCenter=new _t,this.zoom=1;return}n[0]!==0||n[1]!==0||n[2]!==0?this.cartographicCenter=Fa.WGS84.cartesianToCartographic(n,new _t):this.cartographicCenter=new _t(0,0,-Fa.WGS84.radii[0]),this.cartesianCenter=n,this.zoom=GZ(e.boundingVolume,this.cartographicCenter)}},{key:"_initializeStats",value:function(){this.stats.get(_S),this.stats.get(ok),this.stats.get(ak),this.stats.get(d$),this.stats.get(m$),this.stats.get(v$),this.stats.get(g$),this.stats.get(A$),this.stats.get(y$),this.stats.get(sk,"memory")}},{key:"_initializeTileHeaders",value:function(e,n){var i=new G1(this,e.root,n);if(n&&(n.children.push(i),i.depth=n.depth+1),this.type===cl.TILES3D){var a=[];for(a.push(i);a.length>0;){var o=a.pop();this.stats.get(_S).incrementCount();var s=o.header.children||[],u=Mp(s),c;try{for(u.s();!(c=u.n()).done;){var h=c.value,p,v=new G1(this,h,o);if((p=v.contentUrl)!==null&&p!==void 0&&p.includes("?session=")){var x=new URL(v.contentUrl),E=x.searchParams.get("session");E&&(this._queryParams.session=E)}o.children.push(v),v.depth=o.depth+1,a.push(v)}}catch(R){u.e(R)}finally{u.f()}}}return i}},{key:"_initializeTraverser",value:function(){var e,n=this.type;switch(n){case cl.TILES3D:e=o$;break;case cl.I3S:e=f$;break;default:e=Bd}return new e({basePath:this.basePath,onTraversalEnd:this._onTraversalEnd.bind(this)})}},{key:"_destroyTileHeaders",value:function(e){this._destroySubtree(e)}},{key:"_loadTile",value:function(){var r=zt(mv.default.mark(function n(i){var a;return mv.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,this._onStartTileLoading(),s.next=4,i.loadContent();case 4:a=s.sent,s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),this._onTileLoadError(i,s.t0 instanceof Error?s.t0:new Error("load failed"));case 10:return s.prev=10,this._onEndTileLoading(),this._onTileLoad(i,a),s.finish(10);case 14:case"end":return s.stop()}},n,this,[[0,7,10,14]])}));function e(n){return r.apply(this,arguments)}return e}()},{key:"_onTileLoadError",value:function(e,n){this.stats.get(A$).incrementCount();var i=n.message||n.toString(),a=e.url;console.error("A 3D tile failed to load: ".concat(e.url," ").concat(i)),this.options.onTileError(e,i,a)}},{key:"_onTileLoad",value:function(e,n){if(n){if(this.type===cl.I3S){var i,a,o=((i=this.tileset)===null||i===void 0||(a=i.nodePagesTile)===null||a===void 0?void 0:a.nodesInNodePages)||0;this.stats.get(_S).reset(),this.stats.get(_S).addCount(o)}e&&e.content&&BZ(e,e.content),this.updateContentTypes(e),this._addTileToCache(e),this.options.onTileLoad(e)}}},{key:"updateContentTypes",value:function(e){if(this.type===cl.I3S)switch(e.header.isDracoGeometry&&(this.contentFormats.draco=!0),e.header.textureFormat){case"dds":this.contentFormats.dds=!0;break;case"ktx2":this.contentFormats.ktx2=!0;break;default:}else if(this.type===cl.TILES3D){var n,i=((n=e.content)===null||n===void 0?void 0:n.gltf)||{},a=i.extensionsRemoved,o=a===void 0?[]:a;o.includes("KHR_draco_mesh_compression")&&(this.contentFormats.draco=!0),o.includes("EXT_meshopt_compression")&&(this.contentFormats.meshopt=!0),o.includes("KHR_texture_basisu")&&(this.contentFormats.ktx2=!0)}}},{key:"_onStartTileLoading",value:function(){this._pendingCount++,this.stats.get(ok).incrementCount()}},{key:"_onEndTileLoading",value:function(){this._pendingCount--,this.stats.get(ok).decrementCount()}},{key:"_addTileToCache",value:function(e){this._cache.add(this,e,function(n){return n._updateCacheStats(e)})}},{key:"_updateCacheStats",value:function(e){this.stats.get(v$).incrementCount(),this.stats.get(ak).incrementCount(),this.gpuMemoryUsageInBytes+=e.gpuMemoryUsageInBytes||0,this.stats.get(sk).count=this.gpuMemoryUsageInBytes}},{key:"_unloadTile",value:function(e){this.gpuMemoryUsageInBytes-=e.gpuMemoryUsageInBytes||0,this.stats.get(ak).decrementCount(),this.stats.get(g$).incrementCount(),this.stats.get(sk).count=this.gpuMemoryUsageInBytes,this.options.onTileUnload(e),e.unloadContent()}},{key:"_destroy",value:function(){var e=[];for(this.root&&e.push(this.root);e.length>0;){var n=e.pop(),i=Mp(n.children),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;e.push(o)}}catch(s){i.e(s)}finally{i.f()}this._destroyTile(n)}this.root=null}},{key:"_destroySubtree",value:function(e){var n=e,i=[];for(i.push(n);i.length>0;){e=i.pop();var a=Mp(e.children),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;i.push(s)}}catch(u){a.e(u)}finally{a.f()}e!==n&&this._destroyTile(e)}n.children=[]}},{key:"_destroyTile",value:function(e){this._cache.unloadTile(this,e),this._unloadTile(e),e.destroy()}},{key:"_initializeTiles3DTileset",value:function(e){if(e.queryString){var n=new URLSearchParams(e.queryString),i=Object.fromEntries(n.entries());this._queryParams=Dd(Dd({},this._queryParams),i)}if(this.asset=e.asset,!this.asset)throw new Error("Tileset must have an asset property.");if(this.asset.version!=="0.0"&&this.asset.version!=="1.0")throw new Error("The tileset must be 3D Tiles version 0.0 or 1.0.");"tilesetVersion"in this.asset&&(this._queryParams.v=this.asset.tilesetVersion),this.credits={attributions:this.options.attributions||[]},this.description=this.options.description||"",this.properties=e.properties,this.geometricError=e.geometricError,this._extensionsUsed=e.extensionsUsed||[],this.extras=e.extras}},{key:"_initializeI3STileset",value:function(){this.loadOptions.i3s&&"token"in this.loadOptions.i3s&&(this._queryParams.token=this.loadOptions.i3s.token)}}]),t}();var xv=en(On());var bS="3.4.13";var Ok=en(On());var vv={COMPOSITE:"cmpt",POINT_CLOUD:"pnts",BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",GEOMETRY:"geom",VECTOR:"vect",GLTF:"glTF"},x4t=Object.keys(vv);function lk(t,r,e){ea(t instanceof ArrayBuffer);var n=new TextDecoder("utf8"),i=new Uint8Array(t,r,e),a=n.decode(i);return a}function _$(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=new DataView(t);return"".concat(String.fromCharCode(e.getUint8(r+0))).concat(String.fromCharCode(e.getUint8(r+1))).concat(String.fromCharCode(e.getUint8(r+2))).concat(String.fromCharCode(e.getUint8(r+3)))}et();var Av=en(On());at();vt();et();var Eh,ck=(Eh={},_(Eh,5130,Float64Array),_(Eh,5126,Float32Array),_(Eh,5123,Uint16Array),_(Eh,5125,Uint32Array),_(Eh,5121,Uint8Array),_(Eh,5120,Int8Array),_(Eh,5122,Int16Array),_(Eh,5124,Int32Array),Eh),bPe={DOUBLE:5130,FLOAT:5126,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,UNSIGNED_BYTE:5121,BYTE:5120,SHORT:5122,INT:5124},fk="Failed to convert GL type",Fd=function(){function t(){ce(this,t)}return ve(t,null,[{key:"fromTypedArray",value:function(e){e=ArrayBuffer.isView(e)?e.constructor:e;for(var n in ck){var i=ck[n];if(i===e)return n}throw new Error(fk)}},{key:"fromName",value:function(e){var n=bPe[e];if(!n)throw new Error(fk);return n}},{key:"getArrayType",value:function(e){switch(e){case 33635:case 32819:case 32820:return Uint16Array;default:var n=ck[e];if(!n)throw new Error(fk);return n}}},{key:"getByteSize",value:function(e){var n=t.getArrayType(e);return n.BYTES_PER_ELEMENT}},{key:"validate",value:function(e){return Boolean(t.getArrayType(e))}},{key:"createTypedArray",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0;a===void 0&&(a=(n.byteLength-i)/t.getByteSize(e));var o=t.getArrayType(e);return new o(n,i,a)}}]),t}();function b$(t,r){if(!t)throw new Error("math.gl assertion failed. ".concat(r))}function hk(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],e=t>>11&31,n=t>>5&63,i=t&31;return r[0]=e<<3,r[1]=n<<2,r[2]=i<<3,r}var k4t=1/256;var B4t=new yf,D4t=new _t,F4t=new yf,N4t=new yf,z4t=new Uint8Array(1);function x$(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:255;return ya(t,0,r)/r*2-1}function w$(t){return t<0?-1:1}function T$(t,r,e,n){if(b$(n),t<0||t>e||r<0||r>e)throw new Error("x and y must be unsigned normalized integers between 0 and ".concat(e));if(n.x=x$(t,e),n.y=x$(r,e),n.z=1-(Math.abs(n.x)+Math.abs(n.y)),n.z<0){var i=n.x;n.x=(1-Math.abs(n.y))*w$(i),n.y=(1-Math.abs(i))*w$(n.y)}return n.normalize()}function pk(t,r,e){return T$(t,r,255,e)}at();vt();et();var m0=function(){function t(r,e){ce(this,t),_(this,"json",void 0),_(this,"buffer",void 0),_(this,"featuresLength",0),_(this,"_cachedTypedArrays",{}),this.json=r,this.buffer=e}return ve(t,[{key:"getExtension",value:function(e){return this.json.extensions&&this.json.extensions[e]}},{key:"hasProperty",value:function(e){return Boolean(this.json[e])}},{key:"getGlobalProperty",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5125,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=this.json[e];return a&&Number.isFinite(a.byteOffset)?this._getTypedArrayFromBinary(e,n,i,1,a.byteOffset):a}},{key:"getPropertyArray",value:function(e,n,i){var a=this.json[e];return a&&Number.isFinite(a.byteOffset)?("componentType"in a&&(n=Fd.fromName(a.componentType)),this._getTypedArrayFromBinary(e,n,i,this.featuresLength,a.byteOffset)):this._getTypedArrayFromArray(e,n,a)}},{key:"getProperty",value:function(e,n,i,a,o){var s=this.json[e];if(!s)return s;var u=this.getPropertyArray(e,n,i);if(i===1)return u[a];for(var c=0;c<i;++c)o[c]=u[i*a+c];return o}},{key:"_getTypedArrayFromBinary",value:function(e,n,i,a,o){var s=this._cachedTypedArrays,u=s[e];return u||(u=Fd.createTypedArray(n,this.buffer.buffer,this.buffer.byteOffset+o,a*i),s[e]=u),u}},{key:"_getTypedArrayFromArray",value:function(e,n,i){var a=this._cachedTypedArrays,o=a[e];return o||(o=Fd.createTypedArray(n,i),a[e]=o),o}}]),t}();at();vt();et();var xPe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},wPe={SCALAR:function(r,e){return r[e]},VEC2:function(r,e){return[r[2*e+0],r[2*e+1]]},VEC3:function(r,e){return[r[3*e+0],r[3*e+1],r[3*e+2]]},VEC4:function(r,e){return[r[4*e+0],r[4*e+1],r[4*e+2],r[4*e+3]]},MAT2:function(r,e){return[r[4*e+0],r[4*e+1],r[4*e+2],r[4*e+3]]},MAT3:function(r,e){return[r[9*e+0],r[9*e+1],r[9*e+2],r[9*e+3],r[9*e+4],r[9*e+5],r[9*e+6],r[9*e+7],r[9*e+8]]},MAT4:function(r,e){return[r[16*e+0],r[16*e+1],r[16*e+2],r[16*e+3],r[16*e+4],r[16*e+5],r[16*e+6],r[16*e+7],r[16*e+8],r[16*e+9],r[16*e+10],r[16*e+11],r[16*e+12],r[16*e+13],r[16*e+14],r[16*e+15]]}},TPe={SCALAR:function(r,e,n){e[n]=r},VEC2:function(r,e,n){e[2*n+0]=r[0],e[2*n+1]=r[1]},VEC3:function(r,e,n){e[3*n+0]=r[0],e[3*n+1]=r[1],e[3*n+2]=r[2]},VEC4:function(r,e,n){e[4*n+0]=r[0],e[4*n+1]=r[1],e[4*n+2]=r[2],e[4*n+3]=r[3]},MAT2:function(r,e,n){e[4*n+0]=r[0],e[4*n+1]=r[1],e[4*n+2]=r[2],e[4*n+3]=r[3]},MAT3:function(r,e,n){e[9*n+0]=r[0],e[9*n+1]=r[1],e[9*n+2]=r[2],e[9*n+3]=r[3],e[9*n+4]=r[4],e[9*n+5]=r[5],e[9*n+6]=r[6],e[9*n+7]=r[7],e[9*n+8]=r[8],e[9*n+9]=r[9]},MAT4:function(r,e,n){e[16*n+0]=r[0],e[16*n+1]=r[1],e[16*n+2]=r[2],e[16*n+3]=r[3],e[16*n+4]=r[4],e[16*n+5]=r[5],e[16*n+6]=r[6],e[16*n+7]=r[7],e[16*n+8]=r[8],e[16*n+9]=r[9],e[16*n+10]=r[10],e[16*n+11]=r[11],e[16*n+12]=r[12],e[16*n+13]=r[13],e[16*n+14]=r[14],e[16*n+15]=r[15]}};function S$(t,r,e,n){var i=t.componentType;ea(t.componentType);var a=typeof i=="string"?Fd.fromName(i):i,o=xPe[t.type],s=wPe[t.type],u=TPe[t.type];e+=t.byteOffset;var c=Fd.createTypedArray(a,r,e,o*n);return{values:c,type:a,size:o,unpacker:s,packer:u}}var Ch=function(r){return r!==void 0};function E$(t,r,e){if(!r)return null;var n=t.getExtension("3DTILES_batch_table_hierarchy"),i=r.HIERARCHY;return i&&(console.warn("3D Tile Parser: HIERARCHY is deprecated. Use 3DTILES_batch_table_hierarchy."),r.extensions=r.extensions||{},r.extensions["3DTILES_batch_table_hierarchy"]=i,n=i),n?SPe(n,e):null}function SPe(t,r){var e,n,i,a=t.instancesLength,o=t.classes,s=t.classIds,u=t.parentCounts,c=t.parentIds,h=a;Ch(s.byteOffset)&&(s.componentType=defaultValue(s.componentType,5123),s.type=AttributeType.SCALAR,i=getBinaryAccessor(s),s=i.createArrayBufferView(r.buffer,r.byteOffset+s.byteOffset,a));var p;if(Ch(u))for(Ch(u.byteOffset)&&(u.componentType=defaultValue(u.componentType,5123),u.type=AttributeType.SCALAR,i=getBinaryAccessor(u),u=i.createArrayBufferView(r.buffer,r.byteOffset+u.byteOffset,a)),p=new Uint16Array(a),h=0,e=0;e<a;++e)p[e]=h,h+=u[e];Ch(c)&&Ch(c.byteOffset)&&(c.componentType=defaultValue(c.componentType,5123),c.type=AttributeType.SCALAR,i=getBinaryAccessor(c),c=i.createArrayBufferView(r.buffer,r.byteOffset+c.byteOffset,h));var v=o.length;for(e=0;e<v;++e){var x=o[e].length,E=o[e].instances,R=getBinaryProperties(x,E,r);o[e].instances=combine(R,E)}var D=new Array(v).fill(0),H=new Uint16Array(a);for(e=0;e<a;++e)n=s[e],H[e]=D[n],++D[n];var W={classes:o,classIds:s,classIndexes:H,parentCounts:u,parentIndexes:p,parentIds:c};return PPe(W),W}function v0(t,r,e){if(t){var n=t.parentCounts,i=t.parentIds;return i?e(t,r):n>0?EPe(t,r,e):CPe(t,r,e)}}function EPe(t,r,e){var n=t.classIds,i=t.parentCounts,a=t.parentIds,o=t.parentIndexes,s=n.length,u=scratchVisited;u.length=Math.max(u.length,s);var c=++marker,h=scratchStack;for(h.length=0,h.push(r);h.length>0;)if(r=h.pop(),u[r]!==c){u[r]=c;var p=e(t,r);if(Ch(p))return p;for(var v=i[r],x=o[r],E=0;E<v;++E){var R=a[x+E];R!==r&&h.push(R)}}return null}function CPe(t,r,e){for(var n=!0;n;){var i=e(t,r);if(Ch(i))return i;var a=t.parentIds[r];n=a!==r,r=a}throw new Error("traverseHierarchySingleParent")}function PPe(t){for(var r=[],e=t.classIds,n=e.length,i=0;i<n;++i)C$(t,i,stack)}function C$(t,r,e){var n=t.parentCounts,i=t.parentIds,a=t.parentIndexes,o=t.classIds,s=o.length;if(Ch(i)){assert(r<s,"Parent index ".concat(r," exceeds the total number of instances: ").concat(s)),assert(e.indexOf(r)===-1,"Circular dependency detected in the batch table hierarchy."),e.push(r);for(var u=Ch(n)?n[r]:1,c=Ch(n)?a[r]:r,h=0;h<u;++h){var p=i[c+h];p!==r&&C$(t,p,e)}e.pop(r)}}function $l(t){return t!=null}var xS=function(r,e){return r},OPe={HIERARCHY:!0,extensions:!0,extras:!0},wS=function(){function t(r,e,n){ce(this,t);var i,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};_(this,"json",void 0),_(this,"binary",void 0),_(this,"featureCount",void 0),_(this,"_extensions",void 0),_(this,"_properties",void 0),_(this,"_binaryProperties",void 0),_(this,"_hierarchy",void 0),ea(n>=0),this.json=r||{},this.binary=e,this.featureCount=n,this._extensions=((i=this.json)===null||i===void 0?void 0:i.extensions)||{},this._properties={};for(var o in this.json)OPe[o]||(this._properties[o]=this.json[o]);this._binaryProperties=this._initializeBinaryProperties(),a["3DTILES_batch_table_hierarchy"]&&(this._hierarchy=E$(this,this.json,this.binary))}return ve(t,[{key:"getExtension",value:function(e){return this.json&&this.json.extensions&&this.json.extensions[e]}},{key:"memorySizeInBytes",value:function(){return 0}},{key:"isClass",value:function(e,n){if(this._checkBatchId(e),ea(typeof n=="string",n),this._hierarchy){var i=v0(this._hierarchy,e,function(a,o){var s=a.classIds[o],u=a.classes[s];return u.name===n});return $l(i)}return!1}},{key:"isExactClass",value:function(e,n){return ea(typeof n=="string",n),this.getExactClassName(e)===n}},{key:"getExactClassName",value:function(e){if(this._checkBatchId(e),this._hierarchy){var n=this._hierarchy.classIds[e],i=this._hierarchy.classes[n];return i.name}}},{key:"hasProperty",value:function(e,n){return this._checkBatchId(e),ea(typeof n=="string",n),$l(this._properties[n])||this._hasPropertyInHierarchy(e,n)}},{key:"getPropertyNames",value:function(e,n){var i;this._checkBatchId(e),n=$l(n)?n:[],n.length=0;var a=Object.keys(this._properties);return(i=n).push.apply(i,Pr(a)),this._hierarchy&&this._getPropertyNamesInHierarchy(e,n),n}},{key:"getProperty",value:function(e,n){if(this._checkBatchId(e),ea(typeof n=="string",n),this._binaryProperties){var i=this._binaryProperties[n];if($l(i))return this._getBinaryProperty(i,e)}var a=this._properties[n];if($l(a))return xS(a[e],!0);if(this._hierarchy){var o=this._getHierarchyProperty(e,n);if($l(o))return o}}},{key:"setProperty",value:function(e,n,i){var a=this.featureCount;if(this._checkBatchId(e),ea(typeof n=="string",n),this._binaryProperties){var o=this._binaryProperties[n];if(o){this._setBinaryProperty(o,e,i);return}}if(!(this._hierarchy&&this._setHierarchyProperty(this,e,n,i))){var s=this._properties[n];$l(s)||(this._properties[n]=new Array(a),s=this._properties[n]),s[e]=xS(i,!0)}}},{key:"_checkBatchId",value:function(e){var n=e>=0&&e<this.featureCount;if(!n)throw new Error("batchId not in range [0, featureCount - 1].")}},{key:"_getBinaryProperty",value:function(e,n){return e.unpack(e.typedArray,n)}},{key:"_setBinaryProperty",value:function(e,n,i){e.pack(i,e.typedArray,n)}},{key:"_initializeBinaryProperties",value:function(){var e=null;for(var n in this._properties){var i=this._properties[n],a=this._initializeBinaryProperty(n,i);a&&(e=e||{},e[n]=a)}return e}},{key:"_initializeBinaryProperty",value:function(e,n){if("byteOffset"in n){var i=n;ea(this.binary,"Property ".concat(e," requires a batch table binary.")),ea(i.type,"Property ".concat(e," requires a type."));var a=S$(i,this.binary.buffer,this.binary.byteOffset|0,this.featureCount);return{typedArray:a.values,componentCount:a.size,unpack:a.unpacker,pack:a.packer}}return null}},{key:"_hasPropertyInHierarchy",value:function(e,n){if(!this._hierarchy)return!1;var i=v0(this._hierarchy,e,function(a,o){var s=a.classIds[o],u=a.classes[s].instances;return $l(u[n])});return $l(i)}},{key:"_getPropertyNamesInHierarchy",value:function(e,n){v0(this._hierarchy,e,function(i,a){var o=i.classIds[a],s=i.classes[o].instances;for(var u in s)s.hasOwnProperty(u)&&n.indexOf(u)===-1&&n.push(u)})}},{key:"_getHierarchyProperty",value:function(e,n){var i=this;return v0(this._hierarchy,e,function(a,o){var s=a.classIds[o],u=a.classes[s],c=a.classIndexes[o],h=u.instances[n];return $l(h)?$l(h.typedArray)?i._getBinaryProperty(h,c):xS(h[c],!0):null})}},{key:"_setHierarchyProperty",value:function(e,n,i,a){var o=this,s=v0(this._hierarchy,n,function(u,c){var h=u.classIds[c],p=u.classes[h],v=u.classIndexes[c],x=p.instances[i];return $l(x)?(ea(c===n,'Inherited property "'.concat(i,'" is read-only.')),$l(x.typedArray)?o._setBinaryProperty(x,v,a):x[v]=xS(a,!0),!0):!1});return $l(s)}}]),t}();var dk=4;function Nd(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=new DataView(r);if(t.magic=n.getUint32(e,!0),e+=dk,t.version=n.getUint32(e,!0),e+=dk,t.byteLength=n.getUint32(e,!0),e+=dk,t.version!==1)throw new Error("3D Tile Version ".concat(t.version," not supported"));return e}var g0=4,P$="b3dm tile in legacy format.";function A0(t,r,e){var n=new DataView(r),i;t.header=t.header||{};var a=n.getUint32(e,!0);e+=g0;var o=n.getUint32(e,!0);e+=g0;var s=n.getUint32(e,!0);e+=g0;var u=n.getUint32(e,!0);return e+=g0,s>=570425344?(e-=g0*2,i=a,s=o,u=0,a=0,o=0,console.warn(P$)):u>=570425344&&(e-=g0,i=s,s=a,u=o,a=0,o=0,console.warn(P$)),t.header.featureTableJsonByteLength=a,t.header.featureTableBinaryByteLength=o,t.header.batchTableJsonByteLength=s,t.header.batchTableBinaryByteLength=u,t.header.batchLength=i,e}function y0(t,r,e,n){return e=MPe(t,r,e,n),e=IPe(t,r,e,n),e}function MPe(t,r,e,n){var i=t.header,a=i.featureTableJsonByteLength,o=i.featureTableBinaryByteLength,s=i.batchLength;if(t.featureTableJson={BATCH_LENGTH:s||0},a>0){var u=lk(r,e,a);t.featureTableJson=JSON.parse(u)}return e+=a,t.featureTableBinary=new Uint8Array(r,e,o),e+=o,e}function IPe(t,r,e,n){var i=t.header,a=i.batchTableJsonByteLength,o=i.batchTableBinaryByteLength;if(a>0){var s=lk(r,e,a);t.batchTableJson=JSON.parse(s),e+=a,o>0&&(t.batchTableBinary=new Uint8Array(r,e,o),t.batchTableBinary=new Uint8Array(t.batchTableBinary),e+=o)}return e}function mk(t,r,e){if(!r&&(!t||!t.batchIds||!e))return null;var n=t.batchIds,i=t.isRGB565,a=t.pointCount;if(n&&e){for(var o=new Uint8ClampedArray(a*3),s=0;s<a;s++){var u=n[s],c=e.getProperty(u,"dimensions"),h=c.map(function(E){return E*255});o[s*3]=h[0],o[s*3+1]=h[1],o[s*3+2]=h[2]}return{type:5121,value:o,size:3,normalized:!0}}if(i){for(var p=new Uint8ClampedArray(a*3),v=0;v<a;v++){var x=hk(r[v]);p[v*3]=x[0],p[v*3+1]=x[1],p[v*3+2]=x[2]}return{type:5121,value:p,size:3,normalized:!0}}return r&&r.length===a*3?{type:5121,value:r,size:3,normalized:!0}:{type:5121,value:r,size:4,normalized:!0}}var O$=new _t;function M$(t,r){if(!r)return null;if(t.isOctEncoded16P){for(var e=new Float32Array(t.pointsLength*3),n=0;n<t.pointsLength;n++)pk(r[n*2],r[n*2+1],O$),O$.toArray(e,n*3);return{type:5126,size:2,value:e}}return{type:5126,size:2,value:r}}function I$(t,r,e){return t.isQuantized?e["3d-tiles"]&&e["3d-tiles"].decodeQuantizedPositions?(t.isQuantized=!1,RPe(t,r)):{type:5123,value:r,size:3,normalized:!0}:r}function RPe(t,r){for(var e=new _t,n=new Float32Array(t.pointCount*3),i=0;i<t.pointCount;i++)e.set(r[i*3],r[i*3+1],r[i*3+2]).scale(1/t.quantizedRange).multiply(t.quantizedVolumeScale).add(t.quantizedVolumeOffset).toArray(n,i*3);return n}function R$(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function gv(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?R$(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):R$(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function L$(t,r,e,n,i){return vk.apply(this,arguments)}function vk(){return vk=zt(Av.default.mark(function t(r,e,n,i,a){var o,s,u;return Av.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return n=Nd(r,e,n),n=A0(r,e,n),n=y0(r,e,n,i),LPe(r),o=kPe(r),s=o.featureTable,u=o.batchTable,h.next=7,zPe(r,s,u,i,a);case 7:return BPe(r,s,i),DPe(r,s,u),FPe(r,s),h.abrupt("return",n);case 11:case"end":return h.stop()}},t)})),vk.apply(this,arguments)}function LPe(t){t.attributes={positions:null,colors:null,normals:null,batchIds:null},t.isQuantized=!1,t.isTranslucent=!1,t.isRGB565=!1,t.isOctEncoded16P=!1}function kPe(t){var r=new m0(t.featureTableJson,t.featureTableBinary),e=r.getGlobalProperty("POINTS_LENGTH");if(!Number.isFinite(e))throw new Error("POINTS_LENGTH must be defined");r.featuresLength=e,t.featuresLength=e,t.pointsLength=e,t.pointCount=e,t.rtcCenter=r.getGlobalProperty("RTC_CENTER",5126,3);var n=NPe(t,r);return{featureTable:r,batchTable:n}}function BPe(t,r,e){if(!t.attributes.positions){if(r.hasProperty("POSITION"))t.attributes.positions=r.getPropertyArray("POSITION",5126,3);else if(r.hasProperty("POSITION_QUANTIZED")){var n=r.getPropertyArray("POSITION_QUANTIZED",5123,3);if(t.isQuantized=!0,t.quantizedRange=(1<<16)-1,t.quantizedVolumeScale=r.getGlobalProperty("QUANTIZED_VOLUME_SCALE",5126,3),!t.quantizedVolumeScale)throw new Error("QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");if(t.quantizedVolumeOffset=r.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",5126,3),!t.quantizedVolumeOffset)throw new Error("QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");t.attributes.positions=I$(t,n,e)}}if(!t.attributes.positions)throw new Error("Either POSITION or POSITION_QUANTIZED must be defined.")}function DPe(t,r,e){if(!t.attributes.colors){var n=null;r.hasProperty("RGBA")?(n=r.getPropertyArray("RGBA",5121,4),t.isTranslucent=!0):r.hasProperty("RGB")?n=r.getPropertyArray("RGB",5121,3):r.hasProperty("RGB565")&&(n=r.getPropertyArray("RGB565",5123,1),t.isRGB565=!0),t.attributes.colors=mk(t,n,e)}r.hasProperty("CONSTANT_RGBA")&&(t.constantRGBA=r.getGlobalProperty("CONSTANT_RGBA",5121,4))}function FPe(t,r){if(!t.attributes.normals){var e=null;r.hasProperty("NORMAL")?e=r.getPropertyArray("NORMAL",5126,3):r.hasProperty("NORMAL_OCT16P")&&(e=r.getPropertyArray("NORMAL_OCT16P",5121,2),t.isOctEncoded16P=!0),t.attributes.normals=M$(t,e)}}function NPe(t,r){var e=null;if(!t.batchIds&&r.hasProperty("BATCH_ID")&&(t.batchIds=r.getPropertyArray("BATCH_ID",5123,1),t.batchIds)){var n=r.getGlobalProperty("BATCH_LENGTH");if(!n)throw new Error("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");var i=t.batchTableJson,a=t.batchTableBinary;e=new wS(i,a,n)}return e}function zPe(t,r,e,n,i){return gk.apply(this,arguments)}function gk(){return gk=zt(Av.default.mark(function t(r,e,n,i,a){var o,s,u,c,h,p,v,x;return Av.default.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(c=r.batchTableJson&&r.batchTableJson.extensions&&r.batchTableJson.extensions["3DTILES_draco_point_compression"],c&&(u=c.properties),h=e.getExtension("3DTILES_draco_point_compression"),!h){R.next=15;break}if(s=h.properties,p=h.byteOffset,v=h.byteLength,!(!s||!Number.isFinite(p)||!v)){R.next=9;break}throw new Error("Draco properties, byteOffset, and byteLength must be defined");case 9:o=r.featureTableBinary.slice(p,p+v),r.hasPositions=Number.isFinite(s.POSITION),r.hasColors=Number.isFinite(s.RGB)||Number.isFinite(s.RGBA),r.hasNormals=Number.isFinite(s.NORMAL),r.hasBatchIds=Number.isFinite(s.BATCH_ID),r.isTranslucent=Number.isFinite(s.RGBA);case 15:if(o){R.next=17;break}return R.abrupt("return",!0);case 17:return x={buffer:o,properties:gv(gv({},s),u),featureTableProperties:s,batchTableProperties:u,dequantizeInShader:!1},R.next=20,UPe(r,x,i,a);case 20:return R.abrupt("return",R.sent);case 21:case"end":return R.stop()}},t)})),gk.apply(this,arguments)}function UPe(t,r,e,n){return Ak.apply(this,arguments)}function Ak(){return Ak=zt(Av.default.mark(function t(r,e,n,i){var a,o,s,u,c,h,p,v,x,E,R,D,H,W,$;return Av.default.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return a=i.parse,o=gv(gv({},n),{},{draco:gv(gv({},n.draco),{},{extraAttributes:e.batchTableProperties||{}})}),delete o["3d-tiles"],B.next=5,a(e.buffer,aS,o);case 5:if(s=B.sent,u=s.attributes.POSITION&&s.attributes.POSITION.value,c=s.attributes.COLOR_0&&s.attributes.COLOR_0.value,h=s.attributes.NORMAL&&s.attributes.NORMAL.value,p=s.attributes.BATCH_ID&&s.attributes.BATCH_ID.value,v=u&&s.attributes.POSITION.value.quantization,x=h&&s.attributes.NORMAL.value.quantization,v&&(E=s.POSITION.data.quantization,R=E.range,r.quantizedVolumeScale=new _t(R,R,R),r.quantizedVolumeOffset=new _t(E.minValues),r.quantizedRange=(1<<E.quantizationBits)-1,r.isQuantizedDraco=!0),x&&(r.octEncodedRange=(1<<s.NORMAL.data.quantization.quantizationBits)-1,r.isOctEncodedDraco=!0),D={},e.batchTableProperties)for(H=0,W=Object.keys(e.batchTableProperties);H<W.length;H++)$=W[H],s.attributes[$]&&s.attributes[$].value&&(D[$.toLowerCase()]=s.attributes[$].value);r.attributes=gv({positions:u,colors:mk(r,c,void 0),normals:h,batchIds:p},D);case 17:case"end":return B.stop()}},t)})),Ak.apply(this,arguments)}var bk=en(On());var yk=en(On());var TS={URI:0,EMBEDDED:1};function SS(t,r,e,n){t.rotateYtoZ=!0;var i=t.byteOffset+t.byteLength-e;if(i===0)throw new Error("glTF byte length must be greater than 0.");return t.gltfUpAxis=n["3d-tiles"]&&n["3d-tiles"].assetGltfUpAxis?n["3d-tiles"].assetGltfUpAxis:"Y",t.gltfArrayBuffer=cm(r,e,i),t.gltfByteOffset=0,t.gltfByteLength=i,e%4===0||console.warn("".concat(t.type,": embedded glb is not aligned to a 4-byte boundary.")),t.byteOffset+t.byteLength}function ES(t,r,e,n){return _k.apply(this,arguments)}function _k(){return _k=zt(yk.default.mark(function t(r,e,n,i){var a,o,s;return yk.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(a=n["3d-tiles"]||{},jPe(r,e,n),!a.loadGLTF){c.next=17;break}if(o=i.parse,s=i.fetch,!r.gltfUrl){c.next=9;break}return c.next=7,s(r.gltfUrl,n);case 7:r.gltfArrayBuffer=c.sent,r.gltfByteOffset=0;case 9:if(!r.gltfArrayBuffer){c.next=17;break}return c.next=12,o(r.gltfArrayBuffer,Tp,n,i);case 12:r.gltf=c.sent,r.gpuMemoryUsageInBytes=M1(r.gltf),delete r.gltfArrayBuffer,delete r.gltfByteOffset,delete r.gltfByteLength;case 17:case"end":return c.stop()}},t)})),_k.apply(this,arguments)}function jPe(t,r,e){switch(r){case TS.URI:var n=new Uint8Array(t.gltfArrayBuffer,t.gltfByteOffset),i=new TextDecoder,a=i.decode(n);t.gltfUrl=a.replace(/[\s\0]+$/,""),delete t.gltfArrayBuffer,delete t.gltfByteOffset,delete t.gltfByteLength;break;case TS.EMBEDDED:break;default:throw new Error("b3dm: Illegal glTF format field")}}function k$(t,r,e,n,i){return xk.apply(this,arguments)}function xk(){return xk=zt(bk.default.mark(function t(r,e,n,i,a){var o,s;return bk.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return n=GPe(r,e,n,i,a),c.next=3,ES(r,TS.EMBEDDED,i,a);case 3:return s=r==null||(o=r.gltf)===null||o===void 0?void 0:o.extensions,s&&s.CESIUM_RTC&&(r.rtcCenter=s.CESIUM_RTC.center),c.abrupt("return",n);case 6:case"end":return c.stop()}},t)})),xk.apply(this,arguments)}function GPe(t,r,e,n,i){e=Nd(t,r,e),e=A0(t,r,e),e=y0(t,r,e,n),e=SS(t,r,e,n);var a=new m0(t.featureTableJson,t.featureTableBinary);return t.rtcCenter=a.getGlobalProperty("RTC_CENTER",5126,3),e}var wk=en(On());function B$(t,r,e,n,i){return Tk.apply(this,arguments)}function Tk(){return Tk=zt(wk.default.mark(function t(r,e,n,i,a){return wk.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=VPe(r,e,n,i,a),s.next=3,ES(r,r.gltfFormat,i,a);case 3:return s.abrupt("return",n);case 4:case"end":return s.stop()}},t)})),Tk.apply(this,arguments)}function VPe(t,r,e,n,i){if(e=Nd(t,r,e),t.version!==1)throw new Error("Instanced 3D Model version ".concat(t.version," is not supported"));e=A0(t,r,e);var a=new DataView(r);if(t.gltfFormat=a.getUint32(e,!0),e+=4,e=y0(t,r,e,n),e=SS(t,r,e,n),t.featureTableJsonByteLength===0)throw new Error("i3dm parser: featureTableJsonByteLength is zero.");var o=new m0(t.featureTableJson,t.featureTableBinary),s=o.getGlobalProperty("INSTANCES_LENGTH");if(o.featuresLength=s,!Number.isFinite(s))throw new Error("i3dm parser: INSTANCES_LENGTH must be defined");t.eastNorthUp=o.getGlobalProperty("EAST_NORTH_UP"),t.rtcCenter=o.getGlobalProperty("RTC_CENTER",5126,3);var u=new wS(t.batchTableJson,t.batchTableBinary,s);return HPe(t,o,u,s),e}function HPe(t,r,e,n){for(var i={instances:new Array(n),batchTable:t._batchTable,cull:!1,url:void 0,gltf:void 0,basePath:void 0,incrementallyLoadTextures:!1,forwardAxis:[1,0,0]},a=i.instances,o=new _t,s=new _t,u=new _t,c=new _t,h=new lo,p=new uh,v=new _t,x={},E=new gn,R=[],D=[],H=new _t,W=new _t,$=0;$<n;$++){var J=void 0;if(r.hasProperty("POSITION"))J=r.getProperty("POSITION",5126,3,$,o);else if(r.hasProperty("POSITION_QUANTIZED")){J=r.getProperty("POSITION_QUANTIZED",5123,3,$,o);var B=r.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",5126,3,H);if(!B)throw new Error("i3dm parser: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");var se=r.getGlobalProperty("QUANTIZED_VOLUME_SCALE",5126,3,W);if(!se)throw new Error("i3dm parser: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");for(var V=65535,X=0;X<3;X++)J[X]=J[X]/V*se[X]+B[X]}if(!J)throw new Error("i3dm: POSITION or POSITION_QUANTIZED must be defined for each instance.");o.copy(J),x.translation=o,t.normalUp=r.getProperty("NORMAL_UP",5126,3,$,R),t.normalRight=r.getProperty("NORMAL_RIGHT",5126,3,$,D);var I=!1;if(t.normalUp){if(!t.normalRight)throw new Error("i3dm: Custom orientation requires both NORMAL_UP and NORMAL_RIGHT.");t.hasCustomOrientation=!0}else{if(t.octNormalUp=r.getProperty("NORMAL_UP_OCT32P",5123,2,R),t.octNormalRight=r.getProperty("NORMAL_RIGHT_OCT32P",5123,2,D),t.octNormalUp)throw t.octNormalRight?new Error("i3dm: oct-encoded orientation not implemented"):new Error("i3dm: oct-encoded orientation requires NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P");t.eastNorthUp?(Fa.WGS84.eastNorthUpToFixedFrame(o,E),E.getRotationMatrix3(h)):h.identity()}I&&(c.copy(s).cross(u).normalize(),h.setColumn(0,s),h.setColumn(1,u),h.setColumn(2,c)),p.fromMatrix3(h),x.rotation=p,v.set(1,1,1);var O=r.getProperty("SCALE",5126,1,$);Number.isFinite(O)&&v.multiplyByScalar(O);var U=r.getProperty("SCALE_NON_UNIFORM",5126,3,$,R);U&&v.scale(U),x.scale=v;var re=r.getProperty("BATCH_ID",5123,1,$);re===void 0&&(re=$);var ee=new gn().fromQuaternion(x.rotation);E.identity(),E.translate(x.translation),E.multiplyRight(ee),E.scale(x.scale);var pe=E.clone();a[$]={modelMatrix:pe,batchId:re}}t.instances=a}var Sk=en(On());function D$(t,r,e,n,i,a){return Ek.apply(this,arguments)}function Ek(){return Ek=zt(Sk.default.mark(function t(r,e,n,i,a,o){var s,u;return Sk.default.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:n=Nd(r,e,n),s=new DataView(e),r.tilesLength=s.getUint32(n,!0),n+=4,r.tiles=[];case 5:if(!(r.tiles.length<r.tilesLength&&r.byteLength-n>12)){h.next=13;break}return u={},r.tiles.push(u),h.next=10,o(e,n,i,a,u);case 10:n=h.sent,h.next=5;break;case 13:return h.abrupt("return",n);case 14:case"end":return h.stop()}},t)})),Ek.apply(this,arguments)}var Ck=en(On());function F$(t,r,e,n){return Pk.apply(this,arguments)}function Pk(){return Pk=zt(Ck.default.mark(function t(r,e,n,i){var a;return Ck.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r.rotateYtoZ=!0,r.gltfUpAxis=n["3d-tiles"]&&n["3d-tiles"].assetGltfUpAxis?n["3d-tiles"].assetGltfUpAxis:"Y",a=i.parse,s.next=5,a(e,Tp,n,i);case 5:r.gltf=s.sent,r.gpuMemoryUsageInBytes=M1(r.gltf);case 7:case"end":return s.stop()}},t)})),Pk.apply(this,arguments)}function Ik(t){return Mk.apply(this,arguments)}function Mk(){return Mk=zt(Ok.default.mark(function t(r){var e,n,i,a,o=arguments;return Ok.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:e=o.length>1&&o[1]!==void 0?o[1]:0,n=o.length>2?o[2]:void 0,i=o.length>3?o[3]:void 0,a=o.length>4&&o[4]!==void 0?o[4]:{},a.byteOffset=e,a.type=_$(r,e),u.t0=a.type,u.next=u.t0===vv.COMPOSITE?9:u.t0===vv.BATCHED_3D_MODEL?12:u.t0===vv.GLTF?15:u.t0===vv.INSTANCED_3D_MODEL?18:u.t0===vv.POINT_CLOUD?21:24;break;case 9:return u.next=11,D$(a,r,e,n,i,Ik);case 11:return u.abrupt("return",u.sent);case 12:return u.next=14,k$(a,r,e,n,i);case 14:return u.abrupt("return",u.sent);case 15:return u.next=17,F$(a,r,n,i);case 17:return u.abrupt("return",u.sent);case 18:return u.next=20,B$(a,r,e,n,i);case 20:return u.abrupt("return",u.sent);case 21:return u.next=23,L$(a,r,e,n,i);case 23:return u.abrupt("return",u.sent);case 24:throw new Error("3DTileLoader: unknown type ".concat(a.type));case 25:case"end":return u.stop()}},t)})),Mk.apply(this,arguments)}var bv=en(On());var V1=en(On()),WPe=1952609651,qPe=1;function Bk(t,r,e){return Lk.apply(this,arguments)}function Lk(){return Lk=zt(V1.default.mark(function t(r,e,n){var i,a,o,s,u,c,h,p,v;return V1.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(i=new Uint32Array(r.slice(0,4)),i[0]===WPe){E.next=3;break}throw new Error("Wrong subtree file magic number");case 3:if(a=new Uint32Array(r.slice(4,8)),a[0]===qPe){E.next=6;break}throw new Error("Wrong subtree file verson, must be 1");case 6:if(o=N$(r.slice(8,16)),s=new Uint8Array(r,24,o),u=new TextDecoder("utf8"),c=u.decode(s),h=JSON.parse(c),p=N$(r.slice(16,24)),v=new ArrayBuffer(0),p&&(v=r.slice(24+o)),!("bufferView"in h.tileAvailability)){E.next=18;break}return E.next=17,Rk(h,"tileAvailability",v,n);case 17:h.tileAvailability.explicitBitstream=E.sent;case 18:if(!("bufferView"in h.contentAvailability)){E.next=22;break}return E.next=21,Rk(h,"contentAvailability",v,n);case 21:h.contentAvailability.explicitBitstream=E.sent;case 22:if(!("bufferView"in h.childSubtreeAvailability)){E.next=26;break}return E.next=25,Rk(h,"childSubtreeAvailability",v,n);case 25:h.childSubtreeAvailability.explicitBitstream=E.sent;case 26:return E.abrupt("return",h);case 27:case"end":return E.stop()}},t)})),Lk.apply(this,arguments)}function XPe(t,r){var e=r.startsWith("http");if(e){var n=new URL(t,r);return decodeURI(n.toString())}var i="http://".concat(r),a=new URL(t,i);return"/".concat(a.host).concat(a.pathname)}function Rk(t,r,e,n){return kk.apply(this,arguments)}function kk(){return kk=zt(V1.default.mark(function t(r,e,n,i){var a,o,s,u,c,h;return V1.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(a=r[e].bufferView,o=r.bufferViews[a],s=r.buffers[o.buffer],!(!(i!=null&&i.url)||!i.fetch)){v.next=5;break}throw new Error("Url is not provided");case 5:if(i.fetch){v.next=7;break}throw new Error("fetch is not provided");case 7:if(!s.uri){v.next=16;break}return u=XPe(s.uri,i?.url),v.next=11,i.fetch(u);case 11:return c=v.sent,v.next=14,c.arrayBuffer();case 14:return h=v.sent,v.abrupt("return",new Uint8Array(h,o.byteOffset,o.byteLength));case 16:return v.abrupt("return",new Uint8Array(n,o.byteOffset,o.byteLength));case 17:case"end":return v.stop()}},t)})),kk.apply(this,arguments)}function N$(t){var r=new DataView(t),e=r.getUint32(0,!0),n=r.getUint32(4,!0);return e+Math.pow(2,32)*n}var CS={id:"3d-tiles-subtree",name:"3D Tiles Subtree",module:"3d-tiles",version:bS,extensions:["subtree"],mimeTypes:["application/octet-stream"],tests:["subtree"],parse:Bk,options:{}};Mn();et();var Yk=en(On());var $c=null;try{$c=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function ko(t,r,e){this.low=t|0,this.high=r|0,this.unsigned=!!e}ko.prototype.__isLong__;Object.defineProperty(ko.prototype,"__isLong__",{value:!0});function hl(t){return(t&&t.__isLong__)===!0}function z$(t){var r=Math.clz32(t&-t);return t?31-r:r}ko.isLong=hl;var U$={},j$={};function yv(t,r){var e,n,i;return r?(t>>>=0,(i=0<=t&&t<256)&&(n=j$[t],n)?n:(e=Na(t,0,!0),i&&(j$[t]=e),e)):(t|=0,(i=-128<=t&&t<128)&&(n=U$[t],n)?n:(e=Na(t,t<0?-1:0,!1),i&&(U$[t]=e),e))}ko.fromInt=yv;function Jc(t,r){if(isNaN(t))return r?Ip:Pf;if(r){if(t<0)return Ip;if(t>=W$)return Y$}else{if(t<=-V$)return Jl;if(t+1>=V$)return X$}return t<0?Jc(-t,r).neg():Na(t%b0|0,t/b0|0,r)}ko.fromNumber=Jc;function Na(t,r,e){return new ko(t,r,e)}ko.fromBits=Na;var PS=Math.pow;function Fk(t,r,e){if(t.length===0)throw Error("empty string");if(typeof r=="number"?(e=r,r=!1):r=!!r,t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return r?Ip:Pf;if(e=e||10,e<2||36<e)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return Fk(t.substring(1),r,e).neg();for(var i=Jc(PS(e,8)),a=Pf,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),u=parseInt(t.substring(o,o+s),e);if(s<8){var c=Jc(PS(e,s));a=a.mul(c).add(Jc(u))}else a=a.mul(i),a=a.add(Jc(u))}return a.unsigned=r,a}ko.fromString=Fk;function Of(t,r){return typeof t=="number"?Jc(t,r):typeof t=="string"?Fk(t,r):Na(t.low,t.high,typeof r=="boolean"?r:t.unsigned)}ko.fromValue=Of;var G$=1<<16,YPe=1<<24,b0=G$*G$,W$=b0*b0,V$=W$/2,H$=yv(YPe),Pf=yv(0);ko.ZERO=Pf;var Ip=yv(0,!0);ko.UZERO=Ip;var _0=yv(1);ko.ONE=_0;var q$=yv(1,!0);ko.UONE=q$;var Dk=yv(-1);ko.NEG_ONE=Dk;var X$=Na(-1,2147483647,!1);ko.MAX_VALUE=X$;var Y$=Na(-1,-1,!0);ko.MAX_UNSIGNED_VALUE=Y$;var Jl=Na(0,-2147483648,!1);ko.MIN_VALUE=Jl;var Hr=ko.prototype;Hr.toInt=function(){return this.unsigned?this.low>>>0:this.low};Hr.toNumber=function(){return this.unsigned?(this.high>>>0)*b0+(this.low>>>0):this.high*b0+(this.low>>>0)};Hr.toString=function(r){if(r=r||10,r<2||36<r)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Jl)){var e=Jc(r),n=this.div(e),i=n.mul(e).sub(this);return n.toString(r)+i.toInt().toString(r)}else return"-"+this.neg().toString(r);for(var a=Jc(PS(r,6),this.unsigned),o=this,s="";;){var u=o.div(a),c=o.sub(u.mul(a)).toInt()>>>0,h=c.toString(r);if(o=u,o.isZero())return h+s;for(;h.length<6;)h="0"+h;s=""+h+s}};Hr.getHighBits=function(){return this.high};Hr.getHighBitsUnsigned=function(){return this.high>>>0};Hr.getLowBits=function(){return this.low};Hr.getLowBitsUnsigned=function(){return this.low>>>0};Hr.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Jl)?64:this.neg().getNumBitsAbs();for(var r=this.high!=0?this.high:this.low,e=31;e>0&&!(r&1<<e);e--);return this.high!=0?e+33:e+1};Hr.isZero=function(){return this.high===0&&this.low===0};Hr.eqz=Hr.isZero;Hr.isNegative=function(){return!this.unsigned&&this.high<0};Hr.isPositive=function(){return this.unsigned||this.high>=0};Hr.isOdd=function(){return(this.low&1)===1};Hr.isEven=function(){return(this.low&1)===0};Hr.equals=function(r){return hl(r)||(r=Of(r)),this.unsigned!==r.unsigned&&this.high>>>31===1&&r.high>>>31===1?!1:this.high===r.high&&this.low===r.low};Hr.eq=Hr.equals;Hr.notEquals=function(r){return!this.eq(r)};Hr.neq=Hr.notEquals;Hr.ne=Hr.notEquals;Hr.lessThan=function(r){return this.comp(r)<0};Hr.lt=Hr.lessThan;Hr.lessThanOrEqual=function(r){return this.comp(r)<=0};Hr.lte=Hr.lessThanOrEqual;Hr.le=Hr.lessThanOrEqual;Hr.greaterThan=function(r){return this.comp(r)>0};Hr.gt=Hr.greaterThan;Hr.greaterThanOrEqual=function(r){return this.comp(r)>=0};Hr.gte=Hr.greaterThanOrEqual;Hr.ge=Hr.greaterThanOrEqual;Hr.compare=function(r){if(hl(r)||(r=Of(r)),this.eq(r))return 0;var e=this.isNegative(),n=r.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?r.high>>>0>this.high>>>0||r.high===this.high&&r.low>>>0>this.low>>>0?-1:1:this.sub(r).isNegative()?-1:1};Hr.comp=Hr.compare;Hr.negate=function(){return!this.unsigned&&this.eq(Jl)?Jl:this.not().add(_0)};Hr.neg=Hr.negate;Hr.add=function(r){hl(r)||(r=Of(r));var e=this.high>>>16,n=this.high&65535,i=this.low>>>16,a=this.low&65535,o=r.high>>>16,s=r.high&65535,u=r.low>>>16,c=r.low&65535,h=0,p=0,v=0,x=0;return x+=a+c,v+=x>>>16,x&=65535,v+=i+u,p+=v>>>16,v&=65535,p+=n+s,h+=p>>>16,p&=65535,h+=e+o,h&=65535,Na(v<<16|x,h<<16|p,this.unsigned)};Hr.subtract=function(r){return hl(r)||(r=Of(r)),this.add(r.neg())};Hr.sub=Hr.subtract;Hr.multiply=function(r){if(this.isZero())return this;if(hl(r)||(r=Of(r)),$c){var e=$c.mul(this.low,this.high,r.low,r.high);return Na(e,$c.get_high(),this.unsigned)}if(r.isZero())return this.unsigned?Ip:Pf;if(this.eq(Jl))return r.isOdd()?Jl:Pf;if(r.eq(Jl))return this.isOdd()?Jl:Pf;if(this.isNegative())return r.isNegative()?this.neg().mul(r.neg()):this.neg().mul(r).neg();if(r.isNegative())return this.mul(r.neg()).neg();if(this.lt(H$)&&r.lt(H$))return Jc(this.toNumber()*r.toNumber(),this.unsigned);var n=this.high>>>16,i=this.high&65535,a=this.low>>>16,o=this.low&65535,s=r.high>>>16,u=r.high&65535,c=r.low>>>16,h=r.low&65535,p=0,v=0,x=0,E=0;return E+=o*h,x+=E>>>16,E&=65535,x+=a*h,v+=x>>>16,x&=65535,x+=o*c,v+=x>>>16,x&=65535,v+=i*h,p+=v>>>16,v&=65535,v+=a*c,p+=v>>>16,v&=65535,v+=o*u,p+=v>>>16,v&=65535,p+=n*h+i*c+a*u+o*s,p&=65535,Na(x<<16|E,p<<16|v,this.unsigned)};Hr.mul=Hr.multiply;Hr.divide=function(r){if(hl(r)||(r=Of(r)),r.isZero())throw Error("division by zero");if($c){if(!this.unsigned&&this.high===-2147483648&&r.low===-1&&r.high===-1)return this;var e=(this.unsigned?$c.div_u:$c.div_s)(this.low,this.high,r.low,r.high);return Na(e,$c.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Ip:Pf;var n,i,a;if(this.unsigned){if(r.unsigned||(r=r.toUnsigned()),r.gt(this))return Ip;if(r.gt(this.shru(1)))return q$;a=Ip}else{if(this.eq(Jl)){if(r.eq(_0)||r.eq(Dk))return Jl;if(r.eq(Jl))return _0;var o=this.shr(1);return n=o.div(r).shl(1),n.eq(Pf)?r.isNegative()?_0:Dk:(i=this.sub(r.mul(n)),a=n.add(i.div(r)),a)}else if(r.eq(Jl))return this.unsigned?Ip:Pf;if(this.isNegative())return r.isNegative()?this.neg().div(r.neg()):this.neg().div(r).neg();if(r.isNegative())return this.div(r.neg()).neg();a=Pf}for(i=this;i.gte(r);){n=Math.max(1,Math.floor(i.toNumber()/r.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),u=s<=48?1:PS(2,s-48),c=Jc(n),h=c.mul(r);h.isNegative()||h.gt(i);)n-=u,c=Jc(n,this.unsigned),h=c.mul(r);c.isZero()&&(c=_0),a=a.add(c),i=i.sub(h)}return a};Hr.div=Hr.divide;Hr.modulo=function(r){if(hl(r)||(r=Of(r)),$c){var e=(this.unsigned?$c.rem_u:$c.rem_s)(this.low,this.high,r.low,r.high);return Na(e,$c.get_high(),this.unsigned)}return this.sub(this.div(r).mul(r))};Hr.mod=Hr.modulo;Hr.rem=Hr.modulo;Hr.not=function(){return Na(~this.low,~this.high,this.unsigned)};Hr.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32};Hr.clz=Hr.countLeadingZeros;Hr.countTrailingZeros=function(){return this.low?z$(this.low):z$(this.high)+32};Hr.ctz=Hr.countTrailingZeros;Hr.and=function(r){return hl(r)||(r=Of(r)),Na(this.low&r.low,this.high&r.high,this.unsigned)};Hr.or=function(r){return hl(r)||(r=Of(r)),Na(this.low|r.low,this.high|r.high,this.unsigned)};Hr.xor=function(r){return hl(r)||(r=Of(r)),Na(this.low^r.low,this.high^r.high,this.unsigned)};Hr.shiftLeft=function(r){return hl(r)&&(r=r.toInt()),(r&=63)===0?this:r<32?Na(this.low<<r,this.high<<r|this.low>>>32-r,this.unsigned):Na(0,this.low<<r-32,this.unsigned)};Hr.shl=Hr.shiftLeft;Hr.shiftRight=function(r){return hl(r)&&(r=r.toInt()),(r&=63)===0?this:r<32?Na(this.low>>>r|this.high<<32-r,this.high>>r,this.unsigned):Na(this.high>>r-32,this.high>=0?0:-1,this.unsigned)};Hr.shr=Hr.shiftRight;Hr.shiftRightUnsigned=function(r){return hl(r)&&(r=r.toInt()),(r&=63)===0?this:r<32?Na(this.low>>>r|this.high<<32-r,this.high>>>r,this.unsigned):r===32?Na(this.high,0,this.unsigned):Na(this.high>>>r-32,0,this.unsigned)};Hr.shru=Hr.shiftRightUnsigned;Hr.shr_u=Hr.shiftRightUnsigned;Hr.rotateLeft=function(r){var e;return hl(r)&&(r=r.toInt()),(r&=63)===0?this:r===32?Na(this.high,this.low,this.unsigned):r<32?(e=32-r,Na(this.low<<r|this.high>>>e,this.high<<r|this.low>>>e,this.unsigned)):(r-=32,e=32-r,Na(this.high<<r|this.low>>>e,this.low<<r|this.high>>>e,this.unsigned))};Hr.rotl=Hr.rotateLeft;Hr.rotateRight=function(r){var e;return hl(r)&&(r=r.toInt()),(r&=63)===0?this:r===32?Na(this.high,this.low,this.unsigned):r<32?(e=32-r,Na(this.high<<e|this.low>>>r,this.low<<e|this.high>>>r,this.unsigned)):(r-=32,e=32-r,Na(this.low<<e|this.high>>>r,this.high<<e|this.low>>>r,this.unsigned))};Hr.rotr=Hr.rotateRight;Hr.toSigned=function(){return this.unsigned?Na(this.low,this.high,!1):this};Hr.toUnsigned=function(){return this.unsigned?this:Na(this.low,this.high,!0)};Hr.toBytes=function(r){return r?this.toBytesLE():this.toBytesBE()};Hr.toBytesLE=function(){var r=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,r&255,r>>>8&255,r>>>16&255,r>>>24]};Hr.toBytesBE=function(){var r=this.high,e=this.low;return[r>>>24,r>>>16&255,r>>>8&255,r&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};ko.fromBytes=function(r,e,n){return n?ko.fromBytesLE(r,e):ko.fromBytesBE(r,e)};ko.fromBytesLE=function(r,e){return new ko(r[0]|r[1]<<8|r[2]<<16|r[3]<<24,r[4]|r[5]<<8|r[6]<<16|r[7]<<24,e)};ko.fromBytesBE=function(r,e){return new ko(r[4]<<24|r[5]<<16|r[6]<<8|r[7],r[0]<<24|r[1]<<16|r[2]<<8|r[3],e)};var x0=ko;var KPe=16;function H1(t){t==="X"&&(t="");var r=t.padEnd(KPe,"0");return x0.fromString(r,!0,16)}function Nk(t){if(t.isZero())return"X";var r=t.countTrailingZeros(),e=r%4;r=(r-e)/4;var n=r;r*=4;var i=t.shiftRightUnsigned(r),a=i.toString(16).replace(/0+$/,""),o=Array(17-n-a.length).join("0");return o+a}function zk(t,r){var e=ZPe(t).shiftRightUnsigned(2),n=t.add(x0.fromNumber(2*r+1-4).multiply(e));return n}function ZPe(t){return t.and(t.not().add(1))}Mn();var $Pe=3,JPe=30,QPe=2*JPe+1,K$=180/Math.PI;function $$(t){if(t.length===0)throw new Error("Invalid Hilbert quad key ".concat(t));for(var r=t.split("/"),e=parseInt(r[0],10),n=r[1],i=n.length,a=0,o=[0,0],s=i-1;s>=0;s--){a=i-s;var u=n[s],c=0,h=0;u==="1"?h=1:u==="2"?(c=1,h=1):u==="3"&&(c=1);var p=Math.pow(2,a-1);eOe(p,o,c,h),o[0]+=p*c,o[1]+=p*h}if(e%2===1){var v=o[0];o[0]=o[1],o[1]=v}return{face:e,ij:o,level:a}}function J$(t){if(t.isZero())return"";for(var r=t.toString(2);r.length<$Pe+QPe;)r="0"+r;var e=r.lastIndexOf("1"),n=r.substring(0,3),i=r.substring(3,e),a=i.length/2,o=x0.fromString(n,!0,2).toString(10),s="";if(a!==0)for(s=x0.fromString(i,!0,2).toString(4);s.length<a;)s="0"+s;return"".concat(o,"/").concat(s)}function Uk(t,r,e){var n=1<<r;return[(t[0]+e[0])/n,(t[1]+e[1])/n]}function Z$(t){return t>=.5?1/3*(4*t*t-1):1/3*(1-4*(1-t)*(1-t))}function jk(t){return[Z$(t[0]),Z$(t[1])]}function Gk(t,r){var e=Ot(r,2),n=e[0],i=e[1];switch(t){case 0:return[1,n,i];case 1:return[-n,1,i];case 2:return[-n,-i,1];case 3:return[-1,-i,-n];case 4:return[i,-1,-n];case 5:return[i,n,-1];default:throw new Error("Invalid face")}}function Vk(t){var r=Ot(t,3),e=r[0],n=r[1],i=r[2],a=Math.atan2(i,Math.sqrt(e*e+n*n)),o=Math.atan2(n,e);return[o*K$,a*K$]}function eOe(t,r,e,n){if(n===0){e===1&&(r[0]=t-1-r[0],r[1]=t-1-r[1]);var i=r[0];r[0]=r[1],r[1]=i}}function Q$(t){var r=Uk(t.ij,t.level,[.5,.5]),e=jk(r),n=Gk(t.face,e);return Vk(n)}var tOe=100;function Hk(t){for(var r=t.face,e=t.ij,n=t.level,i=[[0,0],[0,1],[1,1],[1,0],[0,0]],a=Math.max(1,Math.ceil(tOe*Math.pow(2,-n))),o=new Float64Array(4*a*2+2),s=0,u=0,c=0;c<4;c++)for(var h=i[c].slice(0),p=i[c+1],v=(p[0]-h[0])/a,x=(p[1]-h[1])/a,E=0;E<a;E++){h[0]+=v,h[1]+=x;var R=Uk(e,n,h),D=jk(R),H=Gk(r,D),W=Vk(H);Math.abs(W[1])>89.999&&(W[0]=u);var $=W[0]-u;W[0]+=$>180?-360:$<-180?360:0,o[s++]=W[0],o[s++]=W[1],u=W[0]}return o[s++]=o[0],o[s++]=o[1],o}function w0(t){var r=rOe(t),e=$$(r);return e}function rOe(t){if(t.indexOf("/")>0)return t;var r=H1(t);return J$(r)}function Wk(t){var r=w0(t);return Q$(r)}function tJ(t){var r;if(t.face===2||t.face===5){for(var e=null,n=0,i=0;i<4;i++){var a="".concat(t.face,"/").concat(i),o=w0(a),s=Hk(o);(typeof e>"u"||e===null)&&(e=new Float64Array(4*s.length)),e.set(s,n),n+=s.length}r=eJ(e)}else{var u=Hk(t);r=eJ(u)}return r}function eJ(t){if(t.length%2!==0)throw new Error("Invalid corners");for(var r=[],e=[],n=0;n<t.length;n+=2)r.push(t[n]),e.push(t[n+1]);return r.sort(function(i,a){return i-a}),e.sort(function(i,a){return i-a}),{west:r[0],east:r[r.length-1],north:e[e.length-1],south:e[0]}}function qk(t,r){var e=r?.minimumHeight||0,n=r?.maximumHeight||0,i=w0(t),a=tJ(i),o=a.west,s=a.south,u=a.east,c=a.north,h=[];return h.push(new _t(o,c,e)),h.push(new _t(u,c,e)),h.push(new _t(u,s,e)),h.push(new _t(o,s,e)),h.push(new _t(o,c,n)),h.push(new _t(u,c,n)),h.push(new _t(u,s,n)),h.push(new _t(o,s,n)),h}function OS(t){var r=t.token,e={minimumHeight:t.minimumHeight,maximumHeight:t.maximumHeight},n=qk(r,e),i=Wk(r),a=i[0],o=i[1],s=Fa.WGS84.cartographicToCartesian([a,o,e.maximumHeight]),u=new _t(s[0],s[1],s[2]);n.push(u);var c=T1(n),h=[].concat(Pr(c.center),Pr(c.halfAxes));return h}function rJ(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function nOe(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?rJ(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):rJ(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var iOe=4,aOe=8,oOe={QUADTREE:iOe,OCTREE:aOe};function sOe(t,r,e){if(t!=null&&t.box){var n=H1(t.s2VolumeInfo.token),i=zk(n,r),a=Nk(i),o=nOe({},t.s2VolumeInfo);switch(o.token=a,e){case"OCTREE":var s=t.s2VolumeInfo,u=s.maximumHeight-s.minimumHeight,c=u/2,h=s.minimumHeight+u/2;s.minimumHeight=h-c,s.maximumHeight=h+c;break;default:break}var p=OS(o),v={box:p,s2VolumeInfo:o};return v}}function Zk(t){return Kk.apply(this,arguments)}function Kk(){return Kk=zt(Yk.default.mark(function t(r){var e,n,i,a,o,s,u,c,h,p,v,x,E,R,D,H,W,$,J,B,se,V,X,I,O,U,re,ee,pe,je,qe,We,ot,gt,Pt,Dt,nr,Nt,Ut,Or,he,xe,Ge,bt,Kt,Gt;return Yk.default.wrap(function(an){for(;;)switch(an.prev=an.next){case 0:if(e=r.options,n=r.parentData,i=n===void 0?{mortonIndex:0,x:0,y:0,z:0}:n,a=r.childIndex,o=a===void 0?0:a,s=r.globalData,u=s===void 0?{level:0,mortonIndex:0,x:0,y:0,z:0}:s,c=r.s2VolumeBox,h=r.subtree,p=r.level,v=p===void 0?0:p,x=e.subdivisionScheme,E=e.subtreeLevels,R=e.maximumLevel,D=e.contentUrlTemplate,H=e.subtreesUriTemplate,W=e.basePath,$={children:[],lodMetricValue:0,contentUrl:""},J=oOe[x],B=o&1,se=o>>1&1,V=o>>2&1,X=(Math.pow(J,v)-1)/(J-1),I=_v(i.mortonIndex,o),O=X+I,U=_v(i.x,B),re=_v(i.y,se),ee=_v(i.z,V),pe=!1,v+1>E&&(pe=Xk(h.childSubtreeAvailability,I)),je=_v(u.x,U),qe=_v(u.y,re),We=_v(u.z,ee),ot=v+u.level,!pe){an.next=38;break}return gt="".concat(W,"/").concat(H),Pt=MS(gt,ot,je,qe,We),an.next=25,Ks(Pt,CS);case 25:Dt=an.sent,h=Dt,u.mortonIndex=I,u.x=U,u.y=re,u.z=ee,u.level=v,I=0,O=0,U=0,re=0,ee=0,v=0;case 38:if(nr=Xk(h.tileAvailability,O),!(!nr||v>R)){an.next=41;break}return an.abrupt("return",$);case 41:Nt=Xk(h.contentAvailability,O),Nt&&($.contentUrl=MS(D,ot,je,qe,We)),Ut=v+1,Or={mortonIndex:I,x:U,y:re,z:ee},he=0;case 46:if(!(he<J)){an.next=55;break}return xe=sOe(c,he,x),an.next=50,Zk({subtree:h,options:e,parentData:Or,childIndex:he,level:Ut,globalData:u,s2VolumeBox:xe});case 50:Ge=an.sent,(Ge.contentUrl||Ge.children.length)&&(bt=ot+1,Kt={childTileX:U,childTileY:re,childTileZ:ee},Gt=uOe(Ge,bt,Kt,e,c),$.children.push(Gt));case 52:he++,an.next=46;break;case 55:return an.abrupt("return",$);case 56:case"end":return an.stop()}},t)})),Kk.apply(this,arguments)}function Xk(t,r){return"constant"in t?Boolean(t.constant):t.explicitBitstream?fOe(r,t.explicitBitstream):!1}function uOe(t,r,e,n,i){var a=n.basePath,o=n.refine,s=n.getRefine,u=n.lodMetricType,c=n.getTileType,h=n.rootLodMetricValue,p=n.rootBoundingVolume,v=t.contentUrl&&t.contentUrl.replace("".concat(a,"/"),""),x=h/Math.pow(2,r),E=i!=null&&i.box?{box:i.box}:p,R=lOe(r,E,e);return{children:t.children,contentUrl:t.contentUrl,content:{uri:v},id:t.contentUrl,refine:s(o),type:c(t),lodMetricType:u,lodMetricValue:x,geometricError:x,transform:t.transform,boundingVolume:R}}function lOe(t,r,e){if(r.region){var n=e.childTileX,i=e.childTileY,a=e.childTileZ,o=Ot(r.region,6),s=o[0],u=o[1],c=o[2],h=o[3],p=o[4],v=o[5],x=Math.pow(2,t),E=(c-s)/x,R=(h-u)/x,D=(v-p)/x,H=s+E*n,W=s+E*(n+1),$=u+R*i,J=u+R*(i+1),B=p+D*a,se=p+D*(a+1);return{region:[H,$,W,J,B,se]}}if(r.box)return r;throw new Error("Unsupported bounding volume type ".concat(r))}function _v(t,r){return parseInt(t.toString(2)+r.toString(2),2)}function MS(t,r,e,n,i){var a=cOe({level:r,x:e,y:n,z:i});return t.replace(/{level}|{x}|{y}|{z}/gi,function(o){return a[o]})}function cOe(t){var r={};for(var e in t)r["{".concat(e,"}")]=t[e];return r}function fOe(t,r){var e=Math.floor(t/8),n=t%8,i=r[e]>>n&1;return i===1}function hOe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=pOe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function pOe(t,r){if(t){if(typeof t=="string")return nJ(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return nJ(t,r)}}function nJ(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function t3(t){if(!t.contentUrl)return Op.EMPTY;var r=t.contentUrl.split("?")[0],e=r.split(".").pop();switch(e){case"pnts":return Op.POINTCLOUD;case"i3dm":case"b3dm":case"glb":case"gltf":return Op.SCENEGRAPH;default:return e}}function r3(t){switch(t){case"REPLACE":case"replace":return Zl.REPLACE;case"ADD":case"add":return Zl.ADD;default:return t}}function $k(t,r){var e=/^[a-z][0-9a-z+.-]*:/i;if(e.test(r)){var n=new URL(t,"".concat(r,"/"));return decodeURI(n.toString())}else if(t.startsWith("/"))return t;return"".concat(r,"/").concat(t)}function iJ(t,r){if(!t)return null;if(t.content){var e=t.content.uri||t.content.url;t.contentUrl=$k(e,r.basePath)}return t.id=t.contentUrl,t.lodMetricType=dv.GEOMETRIC_ERROR,t.lodMetricValue=t.geometricError,t.transformMatrix=t.transform,t.type=t3(t),t.refine=r3(t.refine),t}function sJ(t,r){return Jk.apply(this,arguments)}function Jk(){return Jk=zt(bv.default.mark(function t(r,e){var n,i,a,o,s,u,c,h,p,v;return bv.default.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(n=r.basePath,a=oJ(r?.root),!(a&&r.root)){E.next=8;break}return E.next=5,aJ(r.root,r,a,e);case 5:i=E.sent,E.next=9;break;case 8:i=iJ(r.root,r);case 9:o=[],o.push(i);case 11:if(!(o.length>0)){E.next=40;break}s=o.pop()||{},u=s.children||[],c=hOe(u),E.prev=15,c.s();case 17:if((h=c.n()).done){E.next=30;break}if(p=h.value,v=oJ(p),!v){E.next=26;break}return E.next=23,aJ(p,r,v,e);case 23:p=E.sent,E.next=27;break;case 26:iJ(p,{basePath:n});case 27:o.push(p);case 28:E.next=17;break;case 30:E.next=35;break;case 32:E.prev=32,E.t0=E.catch(15),c.e(E.t0);case 35:return E.prev=35,c.f(),E.finish(35);case 38:E.next=11;break;case 40:return E.abrupt("return",i);case 41:case"end":return E.stop()}},t,null,[[15,32,35,38]])})),Jk.apply(this,arguments)}function aJ(t,r,e,n){return Qk.apply(this,arguments)}function Qk(){return Qk=zt(bv.default.mark(function t(r,e,n,i){var a,o,s,u,c,h,p,v,x,E,R,D,H,W,$,J,B,se;return bv.default.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return s=e.basePath,u=n.subdivisionScheme,c=n.maximumLevel,h=n.subtreeLevels,p=n.subtrees.uri,v=MS(p,0,0,0,0),x=$k(v,s),X.next=6,Ks(x,CS,i);case 6:return E=X.sent,R=$k(r.content.uri,s),D=e==null||(a=e.root)===null||a===void 0?void 0:a.refine,H=r.geometricError,W=(o=r.boundingVolume.extensions)===null||o===void 0?void 0:o["3DTILES_bounding_volume_S2"],W&&($=OS(W),J={box:$,s2VolumeInfo:W},r.boundingVolume=J),B=r.boundingVolume,se={contentUrlTemplate:R,subtreesUriTemplate:p,subdivisionScheme:u,subtreeLevels:h,maximumLevel:c,refine:D,basePath:s,lodMetricType:dv.GEOMETRIC_ERROR,rootLodMetricValue:H,rootBoundingVolume:B,getTileType:t3,getRefine:r3},X.next=16,dOe(r,E,se);case 16:return X.abrupt("return",X.sent);case 17:case"end":return X.stop()}},t)})),Qk.apply(this,arguments)}function dOe(t,r,e){return e3.apply(this,arguments)}function e3(){return e3=zt(bv.default.mark(function t(r,e,n){var i,a,o;return bv.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(r){u.next=2;break}return u.abrupt("return",null);case 2:return r.lodMetricType=dv.GEOMETRIC_ERROR,r.lodMetricValue=r.geometricError,r.transformMatrix=r.transform,u.next=7,Zk({subtree:e,options:n,s2VolumeBox:r});case 7:return i=u.sent,a=i.children,o=i.contentUrl,o&&(r.contentUrl=o,r.content={uri:o.replace("".concat(n.basePath,"/"),"")}),r.refine=r3(r.refine),r.type=t3(r),r.children=a,r.id=r.contentUrl,u.abrupt("return",r);case 16:case"end":return u.stop()}},t)})),e3.apply(this,arguments)}function oJ(t){var r;return(t==null||(r=t.extensions)===null||r===void 0?void 0:r["3DTILES_implicit_tiling"])||t?.implicitTiling}var IS={id:"3d-tiles",name:"3D Tiles",module:"3d-tiles",version:bS,extensions:["cmpt","pnts","b3dm","i3dm"],mimeTypes:["application/octet-stream"],tests:["cmpt","pnts","b3dm","i3dm"],parse:AOe,options:{"3d-tiles":{loadGLTF:!0,decodeQuantizedPositions:!1,isTileset:"auto",assetGltfUpAxis:null}}};function mOe(t){return df.dirname(t.url)}function vOe(t,r,e){return n3.apply(this,arguments)}function n3(){return n3=zt(xv.default.mark(function t(r,e,n){var i,a;return xv.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return i={content:{featureIds:null}},a=0,s.next=4,Ik(r,a,e,n,i.content);case 4:return s.abrupt("return",i.content);case 5:case"end":return s.stop()}},t)})),n3.apply(this,arguments)}function gOe(t,r,e){return i3.apply(this,arguments)}function i3(){return i3=zt(xv.default.mark(function t(r,e,n){var i,a;return xv.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=JSON.parse(new TextDecoder().decode(r)),a.loader=e.loader||IS,a.url=n.url,a.queryString=n.queryString,a.basePath=mOe(a),s.next=7,sJ(a,e);case 7:return a.root=s.sent,a.type=cl.TILES3D,a.lodMetricType=dv.GEOMETRIC_ERROR,a.lodMetricValue=((i=a.root)===null||i===void 0?void 0:i.lodMetricValue)||0,s.abrupt("return",a);case 12:case"end":return s.stop()}},t)})),i3.apply(this,arguments)}function AOe(t,r,e){return a3.apply(this,arguments)}function a3(){return a3=zt(xv.default.mark(function t(r,e,n){var i,a;return xv.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(i=e["3d-tiles"]||{},i.isTileset==="auto"?a=n.url&&n.url.indexOf(".json")!==-1:a=i.isTileset,!a){s.next=8;break}return s.next=5,gOe(r,e,n);case 5:r=s.sent,s.next=11;break;case 8:return s.next=10,vOe(r,e,n);case 10:r=s.sent;case 11:return s.abrupt("return",r);case 12:case"end":return s.stop()}},t)})),a3.apply(this,arguments)}function uJ(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function T0(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?uJ(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):uJ(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function yOe(t){var r=_Oe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function _Oe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var lJ=[0],bOe={getPointColor:{type:"accessor",value:[0,0,0,255]},pointSize:1,data:"",loader:IS,onTilesetLoad:{type:"function",value:function(r){}},onTileLoad:{type:"function",value:function(r){}},onTileUnload:{type:"function",value:function(r){}},onTileError:{type:"function",value:function(r,e,n){}},_getMeshColor:{type:"function",value:function(r){return[255,255,255]}}},RS=function(t){Ke(e,t);var r=yOe(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"initializeState",value:function(){"onTileLoadFail"in this.props&&xr.removed("onTileLoadFail","onTileError")(),this.state={layerMap:{},tileset3d:null,activeViewports:{},lastUpdatedViewports:null}}},{key:"isLoaded",get:function(){var i,a;return Boolean(((i=this.state)===null||i===void 0||(a=i.tileset3d)===null||a===void 0?void 0:a.isLoaded())&&Yt(me(e.prototype),"isLoaded",this))}},{key:"shouldUpdateState",value:function(i){var a=i.changeFlags;return a.somethingChanged}},{key:"updateState",value:function(i){var a=i.props,o=i.oldProps,s=i.changeFlags;if(a.data&&a.data!==o.data&&this._loadTileset(a.data),s.viewportChanged){var u=this.state.activeViewports,c=Object.keys(u).length;c&&(this._updateTileset(u),this.state.lastUpdatedViewports=u,this.state.activeViewports={})}if(s.propsChanged){var h=this.state.layerMap;for(var p in h)h[p].needsUpdate=!0}}},{key:"activateViewport",value:function(i){var a=this.state,o=a.activeViewports,s=a.lastUpdatedViewports;this.internalState.viewport=i,o[i.id]=i;var u=s?.[i.id];(!u||!i.equals(u))&&(this.setChangeFlags({viewportChanged:!0}),this.setNeedsUpdate())}},{key:"getPickingInfo",value:function(i){var a=i.info,o=i.sourceLayer,s=o&&o.props.tile;return a.picked&&(a.object=s),a.sourceTile=s,a}},{key:"filterSubLayer",value:function(i){var a=i.layer,o=i.viewport,s=a.props,u=s.tile,c=o.id;return u.selected&&u.viewportIds.includes(c)}},{key:"_updateAutoHighlight",value:function(i){var a=i.sourceTile,o=this.state.layerMap[a?.id];o&&o.layer&&o.layer.updateAutoHighlight(i)}},{key:"_loadTileset",value:function(){var n=zt(o3.default.mark(function a(o){var s,u,c,h,p,v,x,E;return o3.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(s=this.props.loadOptions,u=s===void 0?{}:s,c=this.props.loader||this.props.loaders,Array.isArray(c)&&(c=c[0]),h={loadOptions:T0({},u)},p=o,!c.preload){D.next=12;break}return D.next=8,c.preload(o,u);case 8:v=D.sent,v.url&&(p=v.url),v.headers&&(h.loadOptions.fetch=T0(T0({},h.loadOptions.fetch),{},{headers:v.headers})),Object.assign(h,v);case 12:return D.next=14,Ks(p,c,h.loadOptions);case 14:x=D.sent,E=new uk(x,T0({onTileLoad:this._onTileLoad.bind(this),onTileUnload:this._onTileUnload.bind(this),onTileError:this.props.onTileError},h)),this.setState({tileset3d:E,layerMap:{}}),this._updateTileset(this.state.activeViewports),this.props.onTilesetLoad(E);case 19:case"end":return D.stop()}},a,this)}));function i(a){return n.apply(this,arguments)}return i}()},{key:"_onTileLoad",value:function(i){var a=this.state.lastUpdatedViewports;this.props.onTileLoad(i),this._updateTileset(a),this.setNeedsUpdate()}},{key:"_onTileUnload",value:function(i){delete this.state.layerMap[i.id],this.props.onTileUnload(i)}},{key:"_updateTileset",value:function(i){var a=this;if(i){var o=this.state.tileset3d,s=this.context.timeline,u=Object.keys(i).length;!s||!u||!o||o.selectTiles(Object.values(i)).then(function(c){var h=a.state.frameNumber!==c;h&&a.setState({frameNumber:c})})}}},{key:"_getSubLayer",value:function(i,a){if(!i.content)return null;switch(i.type){case Op.POINTCLOUD:return this._makePointCloudLayer(i,a);case Op.SCENEGRAPH:return this._make3DModelLayer(i);case Op.MESH:return this._makeSimpleMeshLayer(i,a);default:throw new Error("Tile3DLayer: Failed to render layer of type ".concat(i.content.type))}}},{key:"_makePointCloudLayer",value:function(i,a){var o=i.content,s=o.attributes,u=o.pointCount,c=o.constantRGBA,h=o.cartographicOrigin,p=o.modelMatrix,v=s.positions,x=s.normals,E=s.colors;if(!v)return null;var R=a&&a.props.data||{header:{vertexCount:u},attributes:{POSITION:v,NORMAL:x,COLOR_0:E}},D=this.props,H=D.pointSize,W=D.getPointColor,$=this.getSubLayerClass("pointcloud",SA);return new $({pointSize:H},this.getSubLayerProps({id:"pointcloud"}),{id:"".concat(this.id,"-pointcloud-").concat(i.id),tile:i,data:R,coordinateSystem:yn.METER_OFFSETS,coordinateOrigin:h,modelMatrix:p,getColor:c||W,_offset:0})}},{key:"_make3DModelLayer",value:function(i){var a=i.content,o=a.gltf,s=a.instances,u=a.cartographicOrigin,c=a.modelMatrix,h=this.getSubLayerClass("scenegraph",f0);return new h({_lighting:"pbr"},this.getSubLayerProps({id:"scenegraph"}),{id:"".concat(this.id,"-scenegraph-").concat(i.id),tile:i,data:s||lJ,scenegraph:o,coordinateSystem:yn.METER_OFFSETS,coordinateOrigin:u,modelMatrix:c,getTransformMatrix:function(v){return v.modelMatrix},getPosition:[0,0,0],_offset:0})}},{key:"_makeSimpleMeshLayer",value:function(i,a){var o=i.content,s=o.attributes,u=o.indices,c=o.modelMatrix,h=o.cartographicOrigin,p=o.coordinateSystem,v=p===void 0?yn.METER_OFFSETS:p,x=o.material,E=o.featureIds,R=this.props._getMeshColor,D=a&&a.props.mesh||new Bi({drawMode:4,attributes:xOe(s),indices:u}),H=this.getSubLayerClass("mesh",lS);return new H(this.getSubLayerProps({id:"mesh"}),{id:"".concat(this.id,"-mesh-").concat(i.id),tile:i,mesh:D,data:lJ,getColor:R(i),pbrMaterial:x,modelMatrix:c,coordinateOrigin:h,coordinateSystem:v,featureIds:E,_offset:0})}},{key:"renderLayers",value:function(){var i=this,a=this.state,o=a.tileset3d,s=a.layerMap;return o?o.tiles.map(function(u){var c=s[u.id]=s[u.id]||{tile:u},h=c.layer;return u.selected&&(h?c.needsUpdate&&(h=i._getSubLayer(u,h),c.needsUpdate=!1):h=i._getSubLayer(u)),c.layer=h,h}).filter(Boolean):null}}]),e}(Go);_(RS,"defaultProps",bOe);_(RS,"layerName","Tile3DLayer");function xOe(t){var r={};return r.positions=T0(T0({},t.positions),{},{value:new Float32Array(t.positions.value)}),t.normals&&(r.normals=t.normals),t.texCoords&&(r.texCoords=t.texCoords),t.colors&&(r.colors=t.colors),t.uvRegions&&(r.uvRegions=t.uvRegions),r}Mn();at();vt();et();et();var p3=en(On());Mn();Mn();function wOe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=TOe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function TOe(t,r){if(t){if(typeof t=="string")return cJ(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return cJ(t,r)}}function cJ(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var SOe=new Map([["centerX",Float64Array.BYTES_PER_ELEMENT],["centerY",Float64Array.BYTES_PER_ELEMENT],["centerZ",Float64Array.BYTES_PER_ELEMENT],["minHeight",Float32Array.BYTES_PER_ELEMENT],["maxHeight",Float32Array.BYTES_PER_ELEMENT],["boundingSphereCenterX",Float64Array.BYTES_PER_ELEMENT],["boundingSphereCenterY",Float64Array.BYTES_PER_ELEMENT],["boundingSphereCenterZ",Float64Array.BYTES_PER_ELEMENT],["boundingSphereRadius",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointX",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointY",Float64Array.BYTES_PER_ELEMENT],["horizonOcclusionPointZ",Float64Array.BYTES_PER_ELEMENT]]);function s3(t){return t>>1^-(t&1)}function EOe(t){var r=0,e={},n=wOe(SOe),i;try{for(n.s();!(i=n.n()).done;){var a=Ot(i.value,2),o=a[0],s=a[1],u=s===8?t.getFloat64:t.getFloat32;e[o]=u.call(t,r,!0),r+=s}}catch(c){n.e(c)}finally{n.f()}return{header:e,headerEndPosition:r}}function COe(t,r){var e=r,n=3,i=t.getUint32(e,!0),a=new Uint16Array(i*n);e+=Uint32Array.BYTES_PER_ELEMENT;for(var o=Uint16Array.BYTES_PER_ELEMENT,s=i*o,u=e,c=u+s,h=c+s,p=0,v=0,x=0,E=0;E<i;E++)p+=s3(t.getUint16(u+o*E,!0)),v+=s3(t.getUint16(c+o*E,!0)),x+=s3(t.getUint16(h+o*E,!0)),a[E]=p,a[E+i]=v,a[E+i*2]=x;return e+=s*3,{vertexData:a,vertexDataEndPosition:e}}function W1(t,r,e,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a;if(n===2?a=new Uint16Array(t,r,e):a=new Uint32Array(t,r,e),!i)return a;for(var o=0,s=0;s<a.length;++s){var u=a[s];a[s]=o-u,u===0&&++o}return a}function POe(t,r,e){var n=e,i=3,a=r.length/i,o=a>65536?Uint32Array.BYTES_PER_ELEMENT:Uint16Array.BYTES_PER_ELEMENT;n%o!==0&&(n+=o-n%o);var s=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var u=s*3,c=W1(t.buffer,n,u,o);return n+=u*o,{triangleIndicesEndPosition:n,triangleIndices:c}}function OOe(t,r,e){var n=e,i=3,a=r.length/i,o=a>65536?Uint32Array.BYTES_PER_ELEMENT:Uint16Array.BYTES_PER_ELEMENT,s=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var u=W1(t.buffer,n,s,o,!1);n+=s*o;var c=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var h=W1(t.buffer,n,c,o,!1);n+=c*o;var p=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var v=W1(t.buffer,n,p,o,!1);n+=p*o;var x=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var E=W1(t.buffer,n,x,o,!1);return n+=x*o,{edgeIndicesEndPosition:n,westIndices:u,southIndices:h,eastIndices:v,northIndices:E}}function MOe(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}function IOe(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function ROe(t,r){var e={};if(t.byteLength<=r)return{extensions:e,extensionsEndPosition:r};for(var n=r;n<t.byteLength;){var i=t.getUint8(n,!0);n+=Uint8Array.BYTES_PER_ELEMENT;var a=t.getUint32(n,!0);n+=Uint32Array.BYTES_PER_ELEMENT;var o=new DataView(t.buffer,n,a);switch(i){case 1:{e.vertexNormals=MOe(o);break}case 2:{e.waterMask=IOe(o);break}default:}n+=a}return{extensions:e,extensionsEndPosition:n}}var wv={header:0,vertices:1,triangleIndices:2,edgeIndices:3,extensions:4},LOe={maxDecodingStep:wv.extensions};function u3(t,r){var e=Object.assign({},LOe,r),n=new DataView(t),i=EOe(n),a=i.header,o=i.headerEndPosition;if(e.maxDecodingStep<wv.vertices)return{header:a};var s=COe(n,o),u=s.vertexData,c=s.vertexDataEndPosition;if(e.maxDecodingStep<wv.triangleIndices)return{header:a,vertexData:u};var h=POe(n,u,c),p=h.triangleIndices,v=h.triangleIndicesEndPosition;if(e.maxDecodingStep<wv.edgeIndices)return{header:a,vertexData:u,triangleIndices:p};var x=OOe(n,u,v),E=x.westIndices,R=x.southIndices,D=x.eastIndices,H=x.northIndices,W=x.edgeIndicesEndPosition;if(e.maxDecodingStep<wv.extensions)return{header:a,vertexData:u,triangleIndices:p,westIndices:E,northIndices:H,eastIndices:D,southIndices:R};var $=ROe(n,W),J=$.extensions;return{header:a,vertexData:u,triangleIndices:p,westIndices:E,northIndices:H,eastIndices:D,southIndices:R,extensions:J}}function LS(t,r,e,n){for(var i=n?BOe(n,t.POSITION.value):kOe(r),a=new t.POSITION.value.constructor(i.length*6),o=new t.TEXCOORD_0.value.constructor(i.length*4),s=new r.constructor(i.length*6),u=0;u<i.length;u++){var c=i[u];DOe({edge:c,edgeIndex:u,attributes:t,skirtHeight:e,newPosition:a,newTexcoord0:o,newTriangles:s})}t.POSITION.value=jy(t.POSITION.value,a),t.TEXCOORD_0.value=jy(t.TEXCOORD_0.value,o);var h=r instanceof Array?r.concat(s):jy(r,s);return{attributes:t,triangles:h}}function kOe(t){for(var r=[],e=0;e<t.length;e+=3)r.push([t[e],t[e+1]]),r.push([t[e+1],t[e+2]]),r.push([t[e+2],t[e]]);r.sort(function(s,u){return Math.min.apply(Math,Pr(s))-Math.min.apply(Math,Pr(u))||Math.max.apply(Math,Pr(s))-Math.max.apply(Math,Pr(u))});for(var n=[],i=0;i<r.length;){var a,o;r[i][0]===((a=r[i+1])===null||a===void 0?void 0:a[1])&&r[i][1]===((o=r[i+1])===null||o===void 0?void 0:o[0])?i+=2:(n.push(r[i]),i++)}return n}function BOe(t,r){t.westIndices.sort(function(o,s){return r[3*o+1]-r[3*s+1]}),t.eastIndices.sort(function(o,s){return r[3*s+1]-r[3*o+1]}),t.southIndices.sort(function(o,s){return r[3*s]-r[3*o]}),t.northIndices.sort(function(o,s){return r[3*o]-r[3*s]});var e=[];for(var n in t)for(var i=t[n],a=0;a<i.length-1;a++)e.push([i[a],i[a+1]]);return e}function DOe(t){var r=t.edge,e=t.edgeIndex,n=t.attributes,i=t.skirtHeight,a=t.newPosition,o=t.newTexcoord0,s=t.newTriangles,u=n.POSITION.value.length,c=e*2,h=e*2+1;a.set(n.POSITION.value.subarray(r[0]*3,r[0]*3+3),c*3),a[c*3+2]=a[c*3+2]-i,a.set(n.POSITION.value.subarray(r[1]*3,r[1]*3+3),h*3),a[h*3+2]=a[h*3+2]-i,o.set(n.TEXCOORD_0.value.subarray(r[0]*2,r[0]*2+2),c*2),o.set(n.TEXCOORD_0.value.subarray(r[1]*2,r[1]*2+2),h*2);var p=e*2*3;s[p]=r[0],s[p+1]=u/3+h,s[p+2]=r[1],s[p+3]=u/3+h,s[p+4]=r[0],s[p+5]=u/3+c}function FOe(t,r,e){for(var n=r.minHeight,i=r.maxHeight,a=e||[0,0,1,1],o=Ot(a,4),s=o[0],u=o[1],c=o[2],h=o[3],p=c-s,v=h-u,x=i-n,E=t.length/3,R=new Float32Array(E*3),D=new Float32Array(E*2),H=0;H<E;H++){var W=t[H]/32767,$=t[H+E]/32767,J=t[H+E*2]/32767;R[3*H+0]=W*p+s,R[3*H+1]=$*v+u,R[3*H+2]=J*x+n,D[2*H+0]=W,D[2*H+1]=$}return{POSITION:{value:R,size:3},TEXCOORD_0:{value:D,size:2}}}function NOe(t,r){if(!t)return null;var e=r.bounds,n=u3(t,wv.triangleIndices),i=n.header,a=n.vertexData,o=n.triangleIndices,s=n.westIndices,u=n.northIndices,c=n.eastIndices,h=n.southIndices,p=o,v=FOe(a,i,e),x=qh(v);if(r.skirtHeight){var E=LS(v,p,r.skirtHeight,{westIndices:s,northIndices:u,eastIndices:c,southIndices:h}),R=E.attributes,D=E.triangles;v=R,p=D}return{loaderData:{header:{}},header:{vertexCount:p.length,boundingBox:x},mode:4,indices:{value:p,size:1},attributes:v}}function kS(t,r){return NOe(t,r["quantized-mesh"])}et();Mn();var c3=en(On());var q1=class{constructor(r=257){this.gridSize=r;let e=r-1;if(e&e-1)throw new Error(`Expected grid size to be 2^n+1, got ${r}.`);this.numTriangles=e*e*2-2,this.numParentTriangles=this.numTriangles-e*e,this.indices=new Uint32Array(this.gridSize*this.gridSize),this.coords=new Uint16Array(this.numTriangles*4);for(let n=0;n<this.numTriangles;n++){let i=n+2,a=0,o=0,s=0,u=0,c=0,h=0;for(i&1?s=u=c=e:a=o=h=e;(i>>=1)>1;){let v=a+s>>1,x=o+u>>1;i&1?(s=a,u=o,a=c,o=h):(a=s,o=u,s=c,u=h),c=v,h=x}let p=n*4;this.coords[p+0]=a,this.coords[p+1]=o,this.coords[p+2]=s,this.coords[p+3]=u}}createTile(r){return new l3(r,this)}},l3=class{constructor(r,e){let n=e.gridSize;if(r.length!==n*n)throw new Error(`Expected terrain data of length ${n*n} (${n} x ${n}), got ${r.length}.`);this.terrain=r,this.martini=e,this.errors=new Float32Array(r.length),this.update()}update(){let{numTriangles:r,numParentTriangles:e,coords:n,gridSize:i}=this.martini,{terrain:a,errors:o}=this;for(let s=r-1;s>=0;s--){let u=s*4,c=n[u+0],h=n[u+1],p=n[u+2],v=n[u+3],x=c+p>>1,E=h+v>>1,R=x+E-h,D=E+c-x,H=(a[h*i+c]+a[v*i+p])/2,W=E*i+x,$=Math.abs(H-a[W]);if(o[W]=Math.max(o[W],$),s<e){let J=(h+D>>1)*i+(c+R>>1),B=(v+D>>1)*i+(p+R>>1);o[W]=Math.max(o[W],o[J],o[B])}}}getMesh(r=0){let{gridSize:e,indices:n}=this.martini,{errors:i}=this,a=0,o=0,s=e-1;n.fill(0);function u(x,E,R,D,H,W){let $=x+R>>1,J=E+D>>1;Math.abs(x-H)+Math.abs(E-W)>1&&i[J*e+$]>r?(u(H,W,x,E,$,J),u(R,D,H,W,$,J)):(n[E*e+x]=n[E*e+x]||++a,n[D*e+R]=n[D*e+R]||++a,n[W*e+H]=n[W*e+H]||++a,o++)}u(0,0,s,s,s,0),u(s,s,0,0,0,s);let c=new Uint16Array(a*2),h=new Uint32Array(o*3),p=0;function v(x,E,R,D,H,W){let $=x+R>>1,J=E+D>>1;if(Math.abs(x-H)+Math.abs(E-W)>1&&i[J*e+$]>r)v(H,W,x,E,$,J),v(R,D,H,W,$,J);else{let B=n[E*e+x]-1,se=n[D*e+R]-1,V=n[W*e+H]-1;c[2*B]=x,c[2*B+1]=E,c[2*se]=R,c[2*se+1]=D,c[2*V]=H,c[2*V+1]=W,h[p++]=B,h[p++]=se,h[p++]=V}}return v(0,0,s,s,s,0),v(s,s,0,0,0,s),{vertices:c,triangles:h}}};at();vt();var fJ=function(){function t(r,e){ce(this,t);var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e;this.data=r,this.width=e,this.height=n,this.coords=[],this.triangles=[],this._halfedges=[],this._candidates=[],this._queueIndices=[],this._queue=[],this._errors=[],this._rms=[],this._pending=[],this._pendingLen=0,this._rmsSum=0;var i=e-1,a=n-1,o=this._addPoint(0,0),s=this._addPoint(i,0),u=this._addPoint(0,a),c=this._addPoint(i,a),h=this._addTriangle(c,o,u,-1,-1,-1);this._addTriangle(o,c,s,h,-1,-1),this._flush()}return ve(t,[{key:"run",value:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.getMaxError()>e;)this.refine()}},{key:"refine",value:function(){this._step(),this._flush()}},{key:"getMaxError",value:function(){return this._errors[0]}},{key:"getRMSD",value:function(){return this._rmsSum>0?Math.sqrt(this._rmsSum/(this.width*this.height)):0}},{key:"heightAt",value:function(e,n){return this.data[this.width*n+e]}},{key:"_flush",value:function(){for(var e=this.coords,n=0;n<this._pendingLen;n++){var i=this._pending[n],a=2*this.triangles[i*3+0],o=2*this.triangles[i*3+1],s=2*this.triangles[i*3+2];this._findCandidate(e[a],e[a+1],e[o],e[o+1],e[s],e[s+1],i)}this._pendingLen=0}},{key:"_findCandidate",value:function(e,n,i,a,o,s,u){for(var c=Math.min(e,i,o),h=Math.min(n,a,s),p=Math.max(e,i,o),v=Math.max(n,a,s),x=Tv(i,a,o,s,c,h),E=Tv(o,s,e,n,c,h),R=Tv(e,n,i,a,c,h),D=a-n,H=e-i,W=s-a,$=i-o,J=n-s,B=o-e,se=Tv(e,n,i,a,o,s),V=this.heightAt(e,n)/se,X=this.heightAt(i,a)/se,I=this.heightAt(o,s)/se,O=0,U=0,re=0,ee=0,pe=h;pe<=v;pe++){var je=0;x<0&&W!==0&&(je=Math.max(je,Math.floor(-x/W))),E<0&&J!==0&&(je=Math.max(je,Math.floor(-E/J))),R<0&&D!==0&&(je=Math.max(je,Math.floor(-R/D)));for(var qe=x+W*je,We=E+J*je,ot=R+D*je,gt=!1,Pt=c+je;Pt<=p;Pt++){if(qe>=0&&We>=0&&ot>=0){gt=!0;var Dt=V*qe+X*We+I*ot,nr=Math.abs(Dt-this.heightAt(Pt,pe));ee+=nr*nr,nr>O&&(O=nr,U=Pt,re=pe)}else if(gt)break;qe+=W,We+=J,ot+=D}x+=$,E+=B,R+=H}(U===e&&re===n||U===i&&re===a||U===o&&re===s)&&(O=0),this._candidates[2*u]=U,this._candidates[2*u+1]=re,this._rms[u]=ee,this._queuePush(u,O,ee)}},{key:"_step",value:function(){var e=this._queuePop(),n=e*3+0,i=e*3+1,a=e*3+2,o=this.triangles[n],s=this.triangles[i],u=this.triangles[a],c=this.coords[2*o],h=this.coords[2*o+1],p=this.coords[2*s],v=this.coords[2*s+1],x=this.coords[2*u],E=this.coords[2*u+1],R=this._candidates[2*e],D=this._candidates[2*e+1],H=this._addPoint(R,D);if(Tv(c,h,p,v,R,D)===0)this._handleCollinear(H,n);else if(Tv(p,v,x,E,R,D)===0)this._handleCollinear(H,i);else if(Tv(x,E,c,h,R,D)===0)this._handleCollinear(H,a);else{var W=this._halfedges[n],$=this._halfedges[i],J=this._halfedges[a],B=this._addTriangle(o,s,H,W,-1,-1,n),se=this._addTriangle(s,u,H,$,-1,B+1),V=this._addTriangle(u,o,H,J,B+2,se+1);this._legalize(B),this._legalize(se),this._legalize(V)}}},{key:"_addPoint",value:function(e,n){var i=this.coords.length>>1;return this.coords.push(e,n),i}},{key:"_addTriangle",value:function(e,n,i,a,o,s){var u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:this.triangles.length,c=u/3;return this.triangles[u+0]=e,this.triangles[u+1]=n,this.triangles[u+2]=i,this._halfedges[u+0]=a,this._halfedges[u+1]=o,this._halfedges[u+2]=s,a>=0&&(this._halfedges[a]=u+0),o>=0&&(this._halfedges[o]=u+1),s>=0&&(this._halfedges[s]=u+2),this._candidates[2*c+0]=0,this._candidates[2*c+1]=0,this._queueIndices[c]=-1,this._rms[c]=0,this._pending[this._pendingLen++]=c,u}},{key:"_legalize",value:function(e){var n=this._halfedges[e];if(!(n<0)){var i=e-e%3,a=n-n%3,o=i+(e+1)%3,s=i+(e+2)%3,u=a+(n+2)%3,c=a+(n+1)%3,h=this.triangles[s],p=this.triangles[e],v=this.triangles[o],x=this.triangles[u],E=this.coords;if(zOe(E[2*h],E[2*h+1],E[2*p],E[2*p+1],E[2*v],E[2*v+1],E[2*x],E[2*x+1])){var R=this._halfedges[o],D=this._halfedges[s],H=this._halfedges[u],W=this._halfedges[c];this._queueRemove(i/3),this._queueRemove(a/3);var $=this._addTriangle(h,x,v,-1,H,R,i),J=this._addTriangle(x,h,p,$,D,W,a);this._legalize($+1),this._legalize(J+2)}}}},{key:"_handleCollinear",value:function(e,n){var i=n-n%3,a=i+(n+1)%3,o=i+(n+2)%3,s=this.triangles[o],u=this.triangles[n],c=this.triangles[a],h=this._halfedges[a],p=this._halfedges[o],v=this._halfedges[n];if(v<0){var x=this._addTriangle(e,s,u,-1,p,-1,i),E=this._addTriangle(s,e,c,x,-1,h);this._legalize(x+1),this._legalize(E+2);return}var R=v-v%3,D=R+(v+2)%3,H=R+(v+1)%3,W=this.triangles[D],$=this._halfedges[D],J=this._halfedges[H];this._queueRemove(R/3);var B=this._addTriangle(s,u,e,p,-1,-1,i),se=this._addTriangle(u,W,e,J,-1,B+1,R),V=this._addTriangle(W,c,e,$,-1,se+1),X=this._addTriangle(c,s,e,h,B+2,V+1);this._legalize(B),this._legalize(se),this._legalize(V),this._legalize(X)}},{key:"_queuePush",value:function(e,n,i){var a=this._queue.length;this._queueIndices[e]=a,this._queue.push(e),this._errors.push(n),this._rmsSum+=i,this._queueUp(a)}},{key:"_queuePop",value:function(){var e=this._queue.length-1;return this._queueSwap(0,e),this._queueDown(0,e),this._queuePopBack()}},{key:"_queuePopBack",value:function(){var e=this._queue.pop();return this._errors.pop(),this._rmsSum-=this._rms[e],this._queueIndices[e]=-1,e}},{key:"_queueRemove",value:function(e){var n=this._queueIndices[e];if(n<0){var i=this._pending.indexOf(e);if(i!==-1)this._pending[i]=this._pending[--this._pendingLen];else throw new Error("Broken triangulation (something went wrong).");return}var a=this._queue.length-1;a!==n&&(this._queueSwap(n,a),this._queueDown(n,a)||this._queueUp(n)),this._queuePopBack()}},{key:"_queueLess",value:function(e,n){return this._errors[e]>this._errors[n]}},{key:"_queueSwap",value:function(e,n){var i=this._queue[e],a=this._queue[n];this._queue[e]=a,this._queue[n]=i,this._queueIndices[i]=n,this._queueIndices[a]=e;var o=this._errors[e];this._errors[e]=this._errors[n],this._errors[n]=o}},{key:"_queueUp",value:function(e){for(var n=e;;){var i=n-1>>1;if(i===n||!this._queueLess(n,i))break;this._queueSwap(i,n),n=i}}},{key:"_queueDown",value:function(e,n){for(var i=e;;){var a=2*i+1;if(a>=n||a<0)break;var o=a+1,s=a;if(o<n&&this._queueLess(o,a)&&(s=o),!this._queueLess(s,i))break;this._queueSwap(i,s),i=s}return i>e}}]),t}();function Tv(t,r,e,n,i,a){return(e-i)*(r-a)-(n-a)*(t-i)}function zOe(t,r,e,n,i,a,o,s){var u=t-o,c=r-s,h=e-o,p=n-s,v=i-o,x=a-s,E=u*u+c*c,R=h*h+p*p,D=v*v+x*x;return u*(p*D-R*x)-c*(h*D-R*v)+E*(h*x-p*v)<0}function hJ(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function BS(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?hJ(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):hJ(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function DS(t,r,e,n,i){for(var a=n.rScaler,o=n.bScaler,s=n.gScaler,u=n.offset,c=new Float32Array((r+1)*(e+1)),h=0,p=0;p<e;p++)for(var v=0;v<r;v++,h++){var x=h*4,E=t[x+0],R=t[x+1],D=t[x+2];c[h+p]=E*a+R*s+D*o+u}if(i==="martini"){for(var H=(r+1)*r,W=0;W<r;W++,H++)c[H]=c[H-r-1];for(var $=e,J=0;J<e+1;J++,$+=e+1)c[$]=c[$-1]}return c}function UOe(t,r,e,n,i){for(var a=e+1,o=t.length/2,s=new Float32Array(o*3),u=new Float32Array(o*2),c=i||[0,0,e,n],h=Ot(c,4),p=h[0],v=h[1],x=h[2],E=h[3],R=(x-p)/e,D=(E-v)/n,H=0;H<o;H++){var W=t[H*2],$=t[H*2+1],J=$*a+W;s[3*H+0]=W*R+p,s[3*H+1]=-$*D+E,s[3*H+2]=r[J],u[2*H+0]=W/e,u[2*H+1]=$/n}return{POSITION:{value:s,size:3},TEXCOORD_0:{value:u,size:2}}}function jOe(t,r){if(t===null)return null;var e=r.meshMaxError,n=r.bounds,i=r.elevationDecoder,a=t.data,o=t.width,s=t.height,u,c;switch(r.tesselator){case"martini":u=DS(a,o,s,i,r.tesselator),c=pJ(e,o,u);break;case"delatin":u=DS(a,o,s,i,r.tesselator),c=dJ(e,o,s,u);break;default:o===s&&!(s&o-1)?(u=DS(a,o,s,i,"martini"),c=pJ(e,o,u)):(u=DS(a,o,s,i,"delatin"),c=dJ(e,o,s,u));break}var h=c,p=h.vertices,v=c,x=v.triangles,E=UOe(p,u,o,s,n),R=qh(E);if(r.skirtHeight){var D=LS(E,x,r.skirtHeight),H=D.attributes,W=D.triangles;E=H,x=W}return{loaderData:{header:{}},header:{vertexCount:x.length,boundingBox:R},mode:4,indices:{value:Uint32Array.from(x),size:1},attributes:E}}function pJ(t,r,e){var n=r+1,i=new q1(n),a=i.createTile(e),o=a.getMesh(t),s=o.vertices,u=o.triangles;return{vertices:s,triangles:u}}function dJ(t,r,e,n){var i=new fJ(n,r+1,e+1);i.run(t);var a=i.coords,o=i.triangles,s=a;return{vertices:s,triangles:o}}function h3(t,r,e){return f3.apply(this,arguments)}function f3(){return f3=zt(c3.default.mark(function t(r,e,n){var i,a;return c3.default.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return i=BS(BS({},e),{},{mimeType:"application/x.image",image:BS(BS({},e.image),{},{type:"data"})}),s.next=3,n.parse(r,i);case 3:return a=s.sent,s.abrupt("return",jOe(a,e.terrain));case 5:case"end":return s.stop()}},t)})),f3.apply(this,arguments)}var FS="3.4.13";var NS={name:"Terrain",id:"terrain",module:"terrain",version:FS,worker:!0,extensions:["png","pngraw","jpg","jpeg","gif","webp","bmp"],mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp"],options:{terrain:{tesselator:"auto",bounds:null,meshMaxError:10,elevationDecoder:{rScaler:1,gScaler:0,bScaler:0,offset:0},skirtHeight:null}}};var mJ={name:"Quantized Mesh",id:"quantized-mesh",module:"terrain",version:FS,worker:!0,extensions:["terrain"],mimeTypes:["application/vnd.quantized-mesh"],options:{"quantized-mesh":{bounds:[0,0,1,1],skirtHeight:null}}};function vJ(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function zS(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?vJ(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):vJ(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var IUt=zS(zS({},NS),{},{parse:h3});var RUt=zS(zS({},mJ),{},{parseSync:kS,parse:function(){var t=zt(p3.default.mark(function e(n,i){return p3.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",kS(n,i));case 1:case"end":return o.stop()}},e)}));function r(e,n){return t.apply(this,arguments)}return r}()});function GOe(t){var r=VOe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function VOe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gJ(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function zd(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?gJ(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):gJ(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var AJ=[1],HOe=zd(zd({},yp.defaultProps),{},{elevationData:Id,texture:zd(zd({},Id),{},{optional:!0}),meshMaxError:{type:"number",value:4},bounds:{type:"array",value:null,optional:!0,compare:!0},color:{type:"color",value:[255,255,255]},elevationDecoder:{type:"object",value:{rScaler:1,gScaler:0,bScaler:0,offset:0}},workerUrl:"",wireframe:!1,material:!0,loaders:[NS]});function yJ(t){return Array.isArray(t)?t.join(";"):t||""}var US=function(t){Ke(e,t);var r=GOe(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"updateState",value:function(i){var a=i.props,o=i.oldProps,s=a.elevationData!==o.elevationData;if(s){var u=a.elevationData,c=u&&(Array.isArray(u)||u.includes("{x}")&&u.includes("{y}"));this.setState({isTiled:c})}var h=s||a.meshMaxError!==o.meshMaxError||a.elevationDecoder!==o.elevationDecoder||a.bounds!==o.bounds;if(!this.state.isTiled&&h){var p=this.loadTerrain(a);this.setState({terrain:p})}a.workerUrl&&xr.removed("workerUrl","loadOptions.terrain.workerUrl")()}},{key:"loadTerrain",value:function(i){var a,o=i.elevationData,s=i.bounds,u=i.elevationDecoder,c=i.meshMaxError,h=i.signal;if(!o)return null;var p=this.getLoadOptions();p=zd(zd({},p),{},{terrain:zd(zd({skirtHeight:this.state.isTiled?c*2:0},(a=p)===null||a===void 0?void 0:a.terrain),{},{bounds:s,meshMaxError:c,elevationDecoder:u})});var v=this.props.fetch;return v(o,{propName:"elevationData",layer:this,loadOptions:p,signal:h})}},{key:"getTiledTerrainData",value:function(i){var a=this.props,o=a.elevationData,s=a.fetch,u=a.texture,c=a.elevationDecoder,h=a.meshMaxError,p=this.context.viewport,v=Th(o,i),x=u&&Th(u,i),E=i.signal,R=[0,0],D=[0,0];if(p.isGeospatial){var H=i.bbox;R=p.projectFlat([H.west,H.south]),D=p.projectFlat([H.east,H.north])}else{var W=i.bbox;R=[W.left,W.bottom],D=[W.right,W.top]}var $=[R[0],R[1],D[0],D[1]],J=this.loadTerrain({elevationData:v,bounds:$,elevationDecoder:c,meshMaxError:h,signal:E}),B=x?s(x,{propName:"texture",layer:this,loaders:[],signal:E}).catch(function(se){return null}):Promise.resolve(null);return Promise.all([J,B])}},{key:"renderSubLayers",value:function(i){var a=this.getSubLayerClass("mesh",_p),o=this.props,s=o.color,u=o.wireframe,c=o.material,h=i.data;if(!h)return null;var p=Ot(h,2),v=p[0],x=p[1];return new a(i,{data:AJ,mesh:v,texture:x,_instanced:!1,coordinateSystem:yn.CARTESIAN,getPosition:function(R){return[0,0,0]},getColor:s,wireframe:u,material:c})}},{key:"onViewportLoad",value:function(i){if(i){var a=this.state.zRange,o=i.map(function(c){return c.content}).filter(Boolean).map(function(c){var h=c[0].header.boundingBox;return h.map(function(p){return p[2]})});if(o.length!==0){var s=Math.min.apply(Math,Pr(o.map(function(c){return c[0]}))),u=Math.max.apply(Math,Pr(o.map(function(c){return c[1]})));(!a||s<a[0]||u>a[1])&&this.setState({zRange:[s,u]})}}}},{key:"renderLayers",value:function(){var i=this.props,a=i.color,o=i.material,s=i.elevationData,u=i.texture,c=i.wireframe,h=i.meshMaxError,p=i.elevationDecoder,v=i.tileSize,x=i.maxZoom,E=i.minZoom,R=i.extent,D=i.maxRequests,H=i.onTileLoad,W=i.onTileUnload,$=i.onTileError,J=i.maxCacheSize,B=i.maxCacheByteSize,se=i.refinementStrategy;if(this.state.isTiled)return new yp(this.getSubLayerProps({id:"tiles"}),{getTileData:this.getTiledTerrainData.bind(this),renderSubLayers:this.renderSubLayers.bind(this),updateTriggers:{getTileData:{elevationData:yJ(s),texture:yJ(u),meshMaxError:h,elevationDecoder:p}},onViewportLoad:this.onViewportLoad.bind(this),zRange:this.state.zRange||null,tileSize:v,maxZoom:x,minZoom:E,extent:R,maxRequests:D,onTileLoad:H,onTileUnload:W,onTileError:$,maxCacheSize:J,maxCacheByteSize:B,refinementStrategy:se});if(!s)return null;var V=this.getSubLayerClass("mesh",_p);return new V(this.getSubLayerProps({id:"mesh"}),{data:AJ,mesh:this.state.terrain,texture:u,_instanced:!1,getPosition:function(I){return[0,0,0]},getColor:a,material:o,wireframe:c})}}]),e}(Go);_(US,"defaultProps",HOe);_(US,"layerName","TerrainLayer");Ii();at();vt();et();var I3=en(On());at();vt();et();function WOe(t){var r=qOe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function qOe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var XOe={clipBounds:[0,0,1,1],clipByInstance:void 0},_J=`
uniform vec4 clip_bounds;

bool clip_isInBounds(vec2 position) {
  return position.x >= clip_bounds[0] && position.y >= clip_bounds[1] && position.x < clip_bounds[2] && position.y < clip_bounds[3];
}
`,YOe={name:"clip-vs",vs:_J},KOe={"vs:#decl":`
varying float clip_isVisible;
`,"vs:DECKGL_FILTER_GL_POSITION":`
  clip_isVisible = float(clip_isInBounds(geometry.worldPosition.xy));
`,"fs:#decl":`
varying float clip_isVisible;
`,"fs:DECKGL_FILTER_COLOR":`
  if (clip_isVisible < 0.5) discard;
`},ZOe={name:"clip-fs",fs:_J},$Oe={"vs:#decl":`
varying vec2 clip_commonPosition;
`,"vs:DECKGL_FILTER_GL_POSITION":`
  clip_commonPosition = geometry.position.xy;
`,"fs:#decl":`
varying vec2 clip_commonPosition;
`,"fs:DECKGL_FILTER_COLOR":`
  if (!clip_isInBounds(clip_commonPosition)) discard;
`},X1=function(t){Ke(e,t);var r=WOe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"getShaders",value:function(){var i="instancePositions"in this.getAttributeManager().attributes;return this.props.clipByInstance!==void 0&&(i=Boolean(this.props.clipByInstance)),this.state.clipByInstance=i,i?{modules:[YOe],inject:KOe}:{modules:[ZOe],inject:$Oe}}},{key:"draw",value:function(i){var a=i.uniforms,o=this.props.clipBounds;if(this.state.clipByInstance)a.clip_bounds=o;else{var s=this.projectPosition([o[0],o[1],0]),u=this.projectPosition([o[2],o[3],0]);a.clip_bounds=[Math.min(s[0],u[0]),Math.min(s[1],u[1]),Math.max(s[0],u[0]),Math.max(s[1],u[1])]}}}]),e}(yA);_(X1,"defaultProps",XOe);_(X1,"extensionName","ClipExtension");et();var E3=en(On());Mn();et();function v3(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=JOe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function JOe(t,r){if(t){if(typeof t=="string")return bJ(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return bJ(t,r)}}function bJ(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function xJ(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Sv(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?xJ(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):xJ(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function g3(t,r,e){var n=QOe(t),i=Object.keys(n).filter(function(a){return n[a]!==Array});return eMe(t,Sv({propArrayTypes:n},r),{numericPropKeys:e&&e.numericPropKeys||i,PositionDataType:e?e.PositionDataType:Float32Array,triangulate:e?e.triangulate:!0})}function QOe(t){var r={},e=v3(t),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;if(i.properties)for(var a in i.properties){var o=i.properties[a];r[a]=oMe(o,r[a])}}}catch(s){e.e(s)}finally{e.f()}return r}function eMe(t,r,e){var n=r.pointPositionsCount,i=r.pointFeaturesCount,a=r.linePositionsCount,o=r.linePathsCount,s=r.lineFeaturesCount,u=r.polygonPositionsCount,c=r.polygonObjectsCount,h=r.polygonRingsCount,p=r.polygonFeaturesCount,v=r.propArrayTypes,x=r.coordLength,E=e.numericPropKeys,R=E===void 0?[]:E,D=e.PositionDataType,H=D===void 0?Float32Array:D,W=e.triangulate,$=W===void 0?!0:W,J=t[0]&&"id"in t[0],B=t.length>65535?Uint32Array:Uint16Array,se={type:"Point",positions:new H(n*x),globalFeatureIds:new B(n),featureIds:i>65535?new Uint32Array(n):new Uint16Array(n),numericProps:{},properties:[],fields:[]},V={type:"LineString",pathIndices:a>65535?new Uint32Array(o+1):new Uint16Array(o+1),positions:new H(a*x),globalFeatureIds:new B(a),featureIds:s>65535?new Uint32Array(a):new Uint16Array(a),numericProps:{},properties:[],fields:[]},X={type:"Polygon",polygonIndices:u>65535?new Uint32Array(c+1):new Uint16Array(c+1),primitivePolygonIndices:u>65535?new Uint32Array(h+1):new Uint16Array(h+1),positions:new H(u*x),globalFeatureIds:new B(u),featureIds:p>65535?new Uint32Array(u):new Uint16Array(u),numericProps:{},properties:[],fields:[]};$&&(X.triangles=[]);for(var I=0,O=[se,V,X];I<O.length;I++){var U=O[I],re=v3(R),ee;try{for(re.s();!(ee=re.n()).done;){var pe=ee.value,je=v[pe];U.numericProps[pe]=new je(U.positions.length/x)}}catch(nr){re.e(nr)}finally{re.f()}}V.pathIndices[o]=a,X.polygonIndices[c]=u,X.primitivePolygonIndices[h]=u;var qe={pointPosition:0,pointFeature:0,linePosition:0,linePath:0,lineFeature:0,polygonPosition:0,polygonObject:0,polygonRing:0,polygonFeature:0,feature:0},We=v3(t),ot;try{for(We.s();!(ot=We.n()).done;){var gt=ot.value,Pt=gt.geometry,Dt=gt.properties||{};switch(Pt.type){case"Point":tMe(Pt,se,qe,x,Dt),se.properties.push(m3(Dt,R)),J&&se.fields.push({id:gt.id}),qe.pointFeature++;break;case"LineString":rMe(Pt,V,qe,x,Dt),V.properties.push(m3(Dt,R)),J&&V.fields.push({id:gt.id}),qe.lineFeature++;break;case"Polygon":nMe(Pt,X,qe,x,Dt),X.properties.push(m3(Dt,R)),J&&X.fields.push({id:gt.id}),qe.polygonFeature++;break;default:throw new Error("Invalid geometry type")}qe.feature++}}catch(nr){We.e(nr)}finally{We.f()}return aMe(se,V,X,x)}function tMe(t,r,e,n,i){r.positions.set(t.data,e.pointPosition*n);var a=t.data.length/n;A3(r,i,e.pointPosition,a),r.globalFeatureIds.fill(e.feature,e.pointPosition,e.pointPosition+a),r.featureIds.fill(e.pointFeature,e.pointPosition,e.pointPosition+a),e.pointPosition+=a}function rMe(t,r,e,n,i){r.positions.set(t.data,e.linePosition*n);var a=t.data.length/n;A3(r,i,e.linePosition,a),r.globalFeatureIds.fill(e.feature,e.linePosition,e.linePosition+a),r.featureIds.fill(e.lineFeature,e.linePosition,e.linePosition+a);for(var o=0,s=t.indices.length;o<s;++o){var u=t.indices[o],c=o===s-1?t.data.length:t.indices[o+1];r.pathIndices[e.linePath++]=e.linePosition,e.linePosition+=(c-u)/n}}function nMe(t,r,e,n,i){r.positions.set(t.data,e.polygonPosition*n);var a=t.data.length/n;A3(r,i,e.polygonPosition,a),r.globalFeatureIds.fill(e.feature,e.polygonPosition,e.polygonPosition+a),r.featureIds.fill(e.polygonFeature,e.polygonPosition,e.polygonPosition+a);for(var o=0,s=t.indices.length;o<s;++o){var u=e.polygonPosition;r.polygonIndices[e.polygonObject++]=u;for(var c=t.areas[o],h=t.indices[o],p=t.indices[o+1],v=0,x=h.length;v<x;++v){var E=h[v],R=v===x-1?p===void 0?t.data.length:p[0]:h[v+1];r.primitivePolygonIndices[e.polygonRing++]=e.polygonPosition,e.polygonPosition+=(R-E)/n}var D=e.polygonPosition;iMe(r,c,h,{startPosition:u,endPosition:D,coordLength:n})}}function iMe(t,r,e,n){var i=n.startPosition,a=n.endPosition,o=n.coordLength;if(t.triangles)for(var s=i*o,u=a*o,c=t.positions.subarray(s,u),h=e[0],p=e.slice(1).map(function(R){return(R-h)/o}),v=AI(c,p,o,r),x=0,E=v.length;x<E;++x)t.triangles.push(i+v[x])}function d3(t,r){var e={};for(var n in t)e[n]={value:t[n],size:r};return e}function aMe(t,r,e,n){var i={points:Sv(Sv({},t),{},{positions:{value:t.positions,size:n},globalFeatureIds:{value:t.globalFeatureIds,size:1},featureIds:{value:t.featureIds,size:1},numericProps:d3(t.numericProps,1)}),lines:Sv(Sv({},r),{},{positions:{value:r.positions,size:n},pathIndices:{value:r.pathIndices,size:1},globalFeatureIds:{value:r.globalFeatureIds,size:1},featureIds:{value:r.featureIds,size:1},numericProps:d3(r.numericProps,1)}),polygons:Sv(Sv({},e),{},{positions:{value:e.positions,size:n},polygonIndices:{value:e.polygonIndices,size:1},primitivePolygonIndices:{value:e.primitivePolygonIndices,size:1},globalFeatureIds:{value:e.globalFeatureIds,size:1},featureIds:{value:e.featureIds,size:1},numericProps:d3(e.numericProps,1)})};return e.triangles&&(i.polygons.triangles={value:new Uint32Array(e.triangles),size:1}),i}function A3(t,r,e,n){for(var i in t.numericProps)if(i in r){var a=r[i];t.numericProps[i].fill(a,e,e+n)}}function m3(t,r){var e={};for(var n in t)r.includes(n)||(e[n]=t[n]);return e}function oMe(t,r){return r===Array||!Number.isFinite(t)?Array:r===Float64Array||Math.fround(t)!==t?Float64Array:Float32Array}et();function wJ(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function sMe(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?wJ(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):wJ(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function SJ(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=uMe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function uMe(t,r){if(t){if(typeof t=="string")return TJ(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return TJ(t,r)}}function TJ(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function VS(t,r){var e=r?.globalFeatureId;return e!==void 0?lMe(t,e):cMe(t,r?.type)}function lMe(t,r){var e=CJ(t),n=SJ(e),i;try{for(n.s();!(i=n.n()).done;){for(var a=i.value,o=0,s=a.featureIds.value[0],u=0;u<a.featureIds.value.length;u++){var c=a.featureIds.value[u];if(c!==s){if(r===a.globalFeatureIds.value[o])return jS(a,o,u);o=u,s=c}}if(r===a.globalFeatureIds.value[o])return jS(a,o,a.featureIds.value.length)}}catch(h){n.e(h)}finally{n.f()}throw new Error("featureId:".concat(r," not found"))}function cMe(t,r){var e=CJ(t,r);return fMe(e)}function EJ(t,r,e){switch(t.type){case"Point":return mMe(t,r,e);case"LineString":return dMe(t,r,e);case"Polygon":return PJ(t,r,e);default:var n=t;throw new Error("Unsupported geometry type: ".concat(n?.type))}}function CJ(t,r){var e=Boolean(t.points||t.lines||t.polygons);if(!e)return t.type=r||vMe(t),[t];var n=[];return t.points&&(t.points.type="Point",n.push(t.points)),t.lines&&(t.lines.type="LineString",n.push(t.lines)),t.polygons&&(t.polygons.type="Polygon",n.push(t.polygons)),n}function fMe(t){var r=[],e=SJ(t),n;try{for(e.s();!(n=e.n()).done;){var i=n.value;if(i.featureIds.value.length!==0){for(var a=0,o=i.featureIds.value[0],s=0;s<i.featureIds.value.length;s++){var u=i.featureIds.value[s];u!==o&&(r.push(jS(i,a,s)),a=s,o=u)}r.push(jS(i,a,i.featureIds.value.length))}}}catch(c){e.e(c)}finally{e.f()}return r}function jS(t,r,e){var n=EJ(t,r,e),i=pMe(t,r,e),a=hMe(t,r,e);return sMe({type:"Feature",geometry:n,properties:i},a)}function hMe(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2?arguments[2]:void 0;return t.fields&&t.fields[t.featureIds.value[r]]}function pMe(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2?arguments[2]:void 0,n=Object.assign({},t.properties[t.featureIds.value[r]]);for(var i in t.numericProps)n[i]=t.numericProps[i].value[r];return n}function PJ(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1/0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1/0,n=t.positions,i=t.polygonIndices.value.filter(function(H){return H>=r&&H<=e}),a=t.primitivePolygonIndices.value.filter(function(H){return H>=r&&H<=e}),o=i.length>2;if(!o){for(var s=[],u=0;u<a.length-1;u++){var c=a[u],h=a[u+1],p=GS(n,c,h);s.push(p)}return{type:"Polygon",coordinates:s}}for(var v=[],x=0;x<i.length-1;x++){var E=i[x],R=i[x+1],D=PJ(t,E,R).coordinates;v.push(D)}return{type:"MultiPolygon",coordinates:v}}function dMe(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1/0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1/0,n=t.positions,i=t.pathIndices.value.filter(function(h){return h>=r&&h<=e}),a=i.length>2;if(!a){var o=GS(n,i[0],i[1]);return{type:"LineString",coordinates:o}}for(var s=[],u=0;u<i.length-1;u++){var c=GS(n,i[u],i[u+1]);s.push(c)}return{type:"MultiLineString",coordinates:s}}function mMe(t,r,e){var n=t.positions,i=GS(n,r,e),a=i.length>1;return a?{type:"MultiPoint",coordinates:i}:{type:"Point",coordinates:i[0]}}function GS(t,r,e){r=r||0,e=e||t.value.length/t.size;for(var n=[],i=r;i<e;i++){for(var a=Array(),o=i*t.size;o<(i+1)*t.size;o++)a.push(Number(t.value[o]));n.push(a)}return n}function vMe(t){return t.pathIndices?"LineString":t.polygonIndices?"Polygon":"Point"}var S3=en(BJ());at();et();at();vt();et();at();vt();et();function DJ(t){var r=t.length;if(r<=1)return[t];for(var e=[],n,i,a=0;a<r;a++){var o=kMe(t[a]);o!==0&&(i===void 0&&(i=o<0),i===o<0?(n&&e.push(n),n=[t[a]]):n&&n.push(t[a]))}return n&&e.push(n),e}function kMe(t){for(var r=0,e=0,n=t.length-1,i,a;e<t.length;n=e++)i=t[e],a=t[n],r+=(a[0]-i[0])*(i[1]+a[1]);return r}function FJ(t,r,e){r&&e&&(t===1?r.id=e.readVarint():t===2?BMe(e,r):t===3?r.type=e.readVarint():t===4&&(r._geometry=e.pos))}function BMe(t,r){for(var e=t.readVarint()+t.pos;t.pos<e;){var n=r._keys[t.readVarint()],i=r._values[t.readVarint()];r.properties[n]=i}}var NJ=function(){function t(r,e,n,i,a){ce(this,t),_(this,"properties",void 0),_(this,"extent",void 0),_(this,"type",void 0),_(this,"id",void 0),_(this,"_pbf",void 0),_(this,"_geometry",void 0),_(this,"_keys",void 0),_(this,"_values",void 0),this.properties={},this.extent=n,this.type=0,this.id=null,this._pbf=r,this._geometry=-1,this._keys=i,this._values=a,r.readFields(FJ,this,e)}return ve(t,[{key:"loadGeometry",value:function(){var e=this._pbf;e.pos=this._geometry;for(var n=e.readVarint()+e.pos,i=1,a=0,o=0,s=0,u=[],c;e.pos<n;){if(a<=0){var h=e.readVarint();i=h&7,a=h>>3}if(a--,i===1||i===2)o+=e.readSVarint(),s+=e.readSVarint(),i===1&&(c&&u.push(c),c=[]),c&&c.push([o,s]);else if(i===7)c&&c.push(c[0].slice());else throw new Error("unknown command ".concat(i))}return c&&u.push(c),u}},{key:"bbox",value:function(){var e=this._pbf;e.pos=this._geometry;for(var n=e.readVarint()+e.pos,i=1,a=0,o=0,s=0,u=1/0,c=-1/0,h=1/0,p=-1/0;e.pos<n;){if(a<=0){var v=e.readVarint();i=v&7,a=v>>3}if(a--,i===1||i===2)o+=e.readSVarint(),s+=e.readSVarint(),o<u&&(u=o),o>c&&(c=o),s<h&&(h=s),s>p&&(p=s);else if(i!==7)throw new Error("unknown command ".concat(i))}return[u,h,c,p]}},{key:"_toGeoJSON",value:function(e){var n=this.loadGeometry(),i=t.types[this.type],a,o;switch(this.type){case 1:var s=[];for(a=0;a<n.length;a++)s[a]=n[a][0];n=s,e(n,this);break;case 2:for(a=0;a<n.length;a++)e(n[a],this);break;case 3:for(n=DJ(n),a=0;a<n.length;a++)for(o=0;o<n[a].length;o++)e(n[a][o],this);break}n.length===1?n=n[0]:i="Multi".concat(i);var u={type:"Feature",geometry:{type:i,coordinates:n},properties:this.properties};return this.id!==null&&(u.id=this.id),u}},{key:"toGeoJSON",value:function(e){if(typeof e=="function")return this._toGeoJSON(e);var n=e.x,i=e.y,a=e.z,o=this.extent*Math.pow(2,a),s=this.extent*n,u=this.extent*i;function c(h){for(var p=0;p<h.length;p++){var v=h[p];v[0]=(v[0]+s)*360/o-180;var x=180-(v[1]+u)*360/o;v[1]=360/Math.PI*Math.atan(Math.exp(x*Math.PI/180))-90}}return this._toGeoJSON(c)}}],[{key:"types",get:function(){return["Unknown","Point","LineString","Polygon"]}}]),t}();var zJ=function(){function t(r,e){ce(this,t),_(this,"version",void 0),_(this,"name",void 0),_(this,"extent",void 0),_(this,"length",void 0),_(this,"_pbf",void 0),_(this,"_keys",void 0),_(this,"_values",void 0),_(this,"_features",void 0),this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(DMe,this,e),this.length=this._features.length}return ve(t,[{key:"feature",value:function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var n=this._pbf.readVarint()+this._pbf.pos;return new NJ(this._pbf,n,this.extent,this._keys,this._values)}}]),t}();function DMe(t,r,e){r&&e&&(t===15?r.version=e.readVarint():t===1?r.name=e.readString():t===5?r.extent=e.readVarint():t===2?r._features.push(e.pos):t===3?r._keys.push(e.readString()):t===4&&r._values.push(FMe(e)))}function FMe(t){for(var r=null,e=t.readVarint()+t.pos;t.pos<e;){var n=t.readVarint()>>3;r=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null}return r}var UJ=function t(r,e){ce(this,t),_(this,"layers",void 0),this.layers=r.readFields(NMe,{},e)};function NMe(t,r,e){if(t===3&&e){var n=new zJ(e,e.readVarint()+e.pos);n.length&&r&&(r[n.name]=n)}}at();et();at();vt();et();et();at();vt();et();function jJ(t){var r=t.indices.length,e="Polygon";if(r<=1)return{type:e,data:t.data,areas:[[hp(t.data)]],indices:[t.indices]};for(var n=[],i=[],a=[],o=[],s,u=0,c,h=0,p;h<r;h++){p=t.indices[h]-u,c=t.indices[h+1]-u||t.data.length;var v=t.data.slice(p,c),x=hp(v);if(x===0){var E=t.data.slice(0,p),R=t.data.slice(c);t.data=E.concat(R),u+=c-p;continue}s===void 0&&(s=x<0),s===x<0?(o.length&&(n.push(a),i.push(o)),o=[p],a=[x]):(a.push(x),o.push(p))}return a&&n.push(a),o.length&&i.push(o),{type:e,areas:n,indices:i,data:t.data}}function GJ(t,r,e,n){for(var i=0,a=t.length;i<a;i+=2){t[i]=(t[i]+r)*360/n-180;var o=180-(t[i+1]+e)*360/n;t[i+1]=360/Math.PI*Math.atan(Math.exp(o*Math.PI/180))-90}}function VJ(t,r,e){r&&e&&(t===1?r.id=e.readVarint():t===2?zMe(e,r):t===3?r.type=e.readVarint():t===4&&(r._geometry=e.pos))}function zMe(t,r){for(var e=t.readVarint()+t.pos;t.pos<e;){var n=r._keys[t.readVarint()],i=r._values[t.readVarint()];r.properties[n]=i}}function UMe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=jMe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function jMe(t,r){if(t){if(typeof t=="string")return HJ(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return HJ(t,r)}}function HJ(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function WJ(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function qJ(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?WJ(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):WJ(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var XJ,Ev,b3,qS,x3,w3,Y1;var YJ=function(){function t(r,e,n,i,a,o){ce(this,t),_(this,"properties",void 0),_(this,"extent",void 0),_(this,"type",void 0),_(this,"id",void 0),_(this,"_pbf",void 0),_(this,"_geometry",void 0),_(this,"_keys",void 0),_(this,"_values",void 0),_(this,"_geometryInfo",void 0),this.properties={},this.extent=n,this.type=0,this.id=null,this._pbf=r,this._geometry=-1,this._keys=i,this._values=a,this._geometryInfo=o,r.readFields(VJ,this,e)}return ve(t,[{key:"loadGeometry",value:function(){var e=this._pbf;e.pos=this._geometry,XJ=e.readVarint()+e.pos,Ev=1,qS=0,x3=0,w3=0,Y1=0;for(var n=[],i=[];e.pos<XJ;)if(qS<=0&&(b3=e.readVarint(),Ev=b3&7,qS=b3>>3),qS--,Ev===1||Ev===2)x3+=e.readSVarint(),w3+=e.readSVarint(),Ev===1&&n.push(Y1),i.push(x3,w3),Y1+=2;else if(Ev===7){if(Y1>0){var a=n[n.length-1];i.push(i[a],i[a+1]),Y1+=2}}else throw new Error("unknown command ".concat(Ev));return{data:i,indices:n}}},{key:"_toBinaryCoordinates",value:function(e){var n=this.loadGeometry(),i;e(n.data,this);var a=2;switch(this.type){case 1:this._geometryInfo.pointFeaturesCount++,this._geometryInfo.pointPositionsCount+=n.indices.length,i=qJ({type:"Point"},n);break;case 2:this._geometryInfo.lineFeaturesCount++,this._geometryInfo.linePathsCount+=n.indices.length,this._geometryInfo.linePositionsCount+=n.data.length/a,i=qJ({type:"LineString"},n);break;case 3:i=jJ(n),this._geometryInfo.polygonFeaturesCount++,this._geometryInfo.polygonObjectsCount+=i.indices.length;var o=UMe(i.indices),s;try{for(o.s();!(s=o.n()).done;){var u=s.value;this._geometryInfo.polygonRingsCount+=u.length}}catch(h){o.e(h)}finally{o.f()}this._geometryInfo.polygonPositionsCount+=i.data.length/a;break;default:throw new Error("Invalid geometry type: ".concat(this.type))}var c={type:"Feature",geometry:i,properties:this.properties};return this.id!==null&&(c.id=this.id),c}},{key:"toBinaryCoordinates",value:function(e){if(typeof e=="function")return this._toBinaryCoordinates(e);var n=e.x,i=e.y,a=e.z,o=this.extent*Math.pow(2,a),s=this.extent*n,u=this.extent*i;return this._toBinaryCoordinates(function(c){return GJ(c,s,u,o)})}}]),t}();var KJ=function(){function t(r,e){ce(this,t),_(this,"version",void 0),_(this,"name",void 0),_(this,"extent",void 0),_(this,"length",void 0),_(this,"_pbf",void 0),_(this,"_keys",void 0),_(this,"_values",void 0),_(this,"_features",void 0),this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(GMe,this,e),this.length=this._features.length}return ve(t,[{key:"feature",value:function(e,n){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var i=this._pbf.readVarint()+this._pbf.pos;return new YJ(this._pbf,i,this.extent,this._keys,this._values,n)}}]),t}();function GMe(t,r,e){r&&e&&(t===15?r.version=e.readVarint():t===1?r.name=e.readString():t===5?r.extent=e.readVarint():t===2?r._features.push(e.pos):t===3?r._keys.push(e.readString()):t===4&&r._values.push(VMe(e)))}function VMe(t){for(var r=null,e=t.readVarint()+t.pos;t.pos<e;){var n=t.readVarint()>>3;r=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null}return r}var ZJ=function t(r,e){ce(this,t),_(this,"layers",void 0),this.layers=r.readFields(HMe,{},e)};function HMe(t,r,e){if(t===3&&e){var n=new KJ(e,e.readVarint()+e.pos);n.length&&r&&(r[n.name]=n)}}function XS(t,r){var e,n,i=qMe(r),a=(r==null||(e=r.gis)===null||e===void 0?void 0:e.format)||(r==null||(n=r.mvt)===null||n===void 0?void 0:n.shape);switch(a){case"columnar-table":return{shape:"columnar-table",data:T3(t,i)};case"geojson-row-table":{var o={shape:"geojson-row-table",data:$J(t,i)};return o}case"geojson":return $J(t,i);case"binary-geometry":return T3(t,i);case"binary":return T3(t,i);default:throw new Error(a)}}function T3(t,r){var e=WMe(t,r),n=Ot(e,2),i=n[0],a=n[1],o=g3(i,a);return o.byteLength=t.byteLength,o}function WMe(t,r){var e=[],n={coordLength:2,pointPositionsCount:0,pointFeaturesCount:0,linePositionsCount:0,linePathsCount:0,lineFeaturesCount:0,polygonPositionsCount:0,polygonObjectsCount:0,polygonRingsCount:0,polygonFeaturesCount:0};if(t.byteLength<=0)return[e,n];var i=new ZJ(new S3.default(t)),a=r&&Array.isArray(r.layers)?r.layers:Object.keys(i.layers);return a.forEach(function(o){var s=i.layers[o];if(s)for(var u=0;u<s.length;u++){var c=s.feature(u,n),h=YMe(c,r,o);e.push(h)}}),[e,n]}function $J(t,r){if(t.byteLength<=0)return[];var e=[],n=new UJ(new S3.default(t)),i=Array.isArray(r.layers)?r.layers:Object.keys(n.layers);return i.forEach(function(a){var o=n.layers[a];if(o)for(var s=0;s<o.length;s++){var u=o.feature(s),c=XMe(u,r,a);e.push(c)}}),e}function qMe(t){var r;if(!(t!=null&&t.mvt))throw new Error("mvt options required");var e=((r=t.mvt)===null||r===void 0?void 0:r.coordinates)==="wgs84",n=t.mvt.tileIndex,i=n&&Number.isFinite(n.x)&&Number.isFinite(n.y)&&Number.isFinite(n.z);if(e&&!i)throw new Error("MVT Loader: WGS84 coordinates need tileIndex property");return t.mvt}function XMe(t,r,e){var n=t.toGeoJSON(r.coordinates==="wgs84"?r.tileIndex:KMe);return r.layerProperty&&(n.properties[r.layerProperty]=e),n}function YMe(t,r,e){var n=t.toBinaryCoordinates(r.coordinates==="wgs84"?r.tileIndex:ZMe);return r.layerProperty&&n.properties&&(n.properties[r.layerProperty]=e),n}function KMe(t,r){for(var e=r.extent,n=0;n<t.length;n++){var i=t[n];i[0]/=e,i[1]/=e}}function ZMe(t,r){for(var e=r.extent,n=0,i=t.length;n<i;++n)t[n]/=e}function JJ(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function QJ(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?JJ(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):JJ(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var $Me="3.4.13",JMe={mvt:{shape:"geojson",coordinates:"local",layerProperty:"layerName",layers:void 0,tileIndex:null}},YS={name:"Mapbox Vector Tile",id:"mvt",module:"mvt",version:$Me,extensions:["mvt","pbf"],mimeTypes:["application/vnd.mapbox-vector-tile","application/x-protobuf"],worker:!0,category:"geometry",options:JMe},QMe=QJ(QJ({},YS),{},{parse:function(){var t=zt(E3.default.mark(function e(n,i){return E3.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",XS(n,i));case 1:case"end":return o.stop()}},e)}));function r(e,n){return t.apply(this,arguments)}return r}(),parseSync:XS,binary:!0});et();Mn();function eQ(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function tQ(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?eQ(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):eQ(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var eIe={Point:rQ,MultiPoint:tIe,LineString:nQ,MultiLineString:rIe,Polygon:iQ,MultiPolygon:nIe};function rQ(t,r,e){var n=Ot(t,2),i=n[0],a=n[1],o=Ot(r,2),s=o[0],u=o[1],c=hu(s[0],u[0],i),h=hu(s[1],u[1],a);return e.unprojectFlat([c,h])}function C3(t,r,e){return t.map(function(n){return rQ(n,r,e)})}function tIe(t,r,e){return C3(t,r,e)}function nQ(t,r,e){return C3(t,r,e)}function rIe(t,r,e){return t.map(function(n){return nQ(n,r,e)})}function iQ(t,r,e){return t.map(function(n){return C3(n,r,e)})}function nIe(t,r,e){return t.map(function(n){return iQ(n,r,e)})}function aQ(t,r,e){var n=e.projectFlat([r.west,r.north]),i=e.projectFlat([r.east,r.south]),a=[n,i];return tQ(tQ({},t),{},{coordinates:eIe[t.type](t.coordinates,a,e)})}function iIe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=aIe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function aIe(t,r){if(t){if(typeof t=="string")return oQ(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return oQ(t,r)}}function oQ(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var oIe=["points","lines","polygons"];function P3(t,r,e,n){var i=iIe(oIe),a;try{for(i.s();!(a=i.n()).done;){var o=a.value,s=t[o]&&sIe(t[o],r,e,n);if(s>=0)return s}}catch(u){i.e(u)}finally{i.f()}return-1}function sIe(t,r,e,n){var i=t.featureIds.value;if(!i.length)return-1;var a=0,o=i[i.length-1]+1;if(n){var s=uIe(t,n);if(s)a=s[0],o=s[1]+1;else return-1}var u=-1;if(r in t.numericProps){var c=t.numericProps[r].value.findIndex(function(h,p){return h===e&&i[p]>=a&&i[p]<o});return c>=0?t.globalFeatureIds.value[c]:-1}else r?u=sQ(t.properties,function(h){return h[r]===e},a,o):t.fields&&(u=sQ(t.fields,function(h){return h.id===e},a,o));return u>=0?lIe(t,u):-1}function uIe(t,r){if(!t.__layers){for(var e={},n=t.properties,i=0;i<n.length;i++){var a=n[i],o=a.layerName;o&&(e[o]?e[o][1]=i:e[o]=[i,i])}t.__layers=e}return t.__layers[r]}function lIe(t,r){if(!t.__ids){for(var e=[],n=t.featureIds.value,i=t.globalFeatureIds.value,a=0;a<n.length;a++)e[n[a]]=i[a];t.__ids=e}return t.__ids[r]}function sQ(t,r,e,n){for(var i=e;i<n;i++)if(r(t[i],i))return i;return-1}function cIe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=fIe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function fIe(t,r){if(t){if(typeof t=="string")return uQ(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return uQ(t,r)}}function uQ(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function hIe(t){var r=pIe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function pIe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lQ(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function Ud(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?lQ(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):lQ(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var O3=512,dIe=Ud(Ud({},pp.defaultProps),{},{data:Id,onDataLoad:{type:"function",value:null,optional:!0,compare:!1},uniqueIdProperty:"",highlightedFeatureId:null,loaders:[YS],binary:!0}),KS=function(t){Ke(e,t);var r=hIe(e);function e(){var n;ce(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r.call.apply(r,[this].concat(a)),_(jt(n),"state",void 0),n}return ve(e,[{key:"initializeState",value:function(){Yt(me(e.prototype),"initializeState",this).call(this);var i=this.context.viewport.resolution!==void 0?!1:this.props.binary;this.setState({binary:i,data:null,tileJSON:null,hoveredFeatureId:null,hoveredFeatureLayerName:null})}},{key:"isLoaded",get:function(){var i;return Boolean(((i=this.state)===null||i===void 0?void 0:i.data)&&Yt(me(e.prototype),"isLoaded",this))}},{key:"updateState",value:function(i){var a,o=i.props,s=i.oldProps,u=i.context,c=i.changeFlags;c.dataChanged&&this._updateTileData(),(a=this.state)!==null&&a!==void 0&&a.data&&(Yt(me(e.prototype),"updateState",this).call(this,{props:o,oldProps:s,context:u,changeFlags:c}),this._setWGS84PropertyForTiles());var h=o.highlightColor;h!==s.highlightColor&&Array.isArray(h)&&this.setState({highlightColor:h})}},{key:"_updateTileData",value:function(){var n=zt(I3.default.mark(function a(){var o,s,u,c,h;return I3.default.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(o=this.props.data,s=null,!(typeof o=="string"&&!ER(o))){v.next=18;break}return u=this.props,c=u.onDataLoad,h=u.fetch,this.setState({data:null,tileJSON:null}),v.prev=5,v.next=8,h(o,{propName:"data",layer:this,loaders:[]});case 8:s=v.sent,v.next=15;break;case 11:v.prev=11,v.t0=v.catch(5),this.raiseError(v.t0,"loading TileJSON"),o=null;case 15:c&&c(s,{propName:"data",layer:this}),v.next=19;break;case 18:o&&vr(o)==="object"&&"tilejson"in o&&(s=o);case 19:s&&(o=s.tiles),this.setState({data:o,tileJSON:s});case 21:case"end":return v.stop()}},a,this,[[5,11]])}));function i(){return n.apply(this,arguments)}return i}()},{key:"_getTilesetOptions",value:function(){var i=Yt(me(e.prototype),"_getTilesetOptions",this).call(this),a=this.state.tileJSON,o=this.props,s=o.minZoom,u=o.maxZoom;return a&&(Number.isFinite(a.minzoom)&&a.minzoom>s&&(i.minZoom=a.minzoom),Number.isFinite(a.maxzoom)&&(!Number.isFinite(u)||a.maxzoom<u)&&(i.maxZoom=a.maxzoom)),i}},{key:"renderLayers",value:function(){var i;return(i=this.state)!==null&&i!==void 0&&i.data?Yt(me(e.prototype),"renderLayers",this).call(this):null}},{key:"getTileData",value:function(i){var a,o=this.state,s=o.data,u=o.binary,c=i.index,h=i.signal,p=Th(s,i);if(!p)return Promise.reject("Invalid URL");var v=this.getLoadOptions(),x=this.props.fetch;return v=Ud(Ud({},v),{},{mimeType:"application/x-protobuf",mvt:Ud(Ud({},(a=v)===null||a===void 0?void 0:a.mvt),{},{coordinates:this.context.viewport.resolution?"wgs84":"local",tileIndex:c}),gis:u?{format:"binary"}:{}}),x(p,{propName:"data",layer:this,loadOptions:v,signal:h})}},{key:"renderSubLayers",value:function(i){var a=i.tile.index,o=a.x,s=a.y,u=a.z,c=Math.pow(2,u),h=O3/c,p=-h,v=O3*o/c,x=O3*(1-s/c),E=new gn().scale([h,p,1]);i.autoHighlight=!1,this.context.viewport.resolution||(i.modelMatrix=E,i.coordinateOrigin=[v,x,0],i.coordinateSystem=yn.CARTESIAN,i.extensions=[].concat(Pr(i.extensions||[]),[new X1]));var R=Yt(me(e.prototype),"renderSubLayers",this).call(this,i);return this.state.binary&&!(R instanceof pp)&&xr.warn("renderSubLayers() must return GeoJsonLayer when using binary:true")(),R}},{key:"_updateAutoHighlight",value:function(i){var a=this.props.uniqueIdProperty,o=this.state,s=o.hoveredFeatureId,u=o.hoveredFeatureLayerName,c=i.object,h=null,p=null;c&&(h=M3(c,a),p=cQ(c));var v=this.props.highlightColor;typeof v=="function"&&(v=v(i)),(s!==h||u!==p)&&this.setState({highlightColor:v,hoveredFeatureId:h,hoveredFeatureLayerName:p})}},{key:"getPickingInfo",value:function(i){var a=Yt(me(e.prototype),"getPickingInfo",this).call(this,i),o=Boolean(this.context.viewport.resolution);if(this.state.binary&&a.index!==-1){var s=i.sourceLayer.props.data;a.object=VS(s,{globalFeatureId:a.index})}return a.object&&!o&&(a.object=hQ(a.object,a.tile.bbox,this.context.viewport)),a}},{key:"getSubLayerPropsByTile",value:function(i){return{highlightedObjectIndex:this.getHighlightedObjectIndex(i),highlightColor:this.state.highlightColor}}},{key:"getHighlightedObjectIndex",value:function(i){var a=this.state,o=a.hoveredFeatureId,s=a.hoveredFeatureLayerName,u=a.binary,c=this.props,h=c.uniqueIdProperty,p=c.highlightedFeatureId,v=i.content,x=fQ(p),E=fQ(o)||x;if(!E)return-1;var R=x?p:o;return Array.isArray(v)?v.findIndex(function(D){var H=M3(D,h)===R,W=x||cQ(D)===s;return H&&W}):v&&u?P3(v,h,R,x?"":s):-1}},{key:"_pickObjects",value:function(i){var a=this.context,o=a.deck,s=a.viewport,u=s.width,c=s.height,h=s.x,p=s.y,v=[this.id];return o.pickObjects({x:h,y:p,width:u,height:c,layerIds:v,maxObjects:i})}},{key:"getRenderedFeatures",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,a=this._pickObjects(i),o=new Set,s=[],u=cIe(a),c;try{for(u.s();!(c=u.n()).done;){var h=c.value,p=M3(h.object,this.props.uniqueIdProperty);p===void 0?s.push(h.object):o.has(p)||(o.add(p),s.push(h.object))}}catch(v){u.e(v)}finally{u.f()}return s}},{key:"_setWGS84PropertyForTiles",value:function(){var i=this,a="dataInWGS84",o=this.state.tileset;o.selectedTiles.forEach(function(s){s.hasOwnProperty(a)||Object.defineProperty(s,a,{get:function(){if(!s.content)return null;if(i.state.binary&&Array.isArray(s.content)&&!s.content.length)return[];var c=s.bbox;if(s._contentWGS84===void 0&&CR(c)){var h=i.state.binary?VS(s.content):s.content;s._contentWGS84=h.map(function(p){return hQ(p,c,i.context.viewport)})}return s._contentWGS84}})})}}]),e}(yp);_(KS,"layerName","MVTLayer");_(KS,"defaultProps",dIe);function M3(t,r){if(t.properties&&r)return t.properties[r];if("id"in t)return t.id}function cQ(t){var r;return((r=t.properties)===null||r===void 0?void 0:r.layerName)||null}function fQ(t){return t!=null&&t!==""}function hQ(t,r,e){var n=Ud(Ud({},t),{},{geometry:{type:t.geometry.type}});return Object.defineProperty(n.geometry,"coordinates",{get:function(){var a=aQ(t.geometry,r,e);return a.coordinates}}),n}at();vt();et();Mn();var pQ="0123456789bcdefghjkmnpqrstuvwxyz",dQ={};for(K1=0;K1<pQ.length;K1++)dQ[pQ.charAt(K1)]=K1;var K1,mIe=-90,vIe=90,gIe=-180,AIe=180;function yIe(t){for(var r=!0,e=vIe,n=mIe,i=AIe,a=gIe,o,s=0,u=0,c=t.length;u<c;u++){var h=t[u].toLowerCase();s=dQ[h];for(var p=4;p>=0;p--){var v=s>>p&1;r?(o=(i+a)/2,v===1?a=o:i=o):(o=(e+n)/2,v===1?n=o:e=o),r=!r}}return[n,a,e,i]}function mQ(t){var r=yIe(t),e=Ot(r,4),n=e[0],i=e[1],a=e[2],o=e[3];return[o,a,o,n,i,n,i,a,o,a]}function _Ie(t){var r=bIe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function bIe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var xIe={getGeohash:{type:"accessor",value:function(r){return r.geohash}}},ZS=function(t){Ke(e,t);var r=_Ie(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"indexToBounds",value:function(){var i=this.props,a=i.data,o=i.getGeohash;return{data:a,_normalize:!1,positionFormat:"XY",getPolygon:function(u,c){return mQ(o(u,c))}}}}]),e}(Kc);_(ZS,"layerName","GeohashLayer");_(ZS,"defaultProps",xIe);Mn();et();at();vt();Ii();function C0(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(!t)throw new Error("JSON conversion error ".concat(r))}at();vt();Ii();Ii();Ii();function wIe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=TIe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function TIe(t,r){if(t){if(typeof t=="string")return vQ(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return vQ(t,r)}}function vQ(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function AQ(t,r){var e=EIe(r),n=t,i=wIe(e),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;n=SIe(n)?n[o]:void 0}}catch(s){i.e(s)}finally{i.f()}return n}function SIe(t){return t!==null&&vr(t)==="object"}var gQ={};function EIe(t){if(typeof t=="string"){var r=gQ[t];return r||(r=t.split("."),gQ[t]=r),r}return Array.isArray(t)?t:[t]}var k3=en(EQ()),L3={"-":function(r){return r}};function Cv(t,r){if(t in L3)return L3[t];var e,n=k3.default.parse(t);return!n.right&&!n.left&&n.type==="Identifier"?e=function(a){return AQ(a,t)}:(B3(n,function(i){if(i.type==="CallExpression")throw new Error("Function calls not allowed in JSON expressions")}),e=function(a){return k3.default.eval(n,a)}),L3[t]=e,e}function B3(t,r){if(Array.isArray(t))t.forEach(function(n){return B3(n,r)});else if(t&&vr(t)==="object"){t.type&&r(t);for(var e in t)B3(t[e],r)}}var P0="@@=",D3="@@#",CQ="@@type",QS="@@function";var PQ=function(r){return r&&vr(r)==="object"},O0=function(){function t(){ce(this,t),this.typeKey=CQ,this.functionKey=QS,this.log=console,this.classes={},this.reactComponents={},this.enumerations={},this.constants={},this.functions={},this.React=null,this.convertFunction=Cv,this.preProcessClassProps=function(s,u){return u},this.postProcessConvertedJson=function(s){return s};for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];for(var i=0,a=e;i<a.length;i++){var o=a[i];this.merge(o)}}return ve(t,[{key:"merge",value:function(e){for(var n in e)switch(n){case"layers":case"views":Object.assign(this.classes,e[n]);break;default:if(n in this){var i=e[n];this[n]=PQ(this[n])?Object.assign(this[n],i):i}}}},{key:"validate",value:function(e){return C0(!this.typeKey||typeof this.typeKey=="string"),C0(PQ(this.classes)),!0}}]),t}();function OIe(t){return typeof t=="string"&&t.startsWith(P0)}function MIe(t){return t.replace(P0,"")}function M0(t,r){var e={};for(var n in t){var i=t[n],a=OIe(i);a&&(i=MIe(i),i=Cv(i,r)),e[n]=i}return e}function OQ(t,r,e){var n=e.classes[t],i=e.reactComponents[t];if(!n&&!i){var a=e.log;if(a){var o=JSON.stringify(r,null,0).slice(0,40);a.warn("JSON converter: No registered class of type ".concat(t,"(").concat(o,"...)  "))}return null}return n?IIe(n,r,e):RIe(i,r,e)}function IIe(t,r,e){return e.preProcessClassProps&&(r=e.preProcessClassProps(t,r,e)),r=M0(r,e),new t(r)}function RIe(t,r,e){var n=e.React,i=r,a=i.children,o=a===void 0?[]:a;return delete r.children,e.preProcessClassProps&&(r=e.preProcessClassProps(t,r,e)),r=M0(r,e),n.createElement(t,r,o)}function MQ(t,r,e){var n=e.functions[t];if(!n){var i=e.log;if(i){var a=JSON.stringify(r,null,0).slice(0,40);i.warn("JSON converter: No registered function ".concat(t,"(").concat(a,"...)  "))}return null}return n(r)}function F3(t){return typeof t=="string"?JSON.parse(t):t}function IQ(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function RQ(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?IQ(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):IQ(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var N3=function(r){return r&&vr(r)==="object"},eE=function(){function t(r){ce(this,t),this.log=console,this.configuration={},this.onJSONChange=function(){},this.json=null,this.convertedJson=null,this.setProps(r)}return ve(t,[{key:"finalize",value:function(){}},{key:"setProps",value:function(e){"configuration"in e&&(this.configuration=e.configuration instanceof O0?e.configuration:new O0(e.configuration)),"onJSONChange"in e&&(this.onJSONChange=e.onJSONChange)}},{key:"mergeConfiguration",value:function(e){this.configuration.merge(e)}},{key:"convert",value:function(e){if(!e||e===this.json)return this.convertedJson;this.json=e;var n=F3(e),i=LIe(n,this.configuration);return i=this.configuration.postProcessConvertedJson(i),this.convertedJson=i,i}},{key:"convertJson",value:function(e){return this.convert(e)}}]),t}();function LIe(t,r){return r=new O0(r),z3(t,"",r)}function z3(t,r,e){return Array.isArray(t)?t.map(function(n,i){return z3(n,String(i),e)}):kIe(t,e)?BIe(t,e):N3(t)?QS in t?DIe(t,e):U3(t,e):typeof t=="string"?FIe(t,r,e):t}function kIe(t,r){var e=r.typeKey,n=N3(t)&&Boolean(t[e]);return n}function BIe(t,r){var e=r.typeKey,n=t[e],i=RQ({},t);return delete i[e],i=U3(i,r),OQ(n,i,r)}function DIe(t,r){var e=r.functionKey,n=t[e],i=RQ({},t);return delete i[e],i=U3(i,r),MQ(n,i,r)}function U3(t,r){C0(N3(t));var e={};for(var n in t){var i=t[n];e[n]=z3(i,n,r)}return e}function FIe(t,r,e){if(t.startsWith(P0)&&e.convertFunction)return t=t.replace(P0,""),e.convertFunction(t,e);if(t.startsWith(D3)){if(t=t.replace(D3,""),e.constants[t])return e.constants[t];var n=t.split("."),i=Ot(n,2),a=i[0],o=i[1];return e.enumerations[a][o]}return t}Ii();et();at();vt();function LQ(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function j3(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?LQ(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):LQ(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}var I0={onIninitialize:function(r){return r},onFinalize:function(r){return r},onMessage:null},Pv=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Transport";ce(this,t),this.name=r,this._messageQueue=[],this.userData={}}return ve(t,[{key:"getRootDOMElement",value:function(){return typeof document<"u"?document.body:null}},{key:"sendJSONMessage",value:function(){console.error("Back-channel not implemented for this transport")}},{key:"sendBinaryMessage",value:function(){console.error("Back-channel not implemented for this transport")}},{key:"_initialize",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=j3({transport:this},e);I0.onInitialize(n)}},{key:"_finalize",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=j3({transport:this},e);I0.onFinalize(n),this._destroyed=!0}},{key:"_messageReceived",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e=j3({transport:this},e),console.debug("Delivering transport message",e),I0.onMessage(e)}}],[{key:"setCallbacks",value:function(e){var n=e.onInitialize,i=e.onFinalize,a=e.onMessage;n&&(I0.onInitialize=n),i&&(I0.onFinalize=i),a&&(I0.onMessage=a)}},{key:"_stringifyJSONSafe",value:function(e){var n=new Set;return JSON.stringify(e,function(i,a){if(vr(a)==="object"&&a!==null){if(n.has(a))try{return JSON.parse(JSON.stringify(a))}catch{return}n.add(a)}return a})}}]),t}();Ii();function kQ(t,r){if(t===r)return!0;if(vr(t)!=="object"||t===null||vr(r)!=="object"||r===null||Object.keys(t).length!==Object.keys(r).length)return!1;for(var e in t)if(!(e in r)||t[e]!==r[e])return!1;for(var n in r)if(!(n in t))return!1;return!0}at();vt();et();at();vt();et();var Oo=en(GQ());var pGt=typeof window<"u"?window:global;var Ov=typeof document<"u"?document:{};function UIe(){}function jIe(t){t&&console.error(t.error)}var HQ={container:Oo.default.object,gl:Oo.default.object,mapboxApiAccessToken:Oo.default.string,mapboxApiUrl:Oo.default.string,attributionControl:Oo.default.bool,preserveDrawingBuffer:Oo.default.bool,reuseMaps:Oo.default.bool,transformRequest:Oo.default.func,mapOptions:Oo.default.object,mapStyle:Oo.default.oneOfType([Oo.default.string,Oo.default.object]),visible:Oo.default.bool,asyncRender:Oo.default.bool,onLoad:Oo.default.func,onError:Oo.default.func,width:Oo.default.number,height:Oo.default.number,viewState:Oo.default.object,longitude:Oo.default.number,latitude:Oo.default.number,zoom:Oo.default.number,bearing:Oo.default.number,pitch:Oo.default.number,altitude:Oo.default.number},tE={container:Ov.body,mapboxApiAccessToken:GIe(),mapboxApiUrl:"https://api.mapbox.com",preserveDrawingBuffer:!1,attributionControl:!0,reuseMaps:!1,mapOptions:{},mapStyle:"mapbox://styles/mapbox/light-v8",visible:!0,asyncRender:!1,onLoad:UIe,onError:jIe,width:0,height:0,longitude:0,latitude:0,zoom:0,bearing:0,pitch:0,altitude:1.5};function GIe(){var t=null;if(typeof window<"u"&&window.location){var r=window.location.search.match(/access_token=([^&\/]*)/);t=r&&r[1]}return!t&&typeof process<"u"&&(t=t||process.env.MapboxAccessToken||process.env.REACT_APP_MAPBOX_ACCESS_TOKEN),t||"no-token"}function VQ(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"component";t.debug&&Oo.default.checkPropTypes(HQ,t,"prop",r)}var R0=function(){function t(r){var e=this;if(ce(this,t),_(this,"mapboxgl",void 0),_(this,"props",tE),_(this,"_map",null),_(this,"width",0),_(this,"height",0),_(this,"_fireLoadEvent",function(){e.props.onLoad({type:"load",target:e._map})}),!r.mapboxgl)throw new Error("Mapbox not available");this.mapboxgl=r.mapboxgl,t.initialized||(t.initialized=!0,this._checkStyleSheet(this.mapboxgl.version)),this._initialize(r)}return ve(t,[{key:"finalize",value:function(){return this._destroy(),this}},{key:"setProps",value:function(e){return this._update(this.props,e),this}},{key:"resize",value:function(){return this._map.resize(),this}},{key:"redraw",value:function(){var e=this._map;e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}},{key:"getMap",value:function(){return this._map}},{key:"_reuse",value:function(e){this._map=t.savedMap;var n=this._map.getContainer(),i=e.container;for(i.classList.add("mapboxgl-map");n.childNodes.length>0;)i.appendChild(n.childNodes[0]);this._map._container=i,t.savedMap=null,e.mapStyle&&this._map.setStyle(e.mapStyle,{diff:!1}),this._map.isStyleLoaded()?this._fireLoadEvent():this._map.once("styledata",this._fireLoadEvent)}},{key:"_create",value:function(e){if(e.reuseMaps&&t.savedMap)this._reuse(e);else{if(e.gl){var n=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=n,e.gl}}var i={container:e.container,center:[0,0],zoom:8,pitch:0,bearing:0,maxZoom:24,style:e.mapStyle,interactive:!1,trackResize:!1,attributionControl:e.attributionControl,preserveDrawingBuffer:e.preserveDrawingBuffer};e.transformRequest&&(i.transformRequest=e.transformRequest),this._map=new this.mapboxgl.Map(Object.assign({},i,e.mapOptions)),this._map.once("load",e.onLoad),this._map.on("error",e.onError)}return this}},{key:"_destroy",value:function(){this._map&&(t.savedMap?this._map.remove():(t.savedMap=this._map,this._map.off("load",this.props.onLoad),this._map.off("error",this.props.onError),this._map.off("styledata",this._fireLoadEvent)),this._map=null)}},{key:"_initialize",value:function(e){var n=this;e=Object.assign({},tE,e),VQ(e,"Mapbox"),this.mapboxgl.accessToken=e.mapboxApiAccessToken||tE.mapboxApiAccessToken,this.mapboxgl.baseApiUrl=e.mapboxApiUrl,this._create(e);var i=e,a=i.container;Object.defineProperty(a,"offsetWidth",{get:function(){return n.width}}),Object.defineProperty(a,"clientWidth",{get:function(){return n.width}}),Object.defineProperty(a,"offsetHeight",{get:function(){return n.height}}),Object.defineProperty(a,"clientHeight",{get:function(){return n.height}});var o=this._map.getCanvas();o&&(o.style.outline="none"),this._updateMapViewport({},e),this._updateMapSize({},e),this.props=e}},{key:"_update",value:function(e,n){if(this._map){n=Object.assign({},this.props,n),VQ(n,"Mapbox");var i=this._updateMapViewport(e,n),a=this._updateMapSize(e,n);!n.asyncRender&&(i||a)&&this.redraw(),this.props=n}}},{key:"_updateMapSize",value:function(e,n){var i=e.width!==n.width||e.height!==n.height;return i&&(this.width=n.width,this.height=n.height,this.resize()),i}},{key:"_updateMapViewport",value:function(e,n){var i=this._getViewState(e),a=this._getViewState(n),o=a.latitude!==i.latitude||a.longitude!==i.longitude||a.zoom!==i.zoom||a.pitch!==i.pitch||a.bearing!==i.bearing||a.altitude!==i.altitude;return o&&(this._map.jumpTo(this._viewStateToMapboxProps(a)),a.altitude!==i.altitude&&(this._map.transform.altitude=a.altitude)),o}},{key:"_getViewState",value:function(e){var n=e.viewState||e,i=n.longitude,a=n.latitude,o=n.zoom,s=n.pitch,u=s===void 0?0:s,c=n.bearing,h=c===void 0?0:c,p=n.altitude,v=p===void 0?1.5:p;return{longitude:i,latitude:a,zoom:o,pitch:u,bearing:h,altitude:v}}},{key:"_checkStyleSheet",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"0.47.0";if(!(typeof Ov>"u"))try{var n=Ov.createElement("div");n.className="mapboxgl-map",n.style.display="none",Ov.body.append(n);var i=window.getComputedStyle(n).position!=="static";if(!i){var a=Ov.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href","https://api.tiles.mapbox.com/mapbox-gl-js/v".concat(e,"/mapbox-gl.css")),Ov.head.append(a)}}catch{}}},{key:"_viewStateToMapboxProps",value:function(e){return{center:[e.longitude,e.latitude],zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}}}]),t}();_(R0,"initialized",!1);_(R0,"propTypes",HQ);_(R0,"defaultProps",tE);_(R0,"savedMap",null);function WQ(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function G3(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?WQ(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):WQ(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function VIe(t){var r=HIe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function HIe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var qQ={position:"absolute",left:0,top:0,width:"100%",height:"100%"};function WIe(t){var r=t.container,e=r===void 0?document.body:r;if(typeof e=="string"&&(e=document.getElementById(e)),!e)throw Error("Deck: container not found");var n=window.getComputedStyle(e);n.position==="static"&&(e.style.position="relative");var i=document.createElement("div");e.appendChild(i),Object.assign(i.style,qQ);var a=document.createElement("canvas");return e.appendChild(a),Object.assign(a.style,qQ),{container:e,mapCanvas:i,deckCanvas:a}}var rE=function(t){Ke(e,t);var r=VIe(e);function e(n){var i;if(ce(this,e),typeof document>"u")throw Error("Deck can only be used in the browser");var a=WIe(n),o=a.mapCanvas,s=a.deckCanvas,u=n.viewState||n.initialViewState,c=Number.isFinite(u&&u.latitude),h=n.map,p=h===void 0?globalThis.mapboxgl||globalThis.maplibregl:h;return i=r.call(this,G3({canvas:s},n)),_(jt(i),"_map",void 0),p&&p.Map?i._map=c&&new R0(G3(G3({},n),{},{viewState:u,container:o,mapboxgl:p})):i._map=p,i}return ve(e,[{key:"getMapboxMap",value:function(){return this._map&&this._map.getMap()}},{key:"finalize",value:function(){this._map&&this._map.finalize(),Yt(me(e.prototype),"finalize",this).call(this)}},{key:"setProps",value:function(i){"mapStyle"in i&&this._map&&this._map._map.setStyle(i.mapStyle),Yt(me(e.prototype),"setProps",this).call(this,i)}},{key:"_drawLayers",value:function(i,a){if(this._map){var o=this.getViewports()[0];o&&this._map.setProps({width:o.width,height:o.height,viewState:o})}Yt(me(e.prototype),"_drawLayers",this).call(this,i,a)}}]),e}(Ad);function XQ(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function vc(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?XQ(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):XQ(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function qIe(t,r){var e=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=XIe(t))||r&&t&&typeof t.length=="number"){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){e=e.call(t)},n:function(){var c=e.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&e.return!=null&&e.return()}finally{if(o)throw s}}}}function XIe(t,r){if(t){if(typeof t=="string")return YQ(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor&&(e=t.constructor.name),e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return YQ(t,r)}}function YQ(t,r){(r==null||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var KQ=function(r){return r.charAt(0)===r.charAt(0).toUpperCase()},YIe=function(r){return r.charAt(0)===r.charAt(0).toLowerCase()&&r.charAt(0)!=="_"};function V3(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,e={},n=Object.keys(t).filter(r),i=qIe(n),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;e[o]=t[o]}}catch(s){i.e(s)}finally{i.f()}return e}var KIe={classes:V3($1,KQ),enumerations:{COORDINATE_SYSTEM:yn,GL:qN}};Am([PC]);var jd=new eE({configuration:KIe});function ZIe(t,r){var e={classes:V3(t,KQ),functions:V3(t,YIe)};r.mergeConfiguration(e)}function $Ie(t,r){if(!t)return;var e={};function n(){Object.values(e).every(function(a){return a})&&typeof r=="function"&&r()}function i(a,o){ZIe(o,jd),e[a]=o,n()}t.forEach(function(a){var o=a.libraryName,s=a.resourceUri;if(e[o]=!1,o in window){i(o,window[o]);return}Object.defineProperty(window,o,{set:function(c){return i(o,c)},get:function(){return e[o]}}),az(s)})}function ZQ(t,r){var e=jd.convert(t);r.setProps(e)}function JIe(t,r){return t.filter(function(e){return e&&e.id&&!r.find(function(n){return n.id===e.id})})}function QIe(t){var r=t.mapProvider,e=t.props,n=t.mapboxApiKey,i=t.googleMapsKey,a=t.handleEvent,o=t.getTooltip,s=t.container,u=a?{onClick:function(p){return a("deck-click-event",p)},onHover:function(p){return a("deck-hover-event",p)},onResize:function(p){return a("deck-resize-event",p)},onViewStateChange:function(p){var v=p.viewState,x=p.interactionState,E=p.oldViewState,R=new Vc(v);v.nw=R.unproject([0,0]),v.se=R.unproject([R.width,R.height]),a("deck-view-state-change-event",v)},onDragStart:function(p){return a("deck-drag-start-event",p)},onDrag:function(p){return a("deck-drag-event",p)},onDragEnd:function(p){return a("deck-drag-end-event",p)}}:null,c=vc(vc({},u),{},{getTooltip:o,container:s});switch(r){case"mapbox":return xr.info("Using Mapbox base maps")(),new rE(vc(vc(vc({},c),e),{},{map:RP,mapboxApiAccessToken:n,onLoad:iz}));case"carto":return xr.info("Using Carto base maps")(),new rE(vc(vc({map:RP},c),e));case"google_maps":return xr.info("Using Google Maps base maps")(),HV(vc(vc(vc({},c),e),{},{googleMapsKey:i}));default:return xr.info("No recognized map provider specified")(),new rE(vc(vc(vc({},c),e),{},{map:null,mapboxApiAccessToken:null}))}}function nE(t){var r=t.mapboxApiKey,e=t.googleMapsKey,n=t.container,i=t.jsonInput,a=t.tooltip,o=t.handleEvent,s=t.customLibraries,u=t.configuration,c;try{u&&jd.mergeConfiguration(u);var h=i.layers||[],p=jd.convert(i);hI(n,p);var v=(p.layers||[]).filter(function(H){return H}),x=JIe(h,v),E=OP(a),R=p.mapProvider;c=QIe({mapProvider:R,props:p,mapboxApiKey:r,googleMapsKey:e,handleEvent:o,getTooltip:E,container:n});var D=function(){if(x.length){var W=jd.convert({layers:i.layers}),$=(W.layers||[]).filter(function(J){return J});$.length>v.length&&c.setProps({layers:$})}};$Ie(s,D)}catch(H){console.error(H)}return c}function iE(){Pv.setCallbacks({onInitialize:function(r){var e=r.transport,n=nRe(e),i=n.width,a=n.height,o=n.customLibraries,s=n.mapboxApiKey,u=n.jsonInput,c=n.tooltip;nz();var h=e.getRootDOMElement(),p=ez(i,a);h.appendChild(p);var v=JSON.parse(u),x=nE({mapboxApiKey:s,container:p,jsonInput:v,tooltip:c,handleEvent:function(R,D){return rRe(e,R,D)},customLibraries:o});e.userData.deck=x},onFinalize:function(r){var e=r.transport,n=e.userData.deck;n.finalize()},onMessage:function(r){var e=r.transport,n=r.type,i=r.json,a=r.binary,o=e.userData.deck,s;switch(n){case"json":s=jd.convert(i),o.setProps(s);break;case"json-with-binary":s=jd.convert(i);var u=e.jupyterModel.get("data_buffer"),c=eRe({binary:u,convertedJson:s});o.setProps(c);break;default:}}})}function eRe(t){for(var r=t.binary,e=t.convertedJson,n=0;n<e.layers.length;n++){var i=e.layers[n].id,a=e.layers[n];e.layers[n]=a.clone({data:r[i]})}return e}function tRe(t,r){return r instanceof aa?r.id:r}function rRe(t,r,e){if(!(r==="hover"&&!e.picked&&e.index===-1)){var n=JSON.parse(JSON.stringify(e,tRe));t.sendJSONMessage(r,n)}}function nRe(t){var r=t.jupyterModel;if(!r)throw new Error("deck.gl playground currently only works with the Jupyter Widget Transport");return{width:r.get("width"),height:r.get("height"),customLibraries:r.get("custom_libraries"),mapboxApiKey:r.get("mapbox_key"),jsonInput:r.get("json_input"),tooltip:r.get("tooltip")}}at();vt();function iRe(t){var r=aRe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function aRe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var aE=function(t){Ke(e,t);var r=iRe(e);function e(){var n;return ce(this,e),n=r.call(this,"Jupyter Transport (JavaScript <=> Jupyter Kernel)"),n.jupyterModel=null,n.jupyterView=null,n}return ve(e,[{key:"getRootDOMElement",value:function(){return this.jupyterView.el}},{key:"sendJSONMessage",value:function(i,a){var o=Pv._stringifyJSONSafe({type:i,data:a});this.jupyterModel.send(o)}}]),e}(Pv);et();at();vt();var vb={};Tl(vb,{CONTROL_COMM_PROTOCOL_VERSION:()=>Nne,CONTROL_COMM_TARGET:()=>Fne,CONTROL_COMM_TIMEOUT:()=>zne,DOMWidgetModel:()=>JB,DOMWidgetView:()=>QB,IJupyterWidgetRegistry:()=>TFe,JUPYTER_WIDGETS_VERSION:()=>vE,JupyterPhosphorPanelWidget:()=>vFe,JupyterPhosphorWidget:()=>Aie,LayoutModel:()=>gFe,LayoutView:()=>AFe,ManagerBase:()=>KDe,PROTOCOL_VERSION:()=>gE,StyleModel:()=>yFe,StyleView:()=>_Fe,ViewList:()=>wFe,WidgetModel:()=>zv,WidgetView:()=>Q0,WrappedError:()=>qDe,assign:()=>Lp,base64ToBuffer:()=>mB,bufferToBase64:()=>dB,bufferToHex:()=>YDe,difference:()=>mE,hexToBuffer:()=>pB,isEqual:()=>G0,put_buffers:()=>Gd,reject:()=>Mh,remove_buffers:()=>sb,resolvePromisesDict:()=>V0,serialize_state:()=>Une,shims:()=>eD,unpack_models:()=>mb,uuid:()=>ob});var dE=en(QQ());var eee;(function(t){t.emptyObject=Object.freeze({}),t.emptyArray=Object.freeze([]);function r(h){return h===null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"}t.isPrimitive=r;function e(h){return Array.isArray(h)}t.isArray=e;function n(h){return!r(h)&&!e(h)}t.isObject=n;function i(h,p){if(h===p)return!0;if(r(h)||r(p))return!1;var v=e(h),x=e(p);return v!==x?!1:v&&x?o(h,p):s(h,p)}t.deepEqual=i;function a(h){return r(h)?h:e(h)?u(h):c(h)}t.deepCopy=a;function o(h,p){if(h===p)return!0;if(h.length!==p.length)return!1;for(var v=0,x=h.length;v<x;++v)if(!i(h[v],p[v]))return!1;return!0}function s(h,p){if(h===p)return!0;for(var v in h)if(h[v]!==void 0&&!(v in p))return!1;for(var v in p)if(p[v]!==void 0&&!(v in h))return!1;for(var v in h){var x=h[v],E=p[v];if(!(x===void 0&&E===void 0)&&(x===void 0||E===void 0||!i(x,E)))return!1}return!0}function u(h){for(var p=new Array(h.length),v=0,x=h.length;v<x;++v)p[v]=a(h[v]);return p}function c(h){var p={};for(var v in h){var x=h[v];x!==void 0&&(p[v]=a(x))}return p}})(eee||(eee={}));var uVt=function(){function t(){this._types=[],this._values=[]}return t.prototype.types=function(){return this._types.slice()},t.prototype.hasData=function(r){return this._types.indexOf(r)!==-1},t.prototype.getData=function(r){var e=this._types.indexOf(r);return e!==-1?this._values[e]:void 0},t.prototype.setData=function(r,e){this.clearData(r),this._types.push(r),this._values.push(e)},t.prototype.clearData=function(r){var e=this._types.indexOf(r);e!==-1&&(this._types.splice(e,1),this._values.splice(e,1))},t.prototype.clear=function(){this._types.length=0,this._values.length=0},t}(),tee=function(){function t(){var r=this;this.promise=new Promise(function(e,n){r._resolve=e,r._reject=n})}return t.prototype.resolve=function(r){var e=this._resolve;e(r)},t.prototype.reject=function(r){var e=this._reject;e(r)},t}(),q3;(function(t){t.getRandomValues=function(){var r=typeof window<"u"&&(window.crypto||window.msCrypto)||typeof pg<"u"&&W3()||null;return r&&typeof r.getRandomValues=="function"?function(n){return r.getRandomValues(n)}:r&&typeof r.randomFillSync=="function"?function(n){return r.randomFillSync(n)}:r&&typeof r.randomBytes=="function"?function(n){for(var i=r.randomBytes(n.length),a=0,o=i.length;a<o;++a)n[a]=i[a]}:function(n){for(var i=0,a=0,o=n.length;a<o;++a)a%4===0&&(i=Math.random()*4294967295>>>0),n[a]=i&255,i>>>=8}}()})(q3||(q3={}));var ree=function(){function t(r){this.name=r,this._tokenStructuralPropertyT=null}return t}(),sE;(function(t){t.uuid4=function(){for(var r=new Uint8Array(16),e=new Array(256),n=0;n<16;++n)e[n]="0"+n.toString(16);for(var n=16;n<256;++n)e[n]=n.toString(16);return function(){return q3.getRandomValues(r),r[6]=64|r[6]&15,r[8]=128|r[8]&63,e[r[0]]+e[r[1]]+e[r[2]]+e[r[3]]+"-"+e[r[4]]+e[r[5]]+"-"+e[r[6]]+e[r[7]]+"-"+e[r[8]]+e[r[9]]+"-"+e[r[10]]+e[r[11]]+e[r[12]]+e[r[13]]+e[r[14]]+e[r[15]]}}()})(sE||(sE={}));var kne=en(Pne()),Bne=en(Lne()),WDe=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(r,e)};return function(r,e){t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),pE=function(){return pE=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},pE.apply(this,arguments)};function mE(t,r){return t.filter(function(e){return r.indexOf(e)===-1})}function G0(t,r){return(0,kne.default)(t,r)}var Lp=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t};function ob(){return sE.uuid4()}var qDe=function(t){WDe(r,t);function r(e,n){var i=t.call(this,e)||this;return console.warn("WrappedError has been deprecated!"),n instanceof r?i.error_stack=n.error_stack:i.error_stack=[n],i.error_stack.push(i),i}return r}(Error);function V0(t){var r=Object.keys(t),e=[];return r.forEach(function(n){e.push(t[n])}),Promise.all(e).then(function(n){for(var i={},a=0;a<r.length;a++)i[r[a]]=n[a];return i})}function Mh(t,r){return function(n){throw r&&console.error(new Error(t)),n}}function Gd(t,r,e){for(var n=0;n<r.length;n++){for(var i=r[n],a=t,o=0;o<i.length-1;o++)a=a[i[o]];a[i[i.length-1]]=e[n]}}function sb(t){var r=[],e=[];function n(a,o){if(a.toJSON&&(a=a.toJSON()),Array.isArray(a))for(var s=!1,u=0;u<a.length;u++){var c=a[u];if(c)if(c instanceof ArrayBuffer||ArrayBuffer.isView(c))s||(a=a.slice(),s=!0),r.push(ArrayBuffer.isView(c)?c.buffer:c),e.push(o.concat([u])),a[u]=null;else{var h=n(c,o.concat([u]));h!==c&&(s||(a=a.slice(),s=!0),a[u]=h)}}else if((0,Bne.default)(a))for(var p in a){var s=!1;if(a.hasOwnProperty(p)){var c=a[p];if(c)if(c instanceof ArrayBuffer||ArrayBuffer.isView(c))s||(a=pE({},a),s=!0),r.push(ArrayBuffer.isView(c)?c.buffer:c),e.push(o.concat([p])),delete a[p];else{var h=n(c,o.concat([p]));h!==c&&(s||(a=pE({},a),s=!0),a[p]=h)}}}return a}var i=n(t,[]);return{state:i,buffers:r,buffer_paths:e}}var XDe=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"];function YDe(t){for(var r=new Uint8Array(t),e=[],n=0;n<r.length;n++)e.push(XDe[r[n]]);return e.join("")}function pB(t){for(var r=new Uint8Array(t.length/2),e=0;e<t.length;e+=2)r[e/2]=parseInt(t.slice(e,e+2),16);return r.buffer}function dB(t){return(0,dE.fromByteArray)(new Uint8Array(t))}function mB(t){return(0,dE.toByteArray)(t).buffer}var vE="1.2.0",gE="2.1.0";var ub=function(){return ub=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ub.apply(this,arguments)},Vd=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(h){try{c(n.next(h))}catch(p){o(p)}}function u(h){try{c(n.throw(h))}catch(p){o(p)}}function c(h){h.done?a(h.value):i(h.value).then(s,u)}c((n=n.apply(t,r||[])).next())})},Hd=function(t,r){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(h){return u([c,h])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=r.call(t,e)}catch(h){c=[6,h],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Dne=gE.split(".",1)[0],Fne="jupyter.widget.control",Nne="1.0.0",zne=4e3,KDe=function(){function t(){this.comm_target_name="jupyter.widget",this._models=Object.create(null)}return t.prototype.display_model=function(r,e,n){var i=this;return n===void 0&&(n={}),this.create_view(e,n).then(function(a){return i.display_view(r,a,n)}).catch(Mh("Could not create view",!0))},t.prototype.setViewOptions=function(r){return r===void 0&&(r={}),r},t.prototype.create_view=function(r,e){var n=this;e===void 0&&(e={});var i=r.state_change=r.state_change.then(function(){return n.loadClass(r.get("_view_name"),r.get("_view_module"),r.get("_view_module_version")).then(function(o){var s=new o({model:r,options:n.setViewOptions(e)});return s.listenTo(r,"destroy",s.remove),Promise.resolve(s.render()).then(function(){return s})}).catch(Mh("Could not create a view for model id "+r.model_id,!0))}),a=ob();return r.views[a]=i,i.then(function(o){o.once("remove",function(){delete o.model.views[a]},n)}),r.state_change},t.prototype.callbacks=function(r){return{}},t.prototype.get_model=function(r){return this._models[r]},t.prototype.has_model=function(r){return this._models[r]!==void 0},t.prototype.handle_comm_open=function(r,e){var n=(e.metadata||{}).version||"";if(n.split(".",1)[0]!==Dne){var i="Wrong widget protocol version: received protocol version '"+n+"', but was expecting major version '"+Dne+"'";return console.error(i),Promise.reject(i)}var a=e.content.data,o=a.buffer_paths||[],s=(e.buffers||[]).map(function(u){return u instanceof DataView?u:new DataView(u instanceof ArrayBuffer?u:u.buffer)});return Gd(a.state,o,s),this.new_model({model_name:a.state._model_name,model_module:a.state._model_module,model_module_version:a.state._model_module_version,comm:r},a.state).catch(Mh("Could not create a model.",!0))},t.prototype.new_widget=function(r,e){var n=this;e===void 0&&(e={});var i;if(r.view_name===void 0||r.view_module===void 0||r.view_module_version===void 0)return Promise.reject("new_widget(...) must be given view information in the options.");r.comm?i=Promise.resolve(r.comm):i=this._create_comm(this.comm_target_name,r.model_id,{state:{_model_module:r.model_module,_model_module_version:r.model_module_version,_model_name:r.model_name,_view_module:r.view_module,_view_module_version:r.view_module_version,_view_name:r.view_name}},{version:gE});var a=ub({},r);return i.then(function(o){a.comm=o;var s=n.new_model(a,e);return s.then(function(u){return u.sync("create",u),u})},function(){return a.model_id||(a.model_id=ob()),n.new_model(a,e)})},t.prototype.register_model=function(r,e){var n=this;this._models[r]=e,e.then(function(i){i.once("comm:close",function(){delete n._models[r]})})},t.prototype.new_model=function(r,e){return e===void 0&&(e={}),Vd(this,void 0,void 0,function(){var n,i;return Hd(this,function(a){switch(a.label){case 0:if(r.model_id)n=r.model_id;else if(r.comm)n=r.model_id=r.comm.comm_id;else throw new Error("Neither comm nor model_id provided in options object. At least one must exist.");return i=this._make_model(r,e),this.register_model(n,i),[4,i];case 1:return[2,a.sent()]}})})},t.prototype._make_model=function(r,e){return e===void 0&&(e={}),Vd(this,void 0,void 0,function(){var n,i,a,o,s,u,c;return Hd(this,function(h){switch(h.label){case 0:n=r.model_id,i=this.loadClass(r.model_name,r.model_module,r.model_module_version),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,i];case 2:return a=h.sent(),[3,4];case 3:throw o=h.sent(),console.error("Could not instantiate widget"),o;case 4:if(!a)throw new Error("Cannot find model module "+r.model_module+"@"+r.model_module_version+", "+r.model_name);return[4,a._deserialize_state(e,this)];case 5:return s=h.sent(),u={widget_manager:this,model_id:n,comm:r.comm},c=new a(s,u),c.name=r.model_name,c.module=r.model_module,[2,c]}})})},t.prototype._loadFromKernel=function(){return Vd(this,void 0,void 0,function(){var r,e,n,i,a,o,s,u,c,h,p,v,x,E=this;return Hd(this,function(R){switch(R.label){case 0:return R.trys.push([0,3,,4]),[4,this._create_comm(Fne,ob(),{},{version:Nne})];case 1:return n=R.sent(),[4,new Promise(function(D,H){n.on_msg(function(W){if(r=W.content.data,r.method!=="update_states"){console.warn(`
                        Unknown `+r.method+` message on the Control channel
                        `);return}e=(W.buffers||[]).map(function($){return $ instanceof DataView?$:new DataView($ instanceof ArrayBuffer?$:$.buffer)}),D(null)}),n.on_close(function(){return H("Control comm was closed too early")}),n.send({method:"request_states"},{}),setTimeout(function(){return H("Control comm did not respond in time")},zne)})];case 2:return R.sent(),n.close(),[3,4];case 3:return i=R.sent(),console.warn('Failed to fetch ipywidgets through the "jupyter.widget.control" comm channel, fallback to fetching individual model state. Reason:',i),[2,this._loadFromKernelModels()];case 4:for(a=r.states,o={},s={},u=0;u<r.buffer_paths.length;u++)c=r.buffer_paths[u],h=c[0],p=c.slice(1),v=e[u],o[h]||(o[h]=[],s[h]=[]),o[h].push(p),s[h].push(v);return[4,Promise.all(Object.keys(a).map(function(D){return Vd(E,void 0,void 0,function(){var H,W;return Hd(this,function($){switch($.label){case 0:return this.has_model(D)?(W=void 0,[3,3]):[3,1];case 1:return[4,this._create_comm("jupyter.widget",D)];case 2:W=$.sent(),$.label=3;case 3:return H=W,[2,{widget_id:D,comm:H}]}})})}))];case 5:return x=R.sent(),[4,Promise.all(x.map(function(D){var H=D.widget_id,W=D.comm;return Vd(E,void 0,void 0,function(){var $,J,B;return Hd(this,function(se){switch(se.label){case 0:$=a[H],H in o&&Gd($,o[H],s[H]),se.label=1;case 1:return se.trys.push([1,6,,7]),W?[4,this.new_model({model_name:$.model_name,model_module:$.model_module,model_module_version:$.model_module_version,model_id:H,comm:W},$.state)]:[3,3];case 2:return se.sent(),[3,5];case 3:return[4,this.get_model(H)];case 4:J=se.sent(),J.set_state($.state),se.label=5;case 5:return[3,7];case 6:return B=se.sent(),console.error(B),[3,7];case 7:return[2]}})})}))];case 6:return R.sent(),[2]}})})},t.prototype._loadFromKernelModels=function(){return Vd(this,void 0,void 0,function(){var r,e,n=this;return Hd(this,function(i){switch(i.label){case 0:return[4,this._get_comm_info()];case 1:return r=i.sent(),[4,Promise.all(Object.keys(r).map(function(a){return Vd(n,void 0,void 0,function(){var o,s,u;return Hd(this,function(c){switch(c.label){case 0:return this.has_model(a)?[2]:[4,this._create_comm(this.comm_target_name,a)];case 1:return o=c.sent(),s="",u=new tee,o.on_msg(function(h){if(h.parent_header.msg_id===s&&h.header.msg_type==="comm_msg"&&h.content.data.method==="update"){var p=h.content.data,v=p.buffer_paths||[],x=h.buffers||[];Gd(p.state,v,x),u.resolve({comm:o,msg:h})}}),s=o.send({method:"request_state"},this.callbacks(void 0)),[2,u.promise]}})})}))];case 2:return e=i.sent(),[4,Promise.all(e.map(function(a){return Vd(n,void 0,void 0,function(){var o;return Hd(this,function(s){switch(s.label){case 0:return a?(o=a.msg.content,[4,this.new_model({model_name:o.data.state._model_name,model_module:o.data.state._model_module,model_module_version:o.data.state._model_module_version,comm:a.comm},o.data.state)]):[2];case 1:return s.sent(),[2]}})})}))];case 3:return i.sent(),[2]}})})},t.prototype.clear_state=function(){var r=this;return V0(this._models).then(function(e){Object.keys(e).forEach(function(n){return e[n].close()}),r._models=Object.create(null)})},t.prototype.get_state=function(r){var e=this;r===void 0&&(r={});var n=Object.keys(this._models).map(function(i){return e._models[i]});return Promise.all(n).then(function(i){return Une(i,r)})},t.prototype.set_state=function(r){var e=this;if(!(r.version_major&&r.version_major<=2))throw"Unsupported widget state format";var n=r.state,i=this._get_comm_info().then(function(a){return Promise.all(Object.keys(n).map(function(o){var s={base64:mB,hex:pB},u=n[o],c=u.state;if(u.buffers){var h=u.buffers.map(function(x){return x.path}),p=u.buffers.map(function(x){return new DataView(s[x.encoding](x.data))});Gd(u.state,h,p)}if(e.has_model(o))return e.get_model(o).then(function(x){return x.constructor._deserialize_state(c||{},e).then(function(E){return x.set_state(E),x})});var v={model_id:o,model_name:u.model_name,model_module:u.model_module,model_module_version:u.model_module_version};return a.hasOwnProperty(o)?e._create_comm(e.comm_target_name,o).then(function(x){return v.comm=x,e.new_model(v)}):e.new_model(v,c)}))});return i},t.prototype.disconnect=function(){var r=this;Object.keys(this._models).forEach(function(e){r._models[e].then(function(n){n.comm_live=!1})})},t.prototype.resolveUrl=function(r){return Promise.resolve(r)},t.prototype.filterExistingModelState=function(r){var e=this,n=r.state;return n=Object.keys(n).filter(function(i){return!e.has_model(i)}).reduce(function(i,a){return i[a]=n[a],i},{}),ub(ub({},r),{state:n})},t}();function Une(t,r){r===void 0&&(r={});var e={};return t.forEach(function(n){var i=n.model_id,a=sb(n.serialize(n.get_state(r.drop_defaults))),o=a.buffers.map(function(s,u){return{data:dB(s),path:a.buffer_paths[u],encoding:"base64"}});e[i]={model_name:n.name,model_module:n.module,model_module_version:n.get("_model_module_version"),state:a.state},o.length>0&&(e[i].buffers=o)}),{version_major:2,version_minor:0,state:e}}var gB=function(){return gB=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},gB.apply(this,arguments)};function jne(t,r,e){if(t==null)return this;var n;if(typeof t=="object"?(n=t,e=r):(n={})[t]=r,e||(e={}),!this._validate(n,e))return!1;var i=e.unset,a=e.silent,o=[],s=this._changing;this._changing=!0;try{s||(this._previousAttributes=gB({},this.attributes),this.changed={});var u=this.attributes,c=this.changed,h=this._previousAttributes;for(var p in n)r=n[p],G0(u[p],r)||o.push(p),G0(h[p],r)?delete c[p]:c[p]=r,i?delete u[p]:u[p]=r;if(this.id=this.get(this.idAttribute),!a){o.length&&(this._pending=e);for(var v=0;v<o.length;v++)this.trigger("change:"+o[v],this,u[o[v]],e)}if(s)return this;if(!a)for(;this._pending;)e=this._pending,this._pending=!1,this.trigger("change",this,e)}finally{this._pending=!1,this._changing=!1}return this}var gie=en(xB()),$B=en(_B());var Hne=en(xB()),$De=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(r,e)};return function(r,e){t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),lb=Element.prototype,JDe=lb.matches||lb.webkitMatchesSelector||lb.mozMatchesSelector||lb.msMatchesSelector||lb.oMatchesSelector||function(r){for(var e=(this.document||this.ownerDocument).querySelectorAll(r),n=e.length;--n>=0&&e.item(n)!==this;);return n>-1},Wne=function(t){$De(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype._removeElement=function(){this.undelegateEvents(),this.el.parentNode&&this.el.parentNode.removeChild(this.el)},r.prototype._setElement=function(e){this.el=e},r.prototype._setAttributes=function(e){for(var n in e)n in this.el?this.el[n]=e[n]:this.el.setAttribute(n,e[n])},r.prototype.delegate=function(e,n,i){typeof n!="string"&&(i=n,n=null),this._domEvents===void 0&&(this._domEvents=[]);var a=this.el,o=n?function(s){for(var u=s.target||s.srcElement;u&&u!==a;u=u.parentNode)if(JDe.call(u,n))return s.delegateTarget=u,i.handleEvent?i.handleEvent(s):i(s)}:i;return this.el.addEventListener(e,o,!1),this._domEvents.push({eventName:e,handler:o,listener:i,selector:n}),o},r.prototype.undelegate=function(e,n,i){if(typeof n=="function"&&(i=n,n=null),this.el&&this._domEvents)for(var a=this._domEvents.slice(),o=a.length;o--;){var s=a[o],u=s.eventName===e&&(i?s.listener===i:!0)&&(n?s.selector===n:!0);u&&(this.el.removeEventListener(s.eventName,s.handler,!1),this._domEvents.splice(o,1))}return this},r.prototype.undelegateEvents=function(){if(this.el&&this._domEvents){for(var e=this._domEvents.length,n=0;n<e;n++){var i=this._domEvents[n];this.el.removeEventListener(i.eventName,i.handler,!1)}this._domEvents.length=0}return this},r}(Hne.View);var ln;(function(t){function r(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;O<I?re=O+1+(U-I):re=O-I+1;for(var ee=0;ee<re;++ee){var pe=(I+ee)%U;if(V[pe]===X)return pe}return-1}t.firstIndexOf=r;function e(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;I<O?re=I+1+(U-O):re=I-O+1;for(var ee=0;ee<re;++ee){var pe=(I-ee+U)%U;if(V[pe]===X)return pe}return-1}t.lastIndexOf=e;function n(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;O<I?re=O+1+(U-I):re=O-I+1;for(var ee=0;ee<re;++ee){var pe=(I+ee)%U;if(X(V[pe],pe))return pe}return-1}t.findFirstIndex=n;function i(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;I<O?re=I+1+(U-O):re=I-O+1;for(var ee=0;ee<re;++ee){var pe=(I-ee+U)%U;if(X(V[pe],pe))return pe}return-1}t.findLastIndex=i;function a(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=n(V,X,I,O);return U!==-1?V[U]:void 0}t.findFirstValue=a;function o(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=i(V,X,I,O);return U!==-1?V[U]:void 0}t.findLastValue=o;function s(V,X,I,O,U){O===void 0&&(O=0),U===void 0&&(U=-1);var re=V.length;if(re===0)return 0;O<0?O=Math.max(0,O+re):O=Math.min(O,re-1),U<0?U=Math.max(0,U+re):U=Math.min(U,re-1);for(var ee=O,pe=U-O+1;pe>0;){var je=pe>>1,qe=ee+je;I(V[qe],X)<0?(ee=qe+1,pe-=je+1):pe=je}return ee}t.lowerBound=s;function u(V,X,I,O,U){O===void 0&&(O=0),U===void 0&&(U=-1);var re=V.length;if(re===0)return 0;O<0?O=Math.max(0,O+re):O=Math.min(O,re-1),U<0?U=Math.max(0,U+re):U=Math.min(U,re-1);for(var ee=O,pe=U-O+1;pe>0;){var je=pe>>1,qe=ee+je;I(V[qe],X)>0?pe=je:(ee=qe+1,pe-=je+1)}return ee}t.upperBound=u;function c(V,X,I){if(V===X)return!0;if(V.length!==X.length)return!1;for(var O=0,U=V.length;O<U;++O)if(I?!I(V[O],X[O]):V[O]!==X[O])return!1;return!0}t.shallowEqual=c;function h(V,X){X===void 0&&(X={});var I=X.start,O=X.stop,U=X.step;if(U===void 0&&(U=1),U===0)throw new Error("Slice `step` cannot be zero.");var re=V.length;I===void 0?I=U<0?re-1:0:I<0?I=Math.max(I+re,U<0?-1:0):I>=re&&(I=U<0?re-1:re),O===void 0?O=U<0?-1:re:O<0?O=Math.max(O+re,U<0?-1:0):O>=re&&(O=U<0?re-1:re);var ee;U<0&&O>=I||U>0&&I>=O?ee=0:U<0?ee=Math.floor((O-I+1)/U+1):ee=Math.floor((O-I-1)/U+1);for(var pe=[],je=0;je<ee;++je)pe[je]=V[I+je*U];return pe}t.slice=h;function p(V,X,I){var O=V.length;if(!(O<=1)&&(X<0?X=Math.max(0,X+O):X=Math.min(X,O-1),I<0?I=Math.max(0,I+O):I=Math.min(I,O-1),X!==I)){for(var U=V[X],re=X<I?1:-1,ee=X;ee!==I;ee+=re)V[ee]=V[ee+re];V[I]=U}}t.move=p;function v(V,X,I){X===void 0&&(X=0),I===void 0&&(I=-1);var O=V.length;if(!(O<=1))for(X<0?X=Math.max(0,X+O):X=Math.min(X,O-1),I<0?I=Math.max(0,I+O):I=Math.min(I,O-1);X<I;){var U=V[X],re=V[I];V[X++]=re,V[I--]=U}}t.reverse=v;function x(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(!(U<=1)&&(I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1),!(I>=O))){var re=O-I+1;if(X>0?X=X%re:X<0&&(X=(X%re+re)%re),X!==0){var ee=I+X;v(V,I,ee-1),v(V,ee,O),v(V,I,O)}}}t.rotate=x;function E(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U!==0){I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;O<I?re=O+1+(U-I):re=O-I+1;for(var ee=0;ee<re;++ee)V[(I+ee)%U]=X}}t.fill=E;function R(V,X,I){var O=V.length;X<0?X=Math.max(0,X+O):X=Math.min(X,O);for(var U=O;U>X;--U)V[U]=V[U-1];V[X]=I}t.insert=R;function D(V,X){var I=V.length;if(X<0&&(X+=I),!(X<0||X>=I)){for(var O=V[X],U=X+1;U<I;++U)V[U-1]=V[U];return V.length=I-1,O}}t.removeAt=D;function H(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=r(V,X,I,O);return U!==-1&&D(V,U),U}t.removeFirstOf=H;function W(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=e(V,X,I,O);return U!==-1&&D(V,U),U}t.removeLastOf=W;function $(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return 0;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);for(var re=0,ee=0;ee<U;++ee)I<=O&&ee>=I&&ee<=O&&V[ee]===X||O<I&&(ee<=O||ee>=I)&&V[ee]===X?re++:re>0&&(V[ee-re]=V[ee]);return re>0&&(V.length=U-re),re}t.removeAllOf=$;function J(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U,re=n(V,X,I,O);return re!==-1&&(U=D(V,re)),{index:re,value:U}}t.removeFirstWhere=J;function B(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U,re=i(V,X,I,O);return re!==-1&&(U=D(V,re)),{index:re,value:U}}t.removeLastWhere=B;function se(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return 0;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);for(var re=0,ee=0;ee<U;++ee)I<=O&&ee>=I&&ee<=O&&X(V[ee],ee)||O<I&&(ee<=O||ee>=I)&&X(V[ee],ee)?re++:re>0&&(V[ee-re]=V[ee]);return re>0&&(V.length=U-re),re}t.removeAllWhere=se})(ln||(ln={}));function Mf(t){var r;return typeof t.iter=="function"?r=t.iter():r=new QDe(t),r}function Ei(t,r){for(var e=0,n=Mf(t),i;(i=n.next())!==void 0;)if(r(i,e++)===!1)return}function qne(t){for(var r=0,e=[],n=Mf(t),i;(i=n.next())!==void 0;)e[r++]=i;return e}var QDe=function(){function t(r){this._index=0,this._source=r}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},t}(),Q9t=function(){function t(r,e){e===void 0&&(e=Object.keys(r)),this._index=0,this._source=r,this._keys=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source,this._keys);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var r=this._keys[this._index++];return r in this._source?r:this.next()}},t}(),eHt=function(){function t(r,e){e===void 0&&(e=Object.keys(r)),this._index=0,this._source=r,this._keys=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source,this._keys);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var r=this._keys[this._index++];return r in this._source?this._source[r]:this.next()}},t}(),tHt=function(){function t(r,e){e===void 0&&(e=Object.keys(r)),this._index=0,this._source=r,this._keys=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source,this._keys);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var r=this._keys[this._index++];return r in this._source?[r,this._source[r]]:this.next()}},t}(),rHt=function(){function t(r){this._fn=r}return t.prototype.iter=function(){return this},t.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},t.prototype.next=function(){return this._fn.call(void 0)},t}();function TB(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new Lv(Mf(t.map(Mf)))}var Lv=function(){function t(r){this._cloned=!1,this._source=r,this._active=void 0}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source.clone());return r._active=this._active&&this._active.clone(),r._cloned=!0,this._cloned=!0,r},t.prototype.next=function(){if(this._active===void 0){var r=this._source.next();if(r===void 0)return;this._active=this._cloned?r.clone():r}var e=this._active.next();return e!==void 0?e:(this._active=void 0,this.next())},t}();function Ih(){return new eFe}var eFe=function(){function t(){}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t},t.prototype.next=function(){},t}();var nHt=function(){function t(r,e){this._source=r,this._index=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._index)},t.prototype.next=function(){var r=this._source.next();if(r!==void 0)return[this._index++,r]},t}();function Xne(t,r){return new tFe(Mf(t),r)}var tFe=function(){function t(r,e){this._index=0,this._source=r,this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source.clone(),this._fn);return r._index=this._index,r},t.prototype.next=function(){for(var r=this._fn,e=this._source,n;(n=e.next())!==void 0;)if(r(n,this._index++))return n},t}();function W0(t,r){for(var e=0,n=Mf(t),i;(i=n.next())!==void 0;)if(r(i,e++))return i}function Yne(t,r){var e=Mf(t),n=e.next();if(n!==void 0){for(var i=n;(n=e.next())!==void 0;)r(n,i)>0&&(i=n);return i}}function Wd(t,r){return new rFe(Mf(t),r)}var rFe=function(){function t(r,e){this._index=0,this._source=r,this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source.clone(),this._fn);return r._index=this._index,r},t.prototype.next=function(){var r=this._source.next();if(r!==void 0)return this._fn.call(void 0,r,this._index++)},t}();var iHt=function(){function t(r,e,n){this._index=0,this._start=r,this._stop=e,this._step=n,this._length=wB.rangeLength(r,e,n)}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._start,this._stop,this._step);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},t}(),wB;(function(t){function r(e,n,i){return i===0?1/0:e>n&&i>0||e<n&&i<0?0:Math.ceil((n-e)/i)}t.rangeLength=r})(wB||(wB={}));function SB(t,r,e){var n=0,i=Mf(t),a=i.next();if(a===void 0&&e===void 0)throw new TypeError("Reduce of empty iterable with no initial value.");if(a===void 0)return e;var o=i.next();if(o===void 0&&e===void 0)return a;if(o===void 0)return r(e,a,n++);var s;e===void 0?s=r(a,o,n++):s=r(r(e,a,n++),o,n++);for(var u;(u=i.next())!==void 0;)s=r(s,u,n++);return s}function cb(t){return new nFe(t,1)}var nFe=function(){function t(r,e){this._value=r,this._count=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._value,this._count)},t.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},t}();var aHt=function(){function t(r){this._source=r,this._index=r.length-1}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},t}();var oHt=function(){function t(r,e){this._source=r,this._step=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._step)},t.prototype.next=function(){for(var r=this._source.next(),e=this._step-1;e>0;--e)this._source.next();return r},t}(),H0;(function(t){function r(o,s,u){u===void 0&&(u=0);for(var c=new Array(s.length),h=0,p=u,v=s.length;h<v;++h,++p){if(p=o.indexOf(s[h],p),p===-1)return null;c[h]=p}return c}t.findIndices=r;function e(o,s,u){u===void 0&&(u=0);var c=r(o,s,u);if(!c)return null;for(var h=0,p=0,v=c.length;p<v;++p){var x=c[p]-u;h+=x*x}return{score:h,indices:c}}t.matchSumOfSquares=e;function n(o,s,u){u===void 0&&(u=0);var c=r(o,s,u);if(!c)return null;for(var h=0,p=u-1,v=0,x=c.length;v<x;++v){var E=c[v];h+=E-p-1,p=E}return{score:h,indices:c}}t.matchSumOfDeltas=n;function i(o,s,u){for(var c=[],h=0,p=0,v=s.length;h<v;){for(var x=s[h],E=s[h];++h<v&&s[h]===E+1;)E++;p<x&&c.push(o.slice(p,x)),x<E+1&&c.push(u(o.slice(x,E+1))),p=E+1}return p<o.length&&c.push(o.slice(p)),c}t.highlight=i;function a(o,s){return o<s?-1:o>s?1:0}t.cmp=a})(H0||(H0={}));var sHt=function(){function t(r,e){this._source=r,this._count=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._count)},t.prototype.next=function(){if(!(this._count<=0)){var r=this._source.next();if(r!==void 0)return this._count--,r}},t}();var uHt=function(){function t(r){this._source=r}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.map(function(r){return r.clone()}))},t.prototype.next=function(){for(var r=new Array(this._source.length),e=0,n=this._source.length;e<n;++e){var i=this._source[e].next();if(i===void 0)return;r[e]=i}return r},t}();var Kne;(function(t){function r(e){var n=document.body,i=function(a){a.preventDefault(),a.stopPropagation(),a.clipboardData.setData("text",e),n.removeEventListener("copy",i,!0)};n.addEventListener("copy",i,!0),document.execCommand("copy")}t.copyText=r})(Kne||(Kne={}));var Xa;(function(t){function r(a){var o=window.getComputedStyle(a),s=parseFloat(o.borderTopWidth)||0,u=parseFloat(o.borderLeftWidth)||0,c=parseFloat(o.borderRightWidth)||0,h=parseFloat(o.borderBottomWidth)||0,p=parseFloat(o.paddingTop)||0,v=parseFloat(o.paddingLeft)||0,x=parseFloat(o.paddingRight)||0,E=parseFloat(o.paddingBottom)||0,R=u+v+x+c,D=s+p+E+h;return{borderTop:s,borderLeft:u,borderRight:c,borderBottom:h,paddingTop:p,paddingLeft:v,paddingRight:x,paddingBottom:E,horizontalSum:R,verticalSum:D}}t.boxSizing=r;function e(a){var o=window.getComputedStyle(a),s=parseFloat(o.minWidth)||0,u=parseFloat(o.minHeight)||0,c=parseFloat(o.maxWidth)||1/0,h=parseFloat(o.maxHeight)||1/0;return c=Math.max(s,c),h=Math.max(u,h),{minWidth:s,minHeight:u,maxWidth:c,maxHeight:h}}t.sizeLimits=e;function n(a,o,s){var u=a.getBoundingClientRect();return o>=u.left&&o<u.right&&s>=u.top&&s<u.bottom}t.hitTest=n;function i(a,o){var s=a.getBoundingClientRect(),u=o.getBoundingClientRect();if(!(u.top<=s.top&&u.bottom>=s.bottom)){if(u.top<s.top&&u.height<=s.height){a.scrollTop-=s.top-u.top;return}if(u.bottom>s.bottom&&u.height>=s.height){a.scrollTop-=s.top-u.top;return}if(u.top<s.top&&u.height>s.height){a.scrollTop-=s.bottom-u.bottom;return}if(u.bottom>s.bottom&&u.height<s.height){a.scrollTop-=s.bottom-u.bottom;return}}}t.scrollIntoViewIfNeeded=i})(Xa||(Xa={}));var pl;(function(t){t.IS_MAC=!!navigator.platform.match(/Mac/i),t.IS_WIN=!!navigator.platform.match(/Win/i),t.IS_IE=/Trident/.test(navigator.userAgent),t.IS_EDGE=/Edge/.test(navigator.userAgent);function r(e){return t.IS_MAC?e.metaKey:e.ctrlKey}t.accelKey=r})(pl||(pl={}));var Rf;(function(t){function r(i){if(i in If.specificityCache)return If.specificityCache[i];var a=If.calculateSingle(i);return If.specificityCache[i]=a}t.calculateSpecificity=r;function e(i){if(i in If.validityCache)return If.validityCache[i];var a=!0;try{If.testElem.querySelector(i)}catch{a=!1}return If.validityCache[i]=a}t.isValid=e;function n(i,a){return If.protoMatchFunc.call(i,a)}t.matches=n})(Rf||(Rf={}));var If;(function(t){t.specificityCache=Object.create(null),t.validityCache=Object.create(null),t.testElem=document.createElement("div"),t.protoMatchFunc=function(){var h=Element.prototype;return h.matches||h.matchesSelector||h.mozMatchesSelector||h.msMatchesSelector||h.oMatchesSelector||h.webkitMatchesSelector||function(p){var v=this,x=v.ownerDocument?v.ownerDocument.querySelectorAll(p):[];return Array.prototype.indexOf.call(x,v)!==-1}}();function r(h){h=h.split(",",1)[0];var p=0,v=0,x=0;function E(R){var D=h.match(R);return D===null?!1:(h=h.slice(D[0].length),!0)}for(h=h.replace(c," $1 ");h.length>0;){if(E(e)){p++;continue}if(E(n)){v++;continue}if(E(i)){v++;continue}if(E(o)){x++;continue}if(E(s)){v++;continue}if(E(a)){x++;continue}if(!E(u))return 0}return p=Math.min(p,255),v=Math.min(v,255),x=Math.min(x,255),p<<16|v<<8|x}t.calculateSingle=r;var e=/^#[^\s\+>~#\.\[:]+/,n=/^\.[^\s\+>~#\.\[:]+/,i=/^\[[^\]]+\]/,a=/^[^\s\+>~#\.\[:]+/,o=/^(::[^\s\+>~#\.\[:]+|:first-line|:first-letter|:before|:after)/,s=/^:[^\s\+>~#\.\[:]+/,u=/^[\s\+>~\*]+/,c=/:not\(([^\)]+)\)/g})(If||(If={}));var fb;(function(t){function r(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;O<I?re=O+1+(U-I):re=O-I+1;for(var ee=0;ee<re;++ee){var pe=(I+ee)%U;if(V[pe]===X)return pe}return-1}t.firstIndexOf=r;function e(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;I<O?re=I+1+(U-O):re=I-O+1;for(var ee=0;ee<re;++ee){var pe=(I-ee+U)%U;if(V[pe]===X)return pe}return-1}t.lastIndexOf=e;function n(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;O<I?re=O+1+(U-I):re=O-I+1;for(var ee=0;ee<re;++ee){var pe=(I+ee)%U;if(X(V[pe],pe))return pe}return-1}t.findFirstIndex=n;function i(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;I<O?re=I+1+(U-O):re=I-O+1;for(var ee=0;ee<re;++ee){var pe=(I-ee+U)%U;if(X(V[pe],pe))return pe}return-1}t.findLastIndex=i;function a(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=n(V,X,I,O);return U!==-1?V[U]:void 0}t.findFirstValue=a;function o(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=i(V,X,I,O);return U!==-1?V[U]:void 0}t.findLastValue=o;function s(V,X,I,O,U){O===void 0&&(O=0),U===void 0&&(U=-1);var re=V.length;if(re===0)return 0;O<0?O=Math.max(0,O+re):O=Math.min(O,re-1),U<0?U=Math.max(0,U+re):U=Math.min(U,re-1);for(var ee=O,pe=U-O+1;pe>0;){var je=pe>>1,qe=ee+je;I(V[qe],X)<0?(ee=qe+1,pe-=je+1):pe=je}return ee}t.lowerBound=s;function u(V,X,I,O,U){O===void 0&&(O=0),U===void 0&&(U=-1);var re=V.length;if(re===0)return 0;O<0?O=Math.max(0,O+re):O=Math.min(O,re-1),U<0?U=Math.max(0,U+re):U=Math.min(U,re-1);for(var ee=O,pe=U-O+1;pe>0;){var je=pe>>1,qe=ee+je;I(V[qe],X)>0?pe=je:(ee=qe+1,pe-=je+1)}return ee}t.upperBound=u;function c(V,X,I){if(V===X)return!0;if(V.length!==X.length)return!1;for(var O=0,U=V.length;O<U;++O)if(I?!I(V[O],X[O]):V[O]!==X[O])return!1;return!0}t.shallowEqual=c;function h(V,X){X===void 0&&(X={});var I=X.start,O=X.stop,U=X.step;if(U===void 0&&(U=1),U===0)throw new Error("Slice `step` cannot be zero.");var re=V.length;I===void 0?I=U<0?re-1:0:I<0?I=Math.max(I+re,U<0?-1:0):I>=re&&(I=U<0?re-1:re),O===void 0?O=U<0?-1:re:O<0?O=Math.max(O+re,U<0?-1:0):O>=re&&(O=U<0?re-1:re);var ee;U<0&&O>=I||U>0&&I>=O?ee=0:U<0?ee=Math.floor((O-I+1)/U+1):ee=Math.floor((O-I-1)/U+1);for(var pe=[],je=0;je<ee;++je)pe[je]=V[I+je*U];return pe}t.slice=h;function p(V,X,I){var O=V.length;if(!(O<=1)&&(X<0?X=Math.max(0,X+O):X=Math.min(X,O-1),I<0?I=Math.max(0,I+O):I=Math.min(I,O-1),X!==I)){for(var U=V[X],re=X<I?1:-1,ee=X;ee!==I;ee+=re)V[ee]=V[ee+re];V[I]=U}}t.move=p;function v(V,X,I){X===void 0&&(X=0),I===void 0&&(I=-1);var O=V.length;if(!(O<=1))for(X<0?X=Math.max(0,X+O):X=Math.min(X,O-1),I<0?I=Math.max(0,I+O):I=Math.min(I,O-1);X<I;){var U=V[X],re=V[I];V[X++]=re,V[I--]=U}}t.reverse=v;function x(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(!(U<=1)&&(I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1),!(I>=O))){var re=O-I+1;if(X>0?X=X%re:X<0&&(X=(X%re+re)%re),X!==0){var ee=I+X;v(V,I,ee-1),v(V,ee,O),v(V,I,O)}}}t.rotate=x;function E(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U!==0){I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;O<I?re=O+1+(U-I):re=O-I+1;for(var ee=0;ee<re;++ee)V[(I+ee)%U]=X}}t.fill=E;function R(V,X,I){var O=V.length;X<0?X=Math.max(0,X+O):X=Math.min(X,O);for(var U=O;U>X;--U)V[U]=V[U-1];V[X]=I}t.insert=R;function D(V,X){var I=V.length;if(X<0&&(X+=I),!(X<0||X>=I)){for(var O=V[X],U=X+1;U<I;++U)V[U-1]=V[U];return V.length=I-1,O}}t.removeAt=D;function H(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=r(V,X,I,O);return U!==-1&&D(V,U),U}t.removeFirstOf=H;function W(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=e(V,X,I,O);return U!==-1&&D(V,U),U}t.removeLastOf=W;function $(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return 0;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);for(var re=0,ee=0;ee<U;++ee)I<=O&&ee>=I&&ee<=O&&V[ee]===X||O<I&&(ee<=O||ee>=I)&&V[ee]===X?re++:re>0&&(V[ee-re]=V[ee]);return re>0&&(V.length=U-re),re}t.removeAllOf=$;function J(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U,re=n(V,X,I,O);return re!==-1&&(U=D(V,re)),{index:re,value:U}}t.removeFirstWhere=J;function B(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U,re=i(V,X,I,O);return re!==-1&&(U=D(V,re)),{index:re,value:U}}t.removeLastWhere=B;function se(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return 0;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);for(var re=0,ee=0;ee<U;++ee)I<=O&&ee>=I&&ee<=O&&X(V[ee],ee)||O<I&&(ee<=O||ee>=I)&&X(V[ee],ee)?re++:re>0&&(V[ee-re]=V[ee]);return re>0&&(V.length=U-re),re}t.removeAllWhere=se})(fb||(fb={}));function CB(t){var r;return typeof t.iter=="function"?r=t.iter():r=new iFe(t),r}function $ne(t,r){for(var e=0,n=CB(t),i;(i=n.next())!==void 0;)if(r(i,e++)===!1)return}function Jne(t,r){for(var e=0,n=CB(t),i;(i=n.next())!==void 0;)if(!r(i,e++))return!1;return!0}function Qne(t,r){for(var e=0,n=CB(t),i;(i=n.next())!==void 0;)if(r(i,e++))return!0;return!1}var iFe=function(){function t(r){this._index=0,this._source=r}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},t}(),fHt=function(){function t(r,e){e===void 0&&(e=Object.keys(r)),this._index=0,this._source=r,this._keys=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source,this._keys);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var r=this._keys[this._index++];return r in this._source?r:this.next()}},t}(),hHt=function(){function t(r,e){e===void 0&&(e=Object.keys(r)),this._index=0,this._source=r,this._keys=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source,this._keys);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var r=this._keys[this._index++];return r in this._source?this._source[r]:this.next()}},t}(),pHt=function(){function t(r,e){e===void 0&&(e=Object.keys(r)),this._index=0,this._source=r,this._keys=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source,this._keys);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var r=this._keys[this._index++];return r in this._source?[r,this._source[r]]:this.next()}},t}(),dHt=function(){function t(r){this._fn=r}return t.prototype.iter=function(){return this},t.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},t.prototype.next=function(){return this._fn.call(void 0)},t}();var mHt=function(){function t(r){this._cloned=!1,this._source=r,this._active=void 0}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source.clone());return r._active=this._active&&this._active.clone(),r._cloned=!0,this._cloned=!0,r},t.prototype.next=function(){if(this._active===void 0){var r=this._source.next();if(r===void 0)return;this._active=this._cloned?r.clone():r}var e=this._active.next();return e!==void 0?e:(this._active=void 0,this.next())},t}();var vHt=function(){function t(){}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t},t.prototype.next=function(){},t}();var gHt=function(){function t(r,e){this._source=r,this._index=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._index)},t.prototype.next=function(){var r=this._source.next();if(r!==void 0)return[this._index++,r]},t}();var AHt=function(){function t(r,e){this._index=0,this._source=r,this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source.clone(),this._fn);return r._index=this._index,r},t.prototype.next=function(){for(var r=this._fn,e=this._source,n;(n=e.next())!==void 0;)if(r(n,this._index++))return n},t}();var yHt=function(){function t(r,e){this._index=0,this._source=r,this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source.clone(),this._fn);return r._index=this._index,r},t.prototype.next=function(){var r=this._source.next();if(r!==void 0)return this._fn.call(void 0,r,this._index++)},t}();var _Ht=function(){function t(r,e,n){this._index=0,this._start=r,this._stop=e,this._step=n,this._length=EB.rangeLength(r,e,n)}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._start,this._stop,this._step);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},t}(),EB;(function(t){function r(e,n,i){return i===0?1/0:e>n&&i>0||e<n&&i<0?0:Math.ceil((n-e)/i)}t.rangeLength=r})(EB||(EB={}));var bHt=function(){function t(r,e){this._value=r,this._count=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._value,this._count)},t.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},t}();function eie(t){var r;return typeof t.retro=="function"?r=t.retro():r=new aFe(t),r}var aFe=function(){function t(r){this._source=r,this._index=r.length-1}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},t}();var xHt=function(){function t(r,e){this._source=r,this._step=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._step)},t.prototype.next=function(){for(var r=this._source.next(),e=this._step-1;e>0;--e)this._source.next();return r},t}(),Zne;(function(t){function r(o,s,u){u===void 0&&(u=0);for(var c=new Array(s.length),h=0,p=u,v=s.length;h<v;++h,++p){if(p=o.indexOf(s[h],p),p===-1)return null;c[h]=p}return c}t.findIndices=r;function e(o,s,u){u===void 0&&(u=0);var c=r(o,s,u);if(!c)return null;for(var h=0,p=0,v=c.length;p<v;++p){var x=c[p]-u;h+=x*x}return{score:h,indices:c}}t.matchSumOfSquares=e;function n(o,s,u){u===void 0&&(u=0);var c=r(o,s,u);if(!c)return null;for(var h=0,p=u-1,v=0,x=c.length;v<x;++v){var E=c[v];h+=E-p-1,p=E}return{score:h,indices:c}}t.matchSumOfDeltas=n;function i(o,s,u){for(var c=[],h=0,p=0,v=s.length;h<v;){for(var x=s[h],E=s[h];++h<v&&s[h]===E+1;)E++;p<x&&c.push(o.slice(p,x)),x<E+1&&c.push(u(o.slice(x,E+1))),p=E+1}return p<o.length&&c.push(o.slice(p)),c}t.highlight=i;function a(o,s){return o<s?-1:o>s?1:0}t.cmp=a})(Zne||(Zne={}));var wHt=function(){function t(r,e){this._source=r,this._count=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._count)},t.prototype.next=function(){if(!(this._count<=0)){var r=this._source.next();if(r!==void 0)return this._count--,r}},t}();var THt=function(){function t(r){this._source=r}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.map(function(r){return r.clone()}))},t.prototype.next=function(){for(var r=new Array(this._source.length),e=0,n=this._source.length;e<n;++e){var i=this._source[e].next();if(i===void 0)return;r[e]=i}return r},t}();var dl;(function(t){function r(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;O<I?re=O+1+(U-I):re=O-I+1;for(var ee=0;ee<re;++ee){var pe=(I+ee)%U;if(V[pe]===X)return pe}return-1}t.firstIndexOf=r;function e(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;I<O?re=I+1+(U-O):re=I-O+1;for(var ee=0;ee<re;++ee){var pe=(I-ee+U)%U;if(V[pe]===X)return pe}return-1}t.lastIndexOf=e;function n(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;O<I?re=O+1+(U-I):re=O-I+1;for(var ee=0;ee<re;++ee){var pe=(I+ee)%U;if(X(V[pe],pe))return pe}return-1}t.findFirstIndex=n;function i(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;I<O?re=I+1+(U-O):re=I-O+1;for(var ee=0;ee<re;++ee){var pe=(I-ee+U)%U;if(X(V[pe],pe))return pe}return-1}t.findLastIndex=i;function a(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=n(V,X,I,O);return U!==-1?V[U]:void 0}t.findFirstValue=a;function o(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=i(V,X,I,O);return U!==-1?V[U]:void 0}t.findLastValue=o;function s(V,X,I,O,U){O===void 0&&(O=0),U===void 0&&(U=-1);var re=V.length;if(re===0)return 0;O<0?O=Math.max(0,O+re):O=Math.min(O,re-1),U<0?U=Math.max(0,U+re):U=Math.min(U,re-1);for(var ee=O,pe=U-O+1;pe>0;){var je=pe>>1,qe=ee+je;I(V[qe],X)<0?(ee=qe+1,pe-=je+1):pe=je}return ee}t.lowerBound=s;function u(V,X,I,O,U){O===void 0&&(O=0),U===void 0&&(U=-1);var re=V.length;if(re===0)return 0;O<0?O=Math.max(0,O+re):O=Math.min(O,re-1),U<0?U=Math.max(0,U+re):U=Math.min(U,re-1);for(var ee=O,pe=U-O+1;pe>0;){var je=pe>>1,qe=ee+je;I(V[qe],X)>0?pe=je:(ee=qe+1,pe-=je+1)}return ee}t.upperBound=u;function c(V,X,I){if(V===X)return!0;if(V.length!==X.length)return!1;for(var O=0,U=V.length;O<U;++O)if(I?!I(V[O],X[O]):V[O]!==X[O])return!1;return!0}t.shallowEqual=c;function h(V,X){X===void 0&&(X={});var I=X.start,O=X.stop,U=X.step;if(U===void 0&&(U=1),U===0)throw new Error("Slice `step` cannot be zero.");var re=V.length;I===void 0?I=U<0?re-1:0:I<0?I=Math.max(I+re,U<0?-1:0):I>=re&&(I=U<0?re-1:re),O===void 0?O=U<0?-1:re:O<0?O=Math.max(O+re,U<0?-1:0):O>=re&&(O=U<0?re-1:re);var ee;U<0&&O>=I||U>0&&I>=O?ee=0:U<0?ee=Math.floor((O-I+1)/U+1):ee=Math.floor((O-I-1)/U+1);for(var pe=[],je=0;je<ee;++je)pe[je]=V[I+je*U];return pe}t.slice=h;function p(V,X,I){var O=V.length;if(!(O<=1)&&(X<0?X=Math.max(0,X+O):X=Math.min(X,O-1),I<0?I=Math.max(0,I+O):I=Math.min(I,O-1),X!==I)){for(var U=V[X],re=X<I?1:-1,ee=X;ee!==I;ee+=re)V[ee]=V[ee+re];V[I]=U}}t.move=p;function v(V,X,I){X===void 0&&(X=0),I===void 0&&(I=-1);var O=V.length;if(!(O<=1))for(X<0?X=Math.max(0,X+O):X=Math.min(X,O-1),I<0?I=Math.max(0,I+O):I=Math.min(I,O-1);X<I;){var U=V[X],re=V[I];V[X++]=re,V[I--]=U}}t.reverse=v;function x(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(!(U<=1)&&(I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1),!(I>=O))){var re=O-I+1;if(X>0?X=X%re:X<0&&(X=(X%re+re)%re),X!==0){var ee=I+X;v(V,I,ee-1),v(V,ee,O),v(V,I,O)}}}t.rotate=x;function E(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U!==0){I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;O<I?re=O+1+(U-I):re=O-I+1;for(var ee=0;ee<re;++ee)V[(I+ee)%U]=X}}t.fill=E;function R(V,X,I){var O=V.length;X<0?X=Math.max(0,X+O):X=Math.min(X,O);for(var U=O;U>X;--U)V[U]=V[U-1];V[X]=I}t.insert=R;function D(V,X){var I=V.length;if(X<0&&(X+=I),!(X<0||X>=I)){for(var O=V[X],U=X+1;U<I;++U)V[U-1]=V[U];return V.length=I-1,O}}t.removeAt=D;function H(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=r(V,X,I,O);return U!==-1&&D(V,U),U}t.removeFirstOf=H;function W(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=e(V,X,I,O);return U!==-1&&D(V,U),U}t.removeLastOf=W;function $(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return 0;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);for(var re=0,ee=0;ee<U;++ee)I<=O&&ee>=I&&ee<=O&&V[ee]===X||O<I&&(ee<=O||ee>=I)&&V[ee]===X?re++:re>0&&(V[ee-re]=V[ee]);return re>0&&(V.length=U-re),re}t.removeAllOf=$;function J(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U,re=n(V,X,I,O);return re!==-1&&(U=D(V,re)),{index:re,value:U}}t.removeFirstWhere=J;function B(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U,re=i(V,X,I,O);return re!==-1&&(U=D(V,re)),{index:re,value:U}}t.removeLastWhere=B;function se(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return 0;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);for(var re=0,ee=0;ee<U;++ee)I<=O&&ee>=I&&ee<=O&&X(V[ee],ee)||O<I&&(ee<=O||ee>=I)&&X(V[ee],ee)?re++:re>0&&(V[ee-re]=V[ee]);return re>0&&(V.length=U-re),re}t.removeAllWhere=se})(dl||(dl={}));function oFe(t){var r;return typeof t.iter=="function"?r=t.iter():r=new sFe(t),r}function yE(t,r){for(var e=0,n=oFe(t),i;(i=n.next())!==void 0;)if(r(i,e++)===!1)return}var sFe=function(){function t(r){this._index=0,this._source=r}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},t}(),EHt=function(){function t(r,e){e===void 0&&(e=Object.keys(r)),this._index=0,this._source=r,this._keys=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source,this._keys);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var r=this._keys[this._index++];return r in this._source?r:this.next()}},t}(),CHt=function(){function t(r,e){e===void 0&&(e=Object.keys(r)),this._index=0,this._source=r,this._keys=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source,this._keys);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var r=this._keys[this._index++];return r in this._source?this._source[r]:this.next()}},t}(),PHt=function(){function t(r,e){e===void 0&&(e=Object.keys(r)),this._index=0,this._source=r,this._keys=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source,this._keys);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var r=this._keys[this._index++];return r in this._source?[r,this._source[r]]:this.next()}},t}(),OHt=function(){function t(r){this._fn=r}return t.prototype.iter=function(){return this},t.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},t.prototype.next=function(){return this._fn.call(void 0)},t}();var MHt=function(){function t(r){this._cloned=!1,this._source=r,this._active=void 0}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source.clone());return r._active=this._active&&this._active.clone(),r._cloned=!0,this._cloned=!0,r},t.prototype.next=function(){if(this._active===void 0){var r=this._source.next();if(r===void 0)return;this._active=this._cloned?r.clone():r}var e=this._active.next();return e!==void 0?e:(this._active=void 0,this.next())},t}();function OB(){return new uFe}var uFe=function(){function t(){}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t},t.prototype.next=function(){},t}();var IHt=function(){function t(r,e){this._source=r,this._index=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._index)},t.prototype.next=function(){var r=this._source.next();if(r!==void 0)return[this._index++,r]},t}();var RHt=function(){function t(r,e){this._index=0,this._source=r,this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source.clone(),this._fn);return r._index=this._index,r},t.prototype.next=function(){for(var r=this._fn,e=this._source,n;(n=e.next())!==void 0;)if(r(n,this._index++))return n},t}();var LHt=function(){function t(r,e){this._index=0,this._source=r,this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source.clone(),this._fn);return r._index=this._index,r},t.prototype.next=function(){var r=this._source.next();if(r!==void 0)return this._fn.call(void 0,r,this._index++)},t}();var kHt=function(){function t(r,e,n){this._index=0,this._start=r,this._stop=e,this._step=n,this._length=PB.rangeLength(r,e,n)}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._start,this._stop,this._step);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},t}(),PB;(function(t){function r(e,n,i){return i===0?1/0:e>n&&i>0||e<n&&i<0?0:Math.ceil((n-e)/i)}t.rangeLength=r})(PB||(PB={}));var BHt=function(){function t(r,e){this._value=r,this._count=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._value,this._count)},t.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},t}();var DHt=function(){function t(r){this._source=r,this._index=r.length-1}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},t}();var FHt=function(){function t(r,e){this._source=r,this._step=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._step)},t.prototype.next=function(){for(var r=this._source.next(),e=this._step-1;e>0;--e)this._source.next();return r},t}(),tie;(function(t){function r(o,s,u){u===void 0&&(u=0);for(var c=new Array(s.length),h=0,p=u,v=s.length;h<v;++h,++p){if(p=o.indexOf(s[h],p),p===-1)return null;c[h]=p}return c}t.findIndices=r;function e(o,s,u){u===void 0&&(u=0);var c=r(o,s,u);if(!c)return null;for(var h=0,p=0,v=c.length;p<v;++p){var x=c[p]-u;h+=x*x}return{score:h,indices:c}}t.matchSumOfSquares=e;function n(o,s,u){u===void 0&&(u=0);var c=r(o,s,u);if(!c)return null;for(var h=0,p=u-1,v=0,x=c.length;v<x;++v){var E=c[v];h+=E-p-1,p=E}return{score:h,indices:c}}t.matchSumOfDeltas=n;function i(o,s,u){for(var c=[],h=0,p=0,v=s.length;h<v;){for(var x=s[h],E=s[h];++h<v&&s[h]===E+1;)E++;p<x&&c.push(o.slice(p,x)),x<E+1&&c.push(u(o.slice(x,E+1))),p=E+1}return p<o.length&&c.push(o.slice(p)),c}t.highlight=i;function a(o,s){return o<s?-1:o>s?1:0}t.cmp=a})(tie||(tie={}));var NHt=function(){function t(r,e){this._source=r,this._count=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._count)},t.prototype.next=function(){if(!(this._count<=0)){var r=this._source.next();if(r!==void 0)return this._count--,r}},t}();var zHt=function(){function t(r){this._source=r}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.map(function(r){return r.clone()}))},t.prototype.next=function(){for(var r=new Array(this._source.length),e=0,n=this._source.length;e<n;++e){var i=this._source[e].next();if(i===void 0)return;r[e]=i}return r},t}();var rie=function(){function t(r){this._root=new Vs.LeafNode,this.cmp=r}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this._root.size===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._root.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){var r=Vs.firstLeaf(this._root);return r.size>0?r.items[0]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){var r=Vs.lastLeaf(this._root);return r.size>0?r.items[r.size-1]:void 0},enumerable:!0,configurable:!0}),t.prototype.iter=function(){return Vs.iterItems(this._root)},t.prototype.retro=function(){return Vs.retroItems(this._root)},t.prototype.slice=function(r,e){return Vs.sliceItems(this._root,r,e)},t.prototype.retroSlice=function(r,e){return Vs.retroSliceItems(this._root,r,e)},t.prototype.at=function(r){return Vs.itemAt(this._root,r)},t.prototype.has=function(r,e){return Vs.hasItem(this._root,r,e)},t.prototype.indexOf=function(r,e){return Vs.indexOf(this._root,r,e)},t.prototype.get=function(r,e){return Vs.getItem(this._root,r,e)},t.prototype.assign=function(r){this.clear(),this.update(r)},t.prototype.insert=function(r){var e=Vs.insertItem(this._root,r,this.cmp);return this._root=Vs.maybeSplitRoot(this._root),e},t.prototype.update=function(r){var e=this;yE(r,function(n){e.insert(n)})},t.prototype.delete=function(r,e){var n=Vs.deleteItem(this._root,r,e);return this._root=Vs.maybeExtractRoot(this._root),n},t.prototype.remove=function(r){var e=Vs.removeItem(this._root,r);return this._root=Vs.maybeExtractRoot(this._root),e},t.prototype.clear=function(){Vs.clear(this._root),this._root=new Vs.LeafNode},t}();(function(t){function r(e,n){var i=new t(n);return i.assign(e),i}t.from=r})(rie||(rie={}));var Vs;(function(t){var r=function(){function ee(){this.items=[],this.sizes=[],this.children=[]}return Object.defineProperty(ee.prototype,"type",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(ee.prototype,"size",{get:function(){return this.sizes[this.sizes.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(ee.prototype,"width",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),ee}();t.BranchNode=r;var e=function(){function ee(){this.next=null,this.prev=null,this.items=[]}return Object.defineProperty(ee.prototype,"type",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(ee.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(ee.prototype,"width",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),ee}();t.LeafNode=e;function n(ee){for(;ee.type===0;)ee=ee.children[0];return ee}t.firstLeaf=n;function i(ee){for(;ee.type===0;)ee=ee.children[ee.children.length-1];return ee}t.lastLeaf=i;function a(ee){var pe=n(ee);return new B(pe,0,-1)}t.iterItems=a;function o(ee){var pe=i(ee);return new se(pe,pe.size-1,-1)}t.retroItems=o;function s(ee,pe,je){pe===void 0?pe=0:pe<0?pe=Math.max(0,pe+ee.size):pe=Math.min(pe,ee.size),je===void 0?je=ee.size:je<0?je=Math.max(0,je+ee.size):je=Math.min(je,ee.size);var qe=Math.max(0,je-pe);if(qe===0)return OB();for(;ee.type===0;){var We=V(ee.sizes,pe);We>0&&(pe-=ee.sizes[We-1]),ee=ee.children[We]}return new B(ee,pe,qe)}t.sliceItems=s;function u(ee,pe,je){pe===void 0?pe=ee.size-1:pe<0?pe=Math.max(-1,pe+ee.size):pe=Math.min(pe,ee.size-1),je===void 0?je=-1:je<0?je=Math.max(-1,je+ee.size):je=Math.min(je,ee.size-1);var qe=Math.max(0,pe-je);if(qe===0)return OB();for(;ee.type===0;){var We=V(ee.sizes,pe);We>0&&(pe-=ee.sizes[We-1]),ee=ee.children[We]}return new se(ee,pe,qe)}t.retroSliceItems=u;function c(ee,pe){if(pe<0&&(pe+=ee.size),!(pe<0||pe>=ee.size)){for(;ee.type===0;){var je=V(ee.sizes,pe);je>0&&(pe-=ee.sizes[je-1]),ee=ee.children[je]}return ee.items[pe]}}t.itemAt=c;function h(ee,pe,je){for(;ee.type===0;){var qe=X(ee.items,pe,je);ee=ee.children[qe]}var We=I(ee.items,pe,je);return We>=0}t.hasItem=h;function p(ee,pe,je){for(var qe=0;ee.type===0;){var We=X(ee.items,pe,je);We>0&&(qe+=ee.sizes[We-1]),ee=ee.children[We]}var ot=I(ee.items,pe,je);return ot>=0?qe+ot:-qe+ot}t.indexOf=p;function v(ee,pe,je){for(;ee.type===0;){var qe=X(ee.items,pe,je);ee=ee.children[qe]}var We=I(ee.items,pe,je);return We>=0?ee.items[We]:void 0}t.getItem=v;function x(ee,pe,je){if(ee.type===1){var qe=I(ee.items,pe,je),We;return qe>=0?(We=ee.items[qe],ee.items[qe]=pe):(We=void 0,dl.insert(ee.items,-qe-1,pe)),We}var ot=X(ee.items,pe,je),gt=ee.children[ot],Pt=gt.size,Dt=x(gt,pe,je),nr=gt.size;if(ee.items[ot]=gt.items[0],Pt===nr)return Dt;if(gt.width>$){var Nt=U(gt);dl.insert(ee.children,ot+1,Nt),dl.insert(ee.items,ot+1,Nt.items[0])}return O(ee,ot),Dt}t.insertItem=x;function E(ee,pe,je){if(ee.type===1){var qe=I(ee.items,pe,je);return qe<0?void 0:dl.removeAt(ee.items,qe)}var We=X(ee.items,pe,je),ot=ee.children[We],gt=ot.size,Pt=E(ot,pe,je),Dt=ot.size;return gt===Dt||(ee.items[We]=ot.items[0],ot.width<J&&(We=re(ee,We)),O(ee,We)),Pt}t.deleteItem=E;function R(ee,pe){if(pe<0&&(pe+=ee.size),!(pe<0||pe>=ee.size)){if(ee.type===1)return dl.removeAt(ee.items,pe);var je=V(ee.sizes,pe);je>0&&(pe-=ee.sizes[je]);var qe=ee.children[je],We=R(qe,pe);return ee.items[je]=qe.items[0],qe.width<J&&(je=re(ee,je)),O(ee,je),We}}t.removeItem=R;function D(ee){ee.type===0?(yE(ee.children,D),ee.children.length=0,ee.sizes.length=0,ee.items.length=0):(ee.items.length=0,ee.next=null,ee.prev=null)}t.clear=D;function H(ee){if(ee.width<=$)return ee;var pe=new r,je=U(ee);return pe.sizes[0]=ee.size,pe.sizes[1]=ee.size+je.size,pe.children[0]=ee,pe.children[1]=je,pe.items[0]=ee.items[0],pe.items[1]=je.items[0],pe}t.maybeSplitRoot=H;function W(ee){if(ee.type===1||ee.children.length>1)return ee;var pe=ee.children.pop();return D(ee),pe}t.maybeExtractRoot=W;var $=32,J=$>>1,B=function(){function ee(pe,je,qe){this._node=pe,this._index=je,this._count=qe}return ee.prototype.iter=function(){return this},ee.prototype.clone=function(){return new ee(this._node,this._index,this._count)},ee.prototype.next=function(){if(!(this._node===null||this._count===0))return this._index>=this._node.size?(this._node=this._node.next,this._index=0,this.next()):(this._count>0&&this._count--,this._node.items[this._index++])},ee}(),se=function(){function ee(pe,je,qe){this._node=pe,this._index=je,this._count=qe}return ee.prototype.iter=function(){return this},ee.prototype.clone=function(){return new ee(this._node,this._index,this._count)},ee.prototype.next=function(){if(!(this._node===null||this._count===0))return this._index>=this._node.size&&(this._index=this._node.size-1),this._index<0?(this._node=this._node.prev,this._index=this._node?this._node.size-1:-1,this.next()):(this._count>0&&this._count--,this._node.items[this._index--])},ee}();function V(ee,pe){for(var je=ee.length,qe=0;qe<je;++qe)if(ee[qe]>pe)return qe;return je-1}function X(ee,pe,je){for(var qe=ee.length,We=1;We<qe;++We)if(je(ee[We],pe)>0)return We-1;return qe-1}function I(ee,pe,je){for(var qe=ee.length,We=0;We<qe;++We){var ot=je(ee[We],pe);if(ot===0)return We;if(ot>0)return-We-1}return-qe-1}function O(ee,pe){for(var je=ee.sizes,qe=ee.children,We=pe>0?je[pe-1]:0,ot=qe.length;pe<ot;++pe)We=je[pe]=We+qe[pe].size;je.length=qe.length}function U(ee){if(ee.type===1){for(var pe=new e,je=ee.items,qe=pe.items,We=J,ot=je.length;We<ot;++We)qe.push(je[We]);return je.length=J,ee.next&&(ee.next.prev=pe),pe.next=ee.next,pe.prev=ee,ee.next=pe,pe}for(var gt=new r,Pt=ee.children,Dt=gt.children,We=J,ot=Pt.length;We<ot;++We)Dt.push(Pt[We]);Pt.length=J;for(var nr=ee.items,Nt=gt.items,We=J,ot=nr.length;We<ot;++We)Nt.push(nr[We]);return nr.length=J,O(ee,J),O(gt,0),gt}function re(ee,pe){var je,qe,We,ot,gt,Pt,Dt=ee.children[pe],nr=pe===0?ee.children[pe+1]:ee.children[pe-1],Nt=pe===0,Ut=Dt.type===1,Or=nr.width>J;if(Ut&&Or&&Nt){var he=Dt,xe=nr;return he.items.push(xe.items.shift()),ee.items[pe+1]=xe.items[0],pe}if(Ut&&Or&&!Nt){var he=Dt,xe=nr;return he.items.unshift(xe.items.pop()),ee.items[pe]=he.items[0],pe-1}if(Ut&&!Or&&Nt){var he=Dt,xe=nr;return(je=xe.items).unshift.apply(je,he.items),dl.removeAt(ee.children,pe),dl.removeAt(ee.items,pe+1),he.prev&&(he.prev.next=xe),xe.prev=he.prev,D(he),pe}if(Ut&&!Or&&!Nt){var he=Dt,xe=nr;return(qe=xe.items).push.apply(qe,he.items),dl.removeAt(ee.children,pe),dl.removeAt(ee.items,pe),he.next&&(he.next.prev=xe),xe.next=he.next,D(he),pe-1}if(!Ut&&Or&&Nt){var he=Dt,xe=nr;return he.children.push(xe.children.shift()),he.items.push(xe.items.shift()),ee.items[pe+1]=xe.items[0],O(he,he.width-1),O(xe,0),pe}if(!Ut&&Or&&!Nt){var he=Dt,xe=nr;return he.children.unshift(xe.children.pop()),he.items.unshift(xe.items.pop()),ee.items[pe]=he.items[0],O(he,0),O(xe,xe.width-1),pe-1}if(!Ut&&!Or&&Nt){var he=Dt,xe=nr;return(We=xe.children).unshift.apply(We,he.children),(ot=xe.items).unshift.apply(ot,he.items),dl.removeAt(ee.children,pe),dl.removeAt(ee.items,pe+1),O(xe,0),he.children.length=0,D(he),pe}if(!Ut&&!Or&&!Nt){var he=Dt,xe=nr;return(gt=xe.children).push.apply(gt,he.children),(Pt=xe.items).push.apply(Pt,he.items),dl.removeAt(ee.children,pe),dl.removeAt(ee.items,pe),O(xe,0),he.children.length=0,D(he),pe-1}throw"unreachable"}})(Vs||(Vs={}));var _E=function(){function t(){this._first=null,this._last=null,this._size=0}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this._size===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){return this._first?this._first.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this._last?this._last.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstNode",{get:function(){return this._first},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastNode",{get:function(){return this._last},enumerable:!0,configurable:!0}),t.prototype.iter=function(){return new t.ForwardValueIterator(this._first)},t.prototype.retro=function(){return new t.RetroValueIterator(this._last)},t.prototype.nodes=function(){return new t.ForwardNodeIterator(this._first)},t.prototype.retroNodes=function(){return new t.RetroNodeIterator(this._last)},t.prototype.assign=function(r){var e=this;this.clear(),yE(r,function(n){e.addLast(n)})},t.prototype.push=function(r){this.addLast(r)},t.prototype.pop=function(){return this.removeLast()},t.prototype.shift=function(r){this.addFirst(r)},t.prototype.unshift=function(){return this.removeFirst()},t.prototype.addFirst=function(r){var e=new kp.LinkedListNode(this,r);return this._first?(e.next=this._first,this._first.prev=e,this._first=e):(this._first=e,this._last=e),this._size++,e},t.prototype.addLast=function(r){var e=new kp.LinkedListNode(this,r);return this._last?(e.prev=this._last,this._last.next=e,this._last=e):(this._first=e,this._last=e),this._size++,e},t.prototype.insertBefore=function(r,e){if(!e||e===this._first)return this.addFirst(r);if(!(e instanceof kp.LinkedListNode)||e.list!==this)throw new Error("Reference node is not owned by the list.");var n=new kp.LinkedListNode(this,r),i=e,a=i.prev;return n.next=i,n.prev=a,i.prev=n,a.next=n,this._size++,n},t.prototype.insertAfter=function(r,e){if(!e||e===this._last)return this.addLast(r);if(!(e instanceof kp.LinkedListNode)||e.list!==this)throw new Error("Reference node is not owned by the list.");var n=new kp.LinkedListNode(this,r),i=e,a=i.next;return n.next=a,n.prev=i,i.next=n,a.prev=n,this._size++,n},t.prototype.removeFirst=function(){var r=this._first;if(r)return r===this._last?(this._first=null,this._last=null):(this._first=r.next,this._first.prev=null),r.list=null,r.next=null,r.prev=null,this._size--,r.value},t.prototype.removeLast=function(){var r=this._last;if(r)return r===this._first?(this._first=null,this._last=null):(this._last=r.prev,this._last.next=null),r.list=null,r.next=null,r.prev=null,this._size--,r.value},t.prototype.removeNode=function(r){if(!(r instanceof kp.LinkedListNode)||r.list!==this)throw new Error("Node is not owned by the list.");var e=r;e===this._first&&e===this._last?(this._first=null,this._last=null):e===this._first?(this._first=e.next,this._first.prev=null):e===this._last?(this._last=e.prev,this._last.next=null):(e.next.prev=e.prev,e.prev.next=e.next),e.list=null,e.next=null,e.prev=null,this._size--},t.prototype.clear=function(){for(var r=this._first;r;){var e=r.next;r.list=null,r.prev=null,r.next=null,r=e}this._first=null,this._last=null,this._size=0},t}();(function(t){function r(o){var s=new t;return s.assign(o),s}t.from=r;var e=function(){function o(s){this._node=s}return o.prototype.iter=function(){return this},o.prototype.clone=function(){return new o(this._node)},o.prototype.next=function(){if(this._node){var s=this._node;return this._node=s.next,s.value}},o}();t.ForwardValueIterator=e;var n=function(){function o(s){this._node=s}return o.prototype.iter=function(){return this},o.prototype.clone=function(){return new o(this._node)},o.prototype.next=function(){if(this._node){var s=this._node;return this._node=s.prev,s.value}},o}();t.RetroValueIterator=n;var i=function(){function o(s){this._node=s}return o.prototype.iter=function(){return this},o.prototype.clone=function(){return new o(this._node)},o.prototype.next=function(){if(this._node){var s=this._node;return this._node=s.next,s}},o}();t.ForwardNodeIterator=i;var a=function(){function o(s){this._node=s}return o.prototype.iter=function(){return this},o.prototype.clone=function(){return new o(this._node)},o.prototype.next=function(){if(this._node){var s=this._node;return this._node=s.prev,s}},o}();t.RetroNodeIterator=a})(_E||(_E={}));var kp;(function(t){var r=function(){function e(n,i){this.list=null,this.next=null,this.prev=null,this.list=n,this.value=i}return e}();t.LinkedListNode=r})(kp||(kp={}));var MB=function(t,r){return MB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},MB(t,r)};function lFe(t,r){MB(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var gc=function(){function t(r){this.type=r}return Object.defineProperty(t.prototype,"isConflatable",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.conflate=function(r){return!1},t}(),q0=function(t){lFe(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"isConflatable",{get:function(){return!0},enumerable:!0,configurable:!0}),r.prototype.conflate=function(e){return!0},r}(gc),Ur;(function(t){function r(I,O){var U=h.get(I);if(!U||U.length===0){W(I,O);return}var re=Jne(eie(U),function(ee){return ee?H(ee,I,O):!0});re&&W(I,O)}t.sendMessage=r;function e(I,O){if(!O.isConflatable){$(I,O);return}var U=Qne(c,function(re){return re.handler!==I||!re.msg||re.msg.type!==O.type||!re.msg.isConflatable?!1:re.msg.conflate(O)});U||$(I,O)}t.postMessage=e;function n(I,O){var U=h.get(I);U&&U.indexOf(O)!==-1||(U?U.push(O):h.set(I,[O]))}t.installMessageHook=n;function i(I,O){var U=h.get(I);if(U){var re=U.indexOf(O);re!==-1&&(U[re]=null,B(U))}}t.removeMessageHook=i;function a(I){var O=h.get(I);O&&O.length>0&&(fb.fill(O,null),B(O)),$ne(c,function(U){U.handler===I&&(U.handler=null,U.msg=null)})}t.clearData=a;function o(){E||x===0||(D(x),E=!0,J(),E=!1)}t.flush=o;function s(){return v}t.getExceptionHandler=s;function u(I){var O=v;return v=I,O}t.setExceptionHandler=u;var c=new _E,h=new WeakMap,p=new Set,v=function(I){console.error(I)},x=0,E=!1,R=function(){var I=typeof requestAnimationFrame=="function";return I?requestAnimationFrame:setImmediate}(),D=function(){var I=typeof cancelAnimationFrame=="function";return I?cancelAnimationFrame:clearImmediate}();function H(I,O,U){var re=!0;try{typeof I=="function"?re=I(O,U):re=I.messageHook(O,U)}catch(ee){v(ee)}return re}function W(I,O){try{I.processMessage(O)}catch(U){v(U)}}function $(I,O){c.addLast({handler:I,msg:O}),x===0&&(x=R(J))}function J(){if(x=0,!c.isEmpty){var I={handler:null,msg:null};for(c.addLast(I);;){var O=c.removeFirst();if(O===I)return;O.handler&&O.msg&&r(O.handler,O.msg)}}}function B(I){p.size===0&&R(se),p.add(I)}function se(){p.forEach(V),p.clear()}function V(I){fb.removeAllWhere(I,X)}function X(I){return I===null}})(Ur||(Ur={}));var Ac=function(){function t(r){this._pid=kv.nextPID(),this.name=r.name,this._create=r.create,this._coerce=r.coerce||null,this._compare=r.compare||null,this._changed=r.changed||null}return t.prototype.get=function(r){var e,n=kv.ensureMap(r);return this._pid in n?e=n[this._pid]:e=n[this._pid]=this._createValue(r),e},t.prototype.set=function(r,e){var n,i=kv.ensureMap(r);this._pid in i?n=i[this._pid]:n=i[this._pid]=this._createValue(r);var a=this._coerceValue(r,e);this._maybeNotify(r,n,i[this._pid]=a)},t.prototype.coerce=function(r){var e,n=kv.ensureMap(r);this._pid in n?e=n[this._pid]:e=n[this._pid]=this._createValue(r);var i=this._coerceValue(r,e);this._maybeNotify(r,e,n[this._pid]=i)},t.prototype._createValue=function(r){var e=this._create;return e(r)},t.prototype._coerceValue=function(r,e){var n=this._coerce;return n?n(r,e):e},t.prototype._compareValue=function(r,e){var n=this._compare;return n?n(r,e):r===e},t.prototype._maybeNotify=function(r,e,n){var i=this._changed;i&&!this._compareValue(e,n)&&i(r,e,n)},t}();(function(t){function r(e){kv.ownerData.delete(e)}t.clearData=r})(Ac||(Ac={}));var kv;(function(t){t.ownerData=new WeakMap,t.nextPID=function(){var e=0;return function(){var n=Math.random(),i=(""+n).slice(2);return"pid-"+i+"-"+e++}}();function r(e){var n=t.ownerData.get(e);return n||(n=Object.create(null),t.ownerData.set(e,n),n)}t.ensureMap=r})(kv||(kv={}));var za=function(){function t(r){this.sender=r}return t.prototype.connect=function(r,e){return yc.connect(this,r,e)},t.prototype.disconnect=function(r,e){return yc.disconnect(this,r,e)},t.prototype.emit=function(r){yc.emit(this,r)},t}();(function(t){function r(u,c){yc.disconnectBetween(u,c)}t.disconnectBetween=r;function e(u){yc.disconnectSender(u)}t.disconnectSender=e;function n(u){yc.disconnectReceiver(u)}t.disconnectReceiver=n;function i(u){yc.disconnectAll(u)}t.disconnectAll=i;function a(u){yc.disconnectAll(u)}t.clearData=a;function o(){return yc.exceptionHandler}t.getExceptionHandler=o;function s(u){var c=yc.exceptionHandler;return yc.exceptionHandler=u,c}t.setExceptionHandler=s})(za||(za={}));var yc;(function(t){t.exceptionHandler=function(W){console.error(W)};function r(W,$,J){J=J||void 0;var B=u.get(W.sender);if(B||(B=[],u.set(W.sender,B)),v(B,W,$,J))return!1;var se=J||$,V=c.get(se);V||(V=[],c.set(se,V));var X={signal:W,slot:$,thisArg:J};return B.push(X),V.push(X),!0}t.connect=r;function e(W,$,J){J=J||void 0;var B=u.get(W.sender);if(!B||B.length===0)return!1;var se=v(B,W,$,J);if(!se)return!1;var V=J||$,X=c.get(V);return se.signal=null,E(B),E(X),!0}t.disconnect=e;function n(W,$){var J=u.get(W);if(!(!J||J.length===0)){var B=c.get($);!B||B.length===0||(Ei(B,function(se){se.signal&&se.signal.sender===W&&(se.signal=null)}),E(J),E(B))}}t.disconnectBetween=n;function i(W){var $=u.get(W);!$||$.length===0||(Ei($,function(J){if(J.signal){var B=J.thisArg||J.slot;J.signal=null,E(c.get(B))}}),E($))}t.disconnectSender=i;function a(W){var $=c.get(W);!$||$.length===0||(Ei($,function(J){if(J.signal){var B=J.signal.sender;J.signal=null,E(u.get(B))}}),E($))}t.disconnectReceiver=a;function o(W){i(W),a(W)}t.disconnectAll=o;function s(W,$){var J=u.get(W.sender);if(!(!J||J.length===0))for(var B=0,se=J.length;B<se;++B){var V=J[B];V.signal===W&&x(V,$)}}t.emit=s;var u=new WeakMap,c=new WeakMap,h=new Set,p=function(){var W=typeof requestAnimationFrame=="function";return W?requestAnimationFrame:setImmediate}();function v(W,$,J,B){return W0(W,function(se){return se.signal===$&&se.slot===J&&se.thisArg===B})}function x(W,$){var J=W.signal,B=W.slot,se=W.thisArg;try{B.call(se,J.sender,$)}catch(V){t.exceptionHandler(V)}}function E(W){h.size===0&&p(R),h.add(W)}function R(){h.forEach(D),h.clear()}function D(W){ln.removeAllWhere(W,H)}function H(W){return W.signal===null}})(yc||(yc={}));var ws;(function(t){t.emptyObject=Object.freeze({}),t.emptyArray=Object.freeze([]);function r(h){return h===null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"}t.isPrimitive=r;function e(h){return Array.isArray(h)}t.isArray=e;function n(h){return!r(h)&&!e(h)}t.isObject=n;function i(h,p){if(h===p)return!0;if(r(h)||r(p))return!1;var v=e(h),x=e(p);return v!==x?!1:v&&x?o(h,p):s(h,p)}t.deepEqual=i;function a(h){return r(h)?h:e(h)?u(h):c(h)}t.deepCopy=a;function o(h,p){if(h===p)return!0;if(h.length!==p.length)return!1;for(var v=0,x=h.length;v<x;++v)if(!i(h[v],p[v]))return!1;return!0}function s(h,p){if(h===p)return!0;for(var v in h)if(h[v]!==void 0&&!(v in p))return!1;for(var v in p)if(p[v]!==void 0&&!(v in h))return!1;for(var v in h){var x=h[v],E=p[v];if(!(x===void 0&&E===void 0)&&(x===void 0||E===void 0||!i(x,E)))return!1}return!0}function u(h){for(var p=new Array(h.length),v=0,x=h.length;v<x;++v)p[v]=a(h[v]);return p}function c(h){var p={};for(var v in h){var x=h[v];x!==void 0&&(p[v]=a(x))}return p}})(ws||(ws={}));var iie=function(){function t(){this._types=[],this._values=[]}return t.prototype.types=function(){return this._types.slice()},t.prototype.hasData=function(r){return this._types.indexOf(r)!==-1},t.prototype.getData=function(r){var e=this._types.indexOf(r);return e!==-1?this._values[e]:void 0},t.prototype.setData=function(r,e){this.clearData(r),this._types.push(r),this._values.push(e)},t.prototype.clearData=function(r){var e=this._types.indexOf(r);e!==-1&&(this._types.splice(e,1),this._values.splice(e,1))},t.prototype.clear=function(){this._types.length=0,this._values.length=0},t}(),KHt=function(){function t(){var r=this;this.promise=new Promise(function(e,n){r._resolve=e,r._reject=n})}return t.prototype.resolve=function(r){var e=this._resolve;e(r)},t.prototype.reject=function(r){var e=this._reject;e(r)},t}(),IB;(function(t){t.getRandomValues=function(){var r=typeof window<"u"&&(window.crypto||window.msCrypto)||typeof pg<"u"&&W3()||null;return r&&typeof r.getRandomValues=="function"?function(n){return r.getRandomValues(n)}:r&&typeof r.randomFillSync=="function"?function(n){return r.randomFillSync(n)}:r&&typeof r.randomBytes=="function"?function(n){for(var i=r.randomBytes(n.length),a=0,o=i.length;a<o;++a)n[a]=i[a]}:function(n){for(var i=0,a=0,o=n.length;a<o;++a)a%4===0&&(i=Math.random()*4294967295>>>0),n[a]=i&255,i>>>=8}}()})(IB||(IB={}));var ZHt=function(){function t(r){this.name=r,this._tokenStructuralPropertyT=null}return t}(),nie;(function(t){t.uuid4=function(){for(var r=new Uint8Array(16),e=new Array(256),n=0;n<16;++n)e[n]="0"+n.toString(16);for(var n=16;n<256;++n)e[n]=n.toString(16);return function(){return IB.getRandomValues(r),r[6]=64|r[6]&15,r[8]=128|r[8]&63,e[r[0]]+e[r[1]]+e[r[2]]+e[r[3]]+"-"+e[r[4]]+e[r[5]]+"-"+e[r[6]]+e[r[7]]+"-"+e[r[8]]+e[r[9]]+"-"+e[r[10]]+e[r[11]]+e[r[12]]+e[r[13]]+e[r[14]]+e[r[15]]}}()})(nie||(nie={}));var RB=function(t,r){return RB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},RB(t,r)};function oie(t,r){RB(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var X0=function(){function t(r){this._fn=r}return Object.defineProperty(t.prototype,"isDisposed",{get:function(){return!this._fn},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){if(this._fn){var r=this._fn;this._fn=null,r()}},t}(),tWt=function(t){oie(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e._disposed=new za(e),e}return Object.defineProperty(r.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){this.isDisposed||(t.prototype.dispose.call(this),this._disposed.emit(void 0),za.clearData(this))},r}(X0),LB=function(){function t(){this._isDisposed=!1,this._items=new Set}return Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._items.forEach(function(r){r.dispose()}),this._items.clear())},t.prototype.contains=function(r){return this._items.has(r)},t.prototype.add=function(r){this._items.add(r)},t.prototype.remove=function(r){this._items.delete(r)},t.prototype.clear=function(){this._items.clear()},t}();(function(t){function r(e){var n=new t;return Ei(e,function(i){n.add(i)}),n}t.from=r})(LB||(LB={}));var aie=function(t){oie(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e._disposed=new za(e),e}return Object.defineProperty(r.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){this.isDisposed||(t.prototype.dispose.call(this),this._disposed.emit(void 0),za.clearData(this))},r}(LB);(function(t){function r(e){var n=new t;return Ei(e,function(i){n.add(i)}),n}t.from=r})(aie||(aie={}));function hb(){return BB.keyboardLayout}var kB=function(){function t(r,e){this.name=r,this._codes=e,this._keys=t.extractKeys(e)}return t.prototype.keys=function(){return Object.keys(this._keys)},t.prototype.isValidKey=function(r){return r in this._keys},t.prototype.keyForKeydownEvent=function(r){return this._codes[r.keyCode]||""},t}();(function(t){function r(e){var n=Object.create(null);for(var i in e)n[e[i]]=!0;return n}t.extractKeys=r})(kB||(kB={}));var cFe=new kB("en-us",{8:"Backspace",9:"Tab",13:"Enter",19:"Pause",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",93:"ContextMenu",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}),BB;(function(t){t.keyboardLayout=cFe})(BB||(BB={}));var Y0=function(){function t(){this._timerID=0,this._replaying=!1,this._keystrokes=[],this._keydownEvents=[],this._keyBindings=[],this._exactKeyMatch=null,this._commands=Object.create(null),this._commandChanged=new za(this),this._commandExecuted=new za(this),this._keyBindingChanged=new za(this)}return Object.defineProperty(t.prototype,"commandChanged",{get:function(){return this._commandChanged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commandExecuted",{get:function(){return this._commandExecuted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyBindingChanged",{get:function(){return this._keyBindingChanged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyBindings",{get:function(){return this._keyBindings},enumerable:!0,configurable:!0}),t.prototype.listCommands=function(){return Object.keys(this._commands)},t.prototype.hasCommand=function(r){return r in this._commands},t.prototype.addCommand=function(r,e){var n=this;if(r in this._commands)throw new Error("Command '"+r+"' already registered.");return this._commands[r]=Bv.createCommand(e),this._commandChanged.emit({id:r,type:"added"}),new X0(function(){delete n._commands[r],n._commandChanged.emit({id:r,type:"removed"})})},t.prototype.notifyCommandChanged=function(r){if(r!==void 0&&!(r in this._commands))throw new Error("Command '"+r+"' is not registered.");this._commandChanged.emit({id:r,type:r?"changed":"many-changed"})},t.prototype.label=function(r,e){e===void 0&&(e=ws.emptyObject);var n=this._commands[r];return n?n.label.call(void 0,e):""},t.prototype.mnemonic=function(r,e){e===void 0&&(e=ws.emptyObject);var n=this._commands[r];return n?n.mnemonic.call(void 0,e):-1},t.prototype.icon=function(r,e){e===void 0&&(e=ws.emptyObject);var n=this._commands[r];return n?n.icon.call(void 0,e):""},t.prototype.iconClass=function(r,e){e===void 0&&(e=ws.emptyObject);var n=this._commands[r];return n?n.iconClass.call(void 0,e):""},t.prototype.iconLabel=function(r,e){e===void 0&&(e=ws.emptyObject);var n=this._commands[r];return n?n.iconLabel.call(void 0,e):""},t.prototype.caption=function(r,e){e===void 0&&(e=ws.emptyObject);var n=this._commands[r];return n?n.caption.call(void 0,e):""},t.prototype.usage=function(r,e){e===void 0&&(e=ws.emptyObject);var n=this._commands[r];return n?n.usage.call(void 0,e):""},t.prototype.className=function(r,e){e===void 0&&(e=ws.emptyObject);var n=this._commands[r];return n?n.className.call(void 0,e):""},t.prototype.dataset=function(r,e){e===void 0&&(e=ws.emptyObject);var n=this._commands[r];return n?n.dataset.call(void 0,e):{}},t.prototype.isEnabled=function(r,e){e===void 0&&(e=ws.emptyObject);var n=this._commands[r];return n?n.isEnabled.call(void 0,e):!1},t.prototype.isToggled=function(r,e){e===void 0&&(e=ws.emptyObject);var n=this._commands[r];return n?n.isToggled.call(void 0,e):!1},t.prototype.isVisible=function(r,e){e===void 0&&(e=ws.emptyObject);var n=this._commands[r];return n?n.isVisible.call(void 0,e):!1},t.prototype.execute=function(r,e){e===void 0&&(e=ws.emptyObject);var n=this._commands[r];if(!n)return Promise.reject(new Error("Command '"+r+"' not registered."));var i;try{i=n.execute.call(void 0,e)}catch(o){i=Promise.reject(o)}var a=Promise.resolve(i);return this._commandExecuted.emit({id:r,args:e,result:a}),a},t.prototype.addKeyBinding=function(r){var e=this,n=Bv.createKeyBinding(r);return this._keyBindings.push(n),this._keyBindingChanged.emit({binding:n,type:"added"}),new X0(function(){ln.removeFirstOf(e._keyBindings,n),e._keyBindingChanged.emit({binding:n,type:"removed"})})},t.prototype.processKeydownEvent=function(r){if(!this._replaying){var e=t.keystrokeForKeydownEvent(r);if(!e){this._replayKeydownEvents(),this._clearPendingState();return}this._keystrokes.push(e);var n=Bv.matchKeyBinding(this._keyBindings,this._keystrokes,r),i=n.exact,a=n.partial;if(!i&&!a){this._replayKeydownEvents(),this._clearPendingState();return}if(r.preventDefault(),r.stopPropagation(),i&&!a){this._executeKeyBinding(i),this._clearPendingState();return}i&&(this._exactKeyMatch=i),this._keydownEvents.push(r),this._startTimer()}},t.prototype._startTimer=function(){var r=this;this._clearTimer(),this._timerID=window.setTimeout(function(){r._onPendingTimeout()},Bv.CHORD_TIMEOUT)},t.prototype._clearTimer=function(){this._timerID!==0&&(clearTimeout(this._timerID),this._timerID=0)},t.prototype._replayKeydownEvents=function(){this._keydownEvents.length!==0&&(this._replaying=!0,this._keydownEvents.forEach(Bv.replayKeyEvent),this._replaying=!1)},t.prototype._executeKeyBinding=function(r){var e=r.command,n=r.args;if(!this.hasCommand(e)||!this.isEnabled(e,n)){var i=this.hasCommand(e)?"enabled":"registered",a=r.keys.join(", "),o="Cannot execute key binding '"+a+"':",s="command '"+e+"' is not "+i+".";console.warn(o+" "+s);return}this.execute(e,n)},t.prototype._clearPendingState=function(){this._clearTimer(),this._exactKeyMatch=null,this._keystrokes.length=0,this._keydownEvents.length=0},t.prototype._onPendingTimeout=function(){this._timerID=0,this._exactKeyMatch?this._executeKeyBinding(this._exactKeyMatch):this._replayKeydownEvents(),this._clearPendingState()},t}();(function(t){function r(o){for(var s="",u=!1,c=!1,h=!1,p=!1,v=0,x=o.split(/\s+/);v<x.length;v++){var E=x[v];E==="Accel"?pl.IS_MAC?c=!0:h=!0:E==="Alt"?u=!0:E==="Cmd"?c=!0:E==="Ctrl"?h=!0:E==="Shift"?p=!0:E.length>0&&(s=E)}return{cmd:c,ctrl:h,alt:u,shift:p,key:s}}t.parseKeystroke=r;function e(o){var s="",u=r(o);return u.ctrl&&(s+="Ctrl "),u.alt&&(s+="Alt "),u.shift&&(s+="Shift "),u.cmd&&pl.IS_MAC&&(s+="Cmd "),s+u.key}t.normalizeKeystroke=e;function n(o){var s;return pl.IS_WIN?s=o.winKeys||o.keys:pl.IS_MAC?s=o.macKeys||o.keys:s=o.linuxKeys||o.keys,s.map(e)}t.normalizeKeys=n;function i(o){var s="",u=r(o);return pl.IS_MAC?(u.ctrl&&(s+="\u2303 "),u.alt&&(s+="\u2325 "),u.shift&&(s+="\u21E7 "),u.cmd&&(s+="\u2318 ")):(u.ctrl&&(s+="Ctrl+"),u.alt&&(s+="Alt+"),u.shift&&(s+="Shift+")),s+u.key}t.formatKeystroke=i;function a(o){var s=hb().keyForKeydownEvent(o);if(!s)return"";var u="";return o.ctrlKey&&(u+="Ctrl "),o.altKey&&(u+="Alt "),o.shiftKey&&(u+="Shift "),o.metaKey&&pl.IS_MAC&&(u+="Cmd "),u+s}t.keystrokeForKeydownEvent=a})(Y0||(Y0={}));var Bv;(function(t){t.CHORD_TIMEOUT=1e3;function r(D){var H,W;return!D.icon||typeof D.icon=="string"?(W=p(D.iconClass||D.icon,a),H=W):(W=p(D.iconClass,a),H=p(D.icon,h)),{execute:D.execute,label:p(D.label,a),mnemonic:p(D.mnemonic,o),icon:H,iconClass:W,iconLabel:p(D.iconLabel,a),caption:p(D.caption,a),usage:p(D.usage,a),className:p(D.className,a),dataset:p(D.dataset,c),isEnabled:D.isEnabled||s,isToggled:D.isToggled||u,isVisible:D.isVisible||s}}t.createCommand=r;function e(D){return{keys:Y0.normalizeKeys(D),selector:v(D),command:D.command,args:D.args||ws.emptyObject}}t.createKeyBinding=e;function n(D,H,W){for(var $=null,J=!1,B=1/0,se=0,V=0,X=D.length;V<X;++V){var I=D[V],O=x(I.keys,H);if(O!==0){if(O===2){!J&&E(I.selector,W)!==-1&&(J=!0);continue}var U=E(I.selector,W);if(!(U===-1||U>B)){var re=Rf.calculateSpecificity(I.selector);(!$||U<B||re>=se)&&($=I,B=U,se=re)}}}return{exact:$,partial:J}}t.matchKeyBinding=n;function i(D){D.target.dispatchEvent(R(D))}t.replayKeyEvent=i;var a=function(){return""},o=function(){return-1},s=function(){return!0},u=function(){return!1},c=function(){return{}},h=function(){};function p(D,H){return D===void 0?H:typeof D=="function"?D:function(){return D}}function v(D){if(D.selector.indexOf(",")!==-1)throw new Error("Selector cannot contain commas: "+D.selector);if(!Rf.isValid(D.selector))throw new Error("Invalid selector: "+D.selector);return D.selector}function x(D,H){if(D.length<H.length)return 0;for(var W=0,$=H.length;W<$;++W)if(D[W]!==H[W])return 0;return D.length>H.length?2:1}function E(D,H){for(var W=H.target,$=H.currentTarget,J=0;W!==null;W=W.parentElement,++J){if(W.hasAttribute("data-lm-suppress-shortcuts")||W.hasAttribute("data-p-suppress-shortcuts"))return-1;if(Rf.matches(W,D))return J;if(W===$)return-1}return-1}function R(D){var H=document.createEvent("Event"),W=D.bubbles||!0,$=D.cancelable||!0;return H.initEvent(D.type||"keydown",W,$),H.key=D.key||"",H.keyCode=D.keyCode||0,H.which=D.keyCode||0,H.ctrlKey=D.ctrlKey||!1,H.altKey=D.altKey||!1,H.shiftKey=D.shiftKey||!1,H.metaKey=D.metaKey||!1,H.view=D.view||window,H}})(Bv||(Bv={}));var qd;(function(t){function r(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;O<I?re=O+1+(U-I):re=O-I+1;for(var ee=0;ee<re;++ee){var pe=(I+ee)%U;if(V[pe]===X)return pe}return-1}t.firstIndexOf=r;function e(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;I<O?re=I+1+(U-O):re=I-O+1;for(var ee=0;ee<re;++ee){var pe=(I-ee+U)%U;if(V[pe]===X)return pe}return-1}t.lastIndexOf=e;function n(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;O<I?re=O+1+(U-I):re=O-I+1;for(var ee=0;ee<re;++ee){var pe=(I+ee)%U;if(X(V[pe],pe))return pe}return-1}t.findFirstIndex=n;function i(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;I<O?re=I+1+(U-O):re=I-O+1;for(var ee=0;ee<re;++ee){var pe=(I-ee+U)%U;if(X(V[pe],pe))return pe}return-1}t.findLastIndex=i;function a(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=n(V,X,I,O);return U!==-1?V[U]:void 0}t.findFirstValue=a;function o(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=i(V,X,I,O);return U!==-1?V[U]:void 0}t.findLastValue=o;function s(V,X,I,O,U){O===void 0&&(O=0),U===void 0&&(U=-1);var re=V.length;if(re===0)return 0;O<0?O=Math.max(0,O+re):O=Math.min(O,re-1),U<0?U=Math.max(0,U+re):U=Math.min(U,re-1);for(var ee=O,pe=U-O+1;pe>0;){var je=pe>>1,qe=ee+je;I(V[qe],X)<0?(ee=qe+1,pe-=je+1):pe=je}return ee}t.lowerBound=s;function u(V,X,I,O,U){O===void 0&&(O=0),U===void 0&&(U=-1);var re=V.length;if(re===0)return 0;O<0?O=Math.max(0,O+re):O=Math.min(O,re-1),U<0?U=Math.max(0,U+re):U=Math.min(U,re-1);for(var ee=O,pe=U-O+1;pe>0;){var je=pe>>1,qe=ee+je;I(V[qe],X)>0?pe=je:(ee=qe+1,pe-=je+1)}return ee}t.upperBound=u;function c(V,X,I){if(V===X)return!0;if(V.length!==X.length)return!1;for(var O=0,U=V.length;O<U;++O)if(I?!I(V[O],X[O]):V[O]!==X[O])return!1;return!0}t.shallowEqual=c;function h(V,X){X===void 0&&(X={});var I=X.start,O=X.stop,U=X.step;if(U===void 0&&(U=1),U===0)throw new Error("Slice `step` cannot be zero.");var re=V.length;I===void 0?I=U<0?re-1:0:I<0?I=Math.max(I+re,U<0?-1:0):I>=re&&(I=U<0?re-1:re),O===void 0?O=U<0?-1:re:O<0?O=Math.max(O+re,U<0?-1:0):O>=re&&(O=U<0?re-1:re);var ee;U<0&&O>=I||U>0&&I>=O?ee=0:U<0?ee=Math.floor((O-I+1)/U+1):ee=Math.floor((O-I-1)/U+1);for(var pe=[],je=0;je<ee;++je)pe[je]=V[I+je*U];return pe}t.slice=h;function p(V,X,I){var O=V.length;if(!(O<=1)&&(X<0?X=Math.max(0,X+O):X=Math.min(X,O-1),I<0?I=Math.max(0,I+O):I=Math.min(I,O-1),X!==I)){for(var U=V[X],re=X<I?1:-1,ee=X;ee!==I;ee+=re)V[ee]=V[ee+re];V[I]=U}}t.move=p;function v(V,X,I){X===void 0&&(X=0),I===void 0&&(I=-1);var O=V.length;if(!(O<=1))for(X<0?X=Math.max(0,X+O):X=Math.min(X,O-1),I<0?I=Math.max(0,I+O):I=Math.min(I,O-1);X<I;){var U=V[X],re=V[I];V[X++]=re,V[I--]=U}}t.reverse=v;function x(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(!(U<=1)&&(I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1),!(I>=O))){var re=O-I+1;if(X>0?X=X%re:X<0&&(X=(X%re+re)%re),X!==0){var ee=I+X;v(V,I,ee-1),v(V,ee,O),v(V,I,O)}}}t.rotate=x;function E(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U!==0){I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;O<I?re=O+1+(U-I):re=O-I+1;for(var ee=0;ee<re;++ee)V[(I+ee)%U]=X}}t.fill=E;function R(V,X,I){var O=V.length;X<0?X=Math.max(0,X+O):X=Math.min(X,O);for(var U=O;U>X;--U)V[U]=V[U-1];V[X]=I}t.insert=R;function D(V,X){var I=V.length;if(X<0&&(X+=I),!(X<0||X>=I)){for(var O=V[X],U=X+1;U<I;++U)V[U-1]=V[U];return V.length=I-1,O}}t.removeAt=D;function H(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=r(V,X,I,O);return U!==-1&&D(V,U),U}t.removeFirstOf=H;function W(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=e(V,X,I,O);return U!==-1&&D(V,U),U}t.removeLastOf=W;function $(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return 0;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);for(var re=0,ee=0;ee<U;++ee)I<=O&&ee>=I&&ee<=O&&V[ee]===X||O<I&&(ee<=O||ee>=I)&&V[ee]===X?re++:re>0&&(V[ee-re]=V[ee]);return re>0&&(V.length=U-re),re}t.removeAllOf=$;function J(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U,re=n(V,X,I,O);return re!==-1&&(U=D(V,re)),{index:re,value:U}}t.removeFirstWhere=J;function B(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U,re=i(V,X,I,O);return re!==-1&&(U=D(V,re)),{index:re,value:U}}t.removeLastWhere=B;function se(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return 0;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);for(var re=0,ee=0;ee<U;++ee)I<=O&&ee>=I&&ee<=O&&X(V[ee],ee)||O<I&&(ee<=O||ee>=I)&&X(V[ee],ee)?re++:re>0&&(V[ee-re]=V[ee]);return re>0&&(V.length=U-re),re}t.removeAllWhere=se})(qd||(qd={}));var fWt=function(){function t(r){this._index=0,this._source=r}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},t}(),hWt=function(){function t(r,e){e===void 0&&(e=Object.keys(r)),this._index=0,this._source=r,this._keys=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source,this._keys);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var r=this._keys[this._index++];return r in this._source?r:this.next()}},t}(),pWt=function(){function t(r,e){e===void 0&&(e=Object.keys(r)),this._index=0,this._source=r,this._keys=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source,this._keys);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var r=this._keys[this._index++];return r in this._source?this._source[r]:this.next()}},t}(),dWt=function(){function t(r,e){e===void 0&&(e=Object.keys(r)),this._index=0,this._source=r,this._keys=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source,this._keys);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var r=this._keys[this._index++];return r in this._source?[r,this._source[r]]:this.next()}},t}(),mWt=function(){function t(r){this._fn=r}return t.prototype.iter=function(){return this},t.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},t.prototype.next=function(){return this._fn.call(void 0)},t}();var vWt=function(){function t(r){this._cloned=!1,this._source=r,this._active=void 0}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source.clone());return r._active=this._active&&this._active.clone(),r._cloned=!0,this._cloned=!0,r},t.prototype.next=function(){if(this._active===void 0){var r=this._source.next();if(r===void 0)return;this._active=this._cloned?r.clone():r}var e=this._active.next();return e!==void 0?e:(this._active=void 0,this.next())},t}();var gWt=function(){function t(){}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t},t.prototype.next=function(){},t}();var AWt=function(){function t(r,e){this._source=r,this._index=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._index)},t.prototype.next=function(){var r=this._source.next();if(r!==void 0)return[this._index++,r]},t}();var yWt=function(){function t(r,e){this._index=0,this._source=r,this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source.clone(),this._fn);return r._index=this._index,r},t.prototype.next=function(){for(var r=this._fn,e=this._source,n;(n=e.next())!==void 0;)if(r(n,this._index++))return n},t}();var _Wt=function(){function t(r,e){this._index=0,this._source=r,this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source.clone(),this._fn);return r._index=this._index,r},t.prototype.next=function(){var r=this._source.next();if(r!==void 0)return this._fn.call(void 0,r,this._index++)},t}();var bWt=function(){function t(r,e,n){this._index=0,this._start=r,this._stop=e,this._step=n,this._length=DB.rangeLength(r,e,n)}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._start,this._stop,this._step);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},t}(),DB;(function(t){function r(e,n,i){return i===0?1/0:e>n&&i>0||e<n&&i<0?0:Math.ceil((n-e)/i)}t.rangeLength=r})(DB||(DB={}));var xWt=function(){function t(r,e){this._value=r,this._count=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._value,this._count)},t.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},t}();var wWt=function(){function t(r){this._source=r,this._index=r.length-1}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},t}();var TWt=function(){function t(r,e){this._source=r,this._step=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._step)},t.prototype.next=function(){for(var r=this._source.next(),e=this._step-1;e>0;--e)this._source.next();return r},t}(),sie;(function(t){function r(o,s,u){u===void 0&&(u=0);for(var c=new Array(s.length),h=0,p=u,v=s.length;h<v;++h,++p){if(p=o.indexOf(s[h],p),p===-1)return null;c[h]=p}return c}t.findIndices=r;function e(o,s,u){u===void 0&&(u=0);var c=r(o,s,u);if(!c)return null;for(var h=0,p=0,v=c.length;p<v;++p){var x=c[p]-u;h+=x*x}return{score:h,indices:c}}t.matchSumOfSquares=e;function n(o,s,u){u===void 0&&(u=0);var c=r(o,s,u);if(!c)return null;for(var h=0,p=u-1,v=0,x=c.length;v<x;++v){var E=c[v];h+=E-p-1,p=E}return{score:h,indices:c}}t.matchSumOfDeltas=n;function i(o,s,u){for(var c=[],h=0,p=0,v=s.length;h<v;){for(var x=s[h],E=s[h];++h<v&&s[h]===E+1;)E++;p<x&&c.push(o.slice(p,x)),x<E+1&&c.push(u(o.slice(x,E+1))),p=E+1}return p<o.length&&c.push(o.slice(p)),c}t.highlight=i;function a(o,s){return o<s?-1:o>s?1:0}t.cmp=a})(sie||(sie={}));var SWt=function(){function t(r,e){this._source=r,this._count=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._count)},t.prototype.next=function(){if(!(this._count<=0)){var r=this._source.next();if(r!==void 0)return this._count--,r}},t}();var EWt=function(){function t(r){this._source=r}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.map(function(r){return r.clone()}))},t.prototype.next=function(){for(var r=new Array(this._source.length),e=0,n=this._source.length;e<n;++e){var i=this._source[e].next();if(i===void 0)return;r[e]=i}return r},t}();var FB=function(t,r){return FB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},FB(t,r)};function fFe(t,r){FB(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var bE=function(){function t(r){this.type="text",this.content=r}return t}(),xE=function(){function t(r,e,n,i){this.type="element",this.tag=r,this.attrs=e,this.children=n,this.renderer=i}return t}(),OWt=function(t){fFe(r,t);function r(e,n,i){return t.call(this,e,n,[],i||void 0)||this}return r}(xE);function Ya(t){for(var r={},e,n=[],i=1,a=arguments.length;i<a;++i){var o=arguments[i];typeof o=="string"?n.push(new bE(o)):o instanceof bE||o instanceof xE?n.push(o):o instanceof Array?s(n,o):(i===1||i===2)&&o&&typeof o=="object"&&("render"in o?e=o:r=o)}return new xE(t,r,n,e);function s(u,c){for(var h=0,p=c;h<p.length;h++){var v=p[h];typeof v=="string"?u.push(new bE(v)):(v instanceof bE||v instanceof xE)&&u.push(v)}}}(function(t){t.a=t.bind(void 0,"a"),t.abbr=t.bind(void 0,"abbr"),t.address=t.bind(void 0,"address"),t.area=t.bind(void 0,"area"),t.article=t.bind(void 0,"article"),t.aside=t.bind(void 0,"aside"),t.audio=t.bind(void 0,"audio"),t.b=t.bind(void 0,"b"),t.bdi=t.bind(void 0,"bdi"),t.bdo=t.bind(void 0,"bdo"),t.blockquote=t.bind(void 0,"blockquote"),t.br=t.bind(void 0,"br"),t.button=t.bind(void 0,"button"),t.canvas=t.bind(void 0,"canvas"),t.caption=t.bind(void 0,"caption"),t.cite=t.bind(void 0,"cite"),t.code=t.bind(void 0,"code"),t.col=t.bind(void 0,"col"),t.colgroup=t.bind(void 0,"colgroup"),t.data=t.bind(void 0,"data"),t.datalist=t.bind(void 0,"datalist"),t.dd=t.bind(void 0,"dd"),t.del=t.bind(void 0,"del"),t.dfn=t.bind(void 0,"dfn"),t.div=t.bind(void 0,"div"),t.dl=t.bind(void 0,"dl"),t.dt=t.bind(void 0,"dt"),t.em=t.bind(void 0,"em"),t.embed=t.bind(void 0,"embed"),t.fieldset=t.bind(void 0,"fieldset"),t.figcaption=t.bind(void 0,"figcaption"),t.figure=t.bind(void 0,"figure"),t.footer=t.bind(void 0,"footer"),t.form=t.bind(void 0,"form"),t.h1=t.bind(void 0,"h1"),t.h2=t.bind(void 0,"h2"),t.h3=t.bind(void 0,"h3"),t.h4=t.bind(void 0,"h4"),t.h5=t.bind(void 0,"h5"),t.h6=t.bind(void 0,"h6"),t.header=t.bind(void 0,"header"),t.hr=t.bind(void 0,"hr"),t.i=t.bind(void 0,"i"),t.iframe=t.bind(void 0,"iframe"),t.img=t.bind(void 0,"img"),t.input=t.bind(void 0,"input"),t.ins=t.bind(void 0,"ins"),t.kbd=t.bind(void 0,"kbd"),t.label=t.bind(void 0,"label"),t.legend=t.bind(void 0,"legend"),t.li=t.bind(void 0,"li"),t.main=t.bind(void 0,"main"),t.map=t.bind(void 0,"map"),t.mark=t.bind(void 0,"mark"),t.meter=t.bind(void 0,"meter"),t.nav=t.bind(void 0,"nav"),t.noscript=t.bind(void 0,"noscript"),t.object=t.bind(void 0,"object"),t.ol=t.bind(void 0,"ol"),t.optgroup=t.bind(void 0,"optgroup"),t.option=t.bind(void 0,"option"),t.output=t.bind(void 0,"output"),t.p=t.bind(void 0,"p"),t.param=t.bind(void 0,"param"),t.pre=t.bind(void 0,"pre"),t.progress=t.bind(void 0,"progress"),t.q=t.bind(void 0,"q"),t.rp=t.bind(void 0,"rp"),t.rt=t.bind(void 0,"rt"),t.ruby=t.bind(void 0,"ruby"),t.s=t.bind(void 0,"s"),t.samp=t.bind(void 0,"samp"),t.section=t.bind(void 0,"section"),t.select=t.bind(void 0,"select"),t.small=t.bind(void 0,"small"),t.source=t.bind(void 0,"source"),t.span=t.bind(void 0,"span"),t.strong=t.bind(void 0,"strong"),t.sub=t.bind(void 0,"sub"),t.summary=t.bind(void 0,"summary"),t.sup=t.bind(void 0,"sup"),t.table=t.bind(void 0,"table"),t.tbody=t.bind(void 0,"tbody"),t.td=t.bind(void 0,"td"),t.textarea=t.bind(void 0,"textarea"),t.tfoot=t.bind(void 0,"tfoot"),t.th=t.bind(void 0,"th"),t.thead=t.bind(void 0,"thead"),t.time=t.bind(void 0,"time"),t.title=t.bind(void 0,"title"),t.tr=t.bind(void 0,"tr"),t.track=t.bind(void 0,"track"),t.u=t.bind(void 0,"u"),t.ul=t.bind(void 0,"ul"),t.var_=t.bind(void 0,"var"),t.video=t.bind(void 0,"video"),t.wbr=t.bind(void 0,"wbr")})(Ya||(Ya={}));var Bp;(function(t){function r(n){return Dv.createDOMNode(n)}t.realize=r;function e(n,i){var a=Dv.hostMap.get(i)||[],o=Dv.asContentArray(n);Dv.hostMap.set(i,o),Dv.updateContent(i,a,o)}t.render=e})(Bp||(Bp={}));var Dv;(function(t){t.hostMap=new WeakMap;function r(x){return x?x instanceof Array?x:[x]:[]}t.asContentArray=r;function e(x){var E=arguments[1]||null,R=arguments[2]||null;if(E)E.insertBefore(e(x),R);else{if(x.type==="text")return document.createTextNode(x.content);if(E=document.createElement(x.tag),o(E,x.attrs),x.renderer)return x.renderer.render(E,{attrs:x.attrs,children:x.children}),E;for(var D=0,H=x.children.length;D<H;++D)e(x.children[D],E)}return E}t.createDOMNode=e;function n(x,E,R){if(E!==R){for(var D=v(x,E),H=E.slice(),W=x.firstChild,$=R.length,J=0;J<$;++J){if(J>=H.length){e(R[J],x);continue}var B=H[J],se=R[J];if(B===se){W=W.nextSibling;continue}if(B.type==="text"&&se.type==="text"){W.textContent=se.content,W=W.nextSibling;continue}if(B.type==="text"||se.type==="text"){qd.insert(H,J,se),e(se,x,W);continue}if(!B.renderer!=!se.renderer){qd.insert(H,J,se),e(se,x,W);continue}var V=se.attrs.key;if(V&&V in D){var X=D[V];X.vNode!==B&&(qd.move(H,H.indexOf(X.vNode,J+1),J),x.insertBefore(X.element,W),B=X.vNode,W=X.element)}if(B===se){W=W.nextSibling;continue}var I=B.attrs.key;if(I&&I!==V){qd.insert(H,J,se),e(se,x,W);continue}if(B.tag!==se.tag){qd.insert(H,J,se),e(se,x,W);continue}s(W,B.attrs,se.attrs),se.renderer?se.renderer.render(W,{attrs:se.attrs,children:se.children}):n(W,B.children,se.children),W=W.nextSibling}i(x,H,$,!0)}}t.updateContent=n;function i(x,E,R,D){for(var H=E.length-1;H>=R;--H){var W=E[H],$=D?x.lastChild:x.childNodes[H];W.type==="text"||(W.renderer&&W.renderer.unrender?W.renderer.unrender($,{attrs:W.attrs,children:W.children}):i($,W.children,0,!1)),D&&x.removeChild($)}}var a={key:!0,className:!0,htmlFor:!0,dataset:!0,style:!0};function o(x,E){for(var R in E)R in a||(R.substr(0,2)==="on"?x[R]=E[R]:x.setAttribute(R,E[R]));E.className!==void 0&&x.setAttribute("class",E.className),E.htmlFor!==void 0&&x.setAttribute("for",E.htmlFor),E.dataset&&u(x,E.dataset),E.style&&h(x,E.style)}function s(x,E,R){if(E!==R){var D;for(D in E)D in a||D in R||(D.substr(0,2)==="on"?x[D]=null:x.removeAttribute(D));for(D in R)D in a||E[D]===R[D]||(D.substr(0,2)==="on"?x[D]=R[D]:x.setAttribute(D,R[D]));E.className!==R.className&&(R.className!==void 0?x.setAttribute("class",R.className):x.removeAttribute("class")),E.htmlFor!==R.htmlFor&&(R.htmlFor!==void 0?x.setAttribute("for",R.htmlFor):x.removeAttribute("for")),E.dataset!==R.dataset&&c(x,E.dataset||{},R.dataset||{}),E.style!==R.style&&p(x,E.style||{},R.style||{})}}function u(x,E){for(var R in E)x.setAttribute("data-"+R,E[R])}function c(x,E,R){for(var D in E)D in R||x.removeAttribute("data-"+D);for(var H in R)E[H]!==R[H]&&x.setAttribute("data-"+H,R[H])}function h(x,E){var R=x.style,D;for(D in E)R[D]=E[D]}function p(x,E,R){var D=x.style,H;for(H in E)H in R||(D[H]="");for(H in R)E[H]!==R[H]&&(D[H]=R[H])}function v(x,E){for(var R=x.firstChild,D=Object.create(null),H=0,W=E;H<W.length;H++){var $=W[H];$.type==="element"&&$.attrs.key&&(D[$.attrs.key]={vNode:$,element:R}),R=R.nextSibling}return D}})(Dv||(Dv={}));var wE;(function(t){function r(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;O<I?re=O+1+(U-I):re=O-I+1;for(var ee=0;ee<re;++ee){var pe=(I+ee)%U;if(V[pe]===X)return pe}return-1}t.firstIndexOf=r;function e(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;I<O?re=I+1+(U-O):re=I-O+1;for(var ee=0;ee<re;++ee){var pe=(I-ee+U)%U;if(V[pe]===X)return pe}return-1}t.lastIndexOf=e;function n(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;O<I?re=O+1+(U-I):re=O-I+1;for(var ee=0;ee<re;++ee){var pe=(I+ee)%U;if(X(V[pe],pe))return pe}return-1}t.findFirstIndex=n;function i(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=V.length;if(U===0)return-1;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;I<O?re=I+1+(U-O):re=I-O+1;for(var ee=0;ee<re;++ee){var pe=(I-ee+U)%U;if(X(V[pe],pe))return pe}return-1}t.findLastIndex=i;function a(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=n(V,X,I,O);return U!==-1?V[U]:void 0}t.findFirstValue=a;function o(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=i(V,X,I,O);return U!==-1?V[U]:void 0}t.findLastValue=o;function s(V,X,I,O,U){O===void 0&&(O=0),U===void 0&&(U=-1);var re=V.length;if(re===0)return 0;O<0?O=Math.max(0,O+re):O=Math.min(O,re-1),U<0?U=Math.max(0,U+re):U=Math.min(U,re-1);for(var ee=O,pe=U-O+1;pe>0;){var je=pe>>1,qe=ee+je;I(V[qe],X)<0?(ee=qe+1,pe-=je+1):pe=je}return ee}t.lowerBound=s;function u(V,X,I,O,U){O===void 0&&(O=0),U===void 0&&(U=-1);var re=V.length;if(re===0)return 0;O<0?O=Math.max(0,O+re):O=Math.min(O,re-1),U<0?U=Math.max(0,U+re):U=Math.min(U,re-1);for(var ee=O,pe=U-O+1;pe>0;){var je=pe>>1,qe=ee+je;I(V[qe],X)>0?pe=je:(ee=qe+1,pe-=je+1)}return ee}t.upperBound=u;function c(V,X,I){if(V===X)return!0;if(V.length!==X.length)return!1;for(var O=0,U=V.length;O<U;++O)if(I?!I(V[O],X[O]):V[O]!==X[O])return!1;return!0}t.shallowEqual=c;function h(V,X){X===void 0&&(X={});var I=X.start,O=X.stop,U=X.step;if(U===void 0&&(U=1),U===0)throw new Error("Slice `step` cannot be zero.");var re=V.length;I===void 0?I=U<0?re-1:0:I<0?I=Math.max(I+re,U<0?-1:0):I>=re&&(I=U<0?re-1:re),O===void 0?O=U<0?-1:re:O<0?O=Math.max(O+re,U<0?-1:0):O>=re&&(O=U<0?re-1:re);var ee;U<0&&O>=I||U>0&&I>=O?ee=0:U<0?ee=Math.floor((O-I+1)/U+1):ee=Math.floor((O-I-1)/U+1);for(var pe=[],je=0;je<ee;++je)pe[je]=V[I+je*U];return pe}t.slice=h;function p(V,X,I){var O=V.length;if(!(O<=1)&&(X<0?X=Math.max(0,X+O):X=Math.min(X,O-1),I<0?I=Math.max(0,I+O):I=Math.min(I,O-1),X!==I)){for(var U=V[X],re=X<I?1:-1,ee=X;ee!==I;ee+=re)V[ee]=V[ee+re];V[I]=U}}t.move=p;function v(V,X,I){X===void 0&&(X=0),I===void 0&&(I=-1);var O=V.length;if(!(O<=1))for(X<0?X=Math.max(0,X+O):X=Math.min(X,O-1),I<0?I=Math.max(0,I+O):I=Math.min(I,O-1);X<I;){var U=V[X],re=V[I];V[X++]=re,V[I--]=U}}t.reverse=v;function x(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(!(U<=1)&&(I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1),!(I>=O))){var re=O-I+1;if(X>0?X=X%re:X<0&&(X=(X%re+re)%re),X!==0){var ee=I+X;v(V,I,ee-1),v(V,ee,O),v(V,I,O)}}}t.rotate=x;function E(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U!==0){I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);var re;O<I?re=O+1+(U-I):re=O-I+1;for(var ee=0;ee<re;++ee)V[(I+ee)%U]=X}}t.fill=E;function R(V,X,I){var O=V.length;X<0?X=Math.max(0,X+O):X=Math.min(X,O);for(var U=O;U>X;--U)V[U]=V[U-1];V[X]=I}t.insert=R;function D(V,X){var I=V.length;if(X<0&&(X+=I),!(X<0||X>=I)){for(var O=V[X],U=X+1;U<I;++U)V[U-1]=V[U];return V.length=I-1,O}}t.removeAt=D;function H(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=r(V,X,I,O);return U!==-1&&D(V,U),U}t.removeFirstOf=H;function W(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U=e(V,X,I,O);return U!==-1&&D(V,U),U}t.removeLastOf=W;function $(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return 0;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);for(var re=0,ee=0;ee<U;++ee)I<=O&&ee>=I&&ee<=O&&V[ee]===X||O<I&&(ee<=O||ee>=I)&&V[ee]===X?re++:re>0&&(V[ee-re]=V[ee]);return re>0&&(V.length=U-re),re}t.removeAllOf=$;function J(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U,re=n(V,X,I,O);return re!==-1&&(U=D(V,re)),{index:re,value:U}}t.removeFirstWhere=J;function B(V,X,I,O){I===void 0&&(I=-1),O===void 0&&(O=0);var U,re=i(V,X,I,O);return re!==-1&&(U=D(V,re)),{index:re,value:U}}t.removeLastWhere=B;function se(V,X,I,O){I===void 0&&(I=0),O===void 0&&(O=-1);var U=V.length;if(U===0)return 0;I<0?I=Math.max(0,I+U):I=Math.min(I,U-1),O<0?O=Math.max(0,O+U):O=Math.min(O,U-1);for(var re=0,ee=0;ee<U;++ee)I<=O&&ee>=I&&ee<=O&&X(V[ee],ee)||O<I&&(ee<=O||ee>=I)&&X(V[ee],ee)?re++:re>0&&(V[ee-re]=V[ee]);return re>0&&(V.length=U-re),re}t.removeAllWhere=se})(wE||(wE={}));function lie(t){var r;return typeof t.iter=="function"?r=t.iter():r=new hFe(t),r}function Fv(t,r){for(var e=0,n=lie(t),i;(i=n.next())!==void 0;)if(r(i,e++)===!1)return}var hFe=function(){function t(r){this._index=0,this._source=r}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},t}(),IWt=function(){function t(r,e){e===void 0&&(e=Object.keys(r)),this._index=0,this._source=r,this._keys=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source,this._keys);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var r=this._keys[this._index++];return r in this._source?r:this.next()}},t}(),RWt=function(){function t(r,e){e===void 0&&(e=Object.keys(r)),this._index=0,this._source=r,this._keys=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source,this._keys);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var r=this._keys[this._index++];return r in this._source?this._source[r]:this.next()}},t}(),LWt=function(){function t(r,e){e===void 0&&(e=Object.keys(r)),this._index=0,this._source=r,this._keys=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source,this._keys);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var r=this._keys[this._index++];return r in this._source?[r,this._source[r]]:this.next()}},t}(),kWt=function(){function t(r){this._fn=r}return t.prototype.iter=function(){return this},t.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},t.prototype.next=function(){return this._fn.call(void 0)},t}();var BWt=function(){function t(r){this._cloned=!1,this._source=r,this._active=void 0}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source.clone());return r._active=this._active&&this._active.clone(),r._cloned=!0,this._cloned=!0,r},t.prototype.next=function(){if(this._active===void 0){var r=this._source.next();if(r===void 0)return;this._active=this._cloned?r.clone():r}var e=this._active.next();return e!==void 0?e:(this._active=void 0,this.next())},t}();var DWt=function(){function t(){}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t},t.prototype.next=function(){},t}();var FWt=function(){function t(r,e){this._source=r,this._index=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._index)},t.prototype.next=function(){var r=this._source.next();if(r!==void 0)return[this._index++,r]},t}();var NWt=function(){function t(r,e){this._index=0,this._source=r,this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source.clone(),this._fn);return r._index=this._index,r},t.prototype.next=function(){for(var r=this._fn,e=this._source,n;(n=e.next())!==void 0;)if(r(n,this._index++))return n},t}();function cie(t,r){for(var e=0,n=lie(t),i;(i=n.next())!==void 0;)if(r(i,e++))return i}var zWt=function(){function t(r,e){this._index=0,this._source=r,this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source.clone(),this._fn);return r._index=this._index,r},t.prototype.next=function(){var r=this._source.next();if(r!==void 0)return this._fn.call(void 0,r,this._index++)},t}();var UWt=function(){function t(r,e,n){this._index=0,this._start=r,this._stop=e,this._step=n,this._length=NB.rangeLength(r,e,n)}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._start,this._stop,this._step);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},t}(),NB;(function(t){function r(e,n,i){return i===0?1/0:e>n&&i>0||e<n&&i<0?0:Math.ceil((n-e)/i)}t.rangeLength=r})(NB||(NB={}));var jWt=function(){function t(r,e){this._value=r,this._count=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._value,this._count)},t.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},t}();var GWt=function(){function t(r){this._source=r,this._index=r.length-1}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var r=new t(this._source);return r._index=this._index,r},t.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},t}();var VWt=function(){function t(r,e){this._source=r,this._step=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._step)},t.prototype.next=function(){for(var r=this._source.next(),e=this._step-1;e>0;--e)this._source.next();return r},t}(),uie;(function(t){function r(o,s,u){u===void 0&&(u=0);for(var c=new Array(s.length),h=0,p=u,v=s.length;h<v;++h,++p){if(p=o.indexOf(s[h],p),p===-1)return null;c[h]=p}return c}t.findIndices=r;function e(o,s,u){u===void 0&&(u=0);var c=r(o,s,u);if(!c)return null;for(var h=0,p=0,v=c.length;p<v;++p){var x=c[p]-u;h+=x*x}return{score:h,indices:c}}t.matchSumOfSquares=e;function n(o,s,u){u===void 0&&(u=0);var c=r(o,s,u);if(!c)return null;for(var h=0,p=u-1,v=0,x=c.length;v<x;++v){var E=c[v];h+=E-p-1,p=E}return{score:h,indices:c}}t.matchSumOfDeltas=n;function i(o,s,u){for(var c=[],h=0,p=0,v=s.length;h<v;){for(var x=s[h],E=s[h];++h<v&&s[h]===E+1;)E++;p<x&&c.push(o.slice(p,x)),x<E+1&&c.push(u(o.slice(x,E+1))),p=E+1}return p<o.length&&c.push(o.slice(p)),c}t.highlight=i;function a(o,s){return o<s?-1:o>s?1:0}t.cmp=a})(uie||(uie={}));var HWt=function(){function t(r,e){this._source=r,this._count=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._count)},t.prototype.next=function(){if(!(this._count<=0)){var r=this._source.next();if(r!==void 0)return this._count--,r}},t}();var WWt=function(){function t(r){this._source=r}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.map(function(r){return r.clone()}))},t.prototype.next=function(){for(var r=new Array(this._source.length),e=0,n=this._source.length;e<n;++e){var i=this._source[e].next();if(i===void 0)return;r[e]=i}return r},t}();var Nv=function(){function t(r){this.sender=r}return t.prototype.connect=function(r,e){return _c.connect(this,r,e)},t.prototype.disconnect=function(r,e){return _c.disconnect(this,r,e)},t.prototype.emit=function(r){_c.emit(this,r)},t}();(function(t){function r(u,c){_c.disconnectBetween(u,c)}t.disconnectBetween=r;function e(u){_c.disconnectSender(u)}t.disconnectSender=e;function n(u){_c.disconnectReceiver(u)}t.disconnectReceiver=n;function i(u){_c.disconnectAll(u)}t.disconnectAll=i;function a(u){_c.disconnectAll(u)}t.clearData=a;function o(){return _c.exceptionHandler}t.getExceptionHandler=o;function s(u){var c=_c.exceptionHandler;return _c.exceptionHandler=u,c}t.setExceptionHandler=s})(Nv||(Nv={}));var _c;(function(t){t.exceptionHandler=function(W){console.error(W)};function r(W,$,J){J=J||void 0;var B=u.get(W.sender);if(B||(B=[],u.set(W.sender,B)),v(B,W,$,J))return!1;var se=J||$,V=c.get(se);V||(V=[],c.set(se,V));var X={signal:W,slot:$,thisArg:J};return B.push(X),V.push(X),!0}t.connect=r;function e(W,$,J){J=J||void 0;var B=u.get(W.sender);if(!B||B.length===0)return!1;var se=v(B,W,$,J);if(!se)return!1;var V=J||$,X=c.get(V);return se.signal=null,E(B),E(X),!0}t.disconnect=e;function n(W,$){var J=u.get(W);if(!(!J||J.length===0)){var B=c.get($);!B||B.length===0||(Fv(B,function(se){se.signal&&se.signal.sender===W&&(se.signal=null)}),E(J),E(B))}}t.disconnectBetween=n;function i(W){var $=u.get(W);!$||$.length===0||(Fv($,function(J){if(J.signal){var B=J.thisArg||J.slot;J.signal=null,E(c.get(B))}}),E($))}t.disconnectSender=i;function a(W){var $=c.get(W);!$||$.length===0||(Fv($,function(J){if(J.signal){var B=J.signal.sender;J.signal=null,E(u.get(B))}}),E($))}t.disconnectReceiver=a;function o(W){i(W),a(W)}t.disconnectAll=o;function s(W,$){var J=u.get(W.sender);if(!(!J||J.length===0))for(var B=0,se=J.length;B<se;++B){var V=J[B];V.signal===W&&x(V,$)}}t.emit=s;var u=new WeakMap,c=new WeakMap,h=new Set,p=function(){var W=typeof requestAnimationFrame=="function";return W?requestAnimationFrame:setImmediate}();function v(W,$,J,B){return cie(W,function(se){return se.signal===$&&se.slot===J&&se.thisArg===B})}function x(W,$){var J=W.signal,B=W.slot,se=W.thisArg;try{B.call(se,J.sender,$)}catch(V){t.exceptionHandler(V)}}function E(W){h.size===0&&p(R),h.add(W)}function R(){h.forEach(D),h.clear()}function D(W){wE.removeAllWhere(W,H)}function H(W){return W.signal===null}})(_c||(_c={}));var zB=function(t,r){return zB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},zB(t,r)};function hie(t,r){zB(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var jB=function(){function t(r){this._fn=r}return Object.defineProperty(t.prototype,"isDisposed",{get:function(){return!this._fn},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){if(this._fn){var r=this._fn;this._fn=null,r()}},t}(),$Wt=function(t){hie(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e._disposed=new Nv(e),e}return Object.defineProperty(r.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){this.isDisposed||(t.prototype.dispose.call(this),this._disposed.emit(void 0),Nv.clearData(this))},r}(jB),UB=function(){function t(){this._isDisposed=!1,this._items=new Set}return Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._items.forEach(function(r){r.dispose()}),this._items.clear())},t.prototype.contains=function(r){return this._items.has(r)},t.prototype.add=function(r){this._items.add(r)},t.prototype.remove=function(r){this._items.delete(r)},t.prototype.clear=function(){this._items.clear()},t}();(function(t){function r(e){var n=new t;return Fv(e,function(i){n.add(i)}),n}t.from=r})(UB||(UB={}));var fie=function(t){hie(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e._disposed=new Nv(e),e}return Object.defineProperty(r.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){this.isDisposed||(t.prototype.dispose.call(this),this._disposed.emit(void 0),Nv.clearData(this))},r}(UB);(function(t){function r(e){var n=new t;return Fv(e,function(i){n.add(i)}),n}t.from=r})(fie||(fie={}));var Xd=function(){function t(r){var e=this;this._onScrollFrame=function(){if(e._scrollTarget){var n=e._scrollTarget,i=n.element,a=n.edge,o=n.distance,s=ml.SCROLL_EDGE_SIZE-o,u=Math.pow(s/ml.SCROLL_EDGE_SIZE,2),c=Math.max(1,Math.round(u*ml.SCROLL_EDGE_SIZE));switch(a){case"top":i.scrollTop-=c;break;case"left":i.scrollLeft-=c;break;case"right":i.scrollLeft+=c;break;case"bottom":i.scrollTop+=c;break}requestAnimationFrame(e._onScrollFrame)}},this._disposed=!1,this._dropAction="none",this._override=null,this._currentTarget=null,this._currentElement=null,this._promise=null,this._scrollTarget=null,this._resolve=null,this.mimeData=r.mimeData,this.dragImage=r.dragImage||null,this.proposedAction=r.proposedAction||"copy",this.supportedActions=r.supportedActions||"all",this.source=r.source||null}return t.prototype.dispose=function(){if(!this._disposed){if(this._disposed=!0,this._currentTarget){var r=ml.createMouseEvent("mouseup",-1,-1);ml.dispatchDragLeave(this,this._currentTarget,null,r)}this._finalize("none")}},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.start=function(r,e){var n=this;if(this._disposed)return Promise.resolve("none");if(this._promise)return this._promise;this._addListeners(),this._attachDragImage(r,e),this._promise=new Promise(function(a,o){n._resolve=a});var i=ml.createMouseEvent("mousemove",r,e);return document.dispatchEvent(i),this._promise},t.prototype.handleEvent=function(r){switch(r.type){case"mousemove":this._evtMouseMove(r);break;case"mouseup":this._evtMouseUp(r);break;case"keydown":this._evtKeyDown(r);break;default:r.preventDefault(),r.stopPropagation();break}},t.prototype._evtMouseMove=function(r){r.preventDefault(),r.stopPropagation(),this._updateCurrentTarget(r),this._updateDragScroll(r),this._moveDragImage(r.clientX,r.clientY)},t.prototype._evtMouseUp=function(r){if(r.preventDefault(),r.stopPropagation(),r.button===0){if(this._updateCurrentTarget(r),!this._currentTarget){this._finalize("none");return}if(this._dropAction==="none"){ml.dispatchDragLeave(this,this._currentTarget,null,r),this._finalize("none");return}var e=ml.dispatchDrop(this,this._currentTarget,r);this._finalize(e)}},t.prototype._evtKeyDown=function(r){r.preventDefault(),r.stopPropagation(),r.keyCode===27&&this.dispose()},t.prototype._addListeners=function(){document.addEventListener("mousedown",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("mouseup",this,!0),document.addEventListener("mouseenter",this,!0),document.addEventListener("mouseleave",this,!0),document.addEventListener("mouseover",this,!0),document.addEventListener("mouseout",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("keyup",this,!0),document.addEventListener("keypress",this,!0),document.addEventListener("contextmenu",this,!0)},t.prototype._removeListeners=function(){document.removeEventListener("mousedown",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("mouseenter",this,!0),document.removeEventListener("mouseleave",this,!0),document.removeEventListener("mouseover",this,!0),document.removeEventListener("mouseout",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("keyup",this,!0),document.removeEventListener("keypress",this,!0),document.removeEventListener("contextmenu",this,!0)},t.prototype._updateDragScroll=function(r){var e=ml.findScrollTarget(r);!this._scrollTarget&&!e||(this._scrollTarget||setTimeout(this._onScrollFrame,500),this._scrollTarget=e)},t.prototype._updateCurrentTarget=function(r){var e=this._currentTarget,n=this._currentTarget,i=this._currentElement,a=document.elementFromPoint(r.clientX,r.clientY);this._currentElement=a,a!==i&&a!==n&&ml.dispatchDragExit(this,n,a,r),a!==i&&a!==n&&(n=ml.dispatchDragEnter(this,a,n,r)),n!==e&&(this._currentTarget=n,ml.dispatchDragLeave(this,e,n,r));var o=ml.dispatchDragOver(this,n,r);this._setDropAction(o)},t.prototype._attachDragImage=function(r,e){if(this.dragImage){this.dragImage.classList.add("lm-mod-drag-image"),this.dragImage.classList.add("p-mod-drag-image");var n=this.dragImage.style;n.pointerEvents="none",n.position="fixed",n.top=e+"px",n.left=r+"px",document.body.appendChild(this.dragImage)}},t.prototype._moveDragImage=function(r,e){if(this.dragImage){var n=this.dragImage.style;n.top=e+"px",n.left=r+"px"}},t.prototype._detachDragImage=function(){if(this.dragImage){var r=this.dragImage.parentNode;r&&r.removeChild(this.dragImage)}},t.prototype._setDropAction=function(r){if(r=ml.validateAction(r,this.supportedActions),!(this._override&&this._dropAction===r))switch(r){case"none":this._dropAction=r,this._override=t.overrideCursor("no-drop");break;case"copy":this._dropAction=r,this._override=t.overrideCursor("copy");break;case"link":this._dropAction=r,this._override=t.overrideCursor("alias");break;case"move":this._dropAction=r,this._override=t.overrideCursor("move");break}},t.prototype._finalize=function(r){var e=this._resolve;this._removeListeners(),this._detachDragImage(),this._override&&(this._override.dispose(),this._override=null),this.mimeData.clear(),this._disposed=!0,this._dropAction="none",this._currentTarget=null,this._currentElement=null,this._scrollTarget=null,this._promise=null,this._resolve=null,e&&e(r)},t}();(function(t){function r(n){var i=++e;return document.body.style.cursor=n,document.body.classList.add("lm-mod-override-cursor"),document.body.classList.add("p-mod-override-cursor"),new jB(function(){i===e&&(document.body.style.cursor="",document.body.classList.remove("lm-mod-override-cursor"),document.body.classList.remove("p-mod-override-cursor"))})}t.overrideCursor=r;var e=0})(Xd||(Xd={}));var ml;(function(t){t.SCROLL_EDGE_SIZE=20;function r(v,x){return c[v]&h[x]?v:"none"}t.validateAction=r;function e(v,x,E){var R=document.createEvent("MouseEvent");return R.initMouseEvent(v,!0,!0,window,0,0,0,x,E,!1,!1,!1,!1,0,null),R}t.createMouseEvent=e;function n(v){for(var x=v.clientX,E=v.clientY,R=document.elementFromPoint(x,E);R;R=R.parentElement){var D=R.hasAttribute("data-lm-dragscroll");if(D=D||R.hasAttribute("data-p-dragscroll"),!!D){var H=0,W=0;R===document.body&&(H=window.pageXOffset,W=window.pageYOffset);var $=R.getBoundingClientRect(),J=$.top+W,B=$.left+H,se=B+$.width,V=J+$.height;if(!(x<B||x>=se||E<J||E>=V)){var X=x-B+1,I=E-J+1,O=se-x,U=V-E,re=Math.min(X,I,O,U);if(!(re>t.SCROLL_EDGE_SIZE)){var ee=void 0;switch(re){case U:ee="bottom";break;case I:ee="top";break;case O:ee="right";break;case X:ee="left";break;default:throw"unreachable"}var pe=R.scrollWidth-R.clientWidth,je=R.scrollHeight-R.clientHeight,qe=void 0;switch(ee){case"top":qe=je>0&&R.scrollTop>0;break;case"left":qe=pe>0&&R.scrollLeft>0;break;case"right":qe=pe>0&&R.scrollLeft<pe;break;case"bottom":qe=je>0&&R.scrollTop<je;break;default:throw"unreachable"}if(qe)return{element:R,edge:ee,distance:re}}}}}return null}t.findScrollTarget=n;function i(v,x,E,R){if(!x)return null;var D=p("lm-dragenter",v,R,E),H=!x.dispatchEvent(D);return H||(D=p("p-dragenter",v,R,E),H=!x.dispatchEvent(D),H)?x:x===document.body?E:(D=p("lm-dragenter",v,R,E),document.body.dispatchEvent(D),D=p("p-dragenter",v,R,E),document.body.dispatchEvent(D),document.body)}t.dispatchDragEnter=i;function a(v,x,E,R){if(x){var D=p("lm-dragexit",v,R,E);x.dispatchEvent(D),D=p("p-dragexit",v,R,E),x.dispatchEvent(D)}}t.dispatchDragExit=a;function o(v,x,E,R){if(x){var D=p("lm-dragleave",v,R,E);x.dispatchEvent(D),D=p("p-dragleave",v,R,E),x.dispatchEvent(D)}}t.dispatchDragLeave=o;function s(v,x,E){if(!x)return"none";var R=p("lm-dragover",v,E,null),D=!x.dispatchEvent(R);return D||(R=p("p-dragover",v,E,null),D=!x.dispatchEvent(R),D)?R.dropAction:"none"}t.dispatchDragOver=s;function u(v,x,E){if(!x)return"none";var R=p("lm-drop",v,E,null),D=!x.dispatchEvent(R);return D||(R=p("p-drop",v,E,null),D=!x.dispatchEvent(R),D)?R.dropAction:"none"}t.dispatchDrop=u;var c={none:0,copy:1,link:2,move:4},h={none:c.none,copy:c.copy,link:c.link,move:c.move,"copy-link":c.copy|c.link,"copy-move":c.copy|c.move,"link-move":c.link|c.move,all:c.copy|c.link|c.move};function p(v,x,E,R){var D=document.createEvent("MouseEvent");return D.initMouseEvent(v,!0,!0,window,0,E.screenX,E.screenY,E.clientX,E.clientY,E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,R),D.dropAction="none",D.mimeData=x.mimeData,D.proposedAction=x.proposedAction,D.supportedActions=x.supportedActions,D.source=x.source,D}})(ml||(ml={}));var Kd=function(){function t(){this.sizeHint=0,this.minSize=0,this.maxSize=1/0,this.stretch=1,this.size=0,this.done=!1}return t}(),bc;(function(t){function r(a,o){var s=a.length;if(s===0)return o;for(var u=0,c=0,h=0,p=0,v=0,x=0;x<s;++x){var E=a[x],R=E.minSize,D=E.maxSize,H=E.sizeHint;E.done=!1,E.size=Math.max(R,Math.min(H,D)),h+=E.size,u+=R,c+=D,E.stretch>0&&(p+=E.stretch,v++)}if(o===h)return 0;if(o<=u){for(var x=0;x<s;++x){var E=a[x];E.size=E.minSize}return o-u}if(o>=c){for(var x=0;x<s;++x){var E=a[x];E.size=E.maxSize}return o-c}var W=.01,$=s;if(o<h){for(var J=h-o;v>0&&J>W;)for(var B=J,se=p,x=0;x<s;++x){var E=a[x];if(!(E.done||E.stretch===0)){var V=E.stretch*B/se;E.size-V<=E.minSize?(J-=E.size-E.minSize,p-=E.stretch,E.size=E.minSize,E.done=!0,$--,v--):(J-=V,E.size-=V)}}for(;$>0&&J>W;)for(var V=J/$,x=0;x<s;++x){var E=a[x];E.done||(E.size-V<=E.minSize?(J-=E.size-E.minSize,E.size=E.minSize,E.done=!0,$--):(J-=V,E.size-=V))}}else{for(var J=o-h;v>0&&J>W;)for(var B=J,se=p,x=0;x<s;++x){var E=a[x];if(!(E.done||E.stretch===0)){var V=E.stretch*B/se;E.size+V>=E.maxSize?(J-=E.maxSize-E.size,p-=E.stretch,E.size=E.maxSize,E.done=!0,$--,v--):(J-=V,E.size+=V)}}for(;$>0&&J>W;)for(var V=J/$,x=0;x<s;++x){var E=a[x];E.done||(E.size+V>=E.maxSize?(J-=E.maxSize-E.size,E.size=E.maxSize,E.done=!0,$--):(J-=V,E.size+=V))}}return 0}t.calc=r;function e(a,o,s){a.length===0||s===0||(s>0?n(a,o,s):i(a,o,-s))}t.adjust=e;function n(a,o,s){for(var u=0,c=0;c<=o;++c){var h=a[c];u+=h.maxSize-h.size}for(var p=0,c=o+1,v=a.length;c<v;++c){var h=a[c];p+=h.size-h.minSize}s=Math.min(s,u,p);for(var x=s,c=o;c>=0&&x>0;--c){var h=a[c],E=h.maxSize-h.size;E>=x?(h.sizeHint=h.size+x,x=0):(h.sizeHint=h.size+E,x-=E)}for(var R=s,c=o+1,v=a.length;c<v&&R>0;++c){var h=a[c],E=h.size-h.minSize;E>=R?(h.sizeHint=h.size-R,R=0):(h.sizeHint=h.size-E,R-=E)}}function i(a,o,s){for(var u=0,c=o+1,h=a.length;c<h;++c){var p=a[c];u+=p.maxSize-p.size}for(var v=0,c=0;c<=o;++c){var p=a[c];v+=p.size-p.minSize}s=Math.min(s,u,v);for(var x=s,c=o+1,h=a.length;c<h&&x>0;++c){var p=a[c],E=p.maxSize-p.size;E>=x?(p.sizeHint=p.size+x,x=0):(p.sizeHint=p.size+E,x-=E)}for(var R=s,c=o;c>=0&&R>0;--c){var p=a[c],E=p.size-p.minSize;E>=R?(p.sizeHint=p.size-R,R=0):(p.sizeHint=p.size-E,R-=E)}}})(bc||(bc={}));var GB=function(t,r){return GB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])},GB(t,r)};function Js(t,r){GB(t,r);function e(){this.constructor=t}t.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}var Rh=function(){return Rh=Object.assign||function(r){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Rh.apply(this,arguments)},VB=function(){function t(r){this._label="",this._caption="",this._mnemonic=-1,this._iconClass="",this._iconLabel="",this._className="",this._closable=!1,this._changed=new za(this),this.owner=r.owner,r.label!==void 0&&(this._label=r.label),r.mnemonic!==void 0&&(this._mnemonic=r.mnemonic),r.icon!==void 0?typeof r.icon=="string"?(this._icon=null,this._iconClass=r.icon):this._icon=r.icon:this._icon=null,r.iconClass!==void 0&&(this._iconClass=r.iconClass),r.iconLabel!==void 0&&(this._iconLabel=r.iconLabel),r.iconRenderer!==void 0&&(this._icon=r.iconRenderer),r.caption!==void 0&&(this._caption=r.caption),r.className!==void 0&&(this._className=r.className),r.closable!==void 0&&(this._closable=r.closable),this._dataset=r.dataset||{}}return Object.defineProperty(t.prototype,"changed",{get:function(){return this._changed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this._label},set:function(r){this._label!==r&&(this._label=r,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mnemonic",{get:function(){return this._mnemonic},set:function(r){this._mnemonic!==r&&(this._mnemonic=r,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return this._icon===null?this.iconClass:this._icon},set:function(r){if(typeof r=="string")this._icon=null,this.iconClass=r;else{if(this._icon===r)return;this._icon=r,this._changed.emit(void 0)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconClass",{get:function(){return this._iconClass},set:function(r){this._iconClass!==r&&(this._iconClass=r,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconLabel",{get:function(){return this._iconLabel},set:function(r){this._iconLabel!==r&&(this._iconLabel=r,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconRenderer",{get:function(){return this._icon||void 0},set:function(r){this.icon=r},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"caption",{get:function(){return this._caption},set:function(r){this._caption!==r&&(this._caption=r,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},set:function(r){this._className!==r&&(this._className=r,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closable",{get:function(){return this._closable},set:function(r){this._closable!==r&&(this._closable=r,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataset",{get:function(){return this._dataset},set:function(r){this._dataset!==r&&(this._dataset=r,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),t}(),xn=function(){function t(r){r===void 0&&(r={}),this._flags=0,this._layout=null,this._parent=null,this._disposed=new za(this),this.node=TE.createNode(r),this.addClass("lm-Widget"),this.addClass("p-Widget")}return t.prototype.dispose=function(){this.isDisposed||(this.setFlag(t.Flag.IsDisposed),this._disposed.emit(void 0),this.parent?this.parent=null:this.isAttached&&t.detach(this),this._layout&&(this._layout.dispose(),this._layout=null),za.clearData(this),Ur.clearData(this),Ac.clearData(this))},Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.testFlag(t.Flag.IsDisposed)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAttached",{get:function(){return this.testFlag(t.Flag.IsAttached)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHidden",{get:function(){return this.testFlag(t.Flag.IsHidden)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.testFlag(t.Flag.IsVisible)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return TE.titleProperty.get(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.node.id},set:function(r){this.node.id=r},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataset",{get:function(){return this.node.dataset},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(r){if(this._parent!==r){if(r&&this.contains(r))throw new Error("Invalid parent widget.");if(this._parent&&!this._parent.isDisposed){var e=new t.ChildMessage("child-removed",this);Ur.sendMessage(this._parent,e)}if(this._parent=r,this._parent&&!this._parent.isDisposed){var e=new t.ChildMessage("child-added",this);Ur.sendMessage(this._parent,e)}this.isDisposed||Ur.sendMessage(this,t.Msg.ParentChanged)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},set:function(r){if(this._layout!==r){if(this.testFlag(t.Flag.DisallowLayout))throw new Error("Cannot set widget layout.");if(this._layout)throw new Error("Cannot change widget layout.");if(r.parent)throw new Error("Cannot change layout parent.");this._layout=r,r.parent=this}},enumerable:!0,configurable:!0}),t.prototype.children=function(){return this._layout?this._layout.iter():Ih()},t.prototype.contains=function(r){for(var e=r;e;e=e._parent)if(e===this)return!0;return!1},t.prototype.hasClass=function(r){return this.node.classList.contains(r)},t.prototype.addClass=function(r){this.node.classList.add(r)},t.prototype.removeClass=function(r){this.node.classList.remove(r)},t.prototype.toggleClass=function(r,e){return e===!0?(this.node.classList.add(r),!0):e===!1?(this.node.classList.remove(r),!1):this.node.classList.toggle(r)},t.prototype.update=function(){Ur.postMessage(this,t.Msg.UpdateRequest)},t.prototype.fit=function(){Ur.postMessage(this,t.Msg.FitRequest)},t.prototype.activate=function(){Ur.postMessage(this,t.Msg.ActivateRequest)},t.prototype.close=function(){Ur.sendMessage(this,t.Msg.CloseRequest)},t.prototype.show=function(){if(this.testFlag(t.Flag.IsHidden)&&(this.isAttached&&(!this.parent||this.parent.isVisible)&&Ur.sendMessage(this,t.Msg.BeforeShow),this.clearFlag(t.Flag.IsHidden),this.removeClass("lm-mod-hidden"),this.removeClass("p-mod-hidden"),this.isAttached&&(!this.parent||this.parent.isVisible)&&Ur.sendMessage(this,t.Msg.AfterShow),this.parent)){var r=new t.ChildMessage("child-shown",this);Ur.sendMessage(this.parent,r)}},t.prototype.hide=function(){if(!this.testFlag(t.Flag.IsHidden)&&(this.isAttached&&(!this.parent||this.parent.isVisible)&&Ur.sendMessage(this,t.Msg.BeforeHide),this.setFlag(t.Flag.IsHidden),this.addClass("lm-mod-hidden"),this.addClass("p-mod-hidden"),this.isAttached&&(!this.parent||this.parent.isVisible)&&Ur.sendMessage(this,t.Msg.AfterHide),this.parent)){var r=new t.ChildMessage("child-hidden",this);Ur.sendMessage(this.parent,r)}},t.prototype.setHidden=function(r){r?this.hide():this.show()},t.prototype.testFlag=function(r){return(this._flags&r)!==0},t.prototype.setFlag=function(r){this._flags|=r},t.prototype.clearFlag=function(r){this._flags&=~r},t.prototype.processMessage=function(r){switch(r.type){case"resize":this.notifyLayout(r),this.onResize(r);break;case"update-request":this.notifyLayout(r),this.onUpdateRequest(r);break;case"fit-request":this.notifyLayout(r),this.onFitRequest(r);break;case"before-show":this.notifyLayout(r),this.onBeforeShow(r);break;case"after-show":this.setFlag(t.Flag.IsVisible),this.notifyLayout(r),this.onAfterShow(r);break;case"before-hide":this.notifyLayout(r),this.onBeforeHide(r);break;case"after-hide":this.clearFlag(t.Flag.IsVisible),this.notifyLayout(r),this.onAfterHide(r);break;case"before-attach":this.notifyLayout(r),this.onBeforeAttach(r);break;case"after-attach":!this.isHidden&&(!this.parent||this.parent.isVisible)&&this.setFlag(t.Flag.IsVisible),this.setFlag(t.Flag.IsAttached),this.notifyLayout(r),this.onAfterAttach(r);break;case"before-detach":this.notifyLayout(r),this.onBeforeDetach(r);break;case"after-detach":this.clearFlag(t.Flag.IsVisible),this.clearFlag(t.Flag.IsAttached),this.notifyLayout(r),this.onAfterDetach(r);break;case"activate-request":this.notifyLayout(r),this.onActivateRequest(r);break;case"close-request":this.notifyLayout(r),this.onCloseRequest(r);break;case"child-added":this.notifyLayout(r),this.onChildAdded(r);break;case"child-removed":this.notifyLayout(r),this.onChildRemoved(r);break;default:this.notifyLayout(r);break}},t.prototype.notifyLayout=function(r){this._layout&&this._layout.processParentMessage(r)},t.prototype.onCloseRequest=function(r){this.parent?this.parent=null:this.isAttached&&t.detach(this)},t.prototype.onResize=function(r){},t.prototype.onUpdateRequest=function(r){},t.prototype.onFitRequest=function(r){},t.prototype.onActivateRequest=function(r){},t.prototype.onBeforeShow=function(r){},t.prototype.onAfterShow=function(r){},t.prototype.onBeforeHide=function(r){},t.prototype.onAfterHide=function(r){},t.prototype.onBeforeAttach=function(r){},t.prototype.onAfterAttach=function(r){},t.prototype.onBeforeDetach=function(r){},t.prototype.onAfterDetach=function(r){},t.prototype.onChildAdded=function(r){},t.prototype.onChildRemoved=function(r){},t}();(function(t){var r;(function(s){s[s.IsDisposed=1]="IsDisposed",s[s.IsAttached=2]="IsAttached",s[s.IsHidden=4]="IsHidden",s[s.IsVisible=8]="IsVisible",s[s.DisallowLayout=16]="DisallowLayout"})(r=t.Flag||(t.Flag={}));var e;(function(s){s.BeforeShow=new gc("before-show"),s.AfterShow=new gc("after-show"),s.BeforeHide=new gc("before-hide"),s.AfterHide=new gc("after-hide"),s.BeforeAttach=new gc("before-attach"),s.AfterAttach=new gc("after-attach"),s.BeforeDetach=new gc("before-detach"),s.AfterDetach=new gc("after-detach"),s.ParentChanged=new gc("parent-changed"),s.UpdateRequest=new q0("update-request"),s.FitRequest=new q0("fit-request"),s.ActivateRequest=new q0("activate-request"),s.CloseRequest=new q0("close-request")})(e=t.Msg||(t.Msg={}));var n=function(s){Js(u,s);function u(c,h){var p=s.call(this,c)||this;return p.child=h,p}return u}(gc);t.ChildMessage=n;var i=function(s){Js(u,s);function u(c,h){var p=s.call(this,"resize")||this;return p.width=c,p.height=h,p}return u}(gc);t.ResizeMessage=i,function(s){s.UnknownSize=new s(-1,-1)}(i=t.ResizeMessage||(t.ResizeMessage={}));function a(s,u,c){if(c===void 0&&(c=null),s.parent)throw new Error("Cannot attach a child widget.");if(s.isAttached||document.body.contains(s.node))throw new Error("Widget is already attached.");if(!document.body.contains(u))throw new Error("Host is not attached.");Ur.sendMessage(s,t.Msg.BeforeAttach),u.insertBefore(s.node,c),Ur.sendMessage(s,t.Msg.AfterAttach)}t.attach=a;function o(s){if(s.parent)throw new Error("Cannot detach a child widget.");if(!s.isAttached||!document.body.contains(s.node))throw new Error("Widget is not attached.");Ur.sendMessage(s,t.Msg.BeforeDetach),s.node.parentNode.removeChild(s.node),Ur.sendMessage(s,t.Msg.AfterDetach)}t.detach=o})(xn||(xn={}));var TE;(function(t){t.titleProperty=new Ac({name:"title",create:function(e){return new VB({owner:e})}});function r(e){return e.node||document.createElement("div")}t.createNode=r})(TE||(TE={}));var Zd=function(){function t(r){r===void 0&&(r={}),this._disposed=!1,this._parent=null,this._fitPolicy=r.fitPolicy||"set-min-size"}return t.prototype.dispose=function(){this._parent=null,this._disposed=!0,za.clearData(this),Ac.clearData(this)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(r){if(this._parent!==r){if(this._parent)throw new Error("Cannot change parent widget.");if(r.layout!==this)throw new Error("Invalid parent widget.");this._parent=r,this.init()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fitPolicy",{get:function(){return this._fitPolicy},set:function(r){if(this._fitPolicy!==r&&(this._fitPolicy=r,this._parent)){var e=this._parent.node.style;e.minWidth="",e.minHeight="",e.maxWidth="",e.maxHeight="",this._parent.fit()}},enumerable:!0,configurable:!0}),t.prototype.processParentMessage=function(r){switch(r.type){case"resize":this.onResize(r);break;case"update-request":this.onUpdateRequest(r);break;case"fit-request":this.onFitRequest(r);break;case"before-show":this.onBeforeShow(r);break;case"after-show":this.onAfterShow(r);break;case"before-hide":this.onBeforeHide(r);break;case"after-hide":this.onAfterHide(r);break;case"before-attach":this.onBeforeAttach(r);break;case"after-attach":this.onAfterAttach(r);break;case"before-detach":this.onBeforeDetach(r);break;case"after-detach":this.onAfterDetach(r);break;case"child-removed":this.onChildRemoved(r);break;case"child-shown":this.onChildShown(r);break;case"child-hidden":this.onChildHidden(r);break}},t.prototype.init=function(){var r=this;Ei(this,function(e){e.parent=r.parent})},t.prototype.onResize=function(r){Ei(this,function(e){Ur.sendMessage(e,xn.ResizeMessage.UnknownSize)})},t.prototype.onUpdateRequest=function(r){Ei(this,function(e){Ur.sendMessage(e,xn.ResizeMessage.UnknownSize)})},t.prototype.onBeforeAttach=function(r){Ei(this,function(e){Ur.sendMessage(e,r)})},t.prototype.onAfterAttach=function(r){Ei(this,function(e){Ur.sendMessage(e,r)})},t.prototype.onBeforeDetach=function(r){Ei(this,function(e){Ur.sendMessage(e,r)})},t.prototype.onAfterDetach=function(r){Ei(this,function(e){Ur.sendMessage(e,r)})},t.prototype.onBeforeShow=function(r){Ei(this,function(e){e.isHidden||Ur.sendMessage(e,r)})},t.prototype.onAfterShow=function(r){Ei(this,function(e){e.isHidden||Ur.sendMessage(e,r)})},t.prototype.onBeforeHide=function(r){Ei(this,function(e){e.isHidden||Ur.sendMessage(e,r)})},t.prototype.onAfterHide=function(r){Ei(this,function(e){e.isHidden||Ur.sendMessage(e,r)})},t.prototype.onChildRemoved=function(r){this.removeWidget(r.child)},t.prototype.onFitRequest=function(r){},t.prototype.onChildShown=function(r){},t.prototype.onChildHidden=function(r){},t}();(function(t){function r(a){return K0.horizontalAlignmentProperty.get(a)}t.getHorizontalAlignment=r;function e(a,o){K0.horizontalAlignmentProperty.set(a,o)}t.setHorizontalAlignment=e;function n(a){return K0.verticalAlignmentProperty.get(a)}t.getVerticalAlignment=n;function i(a,o){K0.verticalAlignmentProperty.set(a,o)}t.setVerticalAlignment=i})(Zd||(Zd={}));var pb=function(){function t(r){this._top=NaN,this._left=NaN,this._width=NaN,this._height=NaN,this._minWidth=0,this._minHeight=0,this._maxWidth=1/0,this._maxHeight=1/0,this._disposed=!1,this.widget=r,this.widget.node.style.position="absolute"}return t.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var r=this.widget.node.style;r.position="",r.top="",r.left="",r.width="",r.height=""}},Object.defineProperty(t.prototype,"minWidth",{get:function(){return this._minWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minHeight",{get:function(){return this._minHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxHeight",{get:function(){return this._maxHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHidden",{get:function(){return this.widget.isHidden},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.widget.isVisible},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAttached",{get:function(){return this.widget.isAttached},enumerable:!0,configurable:!0}),t.prototype.fit=function(){var r=Xa.sizeLimits(this.widget.node);this._minWidth=r.minWidth,this._minHeight=r.minHeight,this._maxWidth=r.maxWidth,this._maxHeight=r.maxHeight},t.prototype.update=function(r,e,n,i){var a=Math.max(this._minWidth,Math.min(n,this._maxWidth)),o=Math.max(this._minHeight,Math.min(i,this._maxHeight));if(a<n)switch(Zd.getHorizontalAlignment(this.widget)){case"left":break;case"center":r+=(n-a)/2;break;case"right":r+=n-a;break;default:throw"unreachable"}if(o<i)switch(Zd.getVerticalAlignment(this.widget)){case"top":break;case"center":e+=(i-o)/2;break;case"bottom":e+=i-o;break;default:throw"unreachable"}var s=!1,u=this.widget.node.style;if(this._top!==e&&(this._top=e,u.top=e+"px"),this._left!==r&&(this._left=r,u.left=r+"px"),this._width!==a&&(s=!0,this._width=a,u.width=a+"px"),this._height!==o&&(s=!0,this._height=o,u.height=o+"px"),s){var c=new xn.ResizeMessage(a,o);Ur.sendMessage(this.widget,c)}},t}(),K0;(function(t){t.horizontalAlignmentProperty=new Ac({name:"horizontalAlignment",create:function(){return"center"},changed:r}),t.verticalAlignmentProperty=new Ac({name:"verticalAlignment",create:function(){return"top"},changed:r});function r(e){e.parent&&e.parent.layout&&e.parent.update()}})(K0||(K0={}));var OE=function(t){Js(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e._widgets=[],e}return r.prototype.dispose=function(){for(;this._widgets.length>0;)this._widgets.pop().dispose();t.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"widgets",{get:function(){return this._widgets},enumerable:!0,configurable:!0}),r.prototype.iter=function(){return Mf(this._widgets)},r.prototype.addWidget=function(e){this.insertWidget(this._widgets.length,e)},r.prototype.insertWidget=function(e,n){n.parent=this.parent;var i=this._widgets.indexOf(n),a=Math.max(0,Math.min(e,this._widgets.length));if(i===-1){ln.insert(this._widgets,a,n),this.parent&&this.attachWidget(a,n);return}a===this._widgets.length&&a--,i!==a&&(ln.move(this._widgets,i,a),this.parent&&this.moveWidget(i,a,n))},r.prototype.removeWidget=function(e){this.removeWidgetAt(this._widgets.indexOf(e))},r.prototype.removeWidgetAt=function(e){var n=ln.removeAt(this._widgets,e);n&&this.parent&&this.detachWidget(e,n)},r.prototype.init=function(){var e=this;t.prototype.init.call(this),Ei(this,function(n,i){e.attachWidget(i,n)})},r.prototype.attachWidget=function(e,n){var i=this.parent.node.children[e];this.parent.isAttached&&Ur.sendMessage(n,xn.Msg.BeforeAttach),this.parent.node.insertBefore(n.node,i),this.parent.isAttached&&Ur.sendMessage(n,xn.Msg.AfterAttach)},r.prototype.moveWidget=function(e,n,i){this.parent.isAttached&&Ur.sendMessage(i,xn.Msg.BeforeDetach),this.parent.node.removeChild(i.node),this.parent.isAttached&&Ur.sendMessage(i,xn.Msg.AfterDetach);var a=this.parent.node.children[n];this.parent.isAttached&&Ur.sendMessage(i,xn.Msg.BeforeAttach),this.parent.node.insertBefore(i.node,a),this.parent.isAttached&&Ur.sendMessage(i,xn.Msg.AfterAttach)},r.prototype.detachWidget=function(e,n){this.parent.isAttached&&Ur.sendMessage(n,xn.Msg.BeforeDetach),this.parent.node.removeChild(n.node),this.parent.isAttached&&Ur.sendMessage(n,xn.Msg.AfterDetach)},r}(Zd),kf=function(t){Js(r,t);function r(e){e===void 0&&(e={});var n=t.call(this)||this;return n._fixed=0,n._spacing=4,n._dirty=!1,n._sizers=[],n._items=[],n._box=null,n._alignment="start",n._direction="top-to-bottom",e.direction!==void 0&&(n._direction=e.direction),e.alignment!==void 0&&(n._alignment=e.alignment),e.spacing!==void 0&&(n._spacing=Dp.clampSpacing(e.spacing)),n}return r.prototype.dispose=function(){Ei(this._items,function(e){e.dispose()}),this._box=null,this._items.length=0,this._sizers.length=0,t.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction!==e&&(this._direction=e,this.parent&&(this.parent.dataset.direction=e,this.parent.fit()))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"alignment",{get:function(){return this._alignment},set:function(e){this._alignment!==e&&(this._alignment=e,this.parent&&(this.parent.dataset.alignment=e,this.parent.update()))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"spacing",{get:function(){return this._spacing},set:function(e){e=Dp.clampSpacing(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),r.prototype.init=function(){this.parent.dataset.direction=this.direction,this.parent.dataset.alignment=this.alignment,t.prototype.init.call(this)},r.prototype.attachWidget=function(e,n){ln.insert(this._items,e,new pb(n)),ln.insert(this._sizers,e,new Kd),this.parent.isAttached&&Ur.sendMessage(n,xn.Msg.BeforeAttach),this.parent.node.appendChild(n.node),this.parent.isAttached&&Ur.sendMessage(n,xn.Msg.AfterAttach),this.parent.fit()},r.prototype.moveWidget=function(e,n,i){ln.move(this._items,e,n),ln.move(this._sizers,e,n),this.parent.update()},r.prototype.detachWidget=function(e,n){var i=ln.removeAt(this._items,e);ln.removeAt(this._sizers,e),this.parent.isAttached&&Ur.sendMessage(n,xn.Msg.BeforeDetach),this.parent.node.removeChild(n.node),this.parent.isAttached&&Ur.sendMessage(n,xn.Msg.AfterDetach),i.dispose(),this.parent.fit()},r.prototype.onBeforeShow=function(e){t.prototype.onBeforeShow.call(this,e),this.parent.update()},r.prototype.onBeforeAttach=function(e){t.prototype.onBeforeAttach.call(this,e),this.parent.fit()},r.prototype.onChildShown=function(e){this.parent.fit()},r.prototype.onChildHidden=function(e){this.parent.fit()},r.prototype.onResize=function(e){this.parent.isVisible&&this._update(e.width,e.height)},r.prototype.onUpdateRequest=function(e){this.parent.isVisible&&this._update(-1,-1)},r.prototype.onFitRequest=function(e){this.parent.isAttached&&this._fit()},r.prototype._fit=function(){for(var e=0,n=0,i=this._items.length;n<i;++n)e+=+!this._items[n].isHidden;this._fixed=this._spacing*Math.max(0,e-1);for(var a=Dp.isHorizontal(this._direction),o=a?this._fixed:0,s=a?0:this._fixed,n=0,i=this._items.length;n<i;++n){var u=this._items[n],c=this._sizers[n];if(u.isHidden){c.minSize=0,c.maxSize=0;continue}u.fit(),c.sizeHint=r.getSizeBasis(u.widget),c.stretch=r.getStretch(u.widget),a?(c.minSize=u.minWidth,c.maxSize=u.maxWidth,o+=u.minWidth,s=Math.max(s,u.minHeight)):(c.minSize=u.minHeight,c.maxSize=u.maxHeight,s+=u.minHeight,o=Math.max(o,u.minWidth))}var h=this._box=Xa.boxSizing(this.parent.node);o+=h.horizontalSum,s+=h.verticalSum;var p=this.parent.node.style;p.minWidth=o+"px",p.minHeight=s+"px",this._dirty=!0,this.parent.parent&&Ur.sendMessage(this.parent.parent,xn.Msg.FitRequest),this._dirty&&Ur.sendMessage(this.parent,xn.Msg.UpdateRequest)},r.prototype._update=function(e,n){this._dirty=!1;for(var i=0,a=0,o=this._items.length;a<o;++a)i+=+!this._items[a].isHidden;if(i!==0){e<0&&(e=this.parent.node.offsetWidth),n<0&&(n=this.parent.node.offsetHeight),this._box||(this._box=Xa.boxSizing(this.parent.node));var s=this._box.paddingTop,u=this._box.paddingLeft,c=e-this._box.horizontalSum,h=n-this._box.verticalSum,p;switch(this._direction){case"left-to-right":p=bc.calc(this._sizers,Math.max(0,c-this._fixed));break;case"top-to-bottom":p=bc.calc(this._sizers,Math.max(0,h-this._fixed));break;case"right-to-left":p=bc.calc(this._sizers,Math.max(0,c-this._fixed)),u+=c;break;case"bottom-to-top":p=bc.calc(this._sizers,Math.max(0,h-this._fixed)),s+=h;break;default:throw"unreachable"}var v=0,x=0;if(p>0)switch(this._alignment){case"start":break;case"center":v=0,x=p/2;break;case"end":v=0,x=p;break;case"justify":v=p/i,x=0;break;default:throw"unreachable"}for(var a=0,o=this._items.length;a<o;++a){var E=this._items[a];if(!E.isHidden){var R=this._sizers[a].size;switch(this._direction){case"left-to-right":E.update(u+x,s,R+v,h),u+=R+v+this._spacing;break;case"top-to-bottom":E.update(u,s+x,c,R+v),s+=R+v+this._spacing;break;case"right-to-left":E.update(u-x-R-v,s,R+v,h),u-=R+v+this._spacing;break;case"bottom-to-top":E.update(u,s-x-R-v,c,R+v),s-=R+v+this._spacing;break;default:throw"unreachable"}}}}},r}(OE);(function(t){function r(a){return Dp.stretchProperty.get(a)}t.getStretch=r;function e(a,o){Dp.stretchProperty.set(a,o)}t.setStretch=e;function n(a){return Dp.sizeBasisProperty.get(a)}t.getSizeBasis=n;function i(a,o){Dp.sizeBasisProperty.set(a,o)}t.setSizeBasis=i})(kf||(kf={}));var Dp;(function(t){t.stretchProperty=new Ac({name:"stretch",create:function(){return 0},coerce:function(i,a){return Math.max(0,Math.floor(a))},changed:n}),t.sizeBasisProperty=new Ac({name:"sizeBasis",create:function(){return 0},coerce:function(i,a){return Math.max(0,Math.floor(a))},changed:n});function r(i){return i==="left-to-right"||i==="right-to-left"}t.isHorizontal=r;function e(i){return Math.max(0,Math.floor(i))}t.clampSpacing=e;function n(i){i.parent&&i.parent.layout instanceof kf&&i.parent.fit()}})(Dp||(Dp={}));var db=function(t){Js(r,t);function r(e){e===void 0&&(e={});var n=t.call(this)||this;return n.addClass("lm-Panel"),n.addClass("p-Panel"),n.layout=HB.createLayout(e),n}return Object.defineProperty(r.prototype,"widgets",{get:function(){return this.layout.widgets},enumerable:!0,configurable:!0}),r.prototype.addWidget=function(e){this.layout.addWidget(e)},r.prototype.insertWidget=function(e,n){this.layout.insertWidget(e,n)},r}(xn),HB;(function(t){function r(e){return e.layout||new OE}t.createLayout=r})(HB||(HB={}));var pie=function(t){Js(r,t);function r(e){e===void 0&&(e={});var n=t.call(this,{layout:WB.createLayout(e)})||this;return n.addClass("lm-BoxPanel"),n.addClass("p-BoxPanel"),n}return Object.defineProperty(r.prototype,"direction",{get:function(){return this.layout.direction},set:function(e){this.layout.direction=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"alignment",{get:function(){return this.layout.alignment},set:function(e){this.layout.alignment=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"spacing",{get:function(){return this.layout.spacing},set:function(e){this.layout.spacing=e},enumerable:!0,configurable:!0}),r.prototype.onChildAdded=function(e){e.child.addClass("lm-BoxPanel-child"),e.child.addClass("p-BoxPanel-child")},r.prototype.onChildRemoved=function(e){e.child.removeClass("lm-BoxPanel-child"),e.child.removeClass("p-BoxPanel-child")},r}(db);(function(t){function r(a){return kf.getStretch(a)}t.getStretch=r;function e(a,o){kf.setStretch(a,o)}t.setStretch=e;function n(a){return kf.getSizeBasis(a)}t.getSizeBasis=n;function i(a,o){kf.setSizeBasis(a,o)}t.setSizeBasis=i})(pie||(pie={}));var WB;(function(t){function r(e){return e.layout||new kf(e)}t.createLayout=r})(WB||(WB={}));var die=function(t){Js(r,t);function r(e){var n=t.call(this,{node:Yd.createNode()})||this;return n._activeIndex=-1,n._items=[],n._results=null,n.addClass("lm-CommandPalette"),n.addClass("p-CommandPalette"),n.setFlag(xn.Flag.DisallowLayout),n.commands=e.commands,n.renderer=e.renderer||r.defaultRenderer,n.commands.commandChanged.connect(n._onGenericChange,n),n.commands.keyBindingChanged.connect(n._onGenericChange,n),n}return r.prototype.dispose=function(){this._items.length=0,this._results=null,t.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"searchNode",{get:function(){return this.node.getElementsByClassName("lm-CommandPalette-search")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"inputNode",{get:function(){return this.node.getElementsByClassName("lm-CommandPalette-input")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"contentNode",{get:function(){return this.node.getElementsByClassName("lm-CommandPalette-content")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),r.prototype.addItem=function(e){var n=Yd.createItem(this.commands,e);return this._items.push(n),this.refresh(),n},r.prototype.removeItem=function(e){this.removeItemAt(this._items.indexOf(e))},r.prototype.removeItemAt=function(e){var n=ln.removeAt(this._items,e);n&&this.refresh()},r.prototype.clearItems=function(){this._items.length!==0&&(this._items.length=0,this.refresh())},r.prototype.refresh=function(){if(this._results=null,this.inputNode.value!==""){var e=this.node.getElementsByClassName("lm-close-icon")[0];e.style.display="inherit"}else{var e=this.node.getElementsByClassName("lm-close-icon")[0];e.style.display="none"}this.update()},r.prototype.handleEvent=function(e){switch(e.type){case"click":this._evtClick(e);break;case"keydown":this._evtKeyDown(e);break;case"input":this.refresh();break;case"focus":case"blur":this._toggleFocused();break}},r.prototype.onBeforeAttach=function(e){this.node.addEventListener("click",this),this.node.addEventListener("keydown",this),this.node.addEventListener("input",this),this.node.addEventListener("focus",this,!0),this.node.addEventListener("blur",this,!0)},r.prototype.onAfterDetach=function(e){this.node.removeEventListener("click",this),this.node.removeEventListener("keydown",this),this.node.removeEventListener("input",this),this.node.removeEventListener("focus",this,!0),this.node.removeEventListener("blur",this,!0)},r.prototype.onActivateRequest=function(e){if(this.isAttached){var n=this.inputNode;n.focus(),n.select()}},r.prototype.onUpdateRequest=function(e){var n=this.inputNode.value,i=this.contentNode,a=this._results;if(a||(a=this._results=Yd.search(this._items,n),this._activeIndex=n?ln.findFirstIndex(a,Yd.canActivate):-1),!n&&a.length===0){Bp.render(null,i);return}if(n&&a.length===0){var o=this.renderer.renderEmptyMessage({query:n});Bp.render(o,i);return}for(var s=this.renderer,u=this._activeIndex,c=new Array(a.length),h=0,p=a.length;h<p;++h){var v=a[h];if(v.type==="header"){var x=v.indices,E=v.category;c[h]=s.renderHeader({category:E,indices:x})}else{var R=v.item,x=v.indices,D=h===u;c[h]=s.renderItem({item:R,indices:x,active:D})}}if(Bp.render(c,i),u<0||u>=a.length)i.scrollTop=0;else{var H=i.children[u];Xa.scrollIntoViewIfNeeded(i,H)}},r.prototype._evtClick=function(e){if(e.button===0){if(e.target.classList.contains("lm-close-icon")){this.inputNode.value="",this.refresh();return}var n=ln.findFirstIndex(this.contentNode.children,function(i){return i.contains(e.target)});n!==-1&&(e.preventDefault(),e.stopPropagation(),this._execute(n))}},r.prototype._evtKeyDown=function(e){if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey))switch(e.keyCode){case 13:e.preventDefault(),e.stopPropagation(),this._execute(this._activeIndex);break;case 38:e.preventDefault(),e.stopPropagation(),this._activatePreviousItem();break;case 40:e.preventDefault(),e.stopPropagation(),this._activateNextItem();break}},r.prototype._activateNextItem=function(){if(!(!this._results||this._results.length===0)){var e=this._activeIndex,n=this._results.length,i=e<n-1?e+1:0,a=i===0?n-1:i-1;this._activeIndex=ln.findFirstIndex(this._results,Yd.canActivate,i,a),this.update()}},r.prototype._activatePreviousItem=function(){if(!(!this._results||this._results.length===0)){var e=this._activeIndex,n=this._results.length,i=e<=0?n-1:e-1,a=i===n-1?0:i+1;this._activeIndex=ln.findLastIndex(this._results,Yd.canActivate,i,a),this.update()}},r.prototype._execute=function(e){if(this._results){var n=this._results[e];if(n){if(n.type==="header"){var i=this.inputNode;i.value=n.category.toLowerCase()+" ",i.focus(),this.refresh();return}n.item.isEnabled&&(this.commands.execute(n.item.command,n.item.args),this.inputNode.value="",this.refresh())}}},r.prototype._toggleFocused=function(){var e=document.activeElement===this.inputNode;this.toggleClass("lm-mod-focused",e),this.toggleClass("p-mod-focused",e)},r.prototype._onGenericChange=function(){this.refresh()},r}(xn);(function(t){var r=function(){function e(){}return e.prototype.renderHeader=function(n){var i=this.formatHeader(n);return Ya.li({className:"lm-CommandPalette-header p-CommandPalette-header"},i)},e.prototype.renderItem=function(n){var i=this.createItemClass(n),a=this.createItemDataset(n);return Ya.li({className:i,dataset:a},this.renderItemIcon(n),this.renderItemContent(n),this.renderItemShortcut(n))},e.prototype.renderEmptyMessage=function(n){var i=this.formatEmptyMessage(n);return Ya.li({className:"lm-CommandPalette-emptyMessage p-CommandPalette-emptyMessage"},i)},e.prototype.renderItemIcon=function(n){var i=this.createIconClass(n);return typeof n.item.icon=="string"?Ya.div({className:i},n.item.iconLabel):Ya.div({className:i},n.item.icon,n.item.iconLabel)},e.prototype.renderItemContent=function(n){return Ya.div({className:"lm-CommandPalette-itemContent p-CommandPalette-itemContent"},this.renderItemLabel(n),this.renderItemCaption(n))},e.prototype.renderItemLabel=function(n){var i=this.formatItemLabel(n);return Ya.div({className:"lm-CommandPalette-itemLabel p-CommandPalette-itemLabel"},i)},e.prototype.renderItemCaption=function(n){var i=this.formatItemCaption(n);return Ya.div({className:"lm-CommandPalette-itemCaption p-CommandPalette-itemCaption"},i)},e.prototype.renderItemShortcut=function(n){var i=this.formatItemShortcut(n);return Ya.div({className:"lm-CommandPalette-itemShortcut p-CommandPalette-itemShortcut"},i)},e.prototype.createItemClass=function(n){var i="lm-CommandPalette-item";i+=" p-CommandPalette-item",n.item.isEnabled||(i+=" lm-mod-disabled",i+=" p-mod-disabled"),n.item.isToggled&&(i+=" lm-mod-toggled",i+=" p-mod-toggled"),n.active&&(i+=" lm-mod-active",i+=" p-mod-active");var a=n.item.className;return a&&(i+=" "+a),i},e.prototype.createItemDataset=function(n){return Rh(Rh({},n.item.dataset),{command:n.item.command})},e.prototype.createIconClass=function(n){var i="lm-CommandPalette-itemIcon";i+=" p-CommandPalette-itemIcon";var a=n.item.iconClass;return a?i+" "+a:i},e.prototype.formatHeader=function(n){return!n.indices||n.indices.length===0?n.category:H0.highlight(n.category,n.indices,Ya.mark)},e.prototype.formatEmptyMessage=function(n){return"No commands found that match '"+n.query+"'"},e.prototype.formatItemShortcut=function(n){var i=n.item.keyBinding;return i?i.keys.map(Y0.formatKeystroke).join(", "):null},e.prototype.formatItemLabel=function(n){return!n.indices||n.indices.length===0?n.item.label:H0.highlight(n.item.label,n.indices,Ya.mark)},e.prototype.formatItemCaption=function(n){return n.item.caption},e}();t.Renderer=r,t.defaultRenderer=new r})(die||(die={}));var Yd;(function(t){function r(){var v=document.createElement("div"),x=document.createElement("div"),E=document.createElement("div"),R=document.createElement("input"),D=document.createElement("ul"),H=document.createElement("button");return x.className="lm-CommandPalette-search",E.className="lm-CommandPalette-wrapper",R.className="lm-CommandPalette-input",H.className="lm-close-icon",D.className="lm-CommandPalette-content",x.classList.add("p-CommandPalette-search"),E.classList.add("p-CommandPalette-wrapper"),R.classList.add("p-CommandPalette-input"),D.classList.add("p-CommandPalette-content"),R.spellcheck=!1,E.appendChild(R),E.appendChild(H),x.appendChild(E),v.appendChild(x),v.appendChild(D),v}t.createNode=r;function e(v,x){return new p(v,x)}t.createItem=e;function n(v,x){var E=s(v,x);return E.sort(c),h(E)}t.search=n;function i(v){return v.type==="item"&&v.item.isEnabled}t.canActivate=i;function a(v){return v.trim().replace(/\s+/g," ")}function o(v){return v.replace(/\s+/g,"").toLowerCase()}function s(v,x){x=o(x);for(var E=[],R=0,D=v.length;R<D;++R){var H=v[R];if(H.isVisible){if(!x){E.push({matchType:3,categoryIndices:null,labelIndices:null,score:0,item:H});continue}var W=u(H,x);W&&(H.isEnabled||(W.score+=1e3),E.push(W))}}return E}function u(v,x){for(var E=v.category.toLowerCase(),R=v.label.toLowerCase(),D=E+" "+R,H=1/0,W=null,$=/\b\w/g;;){var J=$.exec(D);if(!J)break;var B=H0.matchSumOfDeltas(D,x,J.index);if(!B)break;B&&B.score<=H&&(H=B.score,W=B.indices)}if(!W||H===1/0)return null;for(var se=E.length+1,V=ln.lowerBound(W,se,function(re,ee){return re-ee}),X=W.slice(0,V),I=W.slice(V),O=0,U=I.length;O<U;++O)I[O]-=se;return X.length===0?{matchType:0,categoryIndices:null,labelIndices:I,score:H,item:v}:I.length===0?{matchType:1,categoryIndices:X,labelIndices:null,score:H,item:v}:{matchType:2,categoryIndices:X,labelIndices:I,score:H,item:v}}function c(v,x){var E=v.matchType-x.matchType;if(E!==0)return E;var R=v.score-x.score;if(R!==0)return R;var D=0,H=0;switch(v.matchType){case 0:D=v.labelIndices[0],H=x.labelIndices[0];break;case 1:case 2:D=v.categoryIndices[0],H=x.categoryIndices[0];break}if(D!==H)return D-H;var W=v.item.category.localeCompare(x.item.category);if(W!==0)return W;var $=v.item.rank,J=x.item.rank;return $!==J?$<J?-1:1:v.item.label.localeCompare(x.item.label)}function h(v){var x=new Array(v.length);ln.fill(x,!1);for(var E=[],R=0,D=v.length;R<D;++R)if(!x[R]){var H=v[R],W=H.item,$=H.categoryIndices,J=W.category;E.push({type:"header",category:J,indices:$});for(var B=R;B<D;++B)if(!x[B]){var se=v[B],V=se.item,X=se.labelIndices;V.category===J&&(E.push({type:"item",item:V,indices:X}),x[B]=!0)}}return E}var p=function(){function v(x,E){this._commands=x,this.category=a(E.category),this.command=E.command,this.args=E.args||ws.emptyObject,this.rank=E.rank!==void 0?E.rank:1/0}return Object.defineProperty(v.prototype,"label",{get:function(){return this._commands.label(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"icon",{get:function(){return this._commands.icon(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"iconClass",{get:function(){return this._commands.iconClass(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"iconLabel",{get:function(){return this._commands.iconLabel(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"caption",{get:function(){return this._commands.caption(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"className",{get:function(){return this._commands.className(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"dataset",{get:function(){return this._commands.dataset(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"isEnabled",{get:function(){return this._commands.isEnabled(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"isToggled",{get:function(){return this._commands.isToggled(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"isVisible",{get:function(){return this._commands.isVisible(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"keyBinding",{get:function(){var x=this,E=x.command,R=x.args;return ln.findLastValue(this._commands.keyBindings,function(D){return D.command===E&&ws.deepEqual(D.args,R)})||null},enumerable:!0,configurable:!0}),v}()})(Yd||(Yd={}));var qB=function(t){Js(r,t);function r(e){var n=t.call(this,{node:Ql.createNode()})||this;return n._childIndex=-1,n._activeIndex=-1,n._openTimerID=0,n._closeTimerID=0,n._items=[],n._childMenu=null,n._parentMenu=null,n._aboutToClose=new za(n),n._menuRequested=new za(n),n.addClass("lm-Menu"),n.addClass("p-Menu"),n.setFlag(xn.Flag.DisallowLayout),n.commands=e.commands,n.renderer=e.renderer||r.defaultRenderer,n}return r.prototype.dispose=function(){this.close(),this._items.length=0,t.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"aboutToClose",{get:function(){return this._aboutToClose},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"menuRequested",{get:function(){return this._menuRequested},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"parentMenu",{get:function(){return this._parentMenu},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"childMenu",{get:function(){return this._childMenu},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rootMenu",{get:function(){for(var e=this;e._parentMenu;)e=e._parentMenu;return e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"leafMenu",{get:function(){for(var e=this;e._childMenu;)e=e._childMenu;return e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"contentNode",{get:function(){return this.node.getElementsByClassName("lm-Menu-content")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"activeItem",{get:function(){return this._items[this._activeIndex]||null},set:function(e){this.activeIndex=e?this._items.indexOf(e):-1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"activeIndex",{get:function(){return this._activeIndex},set:function(e){(e<0||e>=this._items.length)&&(e=-1),e!==-1&&!Ql.canActivate(this._items[e])&&(e=-1),this._activeIndex!==e&&(this._activeIndex=e,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),r.prototype.activateNextItem=function(){var e=this._items.length,n=this._activeIndex,i=n<e-1?n+1:0,a=i===0?e-1:i-1;this.activeIndex=ln.findFirstIndex(this._items,Ql.canActivate,i,a)},r.prototype.activatePreviousItem=function(){var e=this._items.length,n=this._activeIndex,i=n<=0?e-1:n-1,a=i===e-1?0:i+1;this.activeIndex=ln.findLastIndex(this._items,Ql.canActivate,i,a)},r.prototype.triggerActiveItem=function(){if(this.isAttached){var e=this.activeItem;if(e){if(this._cancelOpenTimer(),this._cancelCloseTimer(),e.type==="submenu"){this._openChildMenu(!0);return}this.rootMenu.close();var n=e.command,i=e.args;this.commands.isEnabled(n,i)?this.commands.execute(n,i):console.log("Command '"+n+"' is disabled.")}}},r.prototype.addItem=function(e){return this.insertItem(this._items.length,e)},r.prototype.insertItem=function(e,n){this.isAttached&&this.close(),this.activeIndex=-1;var i=Math.max(0,Math.min(e,this._items.length)),a=Ql.createItem(this,n);return ln.insert(this._items,i,a),this.update(),a},r.prototype.removeItem=function(e){this.removeItemAt(this._items.indexOf(e))},r.prototype.removeItemAt=function(e){this.isAttached&&this.close(),this.activeIndex=-1;var n=ln.removeAt(this._items,e);n&&this.update()},r.prototype.clearItems=function(){this.isAttached&&this.close(),this.activeIndex=-1,this._items.length!==0&&(this._items.length=0,this.update())},r.prototype.open=function(e,n,i){if(i===void 0&&(i={}),!this.isAttached){var a=i.forceX||!1,o=i.forceY||!1;Ql.openRootMenu(this,e,n,a,o),this.activate()}},r.prototype.handleEvent=function(e){switch(e.type){case"keydown":this._evtKeyDown(e);break;case"mouseup":this._evtMouseUp(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseenter":this._evtMouseEnter(e);break;case"mouseleave":this._evtMouseLeave(e);break;case"mousedown":this._evtMouseDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}},r.prototype.onBeforeAttach=function(e){this.node.addEventListener("keydown",this),this.node.addEventListener("mouseup",this),this.node.addEventListener("mousemove",this),this.node.addEventListener("mouseenter",this),this.node.addEventListener("mouseleave",this),this.node.addEventListener("contextmenu",this),document.addEventListener("mousedown",this,!0)},r.prototype.onAfterDetach=function(e){this.node.removeEventListener("keydown",this),this.node.removeEventListener("mouseup",this),this.node.removeEventListener("mousemove",this),this.node.removeEventListener("mouseenter",this),this.node.removeEventListener("mouseleave",this),this.node.removeEventListener("contextmenu",this),document.removeEventListener("mousedown",this,!0)},r.prototype.onActivateRequest=function(e){this.isAttached&&this.node.focus()},r.prototype.onUpdateRequest=function(e){for(var n=this._items,i=this.renderer,a=this._activeIndex,o=Ql.computeCollapsed(n),s=new Array(n.length),u=0,c=n.length;u<c;++u){var h=n[u],p=u===a,v=o[u];s[u]=i.renderItem({item:h,active:p,collapsed:v})}Bp.render(s,this.contentNode)},r.prototype.onCloseRequest=function(e){this._cancelOpenTimer(),this._cancelCloseTimer(),this.activeIndex=-1;var n=this._childMenu;n&&(this._childIndex=-1,this._childMenu=null,n._parentMenu=null,n.close());var i=this._parentMenu;i&&(this._parentMenu=null,i._childIndex=-1,i._childMenu=null,i.activate()),this.isAttached&&this._aboutToClose.emit(void 0),t.prototype.onCloseRequest.call(this,e)},r.prototype._evtKeyDown=function(e){e.preventDefault(),e.stopPropagation();var n=e.keyCode;if(n===13){this.triggerActiveItem();return}if(n===27){this.close();return}if(n===37){this._parentMenu?this.close():this._menuRequested.emit("previous");return}if(n===38){this.activatePreviousItem();return}if(n===39){var i=this.activeItem;i&&i.type==="submenu"?this.triggerActiveItem():this.rootMenu._menuRequested.emit("next");return}if(n===40){this.activateNextItem();return}var a=hb().keyForKeydownEvent(e);if(a){var o=this._activeIndex+1,s=Ql.findMnemonic(this._items,a,o);s.index!==-1&&!s.multiple?(this.activeIndex=s.index,this.triggerActiveItem()):s.index!==-1?this.activeIndex=s.index:s.auto!==-1&&(this.activeIndex=s.auto)}},r.prototype._evtMouseUp=function(e){e.button===0&&(e.preventDefault(),e.stopPropagation(),this.triggerActiveItem())},r.prototype._evtMouseMove=function(e){var n=ln.findFirstIndex(this.contentNode.children,function(a){return Xa.hitTest(a,e.clientX,e.clientY)});if(n!==this._activeIndex){if(this.activeIndex=n,n=this.activeIndex,n===this._childIndex){this._cancelOpenTimer(),this._cancelCloseTimer();return}this._childIndex!==-1&&this._startCloseTimer(),this._cancelOpenTimer();var i=this.activeItem;!i||i.type!=="submenu"||!i.submenu||this._startOpenTimer()}},r.prototype._evtMouseEnter=function(e){for(var n=this._parentMenu;n;n=n._parentMenu)n._cancelOpenTimer(),n._cancelCloseTimer(),n.activeIndex=n._childIndex},r.prototype._evtMouseLeave=function(e){if(this._cancelOpenTimer(),!this._childMenu){this.activeIndex=-1;return}var n=e.clientX,i=e.clientY;if(Xa.hitTest(this._childMenu.node,n,i)){this._cancelCloseTimer();return}this.activeIndex=-1,this._startCloseTimer()},r.prototype._evtMouseDown=function(e){this._parentMenu||(Ql.hitTestMenus(this,e.clientX,e.clientY)?(e.preventDefault(),e.stopPropagation()):this.close())},r.prototype._openChildMenu=function(e){e===void 0&&(e=!1);var n=this.activeItem;if(!n||n.type!=="submenu"||!n.submenu){this._closeChildMenu();return}var i=n.submenu;if(i!==this._childMenu){this._closeChildMenu(),this._childMenu=i,this._childIndex=this._activeIndex,i._parentMenu=this,Ur.sendMessage(this,xn.Msg.UpdateRequest);var a=this.contentNode.children[this._activeIndex];Ql.openSubmenu(i,a),e&&(i.activeIndex=-1,i.activateNextItem()),i.activate()}},r.prototype._closeChildMenu=function(){this._childMenu&&this._childMenu.close()},r.prototype._startOpenTimer=function(){var e=this;this._openTimerID===0&&(this._openTimerID=window.setTimeout(function(){e._openTimerID=0,e._openChildMenu()},Ql.TIMER_DELAY))},r.prototype._startCloseTimer=function(){var e=this;this._closeTimerID===0&&(this._closeTimerID=window.setTimeout(function(){e._closeTimerID=0,e._closeChildMenu()},Ql.TIMER_DELAY))},r.prototype._cancelOpenTimer=function(){this._openTimerID!==0&&(clearTimeout(this._openTimerID),this._openTimerID=0)},r.prototype._cancelCloseTimer=function(){this._closeTimerID!==0&&(clearTimeout(this._closeTimerID),this._closeTimerID=0)},r}(xn);(function(t){var r=function(){function e(){}return e.prototype.renderItem=function(n){var i=this.createItemClass(n),a=this.createItemDataset(n);return Ya.li({className:i,dataset:a},this.renderIcon(n),this.renderLabel(n),this.renderShortcut(n),this.renderSubmenu(n))},e.prototype.renderIcon=function(n){var i=this.createIconClass(n);return typeof n.item.icon=="string"?Ya.div({className:i},n.item.iconLabel):Ya.div({className:i},n.item.icon,n.item.iconLabel)},e.prototype.renderLabel=function(n){var i=this.formatLabel(n);return Ya.div({className:"lm-Menu-itemLabel p-Menu-itemLabel"},i)},e.prototype.renderShortcut=function(n){var i=this.formatShortcut(n);return Ya.div({className:"lm-Menu-itemShortcut p-Menu-itemShortcut"},i)},e.prototype.renderSubmenu=function(n){return Ya.div({className:"lm-Menu-itemSubmenuIcon p-Menu-itemSubmenuIcon"})},e.prototype.createItemClass=function(n){var i="lm-Menu-item";i+=" p-Menu-item",n.item.isEnabled||(i+=" lm-mod-disabled",i+=" p-mod-disabled"),n.item.isToggled&&(i+=" lm-mod-toggled",i+=" p-mod-toggled"),n.item.isVisible||(i+=" lm-mod-hidden",i+=" p-mod-hidden"),n.active&&(i+=" lm-mod-active",i+=" p-mod-active"),n.collapsed&&(i+=" lm-mod-collapsed",i+=" p-mod-collapsed");var a=n.item.className;return a&&(i+=" "+a),i},e.prototype.createItemDataset=function(n){var i,a=n.item,o=a.type,s=a.command,u=a.dataset;return o==="command"?i=Rh(Rh({},u),{type:o,command:s}):i=Rh(Rh({},u),{type:o}),i},e.prototype.createIconClass=function(n){var i="lm-Menu-itemIcon";i+=" p-Menu-itemIcon";var a=n.item.iconClass;return a?i+" "+a:i},e.prototype.formatLabel=function(n){var i=n.item,a=i.label,o=i.mnemonic;if(o<0||o>=a.length)return a;var s=a.slice(0,o),u=a.slice(o+1),c=a[o],h=Ya.span({className:"lm-Menu-itemMnemonic p-Menu-itemMnemonic"},c);return[s,h,u]},e.prototype.formatShortcut=function(n){var i=n.item.keyBinding;return i?i.keys.map(Y0.formatKeystroke).join(", "):null},e}();t.Renderer=r,t.defaultRenderer=new r})(qB||(qB={}));var Ql;(function(t){t.TIMER_DELAY=300,t.SUBMENU_OVERLAP=3;function r(){var h=document.createElement("div"),p=document.createElement("ul");return p.className="lm-Menu-content",p.classList.add("p-Menu-content"),h.appendChild(p),h.tabIndex=-1,h}t.createNode=r;function e(h){return h.type!=="separator"&&h.isEnabled&&h.isVisible}t.canActivate=e;function n(h,p){return new c(h.commands,p)}t.createItem=n;function i(h,p,v){for(var x=h;x;x=x.childMenu)if(Xa.hitTest(x.node,p,v))return!0;return!1}t.hitTestMenus=i;function a(h){var p=new Array(h.length);ln.fill(p,!1);for(var v=0,x=h.length;v<x;++v){var E=h[v];if(E.isVisible){if(E.type!=="separator")break;p[v]=!0}}for(var R=x-1;R>=0;--R){var E=h[R];if(E.isVisible){if(E.type!=="separator")break;p[R]=!0}}for(var D=!1;++v<R;){var E=h[v];E.isVisible&&(E.type!=="separator"?D=!1:D?p[v]=!0:D=!0)}return p}t.computeCollapsed=a;function o(h,p,v,x,E){Ur.sendMessage(h,xn.Msg.UpdateRequest);var R=window.pageXOffset,D=window.pageYOffset,H=document.documentElement.clientWidth,W=document.documentElement.clientHeight,$=W-(E?v:0),J=h.node,B=J.style;B.top="",B.left="",B.width="",B.height="",B.visibility="hidden",B.maxHeight=$+"px",xn.attach(h,document.body);var se=J.getBoundingClientRect(),V=se.width,X=se.height;!x&&p+V>R+H&&(p=R+H-V),!E&&v+X>D+W&&(v>D+W?v=D+W-X:v=v-X),B.top=Math.max(0,v)+"px",B.left=Math.max(0,p)+"px",B.visibility=""}t.openRootMenu=o;function s(h,p){Ur.sendMessage(h,xn.Msg.UpdateRequest);var v=window.pageXOffset,x=window.pageYOffset,E=document.documentElement.clientWidth,R=document.documentElement.clientHeight,D=R,H=h.node,W=H.style;W.top="",W.left="",W.width="",W.height="",W.visibility="hidden",W.maxHeight=D+"px",xn.attach(h,document.body);var $=H.getBoundingClientRect(),J=$.width,B=$.height,se=Xa.boxSizing(h.node),V=p.getBoundingClientRect(),X=V.right-t.SUBMENU_OVERLAP;X+J>v+E&&(X=V.left+t.SUBMENU_OVERLAP-J);var I=V.top-se.borderTop-se.paddingTop;I+B>x+R&&(I=V.bottom+se.borderBottom+se.paddingBottom-B),W.top=Math.max(0,I)+"px",W.left=Math.max(0,X)+"px",W.visibility=""}t.openSubmenu=s;function u(h,p,v){for(var x=-1,E=-1,R=!1,D=p.toUpperCase(),H=0,W=h.length;H<W;++H){var $=(H+v)%W,J=h[$];if(e(J)){var B=J.label;if(B.length!==0){var se=J.mnemonic;if(se>=0&&se<B.length){B[se].toUpperCase()===D&&(x===-1?x=$:R=!0);continue}E===-1&&B[0].toUpperCase()===D&&(E=$)}}}return{index:x,multiple:R,auto:E}}t.findMnemonic=u;var c=function(){function h(p,v){this._commands=p,this.type=v.type||"command",this.command=v.command||"",this.args=v.args||ws.emptyObject,this.submenu=v.submenu||null}return Object.defineProperty(h.prototype,"label",{get:function(){return this.type==="command"?this._commands.label(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.label:""},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"mnemonic",{get:function(){return this.type==="command"?this._commands.mnemonic(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.mnemonic:-1},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"icon",{get:function(){return this.type==="command"?this._commands.icon(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.icon:this.iconClass},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"iconClass",{get:function(){return this.type==="command"?this._commands.iconClass(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.iconClass:""},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"iconLabel",{get:function(){return this.type==="command"?this._commands.iconLabel(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.iconLabel:""},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"caption",{get:function(){return this.type==="command"?this._commands.caption(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.caption:""},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"className",{get:function(){return this.type==="command"?this._commands.className(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.className:""},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"dataset",{get:function(){return this.type==="command"?this._commands.dataset(this.command,this.args):this.type==="submenu"&&this.submenu?this.submenu.title.dataset:{}},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"isEnabled",{get:function(){return this.type==="command"?this._commands.isEnabled(this.command,this.args):this.type==="submenu"?this.submenu!==null:!0},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"isToggled",{get:function(){return this.type==="command"?this._commands.isToggled(this.command,this.args):!1},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"isVisible",{get:function(){return this.type==="command"?this._commands.isVisible(this.command,this.args):this.type==="submenu"?this.submenu!==null:!0},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"keyBinding",{get:function(){if(this.type==="command"){var p=this,v=p.command,x=p.args;return ln.findLastValue(this._commands.keyBindings,function(E){return E.command===v&&ws.deepEqual(E.args,x)})||null}return null},enumerable:!0,configurable:!0}),h}()})(Ql||(Ql={}));var h7t=function(){function t(r){this._idTick=0,this._items=[],this.menu=new qB(r)}return t.prototype.addItem=function(r){var e=this,n=SE.createItem(r,this._idTick++);return this._items.push(n),new X0(function(){ln.removeFirstOf(e._items,n)})},t.prototype.open=function(r){var e=this;if(this.menu.clearItems(),this._items.length===0)return!1;var n=SE.matchItems(this._items,r);return!n||n.length===0?!1:(Ei(n,function(i){e.menu.addItem(i)}),this.menu.open(r.clientX,r.clientY),!0)},t}(),SE;(function(t){function r(a,o){var s=n(a.selector),u=a.rank!==void 0?a.rank:1/0;return Rh(Rh({},a),{selector:s,rank:u,id:o})}t.createItem=r;function e(a,o){var s=o.target;if(!s)return null;var u=o.currentTarget;if(!u||!u.contains(s)&&(s=document.elementFromPoint(o.clientX,o.clientY),!s||!u.contains(s)))return null;for(var c=[],h=a.slice();s!==null;){for(var p=[],v=0,x=h.length;v<x;++v){var E=h[v];E&&Rf.matches(s,E.selector)&&(p.push(E),h[v]=null)}if(p.length!==0&&(p.sort(i),c.push.apply(c,p)),s===u)break;s=s.parentElement}return c}t.matchItems=e;function n(a){if(a.indexOf(",")!==-1)throw new Error("Selector cannot contain commas: "+a);if(!Rf.isValid(a))throw new Error("Invalid selector: "+a);return a}function i(a,o){var s=Rf.calculateSpecificity(a.selector),u=Rf.calculateSpecificity(o.selector);if(s!==u)return u-s;var c=a.rank,h=o.rank;return c!==h?c<h?-1:1:a.id-o.id}})(SE||(SE={}));var pFe=function(t){Js(r,t);function r(e){var n=t.call(this)||this;return n._spacing=4,n._dirty=!1,n._root=null,n._box=null,n._items=new Map,n.renderer=e.renderer,e.spacing!==void 0&&(n._spacing=Bu.clampSpacing(e.spacing)),n}return r.prototype.dispose=function(){var e=this.iter();this._items.forEach(function(n){n.dispose()}),this._box=null,this._root=null,this._items.clear(),Ei(e,function(n){n.dispose()}),t.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"spacing",{get:function(){return this._spacing},set:function(e){e=Bu.clampSpacing(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isEmpty",{get:function(){return this._root===null},enumerable:!0,configurable:!0}),r.prototype.iter=function(){return this._root?this._root.iterAllWidgets():Ih()},r.prototype.widgets=function(){return this._root?this._root.iterUserWidgets():Ih()},r.prototype.selectedWidgets=function(){return this._root?this._root.iterSelectedWidgets():Ih()},r.prototype.tabBars=function(){return this._root?this._root.iterTabBars():Ih()},r.prototype.handles=function(){return this._root?this._root.iterHandles():Ih()},r.prototype.moveHandle=function(e,n,i){var a=e.classList.contains("lm-mod-hidden");if(a=a||e.classList.contains("p-mod-hidden"),!(!this._root||a)){var o=this._root.findSplitNode(e);if(o){var s;o.node.orientation==="horizontal"?s=n-e.offsetLeft:s=i-e.offsetTop,s!==0&&(o.node.holdSizes(),bc.adjust(o.node.sizers,o.index,s),this.parent&&this.parent.update())}}},r.prototype.saveLayout=function(){return this._root?(this._root.holdAllSizes(),{main:this._root.createConfig()}):{main:null}},r.prototype.restoreLayout=function(e){var n=this,i=new Set,a;e.main?a=Bu.normalizeAreaConfig(e.main,i):a=null;var o=this.widgets(),s=this.tabBars(),u=this.handles();this._root=null,Ei(o,function(c){i.has(c)||(c.parent=null)}),Ei(s,function(c){c.dispose()}),Ei(u,function(c){c.parentNode&&c.parentNode.removeChild(c)}),i.forEach(function(c){c.parent=n.parent}),a?this._root=Bu.realizeAreaConfig(a,{createTabBar:function(){return n._createTabBar()},createHandle:function(){return n._createHandle()}}):this._root=null,this.parent&&(i.forEach(function(c){n.attachWidget(c)}),this.parent.fit())},r.prototype.addWidget=function(e,n){n===void 0&&(n={});var i=n.ref||null,a=n.mode||"tab-after",o=null;if(this._root&&i&&(o=this._root.findTabNode(i)),i&&!o)throw new Error("Reference widget is not in the layout.");switch(e.parent=this.parent,a){case"tab-after":this._insertTab(e,i,o,!0);break;case"tab-before":this._insertTab(e,i,o,!1);break;case"split-top":this._insertSplit(e,i,o,"vertical",!1);break;case"split-left":this._insertSplit(e,i,o,"horizontal",!1);break;case"split-right":this._insertSplit(e,i,o,"horizontal",!0);break;case"split-bottom":this._insertSplit(e,i,o,"vertical",!0);break}this.parent&&(this.attachWidget(e),this.parent.fit())},r.prototype.removeWidget=function(e){this._removeWidget(e),this.parent&&(this.detachWidget(e),this.parent.fit())},r.prototype.hitTestTabAreas=function(e,n){if(!this._root||!this.parent||!this.parent.isVisible)return null;this._box||(this._box=Xa.boxSizing(this.parent.node));var i=this.parent.node.getBoundingClientRect(),a=e-i.left-this._box.borderLeft,o=n-i.top-this._box.borderTop,s=this._root.hitTestTabNodes(a,o);if(!s)return null;var u=s.tabBar,c=s.top,h=s.left,p=s.width,v=s.height,x=this._box.borderLeft+this._box.borderRight,E=this._box.borderTop+this._box.borderBottom,R=i.width-x-(h+p),D=i.height-E-(c+v);return{tabBar:u,x:a,y:o,top:c,left:h,right:R,bottom:D,width:p,height:v}},r.prototype.init=function(){var e=this;t.prototype.init.call(this),Ei(this,function(n){e.attachWidget(n)}),Ei(this.handles(),function(n){e.parent.node.appendChild(n)}),this.parent.fit()},r.prototype.attachWidget=function(e){this.parent.node!==e.node.parentNode&&(this._items.set(e,new pb(e)),this.parent.isAttached&&Ur.sendMessage(e,xn.Msg.BeforeAttach),this.parent.node.appendChild(e.node),this.parent.isAttached&&Ur.sendMessage(e,xn.Msg.AfterAttach))},r.prototype.detachWidget=function(e){if(this.parent.node===e.node.parentNode){this.parent.isAttached&&Ur.sendMessage(e,xn.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.isAttached&&Ur.sendMessage(e,xn.Msg.AfterDetach);var n=this._items.get(e);n&&(this._items.delete(e),n.dispose())}},r.prototype.onBeforeShow=function(e){t.prototype.onBeforeShow.call(this,e),this.parent.update()},r.prototype.onBeforeAttach=function(e){t.prototype.onBeforeAttach.call(this,e),this.parent.fit()},r.prototype.onChildShown=function(e){this.parent.fit()},r.prototype.onChildHidden=function(e){this.parent.fit()},r.prototype.onResize=function(e){this.parent.isVisible&&this._update(e.width,e.height)},r.prototype.onUpdateRequest=function(e){this.parent.isVisible&&this._update(-1,-1)},r.prototype.onFitRequest=function(e){this.parent.isAttached&&this._fit()},r.prototype._removeWidget=function(e){if(this._root){var n=this._root.findTabNode(e);if(n){if(n.tabBar.titles.length>1){n.tabBar.removeTab(e.title);return}if(n.tabBar.dispose(),this._root===n){this._root=null;return}this._root.holdAllSizes();var i=n.parent;n.parent=null;var a=ln.removeFirstOf(i.children,n),o=ln.removeAt(i.handles,a);if(ln.removeAt(i.sizers,a),o.parentNode&&o.parentNode.removeChild(o),i.children.length>1){i.syncHandles();return}var s=i.parent;i.parent=null;var u=i.children[0],c=i.handles[0];if(i.children.length=0,i.handles.length=0,i.sizers.length=0,c.parentNode&&c.parentNode.removeChild(c),this._root===i){u.parent=null,this._root=u;return}var h=s,p=h.children.indexOf(i);if(u instanceof Bu.TabLayoutNode){u.parent=h,h.children[p]=u;return}var v=ln.removeAt(h.handles,p);ln.removeAt(h.children,p),ln.removeAt(h.sizers,p),v.parentNode&&v.parentNode.removeChild(v);for(var x=0,E=u.children.length;x<E;++x){var R=u.children[x],D=u.handles[x],H=u.sizers[x];ln.insert(h.children,p+x,R),ln.insert(h.handles,p+x,D),ln.insert(h.sizers,p+x,H),R.parent=h}u.children.length=0,u.handles.length=0,u.sizers.length=0,u.parent=null,h.syncHandles()}}},r.prototype._insertTab=function(e,n,i,a){if(e!==n){if(!this._root){var o=new Bu.TabLayoutNode(this._createTabBar());o.tabBar.addTab(e.title),this._root=o;return}i||(i=this._root.findFirstTabNode()),i.tabBar.titles.indexOf(e.title)===-1&&(this._removeWidget(e),e.hide());var s;n?s=i.tabBar.titles.indexOf(n.title):s=i.tabBar.currentIndex,i.tabBar.insertTab(s+(a?1:0),e.title)}},r.prototype._insertSplit=function(e,n,i,a,o){if(!(e===n&&i&&i.tabBar.titles.length===1)){this._removeWidget(e);var s=new Bu.TabLayoutNode(this._createTabBar());if(s.tabBar.addTab(e.title),!this._root){this._root=s;return}if(!i||!i.parent){var u=this._splitRoot(a),c=o?u.children.length:0;u.normalizeSizes();var h=Bu.createSizer(i?1:Bu.GOLDEN_RATIO);ln.insert(u.children,c,s),ln.insert(u.sizers,c,h),ln.insert(u.handles,c,this._createHandle()),s.parent=u,u.normalizeSizes(),u.syncHandles();return}var p=i.parent;if(p.orientation===a){var v=p.children.indexOf(i);p.normalizeSizes();var x=p.sizers[v].sizeHint/=2,E=v+(o?1:0);ln.insert(p.children,E,s),ln.insert(p.sizers,E,Bu.createSizer(x)),ln.insert(p.handles,E,this._createHandle()),s.parent=p,p.syncHandles();return}var R=ln.removeFirstOf(p.children,i),D=new Bu.SplitLayoutNode(a);D.normalized=!0,D.children.push(i),D.sizers.push(Bu.createSizer(.5)),D.handles.push(this._createHandle()),i.parent=D;var H=o?1:0;ln.insert(D.children,H,s),ln.insert(D.sizers,H,Bu.createSizer(.5)),ln.insert(D.handles,H,this._createHandle()),s.parent=D,D.syncHandles(),ln.insert(p.children,R,D),D.parent=p}},r.prototype._splitRoot=function(e){var n=this._root;if(n instanceof Bu.SplitLayoutNode&&n.orientation===e)return n;var i=this._root=new Bu.SplitLayoutNode(e);return n&&(i.children.push(n),i.sizers.push(Bu.createSizer(0)),i.handles.push(this._createHandle()),n.parent=i),i},r.prototype._fit=function(){var e=0,n=0;if(this._root){var i=this._root.fit(this._spacing,this._items);e=i.minWidth,n=i.minHeight}var a=this._box=Xa.boxSizing(this.parent.node);e+=a.horizontalSum,n+=a.verticalSum;var o=this.parent.node.style;o.minWidth=e+"px",o.minHeight=n+"px",this._dirty=!0,this.parent.parent&&Ur.sendMessage(this.parent.parent,xn.Msg.FitRequest),this._dirty&&Ur.sendMessage(this.parent,xn.Msg.UpdateRequest)},r.prototype._update=function(e,n){if(this._dirty=!1,!!this._root){e<0&&(e=this.parent.node.offsetWidth),n<0&&(n=this.parent.node.offsetHeight),this._box||(this._box=Xa.boxSizing(this.parent.node));var i=this._box.paddingTop,a=this._box.paddingLeft,o=e-this._box.horizontalSum,s=n-this._box.verticalSum;this._root.update(i,a,o,s,this._spacing,this._items)}},r.prototype._createTabBar=function(){var e=this.renderer.createTabBar();return e.orientation="horizontal",this.parent&&(e.parent=this.parent,this.attachWidget(e)),e},r.prototype._createHandle=function(){var e=this.renderer.createHandle(),n=e.style;return n.position="absolute",n.top="0",n.left="0",n.width="0",n.height="0",this.parent&&this.parent.node.appendChild(e),e},r}(Zd),Bu;(function(t){t.GOLDEN_RATIO=.618;function r(p){return Math.max(0,Math.floor(p))}t.clampSpacing=r;function e(p){var v=new Kd;return v.sizeHint=p,v.size=p,v}t.createSizer=e;function n(p,v){var x;return p.type==="tab-area"?x=s(p,v):x=u(p,v),x}t.normalizeAreaConfig=n;function i(p,v){var x;return p.type==="tab-area"?x=c(p,v):x=h(p,v),x}t.realizeAreaConfig=i;var a=function(){function p(v){this.parent=null,this._top=0,this._left=0,this._width=0,this._height=0;var x=new Kd,E=new Kd;x.stretch=0,E.stretch=1,this.tabBar=v,this.sizers=[x,E]}return Object.defineProperty(p.prototype,"top",{get:function(){return this._top},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"left",{get:function(){return this._left},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),p.prototype.iterAllWidgets=function(){return TB(cb(this.tabBar),this.iterUserWidgets())},p.prototype.iterUserWidgets=function(){return Wd(this.tabBar.titles,function(v){return v.owner})},p.prototype.iterSelectedWidgets=function(){var v=this.tabBar.currentTitle;return v?cb(v.owner):Ih()},p.prototype.iterTabBars=function(){return cb(this.tabBar)},p.prototype.iterHandles=function(){return Ih()},p.prototype.findTabNode=function(v){return this.tabBar.titles.indexOf(v.title)!==-1?this:null},p.prototype.findSplitNode=function(v){return null},p.prototype.findFirstTabNode=function(){return this},p.prototype.hitTestTabNodes=function(v,x){return v<this._left||v>=this._left+this._width||x<this._top||x>=this._top+this._height?null:this},p.prototype.createConfig=function(){var v=this.tabBar.titles.map(function(E){return E.owner}),x=this.tabBar.currentIndex;return{type:"tab-area",widgets:v,currentIndex:x}},p.prototype.holdAllSizes=function(){},p.prototype.fit=function(v,x){var E=0,R=0,D=1/0,H=1/0,W=x.get(this.tabBar),$=this.tabBar.currentTitle,J=$?x.get($.owner):void 0,B=this.sizers,se=B[0],V=B[1];return W&&W.fit(),J&&J.fit(),W&&!W.isHidden?(E=Math.max(E,W.minWidth),R+=W.minHeight,se.minSize=W.minHeight,se.maxSize=W.maxHeight):(se.minSize=0,se.maxSize=0),J&&!J.isHidden?(E=Math.max(E,J.minWidth),R+=J.minHeight,V.minSize=J.minHeight,V.maxSize=1/0):(V.minSize=0,V.maxSize=1/0),{minWidth:E,minHeight:R,maxWidth:D,maxHeight:H}},p.prototype.update=function(v,x,E,R,D,H){this._top=x,this._left=v,this._width=E,this._height=R;var W=H.get(this.tabBar),$=this.tabBar.currentTitle,J=$?H.get($.owner):void 0;if(bc.calc(this.sizers,R),W&&!W.isHidden){var B=this.sizers[0].size;W.update(v,x,E,B),x+=B}if(J&&!J.isHidden){var B=this.sizers[1].size;J.update(v,x,E,B)}},p}();t.TabLayoutNode=a;var o=function(){function p(v){this.parent=null,this.normalized=!1,this.children=[],this.sizers=[],this.handles=[],this.orientation=v}return p.prototype.iterAllWidgets=function(){var v=Wd(this.children,function(x){return x.iterAllWidgets()});return new Lv(v)},p.prototype.iterUserWidgets=function(){var v=Wd(this.children,function(x){return x.iterUserWidgets()});return new Lv(v)},p.prototype.iterSelectedWidgets=function(){var v=Wd(this.children,function(x){return x.iterSelectedWidgets()});return new Lv(v)},p.prototype.iterTabBars=function(){var v=Wd(this.children,function(x){return x.iterTabBars()});return new Lv(v)},p.prototype.iterHandles=function(){var v=Wd(this.children,function(x){return x.iterHandles()});return TB(this.handles,new Lv(v))},p.prototype.findTabNode=function(v){for(var x=0,E=this.children.length;x<E;++x){var R=this.children[x].findTabNode(v);if(R)return R}return null},p.prototype.findSplitNode=function(v){var x=this.handles.indexOf(v);if(x!==-1)return{index:x,node:this};for(var E=0,R=this.children.length;E<R;++E){var D=this.children[E].findSplitNode(v);if(D)return D}return null},p.prototype.findFirstTabNode=function(){return this.children.length===0?null:this.children[0].findFirstTabNode()},p.prototype.hitTestTabNodes=function(v,x){for(var E=0,R=this.children.length;E<R;++E){var D=this.children[E].hitTestTabNodes(v,x);if(D)return D}return null},p.prototype.createConfig=function(){var v=this.orientation,x=this.createNormalizedSizes(),E=this.children.map(function(R){return R.createConfig()});return{type:"split-area",orientation:v,children:E,sizes:x}},p.prototype.syncHandles=function(){var v=this;Ei(this.handles,function(x,E){x.setAttribute("data-orientation",v.orientation),E===v.handles.length-1?(x.classList.add("lm-mod-hidden"),x.classList.add("p-mod-hidden")):(x.classList.remove("lm-mod-hidden"),x.classList.remove("p-mod-hidden"))})},p.prototype.holdSizes=function(){Ei(this.sizers,function(v){v.sizeHint=v.size})},p.prototype.holdAllSizes=function(){Ei(this.children,function(v){return v.holdAllSizes()}),this.holdSizes()},p.prototype.normalizeSizes=function(){var v=this.sizers.length;if(v!==0){this.holdSizes();var x=SB(this.sizers,function(E,R){return E+R.sizeHint},0);x===0?Ei(this.sizers,function(E){E.size=E.sizeHint=1/v}):Ei(this.sizers,function(E){E.size=E.sizeHint/=x}),this.normalized=!0}},p.prototype.createNormalizedSizes=function(){var v=this.sizers.length;if(v===0)return[];var x=this.sizers.map(function(R){return R.size}),E=SB(x,function(R,D){return R+D},0);return E===0?Ei(x,function(R,D){x[D]=1/v}):Ei(x,function(R,D){x[D]=R/E}),x},p.prototype.fit=function(v,x){for(var E=this.orientation==="horizontal",R=Math.max(0,this.children.length-1)*v,D=E?R:0,H=E?0:R,W=1/0,$=1/0,J=0,B=this.children.length;J<B;++J){var se=this.children[J].fit(v,x);E?(H=Math.max(H,se.minHeight),D+=se.minWidth,this.sizers[J].minSize=se.minWidth):(D=Math.max(D,se.minWidth),H+=se.minHeight,this.sizers[J].minSize=se.minHeight)}return{minWidth:D,minHeight:H,maxWidth:W,maxHeight:$}},p.prototype.update=function(v,x,E,R,D,H){var W=this.orientation==="horizontal",$=Math.max(0,this.children.length-1)*D,J=Math.max(0,(W?E:R)-$);this.normalized&&(Ei(this.sizers,function(O){O.sizeHint*=J}),this.normalized=!1),bc.calc(this.sizers,J);for(var B=0,se=this.children.length;B<se;++B){var V=this.children[B],X=this.sizers[B].size,I=this.handles[B].style;W?(V.update(v,x,X,R,D,H),v+=X,I.top=x+"px",I.left=v+"px",I.width=D+"px",I.height=R+"px",v+=D):(V.update(v,x,E,X,D,H),x+=X,I.top=x+"px",I.left=v+"px",I.width=E+"px",I.height=D+"px",x+=D)}},p}();t.SplitLayoutNode=o;function s(p,v){if(p.widgets.length===0)return null;var x=[];if(Ei(p.widgets,function(R){v.has(R)||(v.add(R),x.push(R))}),x.length===0)return null;var E=p.currentIndex;return E!==-1&&(E<0||E>=x.length)&&(E=0),{type:"tab-area",widgets:x,currentIndex:E}}function u(p,v){for(var x=p.orientation,E=[],R=[],D=0,H=p.children.length;D<H;++D){var W=n(p.children[D],v);W&&(W.type==="tab-area"||W.orientation!==x?(E.push(W),R.push(Math.abs(p.sizes[D]||0))):(E.push.apply(E,W.children),R.push.apply(R,W.sizes)))}return E.length===0?null:E.length===1?E[0]:{type:"split-area",orientation:x,children:E,sizes:R}}function c(p,v){var x=v.createTabBar();return Ei(p.widgets,function(E){E.hide(),x.addTab(E.title)}),x.currentIndex=p.currentIndex,new a(x)}function h(p,v){var x=new o(p.orientation);return Ei(p.children,function(E,R){var D=i(E,v),H=e(p.sizes[R]),W=v.createHandle();x.children.push(D),x.handles.push(W),x.sizers.push(H),D.parent=x}),x.syncHandles(),x.normalizeSizes(),x}})(Bu||(Bu={}));var EE=function(t){Js(r,t);function r(e){e===void 0&&(e={});var n=t.call(this,{node:ef.createNode()})||this;return n._currentIndex=-1,n._titles=[],n._previousTitle=null,n._dragData=null,n._tabMoved=new za(n),n._currentChanged=new za(n),n._tabCloseRequested=new za(n),n._tabDetachRequested=new za(n),n._tabActivateRequested=new za(n),n.addClass("lm-TabBar"),n.addClass("p-TabBar"),n.setFlag(xn.Flag.DisallowLayout),n.tabsMovable=e.tabsMovable||!1,n.allowDeselect=e.allowDeselect||!1,n.insertBehavior=e.insertBehavior||"select-tab-if-needed",n.removeBehavior=e.removeBehavior||"select-tab-after",n.renderer=e.renderer||r.defaultRenderer,n._orientation=e.orientation||"horizontal",n.dataset.orientation=n._orientation,n}return r.prototype.dispose=function(){this._releaseMouse(),this._titles.length=0,this._previousTitle=null,t.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"currentChanged",{get:function(){return this._currentChanged},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tabMoved",{get:function(){return this._tabMoved},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tabActivateRequested",{get:function(){return this._tabActivateRequested},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tabCloseRequested",{get:function(){return this._tabCloseRequested},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tabDetachRequested",{get:function(){return this._tabDetachRequested},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentTitle",{get:function(){return this._titles[this._currentIndex]||null},set:function(e){this.currentIndex=e?this._titles.indexOf(e):-1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentIndex",{get:function(){return this._currentIndex},set:function(e){if((e<0||e>=this._titles.length)&&(e=-1),this._currentIndex!==e){var n=this._currentIndex,i=this._titles[n]||null,a=e,o=this._titles[a]||null;this._currentIndex=a,this._previousTitle=i,this.update(),this._currentChanged.emit({previousIndex:n,previousTitle:i,currentIndex:a,currentTitle:o})}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"orientation",{get:function(){return this._orientation},set:function(e){this._orientation!==e&&(this._releaseMouse(),this._orientation=e,this.dataset.orientation=e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"titles",{get:function(){return this._titles},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"contentNode",{get:function(){return this.node.getElementsByClassName("lm-TabBar-content")[0]},enumerable:!0,configurable:!0}),r.prototype.addTab=function(e){return this.insertTab(this._titles.length,e)},r.prototype.insertTab=function(e,n){this._releaseMouse();var i=ef.asTitle(n),a=this._titles.indexOf(i),o=Math.max(0,Math.min(e,this._titles.length));return a===-1?(ln.insert(this._titles,o,i),i.changed.connect(this._onTitleChanged,this),this.update(),this._adjustCurrentForInsert(o,i),i):(o===this._titles.length&&o--,a===o||(ln.move(this._titles,a,o),this.update(),this._adjustCurrentForMove(a,o)),i)},r.prototype.removeTab=function(e){this.removeTabAt(this._titles.indexOf(e))},r.prototype.removeTabAt=function(e){this._releaseMouse();var n=ln.removeAt(this._titles,e);n&&(n.changed.disconnect(this._onTitleChanged,this),n===this._previousTitle&&(this._previousTitle=null),this.update(),this._adjustCurrentForRemove(e,n))},r.prototype.clearTabs=function(){if(this._titles.length!==0){this._releaseMouse();for(var e=0,n=this._titles;e<n.length;e++){var i=n[e];i.changed.disconnect(this._onTitleChanged,this)}var a=this.currentIndex,o=this.currentTitle;this._currentIndex=-1,this._previousTitle=null,this._titles.length=0,this.update(),a!==-1&&this._currentChanged.emit({previousIndex:a,previousTitle:o,currentIndex:-1,currentTitle:null})}},r.prototype.releaseMouse=function(){this._releaseMouse()},r.prototype.handleEvent=function(e){switch(e.type){case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}},r.prototype.onBeforeAttach=function(e){this.node.addEventListener("mousedown",this)},r.prototype.onAfterDetach=function(e){this.node.removeEventListener("mousedown",this),this._releaseMouse()},r.prototype.onUpdateRequest=function(e){for(var n=this._titles,i=this.renderer,a=this.currentTitle,o=new Array(n.length),s=0,u=n.length;s<u;++s){var c=n[s],h=c===a,p=h?u:u-s-1;o[s]=i.renderTab({title:c,current:h,zIndex:p})}Bp.render(o,this.contentNode)},r.prototype._evtKeyDown=function(e){e.preventDefault(),e.stopPropagation(),e.keyCode===27&&this._releaseMouse()},r.prototype._evtMouseDown=function(e){if(!(e.button!==0&&e.button!==1)&&!this._dragData){var n=this.contentNode.children,i=ln.findFirstIndex(n,function(o){return Xa.hitTest(o,e.clientX,e.clientY)});if(i!==-1&&(e.preventDefault(),e.stopPropagation(),this._dragData={tab:n[i],index:i,pressX:e.clientX,pressY:e.clientY,tabPos:-1,tabSize:-1,tabPressPos:-1,targetIndex:-1,tabLayout:null,contentRect:null,override:null,dragActive:!1,dragAborted:!1,detachRequested:!1},document.addEventListener("mouseup",this,!0),e.button!==1)){var a=n[i].querySelector(this.renderer.closeIconSelector);a&&a.contains(e.target)||(this.tabsMovable&&(document.addEventListener("mousemove",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0)),this.allowDeselect&&this.currentIndex===i?this.currentIndex=-1:this.currentIndex=i,this.currentIndex!==-1&&this._tabActivateRequested.emit({index:this.currentIndex,title:this.currentTitle}))}}},r.prototype._evtMouseMove=function(e){var n=this._dragData;if(n){e.preventDefault(),e.stopPropagation();var i=this.contentNode.children;if(!(!n.dragActive&&!ef.dragExceeded(n,e))){if(!n.dragActive){var a=n.tab.getBoundingClientRect();this._orientation==="horizontal"?(n.tabPos=n.tab.offsetLeft,n.tabSize=a.width,n.tabPressPos=n.pressX-a.left):(n.tabPos=n.tab.offsetTop,n.tabSize=a.height,n.tabPressPos=n.pressY-a.top),n.tabLayout=ef.snapTabLayout(i,this._orientation),n.contentRect=this.contentNode.getBoundingClientRect(),n.override=Xd.overrideCursor("default"),n.tab.classList.add("lm-mod-dragging"),this.addClass("lm-mod-dragging"),n.tab.classList.add("p-mod-dragging"),this.addClass("p-mod-dragging"),n.dragActive=!0}if(!n.detachRequested&&ef.detachExceeded(n,e)){n.detachRequested=!0;var o=n.index,s=e.clientX,u=e.clientY,c=i[o],h=this._titles[o];if(this._tabDetachRequested.emit({index:o,title:h,tab:c,clientX:s,clientY:u}),n.dragAborted)return}ef.layoutTabs(i,n,e,this._orientation)}}},r.prototype._evtMouseUp=function(e){var n=this;if(!(e.button!==0&&e.button!==1)){var i=this._dragData;if(i){if(e.preventDefault(),e.stopPropagation(),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("contextmenu",this,!0),!i.dragActive){this._dragData=null;var a=this.contentNode.children,o=ln.findFirstIndex(a,function(h){return Xa.hitTest(h,e.clientX,e.clientY)});if(o!==i.index)return;var s=this._titles[o];if(!s.closable)return;if(e.button===1){this._tabCloseRequested.emit({index:o,title:s});return}var u=a[o].querySelector(this.renderer.closeIconSelector);if(u&&u.contains(e.target)){this._tabCloseRequested.emit({index:o,title:s});return}return}if(e.button===0){ef.finalizeTabPosition(i,this._orientation),i.tab.classList.remove("lm-mod-dragging"),i.tab.classList.remove("p-mod-dragging");var c=ef.parseTransitionDuration(i.tab);setTimeout(function(){if(!i.dragAborted){n._dragData=null,ef.resetTabPositions(n.contentNode.children,n._orientation),i.override.dispose(),n.removeClass("lm-mod-dragging"),n.removeClass("p-mod-dragging");var h=i.index,p=i.targetIndex;p===-1||h===p||(ln.move(n._titles,h,p),n._adjustCurrentForMove(h,p),n._tabMoved.emit({fromIndex:h,toIndex:p,title:n._titles[p]}),Ur.sendMessage(n,xn.Msg.UpdateRequest))}},c)}}}},r.prototype._releaseMouse=function(){var e=this._dragData;e&&(this._dragData=null,document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("contextmenu",this,!0),e.dragAborted=!0,e.dragActive&&(ef.resetTabPositions(this.contentNode.children,this._orientation),e.override.dispose(),e.tab.classList.remove("lm-mod-dragging"),this.removeClass("lm-mod-dragging"),e.tab.classList.remove("p-mod-dragging"),this.removeClass("p-mod-dragging")))},r.prototype._adjustCurrentForInsert=function(e,n){var i=this.currentTitle,a=this._currentIndex,o=this.insertBehavior;if(o==="select-tab"||o==="select-tab-if-needed"&&a===-1){this._currentIndex=e,this._previousTitle=i,this._currentChanged.emit({previousIndex:a,previousTitle:i,currentIndex:e,currentTitle:n});return}a>=e&&this._currentIndex++},r.prototype._adjustCurrentForMove=function(e,n){this._currentIndex===e?this._currentIndex=n:this._currentIndex<e&&this._currentIndex>=n?this._currentIndex++:this._currentIndex>e&&this._currentIndex<=n&&this._currentIndex--},r.prototype._adjustCurrentForRemove=function(e,n){var i=this._currentIndex,a=this.removeBehavior;if(i!==e){i>e&&this._currentIndex--;return}if(this._titles.length===0){this._currentIndex=-1,this._currentChanged.emit({previousIndex:e,previousTitle:n,currentIndex:-1,currentTitle:null});return}if(a==="select-tab-after"){this._currentIndex=Math.min(e,this._titles.length-1),this._currentChanged.emit({previousIndex:e,previousTitle:n,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}if(a==="select-tab-before"){this._currentIndex=Math.max(0,e-1),this._currentChanged.emit({previousIndex:e,previousTitle:n,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}if(a==="select-previous-tab"){this._previousTitle?(this._currentIndex=this._titles.indexOf(this._previousTitle),this._previousTitle=null):this._currentIndex=Math.min(e,this._titles.length-1),this._currentChanged.emit({previousIndex:e,previousTitle:n,currentIndex:this._currentIndex,currentTitle:this.currentTitle});return}this._currentIndex=-1,this._currentChanged.emit({previousIndex:e,previousTitle:n,currentIndex:-1,currentTitle:null})},r.prototype._onTitleChanged=function(e){this.update()},r}(xn);(function(t){var r=function(){function e(){this.closeIconSelector=".lm-TabBar-tabCloseIcon",this._tabID=0,this._tabKeys=new WeakMap}return e.prototype.renderTab=function(n){var i=n.title.caption,a=this.createTabKey(n),o=this.createTabStyle(n),s=this.createTabClass(n),u=this.createTabDataset(n);return Ya.li({key:a,className:s,title:i,style:o,dataset:u},this.renderIcon(n),this.renderLabel(n),this.renderCloseIcon(n))},e.prototype.renderIcon=function(n){var i=n.title,a=this.createIconClass(n);return typeof i.icon=="string"?Ya.div({className:a},i.iconLabel):Ya.div({className:a},i.icon,i.iconLabel)},e.prototype.renderLabel=function(n){return Ya.div({className:"lm-TabBar-tabLabel p-TabBar-tabLabel"},n.title.label)},e.prototype.renderCloseIcon=function(n){return Ya.div({className:"lm-TabBar-tabCloseIcon p-TabBar-tabCloseIcon"})},e.prototype.createTabKey=function(n){var i=this._tabKeys.get(n.title);return i===void 0&&(i="tab-key-"+this._tabID++,this._tabKeys.set(n.title,i)),i},e.prototype.createTabStyle=function(n){return{zIndex:""+n.zIndex}},e.prototype.createTabClass=function(n){var i="lm-TabBar-tab";return i+=" p-TabBar-tab",n.title.className&&(i+=" "+n.title.className),n.title.closable&&(i+=" lm-mod-closable",i+=" p-mod-closable"),n.current&&(i+=" lm-mod-current",i+=" p-mod-current"),i},e.prototype.createTabDataset=function(n){return n.title.dataset},e.prototype.createIconClass=function(n){var i="lm-TabBar-tabIcon";i+=" p-TabBar-tabIcon";var a=n.title.iconClass;return a?i+" "+a:i},e}();t.Renderer=r,t.defaultRenderer=new r})(EE||(EE={}));var ef;(function(t){t.DRAG_THRESHOLD=5,t.DETACH_THRESHOLD=20;function r(){var h=document.createElement("div"),p=document.createElement("ul");return p.className="lm-TabBar-content",p.classList.add("p-TabBar-content"),h.appendChild(p),h}t.createNode=r;function e(h){return h instanceof VB?h:new VB(h)}t.asTitle=e;function n(h){var p=window.getComputedStyle(h);return 1e3*(parseFloat(p.transitionDuration)||0)}t.parseTransitionDuration=n;function i(h,p){for(var v=new Array(h.length),x=0,E=h.length;x<E;++x){var R=h[x],D=window.getComputedStyle(R);p==="horizontal"?v[x]={pos:R.offsetLeft,size:R.offsetWidth,margin:parseFloat(D.marginLeft)||0}:v[x]={pos:R.offsetTop,size:R.offsetHeight,margin:parseFloat(D.marginTop)||0}}return v}t.snapTabLayout=i;function a(h,p){var v=Math.abs(p.clientX-h.pressX),x=Math.abs(p.clientY-h.pressY);return v>=t.DRAG_THRESHOLD||x>=t.DRAG_THRESHOLD}t.dragExceeded=a;function o(h,p){var v=h.contentRect;return p.clientX<v.left-t.DETACH_THRESHOLD||p.clientX>=v.right+t.DETACH_THRESHOLD||p.clientY<v.top-t.DETACH_THRESHOLD||p.clientY>=v.bottom+t.DETACH_THRESHOLD}t.detachExceeded=o;function s(h,p,v,x){var E,R,D,H;x==="horizontal"?(E=p.pressX,R=v.clientX-p.contentRect.left,D=v.clientX,H=p.contentRect.width):(E=p.pressY,R=v.clientY-p.contentRect.top,D=v.clientY,H=p.contentRect.height);for(var W=p.index,$=R-p.tabPressPos,J=$+p.tabSize,B=0,se=h.length;B<se;++B){var V=void 0,X=p.tabLayout[B],I=X.pos+(X.size>>1);if(B<p.index&&$<I)V=p.tabSize+p.tabLayout[B+1].margin+"px",W=Math.min(W,B);else if(B>p.index&&J>I)V=-p.tabSize-X.margin+"px",W=Math.max(W,B);else if(B===p.index){var O=D-E,U=H-(p.tabPos+p.tabSize);V=Math.max(-p.tabPos,Math.min(O,U))+"px"}else V="";x==="horizontal"?h[B].style.left=V:h[B].style.top=V}p.targetIndex=W}t.layoutTabs=s;function u(h,p){var v;p==="horizontal"?v=h.contentRect.width:v=h.contentRect.height;var x;if(h.targetIndex===h.index)x=0;else if(h.targetIndex>h.index){var E=h.tabLayout[h.targetIndex];x=E.pos+E.size-h.tabSize-h.tabPos}else{var E=h.tabLayout[h.targetIndex];x=E.pos-h.tabPos}var R=v-(h.tabPos+h.tabSize),D=Math.max(-h.tabPos,Math.min(x,R));p==="horizontal"?h.tab.style.left=D+"px":h.tab.style.top=D+"px"}t.finalizeTabPosition=u;function c(h,p){Ei(h,function(v){p==="horizontal"?v.style.left="":v.style.top=""})}t.resetTabPositions=c})(ef||(ef={}));var mie=function(t){Js(r,t);function r(e){e===void 0&&(e={});var n=t.call(this)||this;n._drag=null,n._tabsMovable=!0,n._pressData=null,n._layoutModified=new za(n),n.addClass("lm-DockPanel"),n.addClass("p-DockPanel"),n._mode=e.mode||"multiple-document",n._renderer=e.renderer||r.defaultRenderer,n._edges=e.edges||Ts.DEFAULT_EDGES,e.tabsMovable!==void 0&&(n._tabsMovable=e.tabsMovable),n.dataset.mode=n._mode;var i={createTabBar:function(){return n._createTabBar()},createHandle:function(){return n._createHandle()}};return n.layout=new pFe({renderer:i,spacing:e.spacing}),n.overlay=e.overlay||new r.Overlay,n.node.appendChild(n.overlay.node),n}return r.prototype.dispose=function(){this._releaseMouse(),this.overlay.hide(0),this._drag&&this._drag.dispose(),t.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"layoutModified",{get:function(){return this._layoutModified},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"renderer",{get:function(){return this.layout.renderer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"spacing",{get:function(){return this.layout.spacing},set:function(e){this.layout.spacing=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mode",{get:function(){return this._mode},set:function(e){if(this._mode!==e){this._mode=e,this.dataset.mode=e;var n=this.layout;switch(e){case"multiple-document":Ei(n.tabBars(),function(i){i.show()});break;case"single-document":n.restoreLayout(Ts.createSingleDocumentConfig(this));break;default:throw"unreachable"}Ur.postMessage(this,Ts.LayoutModified)}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tabsMovable",{get:function(){return this._tabsMovable},set:function(e){this._tabsMovable=e,Ei(this.tabBars(),function(n){return n.tabsMovable=e})},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isEmpty",{get:function(){return this.layout.isEmpty},enumerable:!0,configurable:!0}),r.prototype.widgets=function(){return this.layout.widgets()},r.prototype.selectedWidgets=function(){return this.layout.selectedWidgets()},r.prototype.tabBars=function(){return this.layout.tabBars()},r.prototype.handles=function(){return this.layout.handles()},r.prototype.selectWidget=function(e){var n=W0(this.tabBars(),function(i){return i.titles.indexOf(e.title)!==-1});if(!n)throw new Error("Widget is not contained in the dock panel.");n.currentTitle=e.title},r.prototype.activateWidget=function(e){this.selectWidget(e),e.activate()},r.prototype.saveLayout=function(){return this.layout.saveLayout()},r.prototype.restoreLayout=function(e){this._mode="multiple-document",this.layout.restoreLayout(e),(pl.IS_EDGE||pl.IS_IE)&&Ur.flush(),Ur.postMessage(this,Ts.LayoutModified)},r.prototype.addWidget=function(e,n){n===void 0&&(n={}),this._mode==="single-document"?this.layout.addWidget(e):this.layout.addWidget(e,n),Ur.postMessage(this,Ts.LayoutModified)},r.prototype.processMessage=function(e){e.type==="layout-modified"?this._layoutModified.emit(void 0):t.prototype.processMessage.call(this,e)},r.prototype.handleEvent=function(e){switch(e.type){case"lm-dragenter":this._evtDragEnter(e);break;case"lm-dragleave":this._evtDragLeave(e);break;case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e);break;case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}},r.prototype.onBeforeAttach=function(e){this.node.addEventListener("lm-dragenter",this),this.node.addEventListener("lm-dragleave",this),this.node.addEventListener("lm-dragover",this),this.node.addEventListener("lm-drop",this),this.node.addEventListener("mousedown",this)},r.prototype.onAfterDetach=function(e){this.node.removeEventListener("lm-dragenter",this),this.node.removeEventListener("lm-dragleave",this),this.node.removeEventListener("lm-dragover",this),this.node.removeEventListener("lm-drop",this),this.node.removeEventListener("mousedown",this),this._releaseMouse()},r.prototype.onChildAdded=function(e){Ts.isGeneratedTabBarProperty.get(e.child)||(e.child.addClass("lm-DockPanel-widget"),e.child.addClass("p-DockPanel-widget"))},r.prototype.onChildRemoved=function(e){Ts.isGeneratedTabBarProperty.get(e.child)||(e.child.removeClass("lm-DockPanel-widget"),e.child.removeClass("p-DockPanel-widget"),Ur.postMessage(this,Ts.LayoutModified))},r.prototype._evtDragEnter=function(e){e.mimeData.hasData("application/vnd.lumino.widget-factory")&&(e.preventDefault(),e.stopPropagation())},r.prototype._evtDragLeave=function(e){e.preventDefault(),e.stopPropagation(),this.overlay.hide(1)},r.prototype._evtDragOver=function(e){e.preventDefault(),e.stopPropagation(),this._showOverlay(e.clientX,e.clientY)==="invalid"?e.dropAction="none":e.dropAction=e.proposedAction},r.prototype._evtDrop=function(e){if(e.preventDefault(),e.stopPropagation(),this.overlay.hide(0),e.proposedAction==="none"){e.dropAction="none";return}var n=e.clientX,i=e.clientY,a=Ts.findDropTarget(this,n,i,this._edges),o=a.zone,s=a.target;if(o==="invalid"){e.dropAction="none";return}var u=e.mimeData,c=u.getData("application/vnd.lumino.widget-factory");if(typeof c!="function"){e.dropAction="none";return}var h=c();if(!(h instanceof xn)){e.dropAction="none";return}if(h.contains(this)){e.dropAction="none";return}var p=s?Ts.getDropRef(s.tabBar):null;switch(o){case"root-all":this.addWidget(h);break;case"root-top":this.addWidget(h,{mode:"split-top"});break;case"root-left":this.addWidget(h,{mode:"split-left"});break;case"root-right":this.addWidget(h,{mode:"split-right"});break;case"root-bottom":this.addWidget(h,{mode:"split-bottom"});break;case"widget-all":this.addWidget(h,{mode:"tab-after",ref:p});break;case"widget-top":this.addWidget(h,{mode:"split-top",ref:p});break;case"widget-left":this.addWidget(h,{mode:"split-left",ref:p});break;case"widget-right":this.addWidget(h,{mode:"split-right",ref:p});break;case"widget-bottom":this.addWidget(h,{mode:"split-bottom",ref:p});break;case"widget-tab":this.addWidget(h,{mode:"tab-after",ref:p});break;default:throw"unreachable"}e.dropAction=e.proposedAction,this.activateWidget(h)},r.prototype._evtKeyDown=function(e){e.preventDefault(),e.stopPropagation(),e.keyCode===27&&(this._releaseMouse(),Ur.postMessage(this,Ts.LayoutModified))},r.prototype._evtMouseDown=function(e){if(e.button===0){var n=this.layout,i=e.target,a=W0(n.handles(),function(p){return p.contains(i)});if(a){e.preventDefault(),e.stopPropagation(),document.addEventListener("keydown",this,!0),document.addEventListener("mouseup",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("contextmenu",this,!0);var o=a.getBoundingClientRect(),s=e.clientX-o.left,u=e.clientY-o.top,c=window.getComputedStyle(a),h=Xd.overrideCursor(c.cursor);this._pressData={handle:a,deltaX:s,deltaY:u,override:h}}}},r.prototype._evtMouseMove=function(e){if(this._pressData){e.preventDefault(),e.stopPropagation();var n=this.node.getBoundingClientRect(),i=e.clientX-n.left-this._pressData.deltaX,a=e.clientY-n.top-this._pressData.deltaY,o=this.layout;o.moveHandle(this._pressData.handle,i,a)}},r.prototype._evtMouseUp=function(e){e.button===0&&(e.preventDefault(),e.stopPropagation(),this._releaseMouse(),Ur.postMessage(this,Ts.LayoutModified))},r.prototype._releaseMouse=function(){this._pressData&&(this._pressData.override.dispose(),this._pressData=null,document.removeEventListener("keydown",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("contextmenu",this,!0))},r.prototype._showOverlay=function(e,n){var i=Ts.findDropTarget(this,e,n,this._edges),a=i.zone,o=i.target;if(a==="invalid")return this.overlay.hide(100),a;var s,u,c,h,p=Xa.boxSizing(this.node),v=this.node.getBoundingClientRect();switch(a){case"root-all":s=p.paddingTop,u=p.paddingLeft,c=p.paddingRight,h=p.paddingBottom;break;case"root-top":s=p.paddingTop,u=p.paddingLeft,c=p.paddingRight,h=v.height*Ts.GOLDEN_RATIO;break;case"root-left":s=p.paddingTop,u=p.paddingLeft,c=v.width*Ts.GOLDEN_RATIO,h=p.paddingBottom;break;case"root-right":s=p.paddingTop,u=v.width*Ts.GOLDEN_RATIO,c=p.paddingRight,h=p.paddingBottom;break;case"root-bottom":s=v.height*Ts.GOLDEN_RATIO,u=p.paddingLeft,c=p.paddingRight,h=p.paddingBottom;break;case"widget-all":s=o.top,u=o.left,c=o.right,h=o.bottom;break;case"widget-top":s=o.top,u=o.left,c=o.right,h=o.bottom+o.height/2;break;case"widget-left":s=o.top,u=o.left,c=o.right+o.width/2,h=o.bottom;break;case"widget-right":s=o.top,u=o.left+o.width/2,c=o.right,h=o.bottom;break;case"widget-bottom":s=o.top+o.height/2,u=o.left,c=o.right,h=o.bottom;break;case"widget-tab":var x=o.tabBar.node.getBoundingClientRect().height;s=o.top,u=o.left,c=o.right,h=o.bottom+o.height-x;break;default:throw"unreachable"}return this.overlay.show({top:s,left:u,right:c,bottom:h}),a},r.prototype._createTabBar=function(){var e=this._renderer.createTabBar();return Ts.isGeneratedTabBarProperty.set(e,!0),this._mode==="single-document"&&e.hide(),e.tabsMovable=this._tabsMovable,e.allowDeselect=!1,e.removeBehavior="select-previous-tab",e.insertBehavior="select-tab-if-needed",e.tabMoved.connect(this._onTabMoved,this),e.currentChanged.connect(this._onCurrentChanged,this),e.tabCloseRequested.connect(this._onTabCloseRequested,this),e.tabDetachRequested.connect(this._onTabDetachRequested,this),e.tabActivateRequested.connect(this._onTabActivateRequested,this),e},r.prototype._createHandle=function(){return this._renderer.createHandle()},r.prototype._onTabMoved=function(){Ur.postMessage(this,Ts.LayoutModified)},r.prototype._onCurrentChanged=function(e,n){var i=n.previousTitle,a=n.currentTitle;i&&i.owner.hide(),a&&a.owner.show(),(pl.IS_EDGE||pl.IS_IE)&&Ur.flush(),Ur.postMessage(this,Ts.LayoutModified)},r.prototype._onTabActivateRequested=function(e,n){n.title.owner.activate()},r.prototype._onTabCloseRequested=function(e,n){n.title.owner.close()},r.prototype._onTabDetachRequested=function(e,n){var i=this;if(!this._drag){e.releaseMouse();var a=n.title,o=n.tab,s=n.clientX,u=n.clientY,c=new iie,h=function(){return a.owner};c.setData("application/vnd.lumino.widget-factory",h);var p=o.cloneNode(!0);this._drag=new Xd({mimeData:c,dragImage:p,proposedAction:"move",supportedActions:"move"}),o.classList.add("lm-mod-hidden"),o.classList.add("p-mod-hidden");var v=function(){i._drag=null,o.classList.remove("lm-mod-hidden"),o.classList.remove("p-mod-hidden")};this._drag.start(s,u).then(v)}},r}(xn);(function(t){var r=function(){function n(){this._timer=-1,this._hidden=!0,this.node=document.createElement("div"),this.node.classList.add("lm-DockPanel-overlay"),this.node.classList.add("lm-mod-hidden"),this.node.classList.add("p-DockPanel-overlay"),this.node.classList.add("p-mod-hidden"),this.node.style.position="absolute"}return n.prototype.show=function(i){var a=this.node.style;a.top=i.top+"px",a.left=i.left+"px",a.right=i.right+"px",a.bottom=i.bottom+"px",clearTimeout(this._timer),this._timer=-1,this._hidden&&(this._hidden=!1,this.node.classList.remove("lm-mod-hidden"),this.node.classList.remove("p-mod-hidden"))},n.prototype.hide=function(i){var a=this;if(!this._hidden){if(i<=0){clearTimeout(this._timer),this._timer=-1,this._hidden=!0,this.node.classList.add("lm-mod-hidden"),this.node.classList.add("p-mod-hidden");return}this._timer===-1&&(this._timer=window.setTimeout(function(){a._timer=-1,a._hidden=!0,a.node.classList.add("lm-mod-hidden"),a.node.classList.add("p-mod-hidden")},i))}},n}();t.Overlay=r;var e=function(){function n(){}return n.prototype.createTabBar=function(){var i=new EE;return i.addClass("lm-DockPanel-tabBar"),i.addClass("p-DockPanel-tabBar"),i},n.prototype.createHandle=function(){var i=document.createElement("div");return i.className="lm-DockPanel-handle",i.classList.add("p-DockPanel-handle"),i},n}();t.Renderer=e,t.defaultRenderer=new e})(mie||(mie={}));var Ts;(function(t){t.GOLDEN_RATIO=.618,t.DEFAULT_EDGES={top:12,right:40,bottom:40,left:40},t.LayoutModified=new q0("layout-modified"),t.isGeneratedTabBarProperty=new Ac({name:"isGeneratedTabBar",create:function(){return!1}});function r(i){if(i.isEmpty)return{main:null};var a=qne(i.widgets()),o=i.selectedWidgets().next(),s=o?a.indexOf(o):-1;return{main:{type:"tab-area",widgets:a,currentIndex:s}}}t.createSingleDocumentConfig=r;function e(i,a,o,s){if(!Xa.hitTest(i.node,a,o))return{zone:"invalid",target:null};var u=i.layout;if(u.isEmpty)return{zone:"root-all",target:null};if(i.mode==="multiple-document"){var c=i.node.getBoundingClientRect(),h=a-c.left+1,p=o-c.top+1,v=c.right-a,x=c.bottom-o,E=Math.min(p,v,x,h);switch(E){case p:if(p<s.top)return{zone:"root-top",target:null};break;case v:if(v<s.right)return{zone:"root-right",target:null};break;case x:if(x<s.bottom)return{zone:"root-bottom",target:null};break;case h:if(h<s.left)return{zone:"root-left",target:null};break;default:throw"unreachable"}}var R=u.hitTestTabAreas(a,o);if(!R)return{zone:"invalid",target:null};if(i.mode==="single-document")return{zone:"widget-all",target:R};var D=R.x-R.left+1,H=R.y-R.top+1,W=R.left+R.width-R.x,$=R.top+R.height-R.y,J=R.tabBar.node.getBoundingClientRect().height;if(H<J)return{zone:"widget-tab",target:R};var B=Math.round(R.width/3),se=Math.round(R.height/3);if(D>B&&W>B&&H>se&&$>se)return{zone:"widget-all",target:R};D/=B,H/=se,W/=B,$/=se;var V=Math.min(D,H,W,$),X;switch(V){case D:X="widget-left";break;case H:X="widget-top";break;case W:X="widget-right";break;case $:X="widget-bottom";break;default:throw"unreachable"}return{zone:X,target:R}}t.findDropTarget=e;function n(i){return i.titles.length===0?null:i.currentTitle?i.currentTitle.owner:i.titles[i.titles.length-1].owner}t.getDropRef=n})(Ts||(Ts={}));var p7t=function(){function t(){this._counter=0,this._widgets=[],this._activeWidget=null,this._currentWidget=null,this._numbers=new Map,this._nodes=new Map,this._activeChanged=new za(this),this._currentChanged=new za(this)}return t.prototype.dispose=function(){var r=this;this._counter<0||(this._counter=-1,za.clearData(this),Ei(this._widgets,function(e){e.node.removeEventListener("focus",r,!0),e.node.removeEventListener("blur",r,!0)}),this._activeWidget=null,this._currentWidget=null,this._nodes.clear(),this._numbers.clear(),this._widgets.length=0)},Object.defineProperty(t.prototype,"currentChanged",{get:function(){return this._currentChanged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeChanged",{get:function(){return this._activeChanged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._counter<0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentWidget",{get:function(){return this._currentWidget},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeWidget",{get:function(){return this._activeWidget},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"widgets",{get:function(){return this._widgets},enumerable:!0,configurable:!0}),t.prototype.focusNumber=function(r){var e=this._numbers.get(r);return e===void 0?-1:e},t.prototype.has=function(r){return this._numbers.has(r)},t.prototype.add=function(r){if(!this._numbers.has(r)){var e=r.node.contains(document.activeElement),n=e?this._counter++:-1;this._widgets.push(r),this._numbers.set(r,n),this._nodes.set(r.node,r),r.node.addEventListener("focus",this,!0),r.node.addEventListener("blur",this,!0),r.disposed.connect(this._onWidgetDisposed,this),e&&this._setWidgets(r,r)}},t.prototype.remove=function(r){var e=this;if(this._numbers.has(r)&&(r.disposed.disconnect(this._onWidgetDisposed,this),r.node.removeEventListener("focus",this,!0),r.node.removeEventListener("blur",this,!0),ln.removeFirstOf(this._widgets,r),this._nodes.delete(r.node),this._numbers.delete(r),this._currentWidget===r)){var n=Xne(this._widgets,function(a){return e._numbers.get(a)!==-1}),i=Yne(n,function(a,o){var s=e._numbers.get(a),u=e._numbers.get(o);return s-u})||null;this._setWidgets(i,null)}},t.prototype.handleEvent=function(r){switch(r.type){case"focus":this._evtFocus(r);break;case"blur":this._evtBlur(r);break}},t.prototype._setWidgets=function(r,e){var n=this._currentWidget;this._currentWidget=r;var i=this._activeWidget;this._activeWidget=e,n!==r&&this._currentChanged.emit({oldValue:n,newValue:r}),i!==e&&this._activeChanged.emit({oldValue:i,newValue:e})},t.prototype._evtFocus=function(r){var e=this._nodes.get(r.currentTarget);e!==this._currentWidget&&this._numbers.set(e,this._counter++),this._setWidgets(e,e)},t.prototype._evtBlur=function(r){var e=this._nodes.get(r.currentTarget),n=r.relatedTarget;if(!n){this._setWidgets(this._currentWidget,null);return}if(!e.node.contains(n)&&!W0(this._widgets,function(i){return i.node.contains(n)})){this._setWidgets(this._currentWidget,null);return}},t.prototype._onWidgetDisposed=function(r){this.remove(r)},t}(),XB=function(t){Js(r,t);function r(e){e===void 0&&(e={});var n=t.call(this,e)||this;return n._dirty=!1,n._rowSpacing=4,n._columnSpacing=4,n._items=[],n._rowStarts=[],n._columnStarts=[],n._rowSizers=[new Kd],n._columnSizers=[new Kd],n._box=null,e.rowCount!==void 0&&vu.reallocSizers(n._rowSizers,e.rowCount),e.columnCount!==void 0&&vu.reallocSizers(n._columnSizers,e.columnCount),e.rowSpacing!==void 0&&(n._rowSpacing=vu.clampValue(e.rowSpacing)),e.columnSpacing!==void 0&&(n._columnSpacing=vu.clampValue(e.columnSpacing)),n}return r.prototype.dispose=function(){Ei(this._items,function(e){var n=e.widget;e.dispose(),n.dispose()}),this._box=null,this._items.length=0,this._rowStarts.length=0,this._rowSizers.length=0,this._columnStarts.length=0,this._columnSizers.length=0,t.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"rowCount",{get:function(){return this._rowSizers.length},set:function(e){e!==this.rowCount&&(vu.reallocSizers(this._rowSizers,e),this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columnCount",{get:function(){return this._columnSizers.length},set:function(e){e!==this.columnCount&&(vu.reallocSizers(this._columnSizers,e),this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rowSpacing",{get:function(){return this._rowSpacing},set:function(e){e=vu.clampValue(e),this._rowSpacing!==e&&(this._rowSpacing=e,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columnSpacing",{get:function(){return this._columnSpacing},set:function(e){e=vu.clampValue(e),this._columnSpacing!==e&&(this._columnSpacing=e,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),r.prototype.rowStretch=function(e){var n=this._rowSizers[e];return n?n.stretch:-1},r.prototype.setRowStretch=function(e,n){var i=this._rowSizers[e];i&&(n=vu.clampValue(n),i.stretch!==n&&(i.stretch=n,this.parent&&this.parent.update()))},r.prototype.columnStretch=function(e){var n=this._columnSizers[e];return n?n.stretch:-1},r.prototype.setColumnStretch=function(e,n){var i=this._columnSizers[e];i&&(n=vu.clampValue(n),i.stretch!==n&&(i.stretch=n,this.parent&&this.parent.update()))},r.prototype.iter=function(){return Wd(this._items,function(e){return e.widget})},r.prototype.addWidget=function(e){var n=ln.findFirstIndex(this._items,function(i){return i.widget===e});n===-1&&(this._items.push(new pb(e)),this.parent&&this.attachWidget(e))},r.prototype.removeWidget=function(e){var n=ln.findFirstIndex(this._items,function(a){return a.widget===e});if(n!==-1){var i=ln.removeAt(this._items,n);this.parent&&this.detachWidget(e),i.dispose()}},r.prototype.init=function(){var e=this;t.prototype.init.call(this),Ei(this,function(n){e.attachWidget(n)})},r.prototype.attachWidget=function(e){this.parent.isAttached&&Ur.sendMessage(e,xn.Msg.BeforeAttach),this.parent.node.appendChild(e.node),this.parent.isAttached&&Ur.sendMessage(e,xn.Msg.AfterAttach),this.parent.fit()},r.prototype.detachWidget=function(e){this.parent.isAttached&&Ur.sendMessage(e,xn.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.isAttached&&Ur.sendMessage(e,xn.Msg.AfterDetach),this.parent.fit()},r.prototype.onBeforeShow=function(e){t.prototype.onBeforeShow.call(this,e),this.parent.update()},r.prototype.onBeforeAttach=function(e){t.prototype.onBeforeAttach.call(this,e),this.parent.fit()},r.prototype.onChildShown=function(e){this.parent.fit()},r.prototype.onChildHidden=function(e){this.parent.fit()},r.prototype.onResize=function(e){this.parent.isVisible&&this._update(e.width,e.height)},r.prototype.onUpdateRequest=function(e){this.parent.isVisible&&this._update(-1,-1)},r.prototype.onFitRequest=function(e){this.parent.isAttached&&this._fit()},r.prototype._fit=function(){for(var e=0,n=this.rowCount;e<n;++e)this._rowSizers[e].minSize=0;for(var e=0,n=this.columnCount;e<n;++e)this._columnSizers[e].minSize=0;for(var i=this._items.filter(function(H){return!H.isHidden}),e=0,n=i.length;e<n;++e)i[e].fit();var a=this.rowCount-1,o=this.columnCount-1;i.sort(vu.rowSpanCmp);for(var e=0,n=i.length;e<n;++e){var s=i[e],u=r.getCellConfig(s.widget),c=Math.min(u.row,a),h=Math.min(u.row+u.rowSpan-1,a);vu.distributeMin(this._rowSizers,c,h,s.minHeight)}i.sort(vu.columnSpanCmp);for(var e=0,n=i.length;e<n;++e){var s=i[e],u=r.getCellConfig(s.widget),p=Math.min(u.column,o),v=Math.min(u.column+u.columnSpan-1,o);vu.distributeMin(this._columnSizers,p,v,s.minWidth)}if(this.fitPolicy==="set-no-constraint"){Ur.sendMessage(this.parent,xn.Msg.UpdateRequest);return}for(var x=a*this._rowSpacing,E=o*this._columnSpacing,e=0,n=this.rowCount;e<n;++e)x+=this._rowSizers[e].minSize;for(var e=0,n=this.columnCount;e<n;++e)E+=this._columnSizers[e].minSize;var R=this._box=Xa.boxSizing(this.parent.node);E+=R.horizontalSum,x+=R.verticalSum;var D=this.parent.node.style;D.minWidth=E+"px",D.minHeight=x+"px",this._dirty=!0,this.parent.parent&&Ur.sendMessage(this.parent.parent,xn.Msg.FitRequest),this._dirty&&Ur.sendMessage(this.parent,xn.Msg.UpdateRequest)},r.prototype._update=function(e,n){this._dirty=!1,e<0&&(e=this.parent.node.offsetWidth),n<0&&(n=this.parent.node.offsetHeight),this._box||(this._box=Xa.boxSizing(this.parent.node));var i=this._box.paddingTop,a=this._box.paddingLeft,o=e-this._box.horizontalSum,s=n-this._box.verticalSum,u=this.rowCount-1,c=this.columnCount-1,h=u*this._rowSpacing,p=c*this._columnSpacing;bc.calc(this._rowSizers,Math.max(0,s-h)),bc.calc(this._columnSizers,Math.max(0,o-p));for(var v=0,x=i,E=this.rowCount;v<E;++v)this._rowStarts[v]=x,x+=this._rowSizers[v].size+this._rowSpacing;for(var v=0,x=a,E=this.columnCount;v<E;++v)this._columnStarts[v]=x,x+=this._columnSizers[v].size+this._columnSpacing;for(var v=0,E=this._items.length;v<E;++v){var R=this._items[v];if(!R.isHidden){var D=r.getCellConfig(R.widget),H=Math.min(D.row,u),W=Math.min(D.column,c),$=Math.min(D.row+D.rowSpan-1,u),J=Math.min(D.column+D.columnSpan-1,c),B=this._columnStarts[W],se=this._rowStarts[H],V=this._columnStarts[J]+this._columnSizers[J].size-B,X=this._rowStarts[$]+this._rowSizers[$].size-se;R.update(B,se,V,X)}}},r}(Zd);(function(t){function r(n){return vu.cellConfigProperty.get(n)}t.getCellConfig=r;function e(n,i){vu.cellConfigProperty.set(n,vu.normalizeConfig(i))}t.setCellConfig=e})(XB||(XB={}));var vu;(function(t){t.cellConfigProperty=new Ac({name:"cellConfig",create:function(){return{row:0,column:0,rowSpan:1,columnSpan:1}},changed:s});function r(u){var c=Math.max(0,Math.floor(u.row||0)),h=Math.max(0,Math.floor(u.column||0)),p=Math.max(1,Math.floor(u.rowSpan||0)),v=Math.max(1,Math.floor(u.columnSpan||0));return{row:c,column:h,rowSpan:p,columnSpan:v}}t.normalizeConfig=r;function e(u){return Math.max(0,Math.floor(u))}t.clampValue=e;function n(u,c){var h=t.cellConfigProperty.get(u.widget),p=t.cellConfigProperty.get(c.widget);return h.rowSpan-p.rowSpan}t.rowSpanCmp=n;function i(u,c){var h=t.cellConfigProperty.get(u.widget),p=t.cellConfigProperty.get(c.widget);return h.columnSpan-p.columnSpan}t.columnSpanCmp=i;function a(u,c){for(c=Math.max(1,Math.floor(c));u.length<c;)u.push(new Kd);u.length>c&&(u.length=c)}t.reallocSizers=a;function o(u,c,h,p){if(!(h<c)){if(c===h){var v=u[c];v.minSize=Math.max(v.minSize,p);return}for(var x=0,E=c;E<=h;++E)x+=u[E].minSize;if(!(x>=p))for(var R=(p-x)/(h-c+1),E=c;E<=h;++E)u[E].minSize+=R}}t.distributeMin=o;function s(u){u.parent&&u.parent.layout instanceof XB&&u.parent.fit()}})(vu||(vu={}));var vie=function(t){Js(r,t);function r(e){e===void 0&&(e={});var n=t.call(this,{node:CE.createNode()})||this;return n._activeIndex=-1,n._menus=[],n._childMenu=null,n.addClass("lm-MenuBar"),n.addClass("p-MenuBar"),n.setFlag(xn.Flag.DisallowLayout),n.renderer=e.renderer||r.defaultRenderer,n}return r.prototype.dispose=function(){this._closeChildMenu(),this._menus.length=0,t.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"childMenu",{get:function(){return this._childMenu},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"contentNode",{get:function(){return this.node.getElementsByClassName("lm-MenuBar-content")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"activeMenu",{get:function(){return this._menus[this._activeIndex]||null},set:function(e){this.activeIndex=e?this._menus.indexOf(e):-1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"activeIndex",{get:function(){return this._activeIndex},set:function(e){(e<0||e>=this._menus.length)&&(e=-1),this._activeIndex!==e&&(this._activeIndex=e,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"menus",{get:function(){return this._menus},enumerable:!0,configurable:!0}),r.prototype.openActiveMenu=function(){this._activeIndex!==-1&&(this._openChildMenu(),this._childMenu&&(this._childMenu.activeIndex=-1,this._childMenu.activateNextItem()))},r.prototype.addMenu=function(e){this.insertMenu(this._menus.length,e)},r.prototype.insertMenu=function(e,n){this._closeChildMenu();var i=this._menus.indexOf(n),a=Math.max(0,Math.min(e,this._menus.length));if(i===-1){ln.insert(this._menus,a,n),n.addClass("lm-MenuBar-menu"),n.addClass("p-MenuBar-menu"),n.aboutToClose.connect(this._onMenuAboutToClose,this),n.menuRequested.connect(this._onMenuMenuRequested,this),n.title.changed.connect(this._onTitleChanged,this),this.update();return}a===this._menus.length&&a--,i!==a&&(ln.move(this._menus,i,a),this.update())},r.prototype.removeMenu=function(e){this.removeMenuAt(this._menus.indexOf(e))},r.prototype.removeMenuAt=function(e){this._closeChildMenu();var n=ln.removeAt(this._menus,e);n&&(n.aboutToClose.disconnect(this._onMenuAboutToClose,this),n.menuRequested.disconnect(this._onMenuMenuRequested,this),n.title.changed.disconnect(this._onTitleChanged,this),n.removeClass("lm-MenuBar-menu"),n.removeClass("p-MenuBar-menu"),this.update())},r.prototype.clearMenus=function(){if(this._menus.length!==0){this._closeChildMenu();for(var e=0,n=this._menus;e<n.length;e++){var i=n[e];i.aboutToClose.disconnect(this._onMenuAboutToClose,this),i.menuRequested.disconnect(this._onMenuMenuRequested,this),i.title.changed.disconnect(this._onTitleChanged,this),i.removeClass("lm-MenuBar-menu"),i.removeClass("p-MenuBar-menu")}this._menus.length=0,this.update()}},r.prototype.handleEvent=function(e){switch(e.type){case"keydown":this._evtKeyDown(e);break;case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseleave":this._evtMouseLeave(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}},r.prototype.onBeforeAttach=function(e){this.node.addEventListener("keydown",this),this.node.addEventListener("mousedown",this),this.node.addEventListener("mousemove",this),this.node.addEventListener("mouseleave",this),this.node.addEventListener("contextmenu",this)},r.prototype.onAfterDetach=function(e){this.node.removeEventListener("keydown",this),this.node.removeEventListener("mousedown",this),this.node.removeEventListener("mousemove",this),this.node.removeEventListener("mouseleave",this),this.node.removeEventListener("contextmenu",this),this._closeChildMenu()},r.prototype.onActivateRequest=function(e){this.isAttached&&this.node.focus()},r.prototype.onUpdateRequest=function(e){for(var n=this._menus,i=this.renderer,a=this._activeIndex,o=new Array(n.length),s=0,u=n.length;s<u;++s){var c=n[s].title,h=s===a;o[s]=i.renderItem({title:c,active:h})}Bp.render(o,this.contentNode)},r.prototype._evtKeyDown=function(e){e.preventDefault(),e.stopPropagation();var n=e.keyCode;if(n===13||n===38||n===40){this.openActiveMenu();return}if(n===27){this._closeChildMenu(),this.activeIndex=-1,this.node.blur();return}if(n===37){var i=this._activeIndex,a=this._menus.length;this.activeIndex=i===0?a-1:i-1;return}if(n===39){var i=this._activeIndex,a=this._menus.length;this.activeIndex=i===a-1?0:i+1;return}var o=hb().keyForKeydownEvent(e);if(o){var s=this._activeIndex+1,u=CE.findMnemonic(this._menus,o,s);u.index!==-1&&!u.multiple?(this.activeIndex=u.index,this.openActiveMenu()):u.index!==-1?this.activeIndex=u.index:u.auto!==-1&&(this.activeIndex=u.auto)}},r.prototype._evtMouseDown=function(e){if(Xa.hitTest(this.node,e.clientX,e.clientY)){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var n=ln.findFirstIndex(this.contentNode.children,function(i){return Xa.hitTest(i,e.clientX,e.clientY)});if(n===-1){this._closeChildMenu();return}e.button===0&&(this._childMenu?(this._closeChildMenu(),this.activeIndex=n):(this.activeIndex=n,this._openChildMenu()))}},r.prototype._evtMouseMove=function(e){var n=ln.findFirstIndex(this.contentNode.children,function(i){return Xa.hitTest(i,e.clientX,e.clientY)});n!==this._activeIndex&&(n===-1&&this._childMenu||(this.activeIndex=n,this._childMenu&&this._openChildMenu()))},r.prototype._evtMouseLeave=function(e){this._childMenu||(this.activeIndex=-1)},r.prototype._openChildMenu=function(){var e=this.activeMenu;if(!e){this._closeChildMenu();return}var n=this._childMenu;if(n!==e){this._childMenu=e,n?n.close():(this.addClass("lm-mod-active"),this.addClass("p-mod-active"),document.addEventListener("mousedown",this,!0)),Ur.sendMessage(this,xn.Msg.UpdateRequest);var i=this.contentNode.children[this._activeIndex],a=i.getBoundingClientRect(),o=a.left,s=a.bottom;e.open(o,s,{forceX:!0,forceY:!0})}},r.prototype._closeChildMenu=function(){if(this._childMenu){this.removeClass("lm-mod-active"),this.removeClass("p-mod-active"),document.removeEventListener("mousedown",this,!0);var e=this._childMenu;this._childMenu=null,e.close(),this.activeIndex=-1}},r.prototype._onMenuAboutToClose=function(e){e===this._childMenu&&(this.removeClass("lm-mod-active"),this.removeClass("p-mod-active"),document.removeEventListener("mousedown",this,!0),this._childMenu=null,this.activeIndex=-1)},r.prototype._onMenuMenuRequested=function(e,n){if(e===this._childMenu){var i=this._activeIndex,a=this._menus.length;switch(n){case"next":this.activeIndex=i===a-1?0:i+1;break;case"previous":this.activeIndex=i===0?a-1:i-1;break}this.openActiveMenu()}},r.prototype._onTitleChanged=function(){this.update()},r}(xn);(function(t){var r=function(){function e(){}return e.prototype.renderItem=function(n){var i=this.createItemClass(n),a=this.createItemDataset(n);return Ya.li({className:i,dataset:a},this.renderIcon(n),this.renderLabel(n))},e.prototype.renderIcon=function(n){var i=this.createIconClass(n);return typeof n.title.icon=="string"?Ya.div({className:i},n.title.iconLabel):Ya.div({className:i},n.title.icon,n.title.iconLabel)},e.prototype.renderLabel=function(n){var i=this.formatLabel(n);return Ya.div({className:"lm-MenuBar-itemLabel p-MenuBar-itemLabel"},i)},e.prototype.createItemClass=function(n){var i="lm-MenuBar-item";return i+=" p-MenuBar-item",n.title.className&&(i+=" "+n.title.className),n.active&&(i+=" lm-mod-active",i+=" p-mod-active"),i},e.prototype.createItemDataset=function(n){return n.title.dataset},e.prototype.createIconClass=function(n){var i="lm-MenuBar-itemIcon";i+=" p-MenuBar-itemIcon";var a=n.title.iconClass;return a?i+" "+a:i},e.prototype.formatLabel=function(n){var i=n.title,a=i.label,o=i.mnemonic;if(o<0||o>=a.length)return a;var s=a.slice(0,o),u=a.slice(o+1),c=a[o],h=Ya.span({className:"lm-MenuBar-itemMnemonic p-MenuBar-itemMnemonic"},c);return[s,h,u]},e}();t.Renderer=r,t.defaultRenderer=new r})(vie||(vie={}));var CE;(function(t){function r(){var n=document.createElement("div"),i=document.createElement("ul");return i.className="lm-MenuBar-content",i.classList.add("p-MenuBar-content"),n.appendChild(i),n.tabIndex=-1,n}t.createNode=r;function e(n,i,a){for(var o=-1,s=-1,u=!1,c=i.toUpperCase(),h=0,p=n.length;h<p;++h){var v=(h+a)%p,x=n[v].title;if(x.label.length!==0){var E=x.mnemonic;if(E>=0&&E<x.label.length){x.label[E].toUpperCase()===c&&(o===-1?o=v:u=!0);continue}s===-1&&x.label[0].toUpperCase()===c&&(s=v)}}return{index:o,multiple:u,auto:s}}t.findMnemonic=e})(CE||(CE={}));var d7t=function(t){Js(r,t);function r(e){e===void 0&&(e={});var n=t.call(this,{node:PE.createNode()})||this;return n._onRepeat=function(){if(n._repeatTimer=-1,!!n._pressData){var i=n._pressData.part;if(i!=="thumb"){n._repeatTimer=window.setTimeout(n._onRepeat,20);var a=n._pressData.mouseX,o=n._pressData.mouseY;if(i==="decrement"){if(!Xa.hitTest(n.decrementNode,a,o))return;n._stepRequested.emit("decrement");return}if(i==="increment"){if(!Xa.hitTest(n.incrementNode,a,o))return;n._stepRequested.emit("increment");return}if(i==="track"){if(!Xa.hitTest(n.trackNode,a,o))return;var s=n.thumbNode;if(Xa.hitTest(s,a,o))return;var u=s.getBoundingClientRect(),c=void 0;n._orientation==="horizontal"?c=a<u.left?"decrement":"increment":c=o<u.top?"decrement":"increment",n._pageRequested.emit(c);return}}}},n._value=0,n._page=10,n._maximum=100,n._repeatTimer=-1,n._pressData=null,n._thumbMoved=new za(n),n._stepRequested=new za(n),n._pageRequested=new za(n),n.addClass("lm-ScrollBar"),n.addClass("p-ScrollBar"),n.setFlag(xn.Flag.DisallowLayout),n._orientation=e.orientation||"vertical",n.dataset.orientation=n._orientation,e.maximum!==void 0&&(n._maximum=Math.max(0,e.maximum)),e.page!==void 0&&(n._page=Math.max(0,e.page)),e.value!==void 0&&(n._value=Math.max(0,Math.min(e.value,n._maximum))),n}return Object.defineProperty(r.prototype,"thumbMoved",{get:function(){return this._thumbMoved},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"stepRequested",{get:function(){return this._stepRequested},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pageRequested",{get:function(){return this._pageRequested},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"orientation",{get:function(){return this._orientation},set:function(e){this._orientation!==e&&(this._releaseMouse(),this._orientation=e,this.dataset.orientation=e,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"value",{get:function(){return this._value},set:function(e){e=Math.max(0,Math.min(e,this._maximum)),this._value!==e&&(this._value=e,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"page",{get:function(){return this._page},set:function(e){e=Math.max(0,e),this._page!==e&&(this._page=e,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maximum",{get:function(){return this._maximum},set:function(e){e=Math.max(0,e),this._maximum!==e&&(this._maximum=e,this._value=Math.min(this._value,e),this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"decrementNode",{get:function(){return this.node.getElementsByClassName("lm-ScrollBar-button")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"incrementNode",{get:function(){return this.node.getElementsByClassName("lm-ScrollBar-button")[1]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"trackNode",{get:function(){return this.node.getElementsByClassName("lm-ScrollBar-track")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"thumbNode",{get:function(){return this.node.getElementsByClassName("lm-ScrollBar-thumb")[0]},enumerable:!0,configurable:!0}),r.prototype.handleEvent=function(e){switch(e.type){case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}},r.prototype.onBeforeAttach=function(e){this.node.addEventListener("mousedown",this),this.update()},r.prototype.onAfterDetach=function(e){this.node.removeEventListener("mousedown",this),this._releaseMouse()},r.prototype.onUpdateRequest=function(e){var n=this._value*100/this._maximum,i=this._page*100/(this._page+this._maximum);n=Math.max(0,Math.min(n,100)),i=Math.max(0,Math.min(i,100));var a=this.thumbNode.style;this._orientation==="horizontal"?(a.top="",a.height="",a.left=n+"%",a.width=i+"%",a.transform="translate("+-n+"%, 0%)"):(a.left="",a.width="",a.top=n+"%",a.height=i+"%",a.transform="translate(0%, "+-n+"%)")},r.prototype._evtKeyDown=function(e){if(e.preventDefault(),e.stopPropagation(),e.keyCode===27){var n=this._pressData?this._pressData.value:-1;this._releaseMouse(),n!==-1&&this._moveThumb(n)}},r.prototype._evtMouseDown=function(e){if(e.button===0&&(this.activate(),!this._pressData)){var n=PE.findPart(this,e.target);if(n){e.preventDefault(),e.stopPropagation();var i=Xd.overrideCursor("default");if(this._pressData={part:n,override:i,delta:-1,value:-1,mouseX:e.clientX,mouseY:e.clientY},document.addEventListener("mousemove",this,!0),document.addEventListener("mouseup",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0),n==="thumb"){var a=this.thumbNode,o=a.getBoundingClientRect();this._orientation==="horizontal"?this._pressData.delta=e.clientX-o.left:this._pressData.delta=e.clientY-o.top,a.classList.add("lm-mod-active"),a.classList.add("p-mod-active"),this._pressData.value=this._value;return}if(n==="track"){var o=this.thumbNode.getBoundingClientRect(),s=void 0;this._orientation==="horizontal"?s=e.clientX<o.left?"decrement":"increment":s=e.clientY<o.top?"decrement":"increment",this._repeatTimer=window.setTimeout(this._onRepeat,350),this._pageRequested.emit(s);return}if(n==="decrement"){this.decrementNode.classList.add("lm-mod-active"),this.decrementNode.classList.add("p-mod-active"),this._repeatTimer=window.setTimeout(this._onRepeat,350),this._stepRequested.emit("decrement");return}if(n==="increment"){this.incrementNode.classList.add("lm-mod-active"),this.incrementNode.classList.add("p-mod-active"),this._repeatTimer=window.setTimeout(this._onRepeat,350),this._stepRequested.emit("increment");return}}}},r.prototype._evtMouseMove=function(e){if(this._pressData&&(e.preventDefault(),e.stopPropagation(),this._pressData.mouseX=e.clientX,this._pressData.mouseY=e.clientY,this._pressData.part==="thumb")){var n=this.thumbNode.getBoundingClientRect(),i=this.trackNode.getBoundingClientRect(),a,o;this._orientation==="horizontal"?(a=e.clientX-i.left-this._pressData.delta,o=i.width-n.width):(a=e.clientY-i.top-this._pressData.delta,o=i.height-n.height);var s=o===0?0:a*this._maximum/o;this._moveThumb(s)}},r.prototype._evtMouseUp=function(e){e.button===0&&(e.preventDefault(),e.stopPropagation(),this._releaseMouse())},r.prototype._releaseMouse=function(){this._pressData&&(clearTimeout(this._repeatTimer),this._repeatTimer=-1,this._pressData.override.dispose(),this._pressData=null,document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("contextmenu",this,!0),this.thumbNode.classList.remove("lm-mod-active"),this.decrementNode.classList.remove("lm-mod-active"),this.incrementNode.classList.remove("lm-mod-active"),this.thumbNode.classList.remove("p-mod-active"),this.decrementNode.classList.remove("p-mod-active"),this.incrementNode.classList.remove("p-mod-active"))},r.prototype._moveThumb=function(e){e=Math.max(0,Math.min(e,this._maximum)),this._value!==e&&(this._value=e,this.update(),this._thumbMoved.emit(e))},r}(xn),PE;(function(t){function r(){var n=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div"),s=document.createElement("div");return i.className="lm-ScrollBar-button",a.className="lm-ScrollBar-button",i.dataset.action="decrement",a.dataset.action="increment",o.className="lm-ScrollBar-track",s.className="lm-ScrollBar-thumb",i.classList.add("p-ScrollBar-button"),a.classList.add("p-ScrollBar-button"),o.classList.add("p-ScrollBar-track"),s.classList.add("p-ScrollBar-thumb"),o.appendChild(s),n.appendChild(i),n.appendChild(o),n.appendChild(a),n}t.createNode=r;function e(n,i){return n.thumbNode.contains(i)?"thumb":n.trackNode.contains(i)?"track":n.decrementNode.contains(i)?"decrement":n.incrementNode.contains(i)?"increment":null}t.findPart=e})(PE||(PE={}));var m7t=function(t){Js(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e._widget=null,e}return r.prototype.dispose=function(){if(this._widget){var e=this._widget;this._widget=null,e.dispose()}t.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"widget",{get:function(){return this._widget},set:function(e){e&&(e.parent=this.parent),this._widget!==e&&(this._widget&&this._widget.dispose(),this._widget=e,this.parent&&e&&this.attachWidget(e))},enumerable:!0,configurable:!0}),r.prototype.iter=function(){return this._widget?cb(this._widget):Ih()},r.prototype.removeWidget=function(e){this._widget===e&&(this._widget=null,this.parent&&this.detachWidget(e))},r.prototype.init=function(){var e=this;t.prototype.init.call(this),Ei(this,function(n){e.attachWidget(n)})},r.prototype.attachWidget=function(e){this.parent.isAttached&&Ur.sendMessage(e,xn.Msg.BeforeAttach),this.parent.node.appendChild(e.node),this.parent.isAttached&&Ur.sendMessage(e,xn.Msg.AfterAttach)},r.prototype.detachWidget=function(e){this.parent.isAttached&&Ur.sendMessage(e,xn.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.isAttached&&Ur.sendMessage(e,xn.Msg.AfterDetach)},r}(Zd),$0=function(t){Js(r,t);function r(e){var n=t.call(this)||this;return n._fixed=0,n._spacing=4,n._dirty=!1,n._hasNormedSizes=!1,n._sizers=[],n._items=[],n._handles=[],n._box=null,n._alignment="start",n._orientation="horizontal",n.renderer=e.renderer,e.orientation!==void 0&&(n._orientation=e.orientation),e.alignment!==void 0&&(n._alignment=e.alignment),e.spacing!==void 0&&(n._spacing=Lf.clampSpacing(e.spacing)),n}return r.prototype.dispose=function(){Ei(this._items,function(e){e.dispose()}),this._box=null,this._items.length=0,this._sizers.length=0,this._handles.length=0,t.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"orientation",{get:function(){return this._orientation},set:function(e){this._orientation!==e&&(this._orientation=e,this.parent&&(this.parent.dataset.orientation=e,this.parent.fit()))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"alignment",{get:function(){return this._alignment},set:function(e){this._alignment!==e&&(this._alignment=e,this.parent&&(this.parent.dataset.alignment=e,this.parent.update()))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"spacing",{get:function(){return this._spacing},set:function(e){e=Lf.clampSpacing(e),this._spacing!==e&&(this._spacing=e,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"handles",{get:function(){return this._handles},enumerable:!0,configurable:!0}),r.prototype.relativeSizes=function(){return Lf.normalize(this._sizers.map(function(e){return e.size}))},r.prototype.setRelativeSizes=function(e){for(var n=this._sizers.length,i=e.slice(0,n);i.length<n;)i.push(0);for(var a=Lf.normalize(i),o=0;o<n;++o){var s=this._sizers[o];s.sizeHint=a[o],s.size=a[o]}this._hasNormedSizes=!0,this.parent&&this.parent.update()},r.prototype.moveHandle=function(e,n){var i=this._handles[e];if(!(!i||i.classList.contains("lm-mod-hidden"))){var a;if(this._orientation==="horizontal"?a=n-i.offsetLeft:a=n-i.offsetTop,a!==0){for(var o=0,s=this._sizers;o<s.length;o++){var u=s[o];u.size>0&&(u.sizeHint=u.size)}bc.adjust(this._sizers,e,a),this.parent&&this.parent.update()}}},r.prototype.init=function(){this.parent.dataset.orientation=this.orientation,this.parent.dataset.alignment=this.alignment,t.prototype.init.call(this)},r.prototype.attachWidget=function(e,n){var i=new pb(n),a=Lf.createHandle(this.renderer),o=Lf.averageSize(this._sizers),s=Lf.createSizer(o);ln.insert(this._items,e,i),ln.insert(this._sizers,e,s),ln.insert(this._handles,e,a),this.parent.isAttached&&Ur.sendMessage(n,xn.Msg.BeforeAttach),this.parent.node.appendChild(n.node),this.parent.node.appendChild(a),this.parent.isAttached&&Ur.sendMessage(n,xn.Msg.AfterAttach),this.parent.fit()},r.prototype.moveWidget=function(e,n,i){ln.move(this._items,e,n),ln.move(this._sizers,e,n),ln.move(this._handles,e,n),this.parent.fit()},r.prototype.detachWidget=function(e,n){var i=ln.removeAt(this._items,e),a=ln.removeAt(this._handles,e);ln.removeAt(this._sizers,e),this.parent.isAttached&&Ur.sendMessage(n,xn.Msg.BeforeDetach),this.parent.node.removeChild(n.node),this.parent.node.removeChild(a),this.parent.isAttached&&Ur.sendMessage(n,xn.Msg.AfterDetach),i.dispose(),this.parent.fit()},r.prototype.onBeforeShow=function(e){t.prototype.onBeforeShow.call(this,e),this.parent.update()},r.prototype.onBeforeAttach=function(e){t.prototype.onBeforeAttach.call(this,e),this.parent.fit()},r.prototype.onChildShown=function(e){this.parent.fit()},r.prototype.onChildHidden=function(e){this.parent.fit()},r.prototype.onResize=function(e){this.parent.isVisible&&this._update(e.width,e.height)},r.prototype.onUpdateRequest=function(e){this.parent.isVisible&&this._update(-1,-1)},r.prototype.onFitRequest=function(e){this.parent.isAttached&&this._fit()},r.prototype._fit=function(){for(var e=0,n=-1,i=0,a=this._items.length;i<a;++i)this._items[i].isHidden?(this._handles[i].classList.add("lm-mod-hidden"),this._handles[i].classList.add("p-mod-hidden")):(this._handles[i].classList.remove("lm-mod-hidden"),this._handles[i].classList.remove("p-mod-hidden"),n=i,e++);n!==-1&&(this._handles[n].classList.add("lm-mod-hidden"),this._handles[n].classList.add("p-mod-hidden")),this._fixed=this._spacing*Math.max(0,e-1);for(var o=this._orientation==="horizontal",s=o?this._fixed:0,u=o?0:this._fixed,i=0,a=this._items.length;i<a;++i){var c=this._items[i],h=this._sizers[i];if(h.size>0&&(h.sizeHint=h.size),c.isHidden){h.minSize=0,h.maxSize=0;continue}c.fit(),h.stretch=r.getStretch(c.widget),o?(h.minSize=c.minWidth,h.maxSize=c.maxWidth,s+=c.minWidth,u=Math.max(u,c.minHeight)):(h.minSize=c.minHeight,h.maxSize=c.maxHeight,u+=c.minHeight,s=Math.max(s,c.minWidth))}var p=this._box=Xa.boxSizing(this.parent.node);s+=p.horizontalSum,u+=p.verticalSum;var v=this.parent.node.style;v.minWidth=s+"px",v.minHeight=u+"px",this._dirty=!0,this.parent.parent&&Ur.sendMessage(this.parent.parent,xn.Msg.FitRequest),this._dirty&&Ur.sendMessage(this.parent,xn.Msg.UpdateRequest)},r.prototype._update=function(e,n){this._dirty=!1;for(var i=0,a=0,o=this._items.length;a<o;++a)i+=+!this._items[a].isHidden;if(i!==0){e<0&&(e=this.parent.node.offsetWidth),n<0&&(n=this.parent.node.offsetHeight),this._box||(this._box=Xa.boxSizing(this.parent.node));var s=this._box.paddingTop,u=this._box.paddingLeft,c=e-this._box.horizontalSum,h=n-this._box.verticalSum,p,v=this._orientation==="horizontal";if(v?p=Math.max(0,c-this._fixed):p=Math.max(0,h-this._fixed),this._hasNormedSizes){for(var x=0,E=this._sizers;x<E.length;x++){var R=E[x];R.sizeHint*=p}this._hasNormedSizes=!1}var D=bc.calc(this._sizers,p),H=0,W=0;if(D>0)switch(this._alignment){case"start":break;case"center":H=0,W=D/2;break;case"end":H=0,W=D;break;case"justify":H=D/i,W=0;break;default:throw"unreachable"}for(var a=0,o=this._items.length;a<o;++a){var $=this._items[a];if(!$.isHidden){var J=this._sizers[a].size,B=this._handles[a].style;v?($.update(u+W,s,J+H,h),u+=J+H,B.top=s+"px",B.left=u+W+"px",B.width=this._spacing+"px",B.height=h+"px",u+=this._spacing):($.update(u,s+W,c,J+H),s+=J+H,B.top=s+W+"px",B.left=u+"px",B.width=c+"px",B.height=this._spacing+"px",s+=this._spacing)}}}},r}(OE);(function(t){function r(n){return Lf.stretchProperty.get(n)}t.getStretch=r;function e(n,i){Lf.stretchProperty.set(n,i)}t.setStretch=e})($0||($0={}));var Lf;(function(t){t.stretchProperty=new Ac({name:"stretch",create:function(){return 0},coerce:function(s,u){return Math.max(0,Math.floor(u))},changed:o});function r(s){var u=new Kd;return u.sizeHint=Math.floor(s),u}t.createSizer=r;function e(s){var u=s.createHandle();return u.style.position="absolute",u}t.createHandle=e;function n(s){return Math.max(0,Math.floor(s))}t.clampSpacing=n;function i(s){return s.reduce(function(u,c){return u+c.size},0)/s.length||0}t.averageSize=i;function a(s){var u=s.length;if(u===0)return[];var c=s.reduce(function(h,p){return h+Math.abs(p)},0);return c===0?s.map(function(h){return 1/u}):s.map(function(h){return h/c})}t.normalize=a;function o(s){s.parent&&s.parent.layout instanceof $0&&s.parent.fit()}})(Lf||(Lf={}));var YB=function(t){Js(r,t);function r(e){e===void 0&&(e={});var n=t.call(this,{layout:KB.createLayout(e)})||this;return n._pressData=null,n.addClass("lm-SplitPanel"),n.addClass("p-SplitPanel"),n}return r.prototype.dispose=function(){this._releaseMouse(),t.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"orientation",{get:function(){return this.layout.orientation},set:function(e){this.layout.orientation=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"alignment",{get:function(){return this.layout.alignment},set:function(e){this.layout.alignment=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"spacing",{get:function(){return this.layout.spacing},set:function(e){this.layout.spacing=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"renderer",{get:function(){return this.layout.renderer},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"handles",{get:function(){return this.layout.handles},enumerable:!0,configurable:!0}),r.prototype.relativeSizes=function(){return this.layout.relativeSizes()},r.prototype.setRelativeSizes=function(e){this.layout.setRelativeSizes(e)},r.prototype.handleEvent=function(e){switch(e.type){case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;case"keydown":this._evtKeyDown(e);break;case"contextmenu":e.preventDefault(),e.stopPropagation();break}},r.prototype.onBeforeAttach=function(e){this.node.addEventListener("mousedown",this)},r.prototype.onAfterDetach=function(e){this.node.removeEventListener("mousedown",this),this._releaseMouse()},r.prototype.onChildAdded=function(e){e.child.addClass("lm-SplitPanel-child"),e.child.addClass("p-SplitPanel-child"),this._releaseMouse()},r.prototype.onChildRemoved=function(e){e.child.removeClass("lm-SplitPanel-child"),e.child.removeClass("p-SplitPanel-child"),this._releaseMouse()},r.prototype._evtKeyDown=function(e){e.preventDefault(),e.stopPropagation(),e.keyCode===27&&this._releaseMouse()},r.prototype._evtMouseDown=function(e){if(e.button===0){var n=this.layout,i=ln.findFirstIndex(n.handles,function(h){return h.contains(e.target)});if(i!==-1){e.preventDefault(),e.stopPropagation(),document.addEventListener("mouseup",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0);var a,o=n.handles[i],s=o.getBoundingClientRect();n.orientation==="horizontal"?a=e.clientX-s.left:a=e.clientY-s.top;var u=window.getComputedStyle(o),c=Xd.overrideCursor(u.cursor);this._pressData={index:i,delta:a,override:c}}}},r.prototype._evtMouseMove=function(e){e.preventDefault(),e.stopPropagation();var n,i=this.layout,a=this.node.getBoundingClientRect();i.orientation==="horizontal"?n=e.clientX-a.left-this._pressData.delta:n=e.clientY-a.top-this._pressData.delta,i.moveHandle(this._pressData.index,n)},r.prototype._evtMouseUp=function(e){e.button===0&&(e.preventDefault(),e.stopPropagation(),this._releaseMouse())},r.prototype._releaseMouse=function(){this._pressData&&(this._pressData.override.dispose(),this._pressData=null,document.removeEventListener("mouseup",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("contextmenu",this,!0))},r}(db);(function(t){var r=function(){function i(){}return i.prototype.createHandle=function(){var a=document.createElement("div");return a.className="lm-SplitPanel-handle",a.classList.add("p-SplitPanel-handle"),a},i}();t.Renderer=r,t.defaultRenderer=new r;function e(i){return $0.getStretch(i)}t.getStretch=e;function n(i,a){$0.setStretch(i,a)}t.setStretch=n})(YB||(YB={}));var KB;(function(t){function r(e){return e.layout||new $0({renderer:e.renderer||YB.defaultRenderer,orientation:e.orientation,alignment:e.alignment,spacing:e.spacing})}t.createLayout=r})(KB||(KB={}));var dFe=function(t){Js(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e._dirty=!1,e._items=[],e._box=null,e}return r.prototype.dispose=function(){Ei(this._items,function(e){e.dispose()}),this._box=null,this._items.length=0,t.prototype.dispose.call(this)},r.prototype.attachWidget=function(e,n){ln.insert(this._items,e,new pb(n)),this.parent.isAttached&&Ur.sendMessage(n,xn.Msg.BeforeAttach),this.parent.node.appendChild(n.node),this.parent.isAttached&&Ur.sendMessage(n,xn.Msg.AfterAttach),this.parent.fit()},r.prototype.moveWidget=function(e,n,i){ln.move(this._items,e,n),this.parent.update()},r.prototype.detachWidget=function(e,n){var i=ln.removeAt(this._items,e);this.parent.isAttached&&Ur.sendMessage(n,xn.Msg.BeforeDetach),this.parent.node.removeChild(n.node),this.parent.isAttached&&Ur.sendMessage(n,xn.Msg.AfterDetach),i.widget.node.style.zIndex="",i.dispose(),this.parent.fit()},r.prototype.onBeforeShow=function(e){t.prototype.onBeforeShow.call(this,e),this.parent.update()},r.prototype.onBeforeAttach=function(e){t.prototype.onBeforeAttach.call(this,e),this.parent.fit()},r.prototype.onChildShown=function(e){this.parent.fit()},r.prototype.onChildHidden=function(e){this.parent.fit()},r.prototype.onResize=function(e){this.parent.isVisible&&this._update(e.width,e.height)},r.prototype.onUpdateRequest=function(e){this.parent.isVisible&&this._update(-1,-1)},r.prototype.onFitRequest=function(e){this.parent.isAttached&&this._fit()},r.prototype._fit=function(){for(var e=0,n=0,i=0,a=this._items.length;i<a;++i){var o=this._items[i];o.isHidden||(o.fit(),e=Math.max(e,o.minWidth),n=Math.max(n,o.minHeight))}var s=this._box=Xa.boxSizing(this.parent.node);e+=s.horizontalSum,n+=s.verticalSum;var u=this.parent.node.style;u.minWidth=e+"px",u.minHeight=n+"px",this._dirty=!0,this.parent.parent&&Ur.sendMessage(this.parent.parent,xn.Msg.FitRequest),this._dirty&&Ur.sendMessage(this.parent,xn.Msg.UpdateRequest)},r.prototype._update=function(e,n){this._dirty=!1;for(var i=0,a=0,o=this._items.length;a<o;++a)i+=+!this._items[a].isHidden;if(i!==0){e<0&&(e=this.parent.node.offsetWidth),n<0&&(n=this.parent.node.offsetHeight),this._box||(this._box=Xa.boxSizing(this.parent.node));for(var s=this._box.paddingTop,u=this._box.paddingLeft,c=e-this._box.horizontalSum,h=n-this._box.verticalSum,a=0,o=this._items.length;a<o;++a){var p=this._items[a];p.isHidden||(p.widget.node.style.zIndex=""+a,p.update(u,s,c,h))}}},r}(OE),mFe=function(t){Js(r,t);function r(e){e===void 0&&(e={});var n=t.call(this,{layout:ZB.createLayout(e)})||this;return n._widgetRemoved=new za(n),n.addClass("lm-StackedPanel"),n.addClass("p-StackedPanel"),n}return Object.defineProperty(r.prototype,"widgetRemoved",{get:function(){return this._widgetRemoved},enumerable:!0,configurable:!0}),r.prototype.onChildAdded=function(e){e.child.addClass("lm-StackedPanel-child"),e.child.addClass("p-StackedPanel-child")},r.prototype.onChildRemoved=function(e){e.child.removeClass("lm-StackedPanel-child"),e.child.removeClass("p-StackedPanel-child"),this._widgetRemoved.emit(e.child)},r}(db),ZB;(function(t){function r(e){return e.layout||new dFe}t.createLayout=r})(ZB||(ZB={}));var v7t=function(t){Js(r,t);function r(e){e===void 0&&(e={});var n=t.call(this)||this;n._currentChanged=new za(n),n.addClass("lm-TabPanel"),n.addClass("p-TabPanel"),n.tabBar=new EE(e),n.tabBar.addClass("lm-TabPanel-tabBar"),n.stackedPanel=new mFe,n.stackedPanel.addClass("lm-TabPanel-stackedPanel"),n.tabBar.addClass("p-TabPanel-tabBar"),n.stackedPanel.addClass("p-TabPanel-stackedPanel"),n.tabBar.tabMoved.connect(n._onTabMoved,n),n.tabBar.currentChanged.connect(n._onCurrentChanged,n),n.tabBar.tabCloseRequested.connect(n._onTabCloseRequested,n),n.tabBar.tabActivateRequested.connect(n._onTabActivateRequested,n),n.stackedPanel.widgetRemoved.connect(n._onWidgetRemoved,n),n._tabPlacement=e.tabPlacement||"top";var i=Z0.directionFromPlacement(n._tabPlacement),a=Z0.orientationFromPlacement(n._tabPlacement);n.tabBar.orientation=a,n.tabBar.dataset.placement=n._tabPlacement;var o=new kf({direction:i,spacing:0});return kf.setStretch(n.tabBar,0),kf.setStretch(n.stackedPanel,1),o.addWidget(n.tabBar),o.addWidget(n.stackedPanel),n.layout=o,n}return Object.defineProperty(r.prototype,"currentChanged",{get:function(){return this._currentChanged},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentIndex",{get:function(){return this.tabBar.currentIndex},set:function(e){this.tabBar.currentIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentWidget",{get:function(){var e=this.tabBar.currentTitle;return e?e.owner:null},set:function(e){this.tabBar.currentTitle=e?e.title:null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tabsMovable",{get:function(){return this.tabBar.tabsMovable},set:function(e){this.tabBar.tabsMovable=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tabPlacement",{get:function(){return this._tabPlacement},set:function(e){if(this._tabPlacement!==e){this._tabPlacement=e;var n=Z0.directionFromPlacement(e),i=Z0.orientationFromPlacement(e);this.tabBar.orientation=i,this.tabBar.dataset.placement=e,this.layout.direction=n}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"widgets",{get:function(){return this.stackedPanel.widgets},enumerable:!0,configurable:!0}),r.prototype.addWidget=function(e){this.insertWidget(this.widgets.length,e)},r.prototype.insertWidget=function(e,n){n!==this.currentWidget&&n.hide(),this.stackedPanel.insertWidget(e,n),this.tabBar.insertTab(e,n.title)},r.prototype._onCurrentChanged=function(e,n){var i=n.previousIndex,a=n.previousTitle,o=n.currentIndex,s=n.currentTitle,u=a?a.owner:null,c=s?s.owner:null;u&&u.hide(),c&&c.show(),this._currentChanged.emit({previousIndex:i,previousWidget:u,currentIndex:o,currentWidget:c}),(pl.IS_EDGE||pl.IS_IE)&&Ur.flush()},r.prototype._onTabActivateRequested=function(e,n){n.title.owner.activate()},r.prototype._onTabCloseRequested=function(e,n){n.title.owner.close()},r.prototype._onTabMoved=function(e,n){this.stackedPanel.insertWidget(n.toIndex,n.title.owner)},r.prototype._onWidgetRemoved=function(e,n){this.tabBar.removeTab(n.title)},r}(xn),Z0;(function(t){function r(a){return n[a]}t.orientationFromPlacement=r;function e(a){return i[a]}t.directionFromPlacement=e;var n={top:"horizontal",left:"vertical",right:"vertical",bottom:"horizontal"},i={top:"top-to-bottom",left:"left-to-right",right:"right-to-left",bottom:"bottom-to-top"}})(Z0||(Z0={}));var J0=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(r,e)};return function(r,e){t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$d=function(){return $d=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},$d.apply(this,arguments)};function mb(t,r){if(Array.isArray(t)){var e=[];return t.forEach(function(i,a){e.push(mb(i,r))}),Promise.all(e)}else if(t instanceof Object){var n={};return Object.keys(t).forEach(function(i){n[i]=mb(t[i],r)}),V0(n)}else return typeof t=="string"&&t.slice(0,10)==="IPY_MODEL_"?r.get_model(t.slice(10,t.length)):Promise.resolve(t)}var zv=function(t){J0(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.defaults=function(){return{_model_module:"@jupyter-widgets/base",_model_name:"WidgetModel",_model_module_version:vE,_view_module:"@jupyter-widgets/base",_view_name:null,_view_module_version:vE,_view_count:null}},r.prototype.isNew=function(){return!1},r.prototype.initialize=function(e,n){this._expectedEchoMsgIds={},this._attrsToUpdate={},t.prototype.initialize.call(this,e,n),this.widget_manager=n.widget_manager,this.model_id=n.model_id;var i=n.comm;this.views=Object.create(null),this.state_change=Promise.resolve(),this._closed=!1,this._state_lock=null,this._msg_buffer=null,this._msg_buffer_callbacks=null,this._pending_msgs=0,this._buffered_state_diff={},i?(this.comm=i,i.on_close(this._handle_comm_closed.bind(this)),i.on_msg(this._handle_comm_msg.bind(this)),this.comm_live=!0):this.comm_live=!1},Object.defineProperty(r.prototype,"comm_live",{get:function(){return this._comm_live},set:function(e){this._comm_live=e,this.trigger("comm_live_update")},enumerable:!0,configurable:!0}),r.prototype.send=function(e,n,i){if(this.comm!==void 0){var a={method:"custom",content:e};this.comm.send(a,n,{},i)}},r.prototype.close=function(e){var n=this;if(e===void 0&&(e=!1),!this._closed){this._closed=!0,this.comm&&!e&&this.comm.close(),this.stopListening(),this.trigger("destroy",this),this.comm&&delete this.comm;var i=Object.keys(this.views).map(function(a){return n.views[a].then(function(o){return o.remove()})});return delete this.views,Promise.all(i).then(function(){})}},r.prototype._handle_comm_closed=function(e){this.trigger("comm:close"),this.close(!0)},r.prototype._handle_comm_msg=function(e){var n=this,i=e.content.data,a=i.method;switch(a){case"update":case"echo_update":return this.state_change=this.state_change.then(function(){var o,s,u,c=i.state,h=(o=i.buffer_paths,o??[]),p=(u=(s=e.buffers)===null||s===void 0?void 0:s.slice(0,h.length),u??[]).map(function(E){return E instanceof DataView?E:new DataView(E instanceof ArrayBuffer?E:E.buffer)});if(Gd(c,h,p),e.parent_header&&a==="echo_update"){var v=e.parent_header.msg_id,x=Object.keys(c).filter(function(E){return n._expectedEchoMsgIds.hasOwnProperty(E)});x.forEach(function(E){var R=n._expectedEchoMsgIds[E]!==v;R?delete c[E]:(delete n._expectedEchoMsgIds[E],n._msg_buffer!==null&&Object.prototype.hasOwnProperty.call(n._msg_buffer,E)&&delete c[E])})}return n.constructor._deserialize_state(c,n.widget_manager)}).then(function(o){n.set_state(o)}).catch(Mh("Could not process update msg for model id: "+this.model_id,!0)),this.state_change;case"custom":return this.trigger("msg:custom",i.content,e.buffers),Promise.resolve()}},r.prototype.set_state=function(e){this._state_lock=e;try{this.set(e)}catch(n){console.error("Error setting state: "+n.message)}finally{this._state_lock=null}},r.prototype.get_state=function(e){var n=this.attributes;if(e){var i=this.defaults,a=typeof i=="function"?i.call(this):i,o={};return Object.keys(n).forEach(function(s){G0(n[s],a[s])||(o[s]=n[s])}),o}else return $d({},n)},r.prototype._handle_status=function(e){if(this.comm!==void 0&&e.content.execution_state==="idle"&&(this._pending_msgs--,this._pending_msgs<0&&(console.error("Jupyter Widgets message throttle: Pending messages < 0 (="+this._pending_msgs+"), which is unexpected. Resetting to 0 to continue."),this._pending_msgs=0),this._msg_buffer!==null&&this._pending_msgs<1)){var n=this.send_sync_message(this._msg_buffer,this._msg_buffer_callbacks);this.rememberLastUpdateFor(n),this._msg_buffer=null,this._msg_buffer_callbacks=null}},r.prototype.callbacks=function(e){return this.widget_manager.callbacks(e)},r.prototype.set=function(e,n,i){var a=jne.call(this,e,n,i);if(this._buffered_state_diff!==void 0){var o=this.changedAttributes()||{};if(this._state_lock)for(var s=0,u=Object.keys(this._state_lock);s<u.length;s++){var c=u[s];o[c]===this._state_lock[c]&&delete o[c]}this._buffered_state_diff=Lp(this._buffered_state_diff,o)}return a},r.prototype.sync=function(e,n,i){var a=this;if(i===void 0&&(i={}),this.comm===void 0)throw"Syncing error: no comm channel defined";var o=e==="patch"?i.attrs:n.get_state(i.drop_defaults);if(this._state_lock)for(var s=0,u=Object.keys(this._state_lock);s<u.length;s++){var c=u[s];o[c]===this._state_lock[c]&&delete o[c]}Object.keys(o).forEach(function(x){a._attrsToUpdate[x]=!0});var h=this.serialize(o);if(Object.keys(h).length>0){var p=i.callbacks||this.callbacks();if(this._pending_msgs>=1){switch(e){case"patch":this._msg_buffer=Lp(this._msg_buffer||{},h);break;case"update":case"create":this._msg_buffer=h;break;default:throw"unrecognized syncing method"}this._msg_buffer_callbacks=p}else{var v=this.send_sync_message(o,p);this.rememberLastUpdateFor(v)}}},r.prototype.rememberLastUpdateFor=function(e){var n=this;Object.keys(this._attrsToUpdate).forEach(function(i){n._expectedEchoMsgIds[i]=e}),this._attrsToUpdate={}},r.prototype.serialize=function(e){for(var n=this.constructor.serializers||{},i=0,a=Object.keys(e);i<a.length;i++){var o=a[i];try{n[o]&&n[o].serialize?e[o]=n[o].serialize(e[o],this):e[o]=JSON.parse(JSON.stringify(e[o])),e[o]&&e[o].toJSON&&(e[o]=e[o].toJSON())}catch(s){throw console.error("Error serializing widget state attribute: ",o),s}}return e},r.prototype.send_sync_message=function(e,n){var i=this;if(n===void 0&&(n={}),!this.comm)return"";try{n={shell:$d({},n.shell),iopub:$d({},n.iopub),input:n.input};var a=n.iopub.status;n.iopub.status=function(u){i._handle_status(u),a&&a(u)};var o=sb(e),s=this.comm.send({method:"update",state:o.state,buffer_paths:o.buffer_paths},n,{},o.buffers);return this._pending_msgs++,s}catch(u){console.error("Could not send widget sync message",u)}return""},r.prototype.save_changes=function(e){if(this.comm_live){var n={patch:!0};e&&(n.callbacks=e),this.save(this._buffered_state_diff,n),this._buffered_state_diff={}}},r.prototype.on_some_change=function(e,n,i){var a=this;this.on("change",function(){e.some(a.hasChanged,a)&&n.apply(i,arguments)},this)},r.prototype.toJSON=function(e){return"IPY_MODEL_"+this.model_id},r._deserialize_state=function(e,n){var i=this.serializers,a;if(i){a={};for(var o in e)i[o]&&i[o].deserialize?a[o]=i[o].deserialize(e[o],n):a[o]=e[o]}else a=e;return V0(a)},r}(gie.Model);var JB=function(t){J0(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.defaults=function(){return Lp(t.prototype.defaults.call(this),{_dom_classes:[]})},r.serializers=$d($d({},zv.serializers),{layout:{deserialize:mb},style:{deserialize:mb}}),r}(zv);var Q0=function(t){J0(r,t);function r(e){return t.call(this,e)||this}return r.prototype.initialize=function(e){var n=this;this.listenTo(this.model,"change",function(){var i=Object.keys(n.model.changedAttributes()||{});i[0]==="_view_count"&&i.length===1||n.update()}),this.options=e.options,this.once("remove",function(){typeof n.model.get("_view_count")=="number"&&(n.model.set("_view_count",n.model.get("_view_count")-1),n.model.save_changes())}),this.once("displayed",function(){typeof n.model.get("_view_count")=="number"&&(n.model.set("_view_count",n.model.get("_view_count")+1),n.model.save_changes())}),this.displayed=new Promise(function(i,a){n.once("displayed",i)})},r.prototype.update=function(e){},r.prototype.render=function(){},r.prototype.create_child_view=function(e,n){return n===void 0&&(n={}),n=$d({parent:this},n),this.model.widget_manager.create_view(e,n).catch(Mh("Could not create child view",!0))},r.prototype.callbacks=function(){return this.model.callbacks(this)},r.prototype.send=function(e,n){this.model.send(e,this.callbacks(),n)},r.prototype.touch=function(){this.model.save_changes(this.callbacks())},r.prototype.remove=function(){return t.prototype.remove.call(this),this.trigger("remove"),this},r}(Wne);var Aie=function(t){J0(r,t);function r(e){var n=this,i=e.view;return delete e.view,n=t.call(this,e)||this,n._view=i,n}return r.prototype.dispose=function(){this.isDisposed||(t.prototype.dispose.call(this),this._view&&this._view.remove(),this._view=null)},r.prototype.processMessage=function(e){t.prototype.processMessage.call(this,e),this._view.processPhosphorMessage(e)},r}(xn);var vFe=function(t){J0(r,t);function r(e){var n=this,i=e.view;return delete e.view,n=t.call(this,e)||this,n._view=i,n}return r.prototype.processMessage=function(e){t.prototype.processMessage.call(this,e),this._view.processPhosphorMessage(e)},r.prototype.dispose=function(){this.isDisposed||(t.prototype.dispose.call(this),this._view&&this._view.remove(),this._view=null)},r}(db);var QB=function(t){J0(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.initialize=function(e){var n=this;t.prototype.initialize.call(this,e),this.listenTo(this.model,"change:_dom_classes",function(i,a){var o=i.previous("_dom_classes");n.update_classes(o,a)}),this.layoutPromise=Promise.resolve(),this.listenTo(this.model,"change:layout",function(i,a){n.setLayout(a,i.previous("layout"))}),this.stylePromise=Promise.resolve(),this.listenTo(this.model,"change:style",function(i,a){n.setStyle(a,i.previous("style"))}),this.displayed.then(function(){n.update_classes([],n.model.get("_dom_classes")),n.setLayout(n.model.get("layout")),n.setStyle(n.model.get("style"))}),this._comm_live_update(),this.listenTo(this.model,"comm_live_update",function(){n._comm_live_update()})},r.prototype.setLayout=function(e,n){var i=this;e&&(this.layoutPromise=this.layoutPromise.then(function(a){return a&&(a.unlayout(),i.stopListening(a.model),a.remove()),i.create_child_view(e).then(function(o){return i.displayed.then(function(){return o.trigger("displayed"),i.listenTo(o.model,"change",function(){Ur.postMessage(i.pWidget,xn.ResizeMessage.UnknownSize)}),Ur.postMessage(i.pWidget,xn.ResizeMessage.UnknownSize),o})}).catch(Mh("Could not add LayoutView to DOMWidgetView",!0))}))},r.prototype.setStyle=function(e,n){var i=this;e&&(this.stylePromise=this.stylePromise.then(function(a){return a&&(a.unstyle(),i.stopListening(a.model),a.remove()),i.create_child_view(e).then(function(o){return i.displayed.then(function(){return o.trigger("displayed"),o})}).catch(Mh("Could not add styleView to DOMWidgetView",!0))}))},r.prototype.update_classes=function(e,n,i){i===void 0&&(i=this.el),mE(e,n).map(function(a){i.classList?i.classList.remove(a):i.setAttribute("class",i.getAttribute("class").replace(a,""))}),mE(n,e).map(function(a){i.classList?i.classList.add(a):i.setAttribute("class",i.getAttribute("class").concat(" ",a))})},r.prototype.update_mapped_classes=function(e,n,i){var a=this.model.previous(n),o=e[a]?e[a]:[];a=this.model.get(n);var s=e[a]?e[a]:[];this.update_classes(o,s,i||this.el)},r.prototype.set_mapped_classes=function(e,n,i){var a=this.model.get(n),o=e[a]?e[a]:[];this.update_classes([],o,i||this.el)},r.prototype._setElement=function(e){this.pWidget&&this.pWidget.dispose(),this.$el=e instanceof $B.default?e:(0,$B.default)(e),this.el=this.$el[0],this.pWidget=new Aie({node:e,view:this})},r.prototype.remove=function(){return this.pWidget&&this.pWidget.dispose(),t.prototype.remove.call(this)},r.prototype.processPhosphorMessage=function(e){switch(e.type){case"after-attach":this.trigger("displayed");break}},r.prototype._comm_live_update=function(){this.model.comm_live?this.pWidget.removeClass("jupyter-widgets-disconnected"):this.pWidget.addClass("jupyter-widgets-disconnected")},r}(Q0);var yie=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(r,e)};return function(r,e){t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),_ie={align_content:null,align_items:null,align_self:null,border:null,bottom:null,display:null,flex:null,flex_flow:null,height:null,justify_content:null,justify_items:null,left:null,margin:null,max_height:null,max_width:null,min_height:null,min_width:null,overflow:null,overflow_x:null,overflow_y:null,order:null,padding:null,right:null,top:null,visibility:null,width:null,object_fit:null,object_position:null,grid_auto_columns:null,grid_auto_flow:null,grid_auto_rows:null,grid_gap:null,grid_template_rows:null,grid_template_columns:null,grid_template_areas:null,grid_row:null,grid_column:null,grid_area:null},gFe=function(t){yie(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.defaults=function(){return Lp(t.prototype.defaults.call(this),{_model_name:"LayoutModel",_view_name:"LayoutView"},_ie)},r}(zv);var AFe=function(t){yie(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.initialize=function(e){this._traitNames=[],t.prototype.initialize.call(this,e);for(var n=0,i=Object.keys(_ie);n<i.length;n++){var a=i[n];this.registerTrait(a)}},r.prototype.registerTrait=function(e){var n=this;if(this._traitNames.push(e),e==="overflow_x"||e==="overflow_y"){this.listenTo(this.model,"change:"+e,function(i,a){n.handleOverflowChange(e,a)}),this.handleOverflowChange(e,this.model.get(e));return}this.listenTo(this.model,"change:"+e,function(i,a){n.handleChange(e,a)}),this.handleChange(e,this.model.get(e))},r.prototype.css_name=function(e){return e.replace(/_/g,"-")},r.prototype.handleChange=function(e,n){var i=this.options.parent;i?n===null?i.el.style.removeProperty(this.css_name(e)):i.el.style[this.css_name(e)]=n:console.warn("Style not applied because a parent view does not exist")},r.prototype.handleOverflowChange=function(e,n){var i=this.options.parent;i?n===null?this.model.get("overflow")===null&&i.el.style.removeProperty(this.css_name(e)):i.el.style[this.css_name(e)]=n:console.warn("Style not applied because a parent view does not exist")},r.prototype.unlayout=function(){var e=this,n=this.options.parent;this._traitNames.forEach(function(i){n?n.el.style.removeProperty(e.css_name(i)):console.warn("Style not removed because a parent view does not exist")},this)},r}(Q0);var bie=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(r,e)};return function(r,e){t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),yFe=function(t){bie(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.defaults=function(){var e=this.constructor;return Lp(t.prototype.defaults.call(this),{_model_name:"StyleModel",_view_name:"StyleView"},Object.keys(e.styleProperties).reduce(function(n,i){return n[i]=e.styleProperties[i].default,n},{}))},r.styleProperties={},r}(zv);var _Fe=function(t){bie(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.initialize=function(e){this._traitNames=[],t.prototype.initialize.call(this,e);for(var n=this.model.constructor,i=0,a=Object.keys(n.styleProperties);i<a.length;i++){var o=a[i];this.registerTrait(o)}this.style()},r.prototype.registerTrait=function(e){var n=this;this._traitNames.push(e),this.listenTo(this.model,"change:"+e,function(i,a){n.handleChange(e,a)})},r.prototype.handleChange=function(e,n){var i=this.options.parent;if(i){var a=this.model.constructor,o=a.styleProperties,s=o[e].attribute,u=o[e].selector,c=u?i.el.querySelectorAll(u):[i.el];if(n===null)for(var h=0;h!==c.length;++h)c[h].style.removeProperty(s);else for(var h=0;h!==c.length;++h)c[h].style[s]=n}else console.warn("Style not applied because a parent view does not exist")},r.prototype.style=function(){for(var e=0,n=this._traitNames;e<n.length;e++){var i=n[e];this.handleChange(i,this.model.get(i))}},r.prototype.unstyle=function(){var e=this.options.parent,n=this.model.constructor,i=n.styleProperties;this._traitNames.forEach(function(a){if(e)for(var o=i[a].attribute,s=i[a].selector,u=s?e.el.querySelectorAll(s):[e.el],c=0;c!==u.length;++c)u[c].style.removeProperty(o);else console.warn("Style not removed because a parent view does not exist")},this)},r}(Q0);var bFe=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(h){try{c(n.next(h))}catch(p){o(p)}}function u(h){try{c(n.throw(h))}catch(p){o(p)}}function c(h){h.done?a(h.value):i(h.value).then(s,u)}c((n=n.apply(t,r||[])).next())})},xFe=function(t,r){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(h){return u([c,h])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=r.call(t,e)}catch(h){c=[6,h],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},eD;(function(t){var r;(function(e){var n=function(){function a(o){this.targets=Object.create(null),this.comms=Object.create(null),this.kernel=null,this.jsServicesKernel=null,this.init_kernel(o)}return a.prototype.init_kernel=function(o){this.kernel=o,this.jsServicesKernel=o},a.prototype.new_comm=function(o,s,u,c,h,p){return bFe(this,void 0,void 0,function(){var v,x;return xFe(this,function(E){return v=this.jsServicesKernel.createComm(o,h),x=new i(v),this.register_comm(x),x.open(s,u,c,p),[2,x]})})},a.prototype.register_target=function(o,s){var u=this,c=this.jsServicesKernel.registerCommTarget(o,function(h,p){var v=new i(h);u.register_comm(v);try{return s(v,p)}catch(x){v.close(),console.error(x),console.error(new Error("Exception opening new comm"))}});this.targets[o]=c},a.prototype.unregister_target=function(o,s){var u=this.targets[o];u.dispose(),delete this.targets[o]},a.prototype.register_comm=function(o){return this.comms[o.comm_id]=Promise.resolve(o),o.kernel=this.kernel,o.comm_id},a}();e.CommManager=n;var i=function(){function a(o){this.jsServicesComm=null,this.kernel=null,this.jsServicesComm=o}return Object.defineProperty(a.prototype,"comm_id",{get:function(){return this.jsServicesComm.commId},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"target_name",{get:function(){return this.jsServicesComm.targetName},enumerable:!0,configurable:!0}),a.prototype.open=function(o,s,u,c){var h=this.jsServicesComm.open(o,u,c);return this._hookupCallbacks(h,s),h.msg.header.msg_id},a.prototype.send=function(o,s,u,c){var h=this.jsServicesComm.send(o,u,c);return this._hookupCallbacks(h,s),h.msg.header.msg_id},a.prototype.close=function(o,s,u,c){var h=this.jsServicesComm.close(o,u,c);return this._hookupCallbacks(h,s),h.msg.header.msg_id},a.prototype.on_msg=function(o){this.jsServicesComm.onMsg=o.bind(this)},a.prototype.on_close=function(o){this.jsServicesComm.onClose=o.bind(this)},a.prototype._hookupCallbacks=function(o,s){s&&(o.onReply=function(u){s.shell&&s.shell.reply&&s.shell.reply(u)},o.onStdin=function(u){s.input&&s.input(u)},o.onIOPub=function(u){if(s.iopub){if(s.iopub.status&&u.header.msg_type==="status")s.iopub.status(u);else if(s.iopub.clear_output&&u.header.msg_type==="clear_output")s.iopub.clear_output(u);else if(s.iopub.output)switch(u.header.msg_type){case"display_data":case"execute_result":case"stream":case"error":s.iopub.output(u);break;default:break}}})},a}();e.Comm=i})(r=t.services||(t.services={}))})(eD||(eD={}));var wFe=function(){function t(r,e,n){this.initialize(r,e,n)}return t.prototype.initialize=function(r,e,n){this._handler_context=n||this,this._models=[],this.views=[],this._create_view=r,this._remove_view=e||function(i){i.remove()}},t.prototype.update=function(r,e,n,i){var a=n||this._remove_view,o=e||this._create_view;i=i||this._handler_context;for(var s=0;s<r.length&&!(s>=this._models.length||r[s]!==this._models[s]);s++);for(var u=s,c=this.views.splice(u,this.views.length-u),h=0;h<c.length;h++)c[h].then(function(p){a.call(i,p)});for(;s<r.length;s++)this.views.push(Promise.resolve(o.call(i,r[s],s)));return this._models=r.slice(),Promise.all(this.views)},t.prototype.remove=function(){var r=this;return Promise.all(this.views).then(function(e){e.forEach(function(n){return r._remove_view.call(r._handler_context,n)}),r.views=[],r._models=[]})},t.prototype.dispose=function(){this.views=null,this._models=null},t}();var TFe=new ree("jupyter.extensions.jupyterWidgetRegistry");function SFe(t){switch(t){case"int8":return Int8Array;case"uint8":return Uint8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"float32":return Float32Array;case"float64":return Float64Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error("Unrecognized dtype ".concat(t))}}function xie(t,r){if(!t)return null;for(var e in t){var n=t[e].attributes;for(var i in n){var a=n[i],o=a.dtype,s=a.value,u=SFe(o);n[i].value=new u(s.buffer)}}return t}function wie(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),e.push.apply(e,n)}return e}function ME(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?wie(Object(e),!0).forEach(function(n){_(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):wie(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function EFe(t){var r=CFe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function CFe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Jd=null,tD=vb&&JB;tD&&(Tie=function(t){Ke(e,t);var r=EFe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"defaults",value:function(){return ME(ME({},Yt(me(e.prototype),"defaults",this).call(this)),{},{_model_name:Jd.model_name,_model_module:Jd.model_module,_model_module_version:Jd.model_module_version,_view_name:Jd.view_name,_view_module:Jd.view_module,_view_module_version:Jd.view_module_version,custom_libraries:[],json_input:null,mapbox_key:null,selected_data:[],data_buffer:null,tooltip:null,width:"100%",height:500,js_warning:!1})}}],[{key:"serializers",get:function(){return ME(ME({},tD.serializers),{},{data_buffer:{deserialize:xie}})}},{key:"model_name",get:function(){return"JupyterTransportModel"}},{key:"model_module",get:function(){return Sy}},{key:"model_module_version",get:function(){return Ty}},{key:"view_name",get:function(){return"JupyterTransportView"}},{key:"view_module",get:function(){return Sy}},{key:"view_module_version",get:function(){return Ty}}]),e}(tD),Jd=Tie);var Tie,Sie=Jd;at();vt();function PFe(t){var r=OFe();return function(){var n=me(t),i;if(r){var a=me(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return ut(this,i)}}function OFe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Pie=null,Eie=vb&&QB;Eie&&(Cie=function(t){Ke(e,t);var r=PFe(e);function e(){return ce(this,e),r.apply(this,arguments)}return ve(e,[{key:"initialize",value:function(){this.listenTo(this.model,"destroy",this.remove),this.transport=new aE,this.transport.jupyterModel=this.model,this.transport.jupyterView=this,this.transport._initialize(),Yt(me(e.prototype),"initialize",this).apply(this,arguments)}},{key:"remove",value:function(){this.transport&&(this.transport._finalize(),this.transport.jupyterModel=null,this.transport.jupyterView=null,this.transport=null)}},{key:"render",value:function(){Yt(me(e.prototype),"render",this).call(this),this.model.on("change:json_input",this.onJsonChanged.bind(this)),this.model.on("change:data_buffer",this.onDataBufferChanged.bind(this)),this.onDataBufferChanged()}},{key:"onJsonChanged",value:function(){var i=JSON.parse(this.model.get("json_input"));this.transport._messageReceived({type:"json",json:i})}},{key:"onDataBufferChanged",value:function(){var i=this.model.get("json_input"),a=this.model.get("data_buffer");i&&a?this.transport._messageReceived({type:"json-with-binary",json:i,binary:a}):this.transport._messageReceived({type:"json",json:i})}}]),e}(Eie),Pie=Cie);var Cie,Oie=Pie;var rD={};Tl(rD,{Buffer:()=>Jn,ConeGeometry:()=>Sw,CubeGeometry:()=>ud,CylinderGeometry:()=>Cw,FEATURES:()=>ni,Framebuffer:()=>Ea,Geometry:()=>Bi,IcoSphereGeometry:()=>Ow,Model:()=>Ni,PlaneGeometry:()=>Iw,Program:()=>rd,ProgramManager:()=>ch,Renderbuffer:()=>hc,SphereGeometry:()=>Lw,Texture2D:()=>la,Texture3D:()=>kg,TextureCube:()=>Sm,Timeline:()=>ld,Transform:()=>Il,TransformFeedback:()=>nd,TruncatedConeGeometry:()=>sd,cloneTextureFrom:()=>Dg,copyToTexture:()=>Bg,cssToDeviceRatio:()=>Cl,getParameters:()=>ih,hasFeatures:()=>Mu,instrumentGLContext:()=>Qh,isWebGL2:()=>En,readPixelsToBuffer:()=>tp,setParameters:()=>Ns,withParameters:()=>Aa});var nD={};Tl(nD,{fetchFile:()=>xg,load:()=>Ks,parse:()=>ym,registerLoaders:()=>Am});var Mie=document.body&&document.body.getAttribute("data-base-url");Mie&&(window.__webpack_public_path__="".concat(Mie,"nbextensions/pydeck/nb_extension"));iE();globalThis.deck=globalThis.deck||{};Object.assign(globalThis.deck,$1);globalThis.luma=globalThis.luma||{};Object.assign(globalThis.luma,rD);globalThis.loaders=globalThis.loaders||{};Object.assign(globalThis.loaders,nD);return roe(MFe);})();
      return __exports__;
      });
//# sourceMappingURL=index.js.map
